---
description: Collect and integrate research/documentation into CLAUDE.md
---

# Collect Command

Consolidate research, documentation, API specs, pricing info, or any gathered knowledge into CLAUDE.md so the AI has persistent context without repeated searching.

## Instructions

### 1. Identify What to Collect

Review the current conversation and identify:
- Research findings (pricing, API docs, specs, etc.)
- Technical decisions made
- Architecture insights discovered
- External documentation summaries
- Integration patterns or approaches discussed
- Any knowledge that would be useful for future sessions

If nothing obvious was researched in this session, ask the user:
> What research or documentation would you like me to collect and integrate into CLAUDE.md?

### 2. Read Current CLAUDE.md

Read the existing CLAUDE.md in the project root (or create one if it doesn't exist).

Understand the current structure:
- Project description
- Current architecture
- Existing integrations
- Any previous collected knowledge

### 3. Plan the Integration

Before making changes, present a plan to the user. Ask clarifying questions:

**Required Questions:**
1. "How should this information be organized?"
   - As a new section (e.g., `## Pricing`, `## API Reference`)
   - Integrated into existing sections
   - As appendix/reference material

2. "What level of detail do you need?"
   - Full documentation (all details preserved)
   - Summary (key points only)
   - Quick reference (just the essentials for implementation)

3. "Are there any specific aspects to prioritize or exclude?"

**Optional Questions (context-dependent):**
- "Should this replace existing information or supplement it?"
- "Do you want implementation notes included?"
- "Should I include source links for reference?"

### 4. Structure the Collected Knowledge

Format the information for CLAUDE.md:

```markdown
## [Topic Name] Reference

> Collected: [date] | Source: [where it came from]

### Key Points
- [Most important takeaway]
- [Second key point]
- [Third key point]

### Details
[Organized information based on user's detail preference]

### Implementation Notes
[If applicable - how this affects the codebase]

### Quick Reference
[If applicable - copy-paste ready values, endpoints, etc.]
```

### 5. Update CLAUDE.md

Apply changes according to these rules:

**Adding New Sections:**
- Place reference/documentation sections AFTER the project description
- Place them BEFORE operational sections (Last Session, Next Steps)
- Use clear, searchable headers

**Suggested Section Order:**
1. Project description
2. Current Focus
3. Architecture / Technical Decisions
4. **Collected Knowledge Sections** (new research goes here)
5. Pipeline State (if exists)
6. Last Session
7. Next Steps

**Keep CLAUDE.md Under 300 Lines:**
- If adding would exceed this, summarize older collected sections
- Move very detailed reference material to separate files and link to them
- Prioritize actionable information over comprehensive documentation

### 6. Confirm Integration

After updating, show the user:
- What sections were added/modified
- A summary of what's now available in CLAUDE.md
- Suggestions for how to reference this information in future sessions

## Examples

### Example 1: Collecting Pricing Research

User researched Stripe pricing. After `/collect`:

```markdown
## Stripe Pricing Reference

> Collected: 2024-01-15 | Source: Stripe docs + conversation research

### Key Points
- 2.9% + $0.30 per successful card charge
- Volume discounts available at $80k+/month
- No monthly fees for standard integration

### Implementation Notes
- Use `price_data` for dynamic pricing
- Webhook for `payment_intent.succeeded` required

### Quick Reference
- Test API key prefix: `sk_test_`
- Live API key prefix: `sk_live_`
- Webhook signing secret: stored in `.env` as `STRIPE_WEBHOOK_SECRET`
```

### Example 2: Collecting API Documentation

User explored an external API. After `/collect`:

```markdown
## [Service] API Reference

> Collected: 2024-01-15 | Source: API docs + testing

### Authentication
- Bearer token in Authorization header
- Tokens expire after 24h

### Key Endpoints
| Endpoint | Method | Purpose |
|----------|--------|---------|
| /api/users | GET | List users |
| /api/users/:id | GET | Get user |

### Rate Limits
- 100 requests/minute for standard tier
- 429 response includes `Retry-After` header

### Implementation Notes
- Use exponential backoff for retries
- Cache user data for 5 minutes
```

## When to Use

Use `/collect` when you've:
- Researched external documentation or APIs
- Made architectural decisions worth preserving
- Discovered integration patterns
- Gathered pricing or service information
- Learned something that future sessions should know

## Guidelines

- **Be selective**: Not everything needs to be collected
- **Prioritize actionability**: Focus on information needed for implementation
- **Keep it scannable**: Use headers, bullets, and tables
- **Include sources**: Future you will thank present you
- **Update, don't duplicate**: If similar info exists, merge it
