---
description: Collect research and documentation into buildguide.md
---

# Collect Command

Consolidate research, documentation, API specs, pricing info, and existing plans into `buildguide.md` - a persistent build guide that grows as you research and complete sections.

## Instructions

### 1. Check if buildguide.md Exists

Check for `buildguide.md` in the project root.

**If it exists:** Skip to Step 3.

**If it does NOT exist:** This is a fresh start. Proceed to Step 2.

### 2. Initial Setup (Only When buildguide.md Doesn't Exist)

When there's no buildguide.md, we need to understand the project before creating one.

#### 2a. Launch 3 Explore Agents in Parallel

Use the Task tool to spawn 3 explore agents simultaneously (in a single message with 3 Task tool calls):

**Agent 1 - Architecture Explorer:**
```
Explore the codebase architecture. Find:
- Main entry points
- Directory structure and organization
- Key frameworks/libraries used
- Database/data layer setup
- API structure (routes, endpoints)
Return a concise summary of the technical architecture.
```

**Agent 2 - Patterns Explorer:**
```
Explore the codebase for patterns and conventions. Find:
- Code style and naming conventions
- Component/module patterns used
- State management approach
- Error handling patterns
- Testing patterns
Return a concise summary of patterns to follow.
```

**Agent 3 - Dependencies Explorer:**
```
Explore the project dependencies and integrations. Find:
- Key dependencies in package.json/requirements.txt/etc
- External services integrated (auth, payments, etc)
- Environment variables used
- Configuration files
Return a concise summary of dependencies and integrations.
```

Wait for all 3 agents to complete.

#### 2b. Collect Existing Plans

Check for any existing documentation in:
- `.claude/plans/` directory
- Any `*.md` files in the project root
- `docs/` directory if it exists

Read and summarize any relevant plans or documentation found.

#### 2c. Create buildguide.md

Using the information from the explore agents and existing plans, create buildguide.md:

```markdown
# Build Guide

> Project: [Project Name from package.json or directory name]
> Created: [today's date]
> Last Updated: [today's date]

## Overview
[One paragraph describing what this project is, based on exploration]

## Architecture
[Summary from Agent 1 - key technical decisions and structure]

## Patterns & Conventions
[Summary from Agent 2 - how code should be written]

## Dependencies & Integrations
[Summary from Agent 3 - what's already set up]

## Sections
- [ ] [Section 1 - inferred from codebase or asked from user]
- [ ] [Section 2]
- [ ] [Section 3]

---

## Research & Documentation

[Collected knowledge goes here]

---

## Existing Plans

[Any plans imported from .claude/plans/ or docs/]

---

## Completed Sections

[Sections marked complete by /checkpoint go here]
```

Ask the user:
> "I've analyzed your codebase. What sections/features are you planning to build? I'll add them to the build guide."

### 3. Identify What to Collect

Review the current conversation and identify:
- Research findings (pricing, API docs, specs, etc.)
- Technical decisions made
- Architecture insights discovered
- External documentation summaries
- Integration patterns or approaches discussed

Also check `.claude/plans/` for any new plan files not yet in buildguide.md.

If nothing obvious was researched, ask:
> What research or documentation would you like me to collect into buildguide.md?

### 4. Ask Integration Questions

Before adding content, ask the user:

1. **"What section does this research belong to?"**
   - Existing section from the Sections list
   - New section (will be added to the list)
   - General reference (goes under Research & Documentation)

2. **"What detail level?"**
   - Full (all details preserved)
   - Summary (key points + quick reference)
   - Minimal (just essentials for implementation)

### 5. Format the Collected Knowledge

Structure based on content type:

**For API/Service Research:**
```markdown
### [Service Name]

> Source: [URL or description] | Collected: [date]

**Key Points:**
- [Point 1]
- [Point 2]

**Quick Reference:**
| Item | Value |
|------|-------|
| Endpoint | `https://...` |
| Auth | Bearer token |

**Implementation Notes:**
- [Note 1]
```

**For Pricing/Plans Research:**
```markdown
### [Service] Pricing

> Source: [URL] | Collected: [date]

**Selected Plan:** [Plan name] - $X/mo

**Key Limits:**
- [Limit 1]
- [Limit 2]
```

**For Architecture/Patterns:**
```markdown
### [Pattern Name]

**Why:** [Reason for this approach]

**How:**
1. [Step 1]
2. [Step 2]

**Files Affected:**
- `path/to/file.ts`
```

**For Imported Plans:**
```markdown
### [Plan Name]

> Imported from: [file path] | Date: [date]

[Condensed plan content - key decisions and steps only]
```

### 6. Update buildguide.md

**Placement Rules:**
- Section-specific research → Under that section header
- General research → Under `## Research & Documentation`
- Imported plans → Under `## Existing Plans`
- New sections → Add to Sections checklist AND create header

**Update the metadata:**
- Change `Last Updated: [today's date]`

### 7. Show Summary

After updating, display:
```
Updated buildguide.md:
- Added: [what was added]
- Section: [which section]
- Plans imported: [list any imported from .claude/plans/]
- Next: [suggested next step or section to research]
```

## Integration with /checkpoint

When `/checkpoint` is run after completing work:
1. The relevant section in buildguide.md gets marked `[x]` complete
2. Content moves to `## Completed Sections` with completion date
3. Next uncompleted section is highlighted

## Example First Run

```
User: /collect

Claude: buildguide.md doesn't exist. Let me analyze your codebase first.

[Spawns 3 explore agents in parallel]

Agent 1 found: Next.js 14 app router, PostgreSQL with Prisma, API routes in /app/api
Agent 2 found: TypeScript strict mode, React Server Components, Zod validation
Agent 3 found: Clerk auth (partial), no payments yet, Vercel deployment

Also found 2 plans in .claude/plans/:
- user-dashboard-plan.md
- api-redesign-plan.md

Creating buildguide.md with this information...

What sections/features are you planning to build?
```

## Guidelines

- **First run triggers exploration** - 3 agents analyze the codebase in parallel
- **Plans folder is always checked** - New plans get imported on each /collect
- **buildguide.md is the single source** - All research consolidates here
- **Sections = milestones** - Each represents a completable chunk of work
- **Keep it actionable** - Focus on what's needed to build
