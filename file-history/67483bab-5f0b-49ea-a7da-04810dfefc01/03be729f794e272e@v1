# MultiAgent Automations Configuration
# Copy this file to automations.yaml and customize for your project
#
# Documentation: docs/automations.md

version: "1.0"

automations:
  # ============================================================================
  # FILE WATCHER EXAMPLES
  # ============================================================================

  # Auto-run tests when test files are saved
  - id: auto-test-runner
    name: Auto Test Runner
    enabled: true
    trigger:
      type: file_watcher
      patterns:
        - "**/*.test.ts"
        - "**/*.spec.ts"
        - "**/*.test.tsx"
        - "**/*.spec.tsx"
      events: [save]
      debounceMs: 1000
      excludePatterns:
        - "**/node_modules/**"
        - "**/dist/**"
    action:
      prompt: |
        Run the tests in {{triggerFile}}.
        If any tests fail, analyze the failure and fix the issue.
        Ensure all tests pass before completing.
      mode: test
      autoApprove: true

  # Lint TypeScript files on save
  - id: lint-on-save
    name: Lint on Save
    enabled: false  # Enable when ready
    trigger:
      type: file_watcher
      patterns:
        - "**/*.ts"
        - "**/*.tsx"
      events: [save]
      debounceMs: 500
      excludePatterns:
        - "**/node_modules/**"
        - "**/dist/**"
        - "**/*.d.ts"
    action:
      prompt: "Run ESLint on {{triggerFile}} and fix any auto-fixable issues"
      mode: code

  # Auto-generate documentation for new files
  - id: auto-docs
    name: Auto Documentation
    enabled: false
    trigger:
      type: file_watcher
      patterns:
        - "src/**/*.ts"
      events: [create]
      excludePatterns:
        - "**/*.test.ts"
        - "**/*.spec.ts"
        - "**/*.d.ts"
    action:
      prompt: |
        A new file was created at {{triggerFile}}.
        Add appropriate JSDoc comments to all exported functions and classes.
        Follow the existing documentation style in the project.
      mode: code

  # ============================================================================
  # CRON/SCHEDULED EXAMPLES (Coming Soon)
  # ============================================================================

  # Daily code review at 9am on weekdays
  - id: daily-review
    name: Daily Code Review
    enabled: false  # Cron triggers not yet implemented
    trigger:
      type: cron
      schedule: "0 9 * * 1-5"  # 9am Mon-Fri
    action:
      prompt: |
        Review all uncommitted changes in the repository.
        Check for:
        - Code quality issues
        - Potential bugs
        - Security concerns
        - Missing tests

        Provide a summary and suggestions for improvement.
      mode: architect
    conditions:
      branchPattern: "^(main|develop)$"

  # Weekly dependency check
  - id: weekly-deps
    name: Weekly Dependency Check
    enabled: false
    trigger:
      type: cron
      schedule: "0 10 * * 1"  # 10am every Monday
    action:
      prompt: |
        Check for outdated dependencies using npm outdated.
        Create a summary of packages that need updating.
        Flag any security vulnerabilities.
      mode: architect

  # ============================================================================
  # GIT HOOK EXAMPLES (Coming Soon)
  # ============================================================================

  # Pre-commit check for staged files
  - id: pre-commit-check
    name: Pre-commit Check
    enabled: false  # Git hook triggers not yet implemented
    trigger:
      type: git_hook
      hook: pre-commit
    action:
      prompt: |
        Check all staged files for:
        - TypeScript errors
        - ESLint violations
        - Formatting issues

        Fix any issues found before allowing the commit.
      mode: code
      autoApprove: true

  # Post-commit changelog update
  - id: post-commit-changelog
    name: Post-commit Changelog
    enabled: false
    trigger:
      type: git_hook
      hook: post-commit
      branches:
        - main
        - develop
    action:
      prompt: |
        A new commit was made: {{commit}}
        Update the CHANGELOG.md with a brief summary of the changes.
      mode: code
