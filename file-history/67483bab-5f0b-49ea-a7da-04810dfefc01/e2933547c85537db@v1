<p align="center">
  <a href="https://marketplace.visualstudio.com/items?itemName=imorgado.multi-agent"><img src="https://img.shields.io/badge/VS_Code_Marketplace-007ACC?style=flat&logo=visualstudiocode&logoColor=white" alt="VS Code Marketplace"></a>
  <a href="https://github.com/imorgado/multi-agent"><img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=github&logoColor=white" alt="GitHub"></a>
</p>

# MultiAgent

> Your AI-Powered Dev Team, Right in Your Editor

A fork of [Roo Code](https://github.com/RooVeterinaryInc/roo-code) with enhanced multi-agent capabilities:

- **Automations**: File watchers, scheduled tasks, git hooks
- **Multi-Project Support**: Parallel workspace agents, cross-project orchestration
- **40+ AI Providers**: Anthropic, OpenAI, Google Gemini, DeepSeek, and more
- **MCP Integration**: Connect to any Model Context Protocol server

---

## What's New in MultiAgent

### Automations (File Watchers, Cron, Git Hooks)

Configure automated AI tasks that trigger on file changes, schedules, or git events:

```yaml
# .multiagent/automations.yaml
version: "1.0"
automations:
  - id: auto-test-runner
    name: Auto Test Runner
    enabled: true
    trigger:
      type: file_watcher
      patterns: ["**/*.test.ts"]
      events: [save]
      debounceMs: 1000
    action:
      prompt: "Run tests for {{triggerFile}} and fix any failures"
      mode: test
      autoApprove: true

  - id: daily-review
    name: Daily Code Review
    trigger:
      type: cron
      schedule: "0 9 * * 1-5"
    action:
      prompt: "Review uncommitted changes"
      mode: architect
```

**Supported Triggers:**
- `file_watcher`: React to file create, change, delete, or save events
- `cron`: Schedule tasks using cron expressions (coming soon)
- `git_hook`: Trigger on pre-commit, post-commit, etc. (coming soon)

**Template Variables:**
- `{{triggerFile}}` - File path that triggered the automation
- `{{triggerEvent}}` - Event type (create, change, delete, save)
- `{{triggerTime}}` - ISO timestamp
- `{{workspacePath}}` - Workspace root path
- `{{branch}}` - Current git branch
- `{{commit}}` - Commit hash

### Multi-Project Support (Coming Soon)

Run parallel agents across multiple workspaces with cross-project orchestration.

---

## What Can MultiAgent Do For YOU?

- Generate Code from natural language descriptions and specs
- Adapt with Modes: Code, Architect, Ask, Debug, and Custom Modes
- Refactor & Debug existing code
- Write & Update documentation
- Answer Questions about your codebase
- **Automate repetitive tasks** with file watchers and scheduled triggers
- Utilize MCP Servers

## Modes

MultiAgent adapts to how you work:

- **Code Mode**: everyday coding, edits, and file ops
- **Architect Mode**: plan systems, specs, and migrations
- **Ask Mode**: fast answers, explanations, and docs
- **Debug Mode**: trace issues, add logs, isolate root causes
- **Custom Modes**: build specialized modes for your team or workflow

---

## Local Setup & Development

1. **Clone** the repo:

```sh
git clone https://github.com/imorgado/multi-agent.git
```

2. **Install dependencies**:

```sh
pnpm install
```

3. **Run the extension**:

### Development Mode (F5)

For active development, use VSCode's built-in debugging:

Press `F5` (or go to **Run** > **Start Debugging**) in VSCode. This will open a new VSCode window with the MultiAgent extension running.

- Changes to the webview will appear immediately.
- Changes to the core extension will also hot reload automatically.

### Automated VSIX Installation

To build and install the extension as a VSIX package directly into VSCode:

```sh
pnpm install:vsix [-y] [--editor=<command>]
```

This command will:

- Ask which editor command to use (code/cursor/code-insiders) - defaults to 'code'
- Uninstall any existing version of the extension.
- Build the latest VSIX package.
- Install the newly built VSIX.
- Prompt you to restart VS Code for changes to take effect.

Options:

- `-y`: Skip all confirmation prompts and use defaults
- `--editor=<command>`: Specify the editor command (e.g., `--editor=cursor` or `--editor=code-insiders`)

### Manual VSIX Installation

If you prefer to install the VSIX package manually:

1.  First, build the VSIX package:
    ```sh
    pnpm vsix
    ```
2.  A `.vsix` file will be generated in the `bin/` directory (e.g., `bin/multi-agent-<version>.vsix`).
3.  Install it manually using the VSCode CLI:
    ```sh
    code --install-extension bin/multi-agent-<version>.vsix
    ```

---

## Project Structure

```
multi-agent/
├── src/                          # Main extension source
│   ├── api/providers/            # AI provider implementations
│   ├── core/                     # Core task and tool logic
│   ├── services/
│   │   ├── automation/           # Automation system (NEW)
│   │   │   ├── AutomationManager.ts
│   │   │   ├── AutomationConfigLoader.ts
│   │   │   ├── AutomationExecutor.ts
│   │   │   ├── TriggerRegistry.ts
│   │   │   └── triggers/
│   │   │       ├── BaseTrigger.ts
│   │   │       └── FileWatcherTrigger.ts
│   │   └── task/                 # Task management
│   └── extension.ts              # Extension entry point
├── packages/
│   └── types/                    # Shared TypeScript types
│       └── src/
│           ├── automation.ts     # Automation type definitions (NEW)
│           ├── workspace.ts      # Multi-project types (NEW)
│           └── task.ts           # Task types (extended)
├── webview-ui/                   # React webview UI
└── .multiagent/                  # Configuration directory
    └── automations.yaml          # Automation configuration
```

---

## Configuration

### Automations Configuration

Create `.multiagent/automations.yaml` in your workspace root:

```yaml
version: "1.0"
automations:
  - id: unique-automation-id
    name: Human Readable Name
    enabled: true
    trigger:
      type: file_watcher
      patterns: ["**/*.ts", "**/*.tsx"]
      events: [save, create, change, delete]
      debounceMs: 500
      excludePatterns: ["**/node_modules/**", "**/dist/**"]
    action:
      prompt: "Your prompt with {{triggerFile}} variable"
      mode: code  # or architect, ask, debug, custom
      providerProfile: default
      autoApprove: false
    conditions:
      branchPattern: "^(main|develop)$"
      maxExecutionsPerHour: 10
```

---

## Disclaimer

**Please note** that this software is provided **"AS IS"** and **"AS AVAILABLE"**. You assume **all risks** associated with its use. The authors make no warranties regarding code, models, or tools provided.

---

## Contributing

Contributions welcome! Please read the contribution guidelines before submitting PRs.

---

## License

[Apache 2.0](./LICENSE)

---

## Credits

MultiAgent is a fork of [Roo Code](https://github.com/RooVeterinaryInc/roo-code), originally based on [Cline](https://github.com/cline/cline).

---

**Enjoy MultiAgent!** Whether you keep it on a short leash or let it roam autonomously, we can't wait to see what you build. Happy coding!
