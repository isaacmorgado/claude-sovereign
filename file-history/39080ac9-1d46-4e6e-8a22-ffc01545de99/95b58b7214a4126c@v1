{
  "enabledPlugins": {
    "minimal-claude@minimal-claude-marketplace": true
  },
  "mcpServers": {
    "authorizer": {
      "command": "/bin/bash",
      "args": [
        "/Users/imorgado/SPLICE/dev-tools/workspace-config/launcher.sh"
      ]
    }
  },
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check the context window usage percentage.\n\nCalculate: (input_tokens + cache_creation_input_tokens + cache_read_input_tokens) / context_window_size * 100\n\nIf the percentage is >= 40%:\n1. Return {\"decision\": \"block\", \"reason\": \"Context at X% - checkpoint required\"}\n2. This will make you continue working\n3. You MUST then run /checkpoint to save state and create continuation prompt\n4. After checkpoint completes, inform the user to run /compact or /clear to continue\n\nIf percentage is < 40%:\nReturn {\"decision\": \"allow\"} to stop normally."
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Context is being compacted. Before compaction:\n1. Update CLAUDE.md with current session state (brief summary of what was done)\n2. Output a continuation prompt the user can paste after compaction\n3. Keep it SHORT - just enough to resume context\n\nFormat:\n## Continuation Prompt\n[paste this after /compact]\n\nContinue [project] at [directory].\nDone: [1-2 bullets]\nNext: [immediate next step]\nFiles: [2-3 key files]"
          }
        ]
      }
    ]
  }
}
