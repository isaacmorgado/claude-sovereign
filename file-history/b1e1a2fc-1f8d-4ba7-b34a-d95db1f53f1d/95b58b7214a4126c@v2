{
  "model": "sonnet",
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/graceful-shutdown.sh cleanup",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/auto-continue.sh",
            "timeout": 30
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/post-edit-quality.sh",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/auto-checkpoint-trigger.sh record \"$TOOL_INPUT_file_path\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/auto-checkpoint-trigger.sh recommend",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/auto-checkpoint-trigger.sh recommend",
            "timeout": 5
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/validation-gate.sh validate_command",
            "timeout": 5
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Context is being auto-compacted. Before compaction:\n\n1. **Create Reflection**: Record what was learned this session:\n   ```bash\n   memory-manager.sh reflect session \"<what was accomplished>\" \"<key insights>\"\n   ```\n\n2. **Record Patterns**: If you learned how to fix something:\n   ```bash\n   memory-manager.sh add-pattern error_fix \"<trigger>\" \"<solution>\"\n   ```\n\n3. **Update CLAUDE.md**:\n   - Brief summary of session progress\n   - Current state (which feature, which step)\n   - Next steps to continue\n\n4. Keep CLAUDE.md under 100 lines\n\nThe auto-continue hook will generate a continuation prompt."
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/self-healing.sh health",
            "timeout": 10
          },
          {
            "type": "prompt",
            "prompt": "## Session Started\n\n**Normal Mode** - Claude will work interactively.\n\n### ðŸš€ NEW: Integrated Advanced AI Features\nThe autonomous system now includes:\n- **Reasoning Mode Switcher**: Adaptive intelligence (reflexive/deliberate/reactive)\n- **Tree of Thoughts**: Multi-path exploration for complex decisions\n- **Multi-Agent Orchestration**: Specialist routing (code, test, security, performance, docs, debug)\n- **Bounded Autonomy**: Safety guardrails with auto-escalation\n- **ReAct + Reflexion**: Self-critique and continuous learning\n- **Constitutional AI**: 8 principle validation\n- **Auto-Evaluator**: Quality gates (99%+ correctness)\n- **Reinforcement Learning**: Policy optimization from outcomes\n- **Enhanced Audit Trail**: Full decision explainability\n- **Parallel Execution**: Dependency-aware task concurrency\n\nOptionally load memory context:\n```bash\n~/.claude/hooks/memory-manager.sh get-working\n```\n\n### Available Commands:\n- `/auto` - Fully autonomous mode with advanced AI (50-100x improvement potential)\n- `/build` - Build from buildguide.md\n- `/checkpoint` - Save progress\n- `/re` - Reverse engineering toolkit\n\n### Quick Status:\n- Check for buildguide.md: If present, mention it to user\n- Check for continuation prompt: If present, ask if user wants to resume\n\nWait for user instructions."
          }
        ]
      }
    ]
  },
  "enabledPlugins": {
    "minimal-claude@minimal-claude-marketplace": true
  },
  "mcpServers": {
    "github": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-github"
      ],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "${GITHUB_TOKEN}"
      }
    },
    "macos_automator": {
      "command": "npx",
      "args": [
        "-y",
        "@steipete/macos-automator-mcp@latest"
      ]
    },
    "grep": {
      "transport": "http",
      "url": "https://mcp.grep.app"
    },
    "memory-keeper": {
      "command": "npx",
      "args": [
        "mcp-memory-keeper"
      ]
    },
    "playwright": {
      "command": "npx",
      "args": [
        "-y",
        "@playwright/mcp@latest"
      ]
    },
    "zai": {
      "command": "node",
      "args": [
        "${HOME}/.claude/zai-mcp-server.js"
      ],
      "env": {
        "GLM_API_KEY": "${GLM_API_KEY}",
        "GLM_BASE_URL": "https://api.z.ai/api/coding/paas/v4"
      }
    }
  }
}
