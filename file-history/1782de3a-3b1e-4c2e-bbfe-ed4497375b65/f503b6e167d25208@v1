"""
Supplement and Product Database
Static data for supplement recommendations and affiliate products
"""

from typing import List, Dict

# ============================================
# SUPPLEMENTS DATABASE
# Evidence-based supplements for facial aesthetics
# ============================================

SUPPLEMENTS: List[Dict] = [
    # === SKIN SUPPLEMENTS ===
    {
        "id": "collagen_peptides",
        "name": "Collagen Peptides (Hydrolyzed)",
        "category": "skin",
        "description": "Hydrolyzed collagen powder for skin elasticity and hydration",
        "dosage": "5-15g",
        "frequency": "Daily",
        "timing": "Any time, with or without food",
        "effectiveness": 7,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 15, "max": 40},
        "timelineToResults": "4-12 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["Mild digestive upset", "Bad taste (some products)"],
        "interactions": [],
        "contraindications": ["Fish/shellfish allergy (marine collagen)"],
        "targetBenefits": ["skin_elasticity", "wrinkle_reduction", "skin_hydration", "nail_strength"],
        "requiresPrescription": False,
        "notes": [
            "Type I and III collagen most beneficial for skin",
            "2019 meta-analysis: significant improvement in skin elasticity and hydration",
            "Vitamin C enhances collagen synthesis - take together",
            "Marine collagen has better bioavailability than bovine",
        ],
        "sources": ["PMC6835901", "Journal of Cosmetic Dermatology 2019"],
    },
    {
        "id": "vitamin_c_oral",
        "name": "Vitamin C (Ascorbic Acid)",
        "category": "skin",
        "description": "Essential antioxidant for collagen synthesis and skin health",
        "dosage": "500-1000mg",
        "frequency": "Daily",
        "timing": "With meals",
        "effectiveness": 7,
        "evidenceLevel": "strong",
        "costPerMonth": {"min": 5, "max": 20},
        "timelineToResults": "4-8 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["GI upset at high doses", "Kidney stones (rare, high doses)"],
        "interactions": ["May increase iron absorption"],
        "contraindications": ["History of kidney stones (high doses)"],
        "targetBenefits": ["collagen_synthesis", "antioxidant", "wound_healing", "sun_damage_protection"],
        "requiresPrescription": False,
        "notes": [
            "Required co-factor for collagen synthesis",
            "Liposomal vitamin C has better absorption",
            "Divide doses throughout day for optimal absorption",
        ],
        "sources": ["NIH Office of Dietary Supplements", "Nutrients 2017"],
    },
    {
        "id": "vitamin_e",
        "name": "Vitamin E (d-Alpha Tocopherol)",
        "category": "skin",
        "description": "Fat-soluble antioxidant for skin protection",
        "dosage": "400 IU",
        "frequency": "Daily",
        "timing": "With fatty meal",
        "effectiveness": 6,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 5, "max": 15},
        "timelineToResults": "4-8 weeks",
        "riskLevel": "low",
        "sideEffects": ["Increased bleeding risk at high doses"],
        "interactions": ["Blood thinners", "Statins"],
        "contraindications": ["Bleeding disorders", "Upcoming surgery"],
        "targetBenefits": ["skin_protection", "antioxidant", "wound_healing"],
        "requiresPrescription": False,
        "notes": [
            "Natural form (d-) is more bioavailable than synthetic (dl-)",
            "Works synergistically with vitamin C",
        ],
        "sources": ["NIH Office of Dietary Supplements"],
    },
    {
        "id": "hyaluronic_acid_oral",
        "name": "Hyaluronic Acid (Oral)",
        "category": "skin",
        "description": "Oral supplement for skin hydration and joint health",
        "dosage": "120-240mg",
        "frequency": "Daily",
        "timing": "With food",
        "effectiveness": 5,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 10, "max": 30},
        "timelineToResults": "4-12 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["Rare: mild GI upset"],
        "interactions": [],
        "contraindications": [],
        "targetBenefits": ["skin_hydration", "joint_health", "skin_elasticity"],
        "requiresPrescription": False,
        "notes": [
            "Limited evidence for oral bioavailability",
            "May work best with collagen supplementation",
        ],
        "sources": ["Nutrition Journal 2014"],
    },
    {
        "id": "astaxanthin",
        "name": "Astaxanthin",
        "category": "skin",
        "description": "Powerful carotenoid antioxidant from algae",
        "dosage": "4-12mg",
        "frequency": "Daily",
        "timing": "With fatty meal",
        "effectiveness": 7,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 15, "max": 40},
        "timelineToResults": "4-8 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["Orange/red discoloration of stool"],
        "interactions": [],
        "contraindications": [],
        "targetBenefits": ["UV_protection", "wrinkle_reduction", "skin_elasticity", "antioxidant"],
        "requiresPrescription": False,
        "notes": [
            "6000x more potent than vitamin C as antioxidant",
            "Provides internal sun protection (does not replace sunscreen)",
        ],
        "sources": ["PMC3917265", "Clinical interventions in aging 2012"],
    },

    # === HAIR SUPPLEMENTS ===
    {
        "id": "biotin",
        "name": "Biotin (Vitamin B7)",
        "category": "hair",
        "description": "B vitamin commonly supplemented for hair and nail health",
        "dosage": "2500-5000mcg",
        "frequency": "Daily",
        "timing": "With food",
        "effectiveness": 4,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 5, "max": 15},
        "timelineToResults": "3-6 months",
        "riskLevel": "very_low",
        "sideEffects": ["May interfere with lab tests (thyroid, cardiac)"],
        "interactions": ["Interferes with certain lab tests"],
        "contraindications": ["Stop 72 hours before blood tests"],
        "targetBenefits": ["hair_growth", "nail_strength"],
        "requiresPrescription": False,
        "notes": [
            "Only beneficial if you are deficient (rare)",
            "Very high doses can skew lab results",
        ],
        "sources": ["NIH Office of Dietary Supplements", "JAAD 2017"],
    },
    {
        "id": "iron",
        "name": "Iron (Ferrous Sulfate/Bisglycinate)",
        "category": "hair",
        "description": "Essential mineral for hair growth - only if deficient",
        "dosage": "18-65mg elemental iron",
        "frequency": "Daily or every other day",
        "timing": "On empty stomach with vitamin C",
        "effectiveness": 8,
        "evidenceLevel": "strong",
        "costPerMonth": {"min": 5, "max": 15},
        "timelineToResults": "3-6 months",
        "riskLevel": "low",
        "sideEffects": ["Constipation", "Nausea", "Stomach upset", "Dark stool"],
        "interactions": ["Thyroid medications", "Antacids", "Tetracyclines"],
        "contraindications": ["Hemochromatosis", "Already adequate iron levels"],
        "targetBenefits": ["hair_growth", "energy", "prevent_hair_loss"],
        "requiresPrescription": False,
        "notes": [
            "Only supplement if ferritin is low (<70ng/mL for hair)",
            "Iron bisglycinate causes less GI upset",
        ],
        "sources": ["JAAD 2013", "Journal of Korean Medical Science"],
    },
    {
        "id": "vitamin_d3",
        "name": "Vitamin D3 (Cholecalciferol)",
        "category": "hair",
        "description": "Essential vitamin for hair follicle cycling and overall health",
        "dosage": "2000-5000 IU",
        "frequency": "Daily",
        "timing": "With fatty meal",
        "effectiveness": 7,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 5, "max": 15},
        "timelineToResults": "3-6 months",
        "riskLevel": "very_low",
        "sideEffects": ["Toxicity only at very high doses (>10,000 IU daily long-term)"],
        "interactions": ["Thiazide diuretics"],
        "contraindications": ["Hypercalcemia", "Kidney disease"],
        "targetBenefits": ["hair_growth", "immune_function", "bone_health", "mood"],
        "requiresPrescription": False,
        "notes": [
            "Deficiency linked to hair loss (alopecia)",
            "Optimal blood level: 40-60 ng/mL",
            "K2 often paired with D3 for calcium metabolism",
        ],
        "sources": ["International Journal of Trichology 2013"],
    },
    {
        "id": "zinc",
        "name": "Zinc (Picolinate/Bisglycinate)",
        "category": "hair",
        "description": "Essential mineral for hair protein synthesis and immune function",
        "dosage": "15-30mg",
        "frequency": "Daily",
        "timing": "With food (not with iron)",
        "effectiveness": 6,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 5, "max": 15},
        "timelineToResults": "3-6 months",
        "riskLevel": "low",
        "sideEffects": ["Nausea if taken on empty stomach", "Copper depletion at high doses"],
        "interactions": ["Antibiotics", "Iron (take separately)"],
        "contraindications": [],
        "targetBenefits": ["hair_growth", "immune_function", "skin_healing", "acne"],
        "requiresPrescription": False,
        "notes": [
            "Deficiency can cause hair loss",
            "Long-term high doses deplete copper",
        ],
        "sources": ["Dermatology Research and Practice 2014"],
    },
    {
        "id": "saw_palmetto",
        "name": "Saw Palmetto Extract",
        "category": "hair",
        "description": "Natural DHT blocker for hair loss prevention",
        "dosage": "320mg",
        "frequency": "Daily",
        "timing": "With food",
        "effectiveness": 5,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 10, "max": 25},
        "timelineToResults": "6-12 months",
        "riskLevel": "low",
        "sideEffects": ["GI upset", "Headache"],
        "interactions": ["Blood thinners", "Hormonal contraceptives"],
        "contraindications": ["Hormone-sensitive conditions"],
        "targetBenefits": ["DHT_blocking", "hair_loss_prevention"],
        "requiresPrescription": False,
        "notes": [
            "Weaker DHT inhibition than finasteride",
            "Popular natural alternative to prescription options",
        ],
        "sources": ["Journal of Alternative and Complementary Medicine 2002"],
    },

    # === ANTI-AGING SUPPLEMENTS ===
    {
        "id": "omega_3",
        "name": "Omega-3 Fish Oil (EPA/DHA)",
        "category": "anti-aging",
        "description": "Essential fatty acids for skin health and systemic inflammation",
        "dosage": "2-3g combined EPA/DHA",
        "frequency": "Daily",
        "timing": "With fatty meal",
        "effectiveness": 7,
        "evidenceLevel": "strong",
        "costPerMonth": {"min": 15, "max": 40},
        "timelineToResults": "4-12 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["Fishy burps", "Mild GI upset"],
        "interactions": ["Blood thinners"],
        "contraindications": ["Fish allergy", "Upcoming surgery"],
        "targetBenefits": ["anti_inflammation", "skin_barrier", "brain_health", "heart_health"],
        "requiresPrescription": False,
        "notes": [
            "Look for products tested for heavy metals/PCBs",
            "EPA more anti-inflammatory, DHA more for brain",
        ],
        "sources": ["Journal of the American Academy of Dermatology", "American Heart Association"],
    },
    {
        "id": "coq10",
        "name": "CoQ10 (Ubiquinol)",
        "category": "anti-aging",
        "description": "Cellular energy and antioxidant for aging skin",
        "dosage": "100-200mg",
        "frequency": "Daily",
        "timing": "With fatty meal",
        "effectiveness": 6,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 15, "max": 40},
        "timelineToResults": "4-12 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["Rare: insomnia, digestive upset"],
        "interactions": ["Blood thinners", "Blood pressure medications"],
        "contraindications": [],
        "targetBenefits": ["cellular_energy", "antioxidant", "wrinkle_reduction"],
        "requiresPrescription": False,
        "notes": [
            "Ubiquinol is active form, better absorbed than ubiquinone",
            "CoQ10 levels decline with age",
        ],
        "sources": ["Biofactors 2017", "Clinical Interventions in Aging"],
    },
    {
        "id": "nad_precursor",
        "name": "NMN or NR (NAD+ Precursor)",
        "category": "anti-aging",
        "description": "Nicotinamide precursor for cellular energy and longevity",
        "dosage": "250-500mg",
        "frequency": "Daily",
        "timing": "Morning, with or without food",
        "effectiveness": 5,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 40, "max": 100},
        "timelineToResults": "4-12 weeks (subjective energy), long-term unknown",
        "riskLevel": "low",
        "sideEffects": ["Mild nausea", "Insomnia if taken late"],
        "interactions": [],
        "contraindications": [],
        "targetBenefits": ["cellular_energy", "longevity", "DNA_repair"],
        "requiresPrescription": False,
        "notes": [
            "Popular longevity supplement but human evidence limited",
            "Animal studies promising, human studies ongoing",
        ],
        "sources": ["Cell Metabolism 2018", "Nature Communications"],
    },
    {
        "id": "resveratrol",
        "name": "Resveratrol",
        "category": "anti-aging",
        "description": "Polyphenol antioxidant from grapes with potential longevity benefits",
        "dosage": "250-500mg",
        "frequency": "Daily",
        "timing": "With fatty meal",
        "effectiveness": 4,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 15, "max": 40},
        "timelineToResults": "Long-term (months-years)",
        "riskLevel": "low",
        "sideEffects": ["GI upset at high doses"],
        "interactions": ["Blood thinners", "Medications metabolized by liver"],
        "contraindications": ["Hormone-sensitive conditions"],
        "targetBenefits": ["antioxidant", "longevity", "cardiovascular"],
        "requiresPrescription": False,
        "notes": [
            "Trans-resveratrol is the active form",
            "Poor bioavailability - look for enhanced formulations",
        ],
        "sources": ["Nutrients 2020", "Annals of the New York Academy of Sciences"],
    },

    # === HORMONAL SUPPORT ===
    {
        "id": "ashwagandha",
        "name": "Ashwagandha (KSM-66)",
        "category": "hormonal",
        "description": "Adaptogen for stress reduction and testosterone support",
        "dosage": "300-600mg",
        "frequency": "Daily",
        "timing": "Morning or evening with food",
        "effectiveness": 7,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 10, "max": 30},
        "timelineToResults": "4-8 weeks",
        "riskLevel": "low",
        "sideEffects": ["Drowsiness", "GI upset", "Thyroid changes"],
        "interactions": ["Thyroid medications", "Sedatives"],
        "contraindications": ["Thyroid disorders (consult doctor)", "Autoimmune conditions"],
        "targetBenefits": ["stress_reduction", "testosterone", "sleep", "anxiety"],
        "requiresPrescription": False,
        "notes": [
            "KSM-66 is the most studied extract",
            "May modestly increase testosterone in men",
        ],
        "sources": ["Journal of the International Society of Sports Nutrition 2015", "Cureus 2019"],
    },
    {
        "id": "tongkat_ali",
        "name": "Tongkat Ali (Eurycoma Longifolia)",
        "category": "hormonal",
        "description": "Malaysian herb for testosterone and energy support",
        "dosage": "200-400mg",
        "frequency": "Daily",
        "timing": "Morning with food",
        "effectiveness": 6,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 20, "max": 50},
        "timelineToResults": "4-12 weeks",
        "riskLevel": "low",
        "sideEffects": ["Restlessness", "Insomnia", "Increased aggression"],
        "interactions": [],
        "contraindications": ["Hormone-sensitive cancers"],
        "targetBenefits": ["testosterone", "energy", "libido", "stress_reduction"],
        "requiresPrescription": False,
        "notes": [
            "Look for standardized extracts (2% eurycomanone)",
            "Cycle usage: 5 days on, 2 days off",
        ],
        "sources": ["Andrologia 2012", "Journal of the International Society of Sports Nutrition 2013"],
    },
    {
        "id": "dim",
        "name": "DIM (Diindolylmethane)",
        "category": "hormonal",
        "description": "Cruciferous vegetable extract for estrogen metabolism",
        "dosage": "100-200mg",
        "frequency": "Daily",
        "timing": "With food",
        "effectiveness": 5,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 15, "max": 30},
        "timelineToResults": "4-8 weeks",
        "riskLevel": "low",
        "sideEffects": ["GI upset", "Headache", "Dark urine"],
        "interactions": ["Medications metabolized by CYP enzymes"],
        "contraindications": ["Hormone-sensitive conditions (consult doctor)"],
        "targetBenefits": ["estrogen_balance", "acne", "hormonal_balance"],
        "requiresPrescription": False,
        "notes": [
            "Promotes favorable estrogen metabolism",
            "May help with hormonal acne",
        ],
        "sources": ["Nutrition Reviews 2016"],
    },

    # === BONE & COLLAGEN SUPPORT ===
    {
        "id": "vitamin_k2",
        "name": "Vitamin K2 (MK-7)",
        "category": "bone",
        "description": "Fat-soluble vitamin for calcium metabolism and bone health",
        "dosage": "100-200mcg",
        "frequency": "Daily",
        "timing": "With fatty meal, paired with D3",
        "effectiveness": 6,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 10, "max": 25},
        "timelineToResults": "Long-term (months)",
        "riskLevel": "very_low",
        "sideEffects": [],
        "interactions": ["Blood thinners (warfarin)"],
        "contraindications": ["On warfarin (consult doctor)"],
        "targetBenefits": ["bone_health", "calcium_metabolism", "cardiovascular"],
        "requiresPrescription": False,
        "notes": [
            "Directs calcium to bones, away from arteries",
            "MK-7 form has longer half-life than MK-4",
        ],
        "sources": ["Osteoporosis International 2013", "Thrombosis and Haemostasis"],
    },
    {
        "id": "silica",
        "name": "Silica (Orthosilicic Acid)",
        "category": "bone",
        "description": "Trace mineral for collagen formation and bone health",
        "dosage": "5-10mg",
        "frequency": "Daily",
        "timing": "With food",
        "effectiveness": 5,
        "evidenceLevel": "weak",
        "costPerMonth": {"min": 10, "max": 25},
        "timelineToResults": "3-6 months",
        "riskLevel": "very_low",
        "sideEffects": [],
        "interactions": [],
        "contraindications": [],
        "targetBenefits": ["collagen_formation", "hair", "nails", "bone_health"],
        "requiresPrescription": False,
        "notes": [
            "Orthosilicic acid is most bioavailable form",
            "May support collagen and connective tissue",
        ],
        "sources": ["BMC Musculoskeletal Disorders 2007"],
    },
    {
        "id": "msm",
        "name": "MSM (Methylsulfonylmethane)",
        "category": "bone",
        "description": "Sulfur compound for joint health and collagen",
        "dosage": "1000-3000mg",
        "frequency": "Daily",
        "timing": "With food",
        "effectiveness": 5,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 10, "max": 25},
        "timelineToResults": "4-12 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["GI upset", "Headache (rare)"],
        "interactions": [],
        "contraindications": [],
        "targetBenefits": ["joint_health", "collagen_support", "inflammation"],
        "requiresPrescription": False,
        "notes": [
            "Provides sulfur for collagen and keratin",
            "Often combined with glucosamine for joints",
        ],
        "sources": ["Osteoarthritis and Cartilage 2006"],
    },

    # === GENERAL OPTIMIZATION ===
    {
        "id": "creatine",
        "name": "Creatine Monohydrate",
        "category": "general",
        "description": "Most studied sports supplement with potential cognitive and skin benefits",
        "dosage": "3-5g",
        "frequency": "Daily",
        "timing": "Any time, consistency matters more",
        "effectiveness": 9,
        "evidenceLevel": "strong",
        "costPerMonth": {"min": 5, "max": 15},
        "timelineToResults": "4-8 weeks for full saturation",
        "riskLevel": "very_low",
        "sideEffects": ["Water retention", "Weight gain (water/muscle)"],
        "interactions": [],
        "contraindications": ["Kidney disease"],
        "targetBenefits": ["muscle", "cognitive", "energy", "potential_skin_benefits"],
        "requiresPrescription": False,
        "notes": [
            "Most researched supplement with excellent safety profile",
            "Monohydrate is the gold standard - no need for fancy forms",
        ],
        "sources": ["ISSN Position Stand 2017", "PMC5469049"],
    },
    {
        "id": "magnesium",
        "name": "Magnesium (Glycinate/Threonate)",
        "category": "general",
        "description": "Essential mineral for sleep, stress, and overall health",
        "dosage": "200-400mg elemental",
        "frequency": "Daily",
        "timing": "Evening, before bed",
        "effectiveness": 8,
        "evidenceLevel": "strong",
        "costPerMonth": {"min": 10, "max": 25},
        "timelineToResults": "2-4 weeks",
        "riskLevel": "very_low",
        "sideEffects": ["Loose stools (especially oxide form)"],
        "interactions": ["Some antibiotics", "Bisphosphonates"],
        "contraindications": ["Kidney disease"],
        "targetBenefits": ["sleep", "stress_reduction", "muscle_relaxation", "heart_health"],
        "requiresPrescription": False,
        "notes": [
            "50% of population is deficient",
            "Glycinate best for sleep and bioavailability",
        ],
        "sources": ["NIH Office of Dietary Supplements", "Nutrients 2017"],
    },
    {
        "id": "glycine",
        "name": "Glycine",
        "category": "general",
        "description": "Amino acid for sleep quality and collagen synthesis",
        "dosage": "3g",
        "frequency": "Daily",
        "timing": "Before bed",
        "effectiveness": 7,
        "evidenceLevel": "moderate",
        "costPerMonth": {"min": 10, "max": 20},
        "timelineToResults": "1-2 weeks for sleep effects",
        "riskLevel": "very_low",
        "sideEffects": ["Mild nausea (rare)"],
        "interactions": [],
        "contraindications": [],
        "targetBenefits": ["sleep_quality", "collagen_synthesis", "glycine_synthesis"],
        "requiresPrescription": False,
        "notes": [
            "3g before bed improves subjective sleep quality",
            "Component of collagen (33% of collagen is glycine)",
        ],
        "sources": ["Sleep and Biological Rhythms 2006", "Neuropsychopharmacology 2015"],
    },
]


# ============================================
# PRODUCTS DATABASE (Affiliate Links)
# ============================================

PRODUCTS: List[Dict] = [
    # === BASE STACK ITEMS (6 products - shown to ALL users) ===
    {
        "id": "collagen_vital_proteins",
        "name": "Collagen Peptides",
        "brand": "Vital Proteins",
        "category": "skin",
        "affiliateLink": "https://amazon.com/dp/B00K9XZTW0?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "collagen_peptides",
        "priority": 10,
        "baseStackItem": True,
    },
    {
        "id": "vitamin_c_now",
        "name": "Vitamin C 1000mg",
        "brand": "NOW Foods",
        "category": "skin",
        "affiliateLink": "https://amazon.com/dp/B0013OQGO6?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "vitamin_c_oral",
        "priority": 9,
        "baseStackItem": True,
    },
    {
        "id": "d3_k2_sports_research",
        "name": "Vitamin D3+K2",
        "brand": "Sports Research",
        "category": "bone",
        "affiliateLink": "https://amazon.com/dp/B01N5P3E9X?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "vitamin_d3",
        "priority": 9,
        "baseStackItem": True,
    },
    {
        "id": "magnesium_doctors_best",
        "name": "Magnesium Glycinate",
        "brand": "Doctor's Best",
        "category": "general",
        "affiliateLink": "https://amazon.com/dp/B000BD0RT0?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "magnesium",
        "priority": 8,
        "baseStackItem": True,
    },
    {
        "id": "omega3_nordic",
        "name": "Omega-3 Fish Oil",
        "brand": "Nordic Naturals",
        "category": "anti-aging",
        "affiliateLink": "https://www.nordicnaturals.com/products/ultimate-omega?ref=looksmaxx",
        "affiliateType": "direct",
        "supplementId": "omega_3",
        "priority": 8,
        "baseStackItem": True,
    },
    {
        "id": "creatine_optimum",
        "name": "Creatine Monohydrate",
        "brand": "Optimum Nutrition",
        "category": "general",
        "affiliateLink": "https://amazon.com/dp/B002DYIZEO?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "creatine",
        "priority": 9,
        "baseStackItem": True,
    },

    # === TARGETED PRODUCTS (shown based on metrics) ===
    {
        "id": "ashwagandha_now",
        "name": "Ashwagandha KSM-66",
        "brand": "NOW Foods",
        "category": "hormonal",
        "affiliateLink": "https://amazon.com/dp/B01D0YJAD8?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "ashwagandha",
        "priority": 7,
        "baseStackItem": False,
    },
    {
        "id": "astaxanthin_sports",
        "name": "Astaxanthin 12mg",
        "brand": "Sports Research",
        "category": "skin",
        "affiliateLink": "https://amazon.com/dp/B01N9QMTLJ?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "astaxanthin",
        "priority": 7,
        "baseStackItem": False,
    },
    {
        "id": "biotin_sports",
        "name": "Biotin 5000mcg",
        "brand": "Sports Research",
        "category": "hair",
        "affiliateLink": "https://amazon.com/dp/B01M4MC7EU?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "biotin",
        "priority": 5,
        "baseStackItem": False,
    },
    {
        "id": "iron_thorne",
        "name": "Iron Bisglycinate",
        "brand": "Thorne",
        "category": "hair",
        "affiliateLink": "https://www.thorne.com/products/dp/iron-bisglycinate?ref=looksmaxx",
        "affiliateType": "direct",
        "supplementId": "iron",
        "priority": 6,
        "baseStackItem": False,
    },
    {
        "id": "saw_palmetto_now",
        "name": "Saw Palmetto Extract",
        "brand": "NOW Foods",
        "category": "hair",
        "affiliateLink": "https://amazon.com/dp/B0013OQGZ0?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "saw_palmetto",
        "priority": 5,
        "baseStackItem": False,
    },
    {
        "id": "coq10_jarrow",
        "name": "CoQ10 Ubiquinol",
        "brand": "Jarrow Formulas",
        "category": "anti-aging",
        "affiliateLink": "https://amazon.com/dp/B0013OVVK0?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "coq10",
        "priority": 6,
        "baseStackItem": False,
    },
    {
        "id": "nmn_prohealth",
        "name": "NMN 250mg",
        "brand": "ProHealth Longevity",
        "category": "anti-aging",
        "affiliateLink": "https://www.prohealthlongevity.com/products/nmn-pro-500?ref=looksmaxx",
        "affiliateType": "direct",
        "supplementId": "nad_precursor",
        "priority": 6,
        "baseStackItem": False,
    },
    {
        "id": "tongkat_doublewood",
        "name": "Tongkat Ali 200mg",
        "brand": "Double Wood",
        "category": "hormonal",
        "affiliateLink": "https://amazon.com/dp/B07K3PZZFH?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "tongkat_ali",
        "priority": 6,
        "baseStackItem": False,
    },
    {
        "id": "msm_now",
        "name": "MSM 1000mg",
        "brand": "NOW Foods",
        "category": "bone",
        "affiliateLink": "https://amazon.com/dp/B0013OUKTS?tag=looksmaxx-20",
        "affiliateType": "amazon",
        "supplementId": "msm",
        "priority": 5,
        "baseStackItem": False,
    },
]


# ============================================
# METRIC TO PRODUCT MAPPING
# ============================================

METRIC_TO_PRODUCTS: Dict[str, List[str]] = {
    # Skin quality metrics -> skin products
    "Skin Texture Score": ["collagen_peptides", "vitamin_c_oral", "astaxanthin", "vitamin_e"],
    "Under Eye Area": ["collagen_peptides", "hyaluronic_acid_oral", "vitamin_e", "coq10"],
    "Skin Quality": ["collagen_peptides", "astaxanthin", "vitamin_c_oral", "omega_3"],

    # Bone/structure metrics -> bone + muscle products
    "Gonial Angle": ["creatine", "vitamin_d3", "vitamin_k2", "magnesium"],
    "Bigonial Width": ["creatine", "vitamin_d3", "vitamin_k2"],
    "Jaw Projection": ["creatine", "vitamin_d3", "magnesium"],
    "Cheekbone Height": ["collagen_peptides", "vitamin_k2", "silica", "vitamin_d3"],
    "Cheekbone Prominence": ["collagen_peptides", "vitamin_k2", "vitamin_d3"],
    "Chin Projection": ["creatine", "vitamin_d3", "vitamin_k2"],

    # Eye metrics -> general anti-aging
    "Canthal Tilt": ["collagen_peptides", "vitamin_c_oral", "astaxanthin"],
    "Eye Spacing Ratio": ["collagen_peptides", "vitamin_c_oral"],
    "Palpebral Fissure Height": ["collagen_peptides", "vitamin_c_oral"],

    # Hair metrics -> hair products
    "Hairline Position": ["biotin", "vitamin_d3", "iron", "saw_palmetto"],
    "Hairline Recession": ["biotin", "saw_palmetto", "iron", "vitamin_d3"],

    # Nose metrics -> collagen + structure
    "Nasal Tip Angle": ["collagen_peptides", "vitamin_c_oral"],
    "Nasal Bridge Width": ["collagen_peptides", "vitamin_c_oral"],

    # Lips -> collagen
    "Lip Fullness": ["collagen_peptides", "hyaluronic_acid_oral", "vitamin_c_oral"],
    "Upper Lip Height": ["collagen_peptides", "vitamin_c_oral"],

    # Neck -> posture + muscle
    "Neck Posture": ["magnesium", "vitamin_d3", "creatine"],
    "Cervicomental Angle": ["creatine", "magnesium"],

    # General harmony -> comprehensive stack
    "Overall Facial Harmony": ["omega_3", "coq10", "collagen_peptides", "vitamin_d3"],
    "Facial Symmetry": ["omega_3", "magnesium", "vitamin_d3"],

    # Age-related -> anti-aging
    "Facial Aging Score": ["nad_precursor", "resveratrol", "coq10", "collagen_peptides"],
    "Skin Laxity": ["collagen_peptides", "vitamin_c_oral", "astaxanthin", "coq10"],
}

# Category fallbacks (if specific metric not found)
CATEGORY_TO_PRODUCTS: Dict[str, List[str]] = {
    "skin": ["collagen_peptides", "vitamin_c_oral", "astaxanthin", "vitamin_e"],
    "bone": ["vitamin_d3", "vitamin_k2", "creatine", "magnesium", "silica", "msm"],
    "hair": ["biotin", "iron", "saw_palmetto", "vitamin_d3", "zinc"],
    "anti-aging": ["nad_precursor", "coq10", "resveratrol", "omega_3"],
    "hormonal": ["ashwagandha", "tongkat_ali", "dim", "vitamin_d3"],
    "general": ["omega_3", "magnesium", "vitamin_d3", "creatine"],
}


# ============================================
# HELPER FUNCTIONS
# ============================================

def get_supplement_by_id(supplement_id: str) -> Dict | None:
    """Get supplement by ID"""
    return next((s for s in SUPPLEMENTS if s["id"] == supplement_id), None)


def get_product_by_id(product_id: str) -> Dict | None:
    """Get product by ID"""
    return next((p for p in PRODUCTS if p["id"] == product_id), None)


def get_product_by_supplement_id(supplement_id: str) -> Dict | None:
    """Get product by supplement ID"""
    return next((p for p in PRODUCTS if p["supplementId"] == supplement_id), None)


def get_base_stack_products() -> List[Dict]:
    """Get all base stack products (shown to all users)"""
    return sorted(
        [p for p in PRODUCTS if p.get("baseStackItem", False)],
        key=lambda p: p["priority"],
        reverse=True
    )


def get_products_by_category(category: str) -> List[Dict]:
    """Get products by category"""
    return sorted(
        [p for p in PRODUCTS if p["category"] == category],
        key=lambda p: p["priority"],
        reverse=True
    )


def get_supplements_by_category(category: str) -> List[Dict]:
    """Get supplements by category"""
    return [s for s in SUPPLEMENTS if s["category"] == category]
