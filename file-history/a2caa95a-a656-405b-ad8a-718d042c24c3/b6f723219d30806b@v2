# SPLICE UI Debugging Guide for Danny

**Issue Reported:** "None of UI is working"
**Date:** January 12, 2026
**License Key:** `SPLICE-Y2Q9-6G9G-MFQE`

---

## ðŸ”´ CRITICAL FINDING FROM LOGS

Your CEP panel logs show a critical error:

```
2026-01-12 18:45:03:791 : ERROR Heartbeat call failed.
2026-01-12 18:45:03:889 : INFO  --Exiting...--
```

**This means:** The panel is crashing or losing connection to Premiere Pro, which explains why "none of UI is working".

---

## Step 1: Open Chrome Remote Debugger

The best way to see what's actually failing is to connect to the Chrome DevTools console.

### Instructions:

1. **Launch Premiere Pro 2025**
2. **Open SPLICE Panel:**
   - Go to: `Window` â†’ `Extensions` â†’ `SPLICE - AI Video Editor`
3. **Wait 3-5 seconds** for panel to fully load
4. **Open Chrome (or any Chromium browser)**
5. **Navigate to:** `http://localhost:8088/`

You should see a page showing "Inspectable pages" with an entry for SPLICE.

6. **Click the page entry** or **click "inspect"** to open DevTools

---

## Step 2: Check Console for Errors

Once DevTools is open:

### Look for these specific error types:

#### âŒ **Authentication Errors**
```javascript
Failed to fetch
CORS error
401 Unauthorized
Invalid token
```

#### âŒ **JSX Bridge Errors**
```javascript
CSInterface not available
hostScript.jsx not loaded
EvalScript timeout
```

#### âŒ **Backend Connection Errors**
```javascript
ERR_CONNECTION_REFUSED
ERR_CERT_AUTHORITY_INVALID
Network request failed
```

#### âŒ **DOM Errors**
```javascript
Cannot read property 'addEventListener' of null
getElementById returned null
```

### Take Screenshots:

1. **Console tab** - showing any red error messages
2. **Network tab** - showing failed requests (if any)
3. **Sources tab** - showing which scripts loaded

---

## Step 3: Test UI Elements Manually

With DevTools still open, test each UI element and watch the console for errors:

### Test Checklist:

| Action | Expected | Watch Console |
|--------|----------|---------------|
| **Click "Login" badge** (top right) | Modal opens | Any errors? |
| **Click "Options" button** | Panel expands | Any errors? |
| **Move Sensitivity slider** | Value updates | Any errors? |
| **Click ðŸ” Debug button** | Debug modal opens | Any errors? |
| **Click "Run Diagnostics"** | Tests run | Which tests fail? |
| **Check J-Cut checkbox** | Options appear | Any errors? |
| **Click "GO" button** | Status changes | Any errors? |

### For Each Failed Action:

1. **Note the exact error** in console (copy full error text)
2. **Take screenshot** of error
3. **Note what you clicked**

---

## Step 4: Run Built-in Diagnostics

The SPLICE panel has built-in diagnostics:

1. Click the **ðŸ” Debug button** (top right)
2. Click **"Run Diagnostics"**
3. Wait for all 7 tests to complete
4. Click **"Copy to Clipboard"**
5. **Paste results** into a text file and save

### Expected Results:
```
âœ“ CSInterface available
âœ“ JSX connection OK
âœ“ hostScript.jsx loaded
âœ“ Sequence open
âœ“ Backend reachable
âœ“ Everything Looks Good
```

### If Tests Fail:

**Test 1-2 Fail (CSInterface/JSX):**
- CEP environment is broken
- Need to reinstall SPLICE

**Test 3-4 Fail (hostScript):**
- Run the patch script: `bash patch-danny-cep.sh`
- Restart Premiere Pro

**Test 5 Fail (Backend):**
- Internet connection issue
- Backend URL misconfigured
- Check: `localStorage.getItem('spliceBackendUrl')`

**Test 6-7 Fail (Sequence/QE):**
- No sequence open (expected)
- Open a sequence and retest

---

## Step 5: Check localStorage Configuration

In Chrome DevTools Console, run these commands:

```javascript
// Check backend URL
localStorage.getItem('spliceBackendUrl')
// Should return: null (uses default production)
// or: "https://splice-api-production.up.railway.app"

// Check auth token
localStorage.getItem('spliceAuthToken')
// Should return: JWT token string OR null (not logged in)

// Check debug mode
localStorage.getItem('spliceDebugMode')
// Should return: null OR "true"

// Enable debug mode (get verbose logs)
localStorage.setItem('spliceDebugMode', 'true')
// Reload panel to see debug logs

// Check all SPLICE keys
Object.keys(localStorage).filter(k => k.includes('splice'))
```

---

## Step 6: Check Network Requests

1. Open **Network tab** in DevTools
2. **Reload the panel** (close and reopen from Premiere Pro)
3. Watch for requests

### What to Look For:

#### âœ… **Successful Requests:**
```
GET /health â†’ 200 OK
GET /auth/csrf-token â†’ 200 OK
POST /auth/login â†’ 200 OK
GET /music/credits â†’ 200 OK
```

#### âŒ **Failed Requests:**
```
(failed) net::ERR_CONNECTION_REFUSED
(failed) net::ERR_CERT_AUTHORITY_INVALID
404 Not Found
500 Internal Server Error
```

### Take Screenshot:
- Network tab showing **all requests** (both successful and failed)

---

## Step 7: Test Backend Directly

Open Terminal and test backend connectivity:

```bash
# Test 1: Health Check
curl -s https://splice-api-production.up.railway.app/health | jq

# Expected: {"status":"ok","service":"splice-backend",...}

# Test 2: Get CSRF Token
curl -s https://splice-api-production.up.railway.app/auth/csrf-token | jq

# Expected: {"success":true,"csrfToken":"..."}

# Test 3: Login with your key
curl -s -X POST https://splice-api-production.up.railway.app/auth/login \
  -H "Content-Type: application/json" \
  -H "X-CSRF-Token: [token from test 2]" \
  -d '{"licenseKey":"SPLICE-Y2Q9-6G9G-MFQE"}' | jq

# Expected: {"success":true,"token":"eyJ...","tier":"team",...}
```

### If Any Fail:
- **Health check fails:** Backend is down or internet connection issue
- **CSRF fails:** Backend CORS misconfiguration
- **Login fails:** License key invalid or backend auth broken

---

## Step 8: Common Issues & Fixes

### Issue 1: "Heartbeat call failed" (Your Current Issue)

**Symptoms:**
- Panel loads but then crashes
- UI stops responding after a few seconds
- Console shows "Heartbeat call failed"

**Possible Causes:**
1. JSX bridge timeout
2. Premiere Pro losing connection to CEP
3. Memory leak in panel causing crash

**Fixes to Try:**

**A) Increase JSX Timeout:**
```javascript
// In DevTools Console:
jsx.EVAL_TIMEOUT = 30000;  // Increase to 30 seconds
```

**B) Restart Premiere Pro:**
- Quit Premiere Pro **completely** (Cmd+Q)
- Reopen and test panel

**C) Clear localStorage:**
```javascript
// In DevTools Console:
localStorage.clear();
// Reload panel
```

**D) Run Patch Script:**
```bash
cd /Users/imorgado/SPLICE
bash patch-danny-cep.sh
```

---

### Issue 2: "CSInterface not available"

**Fix:**
1. Check if `.debug` file exists:
   ```bash
   ls -la "$HOME/Library/Application Support/Adobe/CEP/extensions/com.splice.cep/.debug"
   ```
2. Verify `PlayerDebugMode` is enabled:
   ```bash
   defaults read com.adobe.CSXS.13 PlayerDebugMode
   # Should return: 1
   ```
3. If not enabled:
   ```bash
   defaults write com.adobe.CSXS.13 PlayerDebugMode 1
   # Restart Premiere Pro
   ```

---

### Issue 3: "hostScript.jsx not loaded"

**Fix:**
1. Verify file exists:
   ```bash
   ls -la "$HOME/Library/Application Support/Adobe/CEP/extensions/com.splice.cep/jsx/hostScript.jsx"
   ```
2. Run patch script:
   ```bash
   bash patch-danny-cep.sh
   ```
3. Restart Premiere Pro

---

### Issue 4: UI Elements Don't Respond to Clicks

**Symptoms:**
- Buttons don't do anything when clicked
- No console errors
- Panel looks loaded but is "frozen"

**Possible Causes:**
1. JavaScript not fully initialized
2. Event listeners not attached
3. Overlay blocking clicks (like loading screen)

**Debugging:**
```javascript
// In DevTools Console:

// Check if main.js loaded
typeof jsx !== 'undefined'  // Should be true

// Check if GO button exists
document.getElementById('goBtn')  // Should not be null

// Check if event listener is attached
document.getElementById('goBtn').onclick  // Should not be null

// Try clicking programmatically
document.getElementById('goBtn').click()  // Watch console for response
```

**If clicking programmatically works:**
- There's an overlay blocking user clicks
- Check z-index of loading overlay:
  ```javascript
  document.getElementById('loading-overlay').style.display
  // Should be: "none"
  ```

---

### Issue 5: Login Button Doesn't Work

**Debug:**
```javascript
// Check if login modal exists
document.getElementById('loginModal')  // Should not be null

// Check credit badge
document.getElementById('creditBadge')  // Should not be null

// Try opening login modal manually
document.getElementById('loginModal').classList.remove('hidden')

// Check if modal appears
```

---

## Step 9: Collect Full Diagnostic Report

Run these commands and save output:

```bash
# 1. CEP logs (last 100 lines)
tail -100 ~/Library/Logs/CSXS/CEP12-PPRO.log > ~/Desktop/splice-debug-cep-log.txt

# 2. Panel logs
tail -100 ~/Library/Logs/CSXS/CEPHtmlEngine12-PPRO-25.6.3-com.splice.panel.main.log > ~/Desktop/splice-debug-panel-log.txt

# 3. Check installation
ls -laR "$HOME/Library/Application Support/Adobe/CEP/extensions/com.splice.cep" > ~/Desktop/splice-debug-files.txt

# 4. Check debug mode
defaults read com.adobe.CSXS.13 PlayerDebugMode >> ~/Desktop/splice-debug-config.txt 2>&1
defaults read com.adobe.CSXS.12 PlayerDebugMode >> ~/Desktop/splice-debug-config.txt 2>&1
```

---

## Step 10: Take Screenshots

Please take screenshots of:

1. **SPLICE panel UI** (full panel view)
2. **Chrome DevTools Console tab** (showing all errors in red)
3. **Chrome DevTools Network tab** (showing all requests)
4. **Debug modal results** (after running diagnostics)
5. **Any error dialogs** (if they pop up)

Save all screenshots to: `~/Desktop/splice-debug-screenshots/`

---

## What to Send Back

Create a zip file with:

```bash
cd ~/Desktop
mkdir splice-debug-report
cp splice-debug-*.txt splice-debug-report/
cp -r splice-debug-screenshots splice-debug-report/
zip -r splice-debug-report.zip splice-debug-report/
```

Send me:
1. `splice-debug-report.zip`
2. Description of exactly what you clicked when UI stopped working
3. Any error messages you saw

---

## Quick Fixes to Try First

**Before doing full debugging, try these in order:**

### Fix 1: Clear Cache and Restart
```bash
# Close Premiere Pro
# Clear localStorage (open Chrome DevTools, Console tab):
localStorage.clear()
# Restart Premiere Pro
# Open SPLICE panel
```

### Fix 2: Run Patch Script
```bash
cd /Users/imorgado/SPLICE
bash patch-danny-cep.sh
# Restart Premiere Pro
```

### Fix 3: Reinstall SPLICE
```bash
# Close Premiere Pro
rm -rf "$HOME/Library/Application Support/Adobe/CEP/extensions/com.splice.cep"
# Run installer again
open /Users/imorgado/SPLICE/dist/SPLICE-Installer-6.0.8.pkg
# Restart Premiere Pro
```

### Fix 4: Enable Debug Logging
```javascript
// In Chrome DevTools Console (with SPLICE panel open):
localStorage.setItem('spliceDebugMode', 'true')
// Reload panel (close and reopen in Premiere Pro)
// Watch console for detailed [SPLICE DEBUG] logs
```

---

## Expected Working State

When everything is working correctly, you should see:

### In Console:
```
[SPLICE] Initializing CEP panel...
[JSX] CSInterface initialized
[JSX] hostScript.jsx loaded and ready
[SPLICE] Element caching complete
[SPLICE] Event listeners initialized
[SPLICE] Feature modules loaded
[SPLICE] JSX bridge ready
[SPLICE] Sequence event listeners initialized
[SPLICE] CEP panel initialized
```

### In UI:
- Panel loads within 2 seconds
- "Login" badge clickable (top right)
- "Options" button expands panel
- All sliders move smoothly
- Debug button opens diagnostics
- All 7 diagnostic tests pass âœ“

---

## Contact Info

If none of these fixes work, send me:
- `splice-debug-report.zip`
- Screenshots showing the issue
- Exact steps to reproduce

I'll analyze the logs and console errors to determine the root cause.

---

**Debug Guide Version:** 1.0
**Created:** January 12, 2026
**For:** Danny Isakov
