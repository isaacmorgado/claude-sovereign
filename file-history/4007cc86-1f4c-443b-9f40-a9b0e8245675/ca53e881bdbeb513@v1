'use client';

import { useState } from 'react';
import Link from 'next/link';
import { motion, AnimatePresence } from 'framer-motion';
import {
  ArrowLeft,
  Book,
  ChevronRight,
  Ruler,
  FlaskConical,
  Sparkles,
  Target,
  Brain,
  Eye,
  Layers,
  Triangle,
  Activity,
} from 'lucide-react';

// ============================================
// TYPES
// ============================================

interface DocSection {
  id: string;
  title: string;
  icon: React.ReactNode;
  description: string;
  content: React.ReactNode;
}

// ============================================
// DOCUMENTATION SECTIONS
// ============================================

const DOC_SECTIONS: DocSection[] = [
  {
    id: 'proportions',
    title: 'Understanding Facial Proportions',
    icon: <Ruler size={20} className="text-cyan-400" />,
    description: 'Learn about the key ratios and measurements that define facial harmony',
    content: (
      <div className="space-y-8">
        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">The Golden Ratio in Faces</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            The golden ratio (approximately 1.618) has been observed in many aspects of human facial beauty.
            While not a strict rule, faces that approximate these proportions are often perceived as more attractive.
          </p>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div className="bg-neutral-900/50 border border-white/5 rounded-xl p-5">
              <div className="flex items-center gap-3 mb-3">
                <div className="w-8 h-8 rounded-lg bg-cyan-500/20 border border-cyan-500/30 flex items-center justify-center">
                  <Triangle size={14} className="text-cyan-400" />
                </div>
                <h4 className="text-sm font-bold text-white">Facial Thirds</h4>
              </div>
              <p className="text-xs text-neutral-500 leading-relaxed">
                The face is ideally divided into three equal vertical sections: hairline to brow, brow to nose base, and nose base to chin.
              </p>
            </div>
            <div className="bg-neutral-900/50 border border-white/5 rounded-xl p-5">
              <div className="flex items-center gap-3 mb-3">
                <div className="w-8 h-8 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center">
                  <Layers size={14} className="text-purple-400" />
                </div>
                <h4 className="text-sm font-bold text-white">Horizontal Fifths</h4>
              </div>
              <p className="text-xs text-neutral-500 leading-relaxed">
                The face width is divided into five equal parts, with each eye width equaling the space between the eyes.
              </p>
            </div>
          </div>
        </section>

        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">Key Facial Ratios</h3>
          <div className="space-y-4">
            {[
              { name: 'Face Width to Height Ratio (FWHR)', ideal: '1.80 - 2.10', desc: 'Measures facial width at the cheekbones relative to upper face height' },
              { name: 'Midface Ratio', ideal: '0.95 - 1.05', desc: 'Compares midface length to lower face height' },
              { name: 'Eye Separation Ratio', ideal: '0.42 - 0.48', desc: 'Distance between eyes relative to face width' },
              { name: 'Jaw Width to Face Width', ideal: '0.75 - 0.85', desc: 'Bigonial width compared to bizygomatic width' },
            ].map((ratio, idx) => (
              <div key={idx} className="bg-neutral-900/40 border border-white/5 rounded-xl p-5">
                <div className="flex items-start justify-between gap-4">
                  <div className="flex-1">
                    <h4 className="text-sm font-bold text-white mb-1">{ratio.name}</h4>
                    <p className="text-xs text-neutral-500">{ratio.desc}</p>
                  </div>
                  <div className="px-3 py-1.5 bg-green-500/20 border border-green-500/30 rounded-lg">
                    <span className="text-xs font-bold text-green-400">{ratio.ideal}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>

        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">Angular Measurements</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            Angles play a crucial role in defining facial attractiveness, particularly in profile view.
          </p>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {[
              { name: 'Gonial Angle', range: '115° - 130°', icon: <Activity size={14} /> },
              { name: 'Nasofacial Angle', range: '30° - 40°', icon: <Eye size={14} /> },
              { name: 'Canthal Tilt', range: '4° - 8°', icon: <Triangle size={14} /> },
            ].map((angle, idx) => (
              <div key={idx} className="bg-neutral-900/50 border border-white/5 rounded-xl p-4 text-center">
                <div className="w-10 h-10 rounded-xl bg-orange-500/20 border border-orange-500/30 flex items-center justify-center mx-auto mb-3 text-orange-400">
                  {angle.icon}
                </div>
                <h4 className="text-sm font-bold text-white mb-1">{angle.name}</h4>
                <span className="text-xs text-orange-400 font-bold">{angle.range}</span>
              </div>
            ))}
          </div>
        </section>
      </div>
    ),
  },
  {
    id: 'harmony',
    title: 'The Science of Facial Harmony',
    icon: <FlaskConical size={20} className="text-purple-400" />,
    description: 'Discover the research behind our analysis algorithms and scoring system',
    content: (
      <div className="space-y-8">
        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">What is Facial Harmony?</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            Facial harmony refers to the balanced relationship between different facial features.
            Rather than focusing on individual features, harmony considers how all elements work together to create an aesthetically pleasing whole.
          </p>
          <div className="bg-gradient-to-br from-purple-900/30 to-violet-900/30 border border-purple-500/20 rounded-xl p-6">
            <h4 className="text-sm font-bold text-white mb-3">The Three Pillars of Facial Harmony</h4>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div className="text-center">
                <div className="w-12 h-12 rounded-xl bg-purple-500/20 border border-purple-500/30 flex items-center justify-center mx-auto mb-3">
                  <Ruler size={20} className="text-purple-400" />
                </div>
                <h5 className="text-sm font-bold text-white mb-1">Proportion</h5>
                <p className="text-[10px] text-neutral-500">Ideal size relationships between features</p>
              </div>
              <div className="text-center">
                <div className="w-12 h-12 rounded-xl bg-pink-500/20 border border-pink-500/30 flex items-center justify-center mx-auto mb-3">
                  <Layers size={20} className="text-pink-400" />
                </div>
                <h5 className="text-sm font-bold text-white mb-1">Symmetry</h5>
                <p className="text-[10px] text-neutral-500">Balance between left and right sides</p>
              </div>
              <div className="text-center">
                <div className="w-12 h-12 rounded-xl bg-cyan-500/20 border border-cyan-500/30 flex items-center justify-center mx-auto mb-3">
                  <Target size={20} className="text-cyan-400" />
                </div>
                <h5 className="text-sm font-bold text-white mb-1">Dimorphism</h5>
                <p className="text-[10px] text-neutral-500">Gender-specific feature development</p>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">How We Score</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            Our scoring system uses exponential decay functions calibrated for each metric type.
            This means small deviations from ideal have minimal impact, while larger deviations are increasingly penalized.
          </p>
          <div className="space-y-4">
            <div className="bg-neutral-900/40 border border-white/5 rounded-xl p-5">
              <h4 className="text-sm font-bold text-white mb-3">Scoring Components</h4>
              <div className="space-y-3">
                {[
                  { label: 'Bezier Curve Mapping', value: '67 custom curves', desc: 'Each metric has a unique scoring curve' },
                  { label: 'Demographic Adjustments', value: '16 combinations', desc: '8 ethnicities × 2 genders' },
                  { label: 'Decay Rate Calibration', value: '0.08 - 1.0', desc: 'Metric-specific sensitivity' },
                ].map((item, idx) => (
                  <div key={idx} className="flex items-center justify-between p-3 bg-neutral-900/50 rounded-lg">
                    <div>
                      <span className="text-sm font-bold text-white">{item.label}</span>
                      <p className="text-[10px] text-neutral-500">{item.desc}</p>
                    </div>
                    <span className="text-xs font-bold text-cyan-400">{item.value}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">PSL Rating Scale</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            The PSL (Pretty Scale Level) rating provides a standardized 1-10 scale for facial attractiveness,
            mapped to population percentiles.
          </p>
          <div className="grid grid-cols-2 md:grid-cols-5 gap-3">
            {[
              { psl: '7.5+', tier: 'Model', percentile: '99.99%', color: 'bg-green-500' },
              { psl: '7.0', tier: 'Chad', percentile: '99.87%', color: 'bg-cyan-500' },
              { psl: '6.0', tier: 'HTN+', percentile: '97%', color: 'bg-blue-500' },
              { psl: '5.0', tier: 'MTN', percentile: '84%', color: 'bg-purple-500' },
              { psl: '4.0', tier: 'LTN', percentile: '50%', color: 'bg-orange-500' },
            ].map((tier, idx) => (
              <div key={idx} className="bg-neutral-900/50 border border-white/5 rounded-xl p-4 text-center">
                <div className={`w-10 h-10 rounded-xl ${tier.color} mx-auto mb-2 flex items-center justify-center`}>
                  <span className="text-sm font-black text-white">{tier.psl}</span>
                </div>
                <h5 className="text-xs font-bold text-white">{tier.tier}</h5>
                <span className="text-[10px] text-neutral-500">{tier.percentile}</span>
              </div>
            ))}
          </div>
        </section>
      </div>
    ),
  },
  {
    id: 'enhancement',
    title: 'Non-Surgical Enhancement Guide',
    icon: <Sparkles size={20} className="text-green-400" />,
    description: 'Explore evidence-based methods to improve facial harmony without surgery',
    content: (
      <div className="space-y-8">
        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">Foundation Practices</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            Before considering any procedures, these foundational practices can significantly impact your facial aesthetics.
          </p>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {[
              {
                title: 'Body Composition',
                desc: 'Optimizing body fat percentage (12-15% for males, 18-22% for females) reveals facial bone structure and reduces bloating.',
                impact: 'High Impact',
                color: 'green',
              },
              {
                title: 'Proper Posture',
                desc: 'Forward head posture negatively affects jaw position and facial profile. Correcting posture improves neck and jaw appearance.',
                impact: 'Medium Impact',
                color: 'cyan',
              },
              {
                title: 'Mewing / Tongue Posture',
                desc: 'Proper tongue position on the palate may influence facial development over time, especially in younger individuals.',
                impact: 'Variable',
                color: 'purple',
              },
              {
                title: 'Skincare Protocol',
                desc: 'A consistent routine with cleansing, retinoids, and SPF improves skin quality and overall facial appearance.',
                impact: 'High Impact',
                color: 'pink',
              },
            ].map((item, idx) => (
              <div key={idx} className="bg-neutral-900/50 border border-white/5 rounded-xl p-5">
                <div className="flex items-center justify-between mb-3">
                  <h4 className="text-sm font-bold text-white">{item.title}</h4>
                  <span className={`px-2 py-1 bg-${item.color}-500/20 border border-${item.color}-500/30 rounded text-[9px] font-bold text-${item.color}-400 uppercase`}>
                    {item.impact}
                  </span>
                </div>
                <p className="text-xs text-neutral-500 leading-relaxed">{item.desc}</p>
              </div>
            ))}
          </div>
        </section>

        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">Supplement Stack</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            Evidence-based supplements that support facial aesthetics through various mechanisms.
          </p>
          <div className="bg-neutral-900/40 border border-white/5 rounded-xl p-5">
            <div className="space-y-3">
              {[
                { name: 'Vitamin D3 + K2', benefit: 'Bone density, skin health', dose: '2000-5000 IU daily' },
                { name: 'Collagen Peptides', benefit: 'Skin elasticity, hydration', dose: '10-15g daily' },
                { name: 'Omega-3 (EPA/DHA)', benefit: 'Anti-inflammatory, skin barrier', dose: '2-3g daily' },
                { name: 'Zinc', benefit: 'Skin repair, hormone balance', dose: '15-30mg daily' },
                { name: 'Tretinoin (Rx)', benefit: 'Collagen production, anti-aging', dose: '0.025-0.1% nightly' },
              ].map((supp, idx) => (
                <div key={idx} className="flex items-center justify-between p-3 bg-neutral-900/50 rounded-lg">
                  <div className="flex-1">
                    <span className="text-sm font-bold text-white">{supp.name}</span>
                    <p className="text-[10px] text-neutral-500">{supp.benefit}</p>
                  </div>
                  <span className="text-xs font-bold text-green-400">{supp.dose}</span>
                </div>
              ))}
            </div>
          </div>
        </section>

        <section>
          <h3 className="text-lg font-black uppercase tracking-wider text-white mb-4">Minimally Invasive Options</h3>
          <p className="text-neutral-400 leading-relaxed mb-4">
            These procedures offer temporary enhancements with minimal downtime.
          </p>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {[
              { name: 'Dermal Fillers', areas: 'Chin, jaw, cheeks', duration: '12-18 months', cost: '$600-$1,500' },
              { name: 'Botox', areas: 'Masseter, forehead', duration: '3-4 months', cost: '$300-$600' },
              { name: 'PDO Threads', areas: 'Jawline, midface', duration: '12-18 months', cost: '$1,500-$3,000' },
            ].map((proc, idx) => (
              <div key={idx} className="bg-neutral-900/50 border border-white/5 rounded-xl p-4">
                <h4 className="text-sm font-bold text-white mb-3">{proc.name}</h4>
                <div className="space-y-2 text-xs">
                  <div className="flex justify-between">
                    <span className="text-neutral-500">Areas</span>
                    <span className="text-neutral-300">{proc.areas}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-neutral-500">Duration</span>
                    <span className="text-cyan-400">{proc.duration}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-neutral-500">Cost</span>
                    <span className="text-green-400">{proc.cost}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>

        <section className="bg-gradient-to-br from-amber-900/20 to-orange-900/20 border border-amber-500/20 rounded-xl p-6">
          <div className="flex items-start gap-4">
            <div className="w-10 h-10 rounded-xl bg-amber-500/20 border border-amber-500/30 flex items-center justify-center flex-shrink-0">
              <Brain size={18} className="text-amber-400" />
            </div>
            <div>
              <h4 className="text-sm font-bold text-white mb-2">Important Disclaimer</h4>
              <p className="text-xs text-neutral-400 leading-relaxed">
                This guide is for educational purposes only and should not be considered medical advice.
                Always consult with qualified healthcare professionals before starting any supplement regimen
                or undergoing any cosmetic procedures. Results vary significantly between individuals.
              </p>
            </div>
          </div>
        </section>
      </div>
    ),
  },
];

// ============================================
// DOCS PAGE
// ============================================

export default function DocsPage() {
  const [activeSection, setActiveSection] = useState<string>(DOC_SECTIONS[0].id);

  const currentSection = DOC_SECTIONS.find(s => s.id === activeSection);

  return (
    <main className="min-h-screen bg-neutral-950 text-white">
      {/* Header */}
      <header className="sticky top-0 z-50 bg-neutral-950/90 backdrop-blur-xl border-b border-white/5">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-4">
              <Link
                href="/results"
                className="p-2 rounded-xl bg-neutral-900 border border-white/5 hover:border-white/10 transition-colors"
              >
                <ArrowLeft size={18} className="text-neutral-400" />
              </Link>
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center">
                  <Book size={18} className="text-white" />
                </div>
                <div>
                  <h1 className="text-lg font-black uppercase tracking-wider">Documentation</h1>
                  <p className="text-[10px] font-bold uppercase tracking-wider text-neutral-600">
                    Learn about facial analysis
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="flex flex-col lg:flex-row gap-8">
          {/* Sidebar Navigation */}
          <aside className="lg:w-80 flex-shrink-0">
            <nav className="lg:sticky lg:top-24 space-y-2">
              {DOC_SECTIONS.map((section) => (
                <button
                  key={section.id}
                  onClick={() => setActiveSection(section.id)}
                  className={`w-full text-left p-4 rounded-2xl transition-all ${
                    activeSection === section.id
                      ? 'bg-neutral-900 border border-cyan-500/30'
                      : 'bg-neutral-900/40 border border-white/5 hover:border-white/10'
                  }`}
                >
                  <div className="flex items-center gap-3">
                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${
                      activeSection === section.id
                        ? 'bg-cyan-500/20 border border-cyan-500/30'
                        : 'bg-neutral-800 border border-white/5'
                    }`}>
                      {section.icon}
                    </div>
                    <div className="flex-1 min-w-0">
                      <h3 className={`text-sm font-bold truncate ${
                        activeSection === section.id ? 'text-white' : 'text-neutral-400'
                      }`}>
                        {section.title}
                      </h3>
                      <p className="text-[10px] text-neutral-600 truncate">{section.description}</p>
                    </div>
                    <ChevronRight
                      size={14}
                      className={activeSection === section.id ? 'text-cyan-400' : 'text-neutral-700'}
                    />
                  </div>
                </button>
              ))}
            </nav>
          </aside>

          {/* Main Content */}
          <main className="flex-1 min-w-0">
            <AnimatePresence mode="wait">
              {currentSection && (
                <motion.div
                  key={currentSection.id}
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  exit={{ opacity: 0, y: -20 }}
                  transition={{ duration: 0.3 }}
                >
                  <div className="bg-neutral-900/40 border border-white/5 rounded-[2rem] p-6 md:p-10">
                    <div className="flex items-center gap-4 mb-8">
                      <div className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30 flex items-center justify-center">
                        {currentSection.icon}
                      </div>
                      <div>
                        <h2 className="text-xl font-black uppercase tracking-wider text-white">
                          {currentSection.title}
                        </h2>
                        <p className="text-sm text-neutral-500">{currentSection.description}</p>
                      </div>
                    </div>
                    {currentSection.content}
                  </div>
                </motion.div>
              )}
            </AnimatePresence>
          </main>
        </div>
      </div>
    </main>
  );
}
