#!/bin/bash
# Create the S3 bucket for local development
awslocal s3 mb s3://splice-uploads-dev

# Configure CORS for the bucket
awslocal s3api put-bucket-cors --bucket splice-uploads-dev --cors-configuration '{
  "CORSRules": [
    {
      "AllowedHeaders": ["*"],
      "AllowedMethods": ["PUT", "GET", "HEAD"],
      "AllowedOrigins": ["*"],
      "ExposeHeaders": ["ETag"]
    }
  ]
}'

echo "LocalStack S3 bucket 'splice-uploads-dev' created with CORS enabled"
