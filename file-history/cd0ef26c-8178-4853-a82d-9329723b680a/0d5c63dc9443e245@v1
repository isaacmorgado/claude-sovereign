# Browser Automation Setup - COMPLETE GUIDE

**Everything you need to use browser automation with your RunPod models**

Last Updated: 2026-01-05

---

## ‚úÖ What's Installed

1. **RunPod Python SDK** - API access to your models
2. **Playwright** - Browser automation
3. **runpod_api.py** - Wrapper for calling RunPod models
4. **browser_automation.py** - Full browser automation with account management

---

## üîê Account Access & Login - HOW IT WORKS

### Method 1: Cookie Persistence (Recommended)

**How it works:**
```
First time:
1. Script opens browser (visible, not headless)
2. YOU login manually
3. Script saves cookies automatically
4. Browser closes

Every time after:
1. Script loads saved cookies
2. You're already logged in!
3. No need to login again
```

**Example - Google Account:**
```bash
python3 browser_automation.py login-and-scrape my_google_account google https://mail.google.com
```

**What happens:**
- Browser opens to Google login
- You login manually (type password, 2FA, etc.)
- Script detects successful login
- Saves cookies to `~/.browser_automation/cookies/my_google_account_cookies.json`
- Next time: Auto-logged in!

**Different accounts:**
```bash
# Personal Google
python3 browser_automation.py login-and-scrape personal_google google <url>

# Work Google
python3 browser_automation.py login-and-scrape work_google google <url>

# Personal Reddit
python3 browser_automation.py login-and-scrape personal_reddit reddit <url>
```

Each account gets its own cookie file!

### Method 2: Environment Variables (For Automation)

Create `.env` file:
```bash
# Google accounts
PERSONAL_GOOGLE_EMAIL=your@gmail.com
PERSONAL_GOOGLE_PASSWORD=your_password

# Reddit
REDDIT_USERNAME=your_username
REDDIT_PASSWORD=your_password
```

**‚ö†Ô∏è Security Warning:**
- Never commit .env to git
- Only use for sites without 2FA
- Cookie method is safer

---

## ü§ñ CAPTCHA & Human Verification - HOW TO HANDLE

### The Problem:
Many sites have CAPTCHAs and human verification that block automation.

### The Solution:
**Browser runs in VISIBLE mode (not headless)**

**What this means:**
1. You SEE the browser window
2. When CAPTCHA appears, YOU solve it
3. Script waits for you
4. After you solve it, script continues automatically

**Example workflow:**
```bash
python3 browser_automation.py screenshot-to-code https://twitter.com/explore
```

**What happens:**
```
1. Browser opens (you can see it)
2. Navigates to Twitter
3. [CAPTCHA appears!]
4. Script waits...
5. YOU solve the CAPTCHA manually
6. Script detects page loaded
7. Takes screenshot
8. Converts to code with RunPod
```

**Key points:**
- ‚úÖ Browser is visible (not headless)
- ‚úÖ You manually solve CAPTCHAs
- ‚úÖ Script waits patiently
- ‚úÖ After CAPTCHA solved, automation continues
- ‚ùå Cannot bypass CAPTCHAs automatically (against ToS)

---

## üåê VS Code Integration - HOW TO SET UP

### Option 1: VS Code Tasks (Easiest)

Add to your `.vscode/tasks.json`:

```json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "üì∏ Screenshot to Code",
      "type": "shell",
      "command": "python3",
      "args": [
        "${workspaceFolder}/browser_automation.py",
        "screenshot-to-code",
        "${input:url}",
        "${input:filename}"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "üîê Login to Google & Scrape",
      "type": "shell",
      "command": "python3",
      "args": [
        "${workspaceFolder}/browser_automation.py",
        "login-and-scrape",
        "${input:accountName}",
        "google",
        "${input:url}"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "üîß Debug with DevTools",
      "type": "shell",
      "command": "python3",
      "args": [
        "${workspaceFolder}/browser_automation.py",
        "devtools-debug",
        "${input:url}"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    }
  ],
  "inputs": [
    {
      "id": "url",
      "type": "promptString",
      "description": "Enter URL"
    },
    {
      "id": "filename",
      "type": "promptString",
      "description": "Screenshot filename (optional)",
      "default": "screenshot.png"
    },
    {
      "id": "accountName",
      "type": "promptString",
      "description": "Account name (for cookie storage)",
      "default": "my_account"
    }
  ]
}
```

**How to use:**
1. Press `Cmd+Shift+P` (Mac) or `Ctrl+Shift+P` (Windows)
2. Type "Tasks: Run Task"
3. Select "üì∏ Screenshot to Code"
4. Enter URL when prompted
5. Browser opens, you can solve CAPTCHAs if needed
6. Script runs automatically

### Option 2: Keyboard Shortcuts

Add to `.vscode/keybindings.json`:

```json
[
  {
    "key": "ctrl+shift+s",
    "command": "workbench.action.tasks.runTask",
    "args": "üì∏ Screenshot to Code"
  },
  {
    "key": "ctrl+shift+g",
    "command": "workbench.action.tasks.runTask",
    "args": "üîê Login to Google & Scrape"
  },
  {
    "key": "ctrl+shift+d",
    "command": "workbench.action.tasks.runTask",
    "args": "üîß Debug with DevTools"
  }
]
```

Then:
- `Ctrl+Shift+S` ‚Üí Screenshot to Code
- `Ctrl+Shift+G` ‚Üí Login & Scrape
- `Ctrl+Shift+D` ‚Üí DevTools Debug

### Option 3: VS Code Extension (Advanced)

You could create a custom VS Code extension that:
- Adds buttons to toolbar
- Shows browser window inside VS Code
- Integrates with RunPod API

(This requires JavaScript/TypeScript development)

---

## üìã Complete Workflows

### Workflow 1: Screenshot ‚Üí Code (Google Account Access)

**Scenario:** You want to screenshot Gmail interface and convert to code

```bash
python3 browser_automation.py login-and-scrape my_gmail google https://mail.google.com
```

**What happens:**
1. Browser opens to Google login
2. **YOU login manually** (type password, 2FA)
3. Script detects success, saves cookies
4. Navigates to Gmail
5. Takes screenshot
6. Calls RunPod Code Writer model
7. Generates HTML/CSS/JS code
8. Shows you the code

**Next time:**
- Cookies loaded automatically
- Already logged in!
- No manual login needed

### Workflow 2: Scrape Reddit ‚Üí Analyze Patterns

```bash
# First time (login required)
python3 browser_automation.py login-and-scrape my_reddit reddit https://reddit.com/r/programming
```

**What happens:**
1. Browser opens to Reddit login
2. YOU login manually
3. Cookies saved
4. Navigates to r/programming
5. Scrapes post data
6. Calls RunPod Research model
7. Analyzes psychological patterns
8. Shows insights

### Workflow 3: Debug Your App with DevTools

```bash
python3 browser_automation.py devtools-debug http://localhost:3000
```

**What happens:**
1. Browser opens to your local app
2. Captures console logs
3. Captures network requests
4. Captures JavaScript errors
5. Saves all DevTools data
6. Calls RunPod Architect model
7. Gets debugging analysis

---

## üöÄ Quick Start Commands

### 1. Set up environment variables

```bash
# Required
export RUNPOD_API_KEY="your_runpod_api_key"

# Optional (for screenshot-to-code vision step)
export OPENAI_API_KEY="your_openai_key_for_gpt4v"
```

Or create `.env` file:
```bash
RUNPOD_API_KEY=your_runpod_api_key
OPENAI_API_KEY=your_openai_key
```

### 2. Update RunPod endpoint IDs

Edit `runpod_api.py` line ~27:

```python
ENDPOINTS = {
    "architect": {
        "id": "abc123xyz456",  # Your actual endpoint ID
        "url": "https://api.runpod.ai/v2/abc123xyz456/openai/v1",
        "model": "huihui-ai/DeepSeek-R1-Distill-Qwen-32B-abliterated"
    },
    # ... etc
}
```

### 3. Test it!

```bash
# Simple screenshot to code
python3 browser_automation.py screenshot-to-code https://example.com

# Login to Google (first time)
python3 browser_automation.py login-and-scrape my_google google https://www.google.com

# Debug local app
python3 browser_automation.py devtools-debug http://localhost:3000
```

---

## ‚ùì FAQ

### Q: Can it bypass CAPTCHAs automatically?

**No.** That would violate terms of service and is not recommended. Instead:
- Browser runs in visible mode
- You solve CAPTCHAs manually
- Script waits for you
- Then continues

### Q: How do I access my Google account?

**Answer:**
```bash
python3 browser_automation.py login-and-scrape my_google google https://mail.google.com
```

First time:
- Browser opens
- You login manually (including 2FA)
- Cookies saved

Every time after:
- Auto-logged in!

### Q: What about sites that detect automation?

**Answer:** The scripts use:
- Real browser (Chromium)
- Hide automation flags
- Real user agent
- Cookie persistence

Most sites won't detect it as automation. If they do:
- Solve CAPTCHA manually
- Script continues

### Q: Can I use this in VS Code?

**Yes!** Use VS Code Tasks:
1. Add tasks to `.vscode/tasks.json` (see above)
2. Run via Command Palette
3. Or add keyboard shortcuts

### Q: Doesn't Roo Code already have this?

**NO!** Roo Code is just a VS Code extension for AI coding. It does NOT have:
- Browser automation
- Screenshot capabilities
- DevTools access

This is a custom solution we built for you.

### Q: How much does this cost?

**RunPod costs:**
- ~$0.17-0.57 per request (depends on model)
- Only when used (auto-scales to $0)

**OpenAI GPT-4V (for screenshot vision):**
- ~$0.01-0.02 per screenshot
- Optional (only if you want screenshot-to-code)

**Total for screenshot-to-code:**
- ~$0.41-0.59 per screenshot

---

## üõ†Ô∏è Troubleshooting

### Error: "RUNPOD_API_KEY not set"

```bash
export RUNPOD_API_KEY="your_key_here"
# Or add to .env file
```

### Error: "playwright: command not found"

```bash
playwright install chromium
```

### Browser doesn't open

Check if headless mode is on. Should be:
```python
with BrowserSession(headless=False) as browser:
```

### Cookies not saving

Check permissions:
```bash
ls -la ~/.browser_automation/cookies/
```

Should be writable.

---

## üìÅ File Structure

```
/Users/imorgado/
‚îú‚îÄ‚îÄ runpod_api.py                          ‚Üê RunPod API wrapper
‚îú‚îÄ‚îÄ browser_automation.py                  ‚Üê Browser automation
‚îú‚îÄ‚îÄ .env                                   ‚Üê API keys (create this)
‚îî‚îÄ‚îÄ .vscode/
    ‚îú‚îÄ‚îÄ tasks.json                        ‚Üê VS Code tasks (optional)
    ‚îî‚îÄ‚îÄ keybindings.json                  ‚Üê Shortcuts (optional)

~/.browser_automation/                     ‚Üê Browser data
‚îú‚îÄ‚îÄ cookies/
‚îÇ   ‚îú‚îÄ‚îÄ my_google_cookies.json
‚îÇ   ‚îú‚îÄ‚îÄ my_reddit_cookies.json
‚îÇ   ‚îî‚îÄ‚îÄ default_cookies.json
‚îú‚îÄ‚îÄ screenshots/
‚îÇ   ‚îî‚îÄ‚îÄ *.png
‚îî‚îÄ‚îÄ devtools_data.json
```

---

## üéØ Next Steps

1. **Set RUNPOD_API_KEY** environment variable
2. **Update endpoint IDs** in `runpod_api.py`
3. **Test simple workflow:**
   ```bash
   python3 browser_automation.py screenshot-to-code https://example.com
   ```
4. **Try account login:**
   ```bash
   python3 browser_automation.py login-and-scrape test_account google https://www.google.com
   ```
5. **Add VS Code tasks** (optional)

---

**You now have a complete browser automation system integrated with your RunPod abliterated models!** üéâ
