/**
 * Mapping of landmark IDs to FaceIQ reference image names
 * Images are hosted at: https://beta.faceiqlabs.com/images/landmarks/
 *
 * Two image types available:
 * - infographic: Diagram showing landmark placement (generic)
 * - male/white, female/white, etc: Ethnicity/gender specific reference photos
 */

export interface LandmarkImageConfig {
  imageName: string;  // Name used in the FaceIQ URL
  fallbackDescription: string;  // Additional placement guidance
}

// Map our landmark IDs to FaceIQ image names
export const FRONT_LANDMARK_IMAGES: Record<string, LandmarkImageConfig> = {
  // Head
  trichion: {
    imageName: 'hairline',
    fallbackDescription: 'Place at the center of your hairline where it meets your forehead',
  },

  // Eyes - Left
  left_pupila: {
    imageName: 'leftEyePupil',
    fallbackDescription: 'Place at the exact center of your left pupil',
  },
  left_canthus_medialis: {
    imageName: 'leftEyeMedialCanthus',
    fallbackDescription: 'Place at the inner corner where your left eyelids meet',
  },
  left_canthus_lateralis: {
    imageName: 'leftEyeLateralCanthus',
    fallbackDescription: 'Place at the outer corner where your left eyelids meet',
  },
  left_palpebra_superior: {
    imageName: 'leftEyeUpperEyelid',
    fallbackDescription: 'Place at the center of your left upper eyelid margin',
  },
  left_palpebra_inferior: {
    imageName: 'leftEyeLowerEyelid',
    fallbackDescription: 'Place at the center of your left lower eyelid margin',
  },
  left_sulcus_palpebralis_lateralis: {
    imageName: 'leftEyelidHoodEnd',
    fallbackDescription: 'Place where your left upper eyelid crease ends laterally',
  },
  left_pretarsal_skin_crease: {
    imageName: 'leftUpperEyelidCrease',
    fallbackDescription: 'Place at the center of your left upper eyelid crease',
  },

  // Eyes - Right
  right_pupila: {
    imageName: 'rightEyePupil',
    fallbackDescription: 'Place at the exact center of your right pupil',
  },
  right_canthus_medialis: {
    imageName: 'rightEyeMedialCanthus',
    fallbackDescription: 'Place at the inner corner where your right eyelids meet',
  },
  right_canthus_lateralis: {
    imageName: 'rightEyeLateralCanthus',
    fallbackDescription: 'Place at the outer corner where your right eyelids meet',
  },
  right_palpebra_superior: {
    imageName: 'rightEyeUpperEyelid',
    fallbackDescription: 'Place at the center of your right upper eyelid margin',
  },
  right_palpebra_inferior: {
    imageName: 'rightEyeLowerEyelid',
    fallbackDescription: 'Place at the center of your right lower eyelid margin',
  },
  right_sulcus_palpebralis_lateralis: {
    imageName: 'rightEyelidHoodEnd',
    fallbackDescription: 'Place where your right upper eyelid crease ends laterally',
  },
  right_pretarsal_skin_crease: {
    imageName: 'rightUpperEyelidCrease',
    fallbackDescription: 'Place at the center of your right upper eyelid crease',
  },

  // Eyebrows - Left
  left_supercilium_medialis: {
    imageName: 'leftBrowHead',
    fallbackDescription: 'Place at the innermost point where your left eyebrow starts',
  },
  left_supercilium_medial_corner: {
    imageName: 'leftBrowInnerCorner',
    fallbackDescription: 'Place at the inner corner of your left eyebrow',
  },
  left_supercilium_superior: {
    imageName: 'leftBrowArch',
    fallbackDescription: 'Place at the highest point of your left eyebrow arch',
  },
  left_supercilium_apex: {
    imageName: 'leftBrowPeak',
    fallbackDescription: 'Place at the peak of your left eyebrow curve',
  },
  left_supercilium_lateralis: {
    imageName: 'leftBrowTail',
    fallbackDescription: 'Place at the outer end of your left eyebrow',
  },

  // Eyebrows - Right
  right_supercilium_medialis: {
    imageName: 'rightBrowHead',
    fallbackDescription: 'Place at the innermost point where your right eyebrow starts',
  },
  right_supercilium_medial_corner: {
    imageName: 'rightBrowInnerCorner',
    fallbackDescription: 'Place at the inner corner of your right eyebrow',
  },
  right_supercilium_superior: {
    imageName: 'rightBrowArch',
    fallbackDescription: 'Place at the highest point of your right eyebrow arch',
  },
  right_supercilium_apex: {
    imageName: 'rightBrowPeak',
    fallbackDescription: 'Place at the peak of your right eyebrow curve',
  },
  right_supercilium_lateralis: {
    imageName: 'rightBrowTail',
    fallbackDescription: 'Place at the outer end of your right eyebrow',
  },

  // Nose
  nasal_base: {
    imageName: 'nasalBase',
    fallbackDescription: 'Place at the bridge of your nose between your eyes',
  },
  left_dorsum_nasi: {
    imageName: 'leftNoseBridge',
    fallbackDescription: 'Place on the left side of your nose bridge',
  },
  right_dorsum_nasi: {
    imageName: 'rightNoseBridge',
    fallbackDescription: 'Place on the right side of your nose bridge',
  },
  left_ala_nasi: {
    imageName: 'noseLeft',
    fallbackDescription: 'Place at the widest point of your left nostril',
  },
  right_ala_nasi: {
    imageName: 'noseRight',
    fallbackDescription: 'Place at the widest point of your right nostril',
  },
  subnasale: {
    imageName: 'noseBottom',
    fallbackDescription: 'Place at the base of your nose where it meets your upper lip',
  },

  // Mouth
  labrale_superius: {
    imageName: 'cupidsBow',
    fallbackDescription: 'Place at the center peak of your upper lip (Cupid\'s bow)',
  },
  cupids_bow: {
    imageName: 'innerCupidsBow',
    fallbackDescription: 'Place at the inner center of your Cupid\'s bow',
  },
  mouth_middle: {
    imageName: 'mouthMiddle',
    fallbackDescription: 'Place at the center of your mouth opening',
  },
  labrale_inferius: {
    imageName: 'lowerLip',
    fallbackDescription: 'Place at the center of your lower lip border',
  },
  left_cheilion: {
    imageName: 'mouthLeft',
    fallbackDescription: 'Place at the left corner of your mouth',
  },
  right_cheilion: {
    imageName: 'mouthRight',
    fallbackDescription: 'Place at the right corner of your mouth',
  },

  // Jaw
  left_gonion_superior: {
    imageName: 'leftTopGonion',
    fallbackDescription: 'Place at the upper angle of your left jaw',
  },
  right_gonion_superior: {
    imageName: 'rightTopGonion',
    fallbackDescription: 'Place at the upper angle of your right jaw',
  },
  left_gonion_inferior: {
    imageName: 'leftBottomGonion',
    fallbackDescription: 'Place at the lower angle of your left jaw',
  },
  right_gonion_inferior: {
    imageName: 'rightBottomGonion',
    fallbackDescription: 'Place at the lower angle of your right jaw',
  },

  // Chin
  left_mentum_lateralis: {
    imageName: 'chinLeft',
    fallbackDescription: 'Place on the left side of your chin',
  },
  right_mentum_lateralis: {
    imageName: 'chinRight',
    fallbackDescription: 'Place on the right side of your chin',
  },
  menton: {
    imageName: 'chinBottom',
    fallbackDescription: 'Place at the lowest point of your chin',
  },

  // Face Width
  left_zygion: {
    imageName: 'leftCheek',
    fallbackDescription: 'Place at the widest point of your left cheekbone',
  },
  right_zygion: {
    imageName: 'rightCheek',
    fallbackDescription: 'Place at the widest point of your right cheekbone',
  },
  left_temporal: {
    imageName: 'leftTemple',
    fallbackDescription: 'Place at your left temple',
  },
  right_temporal: {
    imageName: 'rightTemple',
    fallbackDescription: 'Place at your right temple',
  },
  left_auricular_lateral: {
    imageName: 'leftOuterEar',
    fallbackDescription: 'Place at the outermost point of your left ear',
  },
  right_auricular_lateral: {
    imageName: 'rightOuterEar',
    fallbackDescription: 'Place at the outermost point of your right ear',
  },

  // Neck
  left_cervical_lateralis: {
    imageName: 'neckLeft',
    fallbackDescription: 'Place on the left side of your neck',
  },
  right_cervical_lateralis: {
    imageName: 'neckRight',
    fallbackDescription: 'Place on the right side of your neck',
  },
};

/**
 * Get reference image URL for a landmark
 * @param landmarkId - The landmark ID from our system
 * @param gender - 'male' or 'female'
 * @param ethnicity - 'white', 'black', 'asian', etc.
 * @param type - 'reference' for photo reference or 'infographic' for diagram
 */
export function getLandmarkImageUrl(
  landmarkId: string,
  gender: 'male' | 'female' = 'male',
  ethnicity: string = 'white',
  type: 'reference' | 'infographic' = 'infographic'
): string | null {
  const config = FRONT_LANDMARK_IMAGES[landmarkId];
  if (!config) return null;

  const baseUrl = 'https://beta.faceiqlabs.com/images/landmarks';

  if (type === 'infographic') {
    return `${baseUrl}/infographic/${config.imageName}.webp`;
  }

  return `${baseUrl}/${gender}/${ethnicity}/${config.imageName}.webp?v=1`;
}

/**
 * Get fallback description for a landmark
 */
export function getLandmarkPlacementGuide(landmarkId: string): string {
  const config = FRONT_LANDMARK_IMAGES[landmarkId];
  return config?.fallbackDescription || 'Place this landmark at the indicated position';
}

/**
 * Order of landmarks for step-by-step guided mode
 * Grouped logically for better user experience
 */
export const GUIDED_LANDMARK_ORDER: string[] = [
  // Start with easy, central landmarks
  'trichion',

  // Eyes - Left (easier to identify)
  'left_pupila',
  'left_canthus_medialis',
  'left_canthus_lateralis',
  'left_palpebra_superior',
  'left_palpebra_inferior',
  'left_sulcus_palpebralis_lateralis',
  'left_pretarsal_skin_crease',

  // Eyes - Right
  'right_pupila',
  'right_canthus_medialis',
  'right_canthus_lateralis',
  'right_palpebra_superior',
  'right_palpebra_inferior',
  'right_sulcus_palpebralis_lateralis',
  'right_pretarsal_skin_crease',

  // Eyebrows - Left
  'left_supercilium_medialis',
  'left_supercilium_medial_corner',
  'left_supercilium_superior',
  'left_supercilium_apex',
  'left_supercilium_lateralis',

  // Eyebrows - Right
  'right_supercilium_medialis',
  'right_supercilium_medial_corner',
  'right_supercilium_superior',
  'right_supercilium_apex',
  'right_supercilium_lateralis',

  // Nose
  'nasal_base',
  'left_dorsum_nasi',
  'right_dorsum_nasi',
  'left_ala_nasi',
  'right_ala_nasi',
  'subnasale',

  // Mouth
  'labrale_superius',
  'cupids_bow',
  'mouth_middle',
  'labrale_inferius',
  'left_cheilion',
  'right_cheilion',

  // Face width
  'left_temporal',
  'right_temporal',
  'left_auricular_lateral',
  'right_auricular_lateral',
  'left_zygion',
  'right_zygion',

  // Jaw
  'left_gonion_superior',
  'right_gonion_superior',
  'left_gonion_inferior',
  'right_gonion_inferior',

  // Chin
  'left_mentum_lateralis',
  'right_mentum_lateralis',
  'menton',

  // Neck (optional, often not visible)
  'left_cervical_lateralis',
  'right_cervical_lateralis',
];
