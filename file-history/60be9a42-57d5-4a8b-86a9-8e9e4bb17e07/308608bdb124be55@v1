# SPLICE

AI-powered Premiere Pro UXP plugin for detecting takes, removing silences, and accelerating video editing workflows.

## Current Focus
**Auto-Cutting v3.0** - Phase 1 complete, ready for Phase 2 (Frontend)

## Quick Reference

### Pricing Tiers (80%+ Margins)
| Tier | Price | Hours | Stripe Price ID |
|------|-------|-------|-----------------|
| Starter | $19/mo | 15 hrs | price_1SgH4m2L5BseYEbCih347qfr |
| Pro | $49/mo | 50 hrs | price_1SgH4o2L5BseYEbCIoR19lhQ |
| Team | $149/mo | 150 hrs | price_1SgH4q2L5BseYEbCYTlimb5M |
| Overage | $1/hr | - | price_1SgH4y2L5BseYEbClZuxNRu8 |

### Key Constraints
- UXP requires Premiere Pro 25.6+
- Use `127.0.0.1` not `localhost` in fetch URLs
- Backend (local): https://127.0.0.1:3847
- Backend (prod): https://splice-api-production.up.railway.app
- Railway project: `splice-backend` with PostgreSQL

## Key Files

### Backend (v3.0)
| File | Purpose |
|------|---------|
| `splice-backend/server.js` | Express HTTPS + all endpoints |
| `splice-backend/services/usageTracking.js` | Credit balance, usage logging |
| `splice-backend/middleware/rateLimiter.js` | Credit check middleware |
| `splice-backend/.env` | All API keys (local only) |

### New Endpoints
| Endpoint | Purpose |
|----------|---------|
| `GET /credits` | User's hour balance (x-stripe-customer-id header) |
| `GET /usage-history` | Usage log |
| `POST /webhooks/stripe` | Subscription events |

## Implementation Phases

### Phase 1: Usage & Billing System (Backend) âœ… COMPLETE
- [x] Create `usageTracking.js` - credit balance, usage logging
- [x] Create `rateLimiter.js` - middleware for credit checks
- [x] Add `/credits` endpoint
- [x] Set up Railway project with PostgreSQL
- [x] Create Stripe products (4 tiers)

### Phase 2: UI Simplification (Frontend)
- [ ] Update `index.html` - single card, credit display
- [ ] Create `credits.js` - fetch/display balance

### Phase 3: Preview Mode
- [ ] Create `preview.js` - timeline visualization
- [ ] Update `main.js` - preview workflow

### Phase 4-6: Smart Filtering, Automation, Polish
- [ ] Remaining phases

## Last Session (2025-12-19)

**Phase 1 Backend Complete:**
- Created Railway project with PostgreSQL database
- Implemented `usageTracking.js` (user balance, usage logging, tier management)
- Implemented `rateLimiter.js` middleware
- Added `/credits`, `/usage-history`, `/webhooks/stripe` endpoints
- Created 4 Stripe products via CLI (Starter, Pro, Team, Overage)
- Tested database connection - working

**Infrastructure:**
- Railway: `splice-backend` project with PostgreSQL
- Stripe: Test mode products created
- `.env` configured with all keys locally

**Stopped at:** Phase 1 complete, ready for Railway deployment or Phase 2 frontend

---
*Last updated: 2025-12-19*
