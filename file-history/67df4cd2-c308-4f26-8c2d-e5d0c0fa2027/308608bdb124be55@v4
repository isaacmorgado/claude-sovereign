# SPLICE
AI-powered Premiere Pro UXP plugin for detecting takes, removing silences, and accelerating video editing workflows.

## Current Focus
Section: Slice 7 - Apply takes to timeline (IMPLEMENTED - needs testing)
Files: splice-plugin/index.html

## Last Session (2025-12-19)
- Slice 7 re-implemented per Concept_Clarification.md design:
  - **Clickable takes**: User can click takes in panel to toggle best (★/☆)
  - **Label Clips on Timeline**: Razors at take boundaries, renames clips with "★ Take N - description"
  - **Keep Best Takes Only**: Deletes non-best takes (user controls which are best)
  - AI suggests best take, but user has final say
- Previous: Slice 6 complete, end-to-end integration working

## API Endpoint
- `POST https://127.0.0.1:3847/analyze` with `{ "wavPath": "/tmp/splice_audio_export.wav" }`
- Returns: `{ success, wavPath, transcript: { text, segments[], duration }, takes: { takes[], analysis } }`

## Architecture Decisions
- **HTTPS required**: Premiere Pro 25.6.x UXP bug blocks HTTP requests
- **Synchronous pipeline**: Export → Groq Whisper → GPT-4o-mini → Return
- **Local-first development**: No Railway/R2 until local flow works
- **UXP only**: No CEP fallback (users need 25.6+)

## Key Constraints
- UXP requires Premiere Pro 25.6+ or Beta
- Manifest v5: host must be array `[{ "app": "premierepro" }]`
- Network permissions: use `"domains": "all"` (specific domains unreliable)
- Use `127.0.0.1` not `localhost` in fetch URLs

## Next Steps
1. Test Slice 7: Verify apply takes works in Premiere Pro
2. Slice 8: Silence detection and removal

## Project Structure
```
/Users/imorgado/SPLICE/
├── splice-plugin/
│   ├── manifest.json           # v5, host array, domains: "all"
│   ├── index.html              # Main UI (loads JS modules)
│   └── js/
│       ├── config.js           # Constants (URLs, paths, timebase)
│       ├── utils.js            # Shared utilities (formatTime, etc.)
│       ├── slice1-timeline.js  # Slice 1-2: Read timeline clips
│       ├── slice3-export.js    # Slice 3: Audio export
│       ├── slice6-analyze.js   # Slice 6: Backend integration
│       ├── slice7-apply.js     # Slice 7: Label/apply takes
│       └── main.js             # Entry point, initializes all slices
├── splice-backend/
│   ├── server.js               # Main server, routes
│   ├── services/
│   │   ├── transcription.js    # Slice 4: Groq Whisper
│   │   └── takeDetection.js    # Slice 5: GPT-4o-mini
│   ├── localhost+1.pem         # SSL cert (mkcert)
│   ├── localhost+1-key.pem     # SSL key (mkcert)
│   ├── eslint.config.cjs       # ESLint config
│   └── .env                    # GROQ_API_KEY, OPENAI_API_KEY
├── .claude/commands/
│   └── fix.md                  # /fix command for linting
└── CLAUDE.md
```
