# SPLICE
AI-powered Premiere Pro UXP plugin for detecting takes, removing silences, and accelerating video editing workflows.

## Current Focus
Section: Slice 7 - Apply takes to timeline (IMPLEMENTED - needs testing)
Files: splice-plugin/index.html

## Last Session (2025-12-19)
- Slice 7 implemented: "Apply Best Takes to Timeline" button
  - Button appears after analysis when best take is detected
  - Uses `sequence.razorAllTracksAtTime()` to split at take boundaries
  - Deletes non-best take segments from both video and audio tracks
  - Works from end to start to avoid time shift issues
- Previous: Slice 6 complete, end-to-end integration working

## API Endpoint
- `POST https://127.0.0.1:3847/analyze` with `{ "wavPath": "/tmp/splice_audio_export.wav" }`
- Returns: `{ success, wavPath, transcript: { text, segments[], duration }, takes: { takes[], analysis } }`

## Architecture Decisions
- **HTTPS required**: Premiere Pro 25.6.x UXP bug blocks HTTP requests
- **Synchronous pipeline**: Export → Groq Whisper → GPT-4o-mini → Return
- **Local-first development**: No Railway/R2 until local flow works
- **UXP only**: No CEP fallback (users need 25.6+)

## Key Constraints
- UXP requires Premiere Pro 25.6+ or Beta
- Manifest v5: host must be array `[{ "app": "premierepro" }]`
- Network permissions: use `"domains": "all"` (specific domains unreliable)
- Use `127.0.0.1` not `localhost` in fetch URLs

## Next Steps
1. Test Slice 7: Verify apply takes works in Premiere Pro
2. Slice 8: Silence detection and removal

## Project Structure
```
/Users/imorgado/SPLICE/
├── splice-plugin/
│   ├── manifest.json       # v5, host array, domains: "all"
│   └── index.html          # Analyze button calls HTTPS backend
├── splice-backend/
│   ├── server.js           # HTTPS server on 3847
│   ├── localhost+1.pem     # SSL cert (mkcert)
│   ├── localhost+1-key.pem # SSL key (mkcert)
│   └── .env                # GROQ_API_KEY, OPENAI_API_KEY
└── CLAUDE.md
```
