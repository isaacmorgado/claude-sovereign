/**
 * Side Profile Landmark Indices (106 points)
 * Based on reverse-engineered FaceIQ Labs data and standard cephalometric landmarks
 */
export const SIDE_LANDMARKS = {
  // Face Contour (0-8) - Chin/Jaw outline
  MENTON: 0,              // Chin bottom (lowest point)
  TRAGION: 1,             // Ear point
  POGONION: 2,            // Chin prominence
  GNATHION: 3,            // Chin point
  MANDIBLE_CONTOUR: [2, 3, 4, 5, 6, 7, 8],  // Jaw line

  // Posterior Points (9-16) - Ear/Back of head
  EAR_CONTOUR: [9, 10, 11, 12, 13, 14, 15, 16],

  // Forehead/Hairline (17)
  TRICHION: 17,           // Hairline

  // Nose Profile (18-32)
  NOSE_PROFILE_START: 18,
  NOSE_BRIDGE: [25, 26, 27, 28, 29, 30, 31, 32],
  NASION: 25,             // Bridge of nose (deepest point)
  PRONASALE: 32,          // Nose tip

  // Eye Region (33-51)
  EYE_LATERAL_CANTHUS: 33,   // Outer eye corner
  PUPIL: 34,
  EYE_MEDIAL_CANTHUS: 35,    // Inner eye corner
  EYE_CENTER: 36,
  UPPER_EYELID: [37, 38, 39],
  LOWER_EYELID: [40, 41, 42],
  BROW_HEAD: 44,          // Inner brow
  BROW_ARCH: 45,          // Brow peak
  BROW_TAIL: 46,          // Outer brow
  BROW_CONTOUR: [43, 44, 45, 46, 47, 48, 49, 50, 51],

  // Nose/Lip Region (52-75)
  SUBNASALE: 52,          // Base of nose
  COLUMELLA: 53,          // Nose columella
  NOSE_TIP_CONTOUR: [52, 53, 54, 55, 56, 57, 58, 59, 60],
  LABRALE_SUPERIUS: 63,   // Upper lip top
  STOMION: 65,            // Lip meeting point
  LABRALE_INFERIUS: 66,   // Lower lip bottom
  UPPER_LIP_CONTOUR: [63, 64, 65],
  LOWER_LIP_CONTOUR: [66, 67, 68],
  LIP_REGION: [52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75],

  // Additional Profile Points (76-105)
  GLABELLA: 76,           // Between eyebrows
  SELLION: 77,            // Deepest point of nasal bridge
  SOFT_TISSUE_NASION: 78,
  ORBITALE: 79,           // Lowest point of eye socket
  FOREHEAD_PROFILE: [76, 77, 78, 79, 80, 81, 82, 83, 84],
  GONION: 85,             // Jaw angle
  CONDYLION: 86,          // Top of jaw joint
  JAW_POINTS: [85, 86, 87, 88, 89],
  PRECISION_POINTS: [90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105],
} as const;

/**
 * Front Face Landmark Indices (MediaPipe 478 points)
 */
export const FRONT_LANDMARKS = {
  // Nose
  NOSE_TIP: 1,
  NOSE_BRIDGE: 6,
  LEFT_NOSTRIL: 129,
  RIGHT_NOSTRIL: 358,
  NOSE_BOTTOM: 2,

  // Eyes - Left (right side of face in image)
  LEFT_EYE_INNER: 133,
  LEFT_EYE_OUTER: 33,
  LEFT_EYE_UPPER: 159,
  LEFT_EYE_LOWER: 145,
  LEFT_PUPIL: 468,
  LEFT_EYE_CENTER: 473,

  // Eyes - Right (left side of face in image)
  RIGHT_EYE_INNER: 362,
  RIGHT_EYE_OUTER: 263,
  RIGHT_EYE_UPPER: 386,
  RIGHT_EYE_LOWER: 374,
  RIGHT_PUPIL: 473,
  RIGHT_EYE_CENTER: 468,

  // Eyebrows - Left
  LEFT_BROW_INNER: 107,
  LEFT_BROW_OUTER: 70,
  LEFT_BROW_PEAK: 105,

  // Eyebrows - Right
  RIGHT_BROW_INNER: 336,
  RIGHT_BROW_OUTER: 300,
  RIGHT_BROW_PEAK: 334,

  // Cheeks
  LEFT_CHEEK: 234,
  RIGHT_CHEEK: 454,
  LEFT_ZYGION: 234,    // Bizygomatic width point
  RIGHT_ZYGION: 454,   // Bizygomatic width point

  // Lips
  UPPER_LIP: 13,
  LOWER_LIP: 14,
  UPPER_LIP_TOP: 0,
  LOWER_LIP_BOTTOM: 17,
  MOUTH_LEFT: 61,
  MOUTH_RIGHT: 291,
  LIP_CENTER: 13,

  // Face Contour
  CHIN: 152,
  CHIN_BOTTOM: 199,
  FOREHEAD: 10,
  FOREHEAD_TOP: 151,
  LEFT_TEMPLE: 127,
  RIGHT_TEMPLE: 356,

  // Jawline
  LEFT_JAW: 172,
  RIGHT_JAW: 397,
  LEFT_GONION: 136,     // Left jaw angle
  RIGHT_GONION: 365,    // Right jaw angle

  // Additional important points
  GLABELLA: 9,          // Between eyebrows
  SUBNASALE: 164,       // Base of nose
  PHILTRUM_TOP: 164,
  PHILTRUM_BOTTOM: 0,

  // Face outline (silhouette)
  FACE_OVAL: [
    10, 338, 297, 332, 284, 251, 389, 356, 454, 323, 361, 288,
    397, 365, 379, 378, 400, 377, 152, 148, 176, 149, 150, 136,
    172, 58, 132, 93, 234, 127, 162, 21, 54, 103, 67, 109
  ],
} as const;

/**
 * Landmark count validation
 */
export const LANDMARK_COUNTS = {
  SIDE_PROFILE: 106,
  FRONT_FACE_MEDIAPIPE: 478,
} as const;

/**
 * Get array of indices from landmark contour
 */
export function getLandmarkContour(
  contourKey: keyof typeof SIDE_LANDMARKS
): number[] {
  const value = SIDE_LANDMARKS[contourKey];
  if (Array.isArray(value)) {
    return value;
  }
  return [value as number];
}
