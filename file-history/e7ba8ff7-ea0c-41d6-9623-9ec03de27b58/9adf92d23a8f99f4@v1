# LOOKSMAXX

A facial metrics analysis and visualization system with Next.js frontend and MediaPipe-based facial landmark detection.

## Current Focus
Section: Face landmark detection - debugging Y-offset positioning issue
Files: `src/components/LandmarkAnalysisTool.tsx`, `src/lib/mediapipeDetection.ts`

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Animation**: Framer Motion
- **Face Detection**: MediaPipe Tasks Vision (native WASM)
- **Icons**: Lucide React

## Organization Rules

- Pages/Routes → `src/app/`
- Components → `src/components/`
- Utilities → `src/lib/`
- Types → `src/types/` or co-located

## Code Quality

```bash
cd looksmaxx-app && npm run lint && npx tsc --noEmit
```

## Last Session (2025-12-19)

- Fixed race condition: Auto-detect now waits for `imageDimensions` before running
- Fixed iris indices: Swapped `left_pupila: 473` and `right_pupila: 468` (were backwards)
- Fixed 16 ID mismatches in `MEDIAPIPE_SIDE_MAPPING` to match `SIDE_PROFILE_LANDMARKS`
- Added ResizeObserver for container dimension tracking
- Added inverse scale to landmarks so they don't enlarge when zooming
- Refactored: Removed duplicate `MEDIAPIPE_FRONT_MAPPING` from landmarks.ts
- Created shared utilities: `LandmarkDot.tsx`, `useZoomPan.ts`, `useContainerBounds.ts`
- Stopped at: Landmarks still appearing TOO HIGH on faces - debugging with console logs added

## Next Steps

1. Debug Y-offset issue (console logs added to `getImageBounds` and `handleAutoDetect`)
2. Check browser console for debug output to identify coordinate calculation issue
3. Fix the vertical offset once root cause is identified
4. Self-host WASM files in `/public/wasm/` for better caching
