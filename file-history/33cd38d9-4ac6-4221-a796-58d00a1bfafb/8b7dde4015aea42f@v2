'use client';

import { useRouter } from 'next/navigation';
import { ArrowLeft, ArrowRight, Check } from 'lucide-react';
import { useEthnicity, EthnicityOption, ethnicityLabels } from '@/contexts/EthnicityContext';

const ethnicityOptions: EthnicityOption[] = [
  'white',
  'black',
  'asian',
  'south-asian',
  'hispanic',
  'middle-eastern',
  'pacific-islander',
  'native-american',
  'mixed',
];

export default function EthnicityPage() {
  const router = useRouter();
  const { ethnicities, toggleEthnicity } = useEthnicity();

  const handleToggle = (option: EthnicityOption) => {
    toggleEthnicity(option);
  };

  const handleContinue = () => {
    if (ethnicities.length > 0) {
      router.push('/upload');
    }
  };

  const handleBack = () => {
    router.push('/gender');
  };

  return (
    <main className="min-h-screen bg-black flex flex-col items-center justify-center px-4 py-12">
      {/* Back button */}
      <div className="absolute top-6 left-6">
        <button
          onClick={handleBack}
          className="text-sm text-neutral-400 hover:text-white transition-colors flex items-center gap-1"
        >
          <ArrowLeft className="w-4 h-4" />
          Back
        </button>
      </div>

      {/* Header */}
      <div className="text-center mb-10">
        <h1 className="text-2xl md:text-3xl font-semibold tracking-tight text-white mb-3">
          Select Your Ethnicity
        </h1>
        <p className="text-neutral-400 text-sm md:text-base max-w-md mx-auto">
          Select all that apply - this helps us provide more accurate analysis
        </p>
      </div>

      {/* Ethnicity Options */}
      <div className="w-full max-w-md space-y-2 mb-10">
        {ethnicityOptions.map((option) => {
          const isSelected = ethnicities.includes(option);
          return (
            <button
              key={option}
              onClick={() => handleToggle(option)}
              className={`
                w-full h-14 rounded-xl border-2
                flex items-center justify-between px-5
                transition-all duration-200 cursor-pointer
                ${isSelected
                  ? 'border-[#00f3ff] bg-[#00f3ff]/5 shadow-[0_0_15px_rgba(0,243,255,0.1)]'
                  : 'border-neutral-800 bg-black hover:border-neutral-700 hover:bg-white/5'
                }
              `}
            >
              <span className={`
                font-medium transition-colors duration-200
                ${isSelected ? 'text-white' : 'text-neutral-300'}
              `}>
                {ethnicityLabels[option]}
              </span>

              {/* Checkbox indicator */}
              <div className={`
                w-6 h-6 rounded-md border-2 flex items-center justify-center
                transition-all duration-200
                ${isSelected
                  ? 'bg-[#00f3ff] border-[#00f3ff]'
                  : 'bg-transparent border-neutral-700'
                }
              `}>
                {isSelected && (
                  <Check className="w-4 h-4 text-black" strokeWidth={3} />
                )}
              </div>
            </button>
          );
        })}
      </div>

      {/* Navigation Buttons */}
      <div className="flex items-center gap-4">
        {/* Back Button */}
        <button
          onClick={handleBack}
          className="h-12 px-6 rounded-xl font-medium flex items-center gap-2 border border-neutral-700 bg-black text-white hover:bg-white/5 hover:border-neutral-600 transition-all duration-200"
        >
          <ArrowLeft className="w-4 h-4" />
          Back
        </button>

        {/* Continue Button */}
        <button
          onClick={handleContinue}
          disabled={ethnicities.length === 0}
          className={`
            h-12 px-8 rounded-xl font-medium text-base
            flex items-center gap-2
            transition-all duration-200
            ${ethnicities.length > 0
              ? 'bg-[#00f3ff] text-black hover:shadow-[0_0_20px_rgba(0,243,255,0.3)] cursor-pointer'
              : 'bg-neutral-800 text-neutral-500 cursor-not-allowed'
            }
          `}
        >
          Continue
          <ArrowRight className="w-4 h-4" />
        </button>
      </div>
    </main>
  );
}
