// Splice v3 - Main Entry Point
import '@spectrum-web-components/theme/sp-theme.js'
import '@spectrum-web-components/theme/theme-dark.js'
import '@spectrum-web-components/theme/scale-medium.js'
import '@spectrum-web-components/button/sp-button.js'
import '@spectrum-web-components/action-button/sp-action-button.js'
import '@spectrum-web-components/menu/sp-menu.js'
import '@spectrum-web-components/menu/sp-menu-item.js'
import '@spectrum-web-components/picker/sp-picker.js'
import '@spectrum-web-components/textfield/sp-textfield.js'
import '@spectrum-web-components/checkbox/sp-checkbox.js'
import '@spectrum-web-components/progress-circle/sp-progress-circle.js'
import '@spectrum-web-components/progress-bar/sp-progress-bar.js'
import '@spectrum-web-components/toast/sp-toast.js'

import { PluginApp } from './components/panels/PluginApp'
import { initializePlugin } from './utils/api/plugin'
import { logger } from './utils/logger'

// Initialize plugin when DOM is ready
document.addEventListener('DOMContentLoaded', async () => {
  try {
    logger.info('Splice v3 initializing...')

    // Initialize plugin core
    await initializePlugin()

    // Mount the application
    const appContainer = document.getElementById('app')
    if (appContainer) {
      const app = new PluginApp()
      appContainer.appendChild(app)
      logger.info('Splice v3 mounted successfully')
    } else {
      throw new Error('App container not found')
    }
  } catch (error) {
    logger.error('Failed to initialize Splice v3:', error)
  }
})
