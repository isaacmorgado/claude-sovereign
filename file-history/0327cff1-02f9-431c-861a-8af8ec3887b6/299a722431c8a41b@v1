/**
 * Migration to rename subscription tier enum values:
 * - 'pro' -> 'creator' ($29.99/mo, 300 min)
 * - 'enterprise' -> 'pro' ($69.99/mo, 500 min)
 *
 * PostgreSQL 10+ supports ALTER TYPE ... RENAME VALUE
 */

/** @type {import('node-pg-migrate').MigrationBuilder} */
exports.up = (pgm) => {
  // Rename 'pro' to 'creator' first (the $29.99 tier)
  pgm.sql(`ALTER TYPE subscription_tier RENAME VALUE 'pro' TO 'creator'`);

  // Rename 'enterprise' to 'pro' (the $69.99 tier)
  pgm.sql(`ALTER TYPE subscription_tier RENAME VALUE 'enterprise' TO 'pro'`);
};

/** @type {import('node-pg-migrate').MigrationBuilder} */
exports.down = (pgm) => {
  // Reverse: rename 'pro' back to 'enterprise'
  pgm.sql(`ALTER TYPE subscription_tier RENAME VALUE 'pro' TO 'enterprise'`);

  // Reverse: rename 'creator' back to 'pro'
  pgm.sql(`ALTER TYPE subscription_tier RENAME VALUE 'creator' TO 'pro'`);
};
