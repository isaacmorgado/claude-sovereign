# Fix Critical /auto Issues - Continuation

Fix 4 critical bugs found in audit (see `~/.claude/docs/AUTO-CONTINUE-FIXES.md` for context):

## P0 - CRITICAL (Fix First)

**1. post-edit-quality.sh:191** - Early `exit 0` makes Phase 1 integration unreachable
- **Fix**: Remove line 191 exit, let code reach Phase 1 integration (lines 101-159)
- **Impact**: File caching + auto-checkpoint every 10 files currently NEVER run

**2. settings.json** - validation-gate.sh not registered (safety bypass)
- **Fix**: Add PreToolUse hook with Bash matcher calling `validation-gate.sh validate_command`
- **Impact**: Dangerous commands execute without validation

## P1 - HIGH (Fix Second)

**3. coordinator.sh** - 200+ `> /dev/null 2>&1 || true` suppress all errors
- **Fix**: Lines 66,67,141,219,232,258,314,333,357,428,488,521,535,541,547,553,559,565
- Change to: log failures, show advisory when critical integrations fail
- **Impact**: System silently degrades, user never knows components broken

**4. agent-loop.sh** - Memory operations fail silently
- **Fix**: Lines 91,104,121,124,138,141,156,170,186,198,206,234,248,256,267,270
- Add: Show advisory if memory-manager.sh unavailable: "⚠️ Running stateless - memory disabled"
- **Impact**: Agent runs without learning/memory, silently

## Test After Fixes

```bash
# Verify post-edit-quality reaches Phase 1
grep -A 5 "exit 0" ~/.claude/hooks/post-edit-quality.sh

# Verify validation-gate registered
grep "validation-gate" ~/.claude/settings.json

# Test file caching works
echo "test" > /tmp/test.txt
~/.claude/hooks/post-edit-quality.sh # Should cache file hash
```

Start with #1 (post-edit-quality.sh) - highest impact, easiest fix.
