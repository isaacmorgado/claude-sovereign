/**
 * Sample Data Generator for Demo/Preview Mode
 *
 * This module provides realistic sample data to preview the full results page
 * without requiring an actual face analysis. Useful for:
 * - Demo purposes
 * - Development/testing
 * - Marketing screenshots
 *
 * Usage: Navigate to /results?sample=true
 */

import { LandmarkPoint } from '@/lib/landmarks';
import { Gender, Ethnicity } from '@/lib/harmony-scoring';

// ============================================
// SAMPLE FRONT LANDMARKS - Idealized Male Face
// Based on neoclassical proportions
// ============================================

export const SAMPLE_FRONT_LANDMARKS: LandmarkPoint[] = [
  // Head/Hair
  {
    id: 'trichion',
    label: 'Hairline',
    medicalTerm: 'Trichion (frontal view)',
    description: 'Anterior hairline at midline',
    x: 0.5,
    y: 0.08,
    category: 'Head',
  },

  // Eyes - Left (well-positioned, positive canthal tilt)
  {
    id: 'left_pupila',
    label: 'Left Pupil',
    medicalTerm: 'Left Pupila',
    description: 'Center of left pupil',
    x: 0.365,
    y: 0.345,
    category: 'Eyes - Left',
  },
  {
    id: 'left_canthus_medialis',
    label: 'Left Medial Canthus',
    medicalTerm: 'Left Canthus Medialis',
    description: 'Inner corner of left eye',
    x: 0.415,
    y: 0.35,
    category: 'Eyes - Left',
  },
  {
    id: 'left_canthus_lateralis',
    label: 'Left Lateral Canthus',
    medicalTerm: 'Left Canthus Lateralis',
    description: 'Outer corner of left eye',
    x: 0.305,
    y: 0.335,  // Slight positive tilt
    category: 'Eyes - Left',
  },
  {
    id: 'left_palpebra_superior',
    label: 'Left Upper Eyelid',
    medicalTerm: 'Left Palpebra Superior',
    description: 'Upper eyelid of left eye',
    x: 0.365,
    y: 0.32,
    category: 'Eyes - Left',
  },
  {
    id: 'left_palpebra_inferior',
    label: 'Left Lower Eyelid',
    medicalTerm: 'Left Palpebra Inferior',
    description: 'Lower eyelid of left eye',
    x: 0.365,
    y: 0.365,
    category: 'Eyes - Left',
  },
  {
    id: 'left_sulcus_palpebralis_lateralis',
    label: 'Left Eyelid Hood End',
    medicalTerm: 'Left Sulcus Palpebralis Lateralis',
    description: 'Lateral end of left upper eyelid crease',
    x: 0.30,
    y: 0.325,
    category: 'Eyes - Left',
  },
  {
    id: 'left_pretarsal_skin_crease',
    label: 'Left Upper Eyelid Crease',
    medicalTerm: 'Left Pretarsal Skin Crease',
    description: 'Left upper eyelid crease',
    x: 0.365,
    y: 0.31,
    category: 'Eyes - Left',
  },

  // Eyes - Right (mirrored, symmetric)
  {
    id: 'right_pupila',
    label: 'Right Pupil',
    medicalTerm: 'Right Pupila',
    description: 'Center of right pupil',
    x: 0.635,
    y: 0.345,
    category: 'Eyes - Right',
  },
  {
    id: 'right_canthus_medialis',
    label: 'Right Medial Canthus',
    medicalTerm: 'Right Canthus Medialis',
    description: 'Inner corner of right eye',
    x: 0.585,
    y: 0.35,
    category: 'Eyes - Right',
  },
  {
    id: 'right_canthus_lateralis',
    label: 'Right Lateral Canthus',
    medicalTerm: 'Right Canthus Lateralis',
    description: 'Outer corner of right eye',
    x: 0.695,
    y: 0.335,
    category: 'Eyes - Right',
  },
  {
    id: 'right_palpebra_superior',
    label: 'Right Upper Eyelid',
    medicalTerm: 'Right Palpebra Superior',
    description: 'Upper eyelid of right eye',
    x: 0.635,
    y: 0.32,
    category: 'Eyes - Right',
  },
  {
    id: 'right_palpebra_inferior',
    label: 'Right Lower Eyelid',
    medicalTerm: 'Right Palpebra Inferior',
    description: 'Lower eyelid of right eye',
    x: 0.635,
    y: 0.365,
    category: 'Eyes - Right',
  },
  {
    id: 'right_sulcus_palpebralis_lateralis',
    label: 'Right Eyelid Hood End',
    medicalTerm: 'Right Sulcus Palpebralis Lateralis',
    description: 'Lateral end of right upper eyelid crease',
    x: 0.70,
    y: 0.325,
    category: 'Eyes - Right',
  },
  {
    id: 'right_pretarsal_skin_crease',
    label: 'Right Upper Eyelid Crease',
    medicalTerm: 'Right Pretarsal Skin Crease',
    description: 'Right upper eyelid crease',
    x: 0.635,
    y: 0.31,
    category: 'Eyes - Right',
  },

  // Eyebrows - Left (masculine, low-set)
  {
    id: 'left_supercilium_medialis',
    label: 'Left Brow Head',
    medicalTerm: 'Left Supercilium Medialis',
    description: 'Medial start of left eyebrow',
    x: 0.42,
    y: 0.275,
    category: 'Eyebrows - Left',
  },
  {
    id: 'left_supercilium_medial_corner',
    label: 'Left Brow Inner Corner',
    medicalTerm: 'Left Supercilium Medial Corner',
    description: 'Inner corner of left eyebrow',
    x: 0.40,
    y: 0.27,
    category: 'Eyebrows - Left',
  },
  {
    id: 'left_supercilium_superior',
    label: 'Left Brow Arch',
    medicalTerm: 'Left Supercilium Superior',
    description: 'Superior arc of left eyebrow',
    x: 0.355,
    y: 0.26,
    category: 'Eyebrows - Left',
  },
  {
    id: 'left_supercilium_apex',
    label: 'Left Brow Peak',
    medicalTerm: 'Left Supercilium Apex',
    description: 'Highest point of left eyebrow',
    x: 0.33,
    y: 0.255,
    category: 'Eyebrows - Left',
  },
  {
    id: 'left_supercilium_lateralis',
    label: 'Left Brow Tail',
    medicalTerm: 'Left Supercilium Lateralis',
    description: 'Lateral end of left eyebrow',
    x: 0.285,
    y: 0.275,
    category: 'Eyebrows - Left',
  },

  // Eyebrows - Right (mirrored)
  {
    id: 'right_supercilium_medialis',
    label: 'Right Brow Head',
    medicalTerm: 'Right Supercilium Medialis',
    description: 'Medial start of right eyebrow',
    x: 0.58,
    y: 0.275,
    category: 'Eyebrows - Right',
  },
  {
    id: 'right_supercilium_medial_corner',
    label: 'Right Brow Inner Corner',
    medicalTerm: 'Right Supercilium Medial Corner',
    description: 'Inner corner of right eyebrow',
    x: 0.60,
    y: 0.27,
    category: 'Eyebrows - Right',
  },
  {
    id: 'right_supercilium_superior',
    label: 'Right Brow Arch',
    medicalTerm: 'Right Supercilium Superior',
    description: 'Superior arc of right eyebrow',
    x: 0.645,
    y: 0.26,
    category: 'Eyebrows - Right',
  },
  {
    id: 'right_supercilium_apex',
    label: 'Right Brow Peak',
    medicalTerm: 'Right Supercilium Apex',
    description: 'Highest point of right eyebrow',
    x: 0.67,
    y: 0.255,
    category: 'Eyebrows - Right',
  },
  {
    id: 'right_supercilium_lateralis',
    label: 'Right Brow Tail',
    medicalTerm: 'Right Supercilium Lateralis',
    description: 'Lateral end of right eyebrow',
    x: 0.715,
    y: 0.275,
    category: 'Eyebrows - Right',
  },

  // Nose (proportionate, harmonious)
  {
    id: 'nasal_base',
    label: 'Nasal Base',
    medicalTerm: 'Nasal Base',
    description: 'Base of nasal dorsum',
    x: 0.5,
    y: 0.37,
    category: 'Nose',
  },
  {
    id: 'left_dorsum_nasi',
    label: 'Left Nose Bridge',
    medicalTerm: 'Left Dorsum Nasi',
    description: 'Left side of nasal bridge',
    x: 0.475,
    y: 0.41,
    category: 'Nose',
  },
  {
    id: 'right_dorsum_nasi',
    label: 'Right Nose Bridge',
    medicalTerm: 'Right Dorsum Nasi',
    description: 'Right side of nasal bridge',
    x: 0.525,
    y: 0.41,
    category: 'Nose',
  },
  {
    id: 'left_ala_nasi',
    label: 'Left Nose Side',
    medicalTerm: 'Left Ala Nasi',
    description: 'Lateral aspect of left nasal ala',
    x: 0.44,
    y: 0.49,
    category: 'Nose',
  },
  {
    id: 'right_ala_nasi',
    label: 'Right Nose Side',
    medicalTerm: 'Right Ala Nasi',
    description: 'Lateral aspect of right nasal ala',
    x: 0.56,
    y: 0.49,
    category: 'Nose',
  },
  {
    id: 'subnasale',
    label: 'Nose Bottom',
    medicalTerm: 'Subnasale',
    description: 'Junction of columella and upper lip',
    x: 0.5,
    y: 0.51,
    category: 'Nose',
  },

  // Mouth (well-proportioned lips)
  {
    id: 'labrale_superius',
    label: "Cupid's Bow",
    medicalTerm: 'Labrale Superius',
    description: 'Midpoint of upper lip vermilion',
    x: 0.5,
    y: 0.57,
    category: 'Mouth',
  },
  {
    id: 'cupids_bow',
    label: "Inner Cupid's Bow",
    medicalTerm: "Cupid's Bow",
    description: 'Central peak of upper lip',
    x: 0.5,
    y: 0.565,
    category: 'Mouth',
  },
  {
    id: 'mouth_middle',
    label: 'Mouth Middle',
    medicalTerm: 'Mouth Middle',
    description: 'Center of mouth opening',
    x: 0.5,
    y: 0.605,
    category: 'Mouth',
  },
  {
    id: 'labrale_inferius',
    label: 'Lower Lip Center',
    medicalTerm: 'Labrale Inferius',
    description: 'Midpoint of lower lip vermilion border',
    x: 0.5,
    y: 0.645,
    category: 'Mouth',
  },
  {
    id: 'left_cheilion',
    label: 'Left Mouth Corner',
    medicalTerm: 'Left Cheilion',
    description: 'Left oral commissure',
    x: 0.415,
    y: 0.605,
    category: 'Mouth',
  },
  {
    id: 'right_cheilion',
    label: 'Right Mouth Corner',
    medicalTerm: 'Right Cheilion',
    description: 'Right oral commissure',
    x: 0.585,
    y: 0.605,
    category: 'Mouth',
  },

  // Jaw (strong, masculine)
  {
    id: 'left_gonion_superior',
    label: 'Left Upper Jaw Angle',
    medicalTerm: 'Left Gonion Superior',
    description: 'Superior aspect of left mandibular angle',
    x: 0.215,
    y: 0.53,
    category: 'Jaw',
  },
  {
    id: 'right_gonion_superior',
    label: 'Right Upper Jaw Angle',
    medicalTerm: 'Right Gonion Superior',
    description: 'Superior aspect of right mandibular angle',
    x: 0.785,
    y: 0.53,
    category: 'Jaw',
  },
  {
    id: 'left_gonion_inferior',
    label: 'Left Lower Jaw Angle',
    medicalTerm: 'Left Gonion Inferior',
    description: 'Inferior aspect of left mandibular angle',
    x: 0.235,
    y: 0.685,
    category: 'Jaw',
  },
  {
    id: 'right_gonion_inferior',
    label: 'Right Lower Jaw Angle',
    medicalTerm: 'Right Gonion Inferior',
    description: 'Inferior aspect of right mandibular angle',
    x: 0.765,
    y: 0.685,
    category: 'Jaw',
  },

  // Chin (strong, projecting)
  {
    id: 'left_mentum_lateralis',
    label: 'Left Chin',
    medicalTerm: 'Left Mentum Lateralis',
    description: 'Left lateral chin',
    x: 0.42,
    y: 0.785,
    category: 'Chin',
  },
  {
    id: 'right_mentum_lateralis',
    label: 'Right Chin',
    medicalTerm: 'Right Mentum Lateralis',
    description: 'Right lateral chin',
    x: 0.58,
    y: 0.785,
    category: 'Chin',
  },
  {
    id: 'menton',
    label: 'Chin Bottom',
    medicalTerm: 'Menton',
    description: 'Lowest point of chin in midline',
    x: 0.5,
    y: 0.865,
    category: 'Chin',
  },

  // Face Width (balanced proportions)
  {
    id: 'left_zygion',
    label: 'Left Cheekbone',
    medicalTerm: 'Left Zygion',
    description: 'Most lateral point of left zygomatic arch',
    x: 0.175,
    y: 0.415,
    category: 'Face Width',
  },
  {
    id: 'right_zygion',
    label: 'Right Cheekbone',
    medicalTerm: 'Right Zygion',
    description: 'Most lateral point of right zygomatic arch',
    x: 0.825,
    y: 0.415,
    category: 'Face Width',
  },
  {
    id: 'left_temporal',
    label: 'Left Temple',
    medicalTerm: 'Left Temporal Point',
    description: 'Left temporal region',
    x: 0.195,
    y: 0.285,
    category: 'Face Width',
  },
  {
    id: 'right_temporal',
    label: 'Right Temple',
    medicalTerm: 'Right Temporal Point',
    description: 'Right temporal region',
    x: 0.805,
    y: 0.285,
    category: 'Face Width',
  },
  {
    id: 'left_auricular_lateral',
    label: 'Left Outer Ear',
    medicalTerm: 'Left Auricular Lateral Point',
    description: 'Lateral-most point of left ear',
    x: 0.115,
    y: 0.385,
    category: 'Face Width',
  },
  {
    id: 'right_auricular_lateral',
    label: 'Right Outer Ear',
    medicalTerm: 'Right Auricular Lateral Point',
    description: 'Lateral-most point of right ear',
    x: 0.885,
    y: 0.385,
    category: 'Face Width',
  },

  // Neck
  {
    id: 'left_cervical_lateralis',
    label: 'Left Neck Point',
    medicalTerm: 'Left Cervical Lateralis',
    description: 'Left cervical point',
    x: 0.35,
    y: 0.94,
    category: 'Neck',
  },
  {
    id: 'right_cervical_lateralis',
    label: 'Right Neck Point',
    medicalTerm: 'Right Cervical Lateralis',
    description: 'Right cervical point',
    x: 0.65,
    y: 0.94,
    category: 'Neck',
  },
];

// ============================================
// SAMPLE SIDE LANDMARKS - Idealized Profile
// Well-projected chin, good nasal angle
// ============================================

export const SAMPLE_SIDE_LANDMARKS: LandmarkPoint[] = [
  // Cranium
  {
    id: 'vertex',
    label: 'Top of Head',
    medicalTerm: 'Vertex',
    description: 'Highest point on the head in profile',
    x: 0.45,
    y: 0.02,
    category: 'Cranium',
  },
  {
    id: 'occiput',
    label: 'Occiput',
    medicalTerm: 'External Occipital Region',
    description: 'Back-of-head prominence',
    x: 0.85,
    y: 0.15,
    category: 'Cranium',
  },

  // Nose (well-projected, ideal angles)
  {
    id: 'pronasale',
    label: 'Nose Tip',
    medicalTerm: 'Pronasale',
    description: 'Most forward point of the nose tip',
    x: 0.165,
    y: 0.475,
    category: 'Nose',
  },

  // Neck
  {
    id: 'neckPoint',
    label: 'Neck Point',
    medicalTerm: 'Anterior Cervical Landmark',
    description: 'Lower neck inflection on the front border',
    x: 0.40,
    y: 0.88,
    category: 'Neck',
  },

  // Ear
  {
    id: 'porion',
    label: 'Porion',
    medicalTerm: 'Porion (soft tissue)',
    description: 'Upper margin of ear canal opening',
    x: 0.75,
    y: 0.34,
    category: 'Ear',
  },

  // Eye Region
  {
    id: 'orbitale',
    label: 'Orbitale',
    medicalTerm: 'Orbitale',
    description: 'Lowest point on the orbital rim',
    x: 0.345,
    y: 0.375,
    category: 'Eye Region',
  },
  {
    id: 'tragus',
    label: 'Tragus',
    medicalTerm: 'Tragion (soft tissue)',
    description: 'Cartilage nub in front of the ear canal',
    x: 0.72,
    y: 0.415,
    category: 'Ear',
  },
  {
    id: 'intertragicNotch',
    label: 'Intertragic Notch',
    medicalTerm: 'Incisura Intertragica',
    description: 'Notch between tragus and antitragus cartilages',
    x: 0.73,
    y: 0.445,
    category: 'Ear',
  },
  {
    id: 'cornealApex',
    label: 'Corneal Apex',
    medicalTerm: 'Corneal Apex',
    description: 'Most forward point of the eye (cornea)',
    x: 0.275,
    y: 0.335,
    category: 'Eye Region',
  },

  // Cheek
  {
    id: 'cheekbone',
    label: 'Cheekbone',
    medicalTerm: 'Zygion (soft-tissue over zygoma)',
    description: 'Zygomatic prominence',
    x: 0.44,
    y: 0.415,
    category: 'Cheek',
  },

  // Forehead
  {
    id: 'trichion',
    label: 'Hairline (Side)',
    medicalTerm: 'Trichion',
    description: 'Anterior hairline',
    x: 0.32,
    y: 0.07,
    category: 'Cranium',
  },
  {
    id: 'glabella',
    label: 'Glabella',
    medicalTerm: 'Glabella',
    description: 'Most prominent point between eyebrows',
    x: 0.305,
    y: 0.275,
    category: 'Forehead',
  },

  // Nose detail points
  {
    id: 'nasion',
    label: 'Nasion',
    medicalTerm: 'Nasion',
    description: 'Junction of nasal root and forehead',
    x: 0.295,
    y: 0.335,
    category: 'Nose',
  },
  {
    id: 'rhinion',
    label: 'Rhinion',
    medicalTerm: 'Rhinion',
    description: 'Lowest point on the nasal bone bridge',
    x: 0.255,
    y: 0.395,
    category: 'Nose',
  },
  {
    id: 'supratip',
    label: 'Supratip',
    medicalTerm: 'Supratip',
    description: 'Point just above the nasal tip',
    x: 0.205,
    y: 0.445,
    category: 'Nose',
  },
  {
    id: 'infratip',
    label: 'Infratip',
    medicalTerm: 'Infratip',
    description: 'Point just below the nasal tip',
    x: 0.185,
    y: 0.495,
    category: 'Nose',
  },
  {
    id: 'columella',
    label: 'Columella',
    medicalTerm: 'Columella',
    description: 'Fleshy external end of the nasal septum',
    x: 0.225,
    y: 0.505,
    category: 'Nose',
  },
  {
    id: 'subnasale',
    label: 'Subnasale',
    medicalTerm: 'Subnasale',
    description: 'Junction of columella and upper lip',
    x: 0.265,
    y: 0.515,
    category: 'Nose',
  },
  {
    id: 'subalare',
    label: 'Subalare',
    medicalTerm: 'Subalare',
    description: 'Junction of ala and cheek',
    x: 0.30,
    y: 0.49,
    category: 'Nose',
  },

  // Lips (good projection)
  {
    id: 'labraleSuperius',
    label: 'Upper Lip',
    medicalTerm: 'Labrale Superius',
    description: 'Most prominent point of upper lip',
    x: 0.245,
    y: 0.56,
    category: 'Lips',
  },
  {
    id: 'cheilion',
    label: 'Mouth Corner',
    medicalTerm: 'Cheilion',
    description: 'Lateral mouth corner',
    x: 0.36,
    y: 0.595,
    category: 'Lips',
  },
  {
    id: 'labraleInferius',
    label: 'Lower Lip',
    medicalTerm: 'Labrale Inferius',
    description: 'Most prominent point of lower lip',
    x: 0.255,
    y: 0.625,
    category: 'Lips',
  },
  {
    id: 'sublabiale',
    label: 'Sublabiale',
    medicalTerm: 'Sublabiale',
    description: 'Deepest point in the mentolabial sulcus',
    x: 0.275,
    y: 0.665,
    category: 'Lips',
  },

  // Chin (strong projection)
  {
    id: 'pogonion',
    label: 'Pogonion',
    medicalTerm: 'Pogonion',
    description: 'Most anterior point on the chin',
    x: 0.26,
    y: 0.72,
    category: 'Chin',
  },
  {
    id: 'menton',
    label: 'Menton',
    medicalTerm: 'Menton',
    description: 'Lowest point on the chin',
    x: 0.32,
    y: 0.795,
    category: 'Chin',
  },

  // Neck
  {
    id: 'cervicalPoint',
    label: 'Cervical Point',
    medicalTerm: 'Cervical Point',
    description: 'Deepest point between chin and neck',
    x: 0.38,
    y: 0.82,
    category: 'Neck',
  },

  // Jaw (defined gonial angle ~120 degrees)
  {
    id: 'gonionTop',
    label: 'Gonion Top',
    medicalTerm: 'Gonion (superior)',
    description: 'Superior aspect of mandibular angle',
    x: 0.65,
    y: 0.56,
    category: 'Jaw',
  },
  {
    id: 'gonionBottom',
    label: 'Gonion Bottom',
    medicalTerm: 'Gonion (inferior)',
    description: 'Inferior aspect of mandibular angle',
    x: 0.56,
    y: 0.69,
    category: 'Jaw',
  },
];

// ============================================
// SAMPLE PLACEHOLDER IMAGE
// A neutral gray silhouette for demo purposes
// ============================================

// Pre-encoded SVG base64 strings (browser-compatible, no Buffer needed)
// These are simple gray face silhouettes for demo purposes

// Front face silhouette SVG
const FRONT_SVG = `<svg xmlns="http://www.w3.org/2000/svg" width="400" height="500" viewBox="0 0 400 500">
  <rect width="400" height="500" fill="#1a1a1a"/>
  <ellipse cx="200" cy="220" rx="120" ry="160" fill="#3a3a3a"/>
  <ellipse cx="200" cy="200" rx="100" ry="130" fill="#4a4a4a"/>
  <circle cx="155" cy="170" r="12" fill="#2a2a2a"/>
  <circle cx="245" cy="170" r="12" fill="#2a2a2a"/>
  <ellipse cx="200" cy="210" rx="15" ry="25" fill="#3a3a3a"/>
  <ellipse cx="200" cy="265" rx="25" ry="8" fill="#3a3a3a"/>
  <text x="200" y="450" text-anchor="middle" fill="#666" font-family="system-ui" font-size="14">Sample Face - Demo Mode</text>
</svg>`;

// Side profile silhouette SVG
const SIDE_SVG = `<svg xmlns="http://www.w3.org/2000/svg" width="400" height="500" viewBox="0 0 400 500">
  <rect width="400" height="500" fill="#1a1a1a"/>
  <path d="M180,50 Q120,100 110,180 Q100,240 120,280 Q90,320 100,350 Q110,380 130,400 Q120,430 150,460 Q200,480 280,460 Q320,400 340,320 Q350,240 340,180 Q330,100 280,50 Z" fill="#4a4a4a"/>
  <ellipse cx="160" cy="170" rx="15" ry="10" fill="#2a2a2a"/>
  <path d="M90,220 Q60,250 80,280 Q100,310 110,300" stroke="#3a3a3a" stroke-width="8" fill="none"/>
  <text x="200" y="450" text-anchor="middle" fill="#666" font-family="system-ui" font-size="14">Sample Profile - Demo Mode</text>
</svg>`;

// Helper to encode SVG to data URL (works in browser)
function svgToDataUrl(svg: string): string {
  // Use encodeURIComponent for browser compatibility
  return `data:image/svg+xml,${encodeURIComponent(svg)}`;
}

export const SAMPLE_FRONT_IMAGE = svgToDataUrl(FRONT_SVG);
export const SAMPLE_SIDE_IMAGE = svgToDataUrl(SIDE_SVG);

// ============================================
// SAMPLE DATA CONFIGURATION
// ============================================

export interface SampleDataConfig {
  gender: Gender;
  ethnicity: Ethnicity;
  variant: 'ideal' | 'average' | 'flawed';
}

/**
 * Generates sample data for the results page.
 *
 * @param config - Configuration for the sample data
 * @returns Complete data set ready for ResultsProvider
 */
export function generateSampleData(config: Partial<SampleDataConfig> = {}) {
  const {
    gender = 'male',
    ethnicity = 'white',
    variant = 'average'
  } = config;

  // Apply slight variations based on variant
  const applyVariation = (landmarks: LandmarkPoint[], amount: number): LandmarkPoint[] => {
    return landmarks.map(landmark => ({
      ...landmark,
      x: landmark.x + (Math.random() - 0.5) * amount,
      y: landmark.y + (Math.random() - 0.5) * amount,
    }));
  };

  // Variation amounts: ideal=0 (perfect), average=0.01, flawed=0.025
  const variationMap = {
    ideal: 0,
    average: 0.01,
    flawed: 0.025
  };

  const variation = variationMap[variant];

  return {
    frontLandmarks: variation > 0
      ? applyVariation(SAMPLE_FRONT_LANDMARKS, variation)
      : SAMPLE_FRONT_LANDMARKS,
    sideLandmarks: variation > 0
      ? applyVariation(SAMPLE_SIDE_LANDMARKS, variation)
      : SAMPLE_SIDE_LANDMARKS,
    frontPhoto: SAMPLE_FRONT_IMAGE,
    sidePhoto: SAMPLE_SIDE_IMAGE,
    gender: gender as Gender,
    ethnicity: ethnicity as Ethnicity,
    isUnlocked: false, // Default to locked for free tier testing
  };
}

/**
 * Checks if sample mode is enabled via URL parameter.
 *
 * @returns true if ?sample=true is in the URL
 */
export function isSampleMode(): boolean {
  if (typeof window === 'undefined') return false;
  const params = new URLSearchParams(window.location.search);
  return params.get('sample') === 'true';
}

/**
 * Gets sample configuration from URL parameters.
 *
 * Example: ?sample=true&gender=female&ethnicity=asian&variant=ideal
 */
export function getSampleConfigFromURL(): SampleDataConfig {
  if (typeof window === 'undefined') {
    return { gender: 'male', ethnicity: 'white', variant: 'average' };
  }

  const params = new URLSearchParams(window.location.search);

  return {
    gender: (params.get('gender') as Gender) || 'male',
    ethnicity: (params.get('ethnicity') as Ethnicity) || 'white',
    variant: (params.get('variant') as 'ideal' | 'average' | 'flawed') || 'average',
  };
}
