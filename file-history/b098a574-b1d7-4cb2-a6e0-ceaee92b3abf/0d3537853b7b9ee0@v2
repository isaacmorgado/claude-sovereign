"use client";

import { motion } from "framer-motion";
import { Check, X, Minus, Star } from "lucide-react";
import { Badge } from "@/components/ui/badge";

interface Feature {
  name: string;
  category: string;
  splice: boolean | string;
  firecut: boolean | string;
  autopod: boolean | string;
  descript: boolean | string;
  timebolt: boolean | string;
  gling: boolean | string;
}

const features: Feature[] = [
  // AI & Automation
  { name: "AI Silence Removal", category: "AI & Automation", splice: "RMS + Whisper + FFprobe", firecut: true, autopod: true, descript: true, timebolt: true, gling: true },
  { name: "Take Detection", category: "AI & Automation", splice: "GPT-4o powered", firecut: true, autopod: false, descript: false, timebolt: false, gling: true },
  { name: "AI Music Generation", category: "AI & Automation", splice: "Mureka AI", firecut: false, autopod: false, descript: false, timebolt: false, gling: false },
  { name: "Scene-Aware Music", category: "AI & Automation", splice: true, firecut: false, autopod: false, descript: false, timebolt: false, gling: false },
  { name: "Song Identification", category: "AI & Automation", splice: "ACRCloud", firecut: false, autopod: false, descript: false, timebolt: false, gling: false },
  { name: "Vocal Isolation", category: "AI & Automation", splice: "Demucs AI", firecut: false, autopod: false, descript: true, timebolt: false, gling: false },
  { name: "Chapter Detection", category: "AI & Automation", splice: "AI + YouTube export", firecut: true, autopod: false, descript: true, timebolt: false, gling: false },

  // Captions & Text
  { name: "Animated Captions", category: "Captions & Text", splice: "5 templates", firecut: "Basic", autopod: false, descript: true, timebolt: false, gling: false },
  { name: "MrBeast/Hormozi Style", category: "Captions & Text", splice: true, firecut: false, autopod: false, descript: false, timebolt: false, gling: false },
  { name: "Keyword Highlighting", category: "Captions & Text", splice: "AI-powered", firecut: false, autopod: false, descript: true, timebolt: false, gling: false },
  { name: "Text-Based Editing", category: "Captions & Text", splice: "Full LCS diff", firecut: false, autopod: false, descript: true, timebolt: false, gling: false },
  { name: "Profanity Detection", category: "Captions & Text", splice: "5 bleep types", firecut: false, autopod: false, descript: true, timebolt: false, gling: false },

  // Video & Reframe
  { name: "Social Reframe", category: "Video & Reframe", splice: "Face tracking", firecut: false, autopod: "Basic", descript: true, timebolt: false, gling: false },
  { name: "Auto Zoom", category: "Video & Reframe", splice: "3 intensities", firecut: true, autopod: false, descript: false, timebolt: false, gling: false },
  { name: "Safe Zone Overlay", category: "Video & Reframe", splice: true, firecut: false, autopod: false, descript: false, timebolt: false, gling: false },

  // Multicam & Podcast
  { name: "Multitrack Editing", category: "Multicam & Podcast", splice: "Auto-balance", firecut: true, autopod: true, descript: "Basic", timebolt: false, gling: false },
  { name: "Speaker Detection", category: "Multicam & Podcast", splice: true, firecut: true, autopod: true, descript: true, timebolt: false, gling: false },
  { name: "Wide Shot Support", category: "Multicam & Podcast", splice: true, firecut: true, autopod: true, descript: false, timebolt: false, gling: false },

  // Platform & Integration
  { name: "Premiere Pro Plugin", category: "Platform", splice: true, firecut: true, autopod: true, descript: false, timebolt: true, gling: false },
  { name: "UXP Support (PP 25.6+)", category: "Platform", splice: true, firecut: false, autopod: false, descript: false, timebolt: false, gling: false },
  { name: "CEP Support (Legacy)", category: "Platform", splice: true, firecut: true, autopod: true, descript: false, timebolt: true, gling: false },
  { name: "Standalone App", category: "Platform", splice: false, firecut: false, autopod: false, descript: true, timebolt: true, gling: true },
];

const competitors = [
  { key: "splice", name: "SPLICE", price: "$19-149/mo", highlight: true },
  { key: "firecut", name: "FireCut", price: "$14-29/mo", highlight: false },
  { key: "autopod", name: "AutoPod", price: "$29/yr", highlight: false },
  { key: "descript", name: "Descript", price: "$12-24/mo", highlight: false },
  { key: "timebolt", name: "Timebolt", price: "$17/mo", highlight: false },
  { key: "gling", name: "Gling", price: "$15/mo", highlight: false },
];

function FeatureCell({ value }: { value: boolean | string }) {
  if (value === true) {
    return (
      <div className="flex justify-center">
        <div className="w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center">
          <Check className="w-4 h-4 text-green-500" />
        </div>
      </div>
    );
  }
  if (value === false) {
    return (
      <div className="flex justify-center">
        <div className="w-6 h-6 rounded-full bg-red-500/20 flex items-center justify-center">
          <X className="w-4 h-4 text-red-500" />
        </div>
      </div>
    );
  }
  return (
    <div className="text-center text-xs font-medium text-green-600 dark:text-green-400 px-1">
      {value}
    </div>
  );
}

export function Comparison() {
  const categories = [...new Set(features.map(f => f.category))];

  return (
    <section id="comparison" className="py-24 bg-muted/30">
      <div className="container mx-auto px-4">
        {/* Section header */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5 }}
          className="text-center mb-12"
        >
          <Badge variant="outline" className="mb-4 px-3 py-1 text-sm">
            <Star className="w-3 h-3 mr-1.5 fill-yellow-500 text-yellow-500" />
            Most Comprehensive Feature Set
          </Badge>
          <h2 className="text-3xl md:text-4xl font-bold mb-4">
            See How <span className="gradient-text">SPLICE</span> Compares
          </h2>
          <p className="text-lg text-muted-foreground max-w-2xl mx-auto">
            The most powerful AI editing toolkit on the market. Compare features across
            all major video editing automation tools.
          </p>
        </motion.div>

        {/* Comparison table */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5, delay: 0.2 }}
          className="overflow-x-auto rounded-xl border border-border/50 bg-card"
        >
          <table className="w-full min-w-[900px]">
            {/* Header */}
            <thead>
              <tr className="border-b border-border/50 bg-muted/50">
                <th className="text-left p-4 font-medium sticky left-0 bg-muted/50 min-w-[200px]">
                  Feature
                </th>
                {competitors.map((comp) => (
                  <th key={comp.key} className={`p-3 text-center min-w-[100px] ${comp.highlight ? 'bg-primary/5' : ''}`}>
                    <div className={`font-bold ${comp.highlight ? 'gradient-text text-lg' : 'text-sm'}`}>
                      {comp.name}
                    </div>
                    <div className="text-xs text-muted-foreground mt-0.5">{comp.price}</div>
                    {comp.highlight && (
                      <Badge className="mt-1 text-[10px] bg-gradient-to-r from-violet-600 to-cyan-600">
                        Best Value
                      </Badge>
                    )}
                  </th>
                ))}
              </tr>
            </thead>

            {/* Body grouped by category */}
            <tbody>
              {categories.map((category, categoryIndex) => (
                <>
                  {/* Category header */}
                  <tr key={`cat-${category}`} className="bg-muted/30">
                    <td colSpan={7} className="p-2 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider">
                      {category}
                    </td>
                  </tr>
                  {/* Features in category */}
                  {features
                    .filter(f => f.category === category)
                    .map((feature, index) => (
                      <tr
                        key={feature.name}
                        className={`border-b border-border/30 hover:bg-muted/20 transition-colors ${
                          index % 2 === 0 ? '' : 'bg-muted/10'
                        }`}
                      >
                        <td className="p-3 px-4 font-medium text-sm sticky left-0 bg-card">
                          {feature.name}
                        </td>
                        <td className="p-2 bg-primary/5">
                          <FeatureCell value={feature.splice} />
                        </td>
                        <td className="p-2">
                          <FeatureCell value={feature.firecut} />
                        </td>
                        <td className="p-2">
                          <FeatureCell value={feature.autopod} />
                        </td>
                        <td className="p-2">
                          <FeatureCell value={feature.descript} />
                        </td>
                        <td className="p-2">
                          <FeatureCell value={feature.timebolt} />
                        </td>
                        <td className="p-2">
                          <FeatureCell value={feature.gling} />
                        </td>
                      </tr>
                    ))}
                </>
              ))}
            </tbody>
          </table>
        </motion.div>

        {/* Summary cards */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5, delay: 0.4 }}
          className="mt-12 grid md:grid-cols-2 lg:grid-cols-4 gap-4"
        >
          {[
            {
              stat: "22",
              label: "Features",
              description: "vs 8-12 for competitors",
              color: "text-violet-500"
            },
            {
              stat: "Only",
              label: "AI Music Plugin",
              description: "Generate custom soundtracks",
              color: "text-cyan-500"
            },
            {
              stat: "UXP",
              label: "Future-Proof",
              description: "Ready for PP 25.6+",
              color: "text-green-500"
            },
            {
              stat: "Textâ†’Video",
              label: "Unique Workflow",
              description: "Delete text = delete video",
              color: "text-orange-500"
            },
          ].map((item) => (
            <div
              key={item.label}
              className="bg-card/50 rounded-lg p-5 border border-border/50 text-center"
            >
              <div className={`text-2xl font-bold ${item.color}`}>{item.stat}</div>
              <div className="font-semibold mt-1">{item.label}</div>
              <div className="text-xs text-muted-foreground mt-1">{item.description}</div>
            </div>
          ))}
        </motion.div>

        {/* CTA */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5, delay: 0.5 }}
          className="mt-10 text-center"
        >
          <p className="text-sm text-muted-foreground">
            Missing a comparison? <a href="mailto:hello@splice.app" className="text-primary hover:underline">Let us know</a> which tools you&apos;d like to see.
          </p>
        </motion.div>
      </div>
    </section>
  );
}
