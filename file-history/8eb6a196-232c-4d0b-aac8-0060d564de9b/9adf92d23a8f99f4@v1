# LOOKSMAXX

A facial metrics analysis and visualization system with Next.js frontend and MediaPipe-based facial landmark detection. Now with FaceIQ-compatible scoring and results UI.

## Current Focus
Section: FaceIQ Parity - Scoring & Results
Files: `looksmaxx-app/src/lib/faceiq-scoring.ts`, `looksmaxx-app/src/contexts/ResultsContext.tsx`

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Animation**: Framer Motion
- **Face Detection**: MediaPipe Tasks Vision (client, 478 landmarks) + InsightFace (server, 106 landmarks)
- **Scoring**: FaceIQ-compatible exponential decay with 70+ measurements
- **Backend**: FastAPI on Railway with PostgreSQL

## API URL
- **Production**: https://api-production-6148.up.railway.app

## Code Quality

```bash
cd looksmaxx-app && npm run lint && npx tsc --noEmit
```

## Last Session (2025-12-20)

### Completed
- Fixed InsightFace on Railway: Changed `onnxruntime-cpu` to `onnxruntime` (package name was wrong)
- API now working with `detection_ready: true`, InsightFace buffalo_s model loaded
- Added METRIC_FLAW_MAPPINGS to faceiq-scoring.ts (28 metrics with FaceIQ-style structure)
- Added METRIC_CUSTOM_CURVES with 5 key Bezier curves (faceWidthToHeight, lowerThirdProportion, etc.)
- TypeScript compilation passing
- Updated fixit.md with progress

### Key Fix
```
# requirements.txt - WRONG vs CORRECT
onnxruntime-cpu==1.16.3  # Does NOT exist on PyPI
onnxruntime==1.16.3      # Correct package name
```

## Next Steps

1. Test `/api/side-landmarks` endpoint with real base64 image
2. Connect frontend analysis flow to results page
3. Add more custom Bezier curves (extracted 66 from FaceIQ, only 5 added)
4. Add landmark visualization on face photos
5. Implement severity badges display in UI
