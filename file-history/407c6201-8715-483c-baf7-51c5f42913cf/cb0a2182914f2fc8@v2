---
name: check
description: Run linting and typechecking across the entire monorepo
---

# Roo Code Quality Check

This command runs all linting and typechecking tools for the Roo Code monorepo, which uses **Turbo** for orchestration across multiple packages.

## Step 1: Ensure Dependencies Are Built

**IMPORTANT:** The monorepo uses workspace dependencies that must be built first.

```bash
cd /Users/imorgado/Projects/Roo-Code

# Build shared config packages if not already built
pnpm run build
```

This builds packages like `@roo-code/config-eslint`, `@roo-code/config-typescript`, and `@roo-code/types` that are required by other packages.

## Step 2: Run Linting and Typechecking

Run the monorepo-wide quality checks using Turbo:

```bash
# Run linting across all packages (requires build first)
pnpm run lint

# Run typechecking across all packages
pnpm run check-types

# Optionally run formatting check
pnpm run format --check
```

These commands will:
- Execute `turbo lint` which runs ESLint on all packages in parallel
- Execute `turbo check-types` which runs TypeScript compiler checks on all packages
- Show aggregated results from all workspace packages

## Step 3: Parse Results

Review the output and identify issues by category:

### ESLint Errors
Look for:
- Lines starting with error indicators (×, ✖)
- Rule violations (e.g., `@typescript-eslint/no-unused-vars`)
- File paths with line numbers

### TypeScript Errors
Look for:
- Lines with `error TS####:`
- Type mismatches, missing types, unused variables
- Files with compilation errors

### Formatting Issues
Look for:
- Files that would be reformatted by Prettier
- Inconsistent spacing, quotes, or semicolons

## Step 4: Summary

After running the checks, provide a summary:

```
✓ Total packages checked: [number]
✗ Packages with lint errors: [number]
✗ Packages with type errors: [number]
⚠ Total issues found: [number]
```

List affected files and primary issue categories.

## Notes

- This is a **monorepo** with multiple packages under `packages/`, `apps/`, `src/`, and `webview-ui/`
- Turbo runs checks in parallel across all workspaces
- Each package has its own `eslint.config.mjs` and `tsconfig.json`
- The `src/` directory is the main VS Code extension package
- Existing tools: ESLint (9.x with flat config), TypeScript (5.8.x), Prettier (3.x)
- Package manager: **pnpm** with workspace protocol

## Current Configuration

### ESLint
- Config: Flat config (`eslint.config.mjs`) in each package
- Base config: `@roo-code/config-eslint/base`
- Notable disabled rules in `src/`:
  - `@typescript-eslint/no-unused-vars`: off
  - `@typescript-eslint/no-explicit-any`: off
  - `prefer-const`: off

### TypeScript
- Base config: `@roo-code/config-typescript/base.json`
- Strict mode: enabled in `src/tsconfig.json`
- Recent updates: `useUnknownInCatchVariables: true`, `noUnusedLocals: true`

### Prettier
- Config: `.prettierrc.json` in root
- Tab width: 4 spaces (using tabs)
- No semicolons
- Print width: 120

## Quick Fix Reference

If you want to auto-fix issues after running checks:

```bash
# Auto-fix ESLint issues
pnpm run lint --fix

# Auto-format with Prettier
pnpm run format
```

However, for comprehensive fixes with AI assistance, you may want to use a dedicated fix command that spawns parallel agents for different issue types.
