# LOOKSMAXX

A facial metrics analysis and visualization system with Next.js frontend and MediaPipe-based facial landmark detection. Now with FaceIQ-compatible scoring and results UI.

## Current Focus
Section: FaceIQ Parity - Scoring & Results
Files: `looksmaxx-app/src/lib/faceiq-scoring.ts`, `looksmaxx-app/src/contexts/ResultsContext.tsx`

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Animation**: Framer Motion
- **Face Detection**: MediaPipe Tasks Vision (client, 478 landmarks) + InsightFace (server, 106 landmarks)
- **Scoring**: FaceIQ-compatible exponential decay with 70+ measurements
- **Backend**: FastAPI on Railway with PostgreSQL

## API URL
- **Production**: https://api-production-6148.up.railway.app

## Code Quality

```bash
cd looksmaxx-app && npm run lint && npx tsc --noEmit
```

## Last Session (2025-12-20 PM)

### Completed
- **Tested `/api/side-landmarks` endpoint** - Both FaceIQ-compatible and legacy endpoints working
  - Returns 106 landmarks with 28 named cephalometric points
  - Response time: ~3.3s for real image
- **Connected frontend analysis flow to results page**
  - Analysis page now stores data in sessionStorage and navigates to `/results`
  - Removed inline ResultsDashboard in favor of new tabbed Results page
- **Fixed all lint errors** - Build passing cleanly

### Previous Session
- Fixed InsightFace on Railway: Changed `onnxruntime-cpu` to `onnxruntime`
- API working with `detection_ready: true`, InsightFace buffalo_s model loaded
- Added METRIC_FLAW_MAPPINGS (28 metrics) + METRIC_CUSTOM_CURVES (5 Bezier curves)

### Key Test Script
```bash
node test-side-landmarks.js  # Tests Railway API endpoint
```

## Next Steps

1. Add more custom Bezier curves (extracted 66 from FaceIQ, only 5 added)
2. Add landmark visualization on face photos
3. Implement severity badges display in UI
4. Test full analysis flow end-to-end (upload -> analysis -> results)
