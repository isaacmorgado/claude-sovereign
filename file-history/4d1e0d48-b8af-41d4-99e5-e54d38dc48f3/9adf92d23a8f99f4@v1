# LOOKSMAXX

A facial metrics analysis and visualization system with Next.js frontend and MediaPipe-based facial landmark detection. Now with FaceIQ-compatible scoring and results UI.

## Current Focus
Section: Leaderboard Implementation
Files: `looksmaxx-app/leaderboard.md`, `looksmaxx-api/app/routers/leaderboard.py`

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Animation**: Framer Motion
- **Face Detection**: MediaPipe Tasks Vision (client, 478 landmarks) + InsightFace (server, 106 landmarks)
- **Scoring**: FaceIQ-compatible exponential decay with 70+ measurements
- **Backend**: FastAPI on Railway with PostgreSQL

## API URL
- **Production**: https://api-production-6148.up.railway.app

## Code Quality

```bash
cd looksmaxx-app && npm run lint && npx tsc --noEmit
```

## Last Session (2025-12-23)

### Completed
- **Deployed leaderboard backend** - Committed and pushed to Railway (commit `dd156e9`)
- **All 5 endpoints live**:
  - `POST /leaderboard/score` - Submit/update score
  - `GET /leaderboard/rank` - Get user's rank
  - `GET /leaderboard` - List top entries
  - `GET /leaderboard/around-me` - Entries around user
  - `GET /leaderboard/user/{id}` - User profile
- **Database auto-creates** via SQLAlchemy `Base.metadata.create_all()` on startup

Stopped at: Backend complete (Steps 1-3), ready for frontend (Steps 4-9)

## Leaderboard Implementation Status

### âœ… Backend Complete
| Step | Component | Status |
|------|-----------|--------|
| 1 | Database Setup | âœ… Auto-created by SQLAlchemy |
| 2 | Backend Model | âœ… `app/models/leaderboard.py` |
| 3 | Backend Router | âœ… `app/routers/leaderboard.py` |

### ðŸ”² Frontend Remaining
| Step | Component | Files |
|------|-----------|-------|
| 4 | Frontend Types | `src/types/results.ts` |
| 5 | Frontend API | `src/lib/api.ts` |
| 6 | Frontend Context | `src/contexts/LeaderboardContext.tsx` |
| 7 | Frontend Components | `RankBadge.tsx`, `UserProfileModal.tsx`, `LeaderboardTab.tsx` |
| 8 | Integration | `ResultsLayout.tsx`, `Results.tsx`, `Providers.tsx` |
| 9 | Auto-submit | Hook into analysis completion |

## FaceIQ Parity Status

### âœ… Fully Completed
| Feature | File | Details |
|---------|------|---------|
| **All 66 Bezier Curves** | `src/lib/faceiq-bezier-curves.ts` | Complete cubic Bezier interpolation |
| **30 Procedure Impact Tables** | `src/lib/advice-engine.ts` | Quantitative % changes per metric |
| **16 Ethnicity Overrides** | `src/lib/insights-engine.ts` | 8 male + 8 female with full scoring params |
| **Scoring Engine** | `src/lib/faceiq-scoring.ts` | 70+ metrics with exponential decay |

### ðŸ”² Remaining
1. Complete leaderboard frontend (Steps 4-9)
2. Debug blank results page issue
3. Implement supplement/product e-commerce layer
