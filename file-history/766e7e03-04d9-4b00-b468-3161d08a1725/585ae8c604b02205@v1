# Plan: Merge Detect Takes into Remove Silences

## Goal
Consolidate the two action cards into a single unified card with "Detect Takes" as an optional checkbox.

## Current State
- Two separate side-by-side cards: "Remove Silences" and "Detect Takes"
- Each has its own GO button and options panel
- Takes options: "Auto-mark best takes" checkbox

## Proposed Changes

### 1. HTML Changes (index.html)

**Remove:**
- Entire "Detect Takes" action card (lines ~723-734)

**Modify "Remove Silences" card:**
```html
<div class="action-card">
  <h2>Auto-Cut</h2>  <!-- Rename from "Remove Silences" -->
  <button id="silenceGoBtn" class="go-btn">GO</button>
  <button id="silenceOptionsToggle" class="options-toggle">More options</button>
  <div id="silenceOptions" class="options-panel collapsed">
    <!-- Existing: Sensitivity slider -->
    <!-- Existing: Audio source checkboxes -->
    <!-- NEW: Detect Takes checkbox -->
    <sp-checkbox id="detectTakesEnabled">Also detect takes</sp-checkbox>
  </div>
</div>
```

**Add to Settings Modal:**
```html
<div class="setting-group">
  <label>Takes Detection</label>
  <sp-checkbox id="autoMarkBest" checked>Auto-mark best takes</sp-checkbox>
</div>
```

### 2. CSS Changes (index.html)
- Remove `.takes-btn` styles (no longer needed)
- Adjust `.action-cards` to single card layout (remove flex gap)

### 3. JS Changes (main.js)

**Modify `initSilenceWorkflow()`:**
- Check if `detectTakesEnabled` checkbox is checked
- If checked, run both silence detection AND takes detection
- Show combined preview or sequential previews

**Remove:**
- `initTakesWorkflow()` function (merge into silence workflow)
- Separate takes GO button handler

**Update cached UI elements:**
- Remove `ui.takesGoBtn`
- Add `ui.detectTakesEnabled`

### 4. Workflow Behavior

**Option A: Sequential Processing**
1. Click GO → Detect silences → Show silence preview → Apply
2. If "detect takes" checked → Detect takes → Show takes preview → Apply

**Option B: Parallel Processing**
1. Click GO → Detect silences + takes simultaneously
2. Show combined preview with tabs or sections
3. Apply both at once

## Files to Modify
- `/Users/imorgado/SPLICE/splice-plugin/index.html`
- `/Users/imorgado/SPLICE/splice-plugin/js/main.js`
- `/Users/imorgado/SPLICE/splice-plugin/js/settings.js`

## Questions for User
- Should takes detection run automatically when checkbox is enabled, or show a separate preview step?
- Should the card be renamed (e.g., "Auto-Cut" instead of "Remove Silences")?
