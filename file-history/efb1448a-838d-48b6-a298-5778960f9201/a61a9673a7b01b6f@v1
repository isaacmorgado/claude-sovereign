/**
 * Landmark Image Generation Script
 *
 * Generates prompts for creating landmark reference images across all
 * race/gender combinations. Use with image generation tools like:
 * - Midjourney
 * - DALL-E
 * - Stable Diffusion
 * - NanoBanana
 *
 * Usage: npx ts-node scripts/generate-landmark-images.ts
 */

const RACES = [
  'white',
  'black',
  'east_asian',
  'south_asian',
  'hispanic',
  'middle_eastern',
  'native_american',
  'pacific_islander',
] as const;

const GENDERS = ['male', 'female'] as const;

// Landmark definitions with prompt descriptions
const FRONT_LANDMARKS = {
  // Eye landmarks
  leftEyePupil: { area: 'eye', desc: 'close-up of left eye showing pupil and iris' },
  rightEyePupil: { area: 'eye', desc: 'close-up of right eye showing pupil and iris' },
  leftEyeMedialCanthus: { area: 'eye', desc: 'inner corner of left eye' },
  rightEyeMedialCanthus: { area: 'eye', desc: 'inner corner of right eye' },
  leftEyeLateralCanthus: { area: 'eye', desc: 'outer corner of left eye' },
  rightEyeLateralCanthus: { area: 'eye', desc: 'outer corner of right eye' },
  leftEyeUpperEyelid: { area: 'eye', desc: 'upper eyelid of left eye' },
  rightEyeUpperEyelid: { area: 'eye', desc: 'upper eyelid of right eye' },
  leftEyeLowerEyelid: { area: 'eye', desc: 'lower eyelid of left eye' },
  rightEyeLowerEyelid: { area: 'eye', desc: 'lower eyelid of right eye' },
  leftUpperEyelidCrease: { area: 'eye', desc: 'eyelid crease above left eye' },
  rightUpperEyelidCrease: { area: 'eye', desc: 'eyelid crease above right eye' },
  leftEyelidHoodEnd: { area: 'eye', desc: 'eyelid hood of left eye' },
  rightEyelidHoodEnd: { area: 'eye', desc: 'eyelid hood of right eye' },

  // Brow landmarks
  leftBrowHead: { area: 'brow', desc: 'inner end of left eyebrow' },
  rightBrowHead: { area: 'brow', desc: 'inner end of right eyebrow' },
  leftBrowTail: { area: 'brow', desc: 'outer end of left eyebrow' },
  rightBrowTail: { area: 'brow', desc: 'outer end of right eyebrow' },
  leftBrowArch: { area: 'brow', desc: 'arch of left eyebrow' },
  rightBrowArch: { area: 'brow', desc: 'arch of right eyebrow' },
  leftBrowPeak: { area: 'brow', desc: 'highest point of left eyebrow' },
  rightBrowPeak: { area: 'brow', desc: 'highest point of right eyebrow' },
  leftBrowInnerCorner: { area: 'brow', desc: 'inner corner of left eyebrow' },
  rightBrowInnerCorner: { area: 'brow', desc: 'inner corner of right eyebrow' },

  // Nose landmarks
  nasalBase: { area: 'nose', desc: 'base of nose between nostrils' },
  noseBottom: { area: 'nose', desc: 'bottom tip of nose' },
  noseLeft: { area: 'nose', desc: 'left nostril/ala nasi' },
  noseRight: { area: 'nose', desc: 'right nostril/ala nasi' },
  leftNoseBridge: { area: 'nose', desc: 'left side of nose bridge' },
  rightNoseBridge: { area: 'nose', desc: 'right side of nose bridge' },

  // Mouth landmarks
  cupidsBow: { area: 'mouth', desc: 'cupids bow of upper lip' },
  innerCupidsBow: { area: 'mouth', desc: 'inner cupids bow' },
  mouthMiddle: { area: 'mouth', desc: 'center of lips' },
  mouthLeft: { area: 'mouth', desc: 'left corner of mouth' },
  mouthRight: { area: 'mouth', desc: 'right corner of mouth' },
  lowerLip: { area: 'mouth', desc: 'lower lip' },

  // Chin landmarks
  chinBottom: { area: 'chin', desc: 'bottom of chin' },
  chinLeft: { area: 'chin', desc: 'left side of chin' },
  chinRight: { area: 'chin', desc: 'right side of chin' },

  // Jaw landmarks
  leftTopGonion: { area: 'jaw', desc: 'upper jaw angle on left' },
  rightTopGonion: { area: 'jaw', desc: 'upper jaw angle on right' },
  leftBottomGonion: { area: 'jaw', desc: 'lower jaw angle on left' },
  rightBottomGonion: { area: 'jaw', desc: 'lower jaw angle on right' },

  // Cheek landmarks
  leftCheek: { area: 'cheek', desc: 'left cheekbone' },
  rightCheek: { area: 'cheek', desc: 'right cheekbone' },

  // Temple landmarks
  leftTemple: { area: 'temple', desc: 'left temple area' },
  rightTemple: { area: 'temple', desc: 'right temple area' },

  // Ear landmarks
  leftOuterEar: { area: 'ear', desc: 'left ear from front' },
  rightOuterEar: { area: 'ear', desc: 'right ear from front' },

  // Neck landmarks
  neckLeft: { area: 'neck', desc: 'left side of neck' },
  neckRight: { area: 'neck', desc: 'right side of neck' },

  // Hairline
  hairline: { area: 'forehead', desc: 'hairline at center of forehead' },
};

const SIDE_LANDMARKS = {
  // Forehead
  trichion: { area: 'forehead', desc: 'hairline in profile' },
  glabella: { area: 'forehead', desc: 'glabella between brows' },
  forehead: { area: 'forehead', desc: 'forehead prominence' },
  vertex: { area: 'head', desc: 'top of head in profile' },
  occiput: { area: 'head', desc: 'back of head' },

  // Eye region
  nasion: { area: 'nose', desc: 'bridge of nose at eye level' },
  orbitale: { area: 'eye', desc: 'lower eye socket' },
  cornealApex: { area: 'eye', desc: 'cornea in profile' },
  eyelidEnd: { area: 'eye', desc: 'lateral eyelid in profile' },
  lowerEyelid: { area: 'eye', desc: 'lower eyelid in profile' },

  // Nose
  rhinion: { area: 'nose', desc: 'nose bridge' },
  supratip: { area: 'nose', desc: 'above nose tip' },
  pronasale: { area: 'nose', desc: 'nose tip' },
  infratip: { area: 'nose', desc: 'below nose tip' },
  columella: { area: 'nose', desc: 'columella below nose' },
  subalare: { area: 'nose', desc: 'base of nostril' },
  subnasale: { area: 'nose', desc: 'junction of nose and lip' },

  // Lips
  labraleSuperius: { area: 'lips', desc: 'upper lip vermilion' },
  labraleInferius: { area: 'lips', desc: 'lower lip vermilion' },
  cheilion: { area: 'lips', desc: 'corner of mouth in profile' },
  sublabiale: { area: 'lips', desc: 'below lower lip' },

  // Chin
  pogonion: { area: 'chin', desc: 'chin prominence' },
  menton: { area: 'chin', desc: 'bottom of chin' },

  // Jaw
  gonionTop: { area: 'jaw', desc: 'upper jaw angle' },
  gonionBottom: { area: 'jaw', desc: 'lower jaw angle' },

  // Ear
  tragus: { area: 'ear', desc: 'ear tragus' },
  porion: { area: 'ear', desc: 'ear canal opening' },
  intertragicNotch: { area: 'ear', desc: 'ear notch' },

  // Neck
  cervicalPoint: { area: 'neck', desc: 'neck under chin' },
  neckPoint: { area: 'neck', desc: 'neck profile' },

  // Cheek
  cheekbone: { area: 'cheek', desc: 'cheekbone in profile' },
};

// Race-specific prompt modifiers
const RACE_MODIFIERS: Record<typeof RACES[number], string> = {
  white: 'Caucasian European',
  black: 'African Black',
  east_asian: 'East Asian (Chinese/Japanese/Korean)',
  south_asian: 'South Asian Indian',
  hispanic: 'Hispanic Latino',
  middle_eastern: 'Middle Eastern Arab',
  native_american: 'Native American Indigenous',
  pacific_islander: 'Pacific Islander Polynesian',
};

// Gender-specific modifiers
const GENDER_MODIFIERS: Record<typeof GENDERS[number], string> = {
  male: 'adult man, masculine features',
  female: 'adult woman, feminine features',
};

function generatePrompt(
  landmark: string,
  landmarkData: { area: string; desc: string },
  race: typeof RACES[number],
  gender: typeof GENDERS[number],
  profile: 'front' | 'side'
): string {
  const raceDesc = RACE_MODIFIERS[race];
  const genderDesc = GENDER_MODIFIERS[gender];
  const viewDesc = profile === 'front' ? 'front view' : 'side profile view';

  return `Professional close-up photograph of ${landmarkData.desc}, ${raceDesc} ${genderDesc}, ${viewDesc}, studio lighting, neutral background, high resolution, photorealistic, for medical/anatomical reference`;
}

function generateFilename(
  landmark: string,
  race: typeof RACES[number],
  gender: typeof GENDERS[number]
): string {
  return `${gender}_${race}_${landmark}.webp`;
}

// Generate all prompts
function generateAllPrompts(): void {
  const allPrompts: Array<{
    filename: string;
    prompt: string;
    profile: 'front' | 'side';
  }> = [];

  // Front landmarks
  for (const [landmark, data] of Object.entries(FRONT_LANDMARKS)) {
    for (const race of RACES) {
      for (const gender of GENDERS) {
        allPrompts.push({
          filename: generateFilename(landmark, race, gender),
          prompt: generatePrompt(landmark, data, race, gender, 'front'),
          profile: 'front',
        });
      }
    }
  }

  // Side landmarks
  for (const [landmark, data] of Object.entries(SIDE_LANDMARKS)) {
    for (const race of RACES) {
      for (const gender of GENDERS) {
        allPrompts.push({
          filename: generateFilename(landmark, race, gender),
          prompt: generatePrompt(landmark, data, race, gender, 'side'),
          profile: 'side',
        });
      }
    }
  }

  // Summary
  console.log('='.repeat(60));
  console.log('LANDMARK IMAGE GENERATION SUMMARY');
  console.log('='.repeat(60));
  console.log(`Front landmarks: ${Object.keys(FRONT_LANDMARKS).length}`);
  console.log(`Side landmarks: ${Object.keys(SIDE_LANDMARKS).length}`);
  console.log(`Races: ${RACES.length}`);
  console.log(`Genders: ${GENDERS.length}`);
  console.log(`Total images needed: ${allPrompts.length}`);
  console.log('='.repeat(60));

  // Output prompts grouped by race/gender for batch generation
  console.log('\n\nPROMPTS BY DEMOGRAPHIC GROUP:\n');

  for (const gender of GENDERS) {
    for (const race of RACES) {
      console.log(`\n${'='.repeat(40)}`);
      console.log(`${gender.toUpperCase()} ${race.toUpperCase()}`);
      console.log('='.repeat(40));

      const groupPrompts = allPrompts.filter(
        p => p.filename.startsWith(`${gender}_${race}_`)
      );

      groupPrompts.forEach((p, i) => {
        console.log(`\n[${i + 1}] ${p.filename}`);
        console.log(`    ${p.prompt}`);
      });
    }
  }

  // Output JSON for programmatic use
  const outputPath = './scripts/landmark-prompts.json';
  const fs = require('fs');
  fs.writeFileSync(outputPath, JSON.stringify(allPrompts, null, 2));
  console.log(`\n\nPrompts saved to: ${outputPath}`);
}

// Run
generateAllPrompts();
