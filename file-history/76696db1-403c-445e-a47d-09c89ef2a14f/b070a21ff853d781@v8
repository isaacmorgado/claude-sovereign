# LibreChat Configuration with MCP Servers
# Documentation: https://www.librechat.ai/docs/configuration/librechat_yaml

version: 1.2.0

# Custom AI Endpoints Configuration
endpoints:
  custom:
    # Featherless.ai - Premium Uncensored & Reasoning Models
    - name: "Featherless"
      apiKey: "${FEATHERLESS_API_KEY}"
      baseURL: "https://api.featherless.ai/v1"
      models:
        default:
          - "huihui-ai/DeepSeek-R1-Distill-Qwen-32B-abliterated"
          - "deepseek-ai/DeepSeek-R1-Distill-Qwen-32B"
          - "huihui-ai/Qwen2.5-72B-Instruct-abliterated"
          - "Qwen/Qwen2.5-32B-Instruct"
          - "Qwen/Qwen2.5-Coder-32B-Instruct"
          - "huihui-ai/Qwen2.5-14B-Instruct-1M-abliterated"
        fetch: false
      titleConvo: true
      titleModel: "Qwen/Qwen2.5-32B-Instruct"
      summarize: false
      summaryModel: "Qwen/Qwen2.5-32B-Instruct"
      forcePrompt: false
      modelDisplayLabel: "Featherless"
      addParams:
        max_tokens: 4096
        temperature: 0.7
        top_p: 0.9

# MCP (Model Context Protocol) Servers Configuration
mcpServers:
  # GitHub MCP Server - Repository management and code search
  # Note: Using deprecated package but it's the only one compatible with Node 20
  github:
    type: stdio
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-github"
    timeout: 60000
    env:
      GITHUB_PERSONAL_ACCESS_TOKEN: ""
    serverInstructions: |
      Use this server to interact with GitHub API:
      - Create and update issues and pull requests
      - Search repositories and code
      - Get repository and file information
      - Fork and star repositories
      Note: Requires GITHUB_PERSONAL_ACCESS_TOKEN for full access.

  # Grep MCP Server - Text search in files
  grep:
    type: stdio
    command: npx
    args:
      - -y
      - "@247arjun/mcp-grep"
    timeout: 30000
    serverInstructions: |
      Use this server for powerful text search capabilities:
      - Search for patterns in files and directories
      - Support for regex patterns
      - Recursive directory searching
      - File extension filtering

  # Grep.app MCP Server - GitHub code search across public repositories
  grepapp:
    type: stdio
    command: npx
    args:
      - -y
      - "grep-mcp"
    timeout: 60000
    serverInstructions: |
      Use this server to search code across GitHub repositories:
      - Search millions of public GitHub repositories
      - Find code examples and implementations
      - Discover how libraries are used in real projects
      - No API key required

  # DuckDuckGo Web Search MCP Server - Real-time internet search
  websearch:
    type: stdio
    command: npx
    args:
      - -y
      - "duckduckgo-mcp-server"
    timeout: 60000
    serverInstructions: |
      Use this server for real-time web searches:
      - Search the internet for current information
      - Get web page content and summaries
      - No API key required
      - Respects user privacy (DuckDuckGo)

  # Reddit MCP Server - Reddit content scraping
  reddit:
    type: stdio
    command: npx
    args:
      - -y
      - "mcp-reddit"
    timeout: 60000
    serverInstructions: |
      Use this server to fetch Reddit content:
      - Get frontpage posts
      - Access subreddit information
      - Retrieve post details and comments
      - Search Reddit discussions
      Note: Uses Reddit's public API, no authentication required for public content.

  # Stack Overflow MCP Server - Programming solutions and forum search
  # DISABLED: Has asyncio compatibility issues with current Python version
  # stackoverflow:
  #   type: stdio
  #   command: npx
  #   args:
  #     - -y
  #     - "@notalk-tech/stackoverflow-mcp"
  #   timeout: 60000
  #   serverInstructions: |
  #     Use this server to search Stack Overflow for programming solutions:
  #     - Search by error messages, tags, and keywords
  #     - Analyze stack traces and find solutions
  #     - Filter results by votes and accepted answers
  #     - Get detailed answers with code examples
  #     Note: Works without API key (rate limited). Add STACKOVERFLOW_API_KEY for higher limits.

  # Firecrawl MCP Server - Advanced web crawling and scraping
  # DISABLED: Requires API key from https://firecrawl.dev/app/api-keys
  # firecrawl:
  #   type: stdio
  #   command: npx
  #   args:
  #     - -y
  #     - "firecrawl-mcp"
  #   timeout: 90000
  #   env:
  #     FIRECRAWL_API_KEY: ""
  #   serverInstructions: |
  #     Use this server for advanced web crawling and scraping:
  #     - Crawl entire websites with JavaScript rendering
  #     - Extract structured data from web pages
  #     - Batch process multiple URLs
  #     - Search and map website content
  #     - LLM-powered content analysis
  #     Perfect for: Documentation sites, forums, technical articles
  #     Note: Requires FIRECRAWL_API_KEY from https://firecrawl.dev/app/api-keys

  # Tavily Deep Research MCP Server - Multi-round comprehensive research
  tavily:
    type: stdio
    command: npx
    args:
      - -y
      - "mcp-deep-research"
    timeout: 120000
    env:
      TAVILY_API_KEY: ""
      MAX_SEARCH_KEYWORDS: "5"
      MAX_PLANNING_ROUNDS: "5"
    serverInstructions: |
      Use this server for deep, comprehensive research:
      - Multi-round automated research with planning
      - Generates search keywords intelligently
      - Synthesizes information from multiple sources
      - Produces structured research reports
      Perfect for: Software architecture research, technology evaluations, complex topics
      Note: Requires TAVILY_API_KEY from https://tavily.com

# Interface Configuration
interface:
  # Privacy & Data Controls
  privacyPolicy:
    externalUrl: "https://www.librechat.ai/privacy-policy"
    openNewTab: true
  termsOfService:
    externalUrl: "https://www.librechat.ai/terms-of-service"
    openNewTab: true

  # Enable MCP server management in UI
  endpointsMenu: true
  modelSelect: true
  parameters: true

# Registration and Authentication
registration:
  socialLogins: []
  allowedDomains: []
