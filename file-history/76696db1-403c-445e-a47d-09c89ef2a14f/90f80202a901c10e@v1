#!/usr/bin/env python3
"""Debug test to see actual API response"""

import json
import requests

PROXY_URL = "http://localhost:8000/v1"

request_data = {
    "model": "huihui-ai/Qwen2.5-Coder-32B-Instruct-abliterated",
    "messages": [
        {
            "role": "user",
            "content": "Say hello"
        }
    ],
    "max_tokens": 50,
    "temperature": 0.7,
}

print("Sending simple request to proxy...")
print(f"Model: {request_data['model']}")
print(f"Prompt: {request_data['messages'][0]['content']}\n")

try:
    response = requests.post(
        f"{PROXY_URL}/chat/completions",
        json=request_data,
        timeout=30
    )

    print(f"Status code: {response.status_code}")
    print(f"Response headers: {dict(response.headers)}\n")
    print("Response body:")
    print(json.dumps(response.json(), indent=2))

except Exception as e:
    print(f"Error: {e}")
    print(f"Response text: {response.text if 'response' in locals() else 'N/A'}")
