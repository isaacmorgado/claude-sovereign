'use client';

import { useMemo } from 'react';

interface AvatarProps {
  avatarId?: number;
  username?: string;
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  className?: string;
}

// Discord-style preset avatars with gradient backgrounds
const AVATAR_COLORS: [string, string][] = [
  ['#5865F2', '#7289DA'], // Blurple
  ['#57F287', '#3BA55C'], // Green
  ['#FEE75C', '#F0B232'], // Yellow
  ['#EB459E', '#B73E89'], // Fuchsia
  ['#ED4245', '#C12729'], // Red
  ['#00D4FF', '#0099CC'], // Cyan
  ['#9B59B6', '#8E44AD'], // Purple
  ['#E67E22', '#D35400'], // Orange
  ['#1ABC9C', '#16A085'], // Teal
  ['#E91E63', '#AD1457'], // Pink
  ['#3498DB', '#2980B9'], // Blue
  ['#2ECC71', '#27AE60'], // Emerald
  ['#F39C12', '#E67E22'], // Gold
  ['#9C27B0', '#7B1FA2'], // Deep Purple
  ['#00BCD4', '#0097A7'], // Cyan alt
  ['#FF5722', '#E64A19'], // Deep Orange
  ['#607D8B', '#455A64'], // Blue Grey
  ['#795548', '#5D4037'], // Brown
  ['#4CAF50', '#388E3C'], // Material Green
  ['#FF9800', '#F57C00'], // Amber
];

const SIZE_CLASSES = {
  xs: 'w-5 h-5 text-[10px]',
  sm: 'w-7 h-7 text-xs',
  md: 'w-9 h-9 text-sm',
  lg: 'w-12 h-12 text-base',
  xl: 'w-16 h-16 text-xl',
};

export function Avatar({ avatarId = 1, username = 'U', size = 'md', className = '' }: AvatarProps) {
  const colorIndex = (avatarId - 1) % AVATAR_COLORS.length;
  const [gradientStart, gradientEnd] = AVATAR_COLORS[colorIndex];

  // Get first letter of username for fallback display
  const initial = useMemo(() => {
    if (!username) return 'U';
    return username.charAt(0).toUpperCase();
  }, [username]);

  return (
    <div
      className={`rounded-full flex items-center justify-center font-semibold text-white shrink-0 ${SIZE_CLASSES[size]} ${className}`}
      style={{
        background: `linear-gradient(135deg, ${gradientStart} 0%, ${gradientEnd} 100%)`,
      }}
      title={username}
    >
      {initial}
    </div>
  );
}

// Export the color palette for use in AvatarSelector
export { AVATAR_COLORS };
