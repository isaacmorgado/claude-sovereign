# SPLICE
AI-powered Premiere Pro UXP plugin for detecting takes, removing silences, and accelerating video editing workflows.

## Current Focus
Section: Slice 8 - Silence detection and removal (IMPLEMENTED)
Files: splice-plugin/js/slice8-silence.js, splice-backend/services/silenceDetection.js

## Deferred
- [ ] Test "Keep Best Takes" button (disables non-best clips) - code done, needs user testing

## Last Session (2025-12-19)
- **DONE**: Label Clips on Timeline - works end-to-end!
- **DONE**: shortLabel shows on timeline (e.g., "Take 1 - revenge against randy")
- **Root cause**: UXP actions must be created INSIDE `executeTransaction()`, not before
- **TickTime fix**: `getStartTime()` returns object, extract `.ticks` property
- **No remove API**: "Keep Best Takes" now disables clips instead of removing
- **GitHub**: Created repo https://github.com/isaacmorgado/PREMIERE-PRO---SPLICE

## UXP Action Pattern (CRITICAL)
```javascript
const project = await ppro.Project.getActiveProject();
project.lockedAccess(() => {
  project.executeTransaction((compoundAction) => {
    const action = clip.createSetNameAction(label);  // CREATE INSIDE
    compoundAction.addAction(action);
  }, 'Undo Label');
});
```

## API Endpoints
- `POST https://127.0.0.1:3847/analyze` with `{ "wavPath": "/tmp/splice_audio_export.wav" }`
  - Returns: `{ takes: [{ takeNumber, start, end, shortLabel, description, isBest, reason }], analysis }`
- `POST https://127.0.0.1:3847/silences` with `{ "wavPath": "...", "threshold": 0.5 }`
  - Returns: `{ silences: [{ start, end, duration }], count, totalSilenceDuration }`

## Key Constraints
- UXP requires Premiere Pro 25.6+ or Beta
- Use `127.0.0.1` not `localhost` in fetch URLs
- Plugin caches JS - reload via UXP Dev Tools
- Timebase: 254016000000 ticks/second
- TickTime objects: use `.ticks` property

## Next Steps
1. Slice 8: Silence detection and removal
2. (Deferred) Test "Keep Best Takes" button

## Project Structure
```
splice-plugin/js/ (config, utils, slice1-timeline, slice3-export, slice6-analyze, slice7-apply, main)
splice-backend/ (server.js, services/transcription.js, services/takeDetection.js)
```
