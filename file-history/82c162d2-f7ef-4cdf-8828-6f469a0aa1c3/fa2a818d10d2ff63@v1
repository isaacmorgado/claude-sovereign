#!/bin/bash
# Quick restore of Claude Code to working state

echo "ðŸ”§ Restoring Claude Code to working state..."

# Check if backup exists
if [ -f "/opt/homebrew/lib/node_modules/@anthropic-ai/claude-code/cli.js.tweakcc-backup" ]; then
    echo "âœ“ Found tweakcc backup"
    sudo cp "/opt/homebrew/lib/node_modules/@anthropic-ai/claude-code/cli.js.tweakcc-backup" \
            "/opt/homebrew/lib/node_modules/@anthropic-ai/claude-code/cli.js"
    echo "âœ“ Restored from backup"
else
    echo "âŒ No backup found. Trying alternative restore methods..."
    cd /tmp/tweakcc

    # Try to restore using tweakcc
    if [ -f "dist/index.mjs" ]; then
        sudo bun run dist/index.mjs --apply
    fi
fi

echo ""
echo "Testing Claude Code..."
clauded --version 2>&1 | head -5

echo ""
echo "âœ… Restore complete. You can now run: clauded"
