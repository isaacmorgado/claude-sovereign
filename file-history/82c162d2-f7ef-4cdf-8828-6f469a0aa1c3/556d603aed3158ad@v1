# Claude Code Setup - Complete Solution

## What This Does

This script will:
1. ✅ **Reinstall original Claude Code** - Fixes the broken cli.js with SyntaxError
2. ✅ **Create `clauded` wrapper** - Custom ASCII art + multi-provider proxy
3. ✅ **Test both commands** - Verify everything works

## Result

After running this, you'll have:

| Command | Description |
|---------|-------------|
| `claude` | Original Claude Code (unchanged, normal startup) |
| `clauded` | **Custom ASCII art with horns** + matrix green + proxy |

## Run This Command

```bash
bash /tmp/setup-claude-and-wrapper.sh
```

**Requirements:** Sudo password (to reinstall Claude Code and create wrapper)

## What `clauded` Will Show

```
     ▲                                        ▲
    ▐█▌                                      ▐█▌
   ▐███▌    ██████╗██╗      █████╗ ██╗   ██╗██████╗ ███████╗
  ▐█████▌  ██╔════╝██║     ██╔══██╗██║   ██║██╔══██╗██╔════╝
   ▐███▌   ██║     ██║     ███████║██║   ██║██║  ██║█████╗
    ▐█▌    ██║     ██║     ██╔══██║██║   ██║██║  ██║██╔══╝
     ▲     ╚██████╗███████╗██║  ██║╚██████╔╝██████╔╝███████╗
            ╚═════╝╚══════╝╚═╝  ╚═╝ ╚═════╝ ╚═════╝ ╚══════╝

╔═══════════════════════════════════════════════════════════════╗
║   Claude Code Multi-Provider Proxy                           ║
║   GLM · Featherless · Google (Anthropic via separate key)    ║
╚═══════════════════════════════════════════════════════════════╝

✓ Proxy started on port 3000

Available Models:
  /model glm/glm-4                              - GLM (free)
  /model featherless/Llama-3-8B-Instruct-abliterated
  /model google/gemini-2.0-flash               - Google OAuth
```

## How `clauded` Works

1. Shows custom CLAUDE ASCII art with horns (matrix green)
2. Starts proxy server on port 3000 in background
3. Launches Claude Code with `ANTHROPIC_BASE_URL=http://127.0.0.1:3000`
4. When you exit Claude, automatically stops the proxy

## Model Switching

Inside `clauded`, switch providers with:

```
/model glm/glm-4
/model featherless/Llama-3-8B-Instruct-abliterated
/model google/gemini-2.0-flash
```

## Google OAuth (Optional)

To use Google models without API key:

```bash
node ~/.claude/model-proxy-server.js --gemini-login
```

Then use: `/model google/gemini-2.0-flash`

## Files Created

- `/usr/local/bin/clauded` - Wrapper script (executable)
- `/tmp/claude-proxy.log` - Proxy server logs

## Troubleshooting

### If `claude` doesn't work after install:
```bash
npm list -g @anthropic-ai/claude-code
claude --version
```

### If proxy fails to start in `clauded`:
```bash
tail /tmp/claude-proxy.log
node ~/.claude/model-proxy-server.js 3000
```

### To use without proxy:
Just use regular `claude` command

## Summary

- ✅ Original `claude` restored and working
- ✅ Custom `clauded` with horns + matrix green
- ✅ Proxy auto-starts/stops with `clauded`
- ✅ 14+ models available through proxy
- ✅ Regular Claude still works normally
