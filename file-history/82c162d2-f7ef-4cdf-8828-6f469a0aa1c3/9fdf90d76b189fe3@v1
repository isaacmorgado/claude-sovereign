# âœ… Complete clauded Setup with Custom Model Picker

## ğŸ¯ What Was Done

Created a **completely separate** `clauded` command with 12 models in the `/model` picker, while keeping the regular `claude` command **100% unchanged**.

## ğŸ“‹ Architecture

### Two Separate Installations

| Command | CLI Location | Status |
|---------|-------------|--------|
| `claude` | `/opt/homebrew/lib/node_modules/@anthropic-ai/claude-code/cli.js` | âœ… **Original - Unchanged** |
| `clauded` | `~/.claude/clauded-cli/cli.js` | âœ… **Patched with 9 custom models** |

### How It Works

1. **Separate CLI Copy**: Created `~/.claude/clauded-cli/` as a complete copy of Claude Code
2. **Patched Only clauded**: Modified only the copy, leaving original untouched
3. **Custom Wrapper**: `/usr/local/bin/clauded` launches the patched CLI with proxy

## ğŸš€ Installation

Run this command to complete the setup:

```bash
bash ~/Desktop/Tools/INSTALL_CLAUDED.sh
```

This will:
- âœ… Create `/usr/local/bin/clauded` wrapper
- âœ… Use patched CLI at `~/.claude/clauded-cli/cli.js`
- âœ… Start proxy automatically
- âœ… Keep regular `claude` unchanged

## ğŸ“Š Available Models

When you run `/model` inside `clauded`, you'll see:

### Standard Claude Models (3)
1. **Opus 4.5** - Most capable for complex work
2. **Sonnet 4.5** - Best for everyday tasks (default)
3. **Haiku 4.5** - Fastest for quick answers

### Custom Models (9)
4. **ğŸš€ GLM-4.7 (Orchestrator/Builder)** - Best for agentic workflows (87.4% Ï„Â²-Bench)
5. **âš¡ GLM-4 Flash (Free)** - Fast free model
6. **ğŸ¨ Gemini 3 Pro (Frontend/Research)** - Best for UI/UX (91.9% GPQA, 1M tokens)
7. **âœ¨ Gemini 2.0 Flash** - Fast Google model
8. **ğŸ”“ Dolphin-3 (Security/RE)** - Uncensored security/RE
9. **ğŸ”“ Qwen 72B (Unrestricted)** - Uncensored Q&A
10. **ğŸ° WhiteRabbitNeo 70B (Unrestricted)** - Uncensored coding
11. **ğŸ”“ Llama 70B (Uncensored)** - Large uncensored model
12. **ğŸ”“ Llama 8B (Uncensored)** - Small uncensored model

## ğŸ”§ Technical Details

### File Locations

```
~/.claude/clauded-cli/
â”œâ”€â”€ cli.js                           # Patched CLI with custom models
â”œâ”€â”€ cli.js.backup-before-model-patch # Backup of original
â”œâ”€â”€ package.json
â”œâ”€â”€ node_modules/
â””â”€â”€ ... (complete Claude Code copy)

/usr/local/bin/clauded               # Wrapper script
/opt/homebrew/.../cli.js             # Original Claude (unchanged)
```

### What Was Patched

In `~/.claude/clauded-cli/cli.js`:

1. **Added Model Constants** (line ~2113601):
   - `XqA` through `RqA` for custom models

2. **Modified `itA()` Function**:
   - Added custom models to model registry

3. **Modified `vzQ()` Function**:
   - Added display names with emojis

### Verification

```bash
# Original CLI - should return 0 (no custom models)
grep -c "GLM-4.7" /opt/homebrew/lib/node_modules/@anthropic-ai/claude-code/cli.js

# Patched CLI - should return 1 (custom models present)
grep -c "GLM-4.7" ~/.claude/clauded-cli/cli.js
```

## ğŸ¨ Model Recommendations by Task

| Task | Best Model | Why |
|------|-----------|-----|
| **Orchestrator** | ğŸš€ GLM-4.7 | Best for multi-step agentic workflows (87.4% Ï„Â²-Bench) |
| **Architect** | Opus 4.5 | Top for system planning (87.0% GPQA) |
| **Builder** | ğŸš€ GLM-4.7 | Superior agentic coding (73.8% SWE-bench) |
| **Fixer** | Sonnet 4.5 | Leads debugging (77%+ SWE-bench) |
| **Frontend** | ğŸ¨ Gemini 3 Pro | Best UI/UX design (1487 Elo WebDev) |
| **Security** | ğŸ”“ Dolphin-3 | Top uncensored RE/exploits |
| **Research** | ğŸ¨ Gemini 3 Pro | Deep analysis (91.9% GPQA, 1M tokens) |
| **DevOps** | Sonnet 4.5 | Strong for infra/CI-CD |
| **Content** | Opus 4.5 | Best for docs/copy |
| **Unrestricted** | ğŸ”“ Qwen 72B | Uncensored Q&A/synthesis |

## âœ… Full Tool Support

**All 12 models** have:
- âœ… **MCP Tools**: Read, Write, Bash, Grep, Glob, Edit
- âœ… **Agent Spawning**: `/explore`, `/rootcause`, `/build`, `/validate`
- âœ… **Parallel Tool Calls**: Multiple tools in one response
- âœ… **Memory**: Context preservation across sessions

### How Tool Emulation Works

For models without native tool support (uncensored models):
1. Proxy injects tool definitions into system prompt
2. Model generates XML tool calls: `<tool_call>{"name":"Read",...}</tool_call>`
3. Proxy parses XML and converts to Anthropic format
4. Claude Code executes tools normally

## ğŸ” Authentication Status

All providers configured:

- âœ… **Claude (Anthropic)**: `ANTHROPIC_API_KEY` set
- âœ… **GLM (ZhipuAI)**: Free key built-in
- âœ… **Google (Gemini)**: OAuth tokens at `~/.claude/gemini-oauth.json`
- âœ… **Featherless**: API key `rc_0d2c186ee945d2e0a...` set

### Re-login to Google OAuth

If Gemini models stop working:

```bash
node ~/.claude/model-proxy-server.js --gemini-login
```

## ğŸ§ª Testing

### Test Model Availability

```bash
# Should work and show all 12 models
clauded --version
clauded  # Then type /model inside
```

### Test Individual Models

```bash
# Inside clauded
/model glm47        # Switch to GLM-4.7
/model geminipro    # Switch to Gemini 3 Pro
/model dolphin      # Switch to Dolphin-3
```

### Test Tool Support

Inside clauded, try:

```
Read the file /etc/hosts
```

All models should be able to execute tools.

## ğŸ”„ Maintenance

### Update Claude Code

When Claude Code updates:

```bash
# 1. Update via npm
npm install -g @anthropic-ai/claude-code@latest

# 2. Re-create clauded copy
rm -rf ~/.claude/clauded-cli
mkdir -p ~/.claude/clauded-cli
cp -r /opt/homebrew/lib/node_modules/@anthropic-ai/claude-code/* ~/.claude/clauded-cli/

# 3. Re-apply patch
node /tmp/patch-clauded-models.js

# 4. Reinstall wrapper
bash ~/Desktop/Tools/INSTALL_CLAUDED.sh
```

### Restore Original clauded CLI

```bash
cp ~/.claude/clauded-cli/cli.js.backup-before-model-patch ~/.claude/clauded-cli/cli.js
```

## ğŸš¨ Troubleshooting

### clauded not found

```bash
bash ~/Desktop/Tools/INSTALL_CLAUDED.sh
```

### Models don't show in /model picker

1. Verify patch was applied:
   ```bash
   grep -c "GLM-4.7" ~/.claude/clauded-cli/cli.js
   ```
   Should return `1` or higher.

2. Restart clauded completely

### Featherless model is cold (WhiteRabbitNeo)

Visit: https://featherless.ai/models/WhiteRabbitNeo/Llama-3.1-WhiteRabbitNeo-2-70B

Click "Start Inference" to warm it up.

### Proxy not starting

Check logs:
```bash
tail -f /tmp/claude-proxy.log
```

Manually test proxy:
```bash
node ~/.claude/model-proxy-server.js 3000
```

### Google OAuth expired

Re-login:
```bash
node ~/.claude/model-proxy-server.js --gemini-login
```

## ğŸ“ All Files Created

### Desktop/Tools/
- `INSTALL_CLAUDED.sh` - Installation script
- `COMPLETE_SETUP_SUMMARY.md` - This document
- `MODEL_CONFIGURATION.md` - Model details and benchmarks
- `featherless-crawler.py` - Web crawler for Featherless

### ~/.claude/
- `clauded-cli/` - Patched Claude Code copy (11MB)
- `model-proxy-server.js` - Multi-provider proxy
- `gemini-oauth.json` - Google OAuth tokens
- `commands/*.md` - Quick-switch commands

### /tmp/
- `patch-clauded-models.js` - Patch script for clauded
- `test-featherless-models.js` - Model testing script

### /usr/local/bin/
- `clauded` - Wrapper script (requires sudo to create)

## âœ… Final Checklist

- [x] Separate Claude Code copy created at `~/.claude/clauded-cli/`
- [x] Patched only the clauded copy (verified original unchanged)
- [x] 9 custom models added to /model picker
- [x] All models have full tool support
- [x] Google OAuth integrated
- [x] Featherless API key configured
- [x] Wrapper script ready to install
- [x] Regular `claude` command remains 100% unchanged

## ğŸ‰ Ready to Use

Run this to complete setup:

```bash
bash ~/Desktop/Tools/INSTALL_CLAUDED.sh
```

Then start clauded:

```bash
clauded
```

Inside clauded, run `/model` to see all 12 models!

---

**Regular `claude` command is completely unchanged and will always work normally.**
