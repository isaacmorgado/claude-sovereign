#!/bin/bash

# MediaVault Auto-Organization Script
# Automatically organizes downloaded files into proper folders

VAULT_DIR="$HOME/Desktop/MediaVault"
AUDIO_DIR="$VAULT_DIR/Audio/MP3"
VIDEO_DIR="$VAULT_DIR/Video/MP4"
TRANSCRIPT_DIR="$VAULT_DIR/Transcripts"
METADATA_DIR="$VAULT_DIR/Metadata"
THUMBNAIL_DIR="$VAULT_DIR/Thumbnails"

echo "ðŸ—‚ï¸  MediaVault Auto-Organization"
echo "================================"
echo ""

# Function to move files with count
move_files() {
    local pattern=$1
    local dest=$2
    local desc=$3

    count=$(find "$AUDIO_DIR" -maxdepth 1 -name "$pattern" 2>/dev/null | wc -l | tr -d ' ')

    if [ "$count" -gt 0 ]; then
        echo "ðŸ“¦ Moving $count $desc file(s)..."
        find "$AUDIO_DIR" -maxdepth 1 -name "$pattern" -exec mv {} "$dest/" \; 2>/dev/null
    fi
}

# Organize from Audio/MP3 directory (common download location)
if [ -d "$AUDIO_DIR" ]; then
    cd "$AUDIO_DIR"

    # Move transcripts
    move_files "*.srt" "$TRANSCRIPT_DIR/SRT" "SRT subtitle"
    move_files "*.txt" "$TRANSCRIPT_DIR/TXT" "text transcript"
    move_files "*.live_chat.json" "$TRANSCRIPT_DIR/TXT" "live chat"

    # Move metadata
    move_files "*.info.json" "$METADATA_DIR" "metadata"
    move_files "*.description" "$METADATA_DIR" "description"

    # Move thumbnails
    move_files "*.jpg" "$THUMBNAIL_DIR" "thumbnail"
    move_files "*.png" "$THUMBNAIL_DIR" "thumbnail"
    move_files "*.webp" "$THUMBNAIL_DIR" "thumbnail"
fi

# Check Video/MP4 directory too
if [ -d "$VIDEO_DIR" ]; then
    cd "$VIDEO_DIR"

    move_files "*.srt" "$TRANSCRIPT_DIR/SRT" "SRT subtitle"
    move_files "*.info.json" "$METADATA_DIR" "metadata"
    move_files "*.description" "$METADATA_DIR" "description"
    move_files "*.jpg" "$THUMBNAIL_DIR" "thumbnail"
    move_files "*.png" "$THUMBNAIL_DIR" "thumbnail"
fi

echo ""
echo "âœ… Organization complete!"
echo ""
echo "ðŸ“Š Current structure:"
echo "   Audio: $(find "$VAULT_DIR/Audio" -type f | wc -l | tr -d ' ') files"
echo "   Video: $(find "$VAULT_DIR/Video" -type f | wc -l | tr -d ' ') files"
echo "   Transcripts: $(find "$TRANSCRIPT_DIR" -type f | wc -l | tr -d ' ') files"
echo "   Metadata: $(find "$METADATA_DIR" -type f | wc -l | tr -d ' ') files"
echo "   Thumbnails: $(find "$THUMBNAIL_DIR" -type f | wc -l | tr -d ' ') files"
echo ""
