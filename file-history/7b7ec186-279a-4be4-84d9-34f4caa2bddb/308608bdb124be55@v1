# SPLICE
AI-powered Premiere Pro UXP plugin for detecting takes, removing silences, and accelerating video editing workflows.

## Current Focus
Section: Slice 8 - Silence detection and removal (needs testing)
Files: splice-plugin/js/slice8-silence.js, splice-plugin/index.html

## Last Session (2025-12-19)
- **UI Compacted**: Scrollable body, reduced padding/margins/fonts, 3 main buttons in horizontal row
- **Slider Fixed**: Rewrote CSS to prevent jumping-to-left bug, 20px thumb with shadow
- **Transcript Caching**: Backend now caches by file mtime, no API credits on repeated analyze
- Backend running at https://127.0.0.1:3847
- Stopped at: User testing slider fix and silence detection

## Deferred
- [ ] Test "Keep Best Takes" button (disables non-best clips)

## UXP Action Pattern (CRITICAL)
```javascript
const project = await ppro.Project.getActiveProject();
project.lockedAccess(() => {
  project.executeTransaction((compoundAction) => {
    const action = clip.createSetNameAction(label);  // CREATE INSIDE
    compoundAction.addAction(action);
  }, 'Undo Label');
});
```

## API Endpoints
- `POST /analyze` - `{ wavPath }` → takes with shortLabel (cached)
- `POST /silences` - `{ wavPath, threshold }` → `{ silences, count, totalSilenceDuration }`

## Key Constraints
- UXP requires Premiere Pro 25.6+ or Beta
- Use `127.0.0.1` not `localhost` in fetch URLs
- Plugin caches JS - reload via UXP Dev Tools
- Timebase: 254016000000 ticks/second
- TickTime objects: use `.ticks` property

## Next Steps
1. Test slider functionality (should drag smoothly now)
2. Test Slice 8 silence detection end-to-end
3. Test "Keep Best Takes" button
4. Future: Ripple delete instead of disable (if UXP adds API)

## Project Structure
```
splice-plugin/js/ (config, utils, slice1-timeline, slice3-export, slice6-analyze, slice7-apply, slice8-silence, main)
splice-backend/ (server.js, services/transcription.js, services/takeDetection.js, services/silenceDetection.js)
```
