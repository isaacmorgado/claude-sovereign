#!/bin/bash
#
# /extract1 - Standard Quality Vocal Extraction
# Fast processing (~2 min) using Demucs AI
#

set -e

TOOLS_DIR="$HOME/Desktop/tools"
SCRIPT="$TOOLS_DIR/separate.sh"

# Check if script exists
if [ ! -f "$SCRIPT" ]; then
    echo "Error: separate.sh not found at $TOOLS_DIR"
    exit 1
fi

# Get input from arguments
INPUT="${1:-}"
SONG_NAME="${2:-}"

if [ -z "$INPUT" ]; then
    cat << 'EOF'
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   /extract1 - Standard Quality Extraction     â•‘
â•‘   Fast Processing with Demucs AI              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Usage: /extract1 <audio_file|youtube_url> [song_name]

Examples:
  /extract1 https://youtu.be/VIDEO_ID
  /extract1 https://youtu.be/VIDEO_ID "Artist - Song Title"
  /extract1 ~/Music/song.mp3
  /extract1 ~/Music/song.mp3 "Custom Name"

Features:
  âš¡ Fast: ~2 minutes for 3-4 min songs
  ðŸŽµ Quality: Good (SDR ~8.0 vocals, ~11.0 instrumental)
  ðŸ’¾ Output: ~/Desktop/MediaVault_v2/separated_vocals/
  ðŸ“¦ Model: Demucs htdemucs

Output Files:
  â€¢ [Song Name] - Vocals.wav
  â€¢ [Song Name] - Instrumental.wav
  â€¢ [Song Name] - Original.wav
  â€¢ info.txt (metadata)

For MAXIMUM quality (slower), use /extract2 instead.
EOF
    exit 0
fi

# Execute the script
echo "ðŸŽµ Launching standard quality extraction..."
echo ""

if [ -n "$SONG_NAME" ]; then
    "$SCRIPT" "$INPUT" "$SONG_NAME"
else
    "$SCRIPT" "$INPUT"
fi
