{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":"Search GitHub for the best HTML to markdown conversion and content extraction tools. Look for:\n1. Turndown and similar HTML to markdown converters\n2. Readability.js and article extraction\n3. Jina AI reader implementations\n4. LangChain document loaders for web scraping\n\nUse mcp__grep__searchGitHub to find real usage patterns. Focus on tools that produce clean, readable markdown output."},"uuid":"1487b0bf-ea7f-4e5b-aa42-15ca608fd390","timestamp":"2026-01-12T23:30:40.956Z"}
{"parentUuid":"1487b0bf-ea7f-4e5b-aa42-15ca608fd390","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"text","text":"I'll search GitHub for the best HTML to markdown conversion and content extraction tools, focusing on real-world implementations."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"ccaf4ff4-f823-410d-8846-c452f1ae3e8f","timestamp":"2026-01-12T23:30:44.823Z"}
{"parentUuid":"ccaf4ff4-f823-410d-8846-c452f1ae3e8f","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013nA5Ud4xTvDe1uG1r1UKEn","name":"mcp__grep__searchGitHub","input":{"query":"import Turndown from","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"cc2a0d91-8e82-4094-9d83-42d8bbeac346","timestamp":"2026-01-12T23:30:45.552Z"}
{"parentUuid":"cc2a0d91-8e82-4094-9d83-42d8bbeac346","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0124Ttix7eQUFoZrU8kgbSbb","name":"mcp__grep__searchGitHub","input":{"query":"new Turndown(","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"fcdfbeef-1c2e-40e6-944e-5c0ef3fee818","timestamp":"2026-01-12T23:30:46.190Z"}
{"parentUuid":"fcdfbeef-1c2e-40e6-944e-5c0ef3fee818","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01XRabe7sT3MoVSMwryBVPJP","name":"mcp__grep__searchGitHub","input":{"query":"@mozilla/readability","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"4c8c51f7-b3d3-484d-89c4-169eee022665","timestamp":"2026-01-12T23:30:46.782Z"}
{"parentUuid":"4c8c51f7-b3d3-484d-89c4-169eee022665","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01P7uuDNY7JZKLiXRtA4bEdr","name":"mcp__grep__searchGitHub","input":{"query":"new Readability(","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"f31c2cfe-3ea7-4588-9e82-5c16336bf1c6","timestamp":"2026-01-12T23:30:47.341Z"}
{"parentUuid":"f31c2cfe-3ea7-4588-9e82-5c16336bf1c6","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01H6cYNnZ3PoRcjm2yWzxre1","name":"mcp__grep__searchGitHub","input":{"query":"jina.ai/reader","language":["JavaScript","TypeScript","Python"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"3458d106-0b17-4b2d-963e-4ab9cdace764","timestamp":"2026-01-12T23:30:47.960Z"}
{"parentUuid":"3458d106-0b17-4b2d-963e-4ab9cdace764","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_015rfYZSFv8rYxy3D5QUgR29","name":"mcp__grep__searchGitHub","input":{"query":"CheerioWebBaseLoader","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"eb5c16e3-e782-495d-a6e9-de19b701bc0b","timestamp":"2026-01-12T23:30:48.616Z"}
{"parentUuid":"eb5c16e3-e782-495d-a6e9-de19b701bc0b","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01MTD859mpymanWnQtUpgeG2","name":"mcp__grep__searchGitHub","input":{"query":"PuppeteerWebBaseLoader","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"b9b4ac15-0d05-46ad-9737-e5b878b3679b","timestamp":"2026-01-12T23:30:49.260Z"}
{"parentUuid":"b9b4ac15-0d05-46ad-9737-e5b878b3679b","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_017WprFDzBneCE8jBMPyu52s","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01J5xRkViiDXKoXAxrXUSpyC","name":"mcp__grep__searchGitHub","input":{"query":"html-to-markdown","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":20384,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20384,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CX4MXVCRy7uXotaGiCmDL","type":"assistant","uuid":"16c86e78-9ac6-4485-add2-19d923f10848","timestamp":"2026-01-12T23:30:49.844Z"}
{"parentUuid":"cc2a0d91-8e82-4094-9d83-42d8bbeac346","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013nA5Ud4xTvDe1uG1r1UKEn","type":"tool_result","content":[{"type":"text","text":"Repository: ItzCrazyKns/Perplexica\nPath: src/lib/agents/search/researcher/actions/scrapeURL.ts\nURL: https://github.com/ItzCrazyKns/Perplexica/blob/master/src/lib/agents/search/researcher/actions/scrapeURL.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport z from 'zod';\nimport { ResearchAction } from '../../types';\nimport { Chunk, ReadingResearchBlock } from '@/lib/types';\nimport TurnDown from 'turndown';\nimport path from 'path';\n\nconst turndownService = new TurnDown();\n\nconst schema = z.object({\n"},{"type":"text","text":"Repository: microsoft/fluentui\nPath: tools/storybook-llms-extractor/src/utils.ts\nURL: https://github.com/microsoft/fluentui/blob/master/tools/storybook-llms-extractor/src/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { mkdir, rm, writeFile, readFile } from 'node:fs/promises';\nimport { join, resolve, extname } from 'node:path';\nimport { existsSync } from 'node:fs';\n\nimport { type BrowserContext, type Page, chromium } from 'playwright';\nimport Turndown from 'turndown';\nimport { strikethrough, tables, taskListItems } from 'turndown-plugin-gfm';\n\nimport type { Args, StorybookComponentProp, StorybookComponent, StorybookStoreItem } from './types';\n\n/**\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/scopes.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/scopes.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport axios from \"axios\"\nimport md5 from \"js-md5\"\nimport juice from \"juice/client\"\nimport turndown from \"turndown\"\nimport tools from './tools'\n\nexport default {\n  tools,\n  turndown,\n"},{"type":"text","text":"Repository: steel-dev/steel-browser\nPath: api/src/utils/scrape/htmlToMarkdown.ts\nURL: https://github.com/steel-dev/steel-browser/blob/main/api/src/utils/scrape/htmlToMarkdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { applyFixes } from \"markdownlint\";\nimport { lint } from \"markdownlint/promise\";\nimport Turndown from \"turndown\";\nimport highlightedCodeBlock from \"./plugins/highlightedCodeBlock.js\";\nimport inlineLink from \"./plugins/inlineLink.js\";\nimport strikethrough from \"./plugins/strikethrough.js\";\nimport tables from \"./plugins/table.js\";\nimport taskListItems from \"./plugins/taskListItems.js\";\n"},{"type":"text","text":"Repository: mishushakov/llm-scraper\nPath: src/preprocess.ts\nURL: https://github.com/mishushakov/llm-scraper/blob/main/src/preprocess.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { type Page } from 'playwright'\nimport Turndown from 'turndown'\n\nimport cleanup from './cleanup.js'\n\nexport type PreProcessOptions =\n  | {\n"},{"type":"text","text":"Repository: retorquere/zotero-better-bibtex\nPath: translators/Collected notes.ts\nURL: https://github.com/retorquere/zotero-better-bibtex/blob/master/translators/Collected%20notes.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nimport type { Header } from '../gen/translators'\ndeclare var ZOTERO_TRANSLATOR_INFO: Header // eslint-disable-line no-var\n\ndeclare const Zotero: any\n\nimport Turndown from 'turndown'\nconst turndown = new Turndown\n\nimport { Item } from '../gen/typings/serialized-item'\n\nimport * as escape from '../content/escape'\n"},{"type":"text","text":"Repository: padloc/padloc\nPath: packages/app/src/lib/markdown.ts\nURL: https://github.com/padloc/padloc/blob/main/packages/app/src/lib/markdown.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { addHook, sanitize } from \"dompurify\";\nimport { marked } from \"marked\";\nimport TurnDown from \"turndown\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\nimport { html } from \"lit\";\n\nmarked.use({\n    renderer: {\n"},{"type":"text","text":"Repository: 027xiguapi/code-box\nPath: utils/editMarkdownHook.ts\nURL: https://github.com/027xiguapi/code-box/blob/main/utils/editMarkdownHook.ts\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Storage } from \"@plasmohq/storage\"\nimport { useStorage } from \"@plasmohq/storage/dist/hook\"\n\nimport Turndown from \"~utils/turndown\"\n\nexport function useEditMarkdown(option?) {\n  const turndownService = Turndown(option)\n\n  const [post, setPost] = useStorage({\n"},{"type":"text","text":"Repository: 027xiguapi/code-box\nPath: utils/parseMarkdownHook.ts\nURL: https://github.com/027xiguapi/code-box/blob/main/utils/parseMarkdownHook.ts\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Storage } from \"@plasmohq/storage\"\nimport { useStorage } from \"@plasmohq/storage/dist/hook\"\n\nimport Turndown from \"~utils/turndown\"\n\nexport function useParseMarkdown(option?) {\n  const turndownService = Turndown(option)\n\n  const [aiContent, setAiContent] = useStorage({\n"},{"type":"text","text":"Repository: i-am-bee/beeai-framework\nPath: typescript/src/tools/search/wikipedia.ts\nURL: https://github.com/i-am-bee/beeai-framework/blob/main/typescript/src/tools/search/wikipedia.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 16) ---\n  SearchToolRunOptions,\n} from \"./base.js\";\nimport { asyncProperties } from \"@/internals/helpers/promise.js\";\nimport { z } from \"zod\";\nimport { Tool, ToolEmitter, ToolInput } from \"@/tools/base.js\";\nimport Turndown from \"turndown\";\n// @ts-expect-error missing types\nimport turndownPlugin from \"joplin-turndown-plugin-gfm\";\nimport stringComparison from \"string-comparison\";\nimport type { pageResult } from \"wikipedia\";\nimport { Emitter } from \"@/emitter/emitter.js\";\n"}]}]},"uuid":"0536eda0-5781-4d34-a17c-fa7e66099b08","timestamp":"2026-01-12T23:30:50.132Z","toolUseResult":[{"type":"text","text":"Repository: ItzCrazyKns/Perplexica\nPath: src/lib/agents/search/researcher/actions/scrapeURL.ts\nURL: https://github.com/ItzCrazyKns/Perplexica/blob/master/src/lib/agents/search/researcher/actions/scrapeURL.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport z from 'zod';\nimport { ResearchAction } from '../../types';\nimport { Chunk, ReadingResearchBlock } from '@/lib/types';\nimport TurnDown from 'turndown';\nimport path from 'path';\n\nconst turndownService = new TurnDown();\n\nconst schema = z.object({\n"},{"type":"text","text":"Repository: microsoft/fluentui\nPath: tools/storybook-llms-extractor/src/utils.ts\nURL: https://github.com/microsoft/fluentui/blob/master/tools/storybook-llms-extractor/src/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { mkdir, rm, writeFile, readFile } from 'node:fs/promises';\nimport { join, resolve, extname } from 'node:path';\nimport { existsSync } from 'node:fs';\n\nimport { type BrowserContext, type Page, chromium } from 'playwright';\nimport Turndown from 'turndown';\nimport { strikethrough, tables, taskListItems } from 'turndown-plugin-gfm';\n\nimport type { Args, StorybookComponentProp, StorybookComponent, StorybookStoreItem } from './types';\n\n/**\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/scopes.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/scopes.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport axios from \"axios\"\nimport md5 from \"js-md5\"\nimport juice from \"juice/client\"\nimport turndown from \"turndown\"\nimport tools from './tools'\n\nexport default {\n  tools,\n  turndown,\n"},{"type":"text","text":"Repository: steel-dev/steel-browser\nPath: api/src/utils/scrape/htmlToMarkdown.ts\nURL: https://github.com/steel-dev/steel-browser/blob/main/api/src/utils/scrape/htmlToMarkdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { applyFixes } from \"markdownlint\";\nimport { lint } from \"markdownlint/promise\";\nimport Turndown from \"turndown\";\nimport highlightedCodeBlock from \"./plugins/highlightedCodeBlock.js\";\nimport inlineLink from \"./plugins/inlineLink.js\";\nimport strikethrough from \"./plugins/strikethrough.js\";\nimport tables from \"./plugins/table.js\";\nimport taskListItems from \"./plugins/taskListItems.js\";\n"},{"type":"text","text":"Repository: mishushakov/llm-scraper\nPath: src/preprocess.ts\nURL: https://github.com/mishushakov/llm-scraper/blob/main/src/preprocess.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { type Page } from 'playwright'\nimport Turndown from 'turndown'\n\nimport cleanup from './cleanup.js'\n\nexport type PreProcessOptions =\n  | {\n"},{"type":"text","text":"Repository: retorquere/zotero-better-bibtex\nPath: translators/Collected notes.ts\nURL: https://github.com/retorquere/zotero-better-bibtex/blob/master/translators/Collected%20notes.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nimport type { Header } from '../gen/translators'\ndeclare var ZOTERO_TRANSLATOR_INFO: Header // eslint-disable-line no-var\n\ndeclare const Zotero: any\n\nimport Turndown from 'turndown'\nconst turndown = new Turndown\n\nimport { Item } from '../gen/typings/serialized-item'\n\nimport * as escape from '../content/escape'\n"},{"type":"text","text":"Repository: padloc/padloc\nPath: packages/app/src/lib/markdown.ts\nURL: https://github.com/padloc/padloc/blob/main/packages/app/src/lib/markdown.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { addHook, sanitize } from \"dompurify\";\nimport { marked } from \"marked\";\nimport TurnDown from \"turndown\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\nimport { html } from \"lit\";\n\nmarked.use({\n    renderer: {\n"},{"type":"text","text":"Repository: 027xiguapi/code-box\nPath: utils/editMarkdownHook.ts\nURL: https://github.com/027xiguapi/code-box/blob/main/utils/editMarkdownHook.ts\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Storage } from \"@plasmohq/storage\"\nimport { useStorage } from \"@plasmohq/storage/dist/hook\"\n\nimport Turndown from \"~utils/turndown\"\n\nexport function useEditMarkdown(option?) {\n  const turndownService = Turndown(option)\n\n  const [post, setPost] = useStorage({\n"},{"type":"text","text":"Repository: 027xiguapi/code-box\nPath: utils/parseMarkdownHook.ts\nURL: https://github.com/027xiguapi/code-box/blob/main/utils/parseMarkdownHook.ts\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Storage } from \"@plasmohq/storage\"\nimport { useStorage } from \"@plasmohq/storage/dist/hook\"\n\nimport Turndown from \"~utils/turndown\"\n\nexport function useParseMarkdown(option?) {\n  const turndownService = Turndown(option)\n\n  const [aiContent, setAiContent] = useStorage({\n"},{"type":"text","text":"Repository: i-am-bee/beeai-framework\nPath: typescript/src/tools/search/wikipedia.ts\nURL: https://github.com/i-am-bee/beeai-framework/blob/main/typescript/src/tools/search/wikipedia.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 16) ---\n  SearchToolRunOptions,\n} from \"./base.js\";\nimport { asyncProperties } from \"@/internals/helpers/promise.js\";\nimport { z } from \"zod\";\nimport { Tool, ToolEmitter, ToolInput } from \"@/tools/base.js\";\nimport Turndown from \"turndown\";\n// @ts-expect-error missing types\nimport turndownPlugin from \"joplin-turndown-plugin-gfm\";\nimport stringComparison from \"string-comparison\";\nimport type { pageResult } from \"wikipedia\";\nimport { Emitter } from \"@/emitter/emitter.js\";\n"}],"sourceToolAssistantUUID":"cc2a0d91-8e82-4094-9d83-42d8bbeac346"}
{"parentUuid":"fcdfbeef-1c2e-40e6-944e-5c0ef3fee818","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0124Ttix7eQUFoZrU8kgbSbb","type":"tool_result","content":[{"type":"text","text":"Repository: ItzCrazyKns/Perplexica\nPath: src/lib/agents/search/researcher/actions/scrapeURL.ts\nURL: https://github.com/ItzCrazyKns/Perplexica/blob/master/src/lib/agents/search/researcher/actions/scrapeURL.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 2) ---\nimport { ResearchAction } from '../../types';\nimport { Chunk, ReadingResearchBlock } from '@/lib/types';\nimport TurnDown from 'turndown';\nimport path from 'path';\n\nconst turndownService = new TurnDown();\n\nconst schema = z.object({\n  urls: z.array(z.string()).describe('A list of URLs to scrape content from.'),\n});\n\n"},{"type":"text","text":"Repository: bytedance/UI-TARS-desktop\nPath: packages/agent-infra/shared/src/browser/to-markdown.ts\nURL: https://github.com/bytedance/UI-TARS-desktop/blob/main/packages/agent-infra/shared/src/browser/to-markdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 47) ---\n      strongDelimiter = '**',\n      gfmExtension = true,\n      removeTags = DEFAULT_TAGS_TO_REMOVE,\n    } = options;\n\n    const turndown = new Turndown({\n      codeBlockStyle,\n      headingStyle,\n      emDelimiter,\n      strongDelimiter,\n    });\n"},{"type":"text","text":"Repository: microsoft/fluentui\nPath: tools/storybook-llms-extractor/src/utils.ts\nURL: https://github.com/microsoft/fluentui/blob/master/tools/storybook-llms-extractor/src/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 248) ---\n   *\n   * https://github.com/mixmark-io/turndown?tab=readme-ov-file#overriding-turndownserviceprototypeescape\n   **/\n  Turndown.prototype.escape = (str: string) => str;\n\n  const turndown = new Turndown({\n    headingStyle: 'atx',\n    hr: '---',\n    bulletListMarker: '-',\n    codeBlockStyle: 'fenced',\n    fence: '```',\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/Juejin.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/Juejin.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 50) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    console.log('TurndownService', turndown)\n    var turndownService = new turndown()\n    turndownService.use(tools.turndownExt)\n    var markdown = turndownService.turndown(post.post_content)\n    const { data } = await axios.post('https://api.juejin.cn/content_api/v1/article_draft/create', {\n      brief_content: '',\n      category_id: '0',\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/imooc.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/imooc.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 39) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    if (!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n      var markdown = turndownService.turndown(post.post_content)\n      post.markdown = markdown\n      console.log(markdown)\n    }\n"},{"type":"text","text":"Repository: steel-dev/steel-browser\nPath: api/src/utils/scrape/htmlToMarkdown.ts\nURL: https://github.com/steel-dev/steel-browser/blob/main/api/src/utils/scrape/htmlToMarkdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nimport inlineLink from \"./plugins/inlineLink.js\";\nimport strikethrough from \"./plugins/strikethrough.js\";\nimport tables from \"./plugins/table.js\";\nimport taskListItems from \"./plugins/taskListItems.js\";\n\nconst turndownService = new Turndown({\n  headingStyle: \"atx\",\n  codeBlockStyle: \"fenced\",\n  bulletListMarker: \"-\",\n  emDelimiter: \"*\",\n  strongDelimiter: \"**\",\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/oschina.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/oschina.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 54) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    if(!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n      var markdown = turndownService.turndown(post.post_content)\n      post.markdown = markdown\n      console.log(markdown)\n    }\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/Cnblog.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/Cnblog.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 75) ---\n    ]\n  }\n\n  async addPost(post) {\n    if(!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n    \tvar markdown = turndownService.turndown(post.post_content)\n    \tconsole.log(markdown);\n    \tpost.markdown = markdown\n    }\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/Segmentfault.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/Segmentfault.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 47) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    if(!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n      var markdown = turndownService.turndown(post.post_content)\n      post.markdown = markdown\n      console.log(markdown)\n    }\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/yuque.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/yuque.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 60) ---\n  async editPost(post_id, post) {\n    const content = `${post.post_content}`\n    try {\n      const aslContent = `${content}`;\n      if(!post.markdown) {\n        var turndownService = new turndown()\n        turndownService.use(tools.turndownExt)\n        var markdown = turndownService.turndown(post.post_content)\n        console.log(markdown);\n        post.markdown = markdown\n      }\n"}]}]},"uuid":"a6bb500f-3869-4e01-b676-37c27dc2a56e","timestamp":"2026-01-12T23:30:50.556Z","toolUseResult":[{"type":"text","text":"Repository: ItzCrazyKns/Perplexica\nPath: src/lib/agents/search/researcher/actions/scrapeURL.ts\nURL: https://github.com/ItzCrazyKns/Perplexica/blob/master/src/lib/agents/search/researcher/actions/scrapeURL.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 2) ---\nimport { ResearchAction } from '../../types';\nimport { Chunk, ReadingResearchBlock } from '@/lib/types';\nimport TurnDown from 'turndown';\nimport path from 'path';\n\nconst turndownService = new TurnDown();\n\nconst schema = z.object({\n  urls: z.array(z.string()).describe('A list of URLs to scrape content from.'),\n});\n\n"},{"type":"text","text":"Repository: bytedance/UI-TARS-desktop\nPath: packages/agent-infra/shared/src/browser/to-markdown.ts\nURL: https://github.com/bytedance/UI-TARS-desktop/blob/main/packages/agent-infra/shared/src/browser/to-markdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 47) ---\n      strongDelimiter = '**',\n      gfmExtension = true,\n      removeTags = DEFAULT_TAGS_TO_REMOVE,\n    } = options;\n\n    const turndown = new Turndown({\n      codeBlockStyle,\n      headingStyle,\n      emDelimiter,\n      strongDelimiter,\n    });\n"},{"type":"text","text":"Repository: microsoft/fluentui\nPath: tools/storybook-llms-extractor/src/utils.ts\nURL: https://github.com/microsoft/fluentui/blob/master/tools/storybook-llms-extractor/src/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 248) ---\n   *\n   * https://github.com/mixmark-io/turndown?tab=readme-ov-file#overriding-turndownserviceprototypeescape\n   **/\n  Turndown.prototype.escape = (str: string) => str;\n\n  const turndown = new Turndown({\n    headingStyle: 'atx',\n    hr: '---',\n    bulletListMarker: '-',\n    codeBlockStyle: 'fenced',\n    fence: '```',\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/Juejin.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/Juejin.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 50) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    console.log('TurndownService', turndown)\n    var turndownService = new turndown()\n    turndownService.use(tools.turndownExt)\n    var markdown = turndownService.turndown(post.post_content)\n    const { data } = await axios.post('https://api.juejin.cn/content_api/v1/article_draft/create', {\n      brief_content: '',\n      category_id: '0',\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/imooc.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/imooc.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 39) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    if (!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n      var markdown = turndownService.turndown(post.post_content)\n      post.markdown = markdown\n      console.log(markdown)\n    }\n"},{"type":"text","text":"Repository: steel-dev/steel-browser\nPath: api/src/utils/scrape/htmlToMarkdown.ts\nURL: https://github.com/steel-dev/steel-browser/blob/main/api/src/utils/scrape/htmlToMarkdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nimport inlineLink from \"./plugins/inlineLink.js\";\nimport strikethrough from \"./plugins/strikethrough.js\";\nimport tables from \"./plugins/table.js\";\nimport taskListItems from \"./plugins/taskListItems.js\";\n\nconst turndownService = new Turndown({\n  headingStyle: \"atx\",\n  codeBlockStyle: \"fenced\",\n  bulletListMarker: \"-\",\n  emDelimiter: \"*\",\n  strongDelimiter: \"**\",\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/oschina.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/oschina.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 54) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    if(!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n      var markdown = turndownService.turndown(post.post_content)\n      post.markdown = markdown\n      console.log(markdown)\n    }\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/Cnblog.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/Cnblog.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 75) ---\n    ]\n  }\n\n  async addPost(post) {\n    if(!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n    \tvar markdown = turndownService.turndown(post.post_content)\n    \tconsole.log(markdown);\n    \tpost.markdown = markdown\n    }\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/Segmentfault.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/Segmentfault.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 47) ---\n    }\n  }\n\n  async editPost(post_id, post) {\n    if(!post.markdown) {\n      var turndownService = new turndown()\n      turndownService.use(tools.turndownExt)\n      var markdown = turndownService.turndown(post.post_content)\n      post.markdown = markdown\n      console.log(markdown)\n    }\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/@wechatsync/drivers/src/yuque.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/%40wechatsync/drivers/src/yuque.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 60) ---\n  async editPost(post_id, post) {\n    const content = `${post.post_content}`\n    try {\n      const aslContent = `${content}`;\n      if(!post.markdown) {\n        var turndownService = new turndown()\n        turndownService.use(tools.turndownExt)\n        var markdown = turndownService.turndown(post.post_content)\n        console.log(markdown);\n        post.markdown = markdown\n      }\n"}],"sourceToolAssistantUUID":"fcdfbeef-1c2e-40e6-944e-5c0ef3fee818"}
{"parentUuid":"4c8c51f7-b3d3-484d-89c4-169eee022665","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01XRabe7sT3MoVSMwryBVPJP","type":"tool_result","content":[{"type":"text","text":"Repository: qutebrowser/qutebrowser\nPath: misc/userscripts/readability-js\nURL: https://github.com/qutebrowser/qutebrowser/blob/main/misc/userscripts/readability-js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 5) ---\n// Summarize the current page in a new tab, by processing it with the standalone readability\n// library used for Firefox Reader View.\n//\n// # Prerequisites\n//\n// - Mozilla's readability library (npm install -g @mozilla/readability)\n//     - Also available in the AUR as nodejs-readability-git\n// - jsdom (npm install -g jsdom)\n// - qutejs (npm install -g qutejs)\n//\n// - Ensure that node knows where to find your globally installed modules by adding\n\n\n--- Snippet 2 (Line 27) ---\n// :spawn --userscript readability-js\n//\n// One may wish to define an easy to type command alias in qutebrowser's configuration file:\n// c.aliases = {\"readability\" : \"spawn --userscript readability-js\", ...}\n\nconst { Readability } = require('@mozilla/readability');\nconst qute = require('qutejs');\nconst JSDOM = require('jsdom').JSDOM;\nconst fs = require('fs');\n"},{"type":"text","text":"Repository: lobehub/lobe-chat\nPath: packages/web-crawler/src/utils/htmlToMarkdown.ts\nURL: https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport { Window } from 'happy-dom';\nimport { NodeHtmlMarkdown, type TranslatorConfigObject } from 'node-html-markdown';\n\nimport { FilterOptions } from '../type';\n\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n"},{"type":"text","text":"Repository: slow-groovin/webpage-summary\nPath: src/types/summary.ts\nURL: https://github.com/slow-groovin/webpage-summary/blob/main/src/types/summary.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 15) ---\n   * @mozilla/readability parsed field: byline\n   */\n  byline?: string,\n  /**\n   * @mozilla/readability parsed field: dir\n   */\n  dir?: string,\n  /**\n   * @mozilla/readability parsed field: excerpt\n   */\n  excerpt?: string,\n  /**\n   * @mozilla/readability parsed field: lang\n   */\n  lang?: string,\n  /**\n   * @mozilla/readability parsed field: length\n   */\n  length?: number,\n  /**\n   * @mozilla/readability parsed field: publishedTime\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/GeminiSummarizeSelectionContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/GeminiSummarizeSelectionContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 46) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2033) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/GeminiTranslationT2EContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/GeminiTranslationT2EContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 46) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2033) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/GeminiTranslationE2TContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/GeminiTranslationE2TContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 46) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2033) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/SelectionToMarkdownContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/SelectionToMarkdownContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 39) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2026) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/@n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/%40n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\n\nfunction canBeParsed(document) {\n  return isProbablyReaderable(document, {\n    minContentLength: 100\n  });\n"}]}]},"uuid":"db660ce5-283d-4ff4-b2b7-b1a452f5b67c","timestamp":"2026-01-12T23:30:50.806Z","toolUseResult":[{"type":"text","text":"Repository: qutebrowser/qutebrowser\nPath: misc/userscripts/readability-js\nURL: https://github.com/qutebrowser/qutebrowser/blob/main/misc/userscripts/readability-js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 5) ---\n// Summarize the current page in a new tab, by processing it with the standalone readability\n// library used for Firefox Reader View.\n//\n// # Prerequisites\n//\n// - Mozilla's readability library (npm install -g @mozilla/readability)\n//     - Also available in the AUR as nodejs-readability-git\n// - jsdom (npm install -g jsdom)\n// - qutejs (npm install -g qutejs)\n//\n// - Ensure that node knows where to find your globally installed modules by adding\n\n\n--- Snippet 2 (Line 27) ---\n// :spawn --userscript readability-js\n//\n// One may wish to define an easy to type command alias in qutebrowser's configuration file:\n// c.aliases = {\"readability\" : \"spawn --userscript readability-js\", ...}\n\nconst { Readability } = require('@mozilla/readability');\nconst qute = require('qutejs');\nconst JSDOM = require('jsdom').JSDOM;\nconst fs = require('fs');\n"},{"type":"text","text":"Repository: lobehub/lobe-chat\nPath: packages/web-crawler/src/utils/htmlToMarkdown.ts\nURL: https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport { Window } from 'happy-dom';\nimport { NodeHtmlMarkdown, type TranslatorConfigObject } from 'node-html-markdown';\n\nimport { FilterOptions } from '../type';\n\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n"},{"type":"text","text":"Repository: slow-groovin/webpage-summary\nPath: src/types/summary.ts\nURL: https://github.com/slow-groovin/webpage-summary/blob/main/src/types/summary.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 15) ---\n   * @mozilla/readability parsed field: byline\n   */\n  byline?: string,\n  /**\n   * @mozilla/readability parsed field: dir\n   */\n  dir?: string,\n  /**\n   * @mozilla/readability parsed field: excerpt\n   */\n  excerpt?: string,\n  /**\n   * @mozilla/readability parsed field: lang\n   */\n  lang?: string,\n  /**\n   * @mozilla/readability parsed field: length\n   */\n  length?: number,\n  /**\n   * @mozilla/readability parsed field: publishedTime\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/GeminiSummarizeSelectionContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/GeminiSummarizeSelectionContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 46) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2033) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/GeminiTranslationT2EContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/GeminiTranslationT2EContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 46) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2033) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/GeminiTranslationE2TContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/GeminiTranslationE2TContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 46) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2033) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: doggy8088/TampermonkeyUserscripts\nPath: src/SelectionToMarkdownContextMenu.user.js\nURL: https://github.com/doggy8088/TampermonkeyUserscripts/blob/main/src/SelectionToMarkdownContextMenu.user.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 39) ---\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n    mod\n  ));\n\n  // node_modules/@mozilla/readability/Readability.js\n  var require_Readability = __commonJS({\n    \"node_modules/@mozilla/readability/Readability.js\"(exports, module) {\n      function Readability2(doc, options) {\n        if (options && options.documentElement) {\n          doc = options;\n          options = arguments[2];\n        } else if (!doc || !doc.documentElement) {\n\n\n--- Snippet 2 (Line 2026) ---\n      }\n    }\n  });\n\n  // node_modules/@mozilla/readability/Readability-readerable.js\n  var require_Readability_readerable = __commonJS({\n    \"node_modules/@mozilla/readability/Readability-readerable.js\"(exports, module) {\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/@n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/%40n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\n\nfunction canBeParsed(document) {\n  return isProbablyReaderable(document, {\n    minContentLength: 100\n  });\n"}],"sourceToolAssistantUUID":"4c8c51f7-b3d3-484d-89c4-169eee022665"}
{"parentUuid":"f31c2cfe-3ea7-4588-9e82-5c16336bf1c6","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01P7uuDNY7JZKLiXRtA4bEdr","type":"tool_result","content":[{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/test/test-readability.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/test/test-readability.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 72) ---\n    before(async function () {\n      try {\n        var doc = domGenerationFn(source)\n        // Provide one class name to preserve, which we know appears in a few\n        // of the test documents.\n        var myReader = new Readability(doc, {\n          classesToPreserve: ['caption'],\n          url: uri,\n        })\n        result = await myReader.parse()\n      } catch (err) {\n\n\n--- Snippet 2 (Line 236) ---\n    it('should accept a debug option', function () {\n      expect(new Readability(doc)._debug).eql(false)\n      expect(new Readability(doc, { debug: true })._debug).eql(true)\n    })\n\n    it('should accept a nbTopCandidates option', function () {\n      expect(new Readability(doc)._nbTopCandidates).eql(5)\n      expect(\n        new Readability(doc, { nbTopCandidates: 42 })._nbTopCandidates\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/test-readability.js\nURL: https://github.com/mozilla/readability/blob/main/test/test-readability.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 69) ---\n    before(function () {\n      try {\n        var doc = domGenerationFn(source);\n        // Provide one class name to preserve, which we know appears in a few\n        // of the test documents.\n        var myReader = new Readability(doc, { classesToPreserve: [\"caption\"] });\n        result = myReader.parse();\n      } catch (err) {\n        throw reformatError(err);\n      }\n    });\n\n\n--- Snippet 2 (Line 247) ---\n    it(\"should accept a debug option\", function () {\n      expect(new Readability(doc)._debug).eql(false);\n      expect(new Readability(doc, { debug: true })._debug).eql(true);\n    });\n\n    it(\"should accept a nbTopCandidates option\", function () {\n      expect(new Readability(doc)._nbTopCandidates).eql(5);\n      expect(\n        new Readability(doc, { nbTopCandidates: 42 })._nbTopCandidates\n"},{"type":"text","text":"Repository: gnachman/iTerm2\nPath: sources/Browser/Reader Mode/reader-mode-with-styles.js\nURL: https://github.com/gnachman/iTerm2/blob/master/sources/Browser/Reader%20Mode/reader-mode-with-styles.js\nLicense: GPL-2.0\n\nSnippets:\n--- Snippet 1 (Line 36) ---\n        }\n        \n        try {\n            // Clone the document to avoid modifying the original\n            const documentClone = document.cloneNode(true);\n            const reader = new Readability(documentClone);\n            const article = reader.parse();\n            \n            if (!article || !article.content) {\n                console.warn('Could not parse article content');\n                return false;\n\n\n--- Snippet 2 (Line 108) ---\n            return false;\n        }\n        \n        try {\n            const documentClone = document.cloneNode(true);\n            const reader = new Readability(documentClone);\n            const article = reader.parse();\n            \n            return article && article.content && article.content.trim().length > 500;\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/generate-testcase.js\nURL: https://github.com/mozilla/readability/blob/main/test/generate-testcase.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 149) ---\n  var doc = new JSDOMParser().parse(source, uri);\n  var myReader, result, readerable;\n  try {\n    // We pass `caption` as a class to check that passing in extra classes works,\n    // given that it appears in some of the test documents.\n    myReader = new Readability(doc, { classesToPreserve: [\"caption\"] });\n    result = myReader.parse();\n  } catch (ex) {\n    console.error(ex);\n    ex.stack.forEach(console.log.bind(console));\n  }\n  // Use jsdom for isProbablyReaderable because it supports querySelectorAll\n  try {\n    var jsdomDoc = new JSDOM(source, {\n      url: uri,\n    }).window.document;\n    myReader = new Readability(jsdomDoc);\n    readerable = isProbablyReaderable(jsdomDoc);\n  } catch (ex) {\n    console.error(ex);\n    ex.stack.forEach(console.log.bind(console));\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/web-extension/src/page.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/web-extension/src/page.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 116) ---\n    showArticle()\n  })\n\n  function adoptableArticle() {\n    try {\n      var $reader = new Readability(document.cloneNode(true)).parse()\n      console.log('adoptableArticle', $reader)\n    } catch(e) {\n      console.log('Readability.error', e)\n    }\n    var $article = $(ReaderArticleFinderJS.adoptableArticle().outerHTML)\n\n\n--- Snippet 2 (Line 203) ---\n\n  function getArticle() {\n    // var av = ReaderArticleFinderJS.isReaderModeAvailable();\n    var arcArticle = null;\n    try {\n      arcArticle = new Readability(document.cloneNode(true)).parse()\n      // arcArticle = true;\n      console.log('adoptableArticle', arcArticle)\n    } catch (e) {\n"},{"type":"text","text":"Repository: extractus/article-extractor\nPath: src/utils/extractWithReadability.js\nURL: https://github.com/extractus/article-extractor/blob/main/src/utils/extractWithReadability.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 10) ---\n  }\n  const doc = new DOMParser().parseFromString(html, 'text/html')\n  const base = doc.createElement('base')\n  base.setAttribute('href', url)\n  doc.head.appendChild(base)\n  const reader = new Readability(doc, {\n    keepClasses: true,\n  })\n  const result = reader.parse() ?? {}\n  return result.textContent ? result.content : null\n}\n\n\n--- Snippet 2 (Line 22) ---\nexport function extractTitleWithReadability (html) {\n  if (!isString(html)) {\n    return null\n  }\n  const doc = new DOMParser().parseFromString(html, 'text/html')\n  const reader = new Readability(doc)\n  return reader._getArticleTitle() || null\n"},{"type":"text","text":"Repository: lobehub/lobe-chat\nPath: packages/web-crawler/src/utils/htmlToMarkdown.ts\nURL: https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 30) ---\n\n  const document = window.document;\n  document.body.innerHTML = html;\n\n  // @ts-expect-error reason: Readability expects a Document type\n  const parsedContent = new Readability(document).parse();\n\n  const useReadability = filterOptions.enableReadability ?? true;\n\n  let htmlNode = html;\n\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 108) ---\n\t\t\t\t{ itemIndex },\n\t\t\t);\n\t\t}\n\n\t\tconst dom = new JSDOM(response);\n\t\tconst article = new Readability(dom.window.document, {\n\t\t\tkeepClasses: true,\n\t\t}).parse();\n\n\t\tconst text = article?.textContent || '';\n\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/@n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/%40n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 247) ---\n\t\t\t\t{ itemIndex },\n\t\t\t);\n\t\t}\n\n\t\tconst dom = new JSDOM(response);\n\t\tconst article = new Readability(dom.window.document, {\n\t\t\tkeepClasses: true,\n\t\t}).parse();\n\n\t\tconst text = article?.textContent || '';\n\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 9) ---\nfunction parse(document) {\n  if (!canBeParsed(document)) {\n    return false;\n  }\n  const documentClone = document.cloneNode(true);\n  const article = new Readability(documentClone).parse();\n  return article.textContent;\n}\n\n"}]}]},"uuid":"002fe149-9339-4d90-9aa7-38caf48c5c38","timestamp":"2026-01-12T23:30:51.150Z","toolUseResult":[{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/test/test-readability.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/test/test-readability.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 72) ---\n    before(async function () {\n      try {\n        var doc = domGenerationFn(source)\n        // Provide one class name to preserve, which we know appears in a few\n        // of the test documents.\n        var myReader = new Readability(doc, {\n          classesToPreserve: ['caption'],\n          url: uri,\n        })\n        result = await myReader.parse()\n      } catch (err) {\n\n\n--- Snippet 2 (Line 236) ---\n    it('should accept a debug option', function () {\n      expect(new Readability(doc)._debug).eql(false)\n      expect(new Readability(doc, { debug: true })._debug).eql(true)\n    })\n\n    it('should accept a nbTopCandidates option', function () {\n      expect(new Readability(doc)._nbTopCandidates).eql(5)\n      expect(\n        new Readability(doc, { nbTopCandidates: 42 })._nbTopCandidates\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/test-readability.js\nURL: https://github.com/mozilla/readability/blob/main/test/test-readability.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 69) ---\n    before(function () {\n      try {\n        var doc = domGenerationFn(source);\n        // Provide one class name to preserve, which we know appears in a few\n        // of the test documents.\n        var myReader = new Readability(doc, { classesToPreserve: [\"caption\"] });\n        result = myReader.parse();\n      } catch (err) {\n        throw reformatError(err);\n      }\n    });\n\n\n--- Snippet 2 (Line 247) ---\n    it(\"should accept a debug option\", function () {\n      expect(new Readability(doc)._debug).eql(false);\n      expect(new Readability(doc, { debug: true })._debug).eql(true);\n    });\n\n    it(\"should accept a nbTopCandidates option\", function () {\n      expect(new Readability(doc)._nbTopCandidates).eql(5);\n      expect(\n        new Readability(doc, { nbTopCandidates: 42 })._nbTopCandidates\n"},{"type":"text","text":"Repository: gnachman/iTerm2\nPath: sources/Browser/Reader Mode/reader-mode-with-styles.js\nURL: https://github.com/gnachman/iTerm2/blob/master/sources/Browser/Reader%20Mode/reader-mode-with-styles.js\nLicense: GPL-2.0\n\nSnippets:\n--- Snippet 1 (Line 36) ---\n        }\n        \n        try {\n            // Clone the document to avoid modifying the original\n            const documentClone = document.cloneNode(true);\n            const reader = new Readability(documentClone);\n            const article = reader.parse();\n            \n            if (!article || !article.content) {\n                console.warn('Could not parse article content');\n                return false;\n\n\n--- Snippet 2 (Line 108) ---\n            return false;\n        }\n        \n        try {\n            const documentClone = document.cloneNode(true);\n            const reader = new Readability(documentClone);\n            const article = reader.parse();\n            \n            return article && article.content && article.content.trim().length > 500;\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/generate-testcase.js\nURL: https://github.com/mozilla/readability/blob/main/test/generate-testcase.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 149) ---\n  var doc = new JSDOMParser().parse(source, uri);\n  var myReader, result, readerable;\n  try {\n    // We pass `caption` as a class to check that passing in extra classes works,\n    // given that it appears in some of the test documents.\n    myReader = new Readability(doc, { classesToPreserve: [\"caption\"] });\n    result = myReader.parse();\n  } catch (ex) {\n    console.error(ex);\n    ex.stack.forEach(console.log.bind(console));\n  }\n  // Use jsdom for isProbablyReaderable because it supports querySelectorAll\n  try {\n    var jsdomDoc = new JSDOM(source, {\n      url: uri,\n    }).window.document;\n    myReader = new Readability(jsdomDoc);\n    readerable = isProbablyReaderable(jsdomDoc);\n  } catch (ex) {\n    console.error(ex);\n    ex.stack.forEach(console.log.bind(console));\n"},{"type":"text","text":"Repository: wechatsync/Wechatsync\nPath: packages/web-extension/src/page.js\nURL: https://github.com/wechatsync/Wechatsync/blob/master/packages/web-extension/src/page.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 116) ---\n    showArticle()\n  })\n\n  function adoptableArticle() {\n    try {\n      var $reader = new Readability(document.cloneNode(true)).parse()\n      console.log('adoptableArticle', $reader)\n    } catch(e) {\n      console.log('Readability.error', e)\n    }\n    var $article = $(ReaderArticleFinderJS.adoptableArticle().outerHTML)\n\n\n--- Snippet 2 (Line 203) ---\n\n  function getArticle() {\n    // var av = ReaderArticleFinderJS.isReaderModeAvailable();\n    var arcArticle = null;\n    try {\n      arcArticle = new Readability(document.cloneNode(true)).parse()\n      // arcArticle = true;\n      console.log('adoptableArticle', arcArticle)\n    } catch (e) {\n"},{"type":"text","text":"Repository: extractus/article-extractor\nPath: src/utils/extractWithReadability.js\nURL: https://github.com/extractus/article-extractor/blob/main/src/utils/extractWithReadability.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 10) ---\n  }\n  const doc = new DOMParser().parseFromString(html, 'text/html')\n  const base = doc.createElement('base')\n  base.setAttribute('href', url)\n  doc.head.appendChild(base)\n  const reader = new Readability(doc, {\n    keepClasses: true,\n  })\n  const result = reader.parse() ?? {}\n  return result.textContent ? result.content : null\n}\n\n\n--- Snippet 2 (Line 22) ---\nexport function extractTitleWithReadability (html) {\n  if (!isString(html)) {\n    return null\n  }\n  const doc = new DOMParser().parseFromString(html, 'text/html')\n  const reader = new Readability(doc)\n  return reader._getArticleTitle() || null\n"},{"type":"text","text":"Repository: lobehub/lobe-chat\nPath: packages/web-crawler/src/utils/htmlToMarkdown.ts\nURL: https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 30) ---\n\n  const document = window.document;\n  document.body.innerHTML = html;\n\n  // @ts-expect-error reason: Readability expects a Document type\n  const parsedContent = new Readability(document).parse();\n\n  const useReadability = filterOptions.enableReadability ?? true;\n\n  let htmlNode = html;\n\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 108) ---\n\t\t\t\t{ itemIndex },\n\t\t\t);\n\t\t}\n\n\t\tconst dom = new JSDOM(response);\n\t\tconst article = new Readability(dom.window.document, {\n\t\t\tkeepClasses: true,\n\t\t}).parse();\n\n\t\tconst text = article?.textContent || '';\n\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/@n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/%40n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 247) ---\n\t\t\t\t{ itemIndex },\n\t\t\t);\n\t\t}\n\n\t\tconst dom = new JSDOM(response);\n\t\tconst article = new Readability(dom.window.document, {\n\t\t\tkeepClasses: true,\n\t\t}).parse();\n\n\t\tconst text = article?.textContent || '';\n\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 9) ---\nfunction parse(document) {\n  if (!canBeParsed(document)) {\n    return false;\n  }\n  const documentClone = document.cloneNode(true);\n  const article = new Readability(documentClone).parse();\n  return article.textContent;\n}\n\n"}],"sourceToolAssistantUUID":"f31c2cfe-3ea7-4588-9e82-5c16336bf1c6"}
{"parentUuid":"3458d106-0b17-4b2d-963e-4ab9cdace764","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01H6cYNnZ3PoRcjm2yWzxre1","type":"tool_result","content":[{"type":"text","text":"Repository: camel-ai/camel\nPath: camel/loaders/jina_url_reader.py\nURL: https://github.com/camel-ai/camel/blob/master/camel/loaders/jina_url_reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 41) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 56) ---\n    ) -> None:\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if not api_key:\n            warn(\n                \"JINA_API_KEY not set. This will result in a low rate limit \"\n                \"of Jina URL Reader. Get API key here: https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"},{"type":"text","text":"Repository: ImprintLab/Medical-Graph-RAG\nPath: camel/loaders/jina_url_reader.py\nURL: https://github.com/ImprintLab/Medical-Graph-RAG/blob/main/camel/loaders/jina_url_reader.py\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 40) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 56) ---\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if api_key is None:\n            print(\n                \"[JinaURLReader] JINA_API_KEY not set. This will result in a \"\n                \"low rate limit of Jina URL Reader. Get API key here: \"\n                \"https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"},{"type":"text","text":"Repository: bytedance/deer-flow\nPath: src/crawler/jina_client.py\nURL: https://github.com/bytedance/deer-flow/blob/main/src/crawler/jina_client.py\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 17) ---\n        }\n        if os.getenv(\"JINA_API_KEY\"):\n            headers[\"Authorization\"] = f\"Bearer {os.getenv('JINA_API_KEY')}\"\n        else:\n            logger.warning(\n                \"Jina API key is not set. Provide your own key to access a higher rate limit. See https://jina.ai/reader for more information.\"\n            )\n        data = {\"url\": url}\n        try:\n            response = requests.post(\"https://r.jina.ai/\", headers=headers, json=data)\n            \n"},{"type":"text","text":"Repository: deepset-ai/haystack-core-integrations\nPath: integrations/jina/src/haystack_integrations/components/connectors/jina/reader.py\nURL: https://github.com/deepset-ai/haystack-core-integrations/blob/main/integrations/jina/src/haystack_integrations/components/connectors/jina/reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 51) ---\n\n        :param mode: The operation mode for the reader (`read`, `search` or `ground`).\n            - `read`: process a URL and return the textual content of the page.\n            - `search`: search the web and return textual content of the most relevant pages.\n            - `ground`: call the grounding engine to perform fact checking.\n            For more information on the modes, see the [Jina Reader documentation](https://jina.ai/reader/).\n        :param api_key: The Jina API key. It can be explicitly provided or automatically read from the\n            environment variable JINA_API_KEY (recommended).\n        :param json_response: Controls the response format from the Jina Reader API.\n            If `True`, requests a JSON response, resulting in Documents with rich structured metadata.\n            If `False`, requests a raw response, resulting in one Document with minimal metadata.\n\n\n--- Snippet 2 (Line 108) ---\n        \"\"\"\n        Process the query/URL using the Jina AI reader service.\n\n        :param query: The query string or URL to process.\n        :param headers: Optional headers to include in the request for customization. Refer to the\n            [Jina Reader documentation](https://jina.ai/reader/) for more information.\n\n        :returns:\n            A dictionary with the following keys:\n"},{"type":"text","text":"Repository: Cinnamon/kotaemon\nPath: libs/kotaemon/kotaemon/indices/retrievers/jina_web_search.py\nURL: https://github.com/Cinnamon/kotaemon/blob/main/libs/kotaemon/kotaemon/indices/retrievers/jina_web_search.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 19) ---\n        **kwargs,\n    ) -> list[RetrievedDocument]:\n        if JINA_API_KEY == \"\":\n            raise ValueError(\n                \"This feature requires JINA_API_KEY \"\n                \"(get free one from https://jina.ai/reader)\"\n            )\n\n        # setup the request\n        api_url = f\"https://s.jina.ai/{text}\"\n        headers = {\"X-With-Generated-Alt\": \"true\", \"Accept\": \"application/json\"}\n"},{"type":"text","text":"Repository: transitive-bullshit/agentic\nPath: legacy/packages/jina/src/jina-client.ts\nURL: https://github.com/transitive-bullshit/agentic/blob/main/legacy/packages/jina/src/jina-client.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 107) ---\n * - Does not support \"stream mode\".\n * - Results default to markdown text format.\n * - To return JSON (especially useful for `search`), set `json: true` in the\n *   options.\n *\n * @see https://jina.ai/reader\n */\nexport class JinaClient extends AIFunctionsProvider {\n  protected readonly kyReader: KyInstance\n  protected readonly kySearch: KyInstance\n  protected readonly apiKey?: string\n"},{"type":"text","text":"Repository: OPPO-PersonalAI/Agent-KB\nPath: Agent-KB-GAIA/examples/open_deep_research/rag/loaders/jina_url_reader.py\nURL: https://github.com/OPPO-PersonalAI/Agent-KB/blob/master/Agent-KB-GAIA/examples/open_deep_research/rag/loaders/jina_url_reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 43) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 58) ---\n    ) -> None:\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if not api_key:\n            warn(\n                \"JINA_API_KEY not set. This will result in a low rate limit \"\n                \"of Jina URL Reader. Get API key here: https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"},{"type":"text","text":"Repository: jina-ai/reader\nPath: src/cloud-functions/adaptive-crawler.ts\nURL: https://github.com/jina-ai/reader/blob/main/src/cloud-functions/adaptive-crawler.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 493) ---\n        // const indexObject: Record<string, string | number | undefined> = Object.create(indexProto);\n\n        // Object.assign(indexObject, {\n        //     usage1: 'https://r.jina.ai/YOUR_URL',\n        //     usage2: 'https://s.jina.ai/YOUR_SEARCH_QUERY',\n        //     homepage: 'https://jina.ai/reader',\n        //     sourceCode: 'https://github.com/jina-ai/reader',\n        // });\n\n        // if (user) {\n        //     indexObject[''] = undefined;\n"},{"type":"text","text":"Repository: jina-ai/reader\nPath: src/api/serp.ts\nURL: https://github.com/jina-ai/reader/blob/main/src/api/serp.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 70) ---\n        const indexObject: Record<string, string | number | undefined> = Object.create(indexProto);\n        Object.assign(indexObject, {\n            usage1: 'https://r.jina.ai/YOUR_URL',\n            usage2: 'https://s.jina.ai/YOUR_SEARCH_QUERY',\n            usage3: `${ctx.origin}/?q=YOUR_SEARCH_QUERY`,\n            homepage: 'https://jina.ai/reader',\n        });\n\n        if (auth && auth.user) {\n            indexObject[''] = undefined;\n            indexObject.authenticatedAs = `${auth.user.user_id} (${auth.user.full_name})`;\n"},{"type":"text","text":"Repository: OPPO-PersonalAI/OAgents\nPath: OAgents/example/oagents_deep_research/rag/loaders/jina_url_reader.py\nURL: https://github.com/OPPO-PersonalAI/OAgents/blob/main/OAgents/example/oagents_deep_research/rag/loaders/jina_url_reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 41) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 56) ---\n    ) -> None:\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if not api_key:\n            warn(\n                \"JINA_API_KEY not set. This will result in a low rate limit \"\n                \"of Jina URL Reader. Get API key here: https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"}]}]},"uuid":"ed089410-1844-40b3-a450-6ed0ae06abff","timestamp":"2026-01-12T23:30:51.403Z","toolUseResult":[{"type":"text","text":"Repository: camel-ai/camel\nPath: camel/loaders/jina_url_reader.py\nURL: https://github.com/camel-ai/camel/blob/master/camel/loaders/jina_url_reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 41) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 56) ---\n    ) -> None:\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if not api_key:\n            warn(\n                \"JINA_API_KEY not set. This will result in a low rate limit \"\n                \"of Jina URL Reader. Get API key here: https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"},{"type":"text","text":"Repository: ImprintLab/Medical-Graph-RAG\nPath: camel/loaders/jina_url_reader.py\nURL: https://github.com/ImprintLab/Medical-Graph-RAG/blob/main/camel/loaders/jina_url_reader.py\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 40) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 56) ---\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if api_key is None:\n            print(\n                \"[JinaURLReader] JINA_API_KEY not set. This will result in a \"\n                \"low rate limit of Jina URL Reader. Get API key here: \"\n                \"https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"},{"type":"text","text":"Repository: bytedance/deer-flow\nPath: src/crawler/jina_client.py\nURL: https://github.com/bytedance/deer-flow/blob/main/src/crawler/jina_client.py\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 17) ---\n        }\n        if os.getenv(\"JINA_API_KEY\"):\n            headers[\"Authorization\"] = f\"Bearer {os.getenv('JINA_API_KEY')}\"\n        else:\n            logger.warning(\n                \"Jina API key is not set. Provide your own key to access a higher rate limit. See https://jina.ai/reader for more information.\"\n            )\n        data = {\"url\": url}\n        try:\n            response = requests.post(\"https://r.jina.ai/\", headers=headers, json=data)\n            \n"},{"type":"text","text":"Repository: deepset-ai/haystack-core-integrations\nPath: integrations/jina/src/haystack_integrations/components/connectors/jina/reader.py\nURL: https://github.com/deepset-ai/haystack-core-integrations/blob/main/integrations/jina/src/haystack_integrations/components/connectors/jina/reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 51) ---\n\n        :param mode: The operation mode for the reader (`read`, `search` or `ground`).\n            - `read`: process a URL and return the textual content of the page.\n            - `search`: search the web and return textual content of the most relevant pages.\n            - `ground`: call the grounding engine to perform fact checking.\n            For more information on the modes, see the [Jina Reader documentation](https://jina.ai/reader/).\n        :param api_key: The Jina API key. It can be explicitly provided or automatically read from the\n            environment variable JINA_API_KEY (recommended).\n        :param json_response: Controls the response format from the Jina Reader API.\n            If `True`, requests a JSON response, resulting in Documents with rich structured metadata.\n            If `False`, requests a raw response, resulting in one Document with minimal metadata.\n\n\n--- Snippet 2 (Line 108) ---\n        \"\"\"\n        Process the query/URL using the Jina AI reader service.\n\n        :param query: The query string or URL to process.\n        :param headers: Optional headers to include in the request for customization. Refer to the\n            [Jina Reader documentation](https://jina.ai/reader/) for more information.\n\n        :returns:\n            A dictionary with the following keys:\n"},{"type":"text","text":"Repository: Cinnamon/kotaemon\nPath: libs/kotaemon/kotaemon/indices/retrievers/jina_web_search.py\nURL: https://github.com/Cinnamon/kotaemon/blob/main/libs/kotaemon/kotaemon/indices/retrievers/jina_web_search.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 19) ---\n        **kwargs,\n    ) -> list[RetrievedDocument]:\n        if JINA_API_KEY == \"\":\n            raise ValueError(\n                \"This feature requires JINA_API_KEY \"\n                \"(get free one from https://jina.ai/reader)\"\n            )\n\n        # setup the request\n        api_url = f\"https://s.jina.ai/{text}\"\n        headers = {\"X-With-Generated-Alt\": \"true\", \"Accept\": \"application/json\"}\n"},{"type":"text","text":"Repository: transitive-bullshit/agentic\nPath: legacy/packages/jina/src/jina-client.ts\nURL: https://github.com/transitive-bullshit/agentic/blob/main/legacy/packages/jina/src/jina-client.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 107) ---\n * - Does not support \"stream mode\".\n * - Results default to markdown text format.\n * - To return JSON (especially useful for `search`), set `json: true` in the\n *   options.\n *\n * @see https://jina.ai/reader\n */\nexport class JinaClient extends AIFunctionsProvider {\n  protected readonly kyReader: KyInstance\n  protected readonly kySearch: KyInstance\n  protected readonly apiKey?: string\n"},{"type":"text","text":"Repository: OPPO-PersonalAI/Agent-KB\nPath: Agent-KB-GAIA/examples/open_deep_research/rag/loaders/jina_url_reader.py\nURL: https://github.com/OPPO-PersonalAI/Agent-KB/blob/master/Agent-KB-GAIA/examples/open_deep_research/rag/loaders/jina_url_reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 43) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 58) ---\n    ) -> None:\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if not api_key:\n            warn(\n                \"JINA_API_KEY not set. This will result in a low rate limit \"\n                \"of Jina URL Reader. Get API key here: https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"},{"type":"text","text":"Repository: jina-ai/reader\nPath: src/cloud-functions/adaptive-crawler.ts\nURL: https://github.com/jina-ai/reader/blob/main/src/cloud-functions/adaptive-crawler.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 493) ---\n        // const indexObject: Record<string, string | number | undefined> = Object.create(indexProto);\n\n        // Object.assign(indexObject, {\n        //     usage1: 'https://r.jina.ai/YOUR_URL',\n        //     usage2: 'https://s.jina.ai/YOUR_SEARCH_QUERY',\n        //     homepage: 'https://jina.ai/reader',\n        //     sourceCode: 'https://github.com/jina-ai/reader',\n        // });\n\n        // if (user) {\n        //     indexObject[''] = undefined;\n"},{"type":"text","text":"Repository: jina-ai/reader\nPath: src/api/serp.ts\nURL: https://github.com/jina-ai/reader/blob/main/src/api/serp.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 70) ---\n        const indexObject: Record<string, string | number | undefined> = Object.create(indexProto);\n        Object.assign(indexObject, {\n            usage1: 'https://r.jina.ai/YOUR_URL',\n            usage2: 'https://s.jina.ai/YOUR_SEARCH_QUERY',\n            usage3: `${ctx.origin}/?q=YOUR_SEARCH_QUERY`,\n            homepage: 'https://jina.ai/reader',\n        });\n\n        if (auth && auth.user) {\n            indexObject[''] = undefined;\n            indexObject.authenticatedAs = `${auth.user.user_id} (${auth.user.full_name})`;\n"},{"type":"text","text":"Repository: OPPO-PersonalAI/OAgents\nPath: OAgents/example/oagents_deep_research/rag/loaders/jina_url_reader.py\nURL: https://github.com/OPPO-PersonalAI/OAgents/blob/main/OAgents/example/oagents_deep_research/rag/loaders/jina_url_reader.py\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 41) ---\n        **kwargs (Any): Additional keyword arguments, including proxies,\n            cookies, etc. It should align with the HTTP Header field and\n            value pairs listed in the reference.\n\n    References:\n        https://jina.ai/reader\n    \"\"\"\n\n    def __init__(\n        self,\n        api_key: Optional[str] = None,\n\n\n--- Snippet 2 (Line 56) ---\n    ) -> None:\n        api_key = api_key or os.getenv('JINA_API_KEY')\n        if not api_key:\n            warn(\n                \"JINA_API_KEY not set. This will result in a low rate limit \"\n                \"of Jina URL Reader. Get API key here: https://jina.ai/reader.\"\n            )\n\n        # if the following field not provided, it will be None\n"}],"sourceToolAssistantUUID":"3458d106-0b17-4b2d-963e-4ab9cdace764"}
{"parentUuid":"eb5c16e3-e782-495d-a6e9-de19b701bc0b","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_015rfYZSFv8rYxy3D5QUgR29","type":"tool_result","content":[{"type":"text","text":"Repository: FlowiseAI/Flowise\nPath: packages/components/nodes/documentloaders/Cheerio/Cheerio.ts\nURL: https://github.com/FlowiseAI/Flowise/blob/main/packages/components/nodes/documentloaders/Cheerio/Cheerio.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { TextSplitter } from 'langchain/text_splitter'\nimport { omit } from 'lodash'\nimport { CheerioWebBaseLoader, WebBaseLoaderParams } from '@langchain/community/document_loaders/web/cheerio'\nimport { test } from 'linkifyjs'\nimport { parse } from 'css-what'\nimport { SelectorType } from 'cheerio'\nimport { ICommonObject, INodeOutputsValue, IDocument, INode, INodeData, INodeParams } from '../../../src/Interface'\nimport { handleEscapeCharacters, webCrawl, xmlScrape } from '../../../src/utils'\n\n\n--- Snippet 2 (Line 149) ---\n        async function cheerioLoader(url: string): Promise<any> {\n            try {\n                let docs: IDocument[] = []\n                if (url.endsWith('.pdf')) {\n                    if (process.env.DEBUG === 'true')\n                        options.logger.info(`[${orgId}]: CheerioWebBaseLoader does not support PDF files: ${url}`)\n                    return docs\n                }\n                const loader = new CheerioWebBaseLoader(url, params)\n                if (textSplitter) {\n                    docs = await loader.load()\n                    docs = await textSplitter.splitDocuments(docs)\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/cheerio.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/cheerio.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 8) ---\nimport { AsyncCaller } from \"@langchain/core/utils/async_caller\";\nimport { BaseDocumentLoader } from \"@langchain/core/document_loaders/base\";\nimport type { WebBaseLoaderParams, WebBaseLoader } from \"./html.js\";\n\n/**\n * Represents the parameters for configuring the CheerioWebBaseLoader. It\n * extends the WebBaseLoaderParams interface and adds additional parameters\n * specific to loading with Cheerio.\n */\nexport interface CheerioWebBaseLoaderParams extends WebBaseLoaderParams {\n  /**\n   * The selector to use to extract the text from the document. Defaults to\n   * \"body\".\n   */\n  selector?: SelectorType;\n\n\n--- Snippet 2 (Line 27) ---\n * DocumentLoader interface. It represents a document loader for loading\n * web-based documents using Cheerio.\n * @example\n * ```typescript\n * const loader = new CheerioWebBaseLoader(\"https://exampleurl.com\");\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/sitemap.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/sitemap.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document, DocumentInterface } from \"@langchain/core/documents\";\nimport { chunkArray } from \"@langchain/core/utils/chunk_array\";\nimport { CheerioWebBaseLoader, CheerioWebBaseLoaderParams } from \"./cheerio.js\";\n\n/**\n * Interface representing the parameters for initializing a SitemapLoader.\n * @interface SitemapLoaderParams\n * @extends CheerioWebBaseLoaderParams\n */\nexport interface SitemapLoaderParams extends CheerioWebBaseLoaderParams {\n  /**\n   * @property {(string | RegExp)[] | undefined} filterUrls - A list of regexes. Only URLs that match one of the filter URLs will be loaded.\n   * WARNING: The filter URLs are interpreted as regular expressions. Escape special characters if needed.\n   */\n  filterUrls?: (string | RegExp)[];\n\n\n--- Snippet 2 (Line 29) ---\n  priority?: string;\n};\n\nexport class SitemapLoader\n  extends CheerioWebBaseLoader\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/gitbook.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/gitbook.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport type { CheerioAPI } from \"cheerio\";\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * Interface representing the parameters for configuring the\n * GitbookLoader. It has an optional property shouldLoadAllPaths, which\n * indicates whether all paths should be loaded.\n\n\n--- Snippet 2 (Line 11) ---\n  shouldLoadAllPaths?: boolean;\n}\n\n/**\n * Class representing a document loader specifically designed for loading\n * documents from Gitbook. It extends the CheerioWebBaseLoader.\n */\nexport class GitbookLoader extends CheerioWebBaseLoader {\n  shouldLoadAllPaths = false;\n\n  private readonly baseUrl: string;\n\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/imsdb.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/imsdb.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * A class that extends the CheerioWebBaseLoader class. It represents a\n * loader for loading web pages from the IMSDB (Internet Movie Script\n * Database) website.\n */\nexport class IMSDBLoader extends CheerioWebBaseLoader {\n  constructor(public webPath: string) {\n    super(webPath);\n  }\n\n  /**\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/college_confidential.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/college_confidential.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * A document loader specifically designed for loading documents from the\n * College Confidential website. It extends the CheerioWebBaseLoader.\n * @example\n * ```typescript\n * const loader = new CollegeConfidentialLoader(\"https:exampleurl.com\");\n * const docs = await loader.load();\n * console.log({ docs });\n * ```\n */\nexport class CollegeConfidentialLoader extends CheerioWebBaseLoader {\n  constructor(webPath: string) {\n    super(webPath);\n  }\n\n  /**\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/hn.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/hn.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport type { CheerioAPI } from \"cheerio\";\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * A class that extends the CheerioWebBaseLoader class. It represents a\n * loader for loading web pages from the Hacker News website.\n */\nexport class HNLoader extends CheerioWebBaseLoader {\n  constructor(public webPath: string) {\n    super(webPath);\n  }\n\n  /**\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/document_loaders/cheerio_web.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/document_loaders/cheerio_web.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { CheerioWebBaseLoader } from \"@langchain/community/document_loaders/web/cheerio\";\n\nexport const run = async () => {\n  const loader = new CheerioWebBaseLoader(\n    \"https://news.ycombinator.com/item?id=34817881\"\n  );\n  const docs = await loader.load();\n  console.log({ docs });\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/use_cases/local_retrieval_qa/load_documents.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/use_cases/local_retrieval_qa/load_documents.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { CheerioWebBaseLoader } from \"@langchain/community/document_loaders/web/cheerio\";\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\nimport { HNSWLib } from \"@langchain/community/vectorstores/hnswlib\";\nimport { HuggingFaceTransformersEmbeddings } from \"@langchain/community/embeddings/huggingface_transformers\";\n\nconst loader = new CheerioWebBaseLoader(\n  \"https://lilianweng.github.io/posts/2023-06-23-agent/\"\n);\nconst docs = await loader.load();\n\nconst splitter = new RecursiveCharacterTextSplitter({\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/use_cases/local_retrieval_qa/chain.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/use_cases/local_retrieval_qa/chain.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { CheerioWebBaseLoader } from \"@langchain/community/document_loaders/web/cheerio\";\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\nimport { HNSWLib } from \"@langchain/community/vectorstores/hnswlib\";\nimport { Ollama } from \"@langchain/ollama\";\nimport { HuggingFaceTransformersEmbeddings } from \"@langchain/community/embeddings/huggingface_transformers\";\nimport { formatDocumentsAsString } from \"@langchain/classic/util/document\";\n\n\n--- Snippet 2 (Line 9) ---\n  RunnableSequence,\n  RunnablePassthrough,\n} from \"@langchain/core/runnables\";\nimport { StringOutputParser } from \"@langchain/core/output_parsers\";\n\nconst loader = new CheerioWebBaseLoader(\n  \"https://lilianweng.github.io/posts/2023-06-23-agent/\"\n);\nconst docs = await loader.load();\n\nconst splitter = new RecursiveCharacterTextSplitter({\n"}]}]},"uuid":"04c0f715-0651-48f5-ae63-b3ef89645b24","timestamp":"2026-01-12T23:30:51.744Z","toolUseResult":[{"type":"text","text":"Repository: FlowiseAI/Flowise\nPath: packages/components/nodes/documentloaders/Cheerio/Cheerio.ts\nURL: https://github.com/FlowiseAI/Flowise/blob/main/packages/components/nodes/documentloaders/Cheerio/Cheerio.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { TextSplitter } from 'langchain/text_splitter'\nimport { omit } from 'lodash'\nimport { CheerioWebBaseLoader, WebBaseLoaderParams } from '@langchain/community/document_loaders/web/cheerio'\nimport { test } from 'linkifyjs'\nimport { parse } from 'css-what'\nimport { SelectorType } from 'cheerio'\nimport { ICommonObject, INodeOutputsValue, IDocument, INode, INodeData, INodeParams } from '../../../src/Interface'\nimport { handleEscapeCharacters, webCrawl, xmlScrape } from '../../../src/utils'\n\n\n--- Snippet 2 (Line 149) ---\n        async function cheerioLoader(url: string): Promise<any> {\n            try {\n                let docs: IDocument[] = []\n                if (url.endsWith('.pdf')) {\n                    if (process.env.DEBUG === 'true')\n                        options.logger.info(`[${orgId}]: CheerioWebBaseLoader does not support PDF files: ${url}`)\n                    return docs\n                }\n                const loader = new CheerioWebBaseLoader(url, params)\n                if (textSplitter) {\n                    docs = await loader.load()\n                    docs = await textSplitter.splitDocuments(docs)\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/cheerio.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/cheerio.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 8) ---\nimport { AsyncCaller } from \"@langchain/core/utils/async_caller\";\nimport { BaseDocumentLoader } from \"@langchain/core/document_loaders/base\";\nimport type { WebBaseLoaderParams, WebBaseLoader } from \"./html.js\";\n\n/**\n * Represents the parameters for configuring the CheerioWebBaseLoader. It\n * extends the WebBaseLoaderParams interface and adds additional parameters\n * specific to loading with Cheerio.\n */\nexport interface CheerioWebBaseLoaderParams extends WebBaseLoaderParams {\n  /**\n   * The selector to use to extract the text from the document. Defaults to\n   * \"body\".\n   */\n  selector?: SelectorType;\n\n\n--- Snippet 2 (Line 27) ---\n * DocumentLoader interface. It represents a document loader for loading\n * web-based documents using Cheerio.\n * @example\n * ```typescript\n * const loader = new CheerioWebBaseLoader(\"https://exampleurl.com\");\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/sitemap.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/sitemap.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document, DocumentInterface } from \"@langchain/core/documents\";\nimport { chunkArray } from \"@langchain/core/utils/chunk_array\";\nimport { CheerioWebBaseLoader, CheerioWebBaseLoaderParams } from \"./cheerio.js\";\n\n/**\n * Interface representing the parameters for initializing a SitemapLoader.\n * @interface SitemapLoaderParams\n * @extends CheerioWebBaseLoaderParams\n */\nexport interface SitemapLoaderParams extends CheerioWebBaseLoaderParams {\n  /**\n   * @property {(string | RegExp)[] | undefined} filterUrls - A list of regexes. Only URLs that match one of the filter URLs will be loaded.\n   * WARNING: The filter URLs are interpreted as regular expressions. Escape special characters if needed.\n   */\n  filterUrls?: (string | RegExp)[];\n\n\n--- Snippet 2 (Line 29) ---\n  priority?: string;\n};\n\nexport class SitemapLoader\n  extends CheerioWebBaseLoader\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/gitbook.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/gitbook.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport type { CheerioAPI } from \"cheerio\";\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * Interface representing the parameters for configuring the\n * GitbookLoader. It has an optional property shouldLoadAllPaths, which\n * indicates whether all paths should be loaded.\n\n\n--- Snippet 2 (Line 11) ---\n  shouldLoadAllPaths?: boolean;\n}\n\n/**\n * Class representing a document loader specifically designed for loading\n * documents from Gitbook. It extends the CheerioWebBaseLoader.\n */\nexport class GitbookLoader extends CheerioWebBaseLoader {\n  shouldLoadAllPaths = false;\n\n  private readonly baseUrl: string;\n\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/imsdb.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/imsdb.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * A class that extends the CheerioWebBaseLoader class. It represents a\n * loader for loading web pages from the IMSDB (Internet Movie Script\n * Database) website.\n */\nexport class IMSDBLoader extends CheerioWebBaseLoader {\n  constructor(public webPath: string) {\n    super(webPath);\n  }\n\n  /**\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/college_confidential.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/college_confidential.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * A document loader specifically designed for loading documents from the\n * College Confidential website. It extends the CheerioWebBaseLoader.\n * @example\n * ```typescript\n * const loader = new CollegeConfidentialLoader(\"https:exampleurl.com\");\n * const docs = await loader.load();\n * console.log({ docs });\n * ```\n */\nexport class CollegeConfidentialLoader extends CheerioWebBaseLoader {\n  constructor(webPath: string) {\n    super(webPath);\n  }\n\n  /**\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/hn.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/hn.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport type { CheerioAPI } from \"cheerio\";\nimport { Document } from \"@langchain/core/documents\";\nimport { CheerioWebBaseLoader } from \"./cheerio.js\";\n\n/**\n * A class that extends the CheerioWebBaseLoader class. It represents a\n * loader for loading web pages from the Hacker News website.\n */\nexport class HNLoader extends CheerioWebBaseLoader {\n  constructor(public webPath: string) {\n    super(webPath);\n  }\n\n  /**\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/document_loaders/cheerio_web.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/document_loaders/cheerio_web.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { CheerioWebBaseLoader } from \"@langchain/community/document_loaders/web/cheerio\";\n\nexport const run = async () => {\n  const loader = new CheerioWebBaseLoader(\n    \"https://news.ycombinator.com/item?id=34817881\"\n  );\n  const docs = await loader.load();\n  console.log({ docs });\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/use_cases/local_retrieval_qa/load_documents.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/use_cases/local_retrieval_qa/load_documents.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { CheerioWebBaseLoader } from \"@langchain/community/document_loaders/web/cheerio\";\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\nimport { HNSWLib } from \"@langchain/community/vectorstores/hnswlib\";\nimport { HuggingFaceTransformersEmbeddings } from \"@langchain/community/embeddings/huggingface_transformers\";\n\nconst loader = new CheerioWebBaseLoader(\n  \"https://lilianweng.github.io/posts/2023-06-23-agent/\"\n);\nconst docs = await loader.load();\n\nconst splitter = new RecursiveCharacterTextSplitter({\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/use_cases/local_retrieval_qa/chain.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/use_cases/local_retrieval_qa/chain.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { CheerioWebBaseLoader } from \"@langchain/community/document_loaders/web/cheerio\";\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\nimport { HNSWLib } from \"@langchain/community/vectorstores/hnswlib\";\nimport { Ollama } from \"@langchain/ollama\";\nimport { HuggingFaceTransformersEmbeddings } from \"@langchain/community/embeddings/huggingface_transformers\";\nimport { formatDocumentsAsString } from \"@langchain/classic/util/document\";\n\n\n--- Snippet 2 (Line 9) ---\n  RunnableSequence,\n  RunnablePassthrough,\n} from \"@langchain/core/runnables\";\nimport { StringOutputParser } from \"@langchain/core/output_parsers\";\n\nconst loader = new CheerioWebBaseLoader(\n  \"https://lilianweng.github.io/posts/2023-06-23-agent/\"\n);\nconst docs = await loader.load();\n\nconst splitter = new RecursiveCharacterTextSplitter({\n"}],"sourceToolAssistantUUID":"eb5c16e3-e782-495d-a6e9-de19b701bc0b"}
{"parentUuid":"b9b4ac15-0d05-46ad-9737-e5b878b3679b","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01MTD859mpymanWnQtUpgeG2","type":"tool_result","content":[{"type":"text","text":"Repository: FlowiseAI/Flowise\nPath: packages/components/nodes/documentloaders/Puppeteer/Puppeteer.ts\nURL: https://github.com/FlowiseAI/Flowise/blob/main/packages/components/nodes/documentloaders/Puppeteer/Puppeteer.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Browser, Page, PuppeteerWebBaseLoader, PuppeteerWebBaseLoaderOptions } from '@langchain/community/document_loaders/web/puppeteer'\nimport { Document } from '@langchain/core/documents'\nimport { TextSplitter } from 'langchain/text_splitter'\nimport { test } from 'linkifyjs'\nimport { omit } from 'lodash'\nimport { PuppeteerLifeCycleEvent } from 'puppeteer'\n\n\n--- Snippet 2 (Line 182) ---\n            try {\n                let docs: Document[] = []\n\n                const executablePath = process.env.PUPPETEER_EXECUTABLE_PATH\n\n                const config: PuppeteerWebBaseLoaderOptions = {\n                    launchOptions: {\n                        args: ['--no-sandbox'],\n                        headless: 'new',\n                        executablePath: executablePath\n                    }\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/puppeteer.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/puppeteer.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 27) ---\nexport type PuppeteerEvaluate = (\n  page: Page,\n  browser: Browser\n) => Promise<string>;\n\nexport type PuppeteerWebBaseLoaderOptions = {\n  launchOptions?: PuppeteerLaunchOptions & ConnectOptions;\n  gotoOptions?: PuppeteerGotoOptions;\n  evaluate?: PuppeteerEvaluate;\n};\n\n\n\n--- Snippet 2 (Line 39) ---\n * Class that extends the BaseDocumentLoader class and implements the\n * DocumentLoader interface. It represents a document loader for scraping\n * web pages using Puppeteer.\n * @example\n * ```typescript\n * const loader = new PuppeteerWebBaseLoader(\"https:exampleurl.com\", {\n *   launchOptions: {\n *     headless: true,\n *   },\n"},{"type":"text","text":"Repository: Mintplex-Labs/anything-llm\nPath: collector/utils/extensions/WebsiteDepth/index.js\nURL: https://github.com/Mintplex-Labs/anything-llm/blob/master/collector/utils/extensions/WebsiteDepth/index.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nconst { v4 } = require(\"uuid\");\nconst {\n  PuppeteerWebBaseLoader,\n} = require(\"langchain/document_loaders/web/puppeteer\");\nconst { default: slugify } = require(\"slugify\");\nconst { parse } = require(\"node-html-parser\");\nconst { writeToServerDocuments } = require(\"../../files\");\nconst { tokenizeString } = require(\"../../tokenizer\");\n\n\n--- Snippet 2 (Line 44) ---\n  return Array.from(discoveredLinks);\n}\n\nasync function getPageLinks(url, baseUrl) {\n  try {\n    const loader = new PuppeteerWebBaseLoader(url, {\n      launchOptions: { headless: \"new\" },\n      gotoOptions: { waitUntil: \"networkidle2\" },\n    });\n    const docs = await loader.load();\n    const html = docs[0].pageContent;\n"},{"type":"text","text":"Repository: Mintplex-Labs/anything-llm\nPath: collector/processLink/convert/generic.js\nURL: https://github.com/Mintplex-Labs/anything-llm/blob/master/collector/processLink/convert/generic.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nconst { v4 } = require(\"uuid\");\nconst {\n  PuppeteerWebBaseLoader,\n} = require(\"langchain/document_loaders/web/puppeteer\");\nconst { writeToServerDocuments } = require(\"../../utils/files\");\nconst { tokenizeString } = require(\"../../utils/tokenizer\");\nconst { default: slugify } = require(\"slugify\");\nconst {\n\n\n--- Snippet 2 (Line 156) ---\n        \"Darwin Development Mode: Disabling headless mode to prevent Chromium from crashing.\"\n      );\n      launchConfig.headless = \"false\";\n    }\n\n    const loader = new PuppeteerWebBaseLoader(link, {\n      launchOptions: {\n        headless: launchConfig.headless,\n        ignoreHTTPSErrors: true,\n        args: runtimeSettings.get(\"browserLaunchArgs\"),\n      },\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/document_loaders/puppeteer_screenshot_web.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/document_loaders/puppeteer_screenshot_web.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { PuppeteerWebBaseLoader } from \"@langchain/community/document_loaders/web/puppeteer\";\n\nconst loaderWithOptions = new PuppeteerWebBaseLoader(\"https://langchain.com\", {\n  launchOptions: {\n    headless: true,\n  },\n  gotoOptions: {\n    waitUntil: \"domcontentloaded\",\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/document_loaders/puppeteer_web.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/document_loaders/puppeteer_web.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { PuppeteerWebBaseLoader } from \"@langchain/community/document_loaders/web/puppeteer\";\n\nconst loaderWithOptions = new PuppeteerWebBaseLoader(\n  \"https://www.tabnews.com.br/\",\n  {\n    launchOptions: {\n      headless: true,\n    },\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/tests/puppeteer.int.test.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/tests/puppeteer.int.test.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { expect, test } from \"@jest/globals\";\nimport { PuppeteerWebBaseLoader } from \"../web/puppeteer.js\";\n\ntest.skip(\"Test puppeteer web scraper loader\", async () => {\n  const loader = new PuppeteerWebBaseLoader(\"https://www.google.com/\");\n  const result = await loader.load();\n\n  expect(result).toBeDefined();\n  expect(result.length).toBe(1);\n}, 20_000);\n\ntest.skip(\"Test puppeteer web scraper loader with evaluate options\", async () => {\n  let nrTimesCalled = 0;\n  const loader = new PuppeteerWebBaseLoader(\"https://www.google.com/\", {\n    launchOptions: {\n      headless: true,\n      ignoreDefaultArgs: [\"--disable-extensions\"],\n    },\n    gotoOptions: {\n"},{"type":"text","text":"Repository: i-am-alice/2nd-devs\nPath: 12_web/12.ts\nURL: https://github.com/i-am-alice/2nd-devs/blob/main/12_web/12.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport * as fs from \"fs\";\nimport {NodeHtmlMarkdown} from \"node-html-markdown\";\nimport {Browser, Page, PuppeteerWebBaseLoader} from \"langchain/document_loaders/web/puppeteer\";\n\nconst loader = new PuppeteerWebBaseLoader(\"https://brain.overment.com\", {\n    launchOptions: {\n        headless: \"new\",\n    },\n    gotoOptions: {\n        waitUntil: \"domcontentloaded\",\n"},{"type":"text","text":"Repository: kartikm7/llocal\nPath: src/main/puppeteer.ts\nURL: https://github.com/kartikm7/llocal/blob/master/src/main/puppeteer.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { OllamaEmbeddings } from '@langchain/community/embeddings/ollama'\nimport { MemoryVectorStore } from 'langchain/vectorstores/memory'\n// import { load } from 'cheerio'\nimport { RecursiveCharacterTextSplitter } from 'langchain/text_splitter'\n// import { PuppeteerWebBaseLoader } from '@langchain/community/document_loaders/web/puppeteer'\nimport { Document } from '@langchain/core/documents'\nimport { loadWebsite } from '.'\nimport TurndownService from \"turndown\"\n// import natural from \"natural\";\n// import { removeStopwords } from \"stopword\";\n\n\n--- Snippet 2 (Line 38) ---\n  // // Join tokens back into a single string\n  // return tokens.join(\" \");\n  // }\n\n  // Function to scrape and clean content\n  // const loader = new PuppeteerWebBaseLoader(url, {\n  //   launchOptions: { headless: true },\n  //   gotoOptions: { waitUntil: 'domcontentloaded' },\n  //   async evaluate(page, browser): Promise<string> {\n  //     const html = await page.content()\n"},{"type":"text","text":"Repository: datastax/SwiftieGPT\nPath: scripts/loadDb.ts\nURL: https://github.com/datastax/SwiftieGPT/blob/main/scripts/loadDb.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { AstraDB } from \"@datastax/astra-db-ts\";\nimport { PuppeteerWebBaseLoader } from \"langchain/document_loaders/web/puppeteer\";\nimport OpenAI from \"openai\";\n\n\nimport {RecursiveCharacterTextSplitter} from \"langchain/text_splitter\";\nimport 'dotenv/config'\n\n\n--- Snippet 2 (Line 67) ---\n    }\n  }\n};\n\nconst scrapePage = async (url: string) => {\n  const loader = new PuppeteerWebBaseLoader(url, {\n    launchOptions: {\n      headless: true\n    },\n    gotoOptions: {\n      waitUntil: \"domcontentloaded\",\n"}]}]},"uuid":"48fa109b-e429-4f9d-bfd0-e51511d013a0","timestamp":"2026-01-12T23:30:51.969Z","toolUseResult":[{"type":"text","text":"Repository: FlowiseAI/Flowise\nPath: packages/components/nodes/documentloaders/Puppeteer/Puppeteer.ts\nURL: https://github.com/FlowiseAI/Flowise/blob/main/packages/components/nodes/documentloaders/Puppeteer/Puppeteer.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Browser, Page, PuppeteerWebBaseLoader, PuppeteerWebBaseLoaderOptions } from '@langchain/community/document_loaders/web/puppeteer'\nimport { Document } from '@langchain/core/documents'\nimport { TextSplitter } from 'langchain/text_splitter'\nimport { test } from 'linkifyjs'\nimport { omit } from 'lodash'\nimport { PuppeteerLifeCycleEvent } from 'puppeteer'\n\n\n--- Snippet 2 (Line 182) ---\n            try {\n                let docs: Document[] = []\n\n                const executablePath = process.env.PUPPETEER_EXECUTABLE_PATH\n\n                const config: PuppeteerWebBaseLoaderOptions = {\n                    launchOptions: {\n                        args: ['--no-sandbox'],\n                        headless: 'new',\n                        executablePath: executablePath\n                    }\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/web/puppeteer.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/web/puppeteer.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 27) ---\nexport type PuppeteerEvaluate = (\n  page: Page,\n  browser: Browser\n) => Promise<string>;\n\nexport type PuppeteerWebBaseLoaderOptions = {\n  launchOptions?: PuppeteerLaunchOptions & ConnectOptions;\n  gotoOptions?: PuppeteerGotoOptions;\n  evaluate?: PuppeteerEvaluate;\n};\n\n\n\n--- Snippet 2 (Line 39) ---\n * Class that extends the BaseDocumentLoader class and implements the\n * DocumentLoader interface. It represents a document loader for scraping\n * web pages using Puppeteer.\n * @example\n * ```typescript\n * const loader = new PuppeteerWebBaseLoader(\"https:exampleurl.com\", {\n *   launchOptions: {\n *     headless: true,\n *   },\n"},{"type":"text","text":"Repository: Mintplex-Labs/anything-llm\nPath: collector/utils/extensions/WebsiteDepth/index.js\nURL: https://github.com/Mintplex-Labs/anything-llm/blob/master/collector/utils/extensions/WebsiteDepth/index.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nconst { v4 } = require(\"uuid\");\nconst {\n  PuppeteerWebBaseLoader,\n} = require(\"langchain/document_loaders/web/puppeteer\");\nconst { default: slugify } = require(\"slugify\");\nconst { parse } = require(\"node-html-parser\");\nconst { writeToServerDocuments } = require(\"../../files\");\nconst { tokenizeString } = require(\"../../tokenizer\");\n\n\n--- Snippet 2 (Line 44) ---\n  return Array.from(discoveredLinks);\n}\n\nasync function getPageLinks(url, baseUrl) {\n  try {\n    const loader = new PuppeteerWebBaseLoader(url, {\n      launchOptions: { headless: \"new\" },\n      gotoOptions: { waitUntil: \"networkidle2\" },\n    });\n    const docs = await loader.load();\n    const html = docs[0].pageContent;\n"},{"type":"text","text":"Repository: Mintplex-Labs/anything-llm\nPath: collector/processLink/convert/generic.js\nURL: https://github.com/Mintplex-Labs/anything-llm/blob/master/collector/processLink/convert/generic.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nconst { v4 } = require(\"uuid\");\nconst {\n  PuppeteerWebBaseLoader,\n} = require(\"langchain/document_loaders/web/puppeteer\");\nconst { writeToServerDocuments } = require(\"../../utils/files\");\nconst { tokenizeString } = require(\"../../utils/tokenizer\");\nconst { default: slugify } = require(\"slugify\");\nconst {\n\n\n--- Snippet 2 (Line 156) ---\n        \"Darwin Development Mode: Disabling headless mode to prevent Chromium from crashing.\"\n      );\n      launchConfig.headless = \"false\";\n    }\n\n    const loader = new PuppeteerWebBaseLoader(link, {\n      launchOptions: {\n        headless: launchConfig.headless,\n        ignoreHTTPSErrors: true,\n        args: runtimeSettings.get(\"browserLaunchArgs\"),\n      },\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/document_loaders/puppeteer_screenshot_web.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/document_loaders/puppeteer_screenshot_web.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { PuppeteerWebBaseLoader } from \"@langchain/community/document_loaders/web/puppeteer\";\n\nconst loaderWithOptions = new PuppeteerWebBaseLoader(\"https://langchain.com\", {\n  launchOptions: {\n    headless: true,\n  },\n  gotoOptions: {\n    waitUntil: \"domcontentloaded\",\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: examples/src/langchain-classic/document_loaders/puppeteer_web.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/examples/src/langchain-classic/document_loaders/puppeteer_web.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { PuppeteerWebBaseLoader } from \"@langchain/community/document_loaders/web/puppeteer\";\n\nconst loaderWithOptions = new PuppeteerWebBaseLoader(\n  \"https://www.tabnews.com.br/\",\n  {\n    launchOptions: {\n      headless: true,\n    },\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/tests/puppeteer.int.test.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/tests/puppeteer.int.test.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { expect, test } from \"@jest/globals\";\nimport { PuppeteerWebBaseLoader } from \"../web/puppeteer.js\";\n\ntest.skip(\"Test puppeteer web scraper loader\", async () => {\n  const loader = new PuppeteerWebBaseLoader(\"https://www.google.com/\");\n  const result = await loader.load();\n\n  expect(result).toBeDefined();\n  expect(result.length).toBe(1);\n}, 20_000);\n\ntest.skip(\"Test puppeteer web scraper loader with evaluate options\", async () => {\n  let nrTimesCalled = 0;\n  const loader = new PuppeteerWebBaseLoader(\"https://www.google.com/\", {\n    launchOptions: {\n      headless: true,\n      ignoreDefaultArgs: [\"--disable-extensions\"],\n    },\n    gotoOptions: {\n"},{"type":"text","text":"Repository: i-am-alice/2nd-devs\nPath: 12_web/12.ts\nURL: https://github.com/i-am-alice/2nd-devs/blob/main/12_web/12.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport * as fs from \"fs\";\nimport {NodeHtmlMarkdown} from \"node-html-markdown\";\nimport {Browser, Page, PuppeteerWebBaseLoader} from \"langchain/document_loaders/web/puppeteer\";\n\nconst loader = new PuppeteerWebBaseLoader(\"https://brain.overment.com\", {\n    launchOptions: {\n        headless: \"new\",\n    },\n    gotoOptions: {\n        waitUntil: \"domcontentloaded\",\n"},{"type":"text","text":"Repository: kartikm7/llocal\nPath: src/main/puppeteer.ts\nURL: https://github.com/kartikm7/llocal/blob/master/src/main/puppeteer.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { OllamaEmbeddings } from '@langchain/community/embeddings/ollama'\nimport { MemoryVectorStore } from 'langchain/vectorstores/memory'\n// import { load } from 'cheerio'\nimport { RecursiveCharacterTextSplitter } from 'langchain/text_splitter'\n// import { PuppeteerWebBaseLoader } from '@langchain/community/document_loaders/web/puppeteer'\nimport { Document } from '@langchain/core/documents'\nimport { loadWebsite } from '.'\nimport TurndownService from \"turndown\"\n// import natural from \"natural\";\n// import { removeStopwords } from \"stopword\";\n\n\n--- Snippet 2 (Line 38) ---\n  // // Join tokens back into a single string\n  // return tokens.join(\" \");\n  // }\n\n  // Function to scrape and clean content\n  // const loader = new PuppeteerWebBaseLoader(url, {\n  //   launchOptions: { headless: true },\n  //   gotoOptions: { waitUntil: 'domcontentloaded' },\n  //   async evaluate(page, browser): Promise<string> {\n  //     const html = await page.content()\n"},{"type":"text","text":"Repository: datastax/SwiftieGPT\nPath: scripts/loadDb.ts\nURL: https://github.com/datastax/SwiftieGPT/blob/main/scripts/loadDb.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { AstraDB } from \"@datastax/astra-db-ts\";\nimport { PuppeteerWebBaseLoader } from \"langchain/document_loaders/web/puppeteer\";\nimport OpenAI from \"openai\";\n\n\nimport {RecursiveCharacterTextSplitter} from \"langchain/text_splitter\";\nimport 'dotenv/config'\n\n\n--- Snippet 2 (Line 67) ---\n    }\n  }\n};\n\nconst scrapePage = async (url: string) => {\n  const loader = new PuppeteerWebBaseLoader(url, {\n    launchOptions: {\n      headless: true\n    },\n    gotoOptions: {\n      waitUntil: \"domcontentloaded\",\n"}],"sourceToolAssistantUUID":"b9b4ac15-0d05-46ad-9737-e5b878b3679b"}
{"parentUuid":"16c86e78-9ac6-4485-add2-19d923f10848","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01J5xRkViiDXKoXAxrXUSpyC","type":"tool_result","content":[{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: crates/html-to-markdown-node/index.js\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/crates/html-to-markdown-node/index.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 69) ---\n    }\n  } else if (process.platform === 'android') {\n    if (process.arch === 'arm64') {\n      try {\n        return require('./html-to-markdown-node.android-arm64.node')\n      } catch (e) {\n        loadErrors.push(e)\n      }\n      try {\n        const binding = require('@kreuzberg/html-to-markdown-node-android-arm64')\n        const bindingPackageVersion = require('@kreuzberg/html-to-markdown-node-android-arm64/package.json').version\n        if (bindingPackageVersion !== '2.21.0' && process.env.NAPI_RS_ENFORCE_VERSION_CHECK && process.env.NAPI_RS_ENFORCE_VERSION_CHECK !== '0') {\n          throw new Error(`Native binding package version mismatch, expected 2.21.0 but got ${bindingPackageVersion}. You can reinstall dependencies to fix this issue.`)\n        }\n        return binding\n      } catch (e) {\n        loadErrors.push(e)\n      }\n    } else if (process.arch === 'arm') {\n      try {\n        return require('./html-to-markdown-node.android-arm-eabi.node')\n"},{"type":"text","text":"Repository: vercel-labs/just-bash\nPath: src/commands/html-to-markdown/html-to-markdown.ts\nURL: https://github.com/vercel-labs/just-bash/blob/main/src/commands/html-to-markdown/html-to-markdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n/**\n * html-to-markdown - Convert HTML to Markdown using TurndownService\n *\n * This is a non-standard command that converts HTML from stdin to Markdown.\n */\n\nimport TurndownService from \"turndown\";\nimport type { Command, CommandContext, ExecResult } from \"../../types.js\";\nimport { hasHelpFlag, showHelp, unknownOption } from \"../help.js\";\n\nconst htmlToMarkdownHelp = {\n  name: \"html-to-markdown\",\n  summary: \"convert HTML to Markdown (BashEnv extension)\",\n  usage: \"html-to-markdown [OPTION]... [FILE]\",\n  description: [\n    \"Convert HTML content to Markdown format using the turndown library.\",\n    \"This is a non-standard BashEnv extension command, not available in regular bash.\",\n    \"\",\n    \"Read HTML from FILE or standard input and output Markdown to standard output.\",\n    \"Commonly used with curl to convert web pages:\",\n    \"  curl -s https://example.com | html-to-markdown\",\n"},{"type":"text","text":"Repository: jaywcjlove/html-to-markdown-cli\nPath: packages/cli/src/cli.ts\nURL: https://github.com/jaywcjlove/html-to-markdown-cli/blob/main/packages/cli/src/cli.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 3) ---\nimport { fileURLToPath } from 'url';\nimport { createInterface } from \"node:readline\";\nimport minimist from 'minimist';\nimport fs from 'fs-extra';\nimport fetch from 'node-fetch';\nimport htm2md from '@wcj/html-to-markdown';\nimport { autoConf, AutoConfOption } from 'auto-config-loader';\n\nexport const isAbsoluteURL = (str: string) => /^[a-z][a-z0-9+.-]*:/.test(str);\n// can't find with import.meta.url because that would result in 'cli'\nconst filename = 'html-to-markdown';\n\nfunction outputHelp() {\n  console.log(' Usage: ' + filename + ' <URL|file path|-> [options] [--help|h] [--version|v]');\n  console.log('\\n Passing \"-\" as the first arg will take input from STDIN\\n\\n Options:');\n  console.log('');\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: examples/wasm-cloudflare/src/index.ts\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/examples/wasm-cloudflare/src/index.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { convert, initWasm, wasmReady, type WasmConversionOptions } from \"html-to-markdown-wasm\";\n\nexport default {\n  async fetch(request: Request): Promise<Response> {\n    if (request.method === \"POST\") {\n      try {\n\n\n--- Snippet 2 (Line 35) ---\n\n    return new Response(\n      `\n<!DOCTYPE html>\n<html>\n  <head><title>html-to-markdown WASM on Cloudflare Workers</title></head>\n  <body>\n    <h1>html-to-markdown-wasm + Cloudflare Workers</h1>\n    <p>Send a POST request with HTML to convert it to Markdown.</p>\n    <pre>curl -X POST http://localhost:8787/ -H \"Content-Type: text/html\" -d \"&lt;h1&gt;Hello&lt;/h1&gt;\"</pre>\n  </body>\n</html>\n      `.trim(),\n"},{"type":"text","text":"Repository: vercel-labs/just-bash\nPath: src/commands/registry.ts\nURL: https://github.com/vercel-labs/just-bash/blob/main/src/commands/registry.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 76) ---\n  | \"expr\"\n  | \"md5sum\"\n  | \"sha1sum\"\n  | \"sha256sum\"\n  | \"file\"\n  | \"html-to-markdown\"\n  | \"help\"\n  | \"which\"\n  | \"tac\"\n  | \"hostname\"\n  | \"od\"\n\n\n--- Snippet 2 (Line 391) ---\n    load: async () => (await import(\"./file/file.js\")).fileCommand,\n  },\n\n  // HTML processing\n  {\n    name: \"html-to-markdown\",\n    load: async () =>\n      (await import(\"./html-to-markdown/html-to-markdown.js\"))\n        .htmlToMarkdownCommand,\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: packages/typescript/src/cli.ts\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/packages/typescript/src/cli.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nimport {\n\tconvertJson as convertHtmlJson,\n\tconvertWithInlineImagesJson,\n\ttype JsConversionOptions,\n\ttype JsInlineImageConfig,\n} from \"@kreuzberg/html-to-markdown-node\";\n\nimport { convertStream, convertStreamWithInlineImages } from \"./index\";\n\nconst jsonReplacer = (_key: string, value: unknown): unknown => (typeof value === \"bigint\" ? Number(value) : value);\n\n\n\n--- Snippet 2 (Line 27) ---\n\tinlineImages?: boolean;\n\tinlineImageConfig?: JsInlineImageConfig;\n}\n\nfunction printUsage(): void {\n\tstdout.write(`html-to-markdown CLI\\n\\n`);\n\tstdout.write(`Usage:\\n`);\n\tstdout.write(`  html-to-markdown [--input <file>] [--output <file>] [--options '{...}'] [--inline-images]\\n\\n`);\n\tstdout.write(`Options:\\n`);\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: packages/typescript/src/index.ts\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/packages/typescript/src/index.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 9) ---\n\ttype JsConversionOptions,\n\ttype JsHtmlExtraction,\n\ttype JsInlineImageConfig,\n\ttype JsMetadataConfig,\n\ttype JsMetadataExtraction,\n} from \"@kreuzberg/html-to-markdown-node\";\n\nexport * from \"@kreuzberg/html-to-markdown-node\";\n\nconst jsonReplacer = (_key: string, value: unknown): unknown => (typeof value === \"bigint\" ? Number(value) : value);\n\nconst toJson = (value: unknown): string | undefined => {\n\tif (value == null) {\n\n\n--- Snippet 2 (Line 101) ---\n * @param metadataConfig Optional metadata extraction configuration\n * @returns Object with converted markdown and extracted metadata\n *\n * @example\n * ```ts\n * import { convertWithMetadata } from 'html-to-markdown';\n *\n"},{"type":"text","text":"Repository: harlan-zw/mdream\nPath: packages/vite/src/plugin.ts\nURL: https://github.com/harlan-zw/mdream/blob/main/packages/vite/src/plugin.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 19) ---\n  const options = { ...DEFAULT_OPTIONS, ...userOptions }\n  const markdownCache = new Map<string, CacheEntry>()\n\n  function log(message: string) {\n    if (options.verbose) {\n      console.log(`[vite-html-to-markdown] ${message}`)\n    }\n  }\n\n  function isValidCache(entry: CacheEntry): boolean {\n    return Date.now() - entry.timestamp < entry.ttl\n\n\n--- Snippet 2 (Line 234) ---\n      }\n    }\n  }\n\n  return {\n    name: 'vite-html-to-markdown',\n\n    // Development server integration - intercept .md requests or Accept header markdown requests\n    configureServer(server) {\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: tools/profile_visitor.js\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/tools/profile_visitor.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n#!/usr/bin/env node\n/**\n * Profile visitor callback overhead in html-to-markdown Node.js binding.\n *\n * Measures:\n *   - ThreadsafeFunction callback overhead\n *   - V8 GC impact of visitor callbacks\n *   - Context marshalling cost\n\n\n--- Snippet 2 (Line 24) ---\n  htmlToMarkdown = require(\n    path.join(__dirname, \"../packages/typescript/dist/index.js\")\n  );\n} catch {\n  try {\n    htmlToMarkdown = require(\"html-to-markdown\");\n  } catch (e) {\n    console.error(\"Error: Could not load html-to-markdown module\");\n    console.error(\"Make sure to build with: cd packages/typescript && pnpm install && pnpm build\");\n    process.exit(1);\n  }\n}\n"},{"type":"text","text":"Repository: firecrawl/firecrawl\nPath: apps/api/src/scraper/scrapeURL/transformers/agent.ts\nURL: https://github.com/firecrawl/firecrawl/blob/main/apps/api/src/scraper/scrapeURL/transformers/agent.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document } from \"../../../controllers/v1/types\";\nimport { Meta } from \"..\";\nimport { logger } from \"../../../lib/logger\";\nimport { parseMarkdown } from \"../../../lib/html-to-markdown\";\nimport { smartScrape, SmartScrapeResult } from \"../lib/smartScrape\";\nimport { hasFormatOfType } from \"../../../lib/format-utils\";\n\nexport async function performAgent(\n  meta: Meta,\n"}]}]},"uuid":"0141705a-958b-4e6f-b2cd-d6e473769022","timestamp":"2026-01-12T23:30:52.223Z","toolUseResult":[{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: crates/html-to-markdown-node/index.js\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/crates/html-to-markdown-node/index.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 69) ---\n    }\n  } else if (process.platform === 'android') {\n    if (process.arch === 'arm64') {\n      try {\n        return require('./html-to-markdown-node.android-arm64.node')\n      } catch (e) {\n        loadErrors.push(e)\n      }\n      try {\n        const binding = require('@kreuzberg/html-to-markdown-node-android-arm64')\n        const bindingPackageVersion = require('@kreuzberg/html-to-markdown-node-android-arm64/package.json').version\n        if (bindingPackageVersion !== '2.21.0' && process.env.NAPI_RS_ENFORCE_VERSION_CHECK && process.env.NAPI_RS_ENFORCE_VERSION_CHECK !== '0') {\n          throw new Error(`Native binding package version mismatch, expected 2.21.0 but got ${bindingPackageVersion}. You can reinstall dependencies to fix this issue.`)\n        }\n        return binding\n      } catch (e) {\n        loadErrors.push(e)\n      }\n    } else if (process.arch === 'arm') {\n      try {\n        return require('./html-to-markdown-node.android-arm-eabi.node')\n"},{"type":"text","text":"Repository: vercel-labs/just-bash\nPath: src/commands/html-to-markdown/html-to-markdown.ts\nURL: https://github.com/vercel-labs/just-bash/blob/main/src/commands/html-to-markdown/html-to-markdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n/**\n * html-to-markdown - Convert HTML to Markdown using TurndownService\n *\n * This is a non-standard command that converts HTML from stdin to Markdown.\n */\n\nimport TurndownService from \"turndown\";\nimport type { Command, CommandContext, ExecResult } from \"../../types.js\";\nimport { hasHelpFlag, showHelp, unknownOption } from \"../help.js\";\n\nconst htmlToMarkdownHelp = {\n  name: \"html-to-markdown\",\n  summary: \"convert HTML to Markdown (BashEnv extension)\",\n  usage: \"html-to-markdown [OPTION]... [FILE]\",\n  description: [\n    \"Convert HTML content to Markdown format using the turndown library.\",\n    \"This is a non-standard BashEnv extension command, not available in regular bash.\",\n    \"\",\n    \"Read HTML from FILE or standard input and output Markdown to standard output.\",\n    \"Commonly used with curl to convert web pages:\",\n    \"  curl -s https://example.com | html-to-markdown\",\n"},{"type":"text","text":"Repository: jaywcjlove/html-to-markdown-cli\nPath: packages/cli/src/cli.ts\nURL: https://github.com/jaywcjlove/html-to-markdown-cli/blob/main/packages/cli/src/cli.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 3) ---\nimport { fileURLToPath } from 'url';\nimport { createInterface } from \"node:readline\";\nimport minimist from 'minimist';\nimport fs from 'fs-extra';\nimport fetch from 'node-fetch';\nimport htm2md from '@wcj/html-to-markdown';\nimport { autoConf, AutoConfOption } from 'auto-config-loader';\n\nexport const isAbsoluteURL = (str: string) => /^[a-z][a-z0-9+.-]*:/.test(str);\n// can't find with import.meta.url because that would result in 'cli'\nconst filename = 'html-to-markdown';\n\nfunction outputHelp() {\n  console.log(' Usage: ' + filename + ' <URL|file path|-> [options] [--help|h] [--version|v]');\n  console.log('\\n Passing \"-\" as the first arg will take input from STDIN\\n\\n Options:');\n  console.log('');\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: examples/wasm-cloudflare/src/index.ts\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/examples/wasm-cloudflare/src/index.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { convert, initWasm, wasmReady, type WasmConversionOptions } from \"html-to-markdown-wasm\";\n\nexport default {\n  async fetch(request: Request): Promise<Response> {\n    if (request.method === \"POST\") {\n      try {\n\n\n--- Snippet 2 (Line 35) ---\n\n    return new Response(\n      `\n<!DOCTYPE html>\n<html>\n  <head><title>html-to-markdown WASM on Cloudflare Workers</title></head>\n  <body>\n    <h1>html-to-markdown-wasm + Cloudflare Workers</h1>\n    <p>Send a POST request with HTML to convert it to Markdown.</p>\n    <pre>curl -X POST http://localhost:8787/ -H \"Content-Type: text/html\" -d \"&lt;h1&gt;Hello&lt;/h1&gt;\"</pre>\n  </body>\n</html>\n      `.trim(),\n"},{"type":"text","text":"Repository: vercel-labs/just-bash\nPath: src/commands/registry.ts\nURL: https://github.com/vercel-labs/just-bash/blob/main/src/commands/registry.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 76) ---\n  | \"expr\"\n  | \"md5sum\"\n  | \"sha1sum\"\n  | \"sha256sum\"\n  | \"file\"\n  | \"html-to-markdown\"\n  | \"help\"\n  | \"which\"\n  | \"tac\"\n  | \"hostname\"\n  | \"od\"\n\n\n--- Snippet 2 (Line 391) ---\n    load: async () => (await import(\"./file/file.js\")).fileCommand,\n  },\n\n  // HTML processing\n  {\n    name: \"html-to-markdown\",\n    load: async () =>\n      (await import(\"./html-to-markdown/html-to-markdown.js\"))\n        .htmlToMarkdownCommand,\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: packages/typescript/src/cli.ts\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/packages/typescript/src/cli.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nimport {\n\tconvertJson as convertHtmlJson,\n\tconvertWithInlineImagesJson,\n\ttype JsConversionOptions,\n\ttype JsInlineImageConfig,\n} from \"@kreuzberg/html-to-markdown-node\";\n\nimport { convertStream, convertStreamWithInlineImages } from \"./index\";\n\nconst jsonReplacer = (_key: string, value: unknown): unknown => (typeof value === \"bigint\" ? Number(value) : value);\n\n\n\n--- Snippet 2 (Line 27) ---\n\tinlineImages?: boolean;\n\tinlineImageConfig?: JsInlineImageConfig;\n}\n\nfunction printUsage(): void {\n\tstdout.write(`html-to-markdown CLI\\n\\n`);\n\tstdout.write(`Usage:\\n`);\n\tstdout.write(`  html-to-markdown [--input <file>] [--output <file>] [--options '{...}'] [--inline-images]\\n\\n`);\n\tstdout.write(`Options:\\n`);\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: packages/typescript/src/index.ts\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/packages/typescript/src/index.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 9) ---\n\ttype JsConversionOptions,\n\ttype JsHtmlExtraction,\n\ttype JsInlineImageConfig,\n\ttype JsMetadataConfig,\n\ttype JsMetadataExtraction,\n} from \"@kreuzberg/html-to-markdown-node\";\n\nexport * from \"@kreuzberg/html-to-markdown-node\";\n\nconst jsonReplacer = (_key: string, value: unknown): unknown => (typeof value === \"bigint\" ? Number(value) : value);\n\nconst toJson = (value: unknown): string | undefined => {\n\tif (value == null) {\n\n\n--- Snippet 2 (Line 101) ---\n * @param metadataConfig Optional metadata extraction configuration\n * @returns Object with converted markdown and extracted metadata\n *\n * @example\n * ```ts\n * import { convertWithMetadata } from 'html-to-markdown';\n *\n"},{"type":"text","text":"Repository: harlan-zw/mdream\nPath: packages/vite/src/plugin.ts\nURL: https://github.com/harlan-zw/mdream/blob/main/packages/vite/src/plugin.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 19) ---\n  const options = { ...DEFAULT_OPTIONS, ...userOptions }\n  const markdownCache = new Map<string, CacheEntry>()\n\n  function log(message: string) {\n    if (options.verbose) {\n      console.log(`[vite-html-to-markdown] ${message}`)\n    }\n  }\n\n  function isValidCache(entry: CacheEntry): boolean {\n    return Date.now() - entry.timestamp < entry.ttl\n\n\n--- Snippet 2 (Line 234) ---\n      }\n    }\n  }\n\n  return {\n    name: 'vite-html-to-markdown',\n\n    // Development server integration - intercept .md requests or Accept header markdown requests\n    configureServer(server) {\n"},{"type":"text","text":"Repository: kreuzberg-dev/html-to-markdown\nPath: tools/profile_visitor.js\nURL: https://github.com/kreuzberg-dev/html-to-markdown/blob/main/tools/profile_visitor.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n#!/usr/bin/env node\n/**\n * Profile visitor callback overhead in html-to-markdown Node.js binding.\n *\n * Measures:\n *   - ThreadsafeFunction callback overhead\n *   - V8 GC impact of visitor callbacks\n *   - Context marshalling cost\n\n\n--- Snippet 2 (Line 24) ---\n  htmlToMarkdown = require(\n    path.join(__dirname, \"../packages/typescript/dist/index.js\")\n  );\n} catch {\n  try {\n    htmlToMarkdown = require(\"html-to-markdown\");\n  } catch (e) {\n    console.error(\"Error: Could not load html-to-markdown module\");\n    console.error(\"Make sure to build with: cd packages/typescript && pnpm install && pnpm build\");\n    process.exit(1);\n  }\n}\n"},{"type":"text","text":"Repository: firecrawl/firecrawl\nPath: apps/api/src/scraper/scrapeURL/transformers/agent.ts\nURL: https://github.com/firecrawl/firecrawl/blob/main/apps/api/src/scraper/scrapeURL/transformers/agent.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Document } from \"../../../controllers/v1/types\";\nimport { Meta } from \"..\";\nimport { logger } from \"../../../lib/logger\";\nimport { parseMarkdown } from \"../../../lib/html-to-markdown\";\nimport { smartScrape, SmartScrapeResult } from \"../lib/smartScrape\";\nimport { hasFormatOfType } from \"../../../lib/format-utils\";\n\nexport async function performAgent(\n  meta: Meta,\n"}],"sourceToolAssistantUUID":"16c86e78-9ac6-4485-add2-19d923f10848"}
{"parentUuid":"0141705a-958b-4e6f-b2cd-d6e473769022","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RQM2t3f5knmnFZ5yiD58hw","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me search for more specific patterns around these tools."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":21790,"cache_read_input_tokens":20384,"cache_creation":{"ephemeral_5m_input_tokens":21790,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MYKWJNf3zcKxxek9dC","type":"assistant","uuid":"60e10e6c-d64a-4c7c-8360-4e0516509ae1","timestamp":"2026-01-12T23:30:56.586Z"}
{"parentUuid":"60e10e6c-d64a-4c7c-8360-4e0516509ae1","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RQM2t3f5knmnFZ5yiD58hw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017pKJLt8gJYBWEJxyqVDM4J","name":"mcp__grep__searchGitHub","input":{"query":"turndownService.addRule","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":21790,"cache_read_input_tokens":20384,"cache_creation":{"ephemeral_5m_input_tokens":21790,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MYKWJNf3zcKxxek9dC","type":"assistant","uuid":"e1654257-c1da-4ebd-9b71-616cbe458da4","timestamp":"2026-01-12T23:30:57.351Z"}
{"parentUuid":"e1654257-c1da-4ebd-9b71-616cbe458da4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RQM2t3f5knmnFZ5yiD58hw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DQ4SZW3Prmxh88ehe2EQkT","name":"mcp__grep__searchGitHub","input":{"query":"NodeHtmlMarkdown","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":21790,"cache_read_input_tokens":20384,"cache_creation":{"ephemeral_5m_input_tokens":21790,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MYKWJNf3zcKxxek9dC","type":"assistant","uuid":"dc84dbdd-c514-4529-846d-9e586dae3b5e","timestamp":"2026-01-12T23:30:58.118Z"}
{"parentUuid":"dc84dbdd-c514-4529-846d-9e586dae3b5e","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RQM2t3f5knmnFZ5yiD58hw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01PzagRtxXiWQTDPD2KQLPes","name":"mcp__grep__searchGitHub","input":{"query":"html-to-text","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":21790,"cache_read_input_tokens":20384,"cache_creation":{"ephemeral_5m_input_tokens":21790,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MYKWJNf3zcKxxek9dC","type":"assistant","uuid":"7eef9bc4-5d87-4b21-abdc-b6c40516686c","timestamp":"2026-01-12T23:30:58.762Z"}
{"parentUuid":"7eef9bc4-5d87-4b21-abdc-b6c40516686c","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RQM2t3f5knmnFZ5yiD58hw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01PuT2WbgknN3ncoG1wNtkaD","name":"mcp__grep__searchGitHub","input":{"query":"isProbablyReaderable","language":["JavaScript","TypeScript"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":21790,"cache_read_input_tokens":20384,"cache_creation":{"ephemeral_5m_input_tokens":21790,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MYKWJNf3zcKxxek9dC","type":"assistant","uuid":"95b87a7f-a044-4741-88a4-be342e5c76ee","timestamp":"2026-01-12T23:30:59.408Z"}
{"parentUuid":"95b87a7f-a044-4741-88a4-be342e5c76ee","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RQM2t3f5knmnFZ5yiD58hw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01MjHrhJzkMVCeXuR4kgvzhd","name":"mcp__grep__searchGitHub","input":{"query":"(?s)Readability.*parse\\(\\).*textContent","language":["JavaScript","TypeScript"],"useRegexp":true}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":21790,"cache_read_input_tokens":20384,"cache_creation":{"ephemeral_5m_input_tokens":21790,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MYKWJNf3zcKxxek9dC","type":"assistant","uuid":"8c44f5f7-5445-4e53-939f-5bfdf9b8c579","timestamp":"2026-01-12T23:31:00.544Z"}
{"parentUuid":"e1654257-c1da-4ebd-9b71-616cbe458da4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_017pKJLt8gJYBWEJxyqVDM4J","type":"tool_result","content":[{"type":"text","text":"Repository: microsoft/azuredatastudio\nPath: src/sql/workbench/contrib/notebook/browser/htmlMarkdownConverter.ts\nURL: https://github.com/microsoft/azuredatastudio/blob/main/src/sql/workbench/contrib/notebook/browser/htmlMarkdownConverter.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 55) ---\n\t}\n\n\tprivate setTurndownOptions() {\n\t\tthis.turndownService.keep(['style']);\n\t\tthis.setTableTurndownOptions();\n\t\tthis.turndownService.addRule('pre', {\n\t\t\tfilter: 'pre',\n\t\t\treplacement: function (content, node) {\n\t\t\t\treturn '\\n```\\n' + node.textContent + '\\n```\\n';\n\t\t\t}\n\t\t});\n\t\tthis.turndownService.addRule('mark', {\n\t\t\tfilter: 'mark',\n\t\t\treplacement: (content, node) => {\n\t\t\t\treturn '<mark>' + content + '</mark>';\n\t\t\t}\n\t\t});\n\t\tthis.turndownService.addRule('underline', {\n\t\t\tfilter: ['u'],\n\t\t\treplacement: (content, node, options) => {\n\t\t\t\tif (!content.trim()) {\n"},{"type":"text","text":"Repository: zulip/zulip\nPath: web/src/compose_paste.ts\nURL: https://github.com/zulip/zulip/blob/main/web/src/compose_paste.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 289) ---\n        emDelimiter: \"*\",\n        codeBlockStyle: \"fenced\",\n        headingStyle: \"atx\",\n        br: \"\",\n    });\n    turndownService.addRule(\"style\", {\n        filter: \"style\",\n        replacement() {\n            return \"\";\n        },\n    });\n    turndownService.addRule(\"strikethrough\", {\n        filter: [\"del\", \"s\", \"strike\"],\n        replacement(content) {\n            return \"~~\" + content + \"~~\";\n        },\n    });\n    turndownService.addRule(\"links\", {\n        filter: [\"a\"],\n        replacement(content, node) {\n            assert(node instanceof HTMLAnchorElement);\n"},{"type":"text","text":"Repository: CherryHQ/cherry-studio\nPath: src/renderer/src/utils/markdownConverter.ts\nURL: https://github.com/CherryHQ/cherry-studio/blob/main/src/renderer/src/utils/markdownConverter.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 558) ---\n  }\n})\n\nturndownService.addRule('strikethrough', {\n  filter: ['del', 's'],\n  replacement: (content) => `~~${content}~~`\n})\n\nturndownService.addRule('underline', {\n  filter: ['u'],\n  replacement: (content) => `<u>${content}</u>`\n})\n\n// Custom rule to preserve <br> tags as literal text\nturndownService.addRule('br', {\n  filter: 'br',\n  replacement: () => '<br>'\n})\n\n// Custom rule to preserve YAML front matter\nturndownService.addRule('yamlFrontMatter', {\n"},{"type":"text","text":"Repository: docmost/docmost\nPath: apps/server/src/integrations/export/turndown-utils.ts\nURL: https://github.com/docmost/docmost/blob/main/apps/server/src/integrations/export/turndown-utils.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 28) ---\n  ]);\n  return turndownService.turndown(html).replaceAll('<br>', ' ');\n}\n\nfunction listParagraph(turndownService: TurndownService) {\n  turndownService.addRule('paragraph', {\n    filter: ['p'],\n    replacement: (content: any, node: HTMLInputElement) => {\n      if (node.parentElement?.nodeName === 'LI') {\n        return content;\n      }\n\n\n--- Snippet 2 (Line 41) ---\n    },\n  });\n}\n\nfunction callout(turndownService: TurndownService) {\n  turndownService.addRule('callout', {\n    filter: function (node: HTMLInputElement) {\n      return (\n        node.nodeName === 'DIV' && node.getAttribute('data-type') === 'callout'\n"},{"type":"text","text":"Repository: obsidianmd/obsidian-clipper\nPath: src/utils/markdown-converter.ts\nURL: https://github.com/obsidianmd/obsidian-clipper/blob/main/src/utils/markdown-converter.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 36) ---\n\t\tcodeBlockStyle: 'fenced',\n\t\temDelimiter: '*',\n\t\tpreformattedCode: true,\n\t});\n\n\tturndownService.addRule('table', {\n\t\tfilter: 'table',\n\t\treplacement: function(content, node) {\n\t\t\tif (!(node instanceof HTMLTableElement)) return content;\n\n\t\t\t// Check if it's an ArXiv equation table\n\n\n--- Snippet 2 (Line 88) ---\n\t// Keep iframes, video, audio, sup, and sub elements\n\t// @ts-ignore\n\tturndownService.keep(['iframe', 'video', 'audio', 'sup', 'sub', 'svg', 'math']);\n\tturndownService.remove(['button']);\n\n\tturndownService.addRule('list', {\n\t\tfilter: ['ul', 'ol'],\n\t\treplacement: function (content: string, node: Node) {\n\t\t\t// Remove trailing newlines/spaces from content\n"},{"type":"text","text":"Repository: jina-ai/reader\nPath: src/services/snapshot-formatter.ts\nURL: https://github.com/jina-ai/reader/blob/main/src/services/snapshot-formatter.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 49) ---\n\nconst gfmPlugin = require('turndown-plugin-gfm');\nconst highlightRegExp = /highlight-(?:text|source)-([a-z0-9]+)/;\n\nexport function highlightedCodeBlock(turndownService: TurndownService) {\n    turndownService.addRule('highlightedCodeBlock', {\n        filter: (node) => {\n            return (\n                node.nodeName === 'DIV' &&\n                node.firstChild?.nodeName === 'PRE' &&\n                highlightRegExp.test(node.className)\n\n\n--- Snippet 2 (Line 597) ---\n            turnDownService.addRule('remove-irrelevant', {\n                filter: ['meta', 'style', 'script', 'noscript', 'link', 'textarea', 'select'],\n                replacement: () => ''\n            });\n            turnDownService.addRule('truncate-svg', {\n                filter: 'svg' as any,\n                replacement: () => ''\n            });\n            turnDownService.addRule('title-as-h1', {\n"},{"type":"text","text":"Repository: akosbalasko/yarle\nPath: src/utils/turndown-service.ts\nURL: https://github.com/akosbalasko/yarle/blob/master/src/utils/turndown-service.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 37) ---\n    turndownService.addRule('span', spanRule);\n    turndownService.addRule('strikethrough', strikethroughRule);\n    turndownService.addRule('evernote task items', taskItemsRule);\n    turndownService.addRule('wikistyle links', wikiStyleLinksRule);\n    turndownService.addRule('images', imagesRule);\n    turndownService.addRule('list', taskListRule);\n    turndownService.addRule('italic', italicRule);\n    turndownService.addRule('underline', underlineRule);\n    turndownService.addRule('encrypt', encryptRule);\n    if (yarleOptions.outputFormat === OutputFormat.LogSeqMD) {\n        turndownService.addRule('logseq_hr', {\n                filter: ['hr'],\n                // tslint:disable-next-line:typedef\n                replacement(content: any) {\n                return '\\r  ---'; // this \\r is important, used to diff from \\n\n            },\n        });\n    }\n\n    if(yarleOptions.outputFormat === OutputFormat.Tana) {\n        turndownService.addRule('tanaSkipTableRule', {\n"},{"type":"text","text":"Repository: dice2o/BingGPT\nPath: preload.js\nURL: https://github.com/dice2o/BingGPT/blob/main/preload.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 338) ---\n\nconst markdownHandler = (element) => {\n  const turndownService = new TurndownService({\n    codeBlockStyle: 'fenced',\n  })\n  turndownService.addRule('numberLink', {\n    filter: 'sup',\n    replacement: (content) => {\n      return `<sup>[${content}]</sup>`\n    },\n  })\n  turndownService.addRule('textLink', {\n    filter: (node) => {\n      return node.classList.contains('tooltip-target')\n    },\n    replacement: (content) => {\n      return content\n    },\n  })\n  turndownService.addRule('learnMore', {\n    filter: (node) => {\n"},{"type":"text","text":"Repository: marktext/marktext\nPath: src/muya/lib/utils/turndownService.js\nURL: https://github.com/marktext/marktext/blob/develop/src/muya/lib/utils/turndownService.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 9) ---\n  turndownService.use(gfm)\n\n  // We need a extra strikethrough rule because the strikethrough rule in gfm is single `~`.\n  turndownService.addRule('strikethrough', {\n    filter: ['del', 's', 'strike'],\n    replacement (content) {\n      return '~~' + content + '~~'\n    }\n  })\n\n  turndownService.addRule('paragraph', {\n    filter: 'p',\n\n    replacement: function (content, node) {\n      const isTaskListItemParagraph = node.previousElementSibling && node.previousElementSibling.tagName === 'INPUT'\n\n      return isTaskListItemParagraph ? content + '\\n\\n' : '\\n\\n' + content + '\\n\\n'\n    }\n  })\n\n  turndownService.addRule('listItem', {\n"},{"type":"text","text":"Repository: redmine/redmine\nPath: app/javascript/controllers/quote_reply_controller.js\nURL: https://github.com/redmine/redmine/blob/master/app/javascript/controllers/quote_reply_controller.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 139) ---\n    const turndownService = new TurndownService({\n      codeBlockStyle: 'fenced',\n      headingStyle: 'atx'\n    });\n\n    turndownService.addRule('del', {\n      filter: ['del'],\n      replacement: content => `~~${content}~~`\n    });\n\n    turndownService.addRule('checkList', {\n      filter: node => {\n        return node.type === 'checkbox' && node.parentNode.nodeName === 'LI';\n      },\n      replacement: (content, node) => {\n        return node.checked ? '[x]' : '[ ]';\n"}]}]},"uuid":"66865c25-33c8-46ce-8c56-b2a4ea4f339f","timestamp":"2026-01-12T23:31:00.949Z","toolUseResult":[{"type":"text","text":"Repository: microsoft/azuredatastudio\nPath: src/sql/workbench/contrib/notebook/browser/htmlMarkdownConverter.ts\nURL: https://github.com/microsoft/azuredatastudio/blob/main/src/sql/workbench/contrib/notebook/browser/htmlMarkdownConverter.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 55) ---\n\t}\n\n\tprivate setTurndownOptions() {\n\t\tthis.turndownService.keep(['style']);\n\t\tthis.setTableTurndownOptions();\n\t\tthis.turndownService.addRule('pre', {\n\t\t\tfilter: 'pre',\n\t\t\treplacement: function (content, node) {\n\t\t\t\treturn '\\n```\\n' + node.textContent + '\\n```\\n';\n\t\t\t}\n\t\t});\n\t\tthis.turndownService.addRule('mark', {\n\t\t\tfilter: 'mark',\n\t\t\treplacement: (content, node) => {\n\t\t\t\treturn '<mark>' + content + '</mark>';\n\t\t\t}\n\t\t});\n\t\tthis.turndownService.addRule('underline', {\n\t\t\tfilter: ['u'],\n\t\t\treplacement: (content, node, options) => {\n\t\t\t\tif (!content.trim()) {\n"},{"type":"text","text":"Repository: zulip/zulip\nPath: web/src/compose_paste.ts\nURL: https://github.com/zulip/zulip/blob/main/web/src/compose_paste.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 289) ---\n        emDelimiter: \"*\",\n        codeBlockStyle: \"fenced\",\n        headingStyle: \"atx\",\n        br: \"\",\n    });\n    turndownService.addRule(\"style\", {\n        filter: \"style\",\n        replacement() {\n            return \"\";\n        },\n    });\n    turndownService.addRule(\"strikethrough\", {\n        filter: [\"del\", \"s\", \"strike\"],\n        replacement(content) {\n            return \"~~\" + content + \"~~\";\n        },\n    });\n    turndownService.addRule(\"links\", {\n        filter: [\"a\"],\n        replacement(content, node) {\n            assert(node instanceof HTMLAnchorElement);\n"},{"type":"text","text":"Repository: CherryHQ/cherry-studio\nPath: src/renderer/src/utils/markdownConverter.ts\nURL: https://github.com/CherryHQ/cherry-studio/blob/main/src/renderer/src/utils/markdownConverter.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 558) ---\n  }\n})\n\nturndownService.addRule('strikethrough', {\n  filter: ['del', 's'],\n  replacement: (content) => `~~${content}~~`\n})\n\nturndownService.addRule('underline', {\n  filter: ['u'],\n  replacement: (content) => `<u>${content}</u>`\n})\n\n// Custom rule to preserve <br> tags as literal text\nturndownService.addRule('br', {\n  filter: 'br',\n  replacement: () => '<br>'\n})\n\n// Custom rule to preserve YAML front matter\nturndownService.addRule('yamlFrontMatter', {\n"},{"type":"text","text":"Repository: docmost/docmost\nPath: apps/server/src/integrations/export/turndown-utils.ts\nURL: https://github.com/docmost/docmost/blob/main/apps/server/src/integrations/export/turndown-utils.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 28) ---\n  ]);\n  return turndownService.turndown(html).replaceAll('<br>', ' ');\n}\n\nfunction listParagraph(turndownService: TurndownService) {\n  turndownService.addRule('paragraph', {\n    filter: ['p'],\n    replacement: (content: any, node: HTMLInputElement) => {\n      if (node.parentElement?.nodeName === 'LI') {\n        return content;\n      }\n\n\n--- Snippet 2 (Line 41) ---\n    },\n  });\n}\n\nfunction callout(turndownService: TurndownService) {\n  turndownService.addRule('callout', {\n    filter: function (node: HTMLInputElement) {\n      return (\n        node.nodeName === 'DIV' && node.getAttribute('data-type') === 'callout'\n"},{"type":"text","text":"Repository: obsidianmd/obsidian-clipper\nPath: src/utils/markdown-converter.ts\nURL: https://github.com/obsidianmd/obsidian-clipper/blob/main/src/utils/markdown-converter.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 36) ---\n\t\tcodeBlockStyle: 'fenced',\n\t\temDelimiter: '*',\n\t\tpreformattedCode: true,\n\t});\n\n\tturndownService.addRule('table', {\n\t\tfilter: 'table',\n\t\treplacement: function(content, node) {\n\t\t\tif (!(node instanceof HTMLTableElement)) return content;\n\n\t\t\t// Check if it's an ArXiv equation table\n\n\n--- Snippet 2 (Line 88) ---\n\t// Keep iframes, video, audio, sup, and sub elements\n\t// @ts-ignore\n\tturndownService.keep(['iframe', 'video', 'audio', 'sup', 'sub', 'svg', 'math']);\n\tturndownService.remove(['button']);\n\n\tturndownService.addRule('list', {\n\t\tfilter: ['ul', 'ol'],\n\t\treplacement: function (content: string, node: Node) {\n\t\t\t// Remove trailing newlines/spaces from content\n"},{"type":"text","text":"Repository: jina-ai/reader\nPath: src/services/snapshot-formatter.ts\nURL: https://github.com/jina-ai/reader/blob/main/src/services/snapshot-formatter.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 49) ---\n\nconst gfmPlugin = require('turndown-plugin-gfm');\nconst highlightRegExp = /highlight-(?:text|source)-([a-z0-9]+)/;\n\nexport function highlightedCodeBlock(turndownService: TurndownService) {\n    turndownService.addRule('highlightedCodeBlock', {\n        filter: (node) => {\n            return (\n                node.nodeName === 'DIV' &&\n                node.firstChild?.nodeName === 'PRE' &&\n                highlightRegExp.test(node.className)\n\n\n--- Snippet 2 (Line 597) ---\n            turnDownService.addRule('remove-irrelevant', {\n                filter: ['meta', 'style', 'script', 'noscript', 'link', 'textarea', 'select'],\n                replacement: () => ''\n            });\n            turnDownService.addRule('truncate-svg', {\n                filter: 'svg' as any,\n                replacement: () => ''\n            });\n            turnDownService.addRule('title-as-h1', {\n"},{"type":"text","text":"Repository: akosbalasko/yarle\nPath: src/utils/turndown-service.ts\nURL: https://github.com/akosbalasko/yarle/blob/master/src/utils/turndown-service.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 37) ---\n    turndownService.addRule('span', spanRule);\n    turndownService.addRule('strikethrough', strikethroughRule);\n    turndownService.addRule('evernote task items', taskItemsRule);\n    turndownService.addRule('wikistyle links', wikiStyleLinksRule);\n    turndownService.addRule('images', imagesRule);\n    turndownService.addRule('list', taskListRule);\n    turndownService.addRule('italic', italicRule);\n    turndownService.addRule('underline', underlineRule);\n    turndownService.addRule('encrypt', encryptRule);\n    if (yarleOptions.outputFormat === OutputFormat.LogSeqMD) {\n        turndownService.addRule('logseq_hr', {\n                filter: ['hr'],\n                // tslint:disable-next-line:typedef\n                replacement(content: any) {\n                return '\\r  ---'; // this \\r is important, used to diff from \\n\n            },\n        });\n    }\n\n    if(yarleOptions.outputFormat === OutputFormat.Tana) {\n        turndownService.addRule('tanaSkipTableRule', {\n"},{"type":"text","text":"Repository: dice2o/BingGPT\nPath: preload.js\nURL: https://github.com/dice2o/BingGPT/blob/main/preload.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 338) ---\n\nconst markdownHandler = (element) => {\n  const turndownService = new TurndownService({\n    codeBlockStyle: 'fenced',\n  })\n  turndownService.addRule('numberLink', {\n    filter: 'sup',\n    replacement: (content) => {\n      return `<sup>[${content}]</sup>`\n    },\n  })\n  turndownService.addRule('textLink', {\n    filter: (node) => {\n      return node.classList.contains('tooltip-target')\n    },\n    replacement: (content) => {\n      return content\n    },\n  })\n  turndownService.addRule('learnMore', {\n    filter: (node) => {\n"},{"type":"text","text":"Repository: marktext/marktext\nPath: src/muya/lib/utils/turndownService.js\nURL: https://github.com/marktext/marktext/blob/develop/src/muya/lib/utils/turndownService.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 9) ---\n  turndownService.use(gfm)\n\n  // We need a extra strikethrough rule because the strikethrough rule in gfm is single `~`.\n  turndownService.addRule('strikethrough', {\n    filter: ['del', 's', 'strike'],\n    replacement (content) {\n      return '~~' + content + '~~'\n    }\n  })\n\n  turndownService.addRule('paragraph', {\n    filter: 'p',\n\n    replacement: function (content, node) {\n      const isTaskListItemParagraph = node.previousElementSibling && node.previousElementSibling.tagName === 'INPUT'\n\n      return isTaskListItemParagraph ? content + '\\n\\n' : '\\n\\n' + content + '\\n\\n'\n    }\n  })\n\n  turndownService.addRule('listItem', {\n"},{"type":"text","text":"Repository: redmine/redmine\nPath: app/javascript/controllers/quote_reply_controller.js\nURL: https://github.com/redmine/redmine/blob/master/app/javascript/controllers/quote_reply_controller.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 139) ---\n    const turndownService = new TurndownService({\n      codeBlockStyle: 'fenced',\n      headingStyle: 'atx'\n    });\n\n    turndownService.addRule('del', {\n      filter: ['del'],\n      replacement: content => `~~${content}~~`\n    });\n\n    turndownService.addRule('checkList', {\n      filter: node => {\n        return node.type === 'checkbox' && node.parentNode.nodeName === 'LI';\n      },\n      replacement: (content, node) => {\n        return node.checked ? '[x]' : '[ ]';\n"}],"sourceToolAssistantUUID":"e1654257-c1da-4ebd-9b71-616cbe458da4"}
{"parentUuid":"dc84dbdd-c514-4529-846d-9e586dae3b5e","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DQ4SZW3Prmxh88ehe2EQkT","type":"tool_result","content":[{"type":"text","text":"Repository: lobehub/lobe-chat\nPath: packages/web-crawler/src/utils/htmlToMarkdown.ts\nURL: https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport { Window } from 'happy-dom';\nimport { NodeHtmlMarkdown, type TranslatorConfigObject } from 'node-html-markdown';\n\nimport { FilterOptions } from '../type';\n\nconst cleanObj = <T extends object>(\n  obj: T,\n\n\n--- Snippet 2 (Line 53) ---\n          },\n        }\n      : {}\n  ) as TranslatorConfigObject;\n\n  const nodeHtmlMarkdown = new NodeHtmlMarkdown({}, customTranslators);\n\n  const content = nodeHtmlMarkdown.translate(htmlNode);\n\n  const result = {\n    author: parsedContent?.byline,\n    content,\n"},{"type":"text","text":"Repository: DefinitelyTyped/DefinitelyTyped\nPath: types/node/scripts/generate-docs/html-doc-processing.ts\nURL: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/node/scripts/generate-docs/html-doc-processing.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { NodeHtmlMarkdown, TranslatorConfigFactory, TranslatorConfigObject } from \"node-html-markdown\";\nimport { HTMLElement, Node } from \"node-html-parser\";\n\n/**\n * Gets previous sibling, can't use prev sibling dom APIs as not available...\n */\n\n\n--- Snippet 2 (Line 128) ---\n    input = input.replaceAll(/([^ ])\\n<em>/g, \"$1 \\n<em>\");\n\n    input = input.replaceAll(/language\\-[mc]js/g, \"language-js\");\n    // fixup breaking comments\n    input = input.replace(/\\/\\*(.*?)\\*\\//g, \"//$1\");\n    let output = NodeHtmlMarkdown.translate(input, {}, makeCustomTranslators(context));\n    // remove redundant escaping of `<` (currently only used in code blocks)\n    output = output.replaceAll(\"&#x3C;\", \"<\");\n    return output;\n"},{"type":"text","text":"Repository: FlowiseAI/Flowise\nPath: packages/components/nodes/textsplitters/HtmlToMarkdownTextSplitter/HtmlToMarkdownTextSplitter.ts\nURL: https://github.com/FlowiseAI/Flowise/blob/main/packages/components/nodes/textsplitters/HtmlToMarkdownTextSplitter/HtmlToMarkdownTextSplitter.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { INode, INodeData, INodeParams } from '../../../src/Interface'\nimport { getBaseClasses } from '../../../src/utils'\nimport { MarkdownTextSplitter, MarkdownTextSplitterParams } from 'langchain/text_splitter'\nimport { NodeHtmlMarkdown } from 'node-html-markdown'\n\nclass HtmlToMarkdownTextSplitter_TextSplitters implements INode {\n    label: string\n    name: string\n    version: number\n\n\n--- Snippet 2 (Line 63) ---\n            super(fields)\n        }\n    }\n    splitText(text: string): Promise<string[]> {\n        return new Promise((resolve) => {\n            const markdown = NodeHtmlMarkdown.translate(text)\n            super.splitText(markdown).then((result) => {\n                resolve(result)\n            })\n        })\n    }\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/Markdown/Markdown.node.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/Markdown/Markdown.node.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 7) ---\n\tINodeType,\n\tINodeTypeDescription,\n\tJsonObject,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes, deepCopy } from 'n8n-workflow';\nimport { NodeHtmlMarkdown } from 'node-html-markdown';\nimport { Converter } from 'showdown';\n\nexport class Markdown implements INodeType {\n\tdescription: INodeTypeDescription = {\n\t\tdisplayName: 'Markdown',\n\n\n--- Snippet 2 (Line 580) ---\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst html = this.getNodeParameter('html', i) as string;\n\n\t\t\t\t\tconst markdownFromHTML = NodeHtmlMarkdown.translate(html, markdownOptions);\n\n\t\t\t\t\tconst newItem = deepCopy(items[i].json);\n\t\t\t\t\tset(newItem, destinationKey, markdownFromHTML);\n"},{"type":"text","text":"Repository: continuedev/continue\nPath: core/context/providers/URLContextProvider.ts\nURL: https://github.com/continuedev/continue/blob/main/core/context/providers/URLContextProvider.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\nimport { NodeHtmlMarkdown } from \"node-html-markdown\";\n\nimport { BaseContextProvider } from \"../\";\nimport {\n  ContextItem,\n  ContextProviderDescription,\n\n\n--- Snippet 2 (Line 46) ---\n\n  const dom = new JSDOM(html);\n  let reader = new Readability(dom.window.document);\n  let article = reader.parse();\n  const content = article?.content || \"\";\n  const markdown = NodeHtmlMarkdown.translate(\n    content,\n    {},\n    undefined,\n    undefined,\n  );\n"},{"type":"text","text":"Repository: backstage/backstage\nPath: plugins/scaffolder-backend-module-confluence-to-markdown/src/actions/confluence/confluenceToMarkdown.ts\nURL: https://github.com/backstage/backstage/blob/master/plugins/scaffolder-backend-module-confluence-to-markdown/src/actions/confluence/confluenceToMarkdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 19) ---\nimport {\n  createTemplateAction,\n  fetchContents,\n} from '@backstage/plugin-scaffolder-node';\nimport { InputError, ConflictError } from '@backstage/errors';\nimport { NodeHtmlMarkdown } from 'node-html-markdown';\nimport fs from 'fs-extra';\nimport parseGitUrl from 'git-url-parse';\nimport YAML from 'yaml';\nimport {\n  readFileAsString,\n\n\n--- Snippet 2 (Line 164) ---\n\n        await fs.writeFile(repoFileDir, YAML.stringify(mkdocsFile));\n\n        // This grabs the confluence html and converts it to markdown and adds attachments\n        const html = getConfluenceDoc.results[0].body.export_view.value;\n        const markdownToPublish = NodeHtmlMarkdown.translate(html);\n        let newString: string = markdownToPublish;\n        productArray.forEach((product: string[]) => {\n"},{"type":"text","text":"Repository: Mintplex-Labs/anything-llm\nPath: server/utils/agents/aibitat/example/beginner-chat.js\nURL: https://github.com/Mintplex-Labs/anything-llm/blob/master/server/utils/agents/aibitat/example/beginner-chat.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n// You must execute this example from within the example folder.\nconst AIbitat = require(\"../index.js\");\nconst { cli } = require(\"../plugins/cli.js\");\nconst { NodeHtmlMarkdown } = require(\"node-html-markdown\");\nrequire(\"dotenv\").config({ path: `../../../../.env.development` });\n\nconst Agent = {\n  HUMAN: \"🧑\",\n  AI: \"🤖\",\n\n\n--- Snippet 2 (Line 24) ---\n    handler: async () => {\n      return await fetch(\n        \"https://raw.githubusercontent.com/wladiston/aibitat/main/README.md\"\n      )\n        .then((res) => res.text())\n        .then((html) => NodeHtmlMarkdown.translate(html))\n        .catch((e) => {\n          console.error(e.message);\n          return \"FAILED TO FETCH\";\n        });\n    },\n"},{"type":"text","text":"Repository: crosstype/node-html-markdown\nPath: src/main.ts\nURL: https://github.com/crosstype/node-html-markdown/blob/master/src/main.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { NodeHtmlMarkdownOptions } from './options';\nimport { TranslatorCollection, TranslatorConfigObject } from './translator';\nimport {\n  aTagTranslatorConfig, defaultBlockElements, defaultCodeBlockTranslators, defaultIgnoreElements, defaultOptions,\n  defaultTranslators, tableCellTranslatorConfig, tableRowTranslatorConfig, tableTranslatorConfig\n} from './config';\n\n\n--- Snippet 2 (Line 12) ---\n// region: Types\n/* ****************************************************************************************************************** */\n\nexport type FileCollection = { [fileName: string]: string }\ntype Options = Partial<NodeHtmlMarkdownOptions>\n\n// endregion\n\n\n/* ****************************************************************************************************************** */\n// region: NodeHtmlMarkdown (class)\n/* ****************************************************************************************************************** */\n\nexport class NodeHtmlMarkdown {\n"},{"type":"text","text":"Repository: wasp-lang/wasp\nPath: examples/ask-the-documents/src/scrape.ts\nURL: https://github.com/wasp-lang/wasp/blob/main/examples/ask-the-documents/src/scrape.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport axios from \"axios\";\nimport * as Cheerio from \"cheerio\";\nimport { NodeHtmlMarkdown } from \"node-html-markdown\";\n\nexport const getContent = createContentGetterWithCache();\n\nexport async function getLinksToScrape(startingUrl: string): Promise<{\n  links: string[];\n\n\n--- Snippet 2 (Line 93) ---\n    content: $(contentSelector).text(),\n    markdownContent: htmlToMarkdown($(contentSelector).html()),\n  };\n}\n\nconst nhm = new NodeHtmlMarkdown({\n  maxConsecutiveNewlines: 2,\n});\n\nfunction htmlToMarkdown(html: string | null): string {\n  if (!html) {\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/web/lib/highlights/createHighlight.ts\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/web/lib/highlights/createHighlight.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 12) ---\n  Highlight,\n  HighlightType,\n} from '../networking/fragments/highlightFragment'\nimport { removeHighlights } from './deleteHighlight'\nimport { ArticleMutations } from '../articleActions'\nimport { NodeHtmlMarkdown } from 'node-html-markdown'\n\ntype CreateHighlightInput = {\n  selection: SelectionAttributes\n  articleId: string\n  annotation?: string\n\n\n--- Snippet 2 (Line 35) ---\n\n/* ********************************************************* *\n * Re-use\n * If using it several times, creating an instance saves time\n * ********************************************************* */\nconst nhm = new NodeHtmlMarkdown(\n  /* options (optional) */ {},\n  /* customTransformers (optional) */ undefined,\n  /* customCodeBlockTranslators (optional) */ undefined\n"}]}]},"uuid":"ec6c5d04-3c17-4184-a54b-5492643bb597","timestamp":"2026-01-12T23:31:01.319Z","toolUseResult":[{"type":"text","text":"Repository: lobehub/lobe-chat\nPath: packages/web-crawler/src/utils/htmlToMarkdown.ts\nURL: https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport { Window } from 'happy-dom';\nimport { NodeHtmlMarkdown, type TranslatorConfigObject } from 'node-html-markdown';\n\nimport { FilterOptions } from '../type';\n\nconst cleanObj = <T extends object>(\n  obj: T,\n\n\n--- Snippet 2 (Line 53) ---\n          },\n        }\n      : {}\n  ) as TranslatorConfigObject;\n\n  const nodeHtmlMarkdown = new NodeHtmlMarkdown({}, customTranslators);\n\n  const content = nodeHtmlMarkdown.translate(htmlNode);\n\n  const result = {\n    author: parsedContent?.byline,\n    content,\n"},{"type":"text","text":"Repository: DefinitelyTyped/DefinitelyTyped\nPath: types/node/scripts/generate-docs/html-doc-processing.ts\nURL: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/node/scripts/generate-docs/html-doc-processing.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { NodeHtmlMarkdown, TranslatorConfigFactory, TranslatorConfigObject } from \"node-html-markdown\";\nimport { HTMLElement, Node } from \"node-html-parser\";\n\n/**\n * Gets previous sibling, can't use prev sibling dom APIs as not available...\n */\n\n\n--- Snippet 2 (Line 128) ---\n    input = input.replaceAll(/([^ ])\\n<em>/g, \"$1 \\n<em>\");\n\n    input = input.replaceAll(/language\\-[mc]js/g, \"language-js\");\n    // fixup breaking comments\n    input = input.replace(/\\/\\*(.*?)\\*\\//g, \"//$1\");\n    let output = NodeHtmlMarkdown.translate(input, {}, makeCustomTranslators(context));\n    // remove redundant escaping of `<` (currently only used in code blocks)\n    output = output.replaceAll(\"&#x3C;\", \"<\");\n    return output;\n"},{"type":"text","text":"Repository: FlowiseAI/Flowise\nPath: packages/components/nodes/textsplitters/HtmlToMarkdownTextSplitter/HtmlToMarkdownTextSplitter.ts\nURL: https://github.com/FlowiseAI/Flowise/blob/main/packages/components/nodes/textsplitters/HtmlToMarkdownTextSplitter/HtmlToMarkdownTextSplitter.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { INode, INodeData, INodeParams } from '../../../src/Interface'\nimport { getBaseClasses } from '../../../src/utils'\nimport { MarkdownTextSplitter, MarkdownTextSplitterParams } from 'langchain/text_splitter'\nimport { NodeHtmlMarkdown } from 'node-html-markdown'\n\nclass HtmlToMarkdownTextSplitter_TextSplitters implements INode {\n    label: string\n    name: string\n    version: number\n\n\n--- Snippet 2 (Line 63) ---\n            super(fields)\n        }\n    }\n    splitText(text: string): Promise<string[]> {\n        return new Promise((resolve) => {\n            const markdown = NodeHtmlMarkdown.translate(text)\n            super.splitText(markdown).then((result) => {\n                resolve(result)\n            })\n        })\n    }\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/Markdown/Markdown.node.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/Markdown/Markdown.node.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 7) ---\n\tINodeType,\n\tINodeTypeDescription,\n\tJsonObject,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes, deepCopy } from 'n8n-workflow';\nimport { NodeHtmlMarkdown } from 'node-html-markdown';\nimport { Converter } from 'showdown';\n\nexport class Markdown implements INodeType {\n\tdescription: INodeTypeDescription = {\n\t\tdisplayName: 'Markdown',\n\n\n--- Snippet 2 (Line 580) ---\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst html = this.getNodeParameter('html', i) as string;\n\n\t\t\t\t\tconst markdownFromHTML = NodeHtmlMarkdown.translate(html, markdownOptions);\n\n\t\t\t\t\tconst newItem = deepCopy(items[i].json);\n\t\t\t\t\tset(newItem, destinationKey, markdownFromHTML);\n"},{"type":"text","text":"Repository: continuedev/continue\nPath: core/context/providers/URLContextProvider.ts\nURL: https://github.com/continuedev/continue/blob/main/core/context/providers/URLContextProvider.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\nimport { NodeHtmlMarkdown } from \"node-html-markdown\";\n\nimport { BaseContextProvider } from \"../\";\nimport {\n  ContextItem,\n  ContextProviderDescription,\n\n\n--- Snippet 2 (Line 46) ---\n\n  const dom = new JSDOM(html);\n  let reader = new Readability(dom.window.document);\n  let article = reader.parse();\n  const content = article?.content || \"\";\n  const markdown = NodeHtmlMarkdown.translate(\n    content,\n    {},\n    undefined,\n    undefined,\n  );\n"},{"type":"text","text":"Repository: backstage/backstage\nPath: plugins/scaffolder-backend-module-confluence-to-markdown/src/actions/confluence/confluenceToMarkdown.ts\nURL: https://github.com/backstage/backstage/blob/master/plugins/scaffolder-backend-module-confluence-to-markdown/src/actions/confluence/confluenceToMarkdown.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 19) ---\nimport {\n  createTemplateAction,\n  fetchContents,\n} from '@backstage/plugin-scaffolder-node';\nimport { InputError, ConflictError } from '@backstage/errors';\nimport { NodeHtmlMarkdown } from 'node-html-markdown';\nimport fs from 'fs-extra';\nimport parseGitUrl from 'git-url-parse';\nimport YAML from 'yaml';\nimport {\n  readFileAsString,\n\n\n--- Snippet 2 (Line 164) ---\n\n        await fs.writeFile(repoFileDir, YAML.stringify(mkdocsFile));\n\n        // This grabs the confluence html and converts it to markdown and adds attachments\n        const html = getConfluenceDoc.results[0].body.export_view.value;\n        const markdownToPublish = NodeHtmlMarkdown.translate(html);\n        let newString: string = markdownToPublish;\n        productArray.forEach((product: string[]) => {\n"},{"type":"text","text":"Repository: Mintplex-Labs/anything-llm\nPath: server/utils/agents/aibitat/example/beginner-chat.js\nURL: https://github.com/Mintplex-Labs/anything-llm/blob/master/server/utils/agents/aibitat/example/beginner-chat.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n// You must execute this example from within the example folder.\nconst AIbitat = require(\"../index.js\");\nconst { cli } = require(\"../plugins/cli.js\");\nconst { NodeHtmlMarkdown } = require(\"node-html-markdown\");\nrequire(\"dotenv\").config({ path: `../../../../.env.development` });\n\nconst Agent = {\n  HUMAN: \"🧑\",\n  AI: \"🤖\",\n\n\n--- Snippet 2 (Line 24) ---\n    handler: async () => {\n      return await fetch(\n        \"https://raw.githubusercontent.com/wladiston/aibitat/main/README.md\"\n      )\n        .then((res) => res.text())\n        .then((html) => NodeHtmlMarkdown.translate(html))\n        .catch((e) => {\n          console.error(e.message);\n          return \"FAILED TO FETCH\";\n        });\n    },\n"},{"type":"text","text":"Repository: crosstype/node-html-markdown\nPath: src/main.ts\nURL: https://github.com/crosstype/node-html-markdown/blob/master/src/main.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { NodeHtmlMarkdownOptions } from './options';\nimport { TranslatorCollection, TranslatorConfigObject } from './translator';\nimport {\n  aTagTranslatorConfig, defaultBlockElements, defaultCodeBlockTranslators, defaultIgnoreElements, defaultOptions,\n  defaultTranslators, tableCellTranslatorConfig, tableRowTranslatorConfig, tableTranslatorConfig\n} from './config';\n\n\n--- Snippet 2 (Line 12) ---\n// region: Types\n/* ****************************************************************************************************************** */\n\nexport type FileCollection = { [fileName: string]: string }\ntype Options = Partial<NodeHtmlMarkdownOptions>\n\n// endregion\n\n\n/* ****************************************************************************************************************** */\n// region: NodeHtmlMarkdown (class)\n/* ****************************************************************************************************************** */\n\nexport class NodeHtmlMarkdown {\n"},{"type":"text","text":"Repository: wasp-lang/wasp\nPath: examples/ask-the-documents/src/scrape.ts\nURL: https://github.com/wasp-lang/wasp/blob/main/examples/ask-the-documents/src/scrape.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport axios from \"axios\";\nimport * as Cheerio from \"cheerio\";\nimport { NodeHtmlMarkdown } from \"node-html-markdown\";\n\nexport const getContent = createContentGetterWithCache();\n\nexport async function getLinksToScrape(startingUrl: string): Promise<{\n  links: string[];\n\n\n--- Snippet 2 (Line 93) ---\n    content: $(contentSelector).text(),\n    markdownContent: htmlToMarkdown($(contentSelector).html()),\n  };\n}\n\nconst nhm = new NodeHtmlMarkdown({\n  maxConsecutiveNewlines: 2,\n});\n\nfunction htmlToMarkdown(html: string | null): string {\n  if (!html) {\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/web/lib/highlights/createHighlight.ts\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/web/lib/highlights/createHighlight.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 12) ---\n  Highlight,\n  HighlightType,\n} from '../networking/fragments/highlightFragment'\nimport { removeHighlights } from './deleteHighlight'\nimport { ArticleMutations } from '../articleActions'\nimport { NodeHtmlMarkdown } from 'node-html-markdown'\n\ntype CreateHighlightInput = {\n  selection: SelectionAttributes\n  articleId: string\n  annotation?: string\n\n\n--- Snippet 2 (Line 35) ---\n\n/* ********************************************************* *\n * Re-use\n * If using it several times, creating an instance saves time\n * ********************************************************* */\nconst nhm = new NodeHtmlMarkdown(\n  /* options (optional) */ {},\n  /* customTransformers (optional) */ undefined,\n  /* customCodeBlockTranslators (optional) */ undefined\n"}],"sourceToolAssistantUUID":"dc84dbdd-c514-4529-846d-9e586dae3b5e"}
{"parentUuid":"7eef9bc4-5d87-4b21-abdc-b6c40516686c","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01PzagRtxXiWQTDPD2KQLPes","type":"tool_result","content":[{"type":"text","text":"Repository: forwardemail/email-templates\nPath: index.js\nURL: https://github.com/forwardemail/email-templates/blob/master/index.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nconst { isPromise } = require('util/types');\nconst I18N = require('@ladjs/i18n');\nconst _ = require('lodash');\nconst consolidate = require('@ladjs/consolidate');\nconst getPaths = require('get-paths');\nconst { convert } = require('html-to-text');\nconst juice = require('juice');\nconst nodemailer = require('nodemailer');\n\nlet previewEmail;\n\n\n\n--- Snippet 2 (Line 84) ---\n        // pass a custom render function if necessary\n        render: this.render.bind(this),\n        customRender: false,\n        // force text-only rendering of template (disregards template folder)\n        textOnly: false,\n        // <https://github.com/html-to-text/node-html-to-text>\n        htmlToText: {\n          selectors: [{ selector: 'img', format: 'skip' }]\n        },\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/fs/epub.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/fs/epub.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 91) ---\n  });\n  return { EPub };\n}\n\nasync function HtmlToTextImport() {\n  const { htmlToText } = await import(\"html-to-text\").catch(() => {\n    throw new Error(\n      \"Failed to load html-to-text. Please install it with eg. `npm install html-to-text`.\"\n    );\n  });\n  return { htmlToText };\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-text-cli/src/cli.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text-cli/src/cli.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport process from 'node:process';\n\nimport { handleArgv } from 'aspargvs';\nimport deepmerge from 'deepmerge';\nimport { htmlToText } from 'html-to-text';\n\nimport { version as httVersion } from '../../html-to-text/package.json';\nimport { version as cliVersion } from '../package.json';\n\n\nconst kebabToCamelCase = (str) => str\n  .replace(/-./g, x => x[1].toUpperCase());\n\n\n--- Snippet 2 (Line 26) ---\n\nUsage:\n  - send input HTML document to stdin;\n  - get plain text from stdout;\n  - use arguments to specify commands and options;\n  - refer to html-to-text package docs for all available options;\n  - all options except functions can be expressed in CLI args;\n  - below is the short summary of the args syntax;\n"},{"type":"text","text":"Repository: resend/react-email\nPath: packages/render/src/shared/options.ts\nURL: https://github.com/resend/react-email/blob/canary/packages/render/src/shared/options.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport type { HtmlToTextOptions } from 'html-to-text';\nimport type { pretty } from './utils/pretty';\nimport type { toPlainText } from './utils/to-plain-text';\n\nexport type Options = {\n  /**\n\n\n--- Snippet 2 (Line 21) ---\n      plainText?: true;\n      /**\n       * These are options you can pass down directly to the library we use for\n       * converting the rendered email's HTML into plain text.\n       *\n       * @see https://github.com/html-to-text/node-html-to-text\n       */\n      htmlToTextOptions?: HtmlToTextOptions;\n    }\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-md/src/html-to-md.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-md/src/html-to-md.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n\nimport { compile as compile_ } from '@html-to-text/base';\nimport * as genericFormatters from '@html-to-text/base/src/generic-formatters';\nimport { mergeDuplicatesPreferLast } from '@html-to-text/base/src/util';\nimport merge from 'deepmerge'; // default\n\nimport * as markdownFormatters from './md-formatters';\n\n// eslint-disable-next-line import/no-unassigned-import\nimport '@html-to-text/base/src/typedefs';\n\n\n/**\n * Default options.\n *\n\n\n--- Snippet 2 (Line 139) ---\n * @returns { string }                 Plain text string.\n * @static\n *\n * @example\n * const { convert } = require('html-to-text');\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-text/src/html-to-text.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/src/html-to-text.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n\nimport { compile as compile_ } from '@html-to-text/base';\nimport * as genericFormatters from '@html-to-text/base/src/generic-formatters';\nimport { get, mergeDuplicatesPreferLast } from '@html-to-text/base/src/util';\nimport merge from 'deepmerge'; // default\n\nimport * as textFormatters from './text-formatters';\n\n\n// eslint-disable-next-line import/no-unassigned-import\nimport '@html-to-text/base/src/typedefs';\n\n\n/**\n * Default options.\n *\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-text/rollup.config.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/rollup.config.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 4) ---\n\n/**\n * @type {import('rollup').RollupOptions}\n */\nmodule.exports = {\n  input: 'src/html-to-text.js',\n  output: [\n    { file: 'lib/html-to-text.mjs', format: 'es' },\n    { file: 'lib/html-to-text.cjs', format: 'cjs' },\n  ],\n  plugins: [\n    nodeResolve({ resolveOnly: ['@html-to-text/base'] })\n  ],\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: example/html-to-text.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/example/html-to-text.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { readFileSync } from 'fs';\n\nimport { htmlToText } from '../packages/html-to-text/src/html-to-text';\n// const { htmlToText } = require('../packages/html-to-text/lib/html-to-text'); // build it first\n\n\nconsole.log('From string:');\nconst text = htmlToText(\n  '<h1>Hello World</h1>',\n"},{"type":"text","text":"Repository: streetwriters/notesnook\nPath: apps/mobile/app/screens/settings/license-data.js\nURL: https://github.com/streetwriters/notesnook/blob/master/apps/mobile/app/screens/settings/license-data.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 347) ---\n    licenseType: \"BSD-2-Clause\",\n    author: \"Felix Boehm <me@feedic.com>\",\n    link: \"git://github.com/fb55/entities\"\n  },\n  {\n    name: \"html-to-text\",\n    licenseType: \"MIT\",\n    author: \"Malte Legenhausen legenhausen@werk85.de\",\n    link: \"git://github.com/html-to-text/node-html-to-text\"\n  },\n  {\n    name: \"phone\",\n    licenseType: \"MIT\",\n    author: \"AfterShip\",\n"},{"type":"text","text":"Repository: google-gemini/gemini-cli\nPath: packages/core/src/tools/web-fetch.ts\nURL: https://github.com/google-gemini/gemini-cli/blob/main/packages/core/src/tools/web-fetch.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 20) ---\nimport { getErrorMessage } from '../utils/errors.js';\nimport type { Config } from '../config/config.js';\nimport { ApprovalMode } from '../policy/types.js';\nimport { getResponseText } from '../utils/partUtils.js';\nimport { fetchWithTimeout, isPrivateIp } from '../utils/fetch.js';\nimport { convert } from 'html-to-text';\nimport {\n  logWebFetchFallbackAttempt,\n  WebFetchFallbackAttemptEvent,\n} from '../telemetry/index.js';\nimport { WEB_FETCH_TOOL_NAME } from './tool-names.js';\n\n\n--- Snippet 2 (Line 153) ---\n\n      const rawContent = await response.text();\n      const contentType = response.headers.get('content-type') || '';\n      let textContent: string;\n\n      // Only use html-to-text if content type is HTML, or if no content type is provided (assume HTML)\n      if (\n        contentType.toLowerCase().includes('text/html') ||\n        contentType === ''\n"}]}]},"uuid":"579a0cf9-4b44-4a36-bfc6-ac8952cdfe06","timestamp":"2026-01-12T23:31:01.517Z","toolUseResult":[{"type":"text","text":"Repository: forwardemail/email-templates\nPath: index.js\nURL: https://github.com/forwardemail/email-templates/blob/master/index.js\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 5) ---\nconst { isPromise } = require('util/types');\nconst I18N = require('@ladjs/i18n');\nconst _ = require('lodash');\nconst consolidate = require('@ladjs/consolidate');\nconst getPaths = require('get-paths');\nconst { convert } = require('html-to-text');\nconst juice = require('juice');\nconst nodemailer = require('nodemailer');\n\nlet previewEmail;\n\n\n\n--- Snippet 2 (Line 84) ---\n        // pass a custom render function if necessary\n        render: this.render.bind(this),\n        customRender: false,\n        // force text-only rendering of template (disregards template folder)\n        textOnly: false,\n        // <https://github.com/html-to-text/node-html-to-text>\n        htmlToText: {\n          selectors: [{ selector: 'img', format: 'skip' }]\n        },\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_loaders/fs/epub.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_loaders/fs/epub.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 91) ---\n  });\n  return { EPub };\n}\n\nasync function HtmlToTextImport() {\n  const { htmlToText } = await import(\"html-to-text\").catch(() => {\n    throw new Error(\n      \"Failed to load html-to-text. Please install it with eg. `npm install html-to-text`.\"\n    );\n  });\n  return { htmlToText };\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-text-cli/src/cli.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text-cli/src/cli.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport process from 'node:process';\n\nimport { handleArgv } from 'aspargvs';\nimport deepmerge from 'deepmerge';\nimport { htmlToText } from 'html-to-text';\n\nimport { version as httVersion } from '../../html-to-text/package.json';\nimport { version as cliVersion } from '../package.json';\n\n\nconst kebabToCamelCase = (str) => str\n  .replace(/-./g, x => x[1].toUpperCase());\n\n\n--- Snippet 2 (Line 26) ---\n\nUsage:\n  - send input HTML document to stdin;\n  - get plain text from stdout;\n  - use arguments to specify commands and options;\n  - refer to html-to-text package docs for all available options;\n  - all options except functions can be expressed in CLI args;\n  - below is the short summary of the args syntax;\n"},{"type":"text","text":"Repository: resend/react-email\nPath: packages/render/src/shared/options.ts\nURL: https://github.com/resend/react-email/blob/canary/packages/render/src/shared/options.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport type { HtmlToTextOptions } from 'html-to-text';\nimport type { pretty } from './utils/pretty';\nimport type { toPlainText } from './utils/to-plain-text';\n\nexport type Options = {\n  /**\n\n\n--- Snippet 2 (Line 21) ---\n      plainText?: true;\n      /**\n       * These are options you can pass down directly to the library we use for\n       * converting the rendered email's HTML into plain text.\n       *\n       * @see https://github.com/html-to-text/node-html-to-text\n       */\n      htmlToTextOptions?: HtmlToTextOptions;\n    }\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-md/src/html-to-md.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-md/src/html-to-md.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n\nimport { compile as compile_ } from '@html-to-text/base';\nimport * as genericFormatters from '@html-to-text/base/src/generic-formatters';\nimport { mergeDuplicatesPreferLast } from '@html-to-text/base/src/util';\nimport merge from 'deepmerge'; // default\n\nimport * as markdownFormatters from './md-formatters';\n\n// eslint-disable-next-line import/no-unassigned-import\nimport '@html-to-text/base/src/typedefs';\n\n\n/**\n * Default options.\n *\n\n\n--- Snippet 2 (Line 139) ---\n * @returns { string }                 Plain text string.\n * @static\n *\n * @example\n * const { convert } = require('html-to-text');\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-text/src/html-to-text.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/src/html-to-text.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n\nimport { compile as compile_ } from '@html-to-text/base';\nimport * as genericFormatters from '@html-to-text/base/src/generic-formatters';\nimport { get, mergeDuplicatesPreferLast } from '@html-to-text/base/src/util';\nimport merge from 'deepmerge'; // default\n\nimport * as textFormatters from './text-formatters';\n\n\n// eslint-disable-next-line import/no-unassigned-import\nimport '@html-to-text/base/src/typedefs';\n\n\n/**\n * Default options.\n *\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: packages/html-to-text/rollup.config.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/rollup.config.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 4) ---\n\n/**\n * @type {import('rollup').RollupOptions}\n */\nmodule.exports = {\n  input: 'src/html-to-text.js',\n  output: [\n    { file: 'lib/html-to-text.mjs', format: 'es' },\n    { file: 'lib/html-to-text.cjs', format: 'cjs' },\n  ],\n  plugins: [\n    nodeResolve({ resolveOnly: ['@html-to-text/base'] })\n  ],\n"},{"type":"text","text":"Repository: html-to-text/node-html-to-text\nPath: example/html-to-text.js\nURL: https://github.com/html-to-text/node-html-to-text/blob/master/example/html-to-text.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { readFileSync } from 'fs';\n\nimport { htmlToText } from '../packages/html-to-text/src/html-to-text';\n// const { htmlToText } = require('../packages/html-to-text/lib/html-to-text'); // build it first\n\n\nconsole.log('From string:');\nconst text = htmlToText(\n  '<h1>Hello World</h1>',\n"},{"type":"text","text":"Repository: streetwriters/notesnook\nPath: apps/mobile/app/screens/settings/license-data.js\nURL: https://github.com/streetwriters/notesnook/blob/master/apps/mobile/app/screens/settings/license-data.js\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 347) ---\n    licenseType: \"BSD-2-Clause\",\n    author: \"Felix Boehm <me@feedic.com>\",\n    link: \"git://github.com/fb55/entities\"\n  },\n  {\n    name: \"html-to-text\",\n    licenseType: \"MIT\",\n    author: \"Malte Legenhausen legenhausen@werk85.de\",\n    link: \"git://github.com/html-to-text/node-html-to-text\"\n  },\n  {\n    name: \"phone\",\n    licenseType: \"MIT\",\n    author: \"AfterShip\",\n"},{"type":"text","text":"Repository: google-gemini/gemini-cli\nPath: packages/core/src/tools/web-fetch.ts\nURL: https://github.com/google-gemini/gemini-cli/blob/main/packages/core/src/tools/web-fetch.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 20) ---\nimport { getErrorMessage } from '../utils/errors.js';\nimport type { Config } from '../config/config.js';\nimport { ApprovalMode } from '../policy/types.js';\nimport { getResponseText } from '../utils/partUtils.js';\nimport { fetchWithTimeout, isPrivateIp } from '../utils/fetch.js';\nimport { convert } from 'html-to-text';\nimport {\n  logWebFetchFallbackAttempt,\n  WebFetchFallbackAttemptEvent,\n} from '../telemetry/index.js';\nimport { WEB_FETCH_TOOL_NAME } from './tool-names.js';\n\n\n--- Snippet 2 (Line 153) ---\n\n      const rawContent = await response.text();\n      const contentType = response.headers.get('content-type') || '';\n      let textContent: string;\n\n      // Only use html-to-text if content type is HTML, or if no content type is provided (assume HTML)\n      if (\n        contentType.toLowerCase().includes('text/html') ||\n        contentType === ''\n"}],"sourceToolAssistantUUID":"7eef9bc4-5d87-4b21-abdc-b6c40516686c"}
{"parentUuid":"95b87a7f-a044-4741-88a4-be342e5c76ee","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01PuT2WbgknN3ncoG1wNtkaD","type":"tool_result","content":[{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/popup/src/App.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/popup/src/App.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 229) ---\n\t\t\t\ttype: 'SELECTED_FOLDER_SET',\n\t\t\t\tid: newFolderId,\n\t\t\t});\n\t\t}\n\n\t\tbridge().sendCommandToActiveTab({ name: 'isProbablyReaderable' });\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.focusNewTagInput_) {\n\t\t\tthis.focusNewTagInput_ = false;\n\n\n--- Snippet 2 (Line 440) ---\n\t\t\ttagDataListOptions.push(<option key={tag.id}>{tag.title}</option>);\n\t\t}\n\n\t\tlet simplifiedPageButtonLabel = 'Clip simplified page';\n\t\tlet simplifiedPageButtonTooltip = '';\n\t\tif (!this.props.isProbablyReaderable) {\n\t\t\tsimplifiedPageButtonLabel += ' ⚠️';\n\t\t\tsimplifiedPageButtonTooltip = 'It might not be possible to create a good simplified version of this page.\\nYou may want to clip the complete page instead.';\n\t\t}\n"},{"type":"text","text":"Repository: SillyTavern/SillyTavern\nPath: public/lib.js\nURL: https://github.com/SillyTavern/SillyTavern/blob/release/public/lib.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 9) ---\nimport localforage from 'localforage';\nimport Handlebars from 'handlebars';\nimport css from '@adobe/css-tools';\nimport Bowser from 'bowser';\nimport DiffMatchPatch from 'diff-match-patch';\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\nimport SVGInject from '@iconfu/svg-inject';\nimport showdown from 'showdown';\nimport moment from 'moment';\nimport seedrandom from 'seedrandom';\nimport * as Popper from '@popperjs/core';\n\n\n--- Snippet 2 (Line 88) ---\n    Handlebars,\n    css,\n    Bowser,\n    DiffMatchPatch,\n    Readability,\n    isProbablyReaderable,\n    SVGInject,\n    showdown,\n    moment,\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/generate-testcase.js\nURL: https://github.com/mozilla/readability/blob/main/test/generate-testcase.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 8) ---\nvar prettyPrint = require(\"./utils\").prettyPrint;\nvar http = require(\"http\");\nlet { parse: urlparse, fileURLToPath } = require(\"url\");\nvar htmltidy = require(\"htmltidy2\").tidy;\n\nvar { Readability, isProbablyReaderable } = require(\"../index\");\nvar JSDOMParser = require(\"../JSDOMParser\");\n\nvar FFX_UA =\n  \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:80.0) Gecko/20100101 Firefox/80.0\";\n\n\n\n--- Snippet 2 (Line 158) ---\n    ex.stack.forEach(console.log.bind(console));\n  }\n  // Use jsdom for isProbablyReaderable because it supports querySelectorAll\n  try {\n    var jsdomDoc = new JSDOM(source, {\n      url: uri,\n    }).window.document;\n    myReader = new Readability(jsdomDoc);\n    readerable = isProbablyReaderable(jsdomDoc);\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/test/test-isProbablyReaderable.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/test/test-isProbablyReaderable.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 4) ---\nchai.config.includeStack = true;\nvar expect = chai.expect;\n\nconst isOmnivore = process.env.IS_OMNIVORE;\nvar testPages = require(\"./utils\").getTestPages(isOmnivore);\nvar isProbablyReaderable = require(\"../index\").isProbablyReaderable;\n\ndescribe(\"isProbablyReaderable - test pages\", function () {\n  testPages.forEach(function (testPage) {\n    describe(testPage.dir, function () {\n      var doc = parseHTML(testPage.source).document;\n      var expected = testPage.expectedMetadata.readerable;\n      it(\"The result should \" + (expected ? \"\" : \"not \") + \"be readerable\", function () {\n        expect(isProbablyReaderable(doc)).eql(expected);\n      });\n    });\n  });\n});\n\ndescribe(\"isProbablyReaderable\", function () {\n  const makeDoc = (source) => parseHTML(source).document;\n"},{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/content_scripts/index.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/content_scripts/index.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 280) ---\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\treturn clippedContentResponse(article.title, article.body, getImageSizes(document), getAnchorNames(document));\n\n\t\t} else if (command.name === 'isProbablyReaderable') {\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst ok = isProbablyReaderable(documentForReadability());\n\t\t\treturn { name: 'isProbablyReaderable', value: ok };\n\n\t\t} else if (command.name === 'completePageHtml') {\n\n\t\t\tif (isPagePdf()) {\n\t\t\t\t// eslint-disable-next-line no-undef\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/test-isProbablyReaderable.js\nURL: https://github.com/mozilla/readability/blob/main/test/test-isProbablyReaderable.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 9) ---\nvar isProbablyReaderable = require(\"../index\").isProbablyReaderable;\n\ndescribe(\"isProbablyReaderable - test pages\", function () {\n  testPages.forEach(function (testPage) {\n    var uri = \"http://fakehost/test/page.html\";\n    describe(testPage.dir, function () {\n      var doc = new JSDOM(testPage.source, {\n        url: uri,\n      }).window.document;\n      var expected = testPage.expectedMetadata.readerable;\n      it(\n        \"The result should \" + (expected ? \"\" : \"not \") + \"be readerable\",\n        function () {\n          expect(isProbablyReaderable(doc)).eql(expected);\n        }\n      );\n    });\n  });\n});\n\ndescribe(\"isProbablyReaderable\", function () {\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/index.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/index.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nvar Readability = require(\"./Readability\");\nvar isProbablyReaderable = require(\"./Readability-readerable\");\n\nmodule.exports = {\n  Readability: Readability,\n  isProbablyReaderable: isProbablyReaderable\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/benchmarks/benchmarks.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/benchmarks/benchmarks.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nvar getTestPages = require(\"../test/utils\").getTestPages;\n\nvar { Readability, isProbablyReaderable } = require(\"../index\");\nvar JSDOMParser = require(\"../JSDOMParser\");\nvar { parseHTML } = require(\"linkedom\");\n\nvar referenceTestPages = [\n  \"002\",\n\n\n--- Snippet 2 (Line 49) ---\n    });\n  });\n});\n\nsuite(\"isProbablyReaderable perf\", function () {\n  set(\"iterations\", 1);\n  set(\"type\", \"static\");\n\n  testPages.forEach(function(testPage) {\n    var doc = parseHTML(testPage.source).document;\n    bench(testPage.dir + \" readability perf\", function() {\n      isProbablyReaderable(doc);\n"},{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/popup/src/index.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/popup/src/index.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 18) ---\n\t},\n\tfolders: [],\n\ttags: [],\n\tselectedFolderId: null,\n\tenv: 'prod',\n\tisProbablyReaderable: true,\n\tauthStatus: 'starting',\n};\n\nconst reduxMiddleware = store => next => async (action) => {\n\tconst result = next(action);\n\n\n--- Snippet 2 (Line 44) ---\n\t\tnewState.warning = action.text;\n\n\t} else if (action.type === 'IS_PROBABLY_READERABLE') {\n\n\t\tnewState = { ...state };\n\t\tnewState.isProbablyReaderable = action.value;\n\n\t} else if (action.type === 'CLIPPED_CONTENT_SET') {\n\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\n\nfunction canBeParsed(document) {\n  return isProbablyReaderable(document, {\n    minContentLength: 100\n  });\n}\n\nfunction parse(document) {\n"}]}]},"uuid":"76d480ae-e20a-4b90-ac58-a335d730edb8","timestamp":"2026-01-12T23:31:01.856Z","toolUseResult":[{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/popup/src/App.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/popup/src/App.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 229) ---\n\t\t\t\ttype: 'SELECTED_FOLDER_SET',\n\t\t\t\tid: newFolderId,\n\t\t\t});\n\t\t}\n\n\t\tbridge().sendCommandToActiveTab({ name: 'isProbablyReaderable' });\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.focusNewTagInput_) {\n\t\t\tthis.focusNewTagInput_ = false;\n\n\n--- Snippet 2 (Line 440) ---\n\t\t\ttagDataListOptions.push(<option key={tag.id}>{tag.title}</option>);\n\t\t}\n\n\t\tlet simplifiedPageButtonLabel = 'Clip simplified page';\n\t\tlet simplifiedPageButtonTooltip = '';\n\t\tif (!this.props.isProbablyReaderable) {\n\t\t\tsimplifiedPageButtonLabel += ' ⚠️';\n\t\t\tsimplifiedPageButtonTooltip = 'It might not be possible to create a good simplified version of this page.\\nYou may want to clip the complete page instead.';\n\t\t}\n"},{"type":"text","text":"Repository: SillyTavern/SillyTavern\nPath: public/lib.js\nURL: https://github.com/SillyTavern/SillyTavern/blob/release/public/lib.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 9) ---\nimport localforage from 'localforage';\nimport Handlebars from 'handlebars';\nimport css from '@adobe/css-tools';\nimport Bowser from 'bowser';\nimport DiffMatchPatch from 'diff-match-patch';\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\nimport SVGInject from '@iconfu/svg-inject';\nimport showdown from 'showdown';\nimport moment from 'moment';\nimport seedrandom from 'seedrandom';\nimport * as Popper from '@popperjs/core';\n\n\n--- Snippet 2 (Line 88) ---\n    Handlebars,\n    css,\n    Bowser,\n    DiffMatchPatch,\n    Readability,\n    isProbablyReaderable,\n    SVGInject,\n    showdown,\n    moment,\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/generate-testcase.js\nURL: https://github.com/mozilla/readability/blob/main/test/generate-testcase.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 8) ---\nvar prettyPrint = require(\"./utils\").prettyPrint;\nvar http = require(\"http\");\nlet { parse: urlparse, fileURLToPath } = require(\"url\");\nvar htmltidy = require(\"htmltidy2\").tidy;\n\nvar { Readability, isProbablyReaderable } = require(\"../index\");\nvar JSDOMParser = require(\"../JSDOMParser\");\n\nvar FFX_UA =\n  \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:80.0) Gecko/20100101 Firefox/80.0\";\n\n\n\n--- Snippet 2 (Line 158) ---\n    ex.stack.forEach(console.log.bind(console));\n  }\n  // Use jsdom for isProbablyReaderable because it supports querySelectorAll\n  try {\n    var jsdomDoc = new JSDOM(source, {\n      url: uri,\n    }).window.document;\n    myReader = new Readability(jsdomDoc);\n    readerable = isProbablyReaderable(jsdomDoc);\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/test/test-isProbablyReaderable.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/test/test-isProbablyReaderable.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 4) ---\nchai.config.includeStack = true;\nvar expect = chai.expect;\n\nconst isOmnivore = process.env.IS_OMNIVORE;\nvar testPages = require(\"./utils\").getTestPages(isOmnivore);\nvar isProbablyReaderable = require(\"../index\").isProbablyReaderable;\n\ndescribe(\"isProbablyReaderable - test pages\", function () {\n  testPages.forEach(function (testPage) {\n    describe(testPage.dir, function () {\n      var doc = parseHTML(testPage.source).document;\n      var expected = testPage.expectedMetadata.readerable;\n      it(\"The result should \" + (expected ? \"\" : \"not \") + \"be readerable\", function () {\n        expect(isProbablyReaderable(doc)).eql(expected);\n      });\n    });\n  });\n});\n\ndescribe(\"isProbablyReaderable\", function () {\n  const makeDoc = (source) => parseHTML(source).document;\n"},{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/content_scripts/index.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/content_scripts/index.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 280) ---\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\treturn clippedContentResponse(article.title, article.body, getImageSizes(document), getAnchorNames(document));\n\n\t\t} else if (command.name === 'isProbablyReaderable') {\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst ok = isProbablyReaderable(documentForReadability());\n\t\t\treturn { name: 'isProbablyReaderable', value: ok };\n\n\t\t} else if (command.name === 'completePageHtml') {\n\n\t\t\tif (isPagePdf()) {\n\t\t\t\t// eslint-disable-next-line no-undef\n"},{"type":"text","text":"Repository: mozilla/readability\nPath: test/test-isProbablyReaderable.js\nURL: https://github.com/mozilla/readability/blob/main/test/test-isProbablyReaderable.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 9) ---\nvar isProbablyReaderable = require(\"../index\").isProbablyReaderable;\n\ndescribe(\"isProbablyReaderable - test pages\", function () {\n  testPages.forEach(function (testPage) {\n    var uri = \"http://fakehost/test/page.html\";\n    describe(testPage.dir, function () {\n      var doc = new JSDOM(testPage.source, {\n        url: uri,\n      }).window.document;\n      var expected = testPage.expectedMetadata.readerable;\n      it(\n        \"The result should \" + (expected ? \"\" : \"not \") + \"be readerable\",\n        function () {\n          expect(isProbablyReaderable(doc)).eql(expected);\n        }\n      );\n    });\n  });\n});\n\ndescribe(\"isProbablyReaderable\", function () {\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/index.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/index.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nvar Readability = require(\"./Readability\");\nvar isProbablyReaderable = require(\"./Readability-readerable\");\n\nmodule.exports = {\n  Readability: Readability,\n  isProbablyReaderable: isProbablyReaderable\n"},{"type":"text","text":"Repository: omnivore-app/omnivore\nPath: packages/readabilityjs/benchmarks/benchmarks.js\nURL: https://github.com/omnivore-app/omnivore/blob/main/packages/readabilityjs/benchmarks/benchmarks.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nvar getTestPages = require(\"../test/utils\").getTestPages;\n\nvar { Readability, isProbablyReaderable } = require(\"../index\");\nvar JSDOMParser = require(\"../JSDOMParser\");\nvar { parseHTML } = require(\"linkedom\");\n\nvar referenceTestPages = [\n  \"002\",\n\n\n--- Snippet 2 (Line 49) ---\n    });\n  });\n});\n\nsuite(\"isProbablyReaderable perf\", function () {\n  set(\"iterations\", 1);\n  set(\"type\", \"static\");\n\n  testPages.forEach(function(testPage) {\n    var doc = parseHTML(testPage.source).document;\n    bench(testPage.dir + \" readability perf\", function() {\n      isProbablyReaderable(doc);\n"},{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/popup/src/index.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/popup/src/index.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 18) ---\n\t},\n\tfolders: [],\n\ttags: [],\n\tselectedFolderId: null,\n\tenv: 'prod',\n\tisProbablyReaderable: true,\n\tauthStatus: 'starting',\n};\n\nconst reduxMiddleware = store => next => async (action) => {\n\tconst result = next(action);\n\n\n--- Snippet 2 (Line 44) ---\n\t\tnewState.warning = action.text;\n\n\t} else if (action.type === 'IS_PROBABLY_READERABLE') {\n\n\t\tnewState = { ...state };\n\t\tnewState.isProbablyReaderable = action.value;\n\n\t} else if (action.type === 'CLIPPED_CONTENT_SET') {\n\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\n\nfunction canBeParsed(document) {\n  return isProbablyReaderable(document, {\n    minContentLength: 100\n  });\n}\n\nfunction parse(document) {\n"}],"sourceToolAssistantUUID":"95b87a7f-a044-4741-88a4-be342e5c76ee"}
{"parentUuid":"8c44f5f7-5445-4e53-939f-5bfdf9b8c579","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01MjHrhJzkMVCeXuR4kgvzhd","type":"tool_result","content":[{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport unset from 'lodash/unset';\nimport {\n\ttype INodeProperties,\n\tjsonParse,\n\tNodeOperationError,\n\ttype IDataObject,\n\ttype IExecuteFunctions,\n} from 'n8n-workflow';\n\ntype ResponseOptimizerFn = (\n\tx: IDataObject | IDataObject[] | string,\n) => IDataObject | IDataObject[] | string;\n\nfunction htmlOptimizer(\n\tctx: IExecuteFunctions,\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/@n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/%40n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport unset from 'lodash/unset';\nimport { getOAuth2AdditionalParameters } from 'n8n-nodes-base/dist/nodes/HttpRequest/GenericFunctions';\nimport type {\n\tIDataObject,\n\tIHttpRequestOptions,\n\tIRequestOptionsSimplified,\n\tExecutionError,\n\tNodeApiError,\n\tISupplyDataFunctions,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes, NodeOperationError, jsonParse } from 'n8n-workflow';\nimport { z } from 'zod';\n\nimport type {\n\tParameterInputType,\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\n\nfunction canBeParsed(document) {\n  return isProbablyReaderable(document, {\n    minContentLength: 100\n  });\n}\n\nfunction parse(document) {\n  if (!canBeParsed(document)) {\n    return false;\n  }\n  const documentClone = document.cloneNode(true);\n  const article = new Readability(documentClone).parse();\n  return article.textContent;\n}\n\n"},{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/content_scripts/Readability-readerable.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/content_scripts/Readability-readerable.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n// v0.4.4 - https://github.com/mozilla/readability/commit/49d345a455da1f4aa93f8b41e0f50422f9959c7c\n\n/*\n * Copyright (c) 2010 Arc90 Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * This code is heavily based on Arc90's readability.js (1.7.1) script\n * available at: http://code.google.com/p/arc90labs-readability\n"},{"type":"text","text":"Repository: chatboxai/chatbox\nPath: src/main/readability.ts\nURL: https://github.com/chatboxai/chatbox/blob/main/src/main/readability.ts\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n// import { Readability } from '@mozilla/readability'\n// import { parseHTML } from 'linkedom'\n// import { fetch } from 'ofetch'\n// import { sliceTextWithEllipsis } from './util'\n\n// // linkedom 只能在 Node.js 环境，且在网页中 fetch 其他 URL 很容易出现 CORS 问题\n\n// export async function readability(url: string, options: { maxLength?: number } = {}) {\n//     const userAgents = `Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36`\n//     const documentString = await fetch(url, {\n//         headers: {\n//             'User-Agent': userAgents,\n//         },\n//     }).then((res) => res.text())\n//     const { document } = parseHTML(documentString)\n//     const reader = new Readability(document, {})\n//     const title = document.querySelector('title')?.textContent || undefined\n//     const result = reader.parse()\n\n//     const ret = {\n//         title,\n"},{"type":"text","text":"Repository: CherryHQ/cherry-studio\nPath: src/renderer/src/utils/fetch.ts\nURL: https://github.com/CherryHQ/cherry-studio/blob/main/src/renderer/src/utils/fetch.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 2) ---\nimport { Readability } from '@mozilla/readability'\nimport { nanoid } from '@reduxjs/toolkit'\nimport type { WebSearchProviderResult } from '@renderer/types'\nimport { createAbortPromise } from '@renderer/utils/abortController'\nimport { isAbortError } from '@renderer/utils/error'\nimport TurndownService from 'turndown'\n\nconst logger = loggerService.withContext('Utils:fetch')\n\nconst turndownService = new TurndownService()\nexport const noContent = 'No content found'\n\ntype ResponseFormat = 'markdown' | 'html' | 'text'\n\n/**\n * Validates if the string is a properly formatted URL\n */\nexport function isValidUrl(urlString: string): boolean {\n  try {\n    const url = new URL(urlString)\n    return url.protocol === 'http:' || url.protocol === 'https:'\n"},{"type":"text","text":"Repository: TriliumNext/Trilium\nPath: apps/web-clipper/lib/Readability-readerable.js\nURL: https://github.com/TriliumNext/Trilium/blob/main/apps/web-clipper/lib/Readability-readerable.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 19) ---\n * This code is heavily based on Arc90's readability.js (1.7.1) script\n * available at: http://code.google.com/p/arc90labs-readability\n */\n\nvar REGEXPS = {\n  // NOTE: These two regular expressions are duplicated in\n  // Readability.js. Please keep both copies in sync.\n  unlikelyCandidates: /-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,\n  okMaybeItsACandidate: /and|article|body|column|content|main|shadow/i,\n};\n\nfunction isNodeVisible(node) {\n  // Have to null-check node.style and node.className.indexOf to deal with SVG and MathML nodes.\n  return (!node.style || node.style.display != \"none\")\n    && !node.hasAttribute(\"hidden\")\n    //check for \"fallback-image\" so that wikimedia math images are displayed\n    && (!node.hasAttribute(\"aria-hidden\") || node.getAttribute(\"aria-hidden\") != \"true\" || (node.className && node.className.indexOf && node.className.indexOf(\"fallback-image\") !== -1));\n}\n\n/**\n * Decides whether or not the document is reader-able without parsing the whole thing.\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_transformers/mozilla_readability.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_transformers/mozilla_readability.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\nimport type { Options } from \"mozilla-readability\";\nimport {\n  MappingDocumentTransformer,\n  Document,\n} from \"@langchain/core/documents\";\n\n/**\n * A transformer that uses the Mozilla Readability library to extract the\n * main content from a web page.\n * @example\n * ```typescript\n * const loader = new HTMLWebBaseLoader(\"https://example.com/article\");\n * const docs = await loader.load();\n *\n * const splitter = new RecursiveCharacterTextSplitter({\n *  maxCharacterCount: 5000,\n * });\n * const transformer = new MozillaReadabilityTransformer();\n *\n"},{"type":"text","text":"Repository: continuedev/continue\nPath: core/indexing/docs/article.ts\nURL: https://github.com/continuedev/continue/blob/main/core/indexing/docs/article.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\n\nimport { Chunk } from \"../../\";\nimport { cleanFragment, cleanHeader, markdownChunker } from \"../chunk/markdown\";\n\nimport { type PageData } from \"./crawlers/DocsCrawler\";\n\nexport type ArticleComponent = {\n  title: string;\n  body: string;\n};\n\nexport type Article = {\n  url: string;\n  subpath: string;\n  title: string;\n  article_components: ArticleComponent[];\n};\n\nexport type ArticleWithChunks = {\n"},{"type":"text","text":"Repository: mozilla-mobile/firefox-ios\nPath: firefox-ios/Client/Frontend/UserContent/UserScripts/MainFrame/AtDocumentStart/Summarizer.js\nURL: https://github.com/mozilla-mobile/firefox-ios/blob/main/firefox-ios/Client/Frontend/UserContent/UserScripts/MainFrame/AtDocumentStart/Summarizer.js\nLicense: MPL-2.0\n\nSnippets:\n--- Snippet 1 (Line 6) ---\nimport { Readability, isProbablyReaderable} from \"@mozilla/readability\";\nimport { findRecipeJSONLD } from \"./JSONLD\";\n\nconst ALLOWED_LANGS = [\"en\"];\n\nconst CONTENT_TYPES = {generic: \"generic\", recipe: \"recipe\"};\n\nconst isPageLanguageSupported = () => {\n  // Attempt to use the <html> lang attribute. \n  // When the lang attribute is not set we get \"\". In that case, default to \"en\".\n  const rawLang = document.documentElement.lang?.trim() || \"en\";\n  try {\n    const locale = new Intl.Locale(rawLang);\n    return ALLOWED_LANGS.includes(locale.language);\n  } catch {\n    return true;\n  }\n}\n\nconst extractContent = () => {\n  const uri = {\n"}]}]},"uuid":"b2c523ce-fb2a-4436-a0e8-ec7f30e778e9","timestamp":"2026-01-12T23:31:02.461Z","toolUseResult":[{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport unset from 'lodash/unset';\nimport {\n\ttype INodeProperties,\n\tjsonParse,\n\tNodeOperationError,\n\ttype IDataObject,\n\ttype IExecuteFunctions,\n} from 'n8n-workflow';\n\ntype ResponseOptimizerFn = (\n\tx: IDataObject | IDataObject[] | string,\n) => IDataObject | IDataObject[] | string;\n\nfunction htmlOptimizer(\n\tctx: IExecuteFunctions,\n"},{"type":"text","text":"Repository: n8n-io/n8n\nPath: packages/@n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nURL: https://github.com/n8n-io/n8n/blob/master/packages/%40n8n/nodes-langchain/nodes/tools/ToolHttpRequest/utils.ts\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from '@mozilla/readability';\nimport * as cheerio from 'cheerio';\nimport { convert } from 'html-to-text';\nimport { JSDOM } from 'jsdom';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport unset from 'lodash/unset';\nimport { getOAuth2AdditionalParameters } from 'n8n-nodes-base/dist/nodes/HttpRequest/GenericFunctions';\nimport type {\n\tIDataObject,\n\tIHttpRequestOptions,\n\tIRequestOptionsSimplified,\n\tExecutionError,\n\tNodeApiError,\n\tISupplyDataFunctions,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes, NodeOperationError, jsonParse } from 'n8n-workflow';\nimport { z } from 'zod';\n\nimport type {\n\tParameterInputType,\n"},{"type":"text","text":"Repository: GoogleChrome/chrome-extensions-samples\nPath: functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nURL: https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { isProbablyReaderable, Readability } from '@mozilla/readability';\n\nfunction canBeParsed(document) {\n  return isProbablyReaderable(document, {\n    minContentLength: 100\n  });\n}\n\nfunction parse(document) {\n  if (!canBeParsed(document)) {\n    return false;\n  }\n  const documentClone = document.cloneNode(true);\n  const article = new Readability(documentClone).parse();\n  return article.textContent;\n}\n\n"},{"type":"text","text":"Repository: laurent22/joplin\nPath: packages/app-clipper/content_scripts/Readability-readerable.js\nURL: https://github.com/laurent22/joplin/blob/dev/packages/app-clipper/content_scripts/Readability-readerable.js\nLicense: Unknown\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n// v0.4.4 - https://github.com/mozilla/readability/commit/49d345a455da1f4aa93f8b41e0f50422f9959c7c\n\n/*\n * Copyright (c) 2010 Arc90 Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * This code is heavily based on Arc90's readability.js (1.7.1) script\n * available at: http://code.google.com/p/arc90labs-readability\n"},{"type":"text","text":"Repository: chatboxai/chatbox\nPath: src/main/readability.ts\nURL: https://github.com/chatboxai/chatbox/blob/main/src/main/readability.ts\nLicense: GPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\n// import { Readability } from '@mozilla/readability'\n// import { parseHTML } from 'linkedom'\n// import { fetch } from 'ofetch'\n// import { sliceTextWithEllipsis } from './util'\n\n// // linkedom 只能在 Node.js 环境，且在网页中 fetch 其他 URL 很容易出现 CORS 问题\n\n// export async function readability(url: string, options: { maxLength?: number } = {}) {\n//     const userAgents = `Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36`\n//     const documentString = await fetch(url, {\n//         headers: {\n//             'User-Agent': userAgents,\n//         },\n//     }).then((res) => res.text())\n//     const { document } = parseHTML(documentString)\n//     const reader = new Readability(document, {})\n//     const title = document.querySelector('title')?.textContent || undefined\n//     const result = reader.parse()\n\n//     const ret = {\n//         title,\n"},{"type":"text","text":"Repository: CherryHQ/cherry-studio\nPath: src/renderer/src/utils/fetch.ts\nURL: https://github.com/CherryHQ/cherry-studio/blob/main/src/renderer/src/utils/fetch.ts\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 2) ---\nimport { Readability } from '@mozilla/readability'\nimport { nanoid } from '@reduxjs/toolkit'\nimport type { WebSearchProviderResult } from '@renderer/types'\nimport { createAbortPromise } from '@renderer/utils/abortController'\nimport { isAbortError } from '@renderer/utils/error'\nimport TurndownService from 'turndown'\n\nconst logger = loggerService.withContext('Utils:fetch')\n\nconst turndownService = new TurndownService()\nexport const noContent = 'No content found'\n\ntype ResponseFormat = 'markdown' | 'html' | 'text'\n\n/**\n * Validates if the string is a properly formatted URL\n */\nexport function isValidUrl(urlString: string): boolean {\n  try {\n    const url = new URL(urlString)\n    return url.protocol === 'http:' || url.protocol === 'https:'\n"},{"type":"text","text":"Repository: TriliumNext/Trilium\nPath: apps/web-clipper/lib/Readability-readerable.js\nURL: https://github.com/TriliumNext/Trilium/blob/main/apps/web-clipper/lib/Readability-readerable.js\nLicense: AGPL-3.0\n\nSnippets:\n--- Snippet 1 (Line 19) ---\n * This code is heavily based on Arc90's readability.js (1.7.1) script\n * available at: http://code.google.com/p/arc90labs-readability\n */\n\nvar REGEXPS = {\n  // NOTE: These two regular expressions are duplicated in\n  // Readability.js. Please keep both copies in sync.\n  unlikelyCandidates: /-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,\n  okMaybeItsACandidate: /and|article|body|column|content|main|shadow/i,\n};\n\nfunction isNodeVisible(node) {\n  // Have to null-check node.style and node.className.indexOf to deal with SVG and MathML nodes.\n  return (!node.style || node.style.display != \"none\")\n    && !node.hasAttribute(\"hidden\")\n    //check for \"fallback-image\" so that wikimedia math images are displayed\n    && (!node.hasAttribute(\"aria-hidden\") || node.getAttribute(\"aria-hidden\") != \"true\" || (node.className && node.className.indexOf && node.className.indexOf(\"fallback-image\") !== -1));\n}\n\n/**\n * Decides whether or not the document is reader-able without parsing the whole thing.\n"},{"type":"text","text":"Repository: langchain-ai/langchainjs\nPath: libs/langchain-community/src/document_transformers/mozilla_readability.ts\nURL: https://github.com/langchain-ai/langchainjs/blob/main/libs/langchain-community/src/document_transformers/mozilla_readability.ts\nLicense: MIT\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\nimport type { Options } from \"mozilla-readability\";\nimport {\n  MappingDocumentTransformer,\n  Document,\n} from \"@langchain/core/documents\";\n\n/**\n * A transformer that uses the Mozilla Readability library to extract the\n * main content from a web page.\n * @example\n * ```typescript\n * const loader = new HTMLWebBaseLoader(\"https://example.com/article\");\n * const docs = await loader.load();\n *\n * const splitter = new RecursiveCharacterTextSplitter({\n *  maxCharacterCount: 5000,\n * });\n * const transformer = new MozillaReadabilityTransformer();\n *\n"},{"type":"text","text":"Repository: continuedev/continue\nPath: core/indexing/docs/article.ts\nURL: https://github.com/continuedev/continue/blob/main/core/indexing/docs/article.ts\nLicense: Apache-2.0\n\nSnippets:\n--- Snippet 1 (Line 1) ---\nimport { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\n\nimport { Chunk } from \"../../\";\nimport { cleanFragment, cleanHeader, markdownChunker } from \"../chunk/markdown\";\n\nimport { type PageData } from \"./crawlers/DocsCrawler\";\n\nexport type ArticleComponent = {\n  title: string;\n  body: string;\n};\n\nexport type Article = {\n  url: string;\n  subpath: string;\n  title: string;\n  article_components: ArticleComponent[];\n};\n\nexport type ArticleWithChunks = {\n"},{"type":"text","text":"Repository: mozilla-mobile/firefox-ios\nPath: firefox-ios/Client/Frontend/UserContent/UserScripts/MainFrame/AtDocumentStart/Summarizer.js\nURL: https://github.com/mozilla-mobile/firefox-ios/blob/main/firefox-ios/Client/Frontend/UserContent/UserScripts/MainFrame/AtDocumentStart/Summarizer.js\nLicense: MPL-2.0\n\nSnippets:\n--- Snippet 1 (Line 6) ---\nimport { Readability, isProbablyReaderable} from \"@mozilla/readability\";\nimport { findRecipeJSONLD } from \"./JSONLD\";\n\nconst ALLOWED_LANGS = [\"en\"];\n\nconst CONTENT_TYPES = {generic: \"generic\", recipe: \"recipe\"};\n\nconst isPageLanguageSupported = () => {\n  // Attempt to use the <html> lang attribute. \n  // When the lang attribute is not set we get \"\". In that case, default to \"en\".\n  const rawLang = document.documentElement.lang?.trim() || \"en\";\n  try {\n    const locale = new Intl.Locale(rawLang);\n    return ALLOWED_LANGS.includes(locale.language);\n  } catch {\n    return true;\n  }\n}\n\nconst extractContent = () => {\n  const uri = {\n"}],"sourceToolAssistantUUID":"8c44f5f7-5445-4e53-939f-5bfdf9b8c579"}
{"parentUuid":"b2c523ce-fb2a-4436-a0e8-ec7f30e778e9","isSidechain":true,"userType":"external","cwd":"/Users/imorgado","sessionId":"065969ce-0ec1-41b0-84bf-754cac4bde05","version":"2.1.5","gitBranch":"","agentId":"a020257","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016fRRvJG9uNWifoUmnURysK","type":"message","role":"assistant","content":[{"type":"text","text":"Based on my GitHub search, here are the **best HTML to markdown conversion and content extraction tools** with real usage patterns:\n\n## 1. **Turndown** (HTML to Markdown Converter)\n- **Most popular**: Used by Microsoft, ByteDance, Obsidian, Perplexica, Steel Browser\n- **Highly customizable** with plugin support and custom rules\n- **Key features**:\n  - GFM (GitHub Flavored Markdown) support via `turndown-plugin-gfm`\n  - Custom rules via `addRule()` for specific HTML elements\n  - Configurable heading styles, code blocks, emphasis delimiters\n\n**Common usage pattern**:\n```typescript\nimport TurnDown from 'turndown';\nimport { tables, strikethrough, taskListItems } from 'turndown-plugin-gfm';\n\nconst turndownService = new TurnDown({\n  headingStyle: 'atx',\n  codeBlockStyle: 'fenced',\n  bulletListMarker: '-',\n  emDelimiter: '*',\n  strongDelimiter: '**'\n});\n\n// Add GFM plugins\nturndownService.use([tables, strikethrough, taskListItems]);\n\n// Custom rules for special cases\nturndownService.addRule('strikethrough', {\n  filter: ['del', 's', 'strike'],\n  replacement: (content) => `~~${content}~~`\n});\n\nconst markdown = turndownService.turndown(html);\n```\n\n**Best implementations**:\n- [Perplexica](https://github.com/ItzCrazyKns/Perplexica/blob/master/src/lib/agents/search/researcher/actions/scrapeURL.ts) - Clean scraping\n- [Steel Browser](https://github.com/steel-dev/steel-browser/blob/main/api/src/utils/scrape/htmlToMarkdown.ts) - Production-quality with markdownlint\n- [Jina Reader](https://github.com/jina-ai/reader/blob/main/src/services/snapshot-formatter.ts) - Advanced customization\n\n## 2. **@mozilla/readability** (Article Extraction)\n- **Firefox's Reader View library**: Battle-tested article extraction\n- **Perfect for**: Blog posts, news articles, documentation\n- **Combines well with**: Turndown for markdown output\n\n**Common usage pattern**:\n```typescript\nimport { Readability, isProbablyReaderable } from '@mozilla/readability';\nimport { JSDOM } from 'jsdom';\n\nconst dom = new JSDOM(html, { url });\n\n// Check if page is readerable first\nif (isProbablyReaderable(dom.window.document)) {\n  const reader = new Readability(dom.window.document, {\n    keepClasses: true,\n    classesToPreserve: ['caption']\n  });\n  \n  const article = reader.parse();\n  // article.content - cleaned HTML\n  // article.textContent - plain text\n  // article.title, article.byline, article.excerpt\n}\n```\n\n**Best implementations**:\n- [n8n](https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/HttpRequest/shared/optimizeResponse.ts) - Full extraction pipeline\n- [Lobe Chat](https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts) - Readability + NodeHtmlMarkdown combo\n- [Google Chrome Extensions](https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/functional-samples/ai.gemini-on-device-summarization/scripts/extract-content.js) - Simple, clean implementation\n\n## 3. **NodeHtmlMarkdown** (Alternative Converter)\n- **Modern alternative** to Turndown\n- **Better TypeScript support**\n- **More configurable** translator system\n\n**Usage pattern**:\n```typescript\nimport { NodeHtmlMarkdown } from 'node-html-markdown';\n\nconst nhm = new NodeHtmlMarkdown({\n  maxConsecutiveNewlines: 2,\n  // custom translator configs\n});\n\nconst markdown = nhm.translate(html);\n```\n\n**Best implementations**:\n- [Lobe Chat](https://github.com/lobehub/lobe-chat/blob/next/packages/web-crawler/src/utils/htmlToMarkdown.ts) - Combined with Readability\n- [n8n Markdown Node](https://github.com/n8n-io/n8n/blob/master/packages/nodes-base/nodes/Markdown/Markdown.node.ts)\n\n## 4. **html-to-text** (Plain Text Extraction)\n- **For plain text output** (not markdown)\n- **Highly configurable** selectors and formatting\n- **Used by**: n8n, React Email, email templates\n\n```typescript\nimport { convert } from 'html-to-text';\n\nconst text = convert(html, {\n  selectors: [\n    { selector: 'img', format: 'skip' },\n    { selector: 'a', options: { ignoreHref: false } }\n  ]\n});\n```\n\n## 5. **Jina AI Reader API** (Cloud Service)\n- **API-based solution**: `https://r.jina.ai/YOUR_URL`\n- **Returns clean markdown** directly\n- **Free tier available** with API key for higher limits\n\n**Usage pattern**:\n```typescript\nconst response = await fetch(`https://r.jina.ai/${url}`, {\n  headers: {\n    'Authorization': `Bearer ${JINA_API_KEY}` // optional, for higher limits\n  }\n});\nconst markdown = await response.text();\n```\n\n**Best for**: Quick integration without local processing\n\n## 6. **LangChain Document Loaders**\n- **CheerioWebBaseLoader**: Fast, lightweight (no headless browser)\n- **PuppeteerWebBaseLoader**: Full rendering for dynamic content\n\n**Usage patterns**:\n```typescript\n// Cheerio - fast, static HTML\nimport { CheerioWebBaseLoader } from '@langchain/community/document_loaders/web/cheerio';\n\nconst loader = new CheerioWebBaseLoader(url, {\n  selector: 'body', // CSS selector\n});\nconst docs = await loader.load();\n\n// Puppeteer - dynamic content\nimport { PuppeteerWebBaseLoader } from '@langchain/community/document_loaders/web/puppeteer';\n\nconst loader = new PuppeteerWebBaseLoader(url, {\n  launchOptions: { headless: true },\n  gotoOptions: { waitUntil: 'networkidle2' }\n});\nconst docs = await loader.load();\n```\n\n## **Recommended Combination** (Production-Ready)\n\n```typescript\nimport { Readability, isProbablyReaderable } from '@mozilla/readability';\nimport TurnDown from 'turndown';\nimport { tables, strikethrough } from 'turndown-plugin-gfm';\nimport { JSDOM } from 'jsdom';\n\nasync function htmlToMarkdown(html: string, url: string) {\n  const dom = new JSDOM(html, { url });\n  const document = dom.window.document;\n  \n  // Try Readability first for articles\n  if (isProbablyReaderable(document)) {\n    const reader = new Readability(document.cloneNode(true));\n    const article = reader.parse();\n    \n    if (article) {\n      const turndown = new TurnDown({ headingStyle: 'atx' });\n      turndown.use([tables, strikethrough]);\n      \n      return {\n        title: article.title,\n        markdown: turndown.turndown(article.content),\n        excerpt: article.excerpt\n      };\n    }\n  }\n  \n  // Fallback to full page conversion\n  const turndown = new TurnDown({ headingStyle: 'atx' });\n  turndown.use([tables, strikethrough]);\n  return {\n    markdown: turndown.turndown(document.body.innerHTML)\n  };\n}\n```\n\nThis combination gives you:\n- ✅ Clean article extraction (Readability)\n- ✅ High-quality markdown output (Turndown + GFM)\n- ✅ Fallback for non-article pages\n- ✅ Production-tested by major projects"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":15202,"cache_read_input_tokens":42174,"cache_creation":{"ephemeral_5m_input_tokens":15202,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CX4MZ4o3iVfbpPHMw7MmW","type":"assistant","uuid":"fce51daa-fe60-48f3-a4f8-3bd88ee3a6b4","timestamp":"2026-01-12T23:31:39.198Z"}
