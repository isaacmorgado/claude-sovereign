     1→'use client';
     2→
     3→import React, { createContext, useContext, useState, useMemo, useCallback, ReactNode } from 'react';
     4→import { LandmarkPoint } from '@/lib/landmarks';
     5→import {
     6→  analyzeFrontProfile,
     7→  analyzeSideProfile,
     8→  analyzeHarmony,
     9→  HarmonyAnalysis,
    10→  FaceIQScoreResult,
    11→  FACEIQ_METRICS,
    12→  Ethnicity,
    13→  Gender,
    14→} from '@/lib/faceiq-scoring';
    15→import {
    16→  calculateHarmonyScore,
    17→  getTopMetrics,
    18→  getBottomMetrics,
    19→  HarmonyScoreResult,
    20→  RankedMetric,
    21→} from '@/lib/looksmax-scoring';
    22→import {
    23→  classifyInsights,
    24→  convertToStrength,
    25→  convertToFlaw,
    26→  INSIGHTS_DEFINITIONS,
    27→} from '@/lib/insights-engine';
    28→import { classifyMetric } from '@/lib/taxonomy';
    29→import {
    30→  Ratio,
    31→  Strength,
    32→  Flaw,
    33→  Recommendation,
    34→  ResultsTab,
    35→  FullHarmonyAnalysis,
    36→} from '@/types/results';
    37→
    38→// ============================================
    39→// CONTEXT TYPES
    40→// ============================================
    41→
    42→interface ResultsContextType {
    43→  // Raw data
    44→  frontLandmarks: LandmarkPoint[];
    45→  sideLandmarks: LandmarkPoint[];
    46→  gender: Gender;
    47→  ethnicity: Ethnicity;
    48→  frontPhoto: string;
    49→  sidePhoto: string | null;
    50→
    51→  // Computed results
    52→  harmonyAnalysis: FullHarmonyAnalysis | null;
    53→  frontRatios: Ratio[];
    54→  sideRatios: Ratio[];
    55→  strengths: Strength[];
    56→  flaws: Flaw[];
    57→  recommendations: Recommendation[];
    58→
    59→  // Scores (now using weighted harmony from looksmax_engine.py)
    60→  overallScore: number;
    61→  frontScore: number;
    62→  sideScore: number;
    63→
    64→  // Weighted Harmony Score (from looksmax_engine.py)
    65→  harmonyScoreResult: HarmonyScoreResult | null;
    66→  harmonyPercentage: number;  // 0-100% weighted harmony
    67→
    68→  // Top 3 strengths and bottom 3 areas to improve with advice
    69→  topMetrics: RankedMetric[];
    70→  bottomMetrics: RankedMetric[];
    71→
    72→  // UI state
    73→  activeTab: ResultsTab;
    74→  setActiveTab: (tab: ResultsTab) => void;
    75→  expandedMeasurementId: string | null;
    76→  setExpandedMeasurementId: (id: string | null) => void;
    77→  selectedVisualizationMetric: string | null;
    78→  setSelectedVisualizationMetric: (id: string | null) => void;
    79→  categoryFilter: string | null;
    80→  setCategoryFilter: (category: string | null) => void;
    81→  showLandmarkOverlay: boolean;
    82→  setShowLandmarkOverlay: (show: boolean) => void;
    83→
    84→  // Actions
    85→  setResultsData: (data: ResultsInputData) => void;
    86→}
    87→
    88→interface ResultsInputData {
    89→  frontLandmarks: LandmarkPoint[];
    90→  sideLandmarks: LandmarkPoint[];
    91→  frontPhoto: string;
    92→  sidePhoto?: string;
    93→  gender: Gender;
    94→  ethnicity?: Ethnicity;
    95→}
    96→
    97→// ============================================
    98→// HELPER FUNCTIONS
    99→// ============================================
   100→
   101→function convertUnitToRatioUnit(unit: string): 'x' | 'mm' | '%' | '°' {
   102→  switch (unit) {
   103→    case 'ratio': return 'x';
   104→    case 'percent': return '%';
   105→    case 'degrees': return '°';
   106→    case 'mm': return 'mm';
   107→    default: return 'x';
   108→  }
   109→}
   110→
   111→function transformToRatio(result: FaceIQScoreResult, landmarks: LandmarkPoint[]): Ratio {
   112→  const metricConfig = FACEIQ_METRICS[result.metricId];
   113→
   114→  // Generate illustration based on metric
   115→  const illustration = generateIllustration(result.metricId, landmarks);
   116→
   117→  // Get flaw/strength mappings
   118→  const { mayIndicateFlaws, mayIndicateStrengths } = getFlawStrengthMappings(result);
   119→
   120→  // Classify metric using FaceIQ taxonomy
   121→  const taxonomyClassification = classifyMetric(result.name, result.category);
   122→
   123→  return {
   124→    id: result.metricId,
   125→    name: result.name,
   126→    value: result.value,
   127→    score: result.score,
   128→    standardizedScore: result.standardizedScore,
   129→    unit: convertUnitToRatioUnit(result.unit),
   130→    idealMin: result.idealMin,
   131→    idealMax: result.idealMax,
   132→    rangeMin: metricConfig?.rangeMin || result.idealMin - 0.5,
   133→    rangeMax: metricConfig?.rangeMax || result.idealMax + 0.5,
   134→    description: metricConfig?.description || '',
   135→    category: result.category,
   136→    qualityLevel: result.qualityTier,
   137→    severity: result.severity,
   138→    illustration,
   139→    mayIndicateFlaws,
   140→    mayIndicateStrengths,
   141→    usedLandmarks: getUsedLandmarks(result.metricId),
   142→    scoringCurveConfig: metricConfig ? {
   143→      decayRate: metricConfig.decayRate,
   144→      maxScore: metricConfig.maxScore,
   145→    } : undefined,
   146→    taxonomyPrimary: taxonomyClassification?.primary,
   147→    taxonomySecondary: taxonomyClassification?.secondary,
   148→  };
   149→}
   150→
   151→// Enhanced illustration configuration type
   152→interface IllustrationConfig {
   153→  points: string[];
   154→  lines: Array<{
   155→    from: string;
   156→    to: string;
   157→    label?: string;
   158→    color?: string;
   159→    labelPosition?: 'start' | 'middle' | 'end';  // Matches IllustrationLine type
   160→  }>;
   161→}
   162→
   163→// Comprehensive illustration configurations for all metrics
   164→const ILLUSTRATION_CONFIGS: Record<string, IllustrationConfig> = {
   165→  // ==========================================
   166→  // FACE SHAPE / PROPORTIONS
   167→  // ==========================================
   168→  faceWidthToHeight: {
   169→    points: ['left_zygion', 'right_zygion', 'trichion', 'menton'],
   170→    lines: [
   171→      { from: 'left_zygion', to: 'right_zygion', label: 'Width', color: '#67e8f9', labelPosition: 'middle' },
   172→      { from: 'trichion', to: 'menton', label: 'Height', color: '#a78bfa', labelPosition: 'end' },
   173→    ],
   174→  },
   175→  totalFacialWidthToHeight: {
   176→    points: ['left_zygion', 'right_zygion', 'trichion', 'menton'],
   177→    lines: [
   178→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheek Width', color: '#67e8f9' },
   179→      { from: 'trichion', to: 'menton', label: 'Total Height', color: '#a78bfa' },
   180→    ],
   181→  },
   182→  lowerThirdProportion: {
   183→    points: ['subnasale', 'menton', 'trichion'],
   184→    lines: [
   185→      { from: 'subnasale', to: 'menton', label: 'Lower Third', color: '#f97316', labelPosition: 'end' },
   186→      { from: 'trichion', to: 'menton', label: 'Full Height', color: '#67e8f9', labelPosition: 'start' },
   187→    ],
   188→  },
   189→  middleThirdProportion: {
   190→    points: ['nasal_base', 'subnasale', 'trichion', 'menton'],
   191→    lines: [
   192→      { from: 'nasal_base', to: 'subnasale', label: 'Middle Third', color: '#22c55e', labelPosition: 'end' },
   193→      { from: 'trichion', to: 'menton', label: 'Full Height', color: '#67e8f9', labelPosition: 'start' },
   194→    ],
   195→  },
   196→  upperThirdProportion: {
   197→    points: ['trichion', 'nasal_base', 'menton'],
   198→    lines: [
   199→      { from: 'trichion', to: 'nasal_base', label: 'Upper Third', color: '#fbbf24', labelPosition: 'end' },
   200→      { from: 'trichion', to: 'menton', label: 'Full Height', color: '#67e8f9', labelPosition: 'start' },
   201→    ],
   202→  },
   203→  bitemporalWidth: {
   204→    points: ['left_temporal', 'right_temporal', 'left_zygion', 'right_zygion'],
   205→    lines: [
   206→      { from: 'left_temporal', to: 'right_temporal', label: 'Temple', color: '#fbbf24' },
   207→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheek', color: '#67e8f9' },
   208→    ],
   209→  },
   210→  cheekboneHeight: {
   211→    points: ['left_zygion', 'right_zygion', 'left_canthus_lateralis', 'right_canthus_lateralis', 'menton'],
   212→    lines: [
   213→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheekbone', color: '#ec4899' },
   214→      { from: 'left_canthus_lateralis', to: 'left_zygion', color: '#67e8f9' },
   215→    ],
   216→  },
   217→  midfaceRatio: {
   218→    points: ['left_zygion', 'right_zygion', 'left_canthus_medialis', 'right_canthus_medialis', 'subnasale'],
   219→    lines: [
   220→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Midface Width', color: '#67e8f9' },
   221→      { from: 'left_canthus_medialis', to: 'subnasale', label: 'Midface Height', color: '#a78bfa' },
   222→    ],
   223→  },
   224→
   225→  // ==========================================
   226→  // JAW MEASUREMENTS
   227→  // ==========================================
   228→  jawSlope: {
   229→    points: ['left_gonion_inferior', 'left_mentum_lateralis', 'menton', 'right_mentum_lateralis', 'right_gonion_inferior'],
   230→    lines: [
   231→      { from: 'left_gonion_inferior', to: 'left_mentum_lateralis', label: 'Jaw Slope', color: '#f97316' },
   232→      { from: 'right_gonion_inferior', to: 'right_mentum_lateralis', color: '#f97316' },
   233→    ],
   234→  },
   235→  jawFrontalAngle: {
   236→    points: ['left_gonion_inferior', 'menton', 'right_gonion_inferior'],
   237→    lines: [
   238→      { from: 'left_gonion_inferior', to: 'menton', label: 'Jaw Angle', color: '#f97316' },
   239→      { from: 'menton', to: 'right_gonion_inferior', color: '#f97316' },
   240→    ],
   241→  },
   242→  bigonialWidth: {
   243→    points: ['left_gonion_inferior', 'right_gonion_inferior', 'left_zygion', 'right_zygion'],
   244→    lines: [
   245→      { from: 'left_gonion_inferior', to: 'right_gonion_inferior', label: 'Jaw Width', color: '#f97316' },
   246→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheek Width', color: '#67e8f9' },
   247→    ],
   248→  },
   249→  jawWidthRatio: {
   250→    points: ['left_gonion_inferior', 'right_gonion_inferior', 'left_zygion', 'right_zygion'],
   251→    lines: [
   252→      { from: 'left_gonion_inferior', to: 'right_gonion_inferior', label: 'Jaw', color: '#f97316' },
   253→      { from: 'left_zygion', to: 'right_zygion', label: 'Face', color: '#67e8f9' },
   254→    ],
   255→  },
   256→
   257→  // ==========================================
   258→  // EYE MEASUREMENTS
   259→  // ==========================================
   260→  lateralCanthalTilt: {
   261→    points: ['left_canthus_medialis', 'left_canthus_lateralis', 'right_canthus_medialis', 'right_canthus_lateralis'],
   262→    lines: [
   263→      { from: 'left_canthus_medialis', to: 'left_canthus_lateralis', label: 'Tilt', color: '#06b6d4', labelPosition: 'end' },
   264→      { from: 'right_canthus_medialis', to: 'right_canthus_lateralis', color: '#06b6d4' },
   265→    ],
   266→  },
   267→  eyeAspectRatio: {
   268→    points: ['left_canthus_medialis', 'left_canthus_lateralis', 'left_palpebra_superior', 'left_palpebra_inferior'],
   269→    lines: [
   270→      { from: 'left_canthus_medialis', to: 'left_canthus_lateralis', label: 'Width', color: '#06b6d4' },
   271→      { from: 'left_palpebra_superior', to: 'left_palpebra_inferior', label: 'Height', color: '#a78bfa' },
   272→    ],
   273→  },
   274→  eyeSeparationRatio: {
   275→    points: ['left_canthus_medialis', 'right_canthus_medialis', 'left_zygion', 'right_zygion'],
   276→    lines: [
   277→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Intercanthal', color: '#06b6d4' },
   278→      { from: 'left_zygion', to: 'right_zygion', label: 'Face Width', color: '#67e8f9' },
   279→    ],
   280→  },
   281→  interpupillaryRatio: {
   282→    points: ['left_pupila', 'right_pupila', 'left_zygion', 'right_zygion'],
   283→    lines: [
   284→      { from: 'left_pupila', to: 'right_pupila', label: 'IPD', color: '#06b6d4' },
   285→      { from: 'left_zygion', to: 'right_zygion', label: 'Face Width', color: '#67e8f9' },
   286→    ],
   287→  },
   288→  interpupillaryMouthWidthRatio: {
   289→    points: ['left_pupila', 'right_pupila', 'left_cheilion', 'right_cheilion'],
   290→    lines: [
   291→      { from: 'left_pupila', to: 'right_pupila', label: 'IPD', color: '#06b6d4' },
   292→      { from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth', color: '#ec4899' },
   293→    ],
   294→  },
   295→  oneEyeApartTest: {
   296→    points: ['left_canthus_medialis', 'right_canthus_medialis', 'left_canthus_lateralis'],
   297→    lines: [
   298→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Between Eyes', color: '#06b6d4' },
   299→      { from: 'left_canthus_medialis', to: 'left_canthus_lateralis', label: 'Eye Width', color: '#a78bfa' },
   300→    ],
   301→  },
   302→
   303→  // ==========================================
   304→  // EYEBROW MEASUREMENTS
   305→  // ==========================================
   306→  browLengthRatio: {
   307→    points: ['left_supercilium_medialis', 'left_supercilium_lateralis', 'left_zygion', 'right_zygion'],
   308→    lines: [
   309→      { from: 'left_supercilium_medialis', to: 'left_supercilium_lateralis', label: 'Brow', color: '#84cc16' },
   310→      { from: 'left_zygion', to: 'right_zygion', label: 'Face Width', color: '#67e8f9' },
   311→    ],
   312→  },
   313→  eyebrowTilt: {
   314→    points: ['left_supercilium_medialis', 'left_supercilium_apex', 'left_supercilium_lateralis'],
   315→    lines: [
   316→      { from: 'left_supercilium_medialis', to: 'left_supercilium_apex', label: 'Tilt', color: '#84cc16' },
   317→      { from: 'left_supercilium_apex', to: 'left_supercilium_lateralis', color: '#84cc16' },
   318→    ],
   319→  },
   320→  eyebrowLowSetedness: {
   321→    points: ['left_supercilium_medialis', 'left_palpebra_superior', 'left_canthus_medialis'],
   322→    lines: [
   323→      { from: 'left_supercilium_medialis', to: 'left_palpebra_superior', label: 'Brow-Eye Gap', color: '#84cc16' },
   324→    ],
   325→  },
   326→
   327→  // ==========================================
   328→  // NOSE MEASUREMENTS (FRONT)
   329→  // ==========================================
   330→  nasalIndex: {
   331→    points: ['left_ala_nasi', 'right_ala_nasi', 'nasal_base', 'subnasale'],
   332→    lines: [
   333→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Width', color: '#fbbf24' },
   334→      { from: 'nasal_base', to: 'subnasale', label: 'Height', color: '#a78bfa' },
   335→    ],
   336→  },
   337→  intercanthalNasalRatio: {
   338→    points: ['left_ala_nasi', 'right_ala_nasi', 'left_canthus_medialis', 'right_canthus_medialis'],
   339→    lines: [
   340→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Nose Width', color: '#fbbf24' },
   341→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Intercanthal', color: '#06b6d4' },
   342→    ],
   343→  },
   344→  noseBridgeWidth: {
   345→    points: ['left_dorsum_nasi', 'right_dorsum_nasi', 'left_ala_nasi', 'right_ala_nasi'],
   346→    lines: [
   347→      { from: 'left_dorsum_nasi', to: 'right_dorsum_nasi', label: 'Bridge', color: '#fbbf24' },
   348→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Base', color: '#f97316' },
   349→    ],
   350→  },
   351→  noseTipPosition: {
   352→    points: ['subnasale', 'left_ala_nasi', 'right_ala_nasi'],
   353→    lines: [
   354→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Tip Position', color: '#fbbf24' },
   355→    ],
   356→  },
   357→
   358→  // ==========================================
   359→  // MOUTH/LIP MEASUREMENTS
   360→  // ==========================================
   361→  mouthNoseWidthRatio: {
   362→    points: ['left_cheilion', 'right_cheilion', 'left_ala_nasi', 'right_ala_nasi'],
   363→    lines: [
   364→      { from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth', color: '#ec4899' },
   365→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Nose', color: '#fbbf24' },
   366→    ],
   367→  },
   368→  lowerUpperLipRatio: {
   369→    points: ['labrale_superius', 'mouth_middle', 'labrale_inferius'],
   370→    lines: [
   371→      { from: 'labrale_superius', to: 'mouth_middle', label: 'Upper', color: '#ec4899' },
   372→      { from: 'mouth_middle', to: 'labrale_inferius', label: 'Lower', color: '#f97316' },
   373→    ],
   374→  },
   375→  chinPhiltrumRatio: {
   376→    points: ['subnasale', 'labrale_superius', 'labrale_inferius', 'menton'],
   377→    lines: [
   378→      { from: 'subnasale', to: 'labrale_superius', label: 'Philtrum', color: '#ec4899' },
   379→      { from: 'labrale_inferius', to: 'menton', label: 'Chin', color: '#ef4444' },
   380→    ],
   381→  },
   382→  mouthWidth: {
   383→    points: ['left_cheilion', 'right_cheilion'],
   384→    lines: [{ from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth Width', color: '#ec4899' }],
   385→  },
   386→
   387→  // ==========================================
   388→  // CHIN MEASUREMENTS
   389→  // ==========================================
   390→  chinHeight: {
   391→    points: ['labrale_inferius', 'menton'],
   392→    lines: [{ from: 'labrale_inferius', to: 'menton', label: 'Chin Height', color: '#ef4444' }],
   393→  },
   394→
   395→  // ==========================================
   396→  // NECK MEASUREMENTS
   397→  // ==========================================
   398→  neckWidthRatio: {
   399→    points: ['left_cervical_lateralis', 'right_cervical_lateralis', 'left_gonion_inferior', 'right_gonion_inferior'],
   400→    lines: [
   401→      { from: 'left_cervical_lateralis', to: 'right_cervical_lateralis', label: 'Neck', color: '#14b8a6' },
   402→      { from: 'left_gonion_inferior', to: 'right_gonion_inferior', label: 'Jaw', color: '#f97316' },
   403→    ],
   404→  },
   405→
   406→  // ==========================================
   407→  // SIDE PROFILE MEASUREMENTS
   408→  // ==========================================
   409→  gonialAngle: {
   410→    points: ['tragus', 'gonionBottom', 'menton'],
   411→    lines: [
   412→      { from: 'tragus', to: 'gonionBottom', label: 'Ramus', color: '#f97316' },
   413→      { from: 'gonionBottom', to: 'menton', label: 'Mandible', color: '#ef4444' },
   414→    ],
   415→  },
   416→  nasofrontalAngle: {
   417→    points: ['glabella', 'nasion', 'pronasale'],
   418→    lines: [
   419→      { from: 'glabella', to: 'nasion', label: 'Forehead', color: '#84cc16' },
   420→      { from: 'nasion', to: 'pronasale', label: 'Nose', color: '#fbbf24' },
   421→    ],
   422→  },
   423→  nasofacialAngle: {
   424→    points: ['nasion', 'pronasale', 'pogonion'],
   425→    lines: [
   426→      { from: 'nasion', to: 'pronasale', color: '#fbbf24' },
   427→      { from: 'pronasale', to: 'pogonion', color: '#67e8f9' },
   428→    ],
   429→  },
   430→  nasomentaAngle: {
   431→    points: ['nasion', 'pronasale', 'pogonion'],
   432→    lines: [
   433→      { from: 'nasion', to: 'pronasale', label: 'Nose', color: '#fbbf24' },
   434→      { from: 'pronasale', to: 'pogonion', label: 'To Chin', color: '#ef4444' },
   435→    ],
   436→  },
   437→  submentalCervicalAngle: {
   438→    points: ['menton', 'cervicalPoint', 'neckPoint'],
   439→    lines: [
   440→      { from: 'menton', to: 'cervicalPoint', label: 'Submental', color: '#14b8a6' },
   441→      { from: 'cervicalPoint', to: 'neckPoint', label: 'Cervical', color: '#06b6d4' },
   442→    ],
   443→  },
   444→  facialDepthToHeight: {
   445→    points: ['pronasale', 'tragus', 'nasion', 'menton'],
   446→    lines: [
   447→      { from: 'pronasale', to: 'tragus', label: 'Depth', color: '#67e8f9' },
   448→      { from: 'nasion', to: 'menton', label: 'Height', color: '#a78bfa' },
   449→    ],
   450→  },
   451→  anteriorFacialDepth: {
   452→    points: ['glabella', 'pronasale', 'pogonion'],
   453→    lines: [
   454→      { from: 'glabella', to: 'pronasale', color: '#67e8f9' },
   455→      { from: 'pronasale', to: 'pogonion', color: '#a78bfa' },
   456→    ],
   457→  },
   458→  mandibularPlaneAngle: {
   459→    points: ['gonionBottom', 'menton', 'orbitale', 'porion'],
   460→    lines: [
   461→      { from: 'gonionBottom', to: 'menton', label: 'Mandibular', color: '#f97316' },
   462→      { from: 'orbitale', to: 'porion', label: 'Frankfort', color: '#67e8f9' },
   463→    ],
   464→  },
   465→  ramusToMandibleRatio: {
   466→    points: ['gonionTop', 'gonionBottom', 'menton'],
   467→    lines: [
   468→      { from: 'gonionTop', to: 'gonionBottom', label: 'Ramus', color: '#f97316' },
   469→      { from: 'gonionBottom', to: 'menton', label: 'Mandible', color: '#ef4444' },
   470→    ],
   471→  },
   472→  orbitalVector: {
   473→    points: ['cornealApex', 'orbitale', 'cheekbone'],
   474→    lines: [
   475→      { from: 'cornealApex', to: 'cheekbone', label: 'Orbital Vector', color: '#06b6d4' },
   476→    ],
   477→  },
   478→  eLineLowerLip: {
   479→    points: ['pronasale', 'pogonion', 'labraleInferius'],
   480→    lines: [
   481→      { from: 'pronasale', to: 'pogonion', label: 'E-Line', color: '#67e8f9' },
   482→    ],
   483→  },
   484→  sLineLowerLip: {
   485→    points: ['pronasale', 'pogonion', 'labraleInferius'],
   486→    lines: [
   487→      { from: 'pronasale', to: 'pogonion', label: 'S-Line', color: '#a78bfa' },
   488→    ],
   489→  },
   490→  holdawayHLine: {
   491→    points: ['pronasale', 'pogonion', 'labraleSuperius', 'labraleInferius'],
   492→    lines: [
   493→      { from: 'pronasale', to: 'pogonion', label: 'H-Line', color: '#ec4899' },
   494→    ],
   495→  },
   496→  burstoneLowerLip: {
   497→    points: ['subnasale', 'pogonion', 'labraleInferius'],
   498→    lines: [
   499→      { from: 'subnasale', to: 'pogonion', label: 'Burstone', color: '#fbbf24' },
   500→    ],
   501→  },
   502→
   503→  // ==========================================
   504→  // ADDITIONAL FRONT PROFILE METRICS
   505→  // ==========================================
   506→  cupidsBowDepth: {
   507→    points: ['labrale_superius', 'cupids_bow_left', 'cupids_bow_right', 'cupids_bow_center'],
   508→    lines: [
   509→      { from: 'cupids_bow_left', to: 'cupids_bow_center', label: 'Bow', color: '#ec4899' },
   510→      { from: 'cupids_bow_center', to: 'cupids_bow_right', color: '#ec4899' },
   511→    ],
   512→  },
   513→  mouthCornerPosition: {
   514→    points: ['left_cheilion', 'right_cheilion', 'left_pupila', 'right_pupila'],
   515→    lines: [
   516→      { from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth Width', color: '#ec4899' },
   517→      { from: 'left_pupila', to: 'right_pupila', label: 'IPD', color: '#06b6d4', labelPosition: 'start' },
   518→    ],
   519→  },
   520→  iaaJfaDeviation: {
   521→    points: ['left_ala_nasi', 'right_ala_nasi', 'left_gonion_inferior', 'menton', 'right_gonion_inferior'],
   522→    lines: [
   523→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'IAA', color: '#fbbf24' },
   524→      { from: 'left_gonion_inferior', to: 'menton', label: 'JFA', color: '#f97316' },
   525→      { from: 'menton', to: 'right_gonion_inferior', color: '#f97316' },
   526→    ],
   527→  },
   528→  ipsilateralAlarAngle: {
   529→    points: ['left_ala_nasi', 'subnasale', 'right_ala_nasi'],
   530→    lines: [
   531→      { from: 'left_ala_nasi', to: 'subnasale', label: 'Alar Angle', color: '#fbbf24' },
   532→      { from: 'subnasale', to: 'right_ala_nasi', color: '#fbbf24' },
   533→    ],
   534→  },
   535→  earProtrusionAngle: {
   536→    points: ['left_ear_helix', 'left_ear_attachment', 'left_tragus'],
   537→    lines: [
   538→      { from: 'left_ear_helix', to: 'left_ear_attachment', label: 'Protrusion', color: '#a78bfa' },
   539→    ],
   540→  },
   541→  earProtrusionRatio: {
   542→    points: ['left_ear_helix', 'left_ear_attachment', 'left_ear_lobule'],
   543→    lines: [
   544→      { from: 'left_ear_helix', to: 'left_ear_attachment', label: 'Distance', color: '#a78bfa' },
   545→      { from: 'left_ear_attachment', to: 'left_ear_lobule', label: 'Length', color: '#67e8f9' },
   546→    ],
   547→  },
   548→  mouthWidthToNoseRatio: {
   549→    points: ['left_cheilion', 'right_cheilion', 'left_ala_nasi', 'right_ala_nasi'],
   550→    lines: [
   551→      { from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth', color: '#ec4899' },
   552→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Nose', color: '#fbbf24' },
   553→    ],
   554→  },
   555→  lowerToUpperLipRatio: {
   556→    points: ['labrale_superius', 'mouth_middle', 'labrale_inferius'],
   557→    lines: [
   558→      { from: 'labrale_superius', to: 'mouth_middle', label: 'Upper', color: '#ec4899' },
   559→      { from: 'mouth_middle', to: 'labrale_inferius', label: 'Lower', color: '#f97316' },
   560→    ],
   561→  },
   562→  chinToPhiltrumRatio: {
   563→    points: ['subnasale', 'labrale_superius', 'labrale_inferius', 'menton'],
   564→    lines: [
   565→      { from: 'subnasale', to: 'labrale_superius', label: 'Philtrum', color: '#ec4899' },
   566→      { from: 'labrale_inferius', to: 'menton', label: 'Chin', color: '#ef4444' },
   567→    ],
   568→  },
   569→
   570→  // ==========================================
   571→  // ADDITIONAL SIDE PROFILE METRICS
   572→  // ==========================================
   573→  nasolabialAngle: {
   574→    points: ['columella', 'subnasale', 'labraleSuperius'],
   575→    lines: [
   576→      { from: 'columella', to: 'subnasale', label: 'Columella', color: '#fbbf24' },
   577→      { from: 'subnasale', to: 'labraleSuperius', label: 'Upper Lip', color: '#ec4899' },
   578→    ],
   579→  },
   580→  nasalTipAngle: {
   581→    points: ['nasion', 'pronasale', 'columella'],
   582→    lines: [
   583→      { from: 'nasion', to: 'pronasale', label: 'Dorsum', color: '#fbbf24' },
   584→      { from: 'pronasale', to: 'columella', label: 'Tip', color: '#f97316' },
   585→    ],
   586→  },
   587→  nasalProjection: {
   588→    points: ['alar_crease', 'pronasale', 'subnasale'],
   589→    lines: [
   590→      { from: 'alar_crease', to: 'pronasale', label: 'Projection', color: '#fbbf24' },
   591→    ],
   592→  },
   593→  nasalWToHRatio: {
   594→    points: ['alar_crease', 'pronasale', 'nasion', 'subnasale'],
   595→    lines: [
   596→      { from: 'alar_crease', to: 'pronasale', label: 'Width', color: '#fbbf24' },
   597→      { from: 'nasion', to: 'subnasale', label: 'Height', color: '#a78bfa' },
   598→    ],
   599→  },
   600→  noseTipRotationAngle: {

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
