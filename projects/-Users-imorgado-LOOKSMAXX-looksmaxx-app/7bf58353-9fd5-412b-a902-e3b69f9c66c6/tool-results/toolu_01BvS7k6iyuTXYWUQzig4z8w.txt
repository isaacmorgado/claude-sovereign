     1→'use client';
     2→
     3→import { useState, useEffect } from 'react';
     4→import { useRouter } from 'next/navigation';
     5→import Link from 'next/link';
     6→import {
     7→  Shield,
     8→  AlertTriangle,
     9→  CheckCircle,
    10→  Clock,
    11→  TrendingUp,
    12→  Users,
    13→  ArrowLeft,
    14→  ExternalLink,
    15→} from 'lucide-react';
    16→import { api } from '@/lib/api';
    17→import { ReportQueue } from '@/components/admin/ReportQueue';
    18→import type { ModerationStats } from '@/types/forum';
    19→
    20→export default function ModerationDashboard() {
    21→  const router = useRouter();
    22→  const [stats, setStats] = useState<ModerationStats | null>(null);
    23→  const [isLoadingStats, setIsLoadingStats] = useState(true);
    24→  const [statsError, setStatsError] = useState<string | null>(null);
    25→  const [isAuthorized, setIsAuthorized] = useState<boolean | null>(null);
    26→
    27→  useEffect(() => {
    28→    // Check if user is authenticated and is admin
    29→    const checkAuth = async () => {
    30→      try {
    31→        const response = await api.getModerationStats();
    32→        setStats(response);
    33→        setIsAuthorized(true);
    34→      } catch (err) {
    35→        if (err instanceof Error && err.message.includes('403')) {
    36→          setIsAuthorized(false);
    37→        } else if (err instanceof Error && err.message.includes('401')) {
    38→          // Not logged in, redirect to login
    39→          router.push('/login?redirect=/admin/moderation');
    40→          return;
    41→        } else {
    42→          setStatsError(err instanceof Error ? err.message : 'Failed to load stats');
    43→          setIsAuthorized(true); // Assume authorized but error occurred
    44→        }
    45→      } finally {
    46→        setIsLoadingStats(false);
    47→      }
    48→    };
    49→
    50→    checkAuth();
    51→  }, [router]);
    52→
    53→  const handleViewContent = (targetType: 'post' | 'comment', targetId: string) => {
    54→    if (targetType === 'post') {
    55→      window.open(`/forum/post/${targetId}`, '_blank');
    56→    } else {
    57→      // For comments, we'd need to know the post ID - for now just alert
    58→      alert(`Comment ID: ${targetId}\nView in forum to see full context.`);
    59→    }
    60→  };
    61→
    62→  // Loading state
    63→  if (isAuthorized === null) {
    64→    return (
    65→      <div className="min-h-screen bg-black flex items-center justify-center">
    66→        <div className="text-center">
    67→          <div className="w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4" />
    68→          <p className="text-zinc-400">Checking authorization...</p>
    69→        </div>
    70→      </div>
    71→    );
    72→  }
    73→
    74→  // Unauthorized state
    75→  if (isAuthorized === false) {
    76→    return (
    77→      <div className="min-h-screen bg-black flex items-center justify-center">
    78→        <div className="text-center max-w-md mx-auto p-8">
    79→          <Shield className="w-16 h-16 text-red-500 mx-auto mb-4" />
    80→          <h1 className="text-2xl font-bold text-white mb-2">Access Denied</h1>
    81→          <p className="text-zinc-400 mb-6">
    82→            You do not have permission to access the moderation dashboard. This area is restricted to administrators only.
    83→          </p>
    84→          <Link
    85→            href="/"
    86→            className="inline-flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition-colors"
    87→          >
    88→            <ArrowLeft className="w-4 h-4" />
    89→            Return Home
    90→          </Link>
    91→        </div>
    92→      </div>
    93→    );
    94→  }
    95→
    96→  return (
    97→    <div className="min-h-screen bg-black">
    98→      {/* Header */}
    99→      <header className="sticky top-0 z-50 bg-black/80 backdrop-blur-sm border-b border-zinc-800">
   100→        <div className="max-w-7xl mx-auto px-4 py-4">
   101→          <div className="flex items-center justify-between">
   102→            <div className="flex items-center gap-4">
   103→              <Link
   104→                href="/forum"
   105→                className="p-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg transition-colors"
   106→              >
   107→                <ArrowLeft className="w-5 h-5" />
   108→              </Link>
   109→              <div>
   110→                <h1 className="text-xl font-bold text-white flex items-center gap-2">
   111→                  <Shield className="w-5 h-5 text-cyan-400" />
   112→                  Moderation Dashboard
   113→                </h1>
   114→                <p className="text-sm text-zinc-400">Manage reports and moderate content</p>
   115→              </div>
   116→            </div>
   117→            <Link
   118→              href="/admin/moderation/banned"
   119→              className="flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg transition-colors"
   120→            >
   121→              <Users className="w-4 h-4" />
   122→              Banned Users
   123→              <ExternalLink className="w-3 h-3" />
   124→            </Link>
   125→          </div>
   126→        </div>
   127→      </header>
   128→
   129→      <main className="max-w-7xl mx-auto px-4 py-8">
   130→        {/* Stats Cards */}
   131→        {isLoadingStats ? (
   132→          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
   133→            {[...Array(4)].map((_, i) => (
   134→              <div key={i} className="h-24 bg-zinc-900 rounded-lg animate-pulse" />
   135→            ))}
   136→          </div>
   137→        ) : statsError ? (
   138→          <div className="mb-8 p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400">
   139→            {statsError}
   140→          </div>
   141→        ) : stats ? (
   142→          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
   143→            {/* Pending Reports */}
   144→            <div className="p-4 bg-zinc-900 border border-zinc-800 rounded-lg">
   145→              <div className="flex items-center gap-3 mb-2">
   146→                <div className="p-2 bg-yellow-500/10 rounded-lg">
   147→                  <AlertTriangle className="w-5 h-5 text-yellow-400" />
   148→                </div>
   149→                <span className="text-sm text-zinc-400">Pending</span>
   150→              </div>
   151→              <p className="text-2xl font-bold text-white">{stats.pendingReports}</p>
   152→            </div>
   153→
   154→            {/* Resolved Today */}
   155→            <div className="p-4 bg-zinc-900 border border-zinc-800 rounded-lg">
   156→              <div className="flex items-center gap-3 mb-2">
   157→                <div className="p-2 bg-green-500/10 rounded-lg">
   158→                  <CheckCircle className="w-5 h-5 text-green-400" />
   159→                </div>
   160→                <span className="text-sm text-zinc-400">Resolved Today</span>
   161→              </div>
   162→              <p className="text-2xl font-bold text-white">{stats.resolvedToday}</p>
   163→            </div>
   164→
   165→            {/* Resolved This Week */}
   166→            <div className="p-4 bg-zinc-900 border border-zinc-800 rounded-lg">
   167→              <div className="flex items-center gap-3 mb-2">
   168→                <div className="p-2 bg-cyan-500/10 rounded-lg">
   169→                  <TrendingUp className="w-5 h-5 text-cyan-400" />
   170→                </div>
   171→                <span className="text-sm text-zinc-400">This Week</span>
   172→              </div>
   173→              <p className="text-2xl font-bold text-white">{stats.resolvedThisWeek}</p>
   174→            </div>
   175→
   176→            {/* Total Reports */}
   177→            <div className="p-4 bg-zinc-900 border border-zinc-800 rounded-lg">
   178→              <div className="flex items-center gap-3 mb-2">
   179→                <div className="p-2 bg-purple-500/10 rounded-lg">
   180→                  <Clock className="w-5 h-5 text-purple-400" />
   181→                </div>
   182→                <span className="text-sm text-zinc-400">Total Reports</span>
   183→              </div>
   184→              <p className="text-2xl font-bold text-white">{stats.totalReports}</p>
   185→            </div>
   186→          </div>
   187→        ) : null}
   188→
   189→        {/* Reports by Reason (mini chart) */}
   190→        {stats && Object.keys(stats.reportsByReason).length > 0 && (
   191→          <div className="mb-8 p-4 bg-zinc-900 border border-zinc-800 rounded-lg">
   192→            <h3 className="text-sm font-medium text-zinc-400 mb-3">Reports by Reason</h3>
   193→            <div className="flex flex-wrap gap-3">
   194→              {Object.entries(stats.reportsByReason).map(([reason, count]) => (
   195→                <div
   196→                  key={reason}
   197→                  className="px-3 py-1.5 bg-zinc-800 rounded-lg text-sm"
   198→                >
   199→                  <span className="text-zinc-400 capitalize">{reason.replace('_', ' ')}</span>
   200→                  <span className="ml-2 text-white font-medium">{count}</span>
   201→                </div>
   202→              ))}
   203→            </div>
   204→          </div>
   205→        )}
   206→
   207→        {/* Report Queue */}
   208→        <div>
   209→          <h2 className="text-lg font-semibold text-white mb-4">Report Queue</h2>
   210→          <ReportQueue onViewContent={handleViewContent} />
   211→        </div>
   212→      </main>
   213→    </div>
   214→  );
   215→}
   216→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
