     1→'use client';
     2→
     3→import { useState, useEffect, useCallback } from 'react';
     4→import { Filter, RefreshCw, ChevronLeft, ChevronRight } from 'lucide-react';
     5→import { api } from '@/lib/api';
     6→import { ReportCard } from './ReportCard';
     7→import type {
     8→  ReportDetail,
     9→  ReportStatusEnum,
    10→  ReportReason,
    11→  TargetType,
    12→  ResolveReportRequest,
    13→} from '@/types/forum';
    14→
    15→interface ReportQueueProps {
    16→  onViewContent: (targetType: 'post' | 'comment', targetId: string) => void;
    17→}
    18→
    19→const STATUS_OPTIONS: { value: ReportStatusEnum | 'all'; label: string }[] = [
    20→  { value: 'all', label: 'All Status' },
    21→  { value: 'pending', label: 'Pending' },
    22→  { value: 'reviewed', label: 'Reviewed' },
    23→  { value: 'resolved', label: 'Resolved' },
    24→  { value: 'dismissed', label: 'Dismissed' },
    25→];
    26→
    27→const REASON_OPTIONS: { value: ReportReason | 'all'; label: string }[] = [
    28→  { value: 'all', label: 'All Reasons' },
    29→  { value: 'spam', label: 'Spam' },
    30→  { value: 'harassment', label: 'Harassment' },
    31→  { value: 'misinformation', label: 'Misinformation' },
    32→  { value: 'off_topic', label: 'Off Topic' },
    33→  { value: 'inappropriate', label: 'Inappropriate' },
    34→  { value: 'other', label: 'Other' },
    35→];
    36→
    37→const TYPE_OPTIONS: { value: TargetType | 'all'; label: string }[] = [
    38→  { value: 'all', label: 'All Types' },
    39→  { value: 'post', label: 'Posts' },
    40→  { value: 'comment', label: 'Comments' },
    41→];
    42→
    43→const PAGE_SIZE = 20;
    44→
    45→export function ReportQueue({ onViewContent }: ReportQueueProps) {
    46→  const [reports, setReports] = useState<ReportDetail[]>([]);
    47→  const [totalCount, setTotalCount] = useState(0);
    48→  const [isLoading, setIsLoading] = useState(true);
    49→  const [error, setError] = useState<string | null>(null);
    50→
    51→  // Filters
    52→  const [statusFilter, setStatusFilter] = useState<ReportStatusEnum | 'all'>('pending');
    53→  const [reasonFilter, setReasonFilter] = useState<ReportReason | 'all'>('all');
    54→  const [typeFilter, setTypeFilter] = useState<TargetType | 'all'>('all');
    55→
    56→  // Pagination
    57→  const [currentPage, setCurrentPage] = useState(1);
    58→  const totalPages = Math.ceil(totalCount / PAGE_SIZE);
    59→
    60→  const fetchReports = useCallback(async () => {
    61→    setIsLoading(true);
    62→    setError(null);
    63→    try {
    64→      const response = await api.getAdminReports({
    65→        status: statusFilter === 'all' ? undefined : statusFilter,
    66→        reason: reasonFilter === 'all' ? undefined : reasonFilter,
    67→        targetType: typeFilter === 'all' ? undefined : typeFilter,
    68→        limit: PAGE_SIZE,
    69→        offset: (currentPage - 1) * PAGE_SIZE,
    70→      });
    71→      setReports(response.reports);
    72→      setTotalCount(response.totalCount);
    73→    } catch (err) {
    74→      setError(err instanceof Error ? err.message : 'Failed to load reports');
    75→    } finally {
    76→      setIsLoading(false);
    77→    }
    78→  }, [statusFilter, reasonFilter, typeFilter, currentPage]);
    79→
    80→  useEffect(() => {
    81→    fetchReports();
    82→  }, [fetchReports]);
    83→
    84→  // Reset to page 1 when filters change
    85→  useEffect(() => {
    86→    setCurrentPage(1);
    87→  }, [statusFilter, reasonFilter, typeFilter]);
    88→
    89→  const handleResolve = async (reportId: string, data: ResolveReportRequest) => {
    90→    try {
    91→      await api.resolveReport(reportId, data);
    92→      // Update local state
    93→      setReports(prev =>
    94→        prev.map(r =>
    95→          r.id === reportId
    96→            ? { ...r, status: data.status, actionTaken: data.actionTaken || null, resolutionNotes: data.resolutionNotes || null }
    97→            : r
    98→        )
    99→      );
   100→    } catch (err) {
   101→      throw err;
   102→    }
   103→  };
   104→
   105→  const handleRemoveContent = async (targetType: 'post' | 'comment', targetId: string) => {
   106→    try {
   107→      if (targetType === 'post') {
   108→        await api.removePost(targetId);
   109→      } else {
   110→        await api.removeComment(targetId);
   111→      }
   112→    } catch (err) {
   113→      throw err;
   114→    }
   115→  };
   116→
   117→  const handleBanUser = async (userId: string) => {
   118→    try {
   119→      await api.banUser(userId);
   120→    } catch (err) {
   121→      throw err;
   122→    }
   123→  };
   124→
   125→  return (
   126→    <div className="space-y-4">
   127→      {/* Filters */}
   128→      <div className="flex flex-wrap items-center gap-3 p-4 bg-zinc-900 rounded-lg border border-zinc-800">
   129→        <Filter className="w-4 h-4 text-zinc-400" />
   130→
   131→        <select
   132→          value={statusFilter}
   133→          onChange={(e) => setStatusFilter(e.target.value as ReportStatusEnum | 'all')}
   134→          className="px-3 py-1.5 bg-zinc-800 border border-zinc-700 rounded-lg text-sm text-white focus:outline-none focus:border-cyan-500"
   135→        >
   136→          {STATUS_OPTIONS.map(opt => (
   137→            <option key={opt.value} value={opt.value}>{opt.label}</option>
   138→          ))}
   139→        </select>
   140→
   141→        <select
   142→          value={reasonFilter}
   143→          onChange={(e) => setReasonFilter(e.target.value as ReportReason | 'all')}
   144→          className="px-3 py-1.5 bg-zinc-800 border border-zinc-700 rounded-lg text-sm text-white focus:outline-none focus:border-cyan-500"
   145→        >
   146→          {REASON_OPTIONS.map(opt => (
   147→            <option key={opt.value} value={opt.value}>{opt.label}</option>
   148→          ))}
   149→        </select>
   150→
   151→        <select
   152→          value={typeFilter}
   153→          onChange={(e) => setTypeFilter(e.target.value as TargetType | 'all')}
   154→          className="px-3 py-1.5 bg-zinc-800 border border-zinc-700 rounded-lg text-sm text-white focus:outline-none focus:border-cyan-500"
   155→        >
   156→          {TYPE_OPTIONS.map(opt => (
   157→            <option key={opt.value} value={opt.value}>{opt.label}</option>
   158→          ))}
   159→        </select>
   160→
   161→        <button
   162→          onClick={fetchReports}
   163→          disabled={isLoading}
   164→          className="ml-auto flex items-center gap-2 px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg text-sm transition-colors disabled:opacity-50"
   165→        >
   166→          <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />
   167→          Refresh
   168→        </button>
   169→      </div>
   170→
   171→      {/* Results count */}
   172→      <div className="text-sm text-zinc-400">
   173→        Showing {reports.length} of {totalCount} reports
   174→      </div>
   175→
   176→      {/* Error state */}
   177→      {error && (
   178→        <div className="p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400">
   179→          {error}
   180→        </div>
   181→      )}
   182→
   183→      {/* Loading state */}
   184→      {isLoading && (
   185→        <div className="space-y-4">
   186→          {[...Array(3)].map((_, i) => (
   187→            <div key={i} className="h-32 bg-zinc-900 rounded-lg animate-pulse" />
   188→          ))}
   189→        </div>
   190→      )}
   191→
   192→      {/* Empty state */}
   193→      {!isLoading && !error && reports.length === 0 && (
   194→        <div className="p-8 text-center bg-zinc-900 rounded-lg border border-zinc-800">
   195→          <p className="text-zinc-400">No reports found matching your filters.</p>
   196→        </div>
   197→      )}
   198→
   199→      {/* Report list */}
   200→      {!isLoading && !error && reports.length > 0 && (
   201→        <div className="space-y-3">
   202→          {reports.map(report => (
   203→            <ReportCard
   204→              key={report.id}
   205→              report={report}
   206→              onResolve={handleResolve}
   207→              onRemoveContent={handleRemoveContent}
   208→              onBanUser={handleBanUser}
   209→              onViewContent={onViewContent}
   210→              isLoading={isLoading}
   211→            />
   212→          ))}
   213→        </div>
   214→      )}
   215→
   216→      {/* Pagination */}
   217→      {totalPages > 1 && (
   218→        <div className="flex items-center justify-center gap-2 pt-4">
   219→          <button
   220→            onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
   221→            disabled={currentPage === 1 || isLoading}
   222→            className="p-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
   223→          >
   224→            <ChevronLeft className="w-4 h-4" />
   225→          </button>
   226→
   227→          <span className="text-sm text-zinc-400 px-4">
   228→            Page {currentPage} of {totalPages}
   229→          </span>
   230→
   231→          <button
   232→            onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
   233→            disabled={currentPage === totalPages || isLoading}
   234→            className="p-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
   235→          >
   236→            <ChevronRight className="w-4 h-4" />
   237→          </button>
   238→        </div>
   239→      )}
   240→    </div>
   241→  );
   242→}
   243→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
