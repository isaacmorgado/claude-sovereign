     1→'use client';
     2→
     3→import { motion } from 'framer-motion';
     4→import { TrendingUp, TrendingDown, User, ScanFace, Sparkles, ChevronRight } from 'lucide-react';
     5→import { useResults } from '@/contexts/ResultsContext';
     6→import { TabContent } from '../ResultsLayout';
     7→import { ScoreCircle, ScoreBar } from '../shared';
     8→import { StrengthCard, FlawCard } from '../cards/StrengthFlawCards';
     9→import { getScoreColor } from '@/types/results';
    10→import { useState } from 'react';
    11→
    12→// ============================================
    13→// SCORE SUMMARY CARDS
    14→// ============================================
    15→
    16→interface ProfileScoreCardProps {
    17→  title: string;
    18→  score: number;
    19→  icon: React.ReactNode;
    20→  photo?: string;
    21→  ratioCount: number;
    22→  onClick?: () => void;
    23→}
    24→
    25→function ProfileScoreCard({ title, score, icon, photo, ratioCount, onClick }: ProfileScoreCardProps) {
    26→  const color = getScoreColor(score);
    27→
    28→  return (
    29→    <motion.button
    30→      onClick={onClick}
    31→      className="bg-neutral-900/80 border border-neutral-800 rounded-xl p-4 hover:border-neutral-700 transition-all text-left w-full"
    32→      whileHover={{ scale: 1.02 }}
    33→      whileTap={{ scale: 0.98 }}
    34→    >
    35→      <div className="flex items-center gap-4">
    36→        {/* Photo or icon */}
    37→        <div className="relative w-16 h-16 rounded-lg overflow-hidden bg-neutral-800 flex-shrink-0">
    38→          {photo ? (
    39→            <img src={photo} alt={title} className="w-full h-full object-cover" />
    40→          ) : (
    41→            <div className="w-full h-full flex items-center justify-center">
    42→              {icon}
    43→            </div>
    44→          )}
    45→        </div>
    46→
    47→        {/* Info */}
    48→        <div className="flex-1">
    49→          <h3 className="text-sm font-medium text-neutral-400 mb-1">{title}</h3>
    50→          <div className="flex items-baseline gap-2">
    51→            <span className="text-2xl font-bold" style={{ color }}>
    52→              {score.toFixed(2)}
    53→            </span>
    54→            <span className="text-sm text-neutral-500">/ 10</span>
    55→          </div>
    56→          <p className="text-xs text-neutral-500 mt-1">{ratioCount} measurements</p>
    57→        </div>
    58→
    59→        {/* Arrow */}
    60→        <ChevronRight size={20} className="text-neutral-600" />
    61→      </div>
    62→
    63→      {/* Score bar */}
    64→      <div className="mt-3">
    65→        <ScoreBar score={score} height={6} />
    66→      </div>
    67→    </motion.button>
    68→  );
    69→}
    70→
    71→// ============================================
    72→// HARMONY SCORE DISPLAY
    73→// ============================================
    74→
    75→function HarmonyScoreDisplay() {
    76→  const { overallScore, frontScore, sideScore } = useResults();
    77→
    78→  return (
    79→    <motion.div
    80→      className="bg-gradient-to-br from-neutral-900 to-neutral-950 border border-neutral-800 rounded-2xl p-6 md:p-8 text-center"
    81→      initial={{ opacity: 0, y: 20 }}
    82→      animate={{ opacity: 1, y: 0 }}
    83→      transition={{ duration: 0.5 }}
    84→    >
    85→      <h2 className="text-lg font-medium text-neutral-400 mb-4">Overall Harmony Score</h2>
    86→
    87→      <div className="flex justify-center mb-6">
    88→        <ScoreCircle score={overallScore} size="xl" />
    89→      </div>
    90→
    91→      <div className="flex justify-center gap-8 mb-4">
    92→        <div className="text-center">
    93→          <p className="text-xs text-neutral-500 mb-1">Front Profile</p>
    94→          <p className="text-xl font-bold" style={{ color: getScoreColor(frontScore) }}>
    95→            {frontScore.toFixed(2)}
    96→          </p>
    97→        </div>
    98→        <div className="w-px bg-neutral-800" />
    99→        <div className="text-center">
   100→          <p className="text-xs text-neutral-500 mb-1">Side Profile</p>
   101→          <p className="text-xl font-bold" style={{ color: getScoreColor(sideScore) }}>
   102→            {sideScore.toFixed(2)}
   103→          </p>
   104→        </div>
   105→      </div>
   106→
   107→      <p className="text-sm text-neutral-400">
   108→        {overallScore >= 8 ? 'Exceptional facial harmony. Your features are well-balanced and proportioned.' :
   109→          overallScore >= 6 ? 'Good facial harmony with some areas that could be optimized.' :
   110→            overallScore >= 4 ? 'Average facial harmony. Several areas have room for improvement.' :
   111→              'Below average facial harmony. Multiple areas could benefit from attention.'}
   112→      </p>
   113→    </motion.div>
   114→  );
   115→}
   116→
   117→// ============================================
   118→// OVERVIEW TAB
   119→// ============================================
   120→
   121→export function OverviewTab() {
   122→  const {
   123→    frontScore,
   124→    sideScore,
   125→    frontRatios,
   126→    sideRatios,
   127→    strengths,
   128→    flaws,
   129→    frontPhoto,
   130→    sidePhoto,
   131→    setActiveTab,
   132→  } = useResults();
   133→
   134→  const [expandedStrength, setExpandedStrength] = useState<string | null>(null);
   135→  const [expandedFlaw, setExpandedFlaw] = useState<string | null>(null);
   136→
   137→  // Show top 5 strengths and flaws
   138→  const topStrengths = strengths.slice(0, 5);
   139→  const topFlaws = flaws.slice(0, 5);
   140→
   141→  return (
   142→    <TabContent
   143→      title="Overview"
   144→      subtitle="Your complete facial harmony analysis"
   145→    >
   146→      {/* Harmony Score */}
   147→      <div className="mb-8">
   148→        <HarmonyScoreDisplay />
   149→      </div>
   150→
   151→      {/* Profile Scores */}
   152→      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
   153→        <ProfileScoreCard
   154→          title="Front Profile"
   155→          score={frontScore}
   156→          icon={<User size={24} className="text-neutral-600" />}
   157→          photo={frontPhoto}
   158→          ratioCount={frontRatios.length}
   159→          onClick={() => setActiveTab('front-ratios')}
   160→        />
   161→        <ProfileScoreCard
   162→          title="Side Profile"
   163→          score={sideScore}
   164→          icon={<ScanFace size={24} className="text-neutral-600" />}
   165→          photo={sidePhoto || undefined}
   166→          ratioCount={sideRatios.length}
   167→          onClick={() => setActiveTab('side-ratios')}
   168→        />
   169→      </div>
   170→
   171→      {/* Strengths & Flaws Grid */}
   172→      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
   173→        {/* Strengths */}
   174→        <div>
   175→          <div className="flex items-center justify-between mb-4">
   176→            <div className="flex items-center gap-2">
   177→              <TrendingUp size={20} className="text-green-400" />
   178→              <h3 className="text-lg font-semibold text-white">Strengths</h3>
   179→              <span className="text-sm text-neutral-500">({strengths.length})</span>
   180→            </div>
   181→          </div>
   182→
   183→          <div className="space-y-3">
   184→            {topStrengths.length > 0 ? (
   185→              topStrengths.map((strength) => (
   186→                <StrengthCard
   187→                  key={strength.id}
   188→                  strength={strength}
   189→                  isExpanded={expandedStrength === strength.id}
   190→                  onToggle={() => setExpandedStrength(
   191→                    expandedStrength === strength.id ? null : strength.id
   192→                  )}
   193→                />
   194→              ))
   195→            ) : (
   196→              <div className="bg-neutral-900/50 border border-neutral-800 rounded-lg p-6 text-center">
   197→                <p className="text-neutral-500">No significant strengths detected</p>
   198→              </div>
   199→            )}
   200→          </div>
   201→
   202→          {strengths.length > 5 && (
   203→            <button className="w-full mt-3 py-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors">
   204→              View all {strengths.length} strengths
   205→            </button>
   206→          )}
   207→        </div>
   208→
   209→        {/* Flaws */}
   210→        <div>
   211→          <div className="flex items-center justify-between mb-4">
   212→            <div className="flex items-center gap-2">
   213→              <TrendingDown size={20} className="text-red-400" />
   214→              <h3 className="text-lg font-semibold text-white">Areas for Improvement</h3>
   215→              <span className="text-sm text-neutral-500">({flaws.length})</span>
   216→            </div>
   217→          </div>
   218→
   219→          <div className="space-y-3">
   220→            {topFlaws.length > 0 ? (
   221→              topFlaws.map((flaw, index) => (
   222→                <FlawCard
   223→                  key={flaw.id}
   224→                  flaw={flaw}
   225→                  rank={index + 1}
   226→                  isExpanded={expandedFlaw === flaw.id}
   227→                  onToggle={() => setExpandedFlaw(
   228→                    expandedFlaw === flaw.id ? null : flaw.id
   229→                  )}
   230→                />
   231→              ))
   232→            ) : (
   233→              <div className="bg-neutral-900/50 border border-neutral-800 rounded-lg p-6 text-center">
   234→                <p className="text-neutral-500">No significant flaws detected</p>
   235→              </div>
   236→            )}
   237→          </div>
   238→
   239→          {flaws.length > 5 && (
   240→            <button className="w-full mt-3 py-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors">
   241→              View all {flaws.length} areas
   242→            </button>
   243→          )}
   244→        </div>
   245→      </div>
   246→
   247→      {/* Call to Action */}
   248→      <motion.div
   249→        className="mt-8 bg-gradient-to-r from-cyan-500/20 to-blue-600/20 border border-cyan-500/30 rounded-xl p-6 flex items-center justify-between"
   250→        initial={{ opacity: 0 }}
   251→        animate={{ opacity: 1 }}
   252→        transition={{ delay: 0.5 }}
   253→      >
   254→        <div className="flex items-center gap-4">
   255→          <div className="w-12 h-12 rounded-xl bg-cyan-500/20 flex items-center justify-center">
   256→            <Sparkles size={24} className="text-cyan-400" />
   257→          </div>
   258→          <div>
   259→            <h3 className="font-semibold text-white">Unlock Your Potential</h3>
   260→            <p className="text-sm text-neutral-400">
   261→              See personalized recommendations to improve your harmony score
   262→            </p>
   263→          </div>
   264→        </div>
   265→        <button
   266→          onClick={() => setActiveTab('plan')}
   267→          className="px-4 py-2 bg-cyan-500 text-black font-medium rounded-lg hover:bg-cyan-400 transition-colors flex items-center gap-2"
   268→        >
   269→          View Plan
   270→          <ChevronRight size={16} />
   271→        </button>
   272→      </motion.div>
   273→    </TabContent>
   274→  );
   275→}
   276→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
