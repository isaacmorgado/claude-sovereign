     1→'use client';
     2→
     3→import { motion } from 'framer-motion';
     4→import { QualityTier, SeverityLevel } from '@/lib/faceiq-scoring';
     5→import { RecommendationPhase, getScoreColor, getQualityColor, getSeverityColor } from '@/types/results';
     6→
     7→// Re-export new components
     8→export { AnimatedScore } from './AnimatedScore';
     9→export { ShareButton } from './ShareButton';
    10→export { ExportButton } from './ExportButton';
    11→
    12→// ============================================
    13→// QUALITY BADGE
    14→// ============================================
    15→
    16→interface QualityBadgeProps {
    17→  quality: QualityTier;
    18→  size?: 'sm' | 'md' | 'lg';
    19→}
    20→
    21→export function QualityBadge({ quality, size = 'md' }: QualityBadgeProps) {
    22→  const color = getQualityColor(quality);
    23→  const sizeClasses = {
    24→    sm: 'px-1.5 py-0.5 text-[10px]',
    25→    md: 'px-2 py-1 text-xs',
    26→    lg: 'px-3 py-1.5 text-sm',
    27→  };
    28→
    29→  const labels: Record<QualityTier, string> = {
    30→    ideal: 'Ideal',
    31→    excellent: 'Excellent',
    32→    good: 'Good',
    33→    below_average: 'Below Avg',
    34→  };
    35→
    36→  return (
    37→    <span
    38→      className={`inline-flex items-center font-medium rounded-full border ${sizeClasses[size]}`}
    39→      style={{
    40→        color,
    41→        backgroundColor: `${color}15`,
    42→        borderColor: `${color}30`,
    43→      }}
    44→    >
    45→      {labels[quality]}
    46→    </span>
    47→  );
    48→}
    49→
    50→// ============================================
    51→// SEVERITY BADGE
    52→// ============================================
    53→
    54→interface SeverityBadgeProps {
    55→  severity: SeverityLevel;
    56→  size?: 'sm' | 'md' | 'lg';
    57→}
    58→
    59→export function SeverityBadge({ severity, size = 'md' }: SeverityBadgeProps) {
    60→  const color = getSeverityColor(severity);
    61→  const sizeClasses = {
    62→    sm: 'px-1.5 py-0.5 text-[10px]',
    63→    md: 'px-2 py-1 text-xs',
    64→    lg: 'px-3 py-1.5 text-sm',
    65→  };
    66→
    67→  const labels: Record<SeverityLevel, string> = {
    68→    optimal: 'Optimal',
    69→    minor: 'Minor',
    70→    moderate: 'Moderate',
    71→    major: 'Major',
    72→    severe: 'Severe',
    73→    extremely_severe: 'Critical',
    74→  };
    75→
    76→  return (
    77→    <span
    78→      className={`inline-flex items-center font-medium rounded-full border ${sizeClasses[size]}`}
    79→      style={{
    80→        color,
    81→        backgroundColor: `${color}15`,
    82→        borderColor: `${color}30`,
    83→      }}
    84→    >
    85→      {labels[severity]}
    86→    </span>
    87→  );
    88→}
    89→
    90→// ============================================
    91→// PHASE BADGE
    92→// ============================================
    93→
    94→interface PhaseBadgeProps {
    95→  phase: RecommendationPhase;
    96→  size?: 'sm' | 'md' | 'lg';
    97→}
    98→
    99→export function PhaseBadge({ phase, size = 'md' }: PhaseBadgeProps) {
   100→  const configs: Record<RecommendationPhase, { color: string; bg: string; border: string }> = {
   101→    'Surgical': { color: '#ef4444', bg: '#ef444420', border: '#ef444430' },
   102→    'Minimally Invasive': { color: '#fbbf24', bg: '#fbbf2420', border: '#fbbf2430' },
   103→    'Foundational': { color: '#22c55e', bg: '#22c55e20', border: '#22c55e30' },
   104→  };
   105→
   106→  const config = configs[phase];
   107→  const sizeClasses = {
   108→    sm: 'px-1.5 py-0.5 text-[10px]',
   109→    md: 'px-2 py-1 text-xs',
   110→    lg: 'px-3 py-1.5 text-sm',
   111→  };
   112→
   113→  return (
   114→    <span
   115→      className={`inline-flex items-center font-medium rounded-full border ${sizeClasses[size]}`}
   116→      style={{
   117→        color: config.color,
   118→        backgroundColor: config.bg,
   119→        borderColor: config.border,
   120→      }}
   121→    >
   122→      {phase}
   123→    </span>
   124→  );
   125→}
   126→
   127→// ============================================
   128→// SCORE CIRCLE
   129→// ============================================
   130→
   131→interface ScoreCircleProps {
   132→  score: number;
   133→  maxScore?: number;
   134→  size?: 'sm' | 'md' | 'lg' | 'xl';
   135→  showLabel?: boolean;
   136→  animate?: boolean;
   137→}
   138→
   139→export function ScoreCircle({
   140→  score,
   141→  maxScore = 10,
   142→  size = 'md',
   143→  showLabel = true,
   144→  animate = true,
   145→}: ScoreCircleProps) {
   146→  const color = getScoreColor(score);
   147→  const percentage = (score / maxScore) * 100;
   148→
   149→  const sizeConfigs = {
   150→    sm: { size: 48, stroke: 4, fontSize: 'text-sm' },
   151→    md: { size: 64, stroke: 5, fontSize: 'text-lg' },
   152→    lg: { size: 96, stroke: 6, fontSize: 'text-2xl' },
   153→    xl: { size: 140, stroke: 8, fontSize: 'text-4xl' },
   154→  };
   155→
   156→  const config = sizeConfigs[size];
   157→  const radius = (config.size - config.stroke) / 2;
   158→  const circumference = radius * 2 * Math.PI;
   159→  const offset = circumference - (percentage / 100) * circumference;
   160→
   161→  return (
   162→    <div className="relative inline-flex items-center justify-center">
   163→      <svg
   164→        width={config.size}
   165→        height={config.size}
   166→        className="transform -rotate-90"
   167→      >
   168→        {/* Background circle */}
   169→        <circle
   170→          cx={config.size / 2}
   171→          cy={config.size / 2}
   172→          r={radius}
   173→          fill="none"
   174→          stroke="currentColor"
   175→          strokeWidth={config.stroke}
   176→          className="text-neutral-800"
   177→        />
   178→        {/* Progress circle */}
   179→        <motion.circle
   180→          cx={config.size / 2}
   181→          cy={config.size / 2}
   182→          r={radius}
   183→          fill="none"
   184→          stroke={color}
   185→          strokeWidth={config.stroke}
   186→          strokeLinecap="round"
   187→          strokeDasharray={circumference}
   188→          initial={animate ? { strokeDashoffset: circumference } : { strokeDashoffset: offset }}
   189→          animate={{ strokeDashoffset: offset }}
   190→          transition={{ duration: 1, ease: 'easeOut' }}
   191→        />
   192→      </svg>
   193→      {showLabel && (
   194→        <div className="absolute inset-0 flex flex-col items-center justify-center">
   195→          <motion.span
   196→            className={`font-bold ${config.fontSize}`}
   197→            style={{ color }}
   198→            initial={animate ? { opacity: 0, scale: 0.5 } : { opacity: 1, scale: 1 }}
   199→            animate={{ opacity: 1, scale: 1 }}
   200→            transition={{ duration: 0.5, delay: 0.5 }}
   201→          >
   202→            {score.toFixed(1)}
   203→          </motion.span>
   204→          {size !== 'sm' && (
   205→            <span className="text-xs text-neutral-500">/ {maxScore}</span>
   206→          )}
   207→        </div>
   208→      )}
   209→    </div>
   210→  );
   211→}
   212→
   213→// ============================================
   214→// SCORE BAR
   215→// ============================================
   216→
   217→interface ScoreBarProps {
   218→  score: number;
   219→  maxScore?: number;
   220→  height?: number;
   221→  showValue?: boolean;
   222→  animate?: boolean;
   223→}
   224→
   225→export function ScoreBar({
   226→  score,
   227→  maxScore = 10,
   228→  height = 8,
   229→  showValue = false,
   230→  animate = true,
   231→}: ScoreBarProps) {
   232→  const color = getScoreColor(score);
   233→  const percentage = (score / maxScore) * 100;
   234→
   235→  return (
   236→    <div className="w-full">
   237→      <div
   238→        className="w-full bg-neutral-800 rounded-full overflow-hidden"
   239→        style={{ height }}
   240→      >
   241→        <motion.div
   242→          className="h-full rounded-full"
   243→          style={{ backgroundColor: color }}
   244→          initial={animate ? { width: 0 } : { width: `${percentage}%` }}
   245→          animate={{ width: `${percentage}%` }}
   246→          transition={{ duration: 0.8, ease: 'easeOut' }}
   247→        />
   248→      </div>
   249→      {showValue && (
   250→        <div className="flex justify-between mt-1">
   251→          <span className="text-xs text-neutral-500">0</span>
   252→          <span className="text-xs font-medium" style={{ color }}>
   253→            {score.toFixed(2)}
   254→          </span>
   255→          <span className="text-xs text-neutral-500">{maxScore}</span>
   256→        </div>
   257→      )}
   258→    </div>
   259→  );
   260→}
   261→
   262→// ============================================
   263→// EXPANDABLE SECTION
   264→// ============================================
   265→
   266→interface ExpandableSectionProps {
   267→  isExpanded: boolean;
   268→  children: React.ReactNode;
   269→}
   270→
   271→export function ExpandableSection({ isExpanded, children }: ExpandableSectionProps) {
   272→  return (
   273→    <motion.div
   274→      initial={false}
   275→      animate={{
   276→        height: isExpanded ? 'auto' : 0,
   277→        opacity: isExpanded ? 1 : 0,
   278→      }}
   279→      transition={{ duration: 0.3, ease: 'easeInOut' }}
   280→      className="overflow-hidden"
   281→    >
   282→      {children}
   283→    </motion.div>
   284→  );
   285→}
   286→
   287→// ============================================
   288→// CATEGORY TAG
   289→// ============================================
   290→
   291→interface CategoryTagProps {
   292→  category: string;
   293→  color?: string;
   294→  size?: 'sm' | 'md';
   295→}
   296→
   297→export function CategoryTag({ category, color, size = 'sm' }: CategoryTagProps) {
   298→  const categoryColors: Record<string, string> = {
   299→    'Midface/Face Shape': '#67e8f9',
   300→    'Occlusion/Jaw Growth': '#a78bfa',
   301→    'Jaw Shape': '#f97316',
   302→    'Upper Third': '#84cc16',
   303→    'Eyes': '#06b6d4',
   304→    'Nose': '#fbbf24',
   305→    'Lips': '#ec4899',
   306→    'Chin': '#ef4444',
   307→    'Neck': '#14b8a6',
   308→  };
   309→
   310→  const tagColor = color || categoryColors[category] || '#6b7280';
   311→  const sizeClasses = size === 'sm' ? 'px-1.5 py-0.5 text-[10px]' : 'px-2 py-1 text-xs';
   312→
   313→  return (
   314→    <span
   315→      className={`inline-flex items-center font-medium rounded ${sizeClasses}`}
   316→      style={{
   317→        color: tagColor,
   318→        backgroundColor: `${tagColor}15`,
   319→      }}
   320→    >
   321→      {category}
   322→    </span>
   323→  );
   324→}
   325→
   326→// ============================================
   327→// METRIC VALUE DISPLAY
   328→// ============================================
   329→
   330→interface MetricValueProps {
   331→  value: number;
   332→  unit: 'x' | 'mm' | '%' | '°';
   333→  size?: 'sm' | 'md' | 'lg';
   334→}
   335→
   336→export function MetricValue({ value, unit, size = 'md' }: MetricValueProps) {
   337→  const sizeClasses = {
   338→    sm: 'text-sm',
   339→    md: 'text-lg',
   340→    lg: 'text-2xl',
   341→  };
   342→
   343→  const formatValue = () => {
   344→    if (unit === '%') return value.toFixed(1);
   345→    if (unit === '°') return value.toFixed(1);
   346→    return value.toFixed(2);
   347→  };
   348→
   349→  const unitSymbol = unit === 'x' ? '' : unit;
   350→
   351→  return (
   352→    <span className={`font-semibold text-white ${sizeClasses[size]}`}>
   353→      {formatValue()}
   354→      <span className="text-neutral-400 ml-0.5">{unitSymbol}</span>
   355→    </span>
   356→  );
   357→}
   358→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
