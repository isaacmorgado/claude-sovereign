     1→'use client';
     2→
     3→import { motion } from 'framer-motion';
     4→import { ChevronDown, TrendingDown, AlertTriangle, CheckCircle } from 'lucide-react';
     5→import { Strength, Flaw, getScoreColor, getQualityColor } from '@/types/results';
     6→import { QualityBadge, CategoryTag, ExpandableSection } from '../shared';
     7→
     8→// ============================================
     9→// STRENGTH CARD
    10→// ============================================
    11→
    12→interface StrengthCardProps {
    13→  strength: Strength;
    14→  isExpanded?: boolean;
    15→  onToggle?: () => void;
    16→}
    17→
    18→export function StrengthCard({ strength, isExpanded = false, onToggle }: StrengthCardProps) {
    19→  const color = getQualityColor(strength.qualityLevel);
    20→
    21→  return (
    22→    <motion.div
    23→      layout
    24→      className={`bg-gradient-to-br from-green-500/10 to-cyan-500/5 border rounded-xl overflow-hidden transition-all ${
    25→        isExpanded ? 'border-green-500/50' : 'border-green-500/20 hover:border-green-500/40'
    26→      }`}
    27→    >
    28→      {/* Header */}
    29→      <button
    30→        onClick={onToggle}
    31→        className="w-full p-4 flex items-start gap-3 text-left"
    32→      >
    33→        {/* Icon */}
    34→        <div className="w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center flex-shrink-0">
    35→          <CheckCircle size={20} className="text-green-400" />
    36→        </div>
    37→
    38→        {/* Content */}
    39→        <div className="flex-1 min-w-0">
    40→          <div className="flex items-center gap-2 mb-1">
    41→            <h3 className="font-semibold text-white">{strength.strengthName}</h3>
    42→            <QualityBadge quality={strength.qualityLevel} size="sm" />
    43→          </div>
    44→          <p className="text-sm text-neutral-400 line-clamp-2">{strength.summary}</p>
    45→          <div className="flex items-center gap-3 mt-2">
    46→            <CategoryTag category={strength.categoryName} />
    47→            <span className="text-sm font-medium" style={{ color }}>
    48→              Score: {strength.avgScore.toFixed(1)}/10
    49→            </span>
    50→          </div>
    51→        </div>
    52→
    53→        {/* Expand indicator */}
    54→        <motion.div
    55→          animate={{ rotate: isExpanded ? 180 : 0 }}
    56→          transition={{ duration: 0.2 }}
    57→          className="flex-shrink-0 mt-1"
    58→        >
    59→          <ChevronDown size={18} className="text-neutral-500" />
    60→        </motion.div>
    61→      </button>
    62→
    63→      {/* Expanded Content */}
    64→      <ExpandableSection isExpanded={isExpanded}>
    65→        <div className="px-4 pb-4 space-y-3 border-t border-green-500/20 pt-3">
    66→          <h4 className="text-sm font-medium text-neutral-300">Responsible Ratios</h4>
    67→          <div className="space-y-2">
    68→            {strength.responsibleRatios.map((ratio, i) => (
    69→              <div
    70→                key={i}
    71→                className="flex items-center justify-between p-2 bg-neutral-800/50 rounded-lg"
    72→              >
    73→                <span className="text-sm text-neutral-300">{ratio.ratioName}</span>
    74→                <div className="flex items-center gap-2">
    75→                  <span className="text-sm text-neutral-500">
    76→                    {ratio.value.toFixed(2)}
    77→                  </span>
    78→                  <span
    79→                    className="text-sm font-medium"
    80→                    style={{ color: getScoreColor(ratio.score) }}
    81→                  >
    82→                    {ratio.score.toFixed(1)}
    83→                  </span>
    84→                </div>
    85→              </div>
    86→            ))}
    87→          </div>
    88→        </div>
    89→      </ExpandableSection>
    90→    </motion.div>
    91→  );
    92→}
    93→
    94→// ============================================
    95→// FLAW CARD
    96→// ============================================
    97→
    98→interface FlawCardProps {
    99→  flaw: Flaw;
   100→  isExpanded?: boolean;
   101→  onToggle?: () => void;
   102→  rank?: number;
   103→}
   104→
   105→export function FlawCard({ flaw, isExpanded = false, onToggle, rank }: FlawCardProps) {
   106→  const impactColor = flaw.harmonyPercentageLost > 5 ? '#ef4444' :
   107→    flaw.harmonyPercentageLost > 2 ? '#f97316' : '#fbbf24';
   108→
   109→  return (
   110→    <motion.div
   111→      layout
   112→      className={`bg-gradient-to-br from-red-500/10 to-orange-500/5 border rounded-xl overflow-hidden transition-all ${
   113→        isExpanded ? 'border-red-500/50' : 'border-red-500/20 hover:border-red-500/40'
   114→      }`}
   115→    >
   116→      {/* Header */}
   117→      <button
   118→        onClick={onToggle}
   119→        className="w-full p-4 flex items-start gap-3 text-left"
   120→      >
   121→        {/* Icon / Rank */}
   122→        <div className="w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center flex-shrink-0">
   123→          {rank !== undefined ? (
   124→            <span className="text-red-400 font-bold">#{rank}</span>
   125→          ) : (
   126→            <AlertTriangle size={20} className="text-red-400" />
   127→          )}
   128→        </div>
   129→
   130→        {/* Content */}
   131→        <div className="flex-1 min-w-0">
   132→          <div className="flex items-center gap-2 mb-1">
   133→            <h3 className="font-semibold text-white">{flaw.flawName}</h3>
   134→          </div>
   135→          <p className="text-sm text-neutral-400 line-clamp-2">{flaw.summary}</p>
   136→          <div className="flex items-center gap-3 mt-2">
   137→            <CategoryTag category={flaw.categoryName} />
   138→            <div className="flex items-center gap-1">
   139→              <TrendingDown size={14} style={{ color: impactColor }} />
   140→              <span className="text-sm font-medium" style={{ color: impactColor }}>
   141→                -{flaw.harmonyPercentageLost.toFixed(1)}%
   142→              </span>
   143→            </div>
   144→          </div>
   145→        </div>
   146→
   147→        {/* Expand indicator */}
   148→        <motion.div
   149→          animate={{ rotate: isExpanded ? 180 : 0 }}
   150→          transition={{ duration: 0.2 }}
   151→          className="flex-shrink-0 mt-1"
   152→        >
   153→          <ChevronDown size={18} className="text-neutral-500" />
   154→        </motion.div>
   155→      </button>
   156→
   157→      {/* Expanded Content */}
   158→      <ExpandableSection isExpanded={isExpanded}>
   159→        <div className="px-4 pb-4 space-y-3 border-t border-red-500/20 pt-3">
   160→          {/* Impact metrics */}
   161→          <div className="grid grid-cols-2 gap-3">
   162→            <div className="bg-neutral-800/50 rounded-lg p-3">
   163→              <p className="text-xs text-neutral-500 mb-1">Harmony Lost</p>
   164→              <p className="text-lg font-bold" style={{ color: impactColor }}>
   165→                -{flaw.harmonyPercentageLost.toFixed(2)}%
   166→              </p>
   167→            </div>
   168→            <div className="bg-neutral-800/50 rounded-lg p-3">
   169→              <p className="text-xs text-neutral-500 mb-1">Impact Score</p>
   170→              <p className="text-lg font-bold text-white">
   171→                {flaw.standardizedImpact.toFixed(2)}
   172→              </p>
   173→            </div>
   174→          </div>
   175→
   176→          {/* Rolling impact if available */}
   177→          {flaw.rollingHarmonyPercentageLost !== undefined && (
   178→            <div className="bg-neutral-800/30 rounded-lg p-3">
   179→              <p className="text-xs text-neutral-500 mb-1">Cumulative Impact</p>
   180→              <div className="flex items-center gap-2">
   181→                <div className="flex-1 h-2 bg-neutral-700 rounded-full overflow-hidden">
   182→                  <div
   183→                    className="h-full bg-red-500"
   184→                    style={{ width: `${Math.min(flaw.rollingHarmonyPercentageLost, 100)}%` }}
   185→                  />
   186→                </div>
   187→                <span className="text-sm text-red-400">
   188→                  -{flaw.rollingHarmonyPercentageLost.toFixed(1)}%
   189→                </span>
   190→              </div>
   191→            </div>
   192→          )}
   193→
   194→          {/* Responsible ratios */}
   195→          <div>
   196→            <h4 className="text-sm font-medium text-neutral-300 mb-2">Responsible Ratios</h4>
   197→            <div className="space-y-2">
   198→              {flaw.responsibleRatios.map((ratio, i) => (
   199→                <div
   200→                  key={i}
   201→                  className="flex items-center justify-between p-2 bg-neutral-800/50 rounded-lg"
   202→                >
   203→                  <span className="text-sm text-neutral-300">{ratio.ratioName}</span>
   204→                  <div className="flex items-center gap-2">
   205→                    <span className="text-sm text-neutral-500">
   206→                      {ratio.value.toFixed(2)}
   207→                    </span>
   208→                    <span
   209→                      className="text-sm font-medium"
   210→                      style={{ color: getScoreColor(ratio.score) }}
   211→                    >
   212→                      {ratio.score.toFixed(1)}
   213→                    </span>
   214→                  </div>
   215→                </div>
   216→              ))}
   217→            </div>
   218→          </div>
   219→        </div>
   220→      </ExpandableSection>
   221→    </motion.div>
   222→  );
   223→}
   224→
   225→// ============================================
   226→// COMPACT STRENGTH/FLAW BADGES
   227→// ============================================
   228→
   229→interface CompactStrengthBadgeProps {
   230→  strength: Strength;
   231→  onClick?: () => void;
   232→}
   233→
   234→export function CompactStrengthBadge({ strength, onClick }: CompactStrengthBadgeProps) {
   235→  return (
   236→    <button
   237→      onClick={onClick}
   238→      className="inline-flex items-center gap-1.5 px-2 py-1 bg-green-500/10 border border-green-500/20 rounded-lg hover:bg-green-500/20 transition-colors"
   239→    >
   240→      <CheckCircle size={12} className="text-green-400" />
   241→      <span className="text-xs text-green-300">{strength.strengthName}</span>
   242→    </button>
   243→  );
   244→}
   245→
   246→interface CompactFlawBadgeProps {
   247→  flaw: Flaw;
   248→  onClick?: () => void;
   249→}
   250→
   251→export function CompactFlawBadge({ flaw, onClick }: CompactFlawBadgeProps) {
   252→  return (
   253→    <button
   254→      onClick={onClick}
   255→      className="inline-flex items-center gap-1.5 px-2 py-1 bg-red-500/10 border border-red-500/20 rounded-lg hover:bg-red-500/20 transition-colors"
   256→    >
   257→      <AlertTriangle size={12} className="text-red-400" />
   258→      <span className="text-xs text-red-300">{flaw.flawName}</span>
   259→      <span className="text-[10px] text-red-400">-{flaw.harmonyPercentageLost.toFixed(1)}%</span>
   260→    </button>
   261→  );
   262→}
   263→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
