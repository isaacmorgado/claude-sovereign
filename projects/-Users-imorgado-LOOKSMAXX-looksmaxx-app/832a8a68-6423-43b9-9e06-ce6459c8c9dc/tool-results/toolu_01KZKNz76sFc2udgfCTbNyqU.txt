     1→/**
     2→ * FaceIQ-Style Results Page Types
     3→ * Complete type definitions for the results UI
     4→ */
     5→
     6→import { QualityTier, SeverityLevel, MeasurementUnit } from '@/lib/faceiq-scoring';
     7→
     8→// ============================================
     9→// ILLUSTRATION TYPES
    10→// ============================================
    11→
    12→export interface IllustrationPoint {
    13→  type: 'landmark' | 'calculated';
    14→  landmarkId?: string;
    15→  x?: number;
    16→  y?: number;
    17→  label?: string;
    18→}
    19→
    20→export interface IllustrationLine {
    21→  from: string;
    22→  to: string;
    23→  color: string;
    24→  style?: 'solid' | 'dashed';
    25→  label?: string;
    26→  labelColor?: string;
    27→  labelPosition?: 'start' | 'middle' | 'end';
    28→}
    29→
    30→export interface RatioIllustration {
    31→  points: Record<string, IllustrationPoint>;
    32→  lines: Record<string, IllustrationLine>;
    33→}
    34→
    35→// ============================================
    36→// RATIO/MEASUREMENT TYPES
    37→// ============================================
    38→
    39→export interface Ratio {
    40→  id: string;
    41→  name: string;
    42→  value: number;
    43→  score: number;  // 0-10 scale
    44→  standardizedScore: number;
    45→  unit: 'x' | 'mm' | '%' | '°';
    46→  idealMin: number;
    47→  idealMax: number;
    48→  rangeMin: number;
    49→  rangeMax: number;
    50→  description: string;
    51→  category: string;
    52→  qualityLevel: QualityTier;
    53→  severity: SeverityLevel;
    54→  illustration: RatioIllustration;
    55→  mayIndicateFlaws: string[];
    56→  mayIndicateStrengths: string[];
    57→  usedLandmarks: string[];
    58→  scoringCurveConfig?: {
    59→    decayRate: number;
    60→    maxScore: number;
    61→  };
    62→}
    63→
    64→// ============================================
    65→// STRENGTH/FLAW TYPES
    66→// ============================================
    67→
    68→export interface ResponsibleRatio {
    69→  ratioName: string;
    70→  ratioId: string;
    71→  score: number;
    72→  value: number;
    73→  isObfuscated?: boolean;
    74→}
    75→
    76→export interface Strength {
    77→  id: string;
    78→  strengthName: string;
    79→  summary: string;
    80→  avgScore: number;
    81→  qualityLevel: QualityTier;
    82→  categoryName: string;
    83→  responsibleRatios: ResponsibleRatio[];
    84→}
    85→
    86→export interface Flaw {
    87→  id: string;
    88→  flawName: string;
    89→  summary: string;
    90→  harmonyPercentageLost: number;
    91→  standardizedImpact: number;
    92→  categoryName: string;
    93→  isOther?: boolean;
    94→  responsibleRatios: ResponsibleRatio[];
    95→  rollingPointsDeducted?: number;
    96→  rollingHarmonyPercentageLost?: number;
    97→  rollingStandardizedImpact?: number;
    98→}
    99→
   100→// ============================================
   101→// RECOMMENDATION TYPES
   102→// ============================================
   103→
   104→export type RecommendationPhase = 'Surgical' | 'Minimally Invasive' | 'Foundational';
   105→
   106→export interface RecommendationTimeline {
   107→  effect_start: 'immediate' | 'delayed' | 'gradual';
   108→  full_results_weeks: number;
   109→  full_results_weeks_max?: number;
   110→}
   111→
   112→export interface RecommendationCost {
   113→  type: 'flat' | 'per_month' | 'per_session';
   114→  min: number;
   115→  max: number;
   116→  currency: string;
   117→}
   118→
   119→export interface RatioImpact {
   120→  ratioId: string;
   121→  ratioName: string;
   122→  direction: 'increase' | 'decrease' | 'both';
   123→  percentageEffect: number;
   124→}
   125→
   126→export interface Recommendation {
   127→  ref_id: string;
   128→  name: string;
   129→  description: string;
   130→  phase: RecommendationPhase;
   131→  impact: number;  // 0-1 effectiveness score
   132→  coverage: number;  // Number of metrics improved
   133→  percentage: string;  // e.g., "10-20%"
   134→  expectedImprovementRange?: { min: number; max: number };
   135→  matchedFlaws: string[];
   136→  matchedRatios: string[];
   137→  ratios_impacted: RatioImpact[];
   138→  timeline: RecommendationTimeline;
   139→  cost: RecommendationCost;
   140→  risks_side_effects: string | null;
   141→  warnings: string[];
   142→  gender: 'male' | 'female' | 'both';
   143→}
   144→
   145→// ============================================
   146→// HARMONY ANALYSIS TYPES
   147→// ============================================
   148→
   149→export interface ProfileAnalysis {
   150→  standardizedScore: number;
   151→  ratios: Ratio[];
   152→  overallAIDescription?: string | null;
   153→}
   154→
   155→export interface FullHarmonyAnalysis {
   156→  standardizedScore: number;
   157→  front: ProfileAnalysis;
   158→  side: ProfileAnalysis;
   159→  strengths: Strength[];
   160→  flaws: Flaw[];
   161→}
   162→
   163→// ============================================
   164→// FACE DATA TYPES
   165→// ============================================
   166→
   167→export interface FaceData {
   168→  id: string;
   169→  userId?: string;
   170→  frontPhotoUrl: string;
   171→  sidePhotoUrl?: string;
   172→  harmonyScore: number | null;
   173→  frontHarmonyScore: number | null;
   174→  sideHarmonyScore: number | null;
   175→  gender: 'male' | 'female';
   176→  race?: string;
   177→  unlocked: boolean;
   178→  actionPlanUnlocked: boolean;
   179→  harmonyAnalysis: FullHarmonyAnalysis;
   180→}
   181→
   182→// ============================================
   183→// UI STATE TYPES
   184→// ============================================
   185→
   186→export type ResultsTab =
   187→  | 'overview'
   188→  | 'front-ratios'
   189→  | 'side-ratios'
   190→  | 'plan'
   191→  | 'options'
   192→  | 'support';
   193→
   194→export interface ResultsUIState {
   195→  activeTab: ResultsTab;
   196→  expandedMeasurementId: string | null;
   197→  selectedVisualizationMetric: string | null;
   198→  categoryFilter: string | null;
   199→  showLandmarkOverlay: boolean;
   200→}
   201→
   202→// ============================================
   203→// CATEGORY TYPES
   204→// ============================================
   205→
   206→export interface MeasurementCategory {
   207→  id: string;
   208→  name: string;
   209→  color: string;
   210→  description: string;
   211→}
   212→
   213→export const MEASUREMENT_CATEGORIES: MeasurementCategory[] = [
   214→  { id: 'midface', name: 'Midface/Face Shape', color: '#67e8f9', description: 'Facial proportions and overall shape' },
   215→  { id: 'jaw-growth', name: 'Occlusion/Jaw Growth', color: '#a78bfa', description: 'Jaw development and bite alignment' },
   216→  { id: 'jaw-shape', name: 'Jaw Shape', color: '#f97316', description: 'Jawline contour and angles' },
   217→  { id: 'upper-third', name: 'Upper Third', color: '#84cc16', description: 'Forehead and hairline proportions' },
   218→  { id: 'eyes', name: 'Eyes', color: '#06b6d4', description: 'Eye shape, spacing, and canthal tilt' },
   219→  { id: 'nose', name: 'Nose', color: '#fbbf24', description: 'Nasal proportions and angles' },
   220→  { id: 'lips', name: 'Lips', color: '#ec4899', description: 'Lip proportions and projection' },
   221→  { id: 'chin', name: 'Chin', color: '#ef4444', description: 'Chin projection and shape' },
   222→  { id: 'neck', name: 'Neck', color: '#14b8a6', description: 'Neck angle and throat definition' },
   223→  { id: 'other', name: 'Other', color: '#6b7280', description: 'Additional measurements' },
   224→];
   225→
   226→// ============================================
   227→// SCORE COLOR HELPERS
   228→// ============================================
   229→
   230→export function getScoreColor(score: number): string {
   231→  if (score >= 8) return '#67e8f9';  // Cyan - ideal
   232→  if (score >= 6) return '#22c55e';  // Green - good
   233→  if (score >= 4) return '#fbbf24';  // Yellow - fair
   234→  return 'rgb(227, 67, 67)';         // Red - poor
   235→}
   236→
   237→export function getQualityColor(quality: QualityTier): string {
   238→  switch (quality) {
   239→    case 'ideal': return '#67e8f9';
   240→    case 'excellent': return '#22c55e';
   241→    case 'good': return '#fbbf24';
   242→    case 'below_average': return 'rgb(227, 67, 67)';
   243→    default: return '#6b7280';
   244→  }
   245→}
   246→
   247→export function getSeverityColor(severity: SeverityLevel): string {
   248→  switch (severity) {
   249→    case 'optimal': return '#67e8f9';
   250→    case 'minor': return '#22c55e';
   251→    case 'moderate': return '#fbbf24';
   252→    case 'major': return '#f97316';
   253→    case 'severe': return '#ef4444';
   254→    case 'extremely_severe': return '#dc2626';
   255→    default: return '#6b7280';
   256→  }
   257→}
   258→
   259→export function getCategoryColor(categoryName: string): string {
   260→  const cat = MEASUREMENT_CATEGORIES.find(c =>
   261→    c.name.toLowerCase().includes(categoryName.toLowerCase()) ||
   262→    categoryName.toLowerCase().includes(c.name.toLowerCase())
   263→  );
   264→  return cat?.color || '#6b7280';
   265→}
   266→
   267→// ============================================
   268→// UNIT FORMATTING
   269→// ============================================
   270→
   271→export function formatUnit(unit: 'x' | 'mm' | '%' | '°' | MeasurementUnit): string {
   272→  switch (unit) {
   273→    case 'x':
   274→    case 'ratio': return 'x';
   275→    case 'mm': return 'mm';
   276→    case '%':
   277→    case 'percent': return '%';
   278→    case '°':
   279→    case 'degrees': return '°';
   280→    default: return '';
   281→  }
   282→}
   283→
   284→export function formatValue(value: number, unit: 'x' | 'mm' | '%' | '°' | MeasurementUnit): string {
   285→  const unitStr = formatUnit(unit);
   286→  if (unit === '%' || unit === 'percent') {
   287→    return `${value.toFixed(1)}${unitStr}`;
   288→  }
   289→  if (unit === '°' || unit === 'degrees') {
   290→    return `${value.toFixed(1)}${unitStr}`;
   291→  }
   292→  return `${value.toFixed(2)}${unitStr}`;
   293→}
   294→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
