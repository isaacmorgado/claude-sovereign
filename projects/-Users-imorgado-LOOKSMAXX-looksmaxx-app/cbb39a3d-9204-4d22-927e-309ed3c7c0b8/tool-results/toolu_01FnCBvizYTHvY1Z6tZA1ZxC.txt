                                      Table "public.users"
         Column         |            Type             | Collation | Nullable |     Default      
------------------------+-----------------------------+-----------+----------+------------------
 id                     | uuid                        |           | not null | 
 email                  | character varying           |           | not null | 
 password_hash          | character varying           |           | not null | 
 name                   | character varying           |           |          | 
 plan                   | plantype                    |           |          | 
 stripe_customer_id     | character varying           |           |          | 
 stripe_subscription_id | character varying           |           |          | 
 created_at             | timestamp without time zone |           |          | 
 updated_at             | timestamp without time zone |           |          | 
 username               | character varying(30)       |           | not null | 
 terms_accepted_at      | timestamp without time zone |           |          | 
 referral_code          | character varying(50)       |           |          | 
 referred_by            | character varying(100)      |           |          | 
 password_reset_token   | character varying(255)      |           |          | 
 password_reset_expires | timestamp without time zone |           |          | 
 role                   | userrole                    |           |          | 'user'::userrole
Indexes:
    "users_pkey" PRIMARY KEY, btree (id)
    "idx_users_password_reset_token" btree (password_reset_token)
    "idx_users_referral_code" btree (referral_code)
    "idx_users_referred_by" btree (referred_by)
    "idx_users_username_lower" UNIQUE, btree (lower(username::text))
    "ix_users_email" UNIQUE, btree (email)
Referenced by:
    TABLE "analyses" CONSTRAINT "analyses_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id)
    TABLE "forum_comments" CONSTRAINT "forum_comments_author_id_fkey" FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "forum_posts" CONSTRAINT "forum_posts_author_id_fkey" FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "forum_reports" CONSTRAINT "forum_reports_reporter_id_fkey" FOREIGN KEY (reporter_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "forum_reports" CONSTRAINT "forum_reports_reviewed_by_fkey" FOREIGN KEY (reviewed_by) REFERENCES users(id) ON DELETE SET NULL
    TABLE "forum_votes" CONSTRAINT "forum_votes_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "leaderboard_scores" CONSTRAINT "leaderboard_scores_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "payments" CONSTRAINT "payments_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id)
    TABLE "physique_analyses" CONSTRAINT "physique_analyses_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id)
    TABLE "vision_extractions" CONSTRAINT "vision_extractions_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id)