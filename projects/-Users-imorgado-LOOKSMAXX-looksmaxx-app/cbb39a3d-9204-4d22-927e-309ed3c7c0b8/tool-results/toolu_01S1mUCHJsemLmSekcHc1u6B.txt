The file /Users/imorgado/LOOKSMAXX/looksmaxx-api/app/routers/auth.py has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
    60→            stripe_promo_id = referral.stripe_promotion_code_id
    61→            # Increment usage count
    62→            referral.total_uses += 1
    63→
    64→    # Create user with explicit defaults (avoid db.refresh which causes schema issues)
    65→    hashed_password = AuthService.hash_password(user_data.password)
    66→    now = datetime.utcnow()
    67→    from app.models.user import PlanType
    68→    user = User(
    69→        id=uuid4(),
    70→        email=user_data.email,
    71→        password_hash=hashed_password,
    72→        name=user_data.name,
    73→        username=user_data.username,
    74→        terms_accepted_at=now if user_data.terms_accepted else None,
    75→        referral_code=user_data.referral_code,
    76→        referred_by=stripe_promo_id,
    77→        plan=PlanType.FREE,
    78→        created_at=now,
    79→        updated_at=now,
    80→    )
    81→
    82→    db.add(user)
    83→    await db.commit()
    84→    # Skip refresh - we already have all values and don't need DB-generated ones