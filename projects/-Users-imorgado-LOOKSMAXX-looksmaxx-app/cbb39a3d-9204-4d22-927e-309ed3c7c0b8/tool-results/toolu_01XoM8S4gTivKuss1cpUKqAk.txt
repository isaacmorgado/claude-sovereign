The file /Users/imorgado/LOOKSMAXX/looksmaxx-api/app/routers/auth.py has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
    22→
    23→
    24→@router.post("/register", response_model=Token)
    25→async def register(user_data: UserCreate, db: AsyncSession = Depends(get_db)):
    26→    """Register a new user"""
    27→    # Check if email exists - only select id to avoid loading full model
    28→    result = await db.execute(select(User.id).where(User.email == user_data.email))
    29→    existing_user = result.scalar_one_or_none()
    30→
    31→    if existing_user:
    32→        raise HTTPException(
    33→            status_code=status.HTTP_400_BAD_REQUEST,
    34→            detail="Email already registered"
    35→        )
    36→
    37→    # Check if username already exists (case-insensitive) - only select id
    38→    result = await db.execute(
    39→        select(User.id).where(func.lower(User.username) == user_data.username.lower())
    40→    )
    41→    existing_username = result.scalar_one_or_none()
    42→
    43→    if existing_username:
    44→        raise HTTPException(
    45→            status_code=status.HTTP_400_BAD_REQUEST,
    46→            detail="Username already taken"
    47→        )
    48→
    49→    # Validate referral code if provided
    50→    stripe_promo_id = None
    51→    if user_data.referral_code: