     1→'use client';
     2→
     3→import { useEffect, useState } from 'react';
     4→import { ResultsProvider } from '@/contexts/ResultsContext';
     5→import { Results } from '@/components/results/Results';
     6→import { LandmarkPoint, FRONT_PROFILE_LANDMARKS, SIDE_PROFILE_LANDMARKS } from '@/lib/landmarks';
     7→import { Ethnicity, Gender } from '@/lib/harmony-scoring';
     8→
     9→// Note: Metadata cannot be exported from client components
    10→// The page title is set in the root layout
    11→
    12→// Demo data for testing - in production this would come from the analysis flow
    13→const generateDemoLandmarks = (baseLandmarks: LandmarkPoint[]): LandmarkPoint[] => {
    14→  return baseLandmarks.map(landmark => ({
    15→    ...landmark,
    16→    // Add slight randomization to simulate real placement
    17→    x: landmark.x + (Math.random() - 0.5) * 0.02,
    18→    y: landmark.y + (Math.random() - 0.5) * 0.02,
    19→  }));
    20→};
    21→
    22→// Generate demo data outside component to avoid closure issues
    23→const createDemoData = () => ({
    24→  frontLandmarks: generateDemoLandmarks(FRONT_PROFILE_LANDMARKS),
    25→  sideLandmarks: generateDemoLandmarks(SIDE_PROFILE_LANDMARKS),
    26→  frontPhoto: '/demo-front.jpg',
    27→  sidePhoto: '/demo-side.jpg',
    28→  gender: 'male' as Gender,
    29→  ethnicity: 'white' as Ethnicity,
    30→});
    31→
    32→export default function ResultsPage() {
    33→  const [mounted, setMounted] = useState(false);
    34→  const [initialData, setInitialData] = useState<{
    35→    frontLandmarks: LandmarkPoint[];
    36→    sideLandmarks: LandmarkPoint[];
    37→    frontPhoto: string;
    38→    sidePhoto?: string;
    39→    gender: Gender;
    40→    ethnicity?: Ethnicity;
    41→  } | null>(null);
    42→
    43→  useEffect(() => {
    44→    // Mark as mounted (client-side only)
    45→    setMounted(true);
    46→
    47→    try {
    48→      // Try to get data from sessionStorage (set by analysis page)
    49→      const storedData = typeof window !== 'undefined'
    50→        ? sessionStorage.getItem('analysisResults')
    51→        : null;
    52→
    53→      if (storedData) {
    54→        const parsed = JSON.parse(storedData);
    55→        setInitialData(parsed);
    56→      } else {
    57→        // No stored data - use demo data
    58→        setInitialData(createDemoData());
    59→      }
    60→    } catch (e) {
    61→      console.error('Failed to load analysis results:', e);
    62→      // Use demo data as fallback
    63→      setInitialData(createDemoData());
    64→    }
    65→  }, []);
    66→
    67→  // Show loading state until mounted and data is ready
    68→  if (!mounted || !initialData) {
    69→    return (
    70→      <div className="min-h-screen bg-black flex items-center justify-center">
    71→        <div className="text-center">
    72→          <div className="w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4" />
    73→          <p className="text-neutral-400">Loading your analysis...</p>
    74→        </div>
    75→      </div>
    76→    );
    77→  }
    78→
    79→  return (
    80→    <ResultsProvider initialData={initialData}>
    81→      <Results />
    82→    </ResultsProvider>
    83→  );
    84→}
    85→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
