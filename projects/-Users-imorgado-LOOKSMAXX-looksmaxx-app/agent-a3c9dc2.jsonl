{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":"Redesign /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx to match this premium design style from the FAQ/Sources pages:\n\nDESIGN PATTERNS TO APPLY:\n1. Headers: `text-3xl font-black tracking-tighter italic uppercase` with cyan accent spans\n2. Section headers: `text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600` with divider line (`flex-1 h-px bg-neutral-800`)\n3. Cards: `rounded-2xl bg-neutral-900/40 border border-white/5 hover:border-white/10`\n4. Badges: `font-black uppercase tracking-wider rounded-lg` with subtle bg and border\n5. Labels: `text-[10px] font-bold uppercase tracking-wider text-neutral-600`\n6. Buttons: `rounded-xl bg-neutral-900/50 border border-white/5` with hover states\n7. Premium containers: `rounded-[2rem] bg-neutral-900/40 border border-white/5 p-5`\n8. Icons in boxes: `w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center`\n\nMake sure to:\n- Update all badges to use UPPERCASE text with tracking-wider\n- Use consistent rounded-xl or rounded-2xl on cards\n- Add subtle borders with white/5 opacity\n- Use font-black for important text\n- Keep the functionality intact, just update the styling\n\nWrite the updated file directly."},"uuid":"4a4afd45-a835-4101-9422-f4a02b76739c","timestamp":"2025-12-26T20:36:38.746Z"}
{"parentUuid":"4a4afd45-a835-4101-9422-f4a02b76739c","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01FzeUSs8dmDrF5ampmK2Q2S","type":"message","role":"assistant","content":[{"type":"text","text":"I'll read the current ArchetypeTab.tsx file first to understand its structure and functionality, then redesign it with the premium design patterns."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":35482,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":35482,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwWAxNuMzFDTav7Ua7k","type":"assistant","uuid":"ad01c001-fee6-4aaa-8fb0-fd25a9c14e69","timestamp":"2025-12-26T20:36:44.432Z"}
{"parentUuid":"ad01c001-fee6-4aaa-8fb0-fd25a9c14e69","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01FzeUSs8dmDrF5ampmK2Q2S","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011dfCzYKLL2UpCuBPJoLHFu","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":35482,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":35482,"ephemeral_1h_input_tokens":0},"output_tokens":119,"service_tier":"standard"}},"requestId":"req_011CWVwWAxNuMzFDTav7Ua7k","type":"assistant","uuid":"3284516c-9795-4ac5-ab91-3d9bb28454c4","timestamp":"2025-12-26T20:36:45.119Z"}
{"parentUuid":"3284516c-9795-4ac5-ab91-3d9bb28454c4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011dfCzYKLL2UpCuBPJoLHFu","type":"tool_result","content":"     1â†’'use client';\n     2â†’\n     3â†’import { useMemo, useEffect, useState } from 'react';\n     4â†’import { motion } from 'framer-motion';\n     5â†’import Link from 'next/link';\n     6â†’import {\n     7â†’  Info,\n     8â†’  Target,\n     9â†’  Palette,\n    10â†’  TrendingUp,\n    11â†’  Users,\n    12â†’  ArrowRight,\n    13â†’  BookOpen,\n    14â†’  Clock,\n    15â†’  Brain,\n    16â†’  Wrench,\n    17â†’  TrendingDown,\n    18â†’  Dumbbell,\n    19â†’  Calendar,\n    20â†’  Heart,\n    21â†’  Utensils,\n    22â†’  Droplet,\n    23â†’} from 'lucide-react';\n    24â†’import { useResults } from '@/contexts/ResultsContext';\n    25â†’import { Guide } from '@/types/guides';\n    26â†’import { getGuideById } from '@/data/guides';\n    27â†’import { TabContent } from '../ResultsLayout';\n    28â†’import { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\n    29â†’import {\n    30â†’  ARCHETYPE_COLORS,\n    31â†’  ConfidenceBar,\n    32â†’} from '@/components/psl/archetype/ArchetypeTraits';\n    33â†’import {\n    34â†’  classifyFromRatios,\n    35â†’  ArchetypeClassification,\n    36â†’  ArchetypeCategory,\n    37â†’} from '@/lib/archetype-classifier';\n    38â†’import { api, ArchetypeForumRecommendation } from '@/lib/api';\n    39â†’\n    40â†’// ============================================\n    41â†’// ALL SCORES - COMPACT GRID\n    42â†’// ============================================\n    43â†’\n    44â†’function AllArchetypeScores({\n    45â†’  classification,\n    46â†’}: {\n    47â†’  classification: ArchetypeClassification;\n    48â†’}) {\n    49â†’  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n    50â†’\n    51â†’  return (\n    52â†’    <motion.div\n    53â†’      initial={{ opacity: 0 }}\n    54â†’      animate={{ opacity: 1 }}\n    55â†’      transition={{ delay: 0.2 }}\n    56â†’      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"\n    57â†’    >\n    58â†’      <div className=\"flex items-center justify-between mb-3\">\n    59â†’        <h3 className=\"text-sm font-medium text-neutral-400\">All Category Matches</h3>\n    60â†’      </div>\n    61â†’\n    62â†’      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2\">\n    63â†’        {sortedScores.map((score, index) => {\n    64â†’          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n    65â†’          const isPrimary = index === 0;\n    66â†’\n    67â†’          return (\n    68â†’            <div\n    69â†’              key={score.category}\n    70â†’              className={`relative p-3 rounded-lg border transition-all ${\n    71â†’                isPrimary\n    72â†’                  ? 'bg-neutral-800 border-cyan-500/30'\n    73â†’                  : 'bg-neutral-800/50 border-neutral-700/50 hover:border-neutral-600'\n    74â†’              }`}\n    75â†’            >\n    76â†’              {isPrimary && (\n    77â†’                <div className=\"absolute -top-2 left-2 px-1.5 py-0.5 bg-cyan-500 rounded text-[9px] font-medium text-black\">\n    78â†’                  PRIMARY\n    79â†’                </div>\n    80â†’              )}\n    81â†’              <div\n    82â†’                className=\"text-2xl font-bold mb-0.5\"\n    83â†’                style={{ color: colors?.primary || '#6b7280' }}\n    84â†’              >\n    85â†’                {score.score}%\n    86â†’              </div>\n    87â†’              <div className=\"text-[10px] text-neutral-500 truncate\">{score.category}</div>\n    88â†’              {/* Mini bar */}\n    89â†’              <div className=\"mt-2 h-1 bg-neutral-700 rounded-full overflow-hidden\">\n    90â†’                <div\n    91â†’                  className=\"h-full rounded-full transition-all\"\n    92â†’                  style={{\n    93â†’                    width: `${score.score}%`,\n    94â†’                    backgroundColor: colors?.primary || '#6b7280',\n    95â†’                  }}\n    96â†’                />\n    97â†’              </div>\n    98â†’            </div>\n    99â†’          );\n   100â†’        })}\n   101â†’      </div>\n   102â†’    </motion.div>\n   103â†’  );\n   104â†’}\n   105â†’\n   106â†’// ============================================\n   107â†’// STYLE RECOMMENDATIONS - COMPACT CARDS\n   108â†’// ============================================\n   109â†’\n   110â†’function StyleRecommendations({\n   111â†’  classification,\n   112â†’}: {\n   113â†’  classification: ArchetypeClassification;\n   114â†’}) {\n   115â†’  const { styleGuide, primary } = classification;\n   116â†’  const colors = ARCHETYPE_COLORS[primary.category];\n   117â†’\n   118â†’  return (\n   119â†’    <motion.div\n   120â†’      initial={{ opacity: 0 }}\n   121â†’      animate={{ opacity: 1 }}\n   122â†’      transition={{ delay: 0.3 }}\n   123â†’      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"\n   124â†’    >\n   125â†’      <div className=\"flex items-center gap-2 mb-3\">\n   126â†’        <Palette className=\"w-4 h-4 text-purple-400\" />\n   127â†’        <h3 className=\"text-sm font-medium text-white\">{primary.subArchetype} Style Guide</h3>\n   128â†’      </div>\n   129â†’\n   130â†’      <div className=\"grid grid-cols-3 gap-3\">\n   131â†’        {/* Clothing */}\n   132â†’        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n   133â†’          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n   134â†’            Clothing\n   135â†’          </h4>\n   136â†’          <div className=\"flex flex-wrap gap-1\">\n   137â†’            {styleGuide.clothing.slice(0, 3).map((item) => (\n   138â†’              <span\n   139â†’                key={item}\n   140â†’                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"\n   141â†’              >\n   142â†’                {item}\n   143â†’              </span>\n   144â†’            ))}\n   145â†’          </div>\n   146â†’        </div>\n   147â†’\n   148â†’        {/* Hair */}\n   149â†’        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n   150â†’          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n   151â†’            Hair\n   152â†’          </h4>\n   153â†’          <div className=\"flex flex-wrap gap-1\">\n   154â†’            {styleGuide.hair.slice(0, 3).map((item) => (\n   155â†’              <span\n   156â†’                key={item}\n   157â†’                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"\n   158â†’              >\n   159â†’                {item}\n   160â†’              </span>\n   161â†’            ))}\n   162â†’          </div>\n   163â†’        </div>\n   164â†’\n   165â†’        {/* Colors */}\n   166â†’        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n   167â†’          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n   168â†’            Colors\n   169â†’          </h4>\n   170â†’          <div className=\"flex flex-wrap gap-1\">\n   171â†’            {styleGuide.colors.map((color) => (\n   172â†’              <span\n   173â†’                key={color}\n   174â†’                className=\"text-[11px] px-2 py-1 rounded border border-neutral-600 text-neutral-300\"\n   175â†’                style={{ borderColor: `${colors.primary}40` }}\n   176â†’              >\n   177â†’                {color}\n   178â†’              </span>\n   179â†’            ))}\n   180â†’          </div>\n   181â†’        </div>\n   182â†’      </div>\n   183â†’    </motion.div>\n   184â†’  );\n   185â†’}\n   186â†’\n   187â†’// ============================================\n   188â†’// TRANSITION OPPORTUNITIES\n   189â†’// ============================================\n   190â†’\n   191â†’function TransitionOpportunities({\n   192â†’  classification,\n   193â†’}: {\n   194â†’  classification: ArchetypeClassification;\n   195â†’}) {\n   196â†’  const { transitionPath, primary, allScores } = classification;\n   197â†’\n   198â†’  if (!transitionPath) return null;\n   199â†’\n   200â†’  // Find the target score\n   201â†’  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n   202â†’  const primaryColors = ARCHETYPE_COLORS[primary.category];\n   203â†’  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n   204â†’\n   205â†’  return (\n   206â†’    <motion.div\n   207â†’      initial={{ opacity: 0 }}\n   208â†’      animate={{ opacity: 1 }}\n   209â†’      transition={{ delay: 0.4 }}\n   210â†’      className=\"bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-xl p-6 border border-cyan-500/20\"\n   211â†’    >\n   212â†’      <div className=\"flex items-center gap-2 mb-4\">\n   213â†’        <TrendingUp className=\"w-5 h-5 text-green-400\" />\n   214â†’        <h3 className=\"font-semibold text-white\">Archetype Transition Potential</h3>\n   215â†’      </div>\n   216â†’\n   217â†’      <div className=\"grid md:grid-cols-2 gap-6\">\n   218â†’        {/* Current */}\n   219â†’        <div className=\"bg-neutral-900/50 rounded-lg p-4\">\n   220â†’          <p className=\"text-xs text-neutral-500 mb-2\">Current Archetype</p>\n   221â†’          <p\n   222â†’            className=\"text-xl font-bold mb-1\"\n   223â†’            style={{ color: primaryColors.primary }}\n   224â†’          >\n   225â†’            {primary.subArchetype}\n   226â†’          </p>\n   227â†’          <p className=\"text-sm text-neutral-400\">{primary.category}</p>\n   228â†’          <div className=\"mt-3\">\n   229â†’            <ConfidenceBar\n   230â†’              confidence={primary.confidence}\n   231â†’              label=\"Match\"\n   232â†’              color={primaryColors.primary}\n   233â†’            />\n   234â†’          </div>\n   235â†’        </div>\n   236â†’\n   237â†’        {/* Target */}\n   238â†’        <div className=\"bg-neutral-900/50 rounded-lg p-4\">\n   239â†’          <p className=\"text-xs text-neutral-500 mb-2\">Transition Target</p>\n   240â†’          <p\n   241â†’            className=\"text-xl font-bold mb-1\"\n   242â†’            style={{ color: targetColors?.primary || '#67e8f9' }}\n   243â†’          >\n   244â†’            {transitionPath.target}\n   245â†’          </p>\n   246â†’          <p className=\"text-sm text-neutral-400\">\n   247â†’            {targetScore ? `${targetScore.score}% current match` : 'New category'}\n   248â†’          </p>\n   249â†’          {targetScore && (\n   250â†’            <div className=\"mt-3\">\n   251â†’              <ConfidenceBar\n   252â†’                confidence={targetScore.confidence}\n   253â†’                label=\"Current Match\"\n   254â†’                color={targetColors?.primary}\n   255â†’              />\n   256â†’            </div>\n   257â†’          )}\n   258â†’        </div>\n   259â†’      </div>\n   260â†’\n   261â†’      {/* Requirements */}\n   262â†’      <div className=\"mt-6\">\n   263â†’        <p className=\"text-sm text-neutral-400 mb-3\">To achieve this transition:</p>\n   264â†’        <ul className=\"grid md:grid-cols-2 gap-2\">\n   265â†’          {transitionPath.requirements.map((req, i) => (\n   266â†’            <li\n   267â†’              key={i}\n   268â†’              className=\"flex items-center gap-2 p-3 bg-neutral-900/50 rounded-lg text-sm text-neutral-300\"\n   269â†’            >\n   270â†’              <span className=\"w-5 h-5 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs\">\n   271â†’                {i + 1}\n   272â†’              </span>\n   273â†’              {req}\n   274â†’            </li>\n   275â†’          ))}\n   276â†’        </ul>\n   277â†’      </div>\n   278â†’    </motion.div>\n   279â†’  );\n   280â†’}\n   281â†’\n   282â†’// ============================================\n   283â†’// RECOMMENDED FORUMS SECTION\n   284â†’// ============================================\n   285â†’\n   286â†’function RecommendedForumsSection({\n   287â†’  classification,\n   288â†’}: {\n   289â†’  classification: ArchetypeClassification;\n   290â†’}) {\n   291â†’  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n   292â†’  const [isLoading, setIsLoading] = useState(true);\n   293â†’\n   294â†’  const archetype = classification.primary.category;\n   295â†’  const colors = ARCHETYPE_COLORS[archetype];\n   296â†’\n   297â†’  useEffect(() => {\n   298â†’    let isMounted = true;\n   299â†’\n   300â†’    async function fetchForums() {\n   301â†’      setIsLoading(true);\n   302â†’      try {\n   303â†’        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n   304â†’        if (isMounted) {\n   305â†’          setForums(recommendations.slice(0, 3)); // Show top 3\n   306â†’        }\n   307â†’      } catch (error) {\n   308â†’        if (isMounted) {\n   309â†’          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n   310â†’        }\n   311â†’      } finally {\n   312â†’        if (isMounted) {\n   313â†’          setIsLoading(false);\n   314â†’        }\n   315â†’      }\n   316â†’    }\n   317â†’\n   318â†’    fetchForums();\n   319â†’\n   320â†’    return () => {\n   321â†’      isMounted = false;\n   322â†’    };\n   323â†’  }, [archetype]);\n   324â†’\n   325â†’  if (isLoading) {\n   326â†’    return (\n   327â†’      <motion.div\n   328â†’        initial={{ opacity: 0 }}\n   329â†’        animate={{ opacity: 1 }}\n   330â†’        transition={{ delay: 0.35 }}\n   331â†’        className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n   332â†’      >\n   333â†’        <div className=\"flex items-center gap-2 mb-4\">\n   334â†’          <Users className=\"w-5 h-5 text-amber-400\" />\n   335â†’          <h3 className=\"font-semibold text-white\">Recommended Forums</h3>\n   336â†’        </div>\n   337â†’        <div className=\"grid gap-3 md:grid-cols-3\">\n   338â†’          {[1, 2, 3].map((i) => (\n   339â†’            <div key={i} className=\"animate-pulse bg-neutral-800 rounded-lg h-24\" />\n   340â†’          ))}\n   341â†’        </div>\n   342â†’      </motion.div>\n   343â†’    );\n   344â†’  }\n   345â†’\n   346â†’  if (forums.length === 0) return null;\n   347â†’\n   348â†’  return (\n   349â†’    <motion.div\n   350â†’      initial={{ opacity: 0 }}\n   351â†’      animate={{ opacity: 1 }}\n   352â†’      transition={{ delay: 0.35 }}\n   353â†’      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n   354â†’    >\n   355â†’      <div className=\"flex items-center gap-2 mb-4\">\n   356â†’        <Users className=\"w-5 h-5 text-amber-400\" />\n   357â†’        <h3 className=\"font-semibold text-white\">Recommended Forums</h3>\n   358â†’        <span\n   359â†’          className=\"px-2 py-0.5 text-xs font-medium rounded border\"\n   360â†’          style={{\n   361â†’            backgroundColor: `${colors.primary}20`,\n   362â†’            color: colors.primary,\n   363â†’            borderColor: `${colors.primary}40`,\n   364â†’          }}\n   365â†’        >\n   366â†’          {archetype}\n   367â†’        </span>\n   368â†’      </div>\n   369â†’\n   370â†’      <p className=\"text-sm text-neutral-400 mb-4\">\n   371â†’        Forums tailored to your archetype to help you maximize your aesthetic potential\n   372â†’      </p>\n   373â†’\n   374â†’      <div className=\"grid gap-3 md:grid-cols-3\">\n   375â†’        {forums.map((forum) => (\n   376â†’          <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n   377â†’            <div className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-amber-500/30 transition-all cursor-pointer\">\n   378â†’              <div className=\"flex items-center gap-3 mb-2\">\n   379â†’                <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n   380â†’                  {forum.category.icon || 'ðŸ’¬'}\n   381â†’                </div>\n   382â†’                <h4 className=\"font-medium text-white group-hover:text-amber-400 transition-colors text-sm line-clamp-1\">\n   383â†’                  {forum.category.name}\n   384â†’                </h4>\n   385â†’              </div>\n   386â†’              <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">\n   387â†’                {forum.reason || forum.category.description}\n   388â†’              </p>\n   389â†’              <div className=\"flex items-center justify-end\">\n   390â†’                <span className=\"text-xs text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n   391â†’                  Visit\n   392â†’                  <ArrowRight className=\"w-3 h-3\" />\n   393â†’                </span>\n   394â†’              </div>\n   395â†’            </div>\n   396â†’          </Link>\n   397â†’        ))}\n   398â†’      </div>\n   399â†’\n   400â†’      <Link href=\"/forum\" className=\"block mt-4\">\n   401â†’        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">\n   402â†’          <span>Explore all forums</span>\n   403â†’          <ArrowRight className=\"w-4 h-4\" />\n   404â†’        </div>\n   405â†’      </Link>\n   406â†’    </motion.div>\n   407â†’  );\n   408â†’}\n   409â†’\n   410â†’// ============================================\n   411â†’// RECOMMENDED GUIDES SECTION\n   412â†’// ============================================\n   413â†’\n   414â†’// Icon mapping for guides\n   415â†’const GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n   416â†’  BookOpen: <BookOpen size={18} />,\n   417â†’  Dumbbell: <Dumbbell size={18} />,\n   418â†’  Brain: <Brain size={18} />,\n   419â†’  Wrench: <Wrench size={18} />,\n   420â†’  TrendingDown: <TrendingDown size={18} />,\n   421â†’  Calendar: <Calendar size={18} />,\n   422â†’  Target: <Target size={18} />,\n   423â†’  Heart: <Heart size={18} />,\n   424â†’  Utensils: <Utensils size={18} />,\n   425â†’  Droplet: <Droplet size={18} />,\n   426â†’};\n   427â†’\n   428â†’// Map archetypes to recommended guides\n   429â†’const ARCHETYPE_GUIDES: Record<string, string[]> = {\n   430â†’  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n   431â†’  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n   432â†’  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n   433â†’  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n   434â†’  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n   435â†’  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n   436â†’};\n   437â†’\n   438â†’function RecommendedGuidesSection({\n   439â†’  classification,\n   440â†’  onOpenGuide,\n   441â†’}: {\n   442â†’  classification: ArchetypeClassification;\n   443â†’  onOpenGuide: (guide: Guide) => void;\n   444â†’}) {\n   445â†’  const archetype = classification.primary.category;\n   446â†’  const colors = ARCHETYPE_COLORS[archetype];\n   447â†’  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n   448â†’\n   449â†’  const guides = guideIds\n   450â†’    .map((id) => getGuideById(id))\n   451â†’    .filter((g): g is Guide => g !== undefined)\n   452â†’    .slice(0, 3);\n   453â†’\n   454â†’  if (guides.length === 0) return null;\n   455â†’\n   456â†’  return (\n   457â†’    <motion.div\n   458â†’      initial={{ opacity: 0 }}\n   459â†’      animate={{ opacity: 1 }}\n   460â†’      transition={{ delay: 0.35 }}\n   461â†’      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n   462â†’    >\n   463â†’      <div className=\"flex items-center gap-2 mb-4\">\n   464â†’        <BookOpen className=\"w-5 h-5 text-cyan-400\" />\n   465â†’        <h3 className=\"font-semibold text-white\">Recommended Guides</h3>\n   466â†’        <span\n   467â†’          className=\"px-2 py-0.5 text-xs font-medium rounded border\"\n   468â†’          style={{\n   469â†’            backgroundColor: `${colors.primary}20`,\n   470â†’            color: colors.primary,\n   471â†’            borderColor: `${colors.primary}40`,\n   472â†’          }}\n   473â†’        >\n   474â†’          {archetype}\n   475â†’        </span>\n   476â†’      </div>\n   477â†’\n   478â†’      <p className=\"text-sm text-neutral-400 mb-4\">\n   479â†’        Guides tailored to your archetype for maximizing your aesthetic potential\n   480â†’      </p>\n   481â†’\n   482â†’      <div className=\"grid gap-3 md:grid-cols-3\">\n   483â†’        {guides.map((guide) => (\n   484â†’          <div\n   485â†’            key={guide.id}\n   486â†’            onClick={() => onOpenGuide(guide)}\n   487â†’            className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-cyan-500/30 transition-all cursor-pointer\"\n   488â†’          >\n   489â†’            <div className=\"flex items-center gap-3 mb-2\">\n   490â†’              <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n   491â†’                {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n   492â†’              </div>\n   493â†’              <h4 className=\"font-medium text-white group-hover:text-cyan-400 transition-colors text-sm line-clamp-1\">\n   494â†’                {guide.title}\n   495â†’              </h4>\n   496â†’            </div>\n   497â†’            <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">\n   498â†’              {guide.description}\n   499â†’            </p>\n   500â†’            <div className=\"flex items-center justify-between\">\n   501â†’              <div className=\"flex items-center gap-1 text-xs text-neutral-500\">\n   502â†’                <Clock size={12} />\n   503â†’                <span>{guide.estimatedReadTime} min</span>\n   504â†’              </div>\n   505â†’              <span className=\"text-xs text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n   506â†’                Read\n   507â†’                <ArrowRight className=\"w-3 h-3\" />\n   508â†’              </span>\n   509â†’            </div>\n   510â†’          </div>\n   511â†’        ))}\n   512â†’      </div>\n   513â†’\n   514â†’      <Link href=\"/results?tab=guides\" className=\"block mt-4\">\n   515â†’        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">\n   516â†’          <span>View all guides</span>\n   517â†’          <ArrowRight className=\"w-4 h-4\" />\n   518â†’        </div>\n   519â†’      </Link>\n   520â†’    </motion.div>\n   521â†’  );\n   522â†’}\n   523â†’\n   524â†’// ============================================\n   525â†’// MAIN ARCHETYPE TAB\n   526â†’// ============================================\n   527â†’\n   528â†’export function ArchetypeTab() {\n   529â†’  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n   530â†’\n   531â†’  // Classify archetype from ratios\n   532â†’  const classification = useMemo((): ArchetypeClassification | null => {\n   533â†’    if (!frontRatios || frontRatios.length === 0) return null;\n   534â†’\n   535â†’    try {\n   536â†’      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n   537â†’    } catch (error) {\n   538â†’      console.error('[ArchetypeTab] Classification error:', error);\n   539â†’      return null;\n   540â†’    }\n   541â†’  }, [frontRatios, sideRatios, gender, ethnicity]);\n   542â†’\n   543â†’  // Handle guide opening - navigate to guides tab\n   544â†’  const handleOpenGuide = () => {\n   545â†’    setActiveTab('guides');\n   546â†’  };\n   547â†’\n   548â†’  if (!classification) {\n   549â†’    return (\n   550â†’      <TabContent\n   551â†’        title=\"Archetype Classification\"\n   552â†’        subtitle=\"Determining your facial archetype based on your metrics\"\n   553â†’      >\n   554â†’        <div className=\"bg-neutral-900 rounded-xl p-8 border border-neutral-800 text-center\">\n   555â†’          <p className=\"text-neutral-400\">\n   556â†’            Unable to classify archetype. Please ensure your analysis is complete.\n   557â†’          </p>\n   558â†’        </div>\n   559â†’      </TabContent>\n   560â†’    );\n   561â†’  }\n   562â†’\n   563â†’  return (\n   564â†’    <TabContent\n   565â†’      title=\"Archetype Classification\"\n   566â†’      subtitle=\"Your facial aesthetic archetype based on bone structure and proportions\"\n   567â†’    >\n   568â†’      <div className=\"space-y-6\">\n   569â†’        {/* Main Archetype Card */}\n   570â†’        <ArchetypeCard\n   571â†’          classification={classification}\n   572â†’          showSecondary\n   573â†’          showTransition={false}\n   574â†’        />\n   575â†’\n   576â†’        {/* All Scores Breakdown */}\n   577â†’        <AllArchetypeScores classification={classification} />\n   578â†’\n   579â†’        {/* Style Recommendations */}\n   580â†’        <StyleRecommendations classification={classification} />\n   581â†’\n   582â†’        {/* Recommended Guides */}\n   583â†’        <RecommendedGuidesSection\n   584â†’          classification={classification}\n   585â†’          onOpenGuide={handleOpenGuide}\n   586â†’        />\n   587â†’\n   588â†’        {/* Recommended Forums */}\n   589â†’        <RecommendedForumsSection classification={classification} />\n   590â†’\n   591â†’        {/* Transition Opportunities */}\n   592â†’        <TransitionOpportunities classification={classification} />\n   593â†’\n   594â†’        {/* Info footer */}\n   595â†’        <motion.div\n   596â†’          initial={{ opacity: 0 }}\n   597â†’          animate={{ opacity: 1 }}\n   598â†’          transition={{ delay: 0.5 }}\n   599â†’          className=\"p-4 bg-neutral-900/50 rounded-lg border border-neutral-800\"\n   600â†’        >\n   601â†’          <div className=\"flex items-start gap-2\">\n   602â†’            <Info className=\"w-4 h-4 text-neutral-500 flex-shrink-0 mt-0.5\" />\n   603â†’            <p className=\"text-xs text-neutral-500\">\n   604â†’              Archetype classification analyzes your facial structure including gonial angle,\n   605â†’              face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n   606â†’              represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n   607â†’              Style recommendations are tailored to complement your natural features.\n   608â†’            </p>\n   609â†’          </div>\n   610â†’        </motion.div>\n   611â†’      </div>\n   612â†’    </TabContent>\n   613â†’  );\n   614â†’}\n   615â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"0b15abd0-2237-4ca8-b3d8-a7e85f694dfe","timestamp":"2025-12-26T20:36:45.155Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","content":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"\n    >\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"text-sm font-medium text-neutral-400\">All Category Matches</h3>\n      </div>\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-3 rounded-lg border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-800 border-cyan-500/30'\n                  : 'bg-neutral-800/50 border-neutral-700/50 hover:border-neutral-600'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2 left-2 px-1.5 py-0.5 bg-cyan-500 rounded text-[9px] font-medium text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-bold mb-0.5\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] text-neutral-500 truncate\">{score.category}</div>\n              {/* Mini bar */}\n              <div className=\"mt-2 h-1 bg-neutral-700 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full rounded-full transition-all\"\n                  style={{\n                    width: `${score.score}%`,\n                    backgroundColor: colors?.primary || '#6b7280',\n                  }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - COMPACT CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"\n    >\n      <div className=\"flex items-center gap-2 mb-3\">\n        <Palette className=\"w-4 h-4 text-purple-400\" />\n        <h3 className=\"text-sm font-medium text-white\">{primary.subArchetype} Style Guide</h3>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-3\">\n        {/* Clothing */}\n        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n            Clothing\n          </h4>\n          <div className=\"flex flex-wrap gap-1\">\n            {styleGuide.clothing.slice(0, 3).map((item) => (\n              <span\n                key={item}\n                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"\n              >\n                {item}\n              </span>\n            ))}\n          </div>\n        </div>\n\n        {/* Hair */}\n        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n            Hair\n          </h4>\n          <div className=\"flex flex-wrap gap-1\">\n            {styleGuide.hair.slice(0, 3).map((item) => (\n              <span\n                key={item}\n                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"\n              >\n                {item}\n              </span>\n            ))}\n          </div>\n        </div>\n\n        {/* Colors */}\n        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n            Colors\n          </h4>\n          <div className=\"flex flex-wrap gap-1\">\n            {styleGuide.colors.map((color) => (\n              <span\n                key={color}\n                className=\"text-[11px] px-2 py-1 rounded border border-neutral-600 text-neutral-300\"\n                style={{ borderColor: `${colors.primary}40` }}\n              >\n                {color}\n              </span>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  // Find the target score\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n      className=\"bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-xl p-6 border border-cyan-500/20\"\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        <TrendingUp className=\"w-5 h-5 text-green-400\" />\n        <h3 className=\"font-semibold text-white\">Archetype Transition Potential</h3>\n      </div>\n\n      <div className=\"grid md:grid-cols-2 gap-6\">\n        {/* Current */}\n        <div className=\"bg-neutral-900/50 rounded-lg p-4\">\n          <p className=\"text-xs text-neutral-500 mb-2\">Current Archetype</p>\n          <p\n            className=\"text-xl font-bold mb-1\"\n            style={{ color: primaryColors.primary }}\n          >\n            {primary.subArchetype}\n          </p>\n          <p className=\"text-sm text-neutral-400\">{primary.category}</p>\n          <div className=\"mt-3\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"Match\"\n              color={primaryColors.primary}\n            />\n          </div>\n        </div>\n\n        {/* Target */}\n        <div className=\"bg-neutral-900/50 rounded-lg p-4\">\n          <p className=\"text-xs text-neutral-500 mb-2\">Transition Target</p>\n          <p\n            className=\"text-xl font-bold mb-1\"\n            style={{ color: targetColors?.primary || '#67e8f9' }}\n          >\n            {transitionPath.target}\n          </p>\n          <p className=\"text-sm text-neutral-400\">\n            {targetScore ? `${targetScore.score}% current match` : 'New category'}\n          </p>\n          {targetScore && (\n            <div className=\"mt-3\">\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"Current Match\"\n                color={targetColors?.primary}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Requirements */}\n      <div className=\"mt-6\">\n        <p className=\"text-sm text-neutral-400 mb-3\">To achieve this transition:</p>\n        <ul className=\"grid md:grid-cols-2 gap-2\">\n          {transitionPath.requirements.map((req, i) => (\n            <li\n              key={i}\n              className=\"flex items-center gap-2 p-3 bg-neutral-900/50 rounded-lg text-sm text-neutral-300\"\n            >\n              <span className=\"w-5 h-5 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs\">\n                {i + 1}\n              </span>\n              {req}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3)); // Show top 3\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n        className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n      >\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Users className=\"w-5 h-5 text-amber-400\" />\n          <h3 className=\"font-semibold text-white\">Recommended Forums</h3>\n        </div>\n        <div className=\"grid gap-3 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse bg-neutral-800 rounded-lg h-24\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Users className=\"w-5 h-5 text-amber-400\" />\n        <h3 className=\"font-semibold text-white\">Recommended Forums</h3>\n        <span\n          className=\"px-2 py-0.5 text-xs font-medium rounded border\"\n          style={{\n            backgroundColor: `${colors.primary}20`,\n            color: colors.primary,\n            borderColor: `${colors.primary}40`,\n          }}\n        >\n          {archetype}\n        </span>\n      </div>\n\n      <p className=\"text-sm text-neutral-400 mb-4\">\n        Forums tailored to your archetype to help you maximize your aesthetic potential\n      </p>\n\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        {forums.map((forum) => (\n          <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n            <div className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-amber-500/30 transition-all cursor-pointer\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                  {forum.category.icon || 'ðŸ’¬'}\n                </div>\n                <h4 className=\"font-medium text-white group-hover:text-amber-400 transition-colors text-sm line-clamp-1\">\n                  {forum.category.name}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">\n                {forum.reason || forum.category.description}\n              </p>\n              <div className=\"flex items-center justify-end\">\n                <span className=\"text-xs text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  Visit\n                  <ArrowRight className=\"w-3 h-3\" />\n                </span>\n              </div>\n            </div>\n          </Link>\n        ))}\n      </div>\n\n      <Link href=\"/forum\" className=\"block mt-4\">\n        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">\n          <span>Explore all forums</span>\n          <ArrowRight className=\"w-4 h-4\" />\n        </div>\n      </Link>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\n// Icon mapping for guides\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\n// Map archetypes to recommended guides\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        <BookOpen className=\"w-5 h-5 text-cyan-400\" />\n        <h3 className=\"font-semibold text-white\">Recommended Guides</h3>\n        <span\n          className=\"px-2 py-0.5 text-xs font-medium rounded border\"\n          style={{\n            backgroundColor: `${colors.primary}20`,\n            color: colors.primary,\n            borderColor: `${colors.primary}40`,\n          }}\n        >\n          {archetype}\n        </span>\n      </div>\n\n      <p className=\"text-sm text-neutral-400 mb-4\">\n        Guides tailored to your archetype for maximizing your aesthetic potential\n      </p>\n\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        {guides.map((guide) => (\n          <div\n            key={guide.id}\n            onClick={() => onOpenGuide(guide)}\n            className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-cyan-500/30 transition-all cursor-pointer\"\n          >\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n              </div>\n              <h4 className=\"font-medium text-white group-hover:text-cyan-400 transition-colors text-sm line-clamp-1\">\n                {guide.title}\n              </h4>\n            </div>\n            <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">\n              {guide.description}\n            </p>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-1 text-xs text-neutral-500\">\n                <Clock size={12} />\n                <span>{guide.estimatedReadTime} min</span>\n              </div>\n              <span className=\"text-xs text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                Read\n                <ArrowRight className=\"w-3 h-3\" />\n              </span>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <Link href=\"/results?tab=guides\" className=\"block mt-4\">\n        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">\n          <span>View all guides</span>\n          <ArrowRight className=\"w-4 h-4\" />\n        </div>\n      </Link>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  // Classify archetype from ratios\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  // Handle guide opening - navigate to guides tab\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"bg-neutral-900 rounded-xl p-8 border border-neutral-800 text-center\">\n          <p className=\"text-neutral-400\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"Archetype Classification\"\n      subtitle=\"Your facial aesthetic archetype based on bone structure and proportions\"\n    >\n      <div className=\"space-y-6\">\n        {/* Main Archetype Card */}\n        <ArchetypeCard\n          classification={classification}\n          showSecondary\n          showTransition={false}\n        />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"p-4 bg-neutral-900/50 rounded-lg border border-neutral-800\"\n        >\n          <div className=\"flex items-start gap-2\">\n            <Info className=\"w-4 h-4 text-neutral-500 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-xs text-neutral-500\">\n              Archetype classification analyzes your facial structure including gonial angle,\n              face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n              represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n              Style recommendations are tailored to complement your natural features.\n            </p>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n","numLines":615,"startLine":1,"totalLines":615}}}
{"parentUuid":"0b15abd0-2237-4ca8-b3d8-a7e85f694dfe","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01M6rW6M17ie9DQUzTtJKj8o","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me check the FAQ or Sources pages to see the exact design patterns being used:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":8362,"cache_read_input_tokens":35482,"cache_creation":{"ephemeral_5m_input_tokens":8362,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"requestId":"req_011CWVwWeBj5r9qErD5eg4cn","type":"assistant","uuid":"5b895687-aaf2-4839-925a-25839fd84488","timestamp":"2025-12-26T20:36:51.010Z"}
{"parentUuid":"5b895687-aaf2-4839-925a-25839fd84488","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01M6rW6M17ie9DQUzTtJKj8o","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0136vBJqMnb5nK3n3d15FLVq","name":"Glob","input":{"pattern":"**/faq/**/*.tsx","path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":8362,"cache_read_input_tokens":35482,"cache_creation":{"ephemeral_5m_input_tokens":8362,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"requestId":"req_011CWVwWeBj5r9qErD5eg4cn","type":"assistant","uuid":"daf67746-17c5-4e2e-aea7-a4122452f3da","timestamp":"2025-12-26T20:36:52.302Z"}
{"parentUuid":"daf67746-17c5-4e2e-aea7-a4122452f3da","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01M6rW6M17ie9DQUzTtJKj8o","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01YP1YJfux71UAsSabB9gD6v","name":"Glob","input":{"pattern":"**/sources/**/*.tsx","path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":8362,"cache_read_input_tokens":35482,"cache_creation":{"ephemeral_5m_input_tokens":8362,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"requestId":"req_011CWVwWeBj5r9qErD5eg4cn","type":"assistant","uuid":"c90b6369-c709-46ed-bb49-184f45a590af","timestamp":"2025-12-26T20:36:53.151Z"}
{"parentUuid":"c90b6369-c709-46ed-bb49-184f45a590af","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0136vBJqMnb5nK3n3d15FLVq","type":"tool_result","content":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/faq/page.tsx"}]},"uuid":"e4b0c06e-f4ae-4f5f-9420-f430eae78b53","timestamp":"2025-12-26T20:36:53.709Z","toolUseResult":{"filenames":["/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/faq/page.tsx"],"durationMs":458,"numFiles":1,"truncated":false}}
{"parentUuid":"e4b0c06e-f4ae-4f5f-9420-f430eae78b53","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01YP1YJfux71UAsSabB9gD6v","type":"tool_result","content":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/sources/page.tsx"}]},"uuid":"9e37996d-a48c-471c-b583-75e8d5d05ef1","timestamp":"2025-12-26T20:36:53.857Z","toolUseResult":{"filenames":["/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/sources/page.tsx"],"durationMs":606,"numFiles":1,"truncated":false}}
{"parentUuid":"9e37996d-a48c-471c-b583-75e8d5d05ef1","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_012KjEwk7LYS8RB3vkD1whVj","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QLBRcBAyWD2SNHbi9tok9W","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/faq/page.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":313,"cache_read_input_tokens":43844,"cache_creation":{"ephemeral_5m_input_tokens":313,"ephemeral_1h_input_tokens":0},"output_tokens":22,"service_tier":"standard"}},"requestId":"req_011CWVwXHNco2KyCxF1mW4RK","type":"assistant","uuid":"9fd04489-4909-4a8d-8e74-cd73cfb509c4","timestamp":"2025-12-26T20:37:00.391Z"}
{"parentUuid":"9fd04489-4909-4a8d-8e74-cd73cfb509c4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_012KjEwk7LYS8RB3vkD1whVj","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01A3emoGvXPsr4pWAPwvoqHp","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/sources/page.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":313,"cache_read_input_tokens":43844,"cache_creation":{"ephemeral_5m_input_tokens":313,"ephemeral_1h_input_tokens":0},"output_tokens":22,"service_tier":"standard"}},"requestId":"req_011CWVwXHNco2KyCxF1mW4RK","type":"assistant","uuid":"9bcff965-55e5-465e-9af8-8bbd24ef4cac","timestamp":"2025-12-26T20:37:01.183Z"}
{"parentUuid":"9bcff965-55e5-465e-9af8-8bbd24ef4cac","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QLBRcBAyWD2SNHbi9tok9W","type":"tool_result","content":"     1â†’'use client';\n     2â†’\n     3â†’import React from 'react';\n     4â†’import Link from 'next/link';\n     5â†’import { ArrowLeft } from 'lucide-react';\n     6â†’\n     7â†’const faqs = [\n     8â†’    {\n     9â†’        category: \"General\",\n    10â†’        items: [\n    11â†’            { q: \"What is LooksMaxx AI?\", a: \"LooksMaxx AI is a premium facial morphometric engine that uses artificial intelligence to analyze facial landmarks, symmetry, and proportions based on established aesthetic scientific canons.\" },\n    12â†’            { q: \"Is this medically accurate?\", a: \"While our algorithms are based on anthropometric research and neo-classical canons, this is an aesthetic validation tool, not a medical diagnosis device. Always consult with a board-certified plastic surgeon for medical advice.\" },\n    13â†’        ]\n    14â†’    },\n    15â†’    {\n    16â†’        category: \"Analysis & Metrics\",\n    17â†’        items: [\n    18â†’            { q: \"How many ratios do you track?\", a: \"Our Pro engine tracks over 60 distinct facial ratios, including the golden ratio, canthal tilt, gonial angle, midface height, and more.\" },\n    19â†’            { q: \"What is the PSL scale?\", a: \"The 'Pretty Scale Level' (PSL) is a standardized aesthetic metric used in high-fashion and modeling industries to quantify facial attractiveness on a 1-10 scale based on developmental stability and harmony.\" },\n    20â†’        ]\n    21â†’    },\n    22â†’    {\n    23â†’        category: \"Privacy & Security\",\n    24â†’        items: [\n    25â†’            { q: \"Are my photos private?\", a: \"Yes. Your photos are processed securely and are never shared with third parties. You have the right to delete your data at any time from your settings.\" },\n    26â†’            { q: \"Do you store my biometric data?\", a: \"We only store the landmark coordinates and resultant scores to provide your analysis history. Raw images can be deleted immediately after processing.\" },\n    27â†’        ]\n    28â†’    }\n    29â†’];\n    30â†’\n    31â†’export default function FAQPage() {\n    32â†’    return (\n    33â†’        <main className=\"min-h-screen bg-black text-white selection:bg-cyan-500/30\">\n    34â†’            <div className=\"max-w-4xl mx-auto px-6 pt-32 pb-20\">\n    35â†’                <Link href=\"/\" className=\"inline-flex items-center gap-2 text-neutral-500 hover:text-cyan-400 text-xs font-black uppercase tracking-widest mb-12 transition-colors\">\n    36â†’                    <ArrowLeft size={14} />\n    37â†’                    Back to Labs\n    38â†’                </Link>\n    39â†’\n    40â†’                <header className=\"mb-20\">\n    41â†’                    <h1 className=\"text-5xl font-black tracking-tighter italic uppercase mb-4\">\n    42â†’                        Knowledge <span className=\"text-cyan-400\">Base</span>\n    43â†’                    </h1>\n    44â†’                    <p className=\"text-neutral-500 font-medium max-w-md uppercase text-xs tracking-[0.2em]\">\n    45â†’                        Frequently Asked Questions & Technical Documentation\n    46â†’                    </p>\n    47â†’                </header>\n    48â†’\n    49â†’                <div className=\"space-y-16\">\n    50â†’                    {faqs.map((cat, idx) => (\n    51â†’                        <section key={idx}>\n    52â†’                            <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-8 flex items-center gap-4\">\n    53â†’                                {cat.category}\n    54â†’                                <div className=\"flex-1 h-px bg-neutral-900\" />\n    55â†’                            </h2>\n    56â†’                            <div className=\"space-y-4\">\n    57â†’                                {cat.items.map((item, iIdx) => (\n    58â†’                                    <div key={iIdx} className=\"p-8 rounded-3xl bg-neutral-900/30 border border-white/5 hover:border-white/10 transition-colors\">\n    59â†’                                        <h3 className=\"text-lg font-black italic uppercase text-white mb-4\">{item.q}</h3>\n    60â†’                                        <p className=\"text-neutral-400 text-sm font-medium leading-relaxed\">{item.a}</p>\n    61â†’                                    </div>\n    62â†’                                ))}\n    63â†’                            </div>\n    64â†’                        </section>\n    65â†’                    ))}\n    66â†’                </div>\n    67â†’\n    68â†’                <footer className=\"mt-20 pt-12 border-t border-neutral-900 flex flex-col items-center gap-6\">\n    69â†’                    <p className=\"text-neutral-600 text-[10px] font-black uppercase tracking-widest\">Still have technical queries?</p>\n    70â†’                    <Link href=\"mailto:support@looksmaxx.app\" className=\"h-12 px-8 rounded-2xl bg-white/5 border border-white/10 text-white font-black uppercase tracking-widest text-xs flex items-center hover:bg-white/10 transition-all\">\n    71â†’                        Contact Ops\n    72â†’                    </Link>\n    73â†’                </footer>\n    74â†’            </div>\n    75â†’        </main>\n    76â†’    );\n    77â†’}\n    78â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"82c7c824-0f10-4b27-997a-c37992f4b138","timestamp":"2025-12-26T20:37:01.241Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/faq/page.tsx","content":"'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { ArrowLeft } from 'lucide-react';\n\nconst faqs = [\n    {\n        category: \"General\",\n        items: [\n            { q: \"What is LooksMaxx AI?\", a: \"LooksMaxx AI is a premium facial morphometric engine that uses artificial intelligence to analyze facial landmarks, symmetry, and proportions based on established aesthetic scientific canons.\" },\n            { q: \"Is this medically accurate?\", a: \"While our algorithms are based on anthropometric research and neo-classical canons, this is an aesthetic validation tool, not a medical diagnosis device. Always consult with a board-certified plastic surgeon for medical advice.\" },\n        ]\n    },\n    {\n        category: \"Analysis & Metrics\",\n        items: [\n            { q: \"How many ratios do you track?\", a: \"Our Pro engine tracks over 60 distinct facial ratios, including the golden ratio, canthal tilt, gonial angle, midface height, and more.\" },\n            { q: \"What is the PSL scale?\", a: \"The 'Pretty Scale Level' (PSL) is a standardized aesthetic metric used in high-fashion and modeling industries to quantify facial attractiveness on a 1-10 scale based on developmental stability and harmony.\" },\n        ]\n    },\n    {\n        category: \"Privacy & Security\",\n        items: [\n            { q: \"Are my photos private?\", a: \"Yes. Your photos are processed securely and are never shared with third parties. You have the right to delete your data at any time from your settings.\" },\n            { q: \"Do you store my biometric data?\", a: \"We only store the landmark coordinates and resultant scores to provide your analysis history. Raw images can be deleted immediately after processing.\" },\n        ]\n    }\n];\n\nexport default function FAQPage() {\n    return (\n        <main className=\"min-h-screen bg-black text-white selection:bg-cyan-500/30\">\n            <div className=\"max-w-4xl mx-auto px-6 pt-32 pb-20\">\n                <Link href=\"/\" className=\"inline-flex items-center gap-2 text-neutral-500 hover:text-cyan-400 text-xs font-black uppercase tracking-widest mb-12 transition-colors\">\n                    <ArrowLeft size={14} />\n                    Back to Labs\n                </Link>\n\n                <header className=\"mb-20\">\n                    <h1 className=\"text-5xl font-black tracking-tighter italic uppercase mb-4\">\n                        Knowledge <span className=\"text-cyan-400\">Base</span>\n                    </h1>\n                    <p className=\"text-neutral-500 font-medium max-w-md uppercase text-xs tracking-[0.2em]\">\n                        Frequently Asked Questions & Technical Documentation\n                    </p>\n                </header>\n\n                <div className=\"space-y-16\">\n                    {faqs.map((cat, idx) => (\n                        <section key={idx}>\n                            <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-8 flex items-center gap-4\">\n                                {cat.category}\n                                <div className=\"flex-1 h-px bg-neutral-900\" />\n                            </h2>\n                            <div className=\"space-y-4\">\n                                {cat.items.map((item, iIdx) => (\n                                    <div key={iIdx} className=\"p-8 rounded-3xl bg-neutral-900/30 border border-white/5 hover:border-white/10 transition-colors\">\n                                        <h3 className=\"text-lg font-black italic uppercase text-white mb-4\">{item.q}</h3>\n                                        <p className=\"text-neutral-400 text-sm font-medium leading-relaxed\">{item.a}</p>\n                                    </div>\n                                ))}\n                            </div>\n                        </section>\n                    ))}\n                </div>\n\n                <footer className=\"mt-20 pt-12 border-t border-neutral-900 flex flex-col items-center gap-6\">\n                    <p className=\"text-neutral-600 text-[10px] font-black uppercase tracking-widest\">Still have technical queries?</p>\n                    <Link href=\"mailto:support@looksmaxx.app\" className=\"h-12 px-8 rounded-2xl bg-white/5 border border-white/10 text-white font-black uppercase tracking-widest text-xs flex items-center hover:bg-white/10 transition-all\">\n                        Contact Ops\n                    </Link>\n                </footer>\n            </div>\n        </main>\n    );\n}\n","numLines":78,"startLine":1,"totalLines":78}}}
{"parentUuid":"82c7c824-0f10-4b27-997a-c37992f4b138","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01A3emoGvXPsr4pWAPwvoqHp","type":"tool_result","content":"     1â†’'use client';\n     2â†’\n     3â†’import React from 'react';\n     4â†’import Link from 'next/link';\n     5â†’import { ArrowLeft, BookOpen, FileText, Globe, User } from 'lucide-react';\n     6â†’\n     7â†’const sources = [\n     8â†’    {\n     9â†’        title: \"The Neo-Classical Canons of Facial Proportion\",\n    10â†’        author: \"Farkas LG, Hreczko TA, Kolar JC, Munro IR.\",\n    11â†’        publication: \"Plastic and Reconstructive Surgery Journal (1985)\",\n    12â†’        link: \"https://pubmed.ncbi.nlm.nih.gov/3991668/\",\n    13â†’        snippet: \"Establishing the quantitative measurements for the 'ideal' facial structure based on European Renaissance standards and verified through anthropometric analysis of 2,326 healthy subjects.\"\n    14â†’    },\n    15â†’    {\n    16â†’        title: \"Vertical Facial Proportions and the Golden Ratio\",\n    17â†’        author: \"Jefferson Y.\",\n    18â†’        publication: \"Journal of General Orthodontics (2004)\",\n    19â†’        link: \"https://pubmed.ncbi.nlm.nih.gov/15317378/\",\n    20â†’        snippet: \"Exploring the relationship between facial harmony, the divine proportion (phi), and its role in orthodontic treatment and aesthetic perception.\"\n    21â†’    },\n    22â†’    {\n    23â†’        title: \"The Mandibular Plane Angle and Facial Harmony\",\n    24â†’        author: \"Ricketts RM.\",\n    25â†’        publication: \"American Journal of Orthodontics (1960)\",\n    26â†’        link: \"https://pubmed.ncbi.nlm.nih.gov/13741364/\",\n    27â†’        snippet: \"A critical study on the relationship between mandibular slope, gonial angle, and perceived masculinity/femininity in human profiles.\"\n    28â†’    },\n    29â†’    {\n    30â†’        title: \"Canthal Tilt and the Perception of Attractiveness\",\n    31â†’        author: \"Bashour M.\",\n    32â†’        publication: \"Aesthetic Plastic Surgery (2006)\",\n    33â†’        link: \"https://pubmed.ncbi.nlm.nih.gov/16544067/\",\n    34â†’        snippet: \"Standardizing the measurement of lateral canthal tilt and its statistically significant correlation with perceived facial vitality and youth.\"\n    35â†’    }\n    36â†’];\n    37â†’\n    38â†’export default function SourcesPage() {\n    39â†’    return (\n    40â†’        <main className=\"min-h-screen bg-black text-white selection:bg-cyan-500/30\">\n    41â†’            <div className=\"max-w-4xl mx-auto px-6 pt-32 pb-20\">\n    42â†’                <Link href=\"/\" className=\"inline-flex items-center gap-2 text-neutral-500 hover:text-cyan-400 text-xs font-black uppercase tracking-widest mb-12 transition-colors\">\n    43â†’                    <ArrowLeft size={14} />\n    44â†’                    Back to Labs\n    45â†’                </Link>\n    46â†’\n    47â†’                <header className=\"mb-20\">\n    48â†’                    <h1 className=\"text-5xl font-black tracking-tighter italic uppercase mb-4\">\n    49â†’                        Aesthetic <span className=\"text-cyan-400\">Methodology</span>\n    50â†’                    </h1>\n    51â†’                    <p className=\"text-neutral-500 font-medium max-w-md uppercase text-xs tracking-[0.2em]\">\n    52â†’                        Scientific Foundations & Peer-Reviewed Source Citations\n    53â†’                    </p>\n    54â†’                </header>\n    55â†’\n    56â†’                <div className=\"space-y-24\">\n    57â†’                    <section className=\"p-10 rounded-[2.5rem] bg-neutral-900/40 border border-white/5 relative overflow-hidden\">\n    58â†’                        <div className=\"absolute top-0 right-0 p-8 opacity-10\">\n    59â†’                            <BookOpen size={120} />\n    60â†’                        </div>\n    61â†’                        <h2 className=\"text-xs font-black uppercase tracking-[0.4em] text-cyan-500 mb-6\">Our Approach</h2>\n    62â†’                        <p className=\"text-xl font-bold italic text-neutral-200 leading-relaxed mb-6\">\n    63â†’                            &ldquo;FACIAL HARMONY IS NOT SUBJECTIVEâ€”IT IS A BIOMETRIC EQUILIBRIUM.&rdquo;\n    64â†’                        </p>\n    65â†’                        <p className=\"text-neutral-500 text-sm leading-relaxed max-w-2xl\">\n    66â†’                            Every score generated by LOOKSMAXX LABS is derived from comparative analysis against the Neo-Classical Canons, Average Composite Models, and modern high-fashion developmental stability metrics. Our engine uses Computer Vision (CV) to identify landmarks with 99.8% precision across diverse lighting conditions.\n    67â†’                        </p>\n    68â†’                    </section>\n    69â†’\n    70â†’                    <section>\n    71â†’                        <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-12 flex items-center gap-4\">\n    72â†’                            Peer-Reviewed Citations\n    73â†’                            <div className=\"flex-1 h-px bg-neutral-900\" />\n    74â†’                        </h2>\n    75â†’                        <div className=\"space-y-16\">\n    76â†’                            {sources.map((source, idx) => (\n    77â†’                                <div key={idx} className=\"group relative\">\n    78â†’                                    <div className=\"absolute -left-6 top-0 bottom-0 w-1 bg-cyan-500/0 group-hover:bg-cyan-500/50 transition-all\" />\n    79â†’                                    <div className=\"flex gap-8 items-start\">\n    80â†’                                        <div className=\"w-14 h-14 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center shrink-0 group-hover:border-cyan-500/50 transition-colors shadow-2xl\">\n    81â†’                                            <FileText size={20} className=\"text-neutral-500 group-hover:text-cyan-400\" />\n    82â†’                                        </div>\n    83â†’                                        <div>\n    84â†’                                            <h3 className=\"text-xl font-black italic uppercase text-white mb-3 leading-[1.1] tracking-tight group-hover:text-cyan-400 transition-colors\">\n    85â†’                                                {source.title}\n    86â†’                                            </h3>\n    87â†’                                            <div className=\"flex flex-wrap items-center gap-x-4 gap-y-2 mb-4\">\n    88â†’                                                <div className=\"flex items-center gap-2 px-2 py-0.5 rounded bg-white/5 border border-white/10 text-[10px] font-black uppercase tracking-widest text-neutral-300\">\n    89â†’                                                    <User size={10} className=\"text-cyan-500\" />\n    90â†’                                                    {source.author.split(',')[0]} ET AL.\n    91â†’                                                </div>\n    92â†’                                                <div className=\"text-[10px] font-black uppercase tracking-widest text-neutral-600\">\n    93â†’                                                    {source.publication}\n    94â†’                                                </div>\n    95â†’                                            </div>\n    96â†’                                            <p className=\"text-neutral-400 text-sm font-medium leading-relaxed mb-6 max-w-3xl border-l border-neutral-800 pl-6 italic\">\n    97â†’                                                {source.snippet}\n    98â†’                                            </p>\n    99â†’                                            <a\n   100â†’                                                href={source.link}\n   101â†’                                                target=\"_blank\"\n   102â†’                                                rel=\"noopener noreferrer\"\n   103â†’                                                className=\"inline-flex items-center gap-3 px-4 py-2 rounded-xl bg-neutral-900 border border-white/5 text-cyan-400 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-neutral-800 hover:border-cyan-500/30 transition-all\"\n   104â†’                                            >\n   105â†’                                                Protocol Archive <Globe size={12} />\n   106â†’                                            </a>\n   107â†’                                        </div>\n   108â†’                                    </div>\n   109â†’                                </div>\n   110â†’                            ))}\n   111â†’                        </div>\n   112â†’                    </section>\n   113â†’                </div>\n   114â†’\n   115â†’                <footer className=\"mt-32 pt-12 border-t border-neutral-900 text-center\">\n   116â†’                    <p className=\"text-neutral-700 text-[10px] font-mono uppercase tracking-[0.2em]\">\n   117â†’                        Engine: Quantum-V4.2 | Citations Verified: 2025.12.23\n   118â†’                    </p>\n   119â†’                </footer>\n   120â†’            </div>\n   121â†’        </main>\n   122â†’    );\n   123â†’}\n   124â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"ed80573f-26d0-4e8c-88f9-e2b164b70571","timestamp":"2025-12-26T20:37:01.241Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/app/sources/page.tsx","content":"'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { ArrowLeft, BookOpen, FileText, Globe, User } from 'lucide-react';\n\nconst sources = [\n    {\n        title: \"The Neo-Classical Canons of Facial Proportion\",\n        author: \"Farkas LG, Hreczko TA, Kolar JC, Munro IR.\",\n        publication: \"Plastic and Reconstructive Surgery Journal (1985)\",\n        link: \"https://pubmed.ncbi.nlm.nih.gov/3991668/\",\n        snippet: \"Establishing the quantitative measurements for the 'ideal' facial structure based on European Renaissance standards and verified through anthropometric analysis of 2,326 healthy subjects.\"\n    },\n    {\n        title: \"Vertical Facial Proportions and the Golden Ratio\",\n        author: \"Jefferson Y.\",\n        publication: \"Journal of General Orthodontics (2004)\",\n        link: \"https://pubmed.ncbi.nlm.nih.gov/15317378/\",\n        snippet: \"Exploring the relationship between facial harmony, the divine proportion (phi), and its role in orthodontic treatment and aesthetic perception.\"\n    },\n    {\n        title: \"The Mandibular Plane Angle and Facial Harmony\",\n        author: \"Ricketts RM.\",\n        publication: \"American Journal of Orthodontics (1960)\",\n        link: \"https://pubmed.ncbi.nlm.nih.gov/13741364/\",\n        snippet: \"A critical study on the relationship between mandibular slope, gonial angle, and perceived masculinity/femininity in human profiles.\"\n    },\n    {\n        title: \"Canthal Tilt and the Perception of Attractiveness\",\n        author: \"Bashour M.\",\n        publication: \"Aesthetic Plastic Surgery (2006)\",\n        link: \"https://pubmed.ncbi.nlm.nih.gov/16544067/\",\n        snippet: \"Standardizing the measurement of lateral canthal tilt and its statistically significant correlation with perceived facial vitality and youth.\"\n    }\n];\n\nexport default function SourcesPage() {\n    return (\n        <main className=\"min-h-screen bg-black text-white selection:bg-cyan-500/30\">\n            <div className=\"max-w-4xl mx-auto px-6 pt-32 pb-20\">\n                <Link href=\"/\" className=\"inline-flex items-center gap-2 text-neutral-500 hover:text-cyan-400 text-xs font-black uppercase tracking-widest mb-12 transition-colors\">\n                    <ArrowLeft size={14} />\n                    Back to Labs\n                </Link>\n\n                <header className=\"mb-20\">\n                    <h1 className=\"text-5xl font-black tracking-tighter italic uppercase mb-4\">\n                        Aesthetic <span className=\"text-cyan-400\">Methodology</span>\n                    </h1>\n                    <p className=\"text-neutral-500 font-medium max-w-md uppercase text-xs tracking-[0.2em]\">\n                        Scientific Foundations & Peer-Reviewed Source Citations\n                    </p>\n                </header>\n\n                <div className=\"space-y-24\">\n                    <section className=\"p-10 rounded-[2.5rem] bg-neutral-900/40 border border-white/5 relative overflow-hidden\">\n                        <div className=\"absolute top-0 right-0 p-8 opacity-10\">\n                            <BookOpen size={120} />\n                        </div>\n                        <h2 className=\"text-xs font-black uppercase tracking-[0.4em] text-cyan-500 mb-6\">Our Approach</h2>\n                        <p className=\"text-xl font-bold italic text-neutral-200 leading-relaxed mb-6\">\n                            &ldquo;FACIAL HARMONY IS NOT SUBJECTIVEâ€”IT IS A BIOMETRIC EQUILIBRIUM.&rdquo;\n                        </p>\n                        <p className=\"text-neutral-500 text-sm leading-relaxed max-w-2xl\">\n                            Every score generated by LOOKSMAXX LABS is derived from comparative analysis against the Neo-Classical Canons, Average Composite Models, and modern high-fashion developmental stability metrics. Our engine uses Computer Vision (CV) to identify landmarks with 99.8% precision across diverse lighting conditions.\n                        </p>\n                    </section>\n\n                    <section>\n                        <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-12 flex items-center gap-4\">\n                            Peer-Reviewed Citations\n                            <div className=\"flex-1 h-px bg-neutral-900\" />\n                        </h2>\n                        <div className=\"space-y-16\">\n                            {sources.map((source, idx) => (\n                                <div key={idx} className=\"group relative\">\n                                    <div className=\"absolute -left-6 top-0 bottom-0 w-1 bg-cyan-500/0 group-hover:bg-cyan-500/50 transition-all\" />\n                                    <div className=\"flex gap-8 items-start\">\n                                        <div className=\"w-14 h-14 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center shrink-0 group-hover:border-cyan-500/50 transition-colors shadow-2xl\">\n                                            <FileText size={20} className=\"text-neutral-500 group-hover:text-cyan-400\" />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"text-xl font-black italic uppercase text-white mb-3 leading-[1.1] tracking-tight group-hover:text-cyan-400 transition-colors\">\n                                                {source.title}\n                                            </h3>\n                                            <div className=\"flex flex-wrap items-center gap-x-4 gap-y-2 mb-4\">\n                                                <div className=\"flex items-center gap-2 px-2 py-0.5 rounded bg-white/5 border border-white/10 text-[10px] font-black uppercase tracking-widest text-neutral-300\">\n                                                    <User size={10} className=\"text-cyan-500\" />\n                                                    {source.author.split(',')[0]} ET AL.\n                                                </div>\n                                                <div className=\"text-[10px] font-black uppercase tracking-widest text-neutral-600\">\n                                                    {source.publication}\n                                                </div>\n                                            </div>\n                                            <p className=\"text-neutral-400 text-sm font-medium leading-relaxed mb-6 max-w-3xl border-l border-neutral-800 pl-6 italic\">\n                                                {source.snippet}\n                                            </p>\n                                            <a\n                                                href={source.link}\n                                                target=\"_blank\"\n                                                rel=\"noopener noreferrer\"\n                                                className=\"inline-flex items-center gap-3 px-4 py-2 rounded-xl bg-neutral-900 border border-white/5 text-cyan-400 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-neutral-800 hover:border-cyan-500/30 transition-all\"\n                                            >\n                                                Protocol Archive <Globe size={12} />\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </section>\n                </div>\n\n                <footer className=\"mt-32 pt-12 border-t border-neutral-900 text-center\">\n                    <p className=\"text-neutral-700 text-[10px] font-mono uppercase tracking-[0.2em]\">\n                        Engine: Quantum-V4.2 | Citations Verified: 2025.12.23\n                    </p>\n                </footer>\n            </div>\n        </main>\n    );\n}\n","numLines":124,"startLine":1,"totalLines":124}}}
{"parentUuid":"ed80573f-26d0-4e8c-88f9-e2b164b70571","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_012i1yo8SnxTxRh8BjUf79vk","type":"message","role":"assistant","content":[{"type":"text","text":"Now I have a clear understanding of the premium design patterns. Let me also check the ArchetypeCard component to understand its structure:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":4256,"cache_read_input_tokens":44157,"cache_creation":{"ephemeral_5m_input_tokens":4256,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwXq2cw7jP69XY5AT8r","type":"assistant","uuid":"a5b8abc6-fb00-4e7e-85f5-f7bbb0890bf1","timestamp":"2025-12-26T20:37:05.261Z"}
{"parentUuid":"a5b8abc6-fb00-4e7e-85f5-f7bbb0890bf1","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_012i1yo8SnxTxRh8BjUf79vk","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01As6aJkySurFGeuAf6zTHV4","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/psl/archetype/ArchetypeCard.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":4256,"cache_read_input_tokens":44157,"cache_creation":{"ephemeral_5m_input_tokens":4256,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwXq2cw7jP69XY5AT8r","type":"assistant","uuid":"e0a829d0-090c-4962-b3a4-3c64396d177d","timestamp":"2025-12-26T20:37:06.495Z"}
{"parentUuid":"e0a829d0-090c-4962-b3a4-3c64396d177d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01As6aJkySurFGeuAf6zTHV4","type":"tool_result","content":"     1â†’'use client';\n     2â†’\n     3â†’import { motion } from 'framer-motion';\n     4â†’import { ArrowRight, Sparkles, User, Info } from 'lucide-react';\n     5â†’import {\n     6â†’  ArchetypeClassification,\n     7â†’  ArchetypeCategory,\n     8â†’  SubArchetypeStyle,\n     9â†’} from '@/lib/archetype-classifier';\n    10â†’import {\n    11â†’  ArchetypeTraits,\n    12â†’  CategoryIcon,\n    13â†’  ConfidenceBar,\n    14â†’  DimorphismBadge,\n    15â†’  ARCHETYPE_COLORS,\n    16â†’} from './ArchetypeTraits';\n    17â†’\n    18â†’// ============================================\n    19â†’// TYPES\n    20â†’// ============================================\n    21â†’\n    22â†’interface ArchetypeCardProps {\n    23â†’  classification: ArchetypeClassification;\n    24â†’  showSecondary?: boolean;\n    25â†’  showTransition?: boolean;\n    26â†’  showStyleGuide?: boolean;\n    27â†’  compact?: boolean;\n    28â†’}\n    29â†’\n    30â†’interface StyleGuideProps {\n    31â†’  style: SubArchetypeStyle;\n    32â†’  archetypeName: string;\n    33â†’}\n    34â†’\n    35â†’// ============================================\n    36â†’// STYLE GUIDE COMPONENT\n    37â†’// ============================================\n    38â†’\n    39â†’function StyleGuide({ style, archetypeName }: StyleGuideProps) {\n    40â†’  return (\n    41â†’    <motion.div\n    42â†’      initial={{ opacity: 0 }}\n    43â†’      animate={{ opacity: 1 }}\n    44â†’      transition={{ delay: 0.2 }}\n    45â†’      className=\"bg-neutral-800/50 rounded-lg p-4 border border-neutral-700\"\n    46â†’    >\n    47â†’      <h4 className=\"text-sm font-medium text-white mb-3 flex items-center gap-2\">\n    48â†’        <Sparkles className=\"w-4 h-4 text-cyan-400\" />\n    49â†’        {archetypeName} Style Guide\n    50â†’      </h4>\n    51â†’\n    52â†’      <div className=\"space-y-3\">\n    53â†’        {/* Clothing */}\n    54â†’        {style.clothing.length > 0 && (\n    55â†’          <div>\n    56â†’            <p className=\"text-xs text-neutral-500 mb-1\">Clothing</p>\n    57â†’            <div className=\"flex flex-wrap gap-1.5\">\n    58â†’              {style.clothing.map((item) => (\n    59â†’                <span\n    60â†’                  key={item}\n    61â†’                  className=\"px-2 py-0.5 rounded bg-neutral-700 text-neutral-300 text-xs\"\n    62â†’                >\n    63â†’                  {item}\n    64â†’                </span>\n    65â†’              ))}\n    66â†’            </div>\n    67â†’          </div>\n    68â†’        )}\n    69â†’\n    70â†’        {/* Hair */}\n    71â†’        {style.hair.length > 0 && (\n    72â†’          <div>\n    73â†’            <p className=\"text-xs text-neutral-500 mb-1\">Hair</p>\n    74â†’            <div className=\"flex flex-wrap gap-1.5\">\n    75â†’              {style.hair.map((item) => (\n    76â†’                <span\n    77â†’                  key={item}\n    78â†’                  className=\"px-2 py-0.5 rounded bg-neutral-700 text-neutral-300 text-xs\"\n    79â†’                >\n    80â†’                  {item}\n    81â†’                </span>\n    82â†’              ))}\n    83â†’            </div>\n    84â†’          </div>\n    85â†’        )}\n    86â†’\n    87â†’        {/* Colors */}\n    88â†’        {style.colors.length > 0 && (\n    89â†’          <div>\n    90â†’            <p className=\"text-xs text-neutral-500 mb-1\">Colors</p>\n    91â†’            <div className=\"flex flex-wrap gap-1.5\">\n    92â†’              {style.colors.map((color) => (\n    93â†’                <span\n    94â†’                  key={color}\n    95â†’                  className=\"px-2 py-0.5 rounded bg-neutral-700 text-neutral-300 text-xs\"\n    96â†’                >\n    97â†’                  {color}\n    98â†’                </span>\n    99â†’              ))}\n   100â†’            </div>\n   101â†’          </div>\n   102â†’        )}\n   103â†’      </div>\n   104â†’    </motion.div>\n   105â†’  );\n   106â†’}\n   107â†’\n   108â†’// ============================================\n   109â†’// TRANSITION PATH COMPONENT\n   110â†’// ============================================\n   111â†’\n   112â†’function TransitionPath({\n   113â†’  from,\n   114â†’  transitionPath,\n   115â†’}: {\n   116â†’  from: string;\n   117â†’  transitionPath: { target: string; requirements: string[] };\n   118â†’}) {\n   119â†’  return (\n   120â†’    <motion.div\n   121â†’      initial={{ opacity: 0 }}\n   122â†’      animate={{ opacity: 1 }}\n   123â†’      transition={{ delay: 0.3 }}\n   124â†’      className=\"p-4 rounded-lg border border-dashed border-neutral-700 bg-neutral-800/30\"\n   125â†’    >\n   126â†’      <p className=\"text-sm text-neutral-400 mb-3\">Transition Potential</p>\n   127â†’\n   128â†’      <div className=\"flex items-center gap-3 mb-3\">\n   129â†’        <span className=\"text-white font-medium\">{from}</span>\n   130â†’        <ArrowRight className=\"text-neutral-600\" size={16} />\n   131â†’        <span className=\"text-cyan-400 font-medium\">{transitionPath.target}</span>\n   132â†’      </div>\n   133â†’\n   134â†’      <div>\n   135â†’        <p className=\"text-xs text-neutral-500 mb-2\">Requirements:</p>\n   136â†’        <ul className=\"space-y-1\">\n   137â†’          {transitionPath.requirements.map((req, i) => (\n   138â†’            <li key={i} className=\"text-xs text-neutral-400 flex items-start gap-2\">\n   139â†’              <span className=\"text-cyan-500 mt-0.5\">-</span>\n   140â†’              {req}\n   141â†’            </li>\n   142â†’          ))}\n   143â†’        </ul>\n   144â†’      </div>\n   145â†’    </motion.div>\n   146â†’  );\n   147â†’}\n   148â†’\n   149â†’// ============================================\n   150â†’// SECONDARY ARCHETYPE\n   151â†’// ============================================\n   152â†’\n   153â†’function SecondaryArchetype({\n   154â†’  category,\n   155â†’  subArchetype,\n   156â†’  confidence,\n   157â†’  traits,\n   158â†’}: {\n   159â†’  category: ArchetypeCategory;\n   160â†’  subArchetype: string;\n   161â†’  confidence: number;\n   162â†’  traits: string[];\n   163â†’}) {\n   164â†’  const colors = ARCHETYPE_COLORS[category];\n   165â†’\n   166â†’  return (\n   167â†’    <motion.div\n   168â†’      initial={{ opacity: 0, x: -10 }}\n   169â†’      animate={{ opacity: 1, x: 0 }}\n   170â†’      transition={{ delay: 0.15 }}\n   171â†’      className=\"p-4 rounded-lg bg-neutral-800/50 border border-neutral-700\"\n   172â†’    >\n   173â†’      <div className=\"flex items-center justify-between mb-2\">\n   174â†’        <p className=\"text-sm text-neutral-400\">Secondary Match</p>\n   175â†’        <span\n   176â†’          className=\"text-xs px-2 py-0.5 rounded-full\"\n   177â†’          style={{\n   178â†’            backgroundColor: colors.bg,\n   179â†’            color: colors.primary,\n   180â†’            border: `1px solid ${colors.border}`,\n   181â†’          }}\n   182â†’        >\n   183â†’          {Math.round(confidence * 100)}% match\n   184â†’        </span>\n   185â†’      </div>\n   186â†’\n   187â†’      <div className=\"flex items-center gap-3\">\n   188â†’        <CategoryIcon category={category} />\n   189â†’        <div>\n   190â†’          <p className=\"text-lg text-white font-medium\">{subArchetype}</p>\n   191â†’          <p className=\"text-xs text-neutral-500\">{category}</p>\n   192â†’        </div>\n   193â†’      </div>\n   194â†’\n   195â†’      {traits.length > 0 && (\n   196â†’        <div className=\"mt-3\">\n   197â†’          <ArchetypeTraits traits={traits} compact />\n   198â†’        </div>\n   199â†’      )}\n   200â†’    </motion.div>\n   201â†’  );\n   202â†’}\n   203â†’\n   204â†’// ============================================\n   205â†’// MAIN ARCHETYPE CARD\n   206â†’// ============================================\n   207â†’\n   208â†’export function ArchetypeCard({\n   209â†’  classification,\n   210â†’  showSecondary = true,\n   211â†’  showTransition = true,\n   212â†’  showStyleGuide = false,\n   213â†’  compact = false,\n   214â†’}: ArchetypeCardProps) {\n   215â†’  const { primary, secondary, dimorphismLevel, styleGuide, transitionPath } = classification;\n   216â†’  const colors = ARCHETYPE_COLORS[primary.category];\n   217â†’\n   218â†’  // Compact version for overview tab\n   219â†’  if (compact) {\n   220â†’    return (\n   221â†’      <div className=\"bg-neutral-900/50 rounded-lg p-4 border border-neutral-800 hover:border-neutral-700 transition-colors\">\n   222â†’        <div className=\"flex items-center justify-between mb-2\">\n   223â†’          <span className=\"text-sm text-neutral-400\">Archetype</span>\n   224â†’          <span\n   225â†’            className=\"text-xs px-2 py-0.5 rounded-full\"\n   226â†’            style={{\n   227â†’              backgroundColor: colors.bg,\n   228â†’              color: colors.primary,\n   229â†’            }}\n   230â†’          >\n   231â†’            {Math.round(primary.confidence * 100)}%\n   232â†’          </span>\n   233â†’        </div>\n   234â†’        <div className=\"flex items-center gap-3\">\n   235â†’          <CategoryIcon category={primary.category} />\n   236â†’          <div>\n   237â†’            <p className=\"text-xl font-bold text-white\">{primary.subArchetype}</p>\n   238â†’            <p className=\"text-xs text-neutral-500\">{primary.category}</p>\n   239â†’          </div>\n   240â†’        </div>\n   241â†’      </div>\n   242â†’    );\n   243â†’  }\n   244â†’\n   245â†’  return (\n   246â†’    <motion.div\n   247â†’      initial={{ opacity: 0, y: 20 }}\n   248â†’      animate={{ opacity: 1, y: 0 }}\n   249â†’      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n   250â†’    >\n   251â†’      {/* Header */}\n   252â†’      <div className=\"flex items-center justify-between mb-6\">\n   253â†’        <h2 className=\"text-xl font-semibold text-white\">Your Archetype</h2>\n   254â†’        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n   255â†’      </div>\n   256â†’\n   257â†’      {/* Primary Archetype */}\n   258â†’      <div className=\"flex items-start gap-4 mb-6\">\n   259â†’        <motion.div\n   260â†’          initial={{ scale: 0.8 }}\n   261â†’          animate={{ scale: 1 }}\n   262â†’          transition={{ type: 'spring', stiffness: 200 }}\n   263â†’          className=\"w-16 h-16 rounded-xl flex items-center justify-center\"\n   264â†’          style={{\n   265â†’            background: `linear-gradient(135deg, ${colors.primary}30 0%, ${colors.primary}10 100%)`,\n   266â†’            border: `2px solid ${colors.primary}40`,\n   267â†’          }}\n   268â†’        >\n   269â†’          <User className=\"w-8 h-8\" style={{ color: colors.primary }} />\n   270â†’        </motion.div>\n   271â†’\n   272â†’        <div className=\"flex-1\">\n   273â†’          <div className=\"flex items-center gap-2 mb-1\">\n   274â†’            <span className=\"text-sm text-neutral-400\">Primary Match</span>\n   275â†’          </div>\n   276â†’          <h3\n   277â†’            className=\"text-2xl font-bold mb-1\"\n   278â†’            style={{ color: colors.primary }}\n   279â†’          >\n   280â†’            {primary.subArchetype}\n   281â†’          </h3>\n   282â†’          <p className=\"text-sm text-neutral-500\">{primary.category} Category</p>\n   283â†’        </div>\n   284â†’\n   285â†’        <div className=\"text-right\">\n   286â†’          <p className=\"text-sm text-neutral-400 mb-1\">Confidence</p>\n   287â†’          <p\n   288â†’            className=\"text-2xl font-bold\"\n   289â†’            style={{ color: colors.primary }}\n   290â†’          >\n   291â†’            {Math.round(primary.confidence * 100)}%\n   292â†’          </p>\n   293â†’        </div>\n   294â†’      </div>\n   295â†’\n   296â†’      {/* Confidence Bar */}\n   297â†’      <div className=\"mb-6\">\n   298â†’        <ConfidenceBar\n   299â†’          confidence={primary.confidence}\n   300â†’          label=\"Match Strength\"\n   301â†’          color={colors.primary}\n   302â†’        />\n   303â†’      </div>\n   304â†’\n   305â†’      {/* Traits */}\n   306â†’      <div className=\"mb-6\">\n   307â†’        <p className=\"text-sm text-neutral-400 mb-3\">Defining Traits</p>\n   308â†’        <ArchetypeTraits traits={primary.traits} />\n   309â†’      </div>\n   310â†’\n   311â†’      {/* Secondary Archetype */}\n   312â†’      {showSecondary && secondary && (\n   313â†’        <div className=\"mb-6\">\n   314â†’          <SecondaryArchetype\n   315â†’            category={secondary.category}\n   316â†’            subArchetype={secondary.subArchetype}\n   317â†’            confidence={secondary.confidence}\n   318â†’            traits={secondary.traits}\n   319â†’          />\n   320â†’        </div>\n   321â†’      )}\n   322â†’\n   323â†’      {/* Style Guide */}\n   324â†’      {showStyleGuide && (\n   325â†’        <div className=\"mb-6\">\n   326â†’          <StyleGuide style={styleGuide} archetypeName={primary.subArchetype} />\n   327â†’        </div>\n   328â†’      )}\n   329â†’\n   330â†’      {/* Transition Path */}\n   331â†’      {showTransition && transitionPath && (\n   332â†’        <TransitionPath from={primary.subArchetype} transitionPath={transitionPath} />\n   333â†’      )}\n   334â†’\n   335â†’      {/* Info footer */}\n   336â†’      <div className=\"mt-4 flex items-start gap-2 text-xs text-neutral-500\">\n   337â†’        <Info size={14} className=\"flex-shrink-0 mt-0.5\" />\n   338â†’        <p>\n   339â†’          Archetype classification is based on your facial metrics including gonial angle,\n   340â†’          face width-height ratio, and canthal tilt. Your secondary archetype represents\n   341â†’          traits you also exhibit.\n   342â†’        </p>\n   343â†’      </div>\n   344â†’    </motion.div>\n   345â†’  );\n   346â†’}\n   347â†’\n   348â†’/**\n   349â†’ * Preview card for overview tab\n   350â†’ */\n   351â†’export function ArchetypePreview({\n   352â†’  classification,\n   353â†’}: {\n   354â†’  classification: ArchetypeClassification;\n   355â†’}) {\n   356â†’  return <ArchetypeCard classification={classification} compact />;\n   357â†’}\n   358â†’\n   359â†’export default ArchetypeCard;\n   360â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"76162fbd-0f70-445b-b303-0920cb31fe6d","timestamp":"2025-12-26T20:37:06.564Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/psl/archetype/ArchetypeCard.tsx","content":"'use client';\n\nimport { motion } from 'framer-motion';\nimport { ArrowRight, Sparkles, User, Info } from 'lucide-react';\nimport {\n  ArchetypeClassification,\n  ArchetypeCategory,\n  SubArchetypeStyle,\n} from '@/lib/archetype-classifier';\nimport {\n  ArchetypeTraits,\n  CategoryIcon,\n  ConfidenceBar,\n  DimorphismBadge,\n  ARCHETYPE_COLORS,\n} from './ArchetypeTraits';\n\n// ============================================\n// TYPES\n// ============================================\n\ninterface ArchetypeCardProps {\n  classification: ArchetypeClassification;\n  showSecondary?: boolean;\n  showTransition?: boolean;\n  showStyleGuide?: boolean;\n  compact?: boolean;\n}\n\ninterface StyleGuideProps {\n  style: SubArchetypeStyle;\n  archetypeName: string;\n}\n\n// ============================================\n// STYLE GUIDE COMPONENT\n// ============================================\n\nfunction StyleGuide({ style, archetypeName }: StyleGuideProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n      className=\"bg-neutral-800/50 rounded-lg p-4 border border-neutral-700\"\n    >\n      <h4 className=\"text-sm font-medium text-white mb-3 flex items-center gap-2\">\n        <Sparkles className=\"w-4 h-4 text-cyan-400\" />\n        {archetypeName} Style Guide\n      </h4>\n\n      <div className=\"space-y-3\">\n        {/* Clothing */}\n        {style.clothing.length > 0 && (\n          <div>\n            <p className=\"text-xs text-neutral-500 mb-1\">Clothing</p>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {style.clothing.map((item) => (\n                <span\n                  key={item}\n                  className=\"px-2 py-0.5 rounded bg-neutral-700 text-neutral-300 text-xs\"\n                >\n                  {item}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Hair */}\n        {style.hair.length > 0 && (\n          <div>\n            <p className=\"text-xs text-neutral-500 mb-1\">Hair</p>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {style.hair.map((item) => (\n                <span\n                  key={item}\n                  className=\"px-2 py-0.5 rounded bg-neutral-700 text-neutral-300 text-xs\"\n                >\n                  {item}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Colors */}\n        {style.colors.length > 0 && (\n          <div>\n            <p className=\"text-xs text-neutral-500 mb-1\">Colors</p>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {style.colors.map((color) => (\n                <span\n                  key={color}\n                  className=\"px-2 py-0.5 rounded bg-neutral-700 text-neutral-300 text-xs\"\n                >\n                  {color}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION PATH COMPONENT\n// ============================================\n\nfunction TransitionPath({\n  from,\n  transitionPath,\n}: {\n  from: string;\n  transitionPath: { target: string; requirements: string[] };\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n      className=\"p-4 rounded-lg border border-dashed border-neutral-700 bg-neutral-800/30\"\n    >\n      <p className=\"text-sm text-neutral-400 mb-3\">Transition Potential</p>\n\n      <div className=\"flex items-center gap-3 mb-3\">\n        <span className=\"text-white font-medium\">{from}</span>\n        <ArrowRight className=\"text-neutral-600\" size={16} />\n        <span className=\"text-cyan-400 font-medium\">{transitionPath.target}</span>\n      </div>\n\n      <div>\n        <p className=\"text-xs text-neutral-500 mb-2\">Requirements:</p>\n        <ul className=\"space-y-1\">\n          {transitionPath.requirements.map((req, i) => (\n            <li key={i} className=\"text-xs text-neutral-400 flex items-start gap-2\">\n              <span className=\"text-cyan-500 mt-0.5\">-</span>\n              {req}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// SECONDARY ARCHETYPE\n// ============================================\n\nfunction SecondaryArchetype({\n  category,\n  subArchetype,\n  confidence,\n  traits,\n}: {\n  category: ArchetypeCategory;\n  subArchetype: string;\n  confidence: number;\n  traits: string[];\n}) {\n  const colors = ARCHETYPE_COLORS[category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ delay: 0.15 }}\n      className=\"p-4 rounded-lg bg-neutral-800/50 border border-neutral-700\"\n    >\n      <div className=\"flex items-center justify-between mb-2\">\n        <p className=\"text-sm text-neutral-400\">Secondary Match</p>\n        <span\n          className=\"text-xs px-2 py-0.5 rounded-full\"\n          style={{\n            backgroundColor: colors.bg,\n            color: colors.primary,\n            border: `1px solid ${colors.border}`,\n          }}\n        >\n          {Math.round(confidence * 100)}% match\n        </span>\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        <CategoryIcon category={category} />\n        <div>\n          <p className=\"text-lg text-white font-medium\">{subArchetype}</p>\n          <p className=\"text-xs text-neutral-500\">{category}</p>\n        </div>\n      </div>\n\n      {traits.length > 0 && (\n        <div className=\"mt-3\">\n          <ArchetypeTraits traits={traits} compact />\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE CARD\n// ============================================\n\nexport function ArchetypeCard({\n  classification,\n  showSecondary = true,\n  showTransition = true,\n  showStyleGuide = false,\n  compact = false,\n}: ArchetypeCardProps) {\n  const { primary, secondary, dimorphismLevel, styleGuide, transitionPath } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  // Compact version for overview tab\n  if (compact) {\n    return (\n      <div className=\"bg-neutral-900/50 rounded-lg p-4 border border-neutral-800 hover:border-neutral-700 transition-colors\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm text-neutral-400\">Archetype</span>\n          <span\n            className=\"text-xs px-2 py-0.5 rounded-full\"\n            style={{\n              backgroundColor: colors.bg,\n              color: colors.primary,\n            }}\n          >\n            {Math.round(primary.confidence * 100)}%\n          </span>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <CategoryIcon category={primary.category} />\n          <div>\n            <p className=\"text-xl font-bold text-white\">{primary.subArchetype}</p>\n            <p className=\"text-xs text-neutral-500\">{primary.category}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-xl font-semibold text-white\">Your Archetype</h2>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Primary Archetype */}\n      <div className=\"flex items-start gap-4 mb-6\">\n        <motion.div\n          initial={{ scale: 0.8 }}\n          animate={{ scale: 1 }}\n          transition={{ type: 'spring', stiffness: 200 }}\n          className=\"w-16 h-16 rounded-xl flex items-center justify-center\"\n          style={{\n            background: `linear-gradient(135deg, ${colors.primary}30 0%, ${colors.primary}10 100%)`,\n            border: `2px solid ${colors.primary}40`,\n          }}\n        >\n          <User className=\"w-8 h-8\" style={{ color: colors.primary }} />\n        </motion.div>\n\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <span className=\"text-sm text-neutral-400\">Primary Match</span>\n          </div>\n          <h3\n            className=\"text-2xl font-bold mb-1\"\n            style={{ color: colors.primary }}\n          >\n            {primary.subArchetype}\n          </h3>\n          <p className=\"text-sm text-neutral-500\">{primary.category} Category</p>\n        </div>\n\n        <div className=\"text-right\">\n          <p className=\"text-sm text-neutral-400 mb-1\">Confidence</p>\n          <p\n            className=\"text-2xl font-bold\"\n            style={{ color: colors.primary }}\n          >\n            {Math.round(primary.confidence * 100)}%\n          </p>\n        </div>\n      </div>\n\n      {/* Confidence Bar */}\n      <div className=\"mb-6\">\n        <ConfidenceBar\n          confidence={primary.confidence}\n          label=\"Match Strength\"\n          color={colors.primary}\n        />\n      </div>\n\n      {/* Traits */}\n      <div className=\"mb-6\">\n        <p className=\"text-sm text-neutral-400 mb-3\">Defining Traits</p>\n        <ArchetypeTraits traits={primary.traits} />\n      </div>\n\n      {/* Secondary Archetype */}\n      {showSecondary && secondary && (\n        <div className=\"mb-6\">\n          <SecondaryArchetype\n            category={secondary.category}\n            subArchetype={secondary.subArchetype}\n            confidence={secondary.confidence}\n            traits={secondary.traits}\n          />\n        </div>\n      )}\n\n      {/* Style Guide */}\n      {showStyleGuide && (\n        <div className=\"mb-6\">\n          <StyleGuide style={styleGuide} archetypeName={primary.subArchetype} />\n        </div>\n      )}\n\n      {/* Transition Path */}\n      {showTransition && transitionPath && (\n        <TransitionPath from={primary.subArchetype} transitionPath={transitionPath} />\n      )}\n\n      {/* Info footer */}\n      <div className=\"mt-4 flex items-start gap-2 text-xs text-neutral-500\">\n        <Info size={14} className=\"flex-shrink-0 mt-0.5\" />\n        <p>\n          Archetype classification is based on your facial metrics including gonial angle,\n          face width-height ratio, and canthal tilt. Your secondary archetype represents\n          traits you also exhibit.\n        </p>\n      </div>\n    </motion.div>\n  );\n}\n\n/**\n * Preview card for overview tab\n */\nexport function ArchetypePreview({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  return <ArchetypeCard classification={classification} compact />;\n}\n\nexport default ArchetypeCard;\n","numLines":360,"startLine":1,"totalLines":360}}}
{"parentUuid":"76162fbd-0f70-445b-b303-0920cb31fe6d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_019Hfm9HpBVgpMah7Ku3HCmy","type":"message","role":"assistant","content":[{"type":"text","text":"Now I have all the context I need. Let me create the redesigned ArchetypeTab.tsx with the premium design patterns:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":4502,"cache_read_input_tokens":48413,"cache_creation":{"ephemeral_5m_input_tokens":4502,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWVwYDm6qkXn6H1Tb9AhH","type":"assistant","uuid":"31b5fb88-3d7a-441c-a057-4a7408eca839","timestamp":"2025-12-26T20:37:10.976Z"}
{"parentUuid":"31b5fb88-3d7a-441c-a057-4a7408eca839","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_019Hfm9HpBVgpMah7Ku3HCmy","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013tomz3zRpRn49j1unvEw4B","name":"Write","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","content":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n  User,\n  Sparkles,\n  ChevronRight,\n  Globe,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n  DimorphismBadge,\n  ArchetypeTraits,\n  CategoryIcon,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// SECTION HEADER COMPONENT\n// ============================================\n\nfunction SectionHeader({ title }: { title: string }) {\n  return (\n    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n      {title}\n      <div className=\"flex-1 h-px bg-neutral-800\" />\n    </h2>\n  );\n}\n\n// ============================================\n// PREMIUM ARCHETYPE HERO CARD\n// ============================================\n\nfunction PremiumArchetypeCard({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { primary, secondary, dimorphismLevel } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    >\n      {/* Background decoration */}\n      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n        <User size={180} />\n      </div>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n            PRIMARY CLASSIFICATION\n          </span>\n          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n            {primary.subArchetype}\n          </h2>\n        </div>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Main content grid */}\n      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n        {/* Left: Primary archetype info */}\n        <div>\n          <div className=\"flex items-start gap-5 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} size={32} />\n            </motion.div>\n\n            <div className=\"flex-1\">\n              <span\n                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n                style={{\n                  backgroundColor: `${colors.primary}15`,\n                  color: colors.primary,\n                  border: `1px solid ${colors.primary}30`,\n                }}\n              >\n                {primary.category}\n              </span>\n              <div className=\"flex items-baseline gap-3\">\n                <span\n                  className=\"text-4xl font-black\"\n                  style={{ color: colors.primary }}\n                >\n                  {Math.round(primary.confidence * 100)}%\n                </span>\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  MATCH\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Confidence bar */}\n          <div className=\"mb-6\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH STRENGTH\"\n              color={colors.primary}\n            />\n          </div>\n\n          {/* Traits */}\n          <div>\n            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n              DEFINING TRAITS\n            </span>\n            <ArchetypeTraits traits={primary.traits} />\n          </div>\n        </div>\n\n        {/* Right: Secondary archetype */}\n        {secondary && (\n          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                SECONDARY MATCH\n              </span>\n              <span\n                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n                style={{\n                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n                  color: ARCHETYPE_COLORS[secondary.category].primary,\n                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n                }}\n              >\n                {Math.round(secondary.confidence * 100)}%\n              </span>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} size={24} />\n              </div>\n              <div>\n                <h3\n                  className=\"text-xl font-black italic uppercase\"\n                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n                >\n                  {secondary.subArchetype}\n                </h3>\n                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  {secondary.category}\n                </p>\n              </div>\n            </div>\n\n            {secondary.traits.length > 0 && (\n              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n            )}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n    >\n      <SectionHeader title=\"Category Breakdown\" />\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-4 rounded-2xl border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-900/60 border-cyan-500/30'\n                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-black mb-1\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n                {score.category}\n              </div>\n              {/* Progress bar */}\n              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${score.score}%` }}\n                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n                  className=\"h-full rounded-full\"\n                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - PREMIUM CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [\n    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n  ];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n    >\n      <SectionHeader title=\"Style Recommendations\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n        {/* Background decoration */}\n        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n          <Palette size={100} />\n        </div>\n\n        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n            <Palette size={18} className=\"text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              CURATED FOR YOUR ARCHETYPE\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n          {sections.map((section) => (\n            <div\n              key={section.key}\n              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <section.icon size={14} className=\"text-neutral-500\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                  {section.label}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {section.items.slice(0, 4).map((item) => (\n                  <span\n                    key={item}\n                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n                  >\n                    {item}\n                  </span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n    >\n      <SectionHeader title=\"Transition Potential\" />\n\n      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n            <TrendingUp size={18} className=\"text-green-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              YOUR PATH TO OPTIMIZATION\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n          {/* Current */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n              CURRENT\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: primaryColors.primary }}\n            >\n              {primary.subArchetype}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {primary.category}\n            </p>\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH\"\n              color={primaryColors.primary}\n            />\n          </div>\n\n          {/* Target */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n              TARGET\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: targetColors?.primary || '#67e8f9' }}\n            >\n              {transitionPath.target}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n            </p>\n            {targetScore && (\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"PROXIMITY\"\n                color={targetColors?.primary}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n            REQUIREMENTS\n          </span>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {transitionPath.requirements.map((req, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n              >\n                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n                  {i + 1}\n                </span>\n                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3));\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n      >\n        <SectionHeader title=\"Community Forums\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Community Forums\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <Users size={18} className=\"text-amber-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                BASED ON YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {forums.map((forum) => (\n            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                    {forum.category.icon || ''}\n                  </div>\n                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n                    {forum.category.name}\n                  </h4>\n                </div>\n                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                  {forum.reason || forum.category.description}\n                </p>\n                <div className=\"flex items-center justify-end\">\n                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                    VISIT\n                    <ChevronRight size={12} />\n                  </span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        <Link href=\"/forum\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <Globe size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Recommended Guides\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <BookOpen size={18} className=\"text-cyan-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                OPTIMIZED FOR YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {guides.map((guide) => (\n            <div\n              key={guide.id}\n              onClick={() => onOpenGuide(guide)}\n              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n                </div>\n                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n                  {guide.title}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                {guide.description}\n              </p>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n                  <Clock size={12} />\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n                    {guide.estimatedReadTime} MIN\n                  </span>\n                </div>\n                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  READ\n                  <ChevronRight size={12} />\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Link href=\"/results?tab=guides\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <BookOpen size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n            <User size={32} className=\"text-neutral-600\" />\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n            CLASSIFICATION PENDING\n          </h3>\n          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"\"\n      subtitle=\"\"\n    >\n      <div className=\"space-y-10\">\n        {/* Page header */}\n        <header>\n          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n            Archetype <span className=\"text-cyan-400\">Classification</span>\n          </h1>\n          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n          </p>\n        </header>\n\n        {/* Premium Archetype Card */}\n        <PremiumArchetypeCard classification={classification} />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n        >\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n              <Info size={18} className=\"text-neutral-500\" />\n            </div>\n            <div>\n              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n                METHODOLOGY\n              </h4>\n              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n                Archetype classification analyzes your facial structure including gonial angle,\n                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n                Style recommendations are tailored to complement your natural features.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":4502,"cache_read_input_tokens":48413,"cache_creation":{"ephemeral_5m_input_tokens":4502,"ephemeral_1h_input_tokens":0},"output_tokens":8858,"service_tier":"standard"}},"requestId":"req_011CWVwYDm6qkXn6H1Tb9AhH","type":"assistant","uuid":"5c4fcac2-0029-41ea-b324-67392063180b","timestamp":"2025-12-26T20:39:21.422Z"}
{"parentUuid":"5c4fcac2-0029-41ea-b324-67392063180b","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013tomz3zRpRn49j1unvEw4B","type":"tool_result","content":"The file /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n     1â†’'use client';\n     2â†’\n     3â†’import { useMemo, useEffect, useState } from 'react';\n     4â†’import { motion } from 'framer-motion';\n     5â†’import Link from 'next/link';\n     6â†’import {\n     7â†’  Info,\n     8â†’  Target,\n     9â†’  Palette,\n    10â†’  TrendingUp,\n    11â†’  Users,\n    12â†’  ArrowRight,\n    13â†’  BookOpen,\n    14â†’  Clock,\n    15â†’  Brain,\n    16â†’  Wrench,\n    17â†’  TrendingDown,\n    18â†’  Dumbbell,\n    19â†’  Calendar,\n    20â†’  Heart,\n    21â†’  Utensils,\n    22â†’  Droplet,\n    23â†’  User,\n    24â†’  Sparkles,\n    25â†’  ChevronRight,\n    26â†’  Globe,\n    27â†’} from 'lucide-react';\n    28â†’import { useResults } from '@/contexts/ResultsContext';\n    29â†’import { Guide } from '@/types/guides';\n    30â†’import { getGuideById } from '@/data/guides';\n    31â†’import { TabContent } from '../ResultsLayout';\n    32â†’import { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\n    33â†’import {\n    34â†’  ARCHETYPE_COLORS,\n    35â†’  ConfidenceBar,\n    36â†’  DimorphismBadge,\n    37â†’  ArchetypeTraits,\n    38â†’  CategoryIcon,\n    39â†’} from '@/components/psl/archetype/ArchetypeTraits';\n    40â†’import {\n    41â†’  classifyFromRatios,\n    42â†’  ArchetypeClassification,\n    43â†’  ArchetypeCategory,\n    44â†’} from '@/lib/archetype-classifier';\n    45â†’import { api, ArchetypeForumRecommendation } from '@/lib/api';\n    46â†’\n    47â†’// ============================================\n    48â†’// SECTION HEADER COMPONENT\n    49â†’// ============================================\n    50â†’\n    51â†’function SectionHeader({ title }: { title: string }) {\n    52â†’  return (\n    53â†’    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n    54â†’      {title}\n    55â†’      <div className=\"flex-1 h-px bg-neutral-800\" />\n    56â†’    </h2>\n    57â†’  );\n    58â†’}\n    59â†’\n    60â†’// ============================================\n    61â†’// PREMIUM ARCHETYPE HERO CARD\n    62â†’// ============================================\n    63â†’\n    64â†’function PremiumArchetypeCard({\n    65â†’  classification,\n    66â†’}: {\n    67â†’  classification: ArchetypeClassification;\n    68â†’}) {\n    69â†’  const { primary, secondary, dimorphismLevel } = classification;\n    70â†’  const colors = ARCHETYPE_COLORS[primary.category];\n    71â†’\n    72â†’  return (\n    73â†’    <motion.div\n    74â†’      initial={{ opacity: 0, y: 20 }}\n    75â†’      animate={{ opacity: 1, y: 0 }}\n    76â†’      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    77â†’    >\n    78â†’      {/* Background decoration */}\n    79â†’      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n    80â†’        <User size={180} />\n    81â†’      </div>\n    82â†’\n    83â†’      {/* Header */}\n    84â†’      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n    85â†’        <div>\n    86â†’          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n    87â†’            PRIMARY CLASSIFICATION\n    88â†’          </span>\n    89â†’          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n    90â†’            {primary.subArchetype}\n    91â†’          </h2>\n    92â†’        </div>\n    93â†’        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n    94â†’      </div>\n    95â†’\n    96â†’      {/* Main content grid */}\n    97â†’      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n    98â†’        {/* Left: Primary archetype info */}\n    99â†’        <div>\n   100â†’          <div className=\"flex items-start gap-5 mb-6\">\n   101â†’            <motion.div\n   102â†’              initial={{ scale: 0.8 }}\n   103â†’              animate={{ scale: 1 }}\n   104â†’              transition={{ type: 'spring', stiffness: 200 }}\n   105â†’              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n   106â†’              style={{\n   107â†’                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n   108â†’                borderColor: `${colors.primary}30`,\n   109â†’              }}\n   110â†’            >\n   111â†’              <CategoryIcon category={primary.category} size={32} />\n   112â†’            </motion.div>\n   113â†’\n   114â†’            <div className=\"flex-1\">\n   115â†’              <span\n   116â†’                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n   117â†’                style={{\n   118â†’                  backgroundColor: `${colors.primary}15`,\n   119â†’                  color: colors.primary,\n   120â†’                  border: `1px solid ${colors.primary}30`,\n   121â†’                }}\n   122â†’              >\n   123â†’                {primary.category}\n   124â†’              </span>\n   125â†’              <div className=\"flex items-baseline gap-3\">\n   126â†’                <span\n   127â†’                  className=\"text-4xl font-black\"\n   128â†’                  style={{ color: colors.primary }}\n   129â†’                >\n   130â†’                  {Math.round(primary.confidence * 100)}%\n   131â†’                </span>\n   132â†’                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n   133â†’                  MATCH\n   134â†’                </span>\n   135â†’              </div>\n   136â†’            </div>\n   137â†’          </div>\n   138â†’\n   139â†’          {/* Confidence bar */}\n   140â†’          <div className=\"mb-6\">\n   141â†’            <ConfidenceBar\n   142â†’              confidence={primary.confidence}\n   143â†’              label=\"MATCH STRENGTH\"\n   144â†’              color={colors.primary}\n   145â†’            />\n   146â†’          </div>\n   147â†’\n   148â†’          {/* Traits */}\n   149â†’          <div>\n   150â†’            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n   151â†’              DEFINING TRAITS\n   152â†’            </span>\n   153â†’            <ArchetypeTraits traits={primary.traits} />\n   154â†’          </div>\n   155â†’        </div>\n   156â†’\n   157â†’        {/* Right: Secondary archetype */}\n   158â†’        {secondary && (\n   159â†’          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n   160â†’            <div className=\"flex items-center justify-between mb-4\">\n   161â†’              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n   162â†’                SECONDARY MATCH\n   163â†’              </span>\n   164â†’              <span\n   165â†’                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n   166â†’                style={{\n   167â†’                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n   168â†’                  color: ARCHETYPE_COLORS[secondary.category].primary,\n   169â†’                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n   170â†’                }}\n   171â†’              >\n   172â†’                {Math.round(secondary.confidence * 100)}%\n   173â†’              </span>\n   174â†’            </div>\n   175â†’\n   176â†’            <div className=\"flex items-center gap-4 mb-4\">\n   177â†’              <div\n   178â†’                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n   179â†’                style={{\n   180â†’                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n   181â†’                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n   182â†’                }}\n   183â†’              >\n   184â†’                <CategoryIcon category={secondary.category} size={24} />\n   185â†’              </div>\n   186â†’              <div>\n   187â†’                <h3\n   188â†’                  className=\"text-xl font-black italic uppercase\"\n   189â†’                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n   190â†’                >\n   191â†’                  {secondary.subArchetype}\n   192â†’                </h3>\n   193â†’                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n   194â†’                  {secondary.category}\n   195â†’                </p>\n   196â†’              </div>\n   197â†’            </div>\n   198â†’\n   199â†’            {secondary.traits.length > 0 && (\n   200â†’              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n   201â†’            )}\n   202â†’          </div>\n   203â†’        )}\n   204â†’      </div>\n   205â†’    </motion.div>\n   206â†’  );\n   207â†’}\n   208â†’\n   209â†’// ============================================\n   210â†’// ALL SCORES - COMPACT GRID\n   211â†’// ============================================\n   212â†’\n   213â†’function AllArchetypeScores({\n   214â†’  classification,\n   215â†’}: {\n   216â†’  classification: ArchetypeClassification;\n   217â†’}) {\n   218â†’  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n   219â†’\n   220â†’  return (\n   221â†’    <motion.div\n   222â†’      initial={{ opacity: 0 }}\n   223â†’      animate={{ opacity: 1 }}\n   224â†’      transition={{ delay: 0.2 }}\n   225â†’    >\n   226â†’      <SectionHeader title=\"Category Breakdown\" />\n   227â†’\n   228â†’      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n   229â†’        {sortedScores.map((score, index) => {\n   230â†’          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n   231â†’          const isPrimary = index === 0;\n   232â†’\n   233â†’          return (\n   234â†’            <div\n   235â†’              key={score.category}\n   236â†’              className={`relative p-4 rounded-2xl border transition-all ${\n   237â†’                isPrimary\n   238â†’                  ? 'bg-neutral-900/60 border-cyan-500/30'\n   239â†’                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n   240â†’              }`}\n   241â†’            >\n   242â†’              {isPrimary && (\n   243â†’                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n   244â†’                  PRIMARY\n   245â†’                </div>\n   246â†’              )}\n   247â†’              <div\n   248â†’                className=\"text-2xl font-black mb-1\"\n   249â†’                style={{ color: colors?.primary || '#6b7280' }}\n   250â†’              >\n   251â†’                {score.score}%\n   252â†’              </div>\n   253â†’              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n   254â†’                {score.category}\n   255â†’              </div>\n   256â†’              {/* Progress bar */}\n   257â†’              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n   258â†’                <motion.div\n   259â†’                  initial={{ width: 0 }}\n   260â†’                  animate={{ width: `${score.score}%` }}\n   261â†’                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n   262â†’                  className=\"h-full rounded-full\"\n   263â†’                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n   264â†’                />\n   265â†’              </div>\n   266â†’            </div>\n   267â†’          );\n   268â†’        })}\n   269â†’      </div>\n   270â†’    </motion.div>\n   271â†’  );\n   272â†’}\n   273â†’\n   274â†’// ============================================\n   275â†’// STYLE RECOMMENDATIONS - PREMIUM CARDS\n   276â†’// ============================================\n   277â†’\n   278â†’function StyleRecommendations({\n   279â†’  classification,\n   280â†’}: {\n   281â†’  classification: ArchetypeClassification;\n   282â†’}) {\n   283â†’  const { styleGuide, primary } = classification;\n   284â†’  const colors = ARCHETYPE_COLORS[primary.category];\n   285â†’\n   286â†’  const sections = [\n   287â†’    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n   288â†’    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n   289â†’    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n   290â†’  ];\n   291â†’\n   292â†’  return (\n   293â†’    <motion.div\n   294â†’      initial={{ opacity: 0 }}\n   295â†’      animate={{ opacity: 1 }}\n   296â†’      transition={{ delay: 0.3 }}\n   297â†’    >\n   298â†’      <SectionHeader title=\"Style Recommendations\" />\n   299â†’\n   300â†’      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n   301â†’        {/* Background decoration */}\n   302â†’        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n   303â†’          <Palette size={100} />\n   304â†’        </div>\n   305â†’\n   306â†’        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n   307â†’          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n   308â†’            <Palette size={18} className=\"text-purple-400\" />\n   309â†’          </div>\n   310â†’          <div>\n   311â†’            <h3 className=\"text-lg font-black italic uppercase text-white\">\n   312â†’              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n   313â†’            </h3>\n   314â†’            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n   315â†’              CURATED FOR YOUR ARCHETYPE\n   316â†’            </p>\n   317â†’          </div>\n   318â†’        </div>\n   319â†’\n   320â†’        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n   321â†’          {sections.map((section) => (\n   322â†’            <div\n   323â†’              key={section.key}\n   324â†’              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n   325â†’            >\n   326â†’              <div className=\"flex items-center gap-2 mb-3\">\n   327â†’                <section.icon size={14} className=\"text-neutral-500\" />\n   328â†’                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n   329â†’                  {section.label}\n   330â†’                </span>\n   331â†’              </div>\n   332â†’              <div className=\"flex flex-wrap gap-2\">\n   333â†’                {section.items.slice(0, 4).map((item) => (\n   334â†’                  <span\n   335â†’                    key={item}\n   336â†’                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n   337â†’                  >\n   338â†’                    {item}\n   339â†’                  </span>\n   340â†’                ))}\n   341â†’              </div>\n   342â†’            </div>\n   343â†’          ))}\n   344â†’        </div>\n   345â†’      </div>\n   346â†’    </motion.div>\n   347â†’  );\n   348â†’}\n   349â†’\n   350â†’// ============================================\n   351â†’// TRANSITION OPPORTUNITIES\n   352â†’// ============================================\n   353â†’\n   354â†’function TransitionOpportunities({\n   355â†’  classification,\n   356â†’}: {\n   357â†’  classification: ArchetypeClassification;\n   358â†’}) {\n   359â†’  const { transitionPath, primary, allScores } = classification;\n   360â†’\n   361â†’  if (!transitionPath) return null;\n   362â†’\n   363â†’  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n   364â†’  const primaryColors = ARCHETYPE_COLORS[primary.category];\n   365â†’  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n   366â†’\n   367â†’  return (\n   368â†’    <motion.div\n   369â†’      initial={{ opacity: 0 }}\n   370â†’      animate={{ opacity: 1 }}\n   371â†’      transition={{ delay: 0.4 }}\n   372â†’    >\n   373â†’      <SectionHeader title=\"Transition Potential\" />\n   374â†’\n   375â†’      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n   376â†’        <div className=\"flex items-center gap-3 mb-6\">\n   377â†’          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n   378â†’            <TrendingUp size={18} className=\"text-green-400\" />\n   379â†’          </div>\n   380â†’          <div>\n   381â†’            <h3 className=\"text-lg font-black italic uppercase text-white\">\n   382â†’              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n   383â†’            </h3>\n   384â†’            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n   385â†’              YOUR PATH TO OPTIMIZATION\n   386â†’            </p>\n   387â†’          </div>\n   388â†’        </div>\n   389â†’\n   390â†’        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n   391â†’          {/* Current */}\n   392â†’          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n   393â†’            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n   394â†’              CURRENT\n   395â†’            </span>\n   396â†’            <h4\n   397â†’              className=\"text-2xl font-black italic uppercase mb-1\"\n   398â†’              style={{ color: primaryColors.primary }}\n   399â†’            >\n   400â†’              {primary.subArchetype}\n   401â†’            </h4>\n   402â†’            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n   403â†’              {primary.category}\n   404â†’            </p>\n   405â†’            <ConfidenceBar\n   406â†’              confidence={primary.confidence}\n   407â†’              label=\"MATCH\"\n   408â†’              color={primaryColors.primary}\n   409â†’            />\n   410â†’          </div>\n   411â†’\n   412â†’          {/* Target */}\n   413â†’          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n   414â†’            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n   415â†’              TARGET\n   416â†’            </span>\n   417â†’            <h4\n   418â†’              className=\"text-2xl font-black italic uppercase mb-1\"\n   419â†’              style={{ color: targetColors?.primary || '#67e8f9' }}\n   420â†’            >\n   421â†’              {transitionPath.target}\n   422â†’            </h4>\n   423â†’            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n   424â†’              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n   425â†’            </p>\n   426â†’            {targetScore && (\n   427â†’              <ConfidenceBar\n   428â†’                confidence={targetScore.confidence}\n   429â†’                label=\"PROXIMITY\"\n   430â†’                color={targetColors?.primary}\n   431â†’              />\n   432â†’            )}\n   433â†’          </div>\n   434â†’        </div>\n   435â†’\n   436â†’        {/* Requirements */}\n   437â†’        <div>\n   438â†’          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n   439â†’            REQUIREMENTS\n   440â†’          </span>\n   441â†’          <div className=\"grid md:grid-cols-2 gap-3\">\n   442â†’            {transitionPath.requirements.map((req, i) => (\n   443â†’              <div\n   444â†’                key={i}\n   445â†’                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n   446â†’              >\n   447â†’                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n   448â†’                  {i + 1}\n   449â†’                </span>\n   450â†’                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n   451â†’              </div>\n   452â†’            ))}\n   453â†’          </div>\n   454â†’        </div>\n   455â†’      </div>\n   456â†’    </motion.div>\n   457â†’  );\n   458â†’}\n   459â†’\n   460â†’// ============================================\n   461â†’// RECOMMENDED FORUMS SECTION\n   462â†’// ============================================\n   463â†’\n   464â†’function RecommendedForumsSection({\n   465â†’  classification,\n   466â†’}: {\n   467â†’  classification: ArchetypeClassification;\n   468â†’}) {\n   469â†’  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n   470â†’  const [isLoading, setIsLoading] = useState(true);\n   471â†’\n   472â†’  const archetype = classification.primary.category;\n   473â†’  const colors = ARCHETYPE_COLORS[archetype];\n   474â†’\n   475â†’  useEffect(() => {\n   476â†’    let isMounted = true;\n   477â†’\n   478â†’    async function fetchForums() {\n   479â†’      setIsLoading(true);\n   480â†’      try {\n   481â†’        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n   482â†’        if (isMounted) {\n   483â†’          setForums(recommendations.slice(0, 3));\n   484â†’        }\n   485â†’      } catch (error) {\n   486â†’        if (isMounted) {\n   487â†’          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n   488â†’        }\n   489â†’      } finally {\n   490â†’        if (isMounted) {\n   491â†’          setIsLoading(false);\n   492â†’        }\n   493â†’      }\n   494â†’    }\n   495â†’\n   496â†’    fetchForums();\n   497â†’\n   498â†’    return () => {\n   499â†’      isMounted = false;\n   500â†’    };\n   501â†’  }, [archetype]);\n   502â†’\n   503â†’  if (isLoading) {\n   504â†’    return (\n   505â†’      <motion.div\n   506â†’        initial={{ opacity: 0 }}\n   507â†’        animate={{ opacity: 1 }}\n   508â†’        transition={{ delay: 0.35 }}\n   509â†’      >\n   510â†’        <SectionHeader title=\"Community Forums\" />\n   511â†’        <div className=\"grid gap-4 md:grid-cols-3\">\n   512â†’          {[1, 2, 3].map((i) => (\n   513â†’            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n   514â†’          ))}\n   515â†’        </div>\n   516â†’      </motion.div>\n   517â†’    );\n   518â†’  }\n   519â†’\n   520â†’  if (forums.length === 0) return null;\n   521â†’\n   522â†’  return (\n   523â†’    <motion.div\n   524â†’      initial={{ opacity: 0 }}\n   525â†’      animate={{ opacity: 1 }}\n   526â†’      transition={{ delay: 0.35 }}\n   527â†’    >\n   528â†’      <SectionHeader title=\"Community Forums\" />\n   529â†’\n   530â†’      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n   531â†’        <div className=\"flex items-center justify-between mb-6\">\n   532â†’          <div className=\"flex items-center gap-3\">\n   533â†’            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n   534â†’              <Users size={18} className=\"text-amber-400\" />\n   535â†’            </div>\n   536â†’            <div>\n   537â†’              <h3 className=\"text-lg font-black italic uppercase text-white\">\n   538â†’                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n   539â†’              </h3>\n   540â†’              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n   541â†’                BASED ON YOUR ARCHETYPE\n   542â†’              </p>\n   543â†’            </div>\n   544â†’          </div>\n   545â†’          <span\n   546â†’            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n   547â†’            style={{\n   548â†’              backgroundColor: `${colors.primary}15`,\n   549â†’              color: colors.primary,\n   550â†’              border: `1px solid ${colors.primary}30`,\n   551â†’            }}\n   552â†’          >\n   553â†’            {archetype}\n   554â†’          </span>\n   555â†’        </div>\n   556â†’\n   557â†’        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n   558â†’          {forums.map((forum) => (\n   559â†’            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n   560â†’              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n   561â†’                <div className=\"flex items-center gap-3 mb-3\">\n   562â†’                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n   563â†’                    {forum.category.icon || ''}\n   564â†’                  </div>\n   565â†’                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n   566â†’                    {forum.category.name}\n   567â†’                  </h4>\n   568â†’                </div>\n   569â†’                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n   570â†’                  {forum.reason || forum.category.description}\n   571â†’                </p>\n   572â†’                <div className=\"flex items-center justify-end\">\n   573â†’                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n   574â†’                    VISIT\n   575â†’                    <ChevronRight size={12} />\n   576â†’                  </span>\n   577â†’                </div>\n   578â†’              </div>\n   579â†’            </Link>\n   580â†’          ))}\n   581â†’        </div>\n   582â†’\n   583â†’        <Link href=\"/forum\">\n   584â†’          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n   585â†’            <Globe size={14} />\n   586â†’            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n   587â†’            <ArrowRight size={14} />\n   588â†’          </div>\n   589â†’        </Link>\n   590â†’      </div>\n   591â†’    </motion.div>\n   592â†’  );\n   593â†’}\n   594â†’\n   595â†’// ============================================\n   596â†’// RECOMMENDED GUIDES SECTION\n   597â†’// ============================================\n   598â†’\n   599â†’const GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n   600â†’  BookOpen: <BookOpen size={18} />,\n   601â†’  Dumbbell: <Dumbbell size={18} />,\n   602â†’  Brain: <Brain size={18} />,\n   603â†’  Wrench: <Wrench size={18} />,\n   604â†’  TrendingDown: <TrendingDown size={18} />,\n   605â†’  Calendar: <Calendar size={18} />,\n   606â†’  Target: <Target size={18} />,\n   607â†’  Heart: <Heart size={18} />,\n   608â†’  Utensils: <Utensils size={18} />,\n   609â†’  Droplet: <Droplet size={18} />,\n   610â†’};\n   611â†’\n   612â†’const ARCHETYPE_GUIDES: Record<string, string[]> = {\n   613â†’  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n   614â†’  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n   615â†’  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n   616â†’  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n   617â†’  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n   618â†’  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n   619â†’};\n   620â†’\n   621â†’function RecommendedGuidesSection({\n   622â†’  classification,\n   623â†’  onOpenGuide,\n   624â†’}: {\n   625â†’  classification: ArchetypeClassification;\n   626â†’  onOpenGuide: (guide: Guide) => void;\n   627â†’}) {\n   628â†’  const archetype = classification.primary.category;\n   629â†’  const colors = ARCHETYPE_COLORS[archetype];\n   630â†’  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n   631â†’\n   632â†’  const guides = guideIds\n   633â†’    .map((id) => getGuideById(id))\n   634â†’    .filter((g): g is Guide => g !== undefined)\n   635â†’    .slice(0, 3);\n   636â†’\n   637â†’  if (guides.length === 0) return null;\n   638â†’\n   639â†’  return (\n   640â†’    <motion.div\n   641â†’      initial={{ opacity: 0 }}\n   642â†’      animate={{ opacity: 1 }}\n   643â†’      transition={{ delay: 0.35 }}\n   644â†’    >\n   645â†’      <SectionHeader title=\"Recommended Guides\" />\n   646â†’\n   647â†’      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n   648â†’        <div className=\"flex items-center justify-between mb-6\">\n   649â†’          <div className=\"flex items-center gap-3\">\n   650â†’            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n   651â†’              <BookOpen size={18} className=\"text-cyan-400\" />\n   652â†’            </div>\n   653â†’            <div>\n   654â†’              <h3 className=\"text-lg font-black italic uppercase text-white\">\n   655â†’                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n   656â†’              </h3>\n   657â†’              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n   658â†’                OPTIMIZED FOR YOUR ARCHETYPE\n   659â†’              </p>\n   660â†’            </div>\n   661â†’          </div>\n   662â†’          <span\n   663â†’            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n   664â†’            style={{\n   665â†’              backgroundColor: `${colors.primary}15`,\n   666â†’              color: colors.primary,\n   667â†’              border: `1px solid ${colors.primary}30`,\n   668â†’            }}\n   669â†’          >\n   670â†’            {archetype}\n   671â†’          </span>\n   672â†’        </div>\n   673â†’\n   674â†’        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n   675â†’          {guides.map((guide) => (\n   676â†’            <div\n   677â†’              key={guide.id}\n   678â†’              onClick={() => onOpenGuide(guide)}\n   679â†’              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n   680â†’            >\n   681â†’              <div className=\"flex items-center gap-3 mb-3\">\n   682â†’                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n   683â†’                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n   684â†’                </div>\n   685â†’                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n   686â†’                  {guide.title}\n   687â†’                </h4>\n   688â†’              </div>\n   689â†’              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n   690â†’                {guide.description}\n   691â†’              </p>\n   692â†’              <div className=\"flex items-center justify-between\">\n   693â†’                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n   694â†’                  <Clock size={12} />\n   695â†’                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n   696â†’                    {guide.estimatedReadTime} MIN\n   697â†’                  </span>\n   698â†’                </div>\n   699â†’                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n   700â†’                  READ\n   701â†’                  <ChevronRight size={12} />\n   702â†’                </span>\n   703â†’              </div>\n   704â†’            </div>\n   705â†’          ))}\n   706â†’        </div>\n   707â†’\n   708â†’        <Link href=\"/results?tab=guides\">\n   709â†’          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n   710â†’            <BookOpen size={14} />\n   711â†’            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n   712â†’            <ArrowRight size={14} />\n   713â†’          </div>\n   714â†’        </Link>\n   715â†’      </div>\n   716â†’    </motion.div>\n   717â†’  );\n   718â†’}\n   719â†’\n   720â†’// ============================================\n   721â†’// MAIN ARCHETYPE TAB\n   722â†’// ============================================\n   723â†’\n   724â†’export function ArchetypeTab() {\n   725â†’  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n   726â†’\n   727â†’  const classification = useMemo((): ArchetypeClassification | null => {\n   728â†’    if (!frontRatios || frontRatios.length === 0) return null;\n   729â†’\n   730â†’    try {\n   731â†’      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n   732â†’    } catch (error) {\n   733â†’      console.error('[ArchetypeTab] Classification error:', error);\n   734â†’      return null;\n   735â†’    }\n   736â†’  }, [frontRatios, sideRatios, gender, ethnicity]);\n   737â†’\n   738â†’  const handleOpenGuide = () => {\n   739â†’    setActiveTab('guides');\n   740â†’  };\n   741â†’\n   742â†’  if (!classification) {\n   743â†’    return (\n   744â†’      <TabContent\n   745â†’        title=\"Archetype Classification\"\n   746â†’        subtitle=\"Determining your facial archetype based on your metrics\"\n   747â†’      >\n   748â†’        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n   749â†’          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n   750â†’            <User size={32} className=\"text-neutral-600\" />\n   751â†’          </div>\n   752â†’          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n   753â†’            CLASSIFICATION PENDING\n   754â†’          </h3>\n   755â†’          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n   756â†’            Unable to classify archetype. Please ensure your analysis is complete.\n   757â†’          </p>\n   758â†’        </div>\n   759â†’      </TabContent>\n   760â†’    );\n   761â†’  }\n   762â†’\n   763â†’  return (\n   764â†’    <TabContent\n   765â†’      title=\"\"\n   766â†’      subtitle=\"\"\n   767â†’    >\n   768â†’      <div className=\"space-y-10\">\n   769â†’        {/* Page header */}\n   770â†’        <header>\n   771â†’          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n   772â†’            Archetype <span className=\"text-cyan-400\">Classification</span>\n   773â†’          </h1>\n   774â†’          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n   775â†’            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n   776â†’          </p>\n   777â†’        </header>\n   778â†’\n   779â†’        {/* Premium Archetype Card */}\n   780â†’        <PremiumArchetypeCard classification={classification} />\n   781â†’\n   782â†’        {/* All Scores Breakdown */}\n   783â†’        <AllArchetypeScores classification={classification} />\n   784â†’\n   785â†’        {/* Style Recommendations */}\n   786â†’        <StyleRecommendations classification={classification} />\n   787â†’\n   788â†’        {/* Recommended Guides */}\n   789â†’        <RecommendedGuidesSection\n   790â†’          classification={classification}\n   791â†’          onOpenGuide={handleOpenGuide}\n   792â†’        />\n   793â†’\n   794â†’        {/* Recommended Forums */}\n   795â†’        <RecommendedForumsSection classification={classification} />\n   796â†’\n   797â†’        {/* Transition Opportunities */}\n   798â†’        <TransitionOpportunities classification={classification} />\n   799â†’\n   800â†’        {/* Info footer */}\n   801â†’        <motion.div\n   802â†’          initial={{ opacity: 0 }}\n   803â†’          animate={{ opacity: 1 }}\n   804â†’          transition={{ delay: 0.5 }}\n   805â†’          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n   806â†’        >\n   807â†’          <div className=\"flex items-start gap-4\">\n   808â†’            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n   809â†’              <Info size={18} className=\"text-neutral-500\" />\n   810â†’            </div>\n   811â†’            <div>\n   812â†’              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n   813â†’                METHODOLOGY\n   814â†’              </h4>\n   815â†’              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n   816â†’                Archetype classification analyzes your facial structure including gonial angle,\n   817â†’                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n   818â†’                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n   819â†’                Style recommendations are tailored to complement your natural features.\n   820â†’              </p>\n   821â†’            </div>\n   822â†’          </div>\n   823â†’        </motion.div>\n   824â†’      </div>\n   825â†’    </TabContent>\n   826â†’  );\n   827â†’}\n   828â†’"}]},"uuid":"32c06bca-0feb-47ca-9e64-bf17d626ee33","timestamp":"2025-12-26T20:39:21.547Z","toolUseResult":{"type":"update","filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","content":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n  User,\n  Sparkles,\n  ChevronRight,\n  Globe,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n  DimorphismBadge,\n  ArchetypeTraits,\n  CategoryIcon,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// SECTION HEADER COMPONENT\n// ============================================\n\nfunction SectionHeader({ title }: { title: string }) {\n  return (\n    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n      {title}\n      <div className=\"flex-1 h-px bg-neutral-800\" />\n    </h2>\n  );\n}\n\n// ============================================\n// PREMIUM ARCHETYPE HERO CARD\n// ============================================\n\nfunction PremiumArchetypeCard({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { primary, secondary, dimorphismLevel } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    >\n      {/* Background decoration */}\n      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n        <User size={180} />\n      </div>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n            PRIMARY CLASSIFICATION\n          </span>\n          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n            {primary.subArchetype}\n          </h2>\n        </div>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Main content grid */}\n      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n        {/* Left: Primary archetype info */}\n        <div>\n          <div className=\"flex items-start gap-5 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} size={32} />\n            </motion.div>\n\n            <div className=\"flex-1\">\n              <span\n                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n                style={{\n                  backgroundColor: `${colors.primary}15`,\n                  color: colors.primary,\n                  border: `1px solid ${colors.primary}30`,\n                }}\n              >\n                {primary.category}\n              </span>\n              <div className=\"flex items-baseline gap-3\">\n                <span\n                  className=\"text-4xl font-black\"\n                  style={{ color: colors.primary }}\n                >\n                  {Math.round(primary.confidence * 100)}%\n                </span>\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  MATCH\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Confidence bar */}\n          <div className=\"mb-6\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH STRENGTH\"\n              color={colors.primary}\n            />\n          </div>\n\n          {/* Traits */}\n          <div>\n            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n              DEFINING TRAITS\n            </span>\n            <ArchetypeTraits traits={primary.traits} />\n          </div>\n        </div>\n\n        {/* Right: Secondary archetype */}\n        {secondary && (\n          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                SECONDARY MATCH\n              </span>\n              <span\n                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n                style={{\n                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n                  color: ARCHETYPE_COLORS[secondary.category].primary,\n                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n                }}\n              >\n                {Math.round(secondary.confidence * 100)}%\n              </span>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} size={24} />\n              </div>\n              <div>\n                <h3\n                  className=\"text-xl font-black italic uppercase\"\n                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n                >\n                  {secondary.subArchetype}\n                </h3>\n                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  {secondary.category}\n                </p>\n              </div>\n            </div>\n\n            {secondary.traits.length > 0 && (\n              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n            )}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n    >\n      <SectionHeader title=\"Category Breakdown\" />\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-4 rounded-2xl border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-900/60 border-cyan-500/30'\n                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-black mb-1\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n                {score.category}\n              </div>\n              {/* Progress bar */}\n              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${score.score}%` }}\n                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n                  className=\"h-full rounded-full\"\n                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - PREMIUM CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [\n    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n  ];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n    >\n      <SectionHeader title=\"Style Recommendations\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n        {/* Background decoration */}\n        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n          <Palette size={100} />\n        </div>\n\n        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n            <Palette size={18} className=\"text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              CURATED FOR YOUR ARCHETYPE\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n          {sections.map((section) => (\n            <div\n              key={section.key}\n              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <section.icon size={14} className=\"text-neutral-500\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                  {section.label}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {section.items.slice(0, 4).map((item) => (\n                  <span\n                    key={item}\n                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n                  >\n                    {item}\n                  </span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n    >\n      <SectionHeader title=\"Transition Potential\" />\n\n      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n            <TrendingUp size={18} className=\"text-green-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              YOUR PATH TO OPTIMIZATION\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n          {/* Current */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n              CURRENT\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: primaryColors.primary }}\n            >\n              {primary.subArchetype}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {primary.category}\n            </p>\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH\"\n              color={primaryColors.primary}\n            />\n          </div>\n\n          {/* Target */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n              TARGET\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: targetColors?.primary || '#67e8f9' }}\n            >\n              {transitionPath.target}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n            </p>\n            {targetScore && (\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"PROXIMITY\"\n                color={targetColors?.primary}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n            REQUIREMENTS\n          </span>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {transitionPath.requirements.map((req, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n              >\n                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n                  {i + 1}\n                </span>\n                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3));\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n      >\n        <SectionHeader title=\"Community Forums\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Community Forums\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <Users size={18} className=\"text-amber-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                BASED ON YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {forums.map((forum) => (\n            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                    {forum.category.icon || ''}\n                  </div>\n                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n                    {forum.category.name}\n                  </h4>\n                </div>\n                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                  {forum.reason || forum.category.description}\n                </p>\n                <div className=\"flex items-center justify-end\">\n                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                    VISIT\n                    <ChevronRight size={12} />\n                  </span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        <Link href=\"/forum\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <Globe size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Recommended Guides\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <BookOpen size={18} className=\"text-cyan-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                OPTIMIZED FOR YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {guides.map((guide) => (\n            <div\n              key={guide.id}\n              onClick={() => onOpenGuide(guide)}\n              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n                </div>\n                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n                  {guide.title}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                {guide.description}\n              </p>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n                  <Clock size={12} />\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n                    {guide.estimatedReadTime} MIN\n                  </span>\n                </div>\n                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  READ\n                  <ChevronRight size={12} />\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Link href=\"/results?tab=guides\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <BookOpen size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n            <User size={32} className=\"text-neutral-600\" />\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n            CLASSIFICATION PENDING\n          </h3>\n          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"\"\n      subtitle=\"\"\n    >\n      <div className=\"space-y-10\">\n        {/* Page header */}\n        <header>\n          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n            Archetype <span className=\"text-cyan-400\">Classification</span>\n          </h1>\n          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n          </p>\n        </header>\n\n        {/* Premium Archetype Card */}\n        <PremiumArchetypeCard classification={classification} />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n        >\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n              <Info size={18} className=\"text-neutral-500\" />\n            </div>\n            <div>\n              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n                METHODOLOGY\n              </h4>\n              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n                Archetype classification analyzes your facial structure including gonial angle,\n                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n                Style recommendations are tailored to complement your natural features.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n","structuredPatch":[{"oldStart":20,"oldLines":6,"newStart":20,"newLines":10,"lines":["   Heart,","   Utensils,","   Droplet,","+  User,","+  Sparkles,","+  ChevronRight,","+  Globe,"," } from 'lucide-react';"," import { useResults } from '@/contexts/ResultsContext';"," import { Guide } from '@/types/guides';"]},{"oldStart":29,"oldLines":6,"newStart":33,"newLines":9,"lines":[" import {","   ARCHETYPE_COLORS,","   ConfidenceBar,","+  DimorphismBadge,","+  ArchetypeTraits,","+  CategoryIcon,"," } from '@/components/psl/archetype/ArchetypeTraits';"," import {","   classifyFromRatios,"]},{"oldStart":38,"oldLines":6,"newStart":45,"newLines":168,"lines":[" import { api, ArchetypeForumRecommendation } from '@/lib/api';"," "," // ============================================","+// SECTION HEADER COMPONENT","+// ============================================","+","+function SectionHeader({ title }: { title: string }) {","+  return (","+    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">","+      {title}","+      <div className=\"flex-1 h-px bg-neutral-800\" />","+    </h2>","+  );","+}","+","+// ============================================","+// PREMIUM ARCHETYPE HERO CARD","+// ============================================","+","+function PremiumArchetypeCard({","+  classification,","+}: {","+  classification: ArchetypeClassification;","+}) {","+  const { primary, secondary, dimorphismLevel } = classification;","+  const colors = ARCHETYPE_COLORS[primary.category];","+","+  return (","+    <motion.div","+      initial={{ opacity: 0, y: 20 }}","+      animate={{ opacity: 1, y: 0 }}","+      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"","+    >","+      {/* Background decoration */}","+      <div className=\"absolute top-0 right-0 p-8 opacity-5\">","+        <User size={180} />","+      </div>","+","+      {/* Header */}","+      <div className=\"flex items-center justify-between mb-8 relative z-10\">","+        <div>","+          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">","+            PRIMARY CLASSIFICATION","+          </span>","+          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">","+            {primary.subArchetype}","+          </h2>","+        </div>","+        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />","+      </div>","+","+      {/* Main content grid */}","+      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">","+        {/* Left: Primary archetype info */}","+        <div>","+          <div className=\"flex items-start gap-5 mb-6\">","+            <motion.div","+              initial={{ scale: 0.8 }}","+              animate={{ scale: 1 }}","+              transition={{ type: 'spring', stiffness: 200 }}","+              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"","+              style={{","+                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,","+                borderColor: `${colors.primary}30`,","+              }}","+            >","+              <CategoryIcon category={primary.category} size={32} />","+            </motion.div>","+","+            <div className=\"flex-1\">","+              <span","+                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"","+                style={{","+                  backgroundColor: `${colors.primary}15`,","+                  color: colors.primary,","+                  border: `1px solid ${colors.primary}30`,","+                }}","+              >","+                {primary.category}","+              </span>","+              <div className=\"flex items-baseline gap-3\">","+                <span","+                  className=\"text-4xl font-black\"","+                  style={{ color: colors.primary }}","+                >","+                  {Math.round(primary.confidence * 100)}%","+                </span>","+                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">","+                  MATCH","+                </span>","+              </div>","+            </div>","+          </div>","+","+          {/* Confidence bar */}","+          <div className=\"mb-6\">","+            <ConfidenceBar","+              confidence={primary.confidence}","+              label=\"MATCH STRENGTH\"","+              color={colors.primary}","+            />","+          </div>","+","+          {/* Traits */}","+          <div>","+            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">","+              DEFINING TRAITS","+            </span>","+            <ArchetypeTraits traits={primary.traits} />","+          </div>","+        </div>","+","+        {/* Right: Secondary archetype */}","+        {secondary && (","+          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">","+            <div className=\"flex items-center justify-between mb-4\">","+              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">","+                SECONDARY MATCH","+              </span>","+              <span","+                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"","+                style={{","+                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,","+                  color: ARCHETYPE_COLORS[secondary.category].primary,","+                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,","+                }}","+              >","+                {Math.round(secondary.confidence * 100)}%","+              </span>","+            </div>","+","+            <div className=\"flex items-center gap-4 mb-4\">","+              <div","+                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"","+                style={{","+                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,","+                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,","+                }}","+              >","+                <CategoryIcon category={secondary.category} size={24} />","+              </div>","+              <div>","+                <h3","+                  className=\"text-xl font-black italic uppercase\"","+                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}","+                >","+                  {secondary.subArchetype}","+                </h3>","+                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">","+                  {secondary.category}","+                </p>","+              </div>","+            </div>","+","+            {secondary.traits.length > 0 && (","+              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />","+            )}","+          </div>","+        )}","+      </div>","+    </motion.div>","+  );","+}","+","+// ============================================"," // ALL SCORES - COMPACT GRID"," // ============================================"," "]},{"oldStart":53,"oldLines":13,"newStart":222,"newLines":10,"lines":["       initial={{ opacity: 0 }}","       animate={{ opacity: 1 }}","       transition={{ delay: 0.2 }}","-      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"","     >","-      <div className=\"flex items-center justify-between mb-3\">","-        <h3 className=\"text-sm font-medium text-neutral-400\">All Category Matches</h3>","-      </div>","+      <SectionHeader title=\"Category Breakdown\" />"," ","-      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2\">","+      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">","         {sortedScores.map((score, index) => {","           const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];","           const isPrimary = index === 0;"]},{"oldStart":67,"oldLines":32,"newStart":233,"newLines":34,"lines":["           return (","             <div","               key={score.category}","-              className={`relative p-3 rounded-lg border transition-all ${","+              className={`relative p-4 rounded-2xl border transition-all ${","                 isPrimary","-                  ? 'bg-neutral-800 border-cyan-500/30'","-                  : 'bg-neutral-800/50 border-neutral-700/50 hover:border-neutral-600'","+                  ? 'bg-neutral-900/60 border-cyan-500/30'","+                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'","               }`}","             >","               {isPrimary && (","-                <div className=\"absolute -top-2 left-2 px-1.5 py-0.5 bg-cyan-500 rounded text-[9px] font-medium text-black\">","+                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">","                   PRIMARY","                 </div>","               )}","               <div","-                className=\"text-2xl font-bold mb-0.5\"","+                className=\"text-2xl font-black mb-1\"","                 style={{ color: colors?.primary || '#6b7280' }}","               >","                 {score.score}%","               </div>","-              <div className=\"text-[10px] text-neutral-500 truncate\">{score.category}</div>","-              {/* Mini bar */}","-              <div className=\"mt-2 h-1 bg-neutral-700 rounded-full overflow-hidden\">","-                <div","-                  className=\"h-full rounded-full transition-all\"","-                  style={{","-                    width: `${score.score}%`,","-                    backgroundColor: colors?.primary || '#6b7280',","-                  }}","+              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">","+                {score.category}","+              </div>","+              {/* Progress bar */}","+              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">","+                <motion.div","+                  initial={{ width: 0 }}","+                  animate={{ width: `${score.score}%` }}","+                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}","+                  className=\"h-full rounded-full\"","+                  style={{ backgroundColor: colors?.primary || '#6b7280' }}","                 />","               </div>","             </div>"]},{"oldStart":104,"oldLines":7,"newStart":272,"newLines":7,"lines":[" }"," "," // ============================================","-// STYLE RECOMMENDATIONS - COMPACT CARDS","+// STYLE RECOMMENDATIONS - PREMIUM CARDS"," // ============================================"," "," function StyleRecommendations({"]},{"oldStart":115,"oldLines":69,"newStart":283,"newLines":64,"lines":["   const { styleGuide, primary } = classification;","   const colors = ARCHETYPE_COLORS[primary.category];"," ","+  const sections = [","+    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },","+    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },","+    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },","+  ];","+","   return (","     <motion.div","       initial={{ opacity: 0 }}","       animate={{ opacity: 1 }}","       transition={{ delay: 0.3 }}","-      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"","     >","-      <div className=\"flex items-center gap-2 mb-3\">","-        <Palette className=\"w-4 h-4 text-purple-400\" />","-        <h3 className=\"text-sm font-medium text-white\">{primary.subArchetype} Style Guide</h3>","-      </div>","+      <SectionHeader title=\"Style Recommendations\" />"," ","-      <div className=\"grid grid-cols-3 gap-3\">","-        {/* Clothing */}","-        <div className=\"bg-neutral-800/50 rounded-lg p-3\">","-          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">","-            Clothing","-          </h4>","-          <div className=\"flex flex-wrap gap-1\">","-            {styleGuide.clothing.slice(0, 3).map((item) => (","-              <span","-                key={item}","-                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"","-              >","-                {item}","-              </span>","-            ))}","-          </div>","+      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">","+        {/* Background decoration */}","+        <div className=\"absolute top-0 right-0 p-6 opacity-5\">","+          <Palette size={100} />","         </div>"," ","-        {/* Hair */}","-        <div className=\"bg-neutral-800/50 rounded-lg p-3\">","-          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">","-            Hair","-          </h4>","-          <div className=\"flex flex-wrap gap-1\">","-            {styleGuide.hair.slice(0, 3).map((item) => (","-              <span","-                key={item}","-                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"","-              >","-                {item}","-              </span>","-            ))}","+        <div className=\"flex items-center gap-3 mb-6 relative z-10\">","+          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">","+            <Palette size={18} className=\"text-purple-400\" />","           </div>","+          <div>","+            <h3 className=\"text-lg font-black italic uppercase text-white\">","+              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>","+            </h3>","+            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">","+              CURATED FOR YOUR ARCHETYPE","+            </p>","+          </div>","         </div>"," ","-        {/* Colors */}","-        <div className=\"bg-neutral-800/50 rounded-lg p-3\">","-          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">","-            Colors","-          </h4>","-          <div className=\"flex flex-wrap gap-1\">","-            {styleGuide.colors.map((color) => (","-              <span","-                key={color}","-                className=\"text-[11px] px-2 py-1 rounded border border-neutral-600 text-neutral-300\"","-                style={{ borderColor: `${colors.primary}40` }}","-              >","-                {color}","-              </span>","-            ))}","-          </div>","+        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">","+          {sections.map((section) => (","+            <div","+              key={section.key}","+              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"","+            >","+              <div className=\"flex items-center gap-2 mb-3\">","+                <section.icon size={14} className=\"text-neutral-500\" />","+                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">","+                  {section.label}","+                </span>","+              </div>","+              <div className=\"flex flex-wrap gap-2\">","+                {section.items.slice(0, 4).map((item) => (","+                  <span","+                    key={item}","+                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"","+                  >","+                    {item}","+                  </span>","+                ))}","+              </div>","+            </div>","+          ))}","         </div>","       </div>","     </motion.div>"]},{"oldStart":197,"oldLines":7,"newStart":360,"newLines":6,"lines":[" ","   if (!transitionPath) return null;"," ","-  // Find the target score","   const targetScore = allScores.find((s) => s.category === transitionPath.target);","   const primaryColors = ARCHETYPE_COLORS[primary.category];","   const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];"]},{"oldStart":207,"oldLines":73,"newStart":369,"newLines":89,"lines":["       initial={{ opacity: 0 }}","       animate={{ opacity: 1 }}","       transition={{ delay: 0.4 }}","-      className=\"bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-xl p-6 border border-cyan-500/20\"","     >","-      <div className=\"flex items-center gap-2 mb-4\">","-        <TrendingUp className=\"w-5 h-5 text-green-400\" />","-        <h3 className=\"font-semibold text-white\">Archetype Transition Potential</h3>","-      </div>","+      <SectionHeader title=\"Transition Potential\" />"," ","-      <div className=\"grid md:grid-cols-2 gap-6\">","-        {/* Current */}","-        <div className=\"bg-neutral-900/50 rounded-lg p-4\">","-          <p className=\"text-xs text-neutral-500 mb-2\">Current Archetype</p>","-          <p","-            className=\"text-xl font-bold mb-1\"","-            style={{ color: primaryColors.primary }}","-          >","-            {primary.subArchetype}","-          </p>","-          <p className=\"text-sm text-neutral-400\">{primary.category}</p>","-          <div className=\"mt-3\">","+      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">","+        <div className=\"flex items-center gap-3 mb-6\">","+          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">","+            <TrendingUp size={18} className=\"text-green-400\" />","+          </div>","+          <div>","+            <h3 className=\"text-lg font-black italic uppercase text-white\">","+              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>","+            </h3>","+            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">","+              YOUR PATH TO OPTIMIZATION","+            </p>","+          </div>","+        </div>","+","+        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">","+          {/* Current */}","+          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">","+            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">","+              CURRENT","+            </span>","+            <h4","+              className=\"text-2xl font-black italic uppercase mb-1\"","+              style={{ color: primaryColors.primary }}","+            >","+              {primary.subArchetype}","+            </h4>","+            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">","+              {primary.category}","+            </p>","             <ConfidenceBar","               confidence={primary.confidence}","-              label=\"Match\"","+              label=\"MATCH\"","               color={primaryColors.primary}","             />","           </div>","-        </div>"," ","-        {/* Target */}","-        <div className=\"bg-neutral-900/50 rounded-lg p-4\">","-          <p className=\"text-xs text-neutral-500 mb-2\">Transition Target</p>","-          <p","-            className=\"text-xl font-bold mb-1\"","-            style={{ color: targetColors?.primary || '#67e8f9' }}","-          >","-            {transitionPath.target}","-          </p>","-          <p className=\"text-sm text-neutral-400\">","-            {targetScore ? `${targetScore.score}% current match` : 'New category'}","-          </p>","-          {targetScore && (","-            <div className=\"mt-3\">","+          {/* Target */}","+          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">","+            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">","+              TARGET","+            </span>","+            <h4","+              className=\"text-2xl font-black italic uppercase mb-1\"","+              style={{ color: targetColors?.primary || '#67e8f9' }}","+            >","+              {transitionPath.target}","+            </h4>","+            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">","+              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}","+            </p>","+            {targetScore && (","               <ConfidenceBar","                 confidence={targetScore.confidence}","-                label=\"Current Match\"","+                label=\"PROXIMITY\"","                 color={targetColors?.primary}","               />","-            </div>","-          )}","+            )}","+          </div>","         </div>","-      </div>"," ","-      {/* Requirements */}","-      <div className=\"mt-6\">","-        <p className=\"text-sm text-neutral-400 mb-3\">To achieve this transition:</p>","-        <ul className=\"grid md:grid-cols-2 gap-2\">","-          {transitionPath.requirements.map((req, i) => (","-            <li","-              key={i}","-              className=\"flex items-center gap-2 p-3 bg-neutral-900/50 rounded-lg text-sm text-neutral-300\"","-            >","-              <span className=\"w-5 h-5 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs\">","-                {i + 1}","-              </span>","-              {req}","-            </li>","-          ))}","-        </ul>","+        {/* Requirements */}","+        <div>","+          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">","+            REQUIREMENTS","+          </span>","+          <div className=\"grid md:grid-cols-2 gap-3\">","+            {transitionPath.requirements.map((req, i) => (","+              <div","+                key={i}","+                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"","+              >","+                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">","+                  {i + 1}","+                </span>","+                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>","+              </div>","+            ))}","+          </div>","+        </div>","       </div>","     </motion.div>","   );"]},{"oldStart":302,"oldLines":7,"newStart":480,"newLines":7,"lines":["       try {","         const recommendations = await api.getArchetypeForumRecommendations(archetype);","         if (isMounted) {","-          setForums(recommendations.slice(0, 3)); // Show top 3","+          setForums(recommendations.slice(0, 3));","         }","       } catch (error) {","         if (isMounted) {"]},{"oldStart":328,"oldLines":15,"newStart":506,"newLines":11,"lines":["         initial={{ opacity: 0 }}","         animate={{ opacity: 1 }}","         transition={{ delay: 0.35 }}","-        className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"","       >","-        <div className=\"flex items-center gap-2 mb-4\">","-          <Users className=\"w-5 h-5 text-amber-400\" />","-          <h3 className=\"font-semibold text-white\">Recommended Forums</h3>","-        </div>","-        <div className=\"grid gap-3 md:grid-cols-3\">","+        <SectionHeader title=\"Community Forums\" />","+        <div className=\"grid gap-4 md:grid-cols-3\">","           {[1, 2, 3].map((i) => (","-            <div key={i} className=\"animate-pulse bg-neutral-800 rounded-lg h-24\" />","+            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />","           ))}","         </div>","       </motion.div>"]},{"oldStart":350,"oldLines":59,"newStart":524,"newLines":70,"lines":["       initial={{ opacity: 0 }}","       animate={{ opacity: 1 }}","       transition={{ delay: 0.35 }}","-      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"","     >","-      <div className=\"flex items-center gap-2 mb-4\">","-        <Users className=\"w-5 h-5 text-amber-400\" />","-        <h3 className=\"font-semibold text-white\">Recommended Forums</h3>","-        <span","-          className=\"px-2 py-0.5 text-xs font-medium rounded border\"","-          style={{","-            backgroundColor: `${colors.primary}20`,","-            color: colors.primary,","-            borderColor: `${colors.primary}40`,","-          }}","-        >","-          {archetype}","-        </span>","-      </div>","+      <SectionHeader title=\"Community Forums\" />"," ","-      <p className=\"text-sm text-neutral-400 mb-4\">","-        Forums tailored to your archetype to help you maximize your aesthetic potential","-      </p>","-","-      <div className=\"grid gap-3 md:grid-cols-3\">","-        {forums.map((forum) => (","-          <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>","-            <div className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-amber-500/30 transition-all cursor-pointer\">","-              <div className=\"flex items-center gap-3 mb-2\">","-                <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/20 flex items-center justify-center text-xl flex-shrink-0\">","-                  {forum.category.icon || 'ðŸ’¬'}","-                </div>","-                <h4 className=\"font-medium text-white group-hover:text-amber-400 transition-colors text-sm line-clamp-1\">","-                  {forum.category.name}","-                </h4>","-              </div>","-              <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">","-                {forum.reason || forum.category.description}","+      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">","+        <div className=\"flex items-center justify-between mb-6\">","+          <div className=\"flex items-center gap-3\">","+            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">","+              <Users size={18} className=\"text-amber-400\" />","+            </div>","+            <div>","+              <h3 className=\"text-lg font-black italic uppercase text-white\">","+                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>","+              </h3>","+              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">","+                BASED ON YOUR ARCHETYPE","               </p>","-              <div className=\"flex items-center justify-end\">","-                <span className=\"text-xs text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">","-                  Visit","-                  <ArrowRight className=\"w-3 h-3\" />","-                </span>","-              </div>","             </div>","-          </Link>","-        ))}","-      </div>","+          </div>","+          <span","+            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"","+            style={{","+              backgroundColor: `${colors.primary}15`,","+              color: colors.primary,","+              border: `1px solid ${colors.primary}30`,","+            }}","+          >","+            {archetype}","+          </span>","+        </div>"," ","-      <Link href=\"/forum\" className=\"block mt-4\">","-        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">","-          <span>Explore all forums</span>","-          <ArrowRight className=\"w-4 h-4\" />","+        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">","+          {forums.map((forum) => (","+            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>","+              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">","+                <div className=\"flex items-center gap-3 mb-3\">","+                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">","+                    {forum.category.icon || ''}","+                  </div>","+                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">","+                    {forum.category.name}","+                  </h4>","+                </div>","+                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">","+                  {forum.reason || forum.category.description}","+                </p>","+                <div className=\"flex items-center justify-end\">","+                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">","+                    VISIT","+                    <ChevronRight size={12} />","+                  </span>","+                </div>","+              </div>","+            </Link>","+          ))}","         </div>","-      </Link>","+","+        <Link href=\"/forum\">","+          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">","+            <Globe size={14} />","+            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>","+            <ArrowRight size={14} />","+          </div>","+        </Link>","+      </div>","     </motion.div>","   );"," }"]},{"oldStart":411,"oldLines":7,"newStart":596,"newLines":6,"lines":[" // RECOMMENDED GUIDES SECTION"," // ============================================"," ","-// Icon mapping for guides"," const GUIDE_ICON_MAP: Record<string, React.ReactNode> = {","   BookOpen: <BookOpen size={18} />,","   Dumbbell: <Dumbbell size={18} />,"]},{"oldStart":425,"oldLines":7,"newStart":609,"newLines":6,"lines":["   Droplet: <Droplet size={18} />,"," };"," ","-// Map archetypes to recommended guides"," const ARCHETYPE_GUIDES: Record<string, string[]> = {","   Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],","   Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],"]},{"oldStart":458,"oldLines":65,"newStart":641,"newLines":78,"lines":["       initial={{ opacity: 0 }}","       animate={{ opacity: 1 }}","       transition={{ delay: 0.35 }}","-      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"","     >","-      <div className=\"flex items-center gap-2 mb-4\">","-        <BookOpen className=\"w-5 h-5 text-cyan-400\" />","-        <h3 className=\"font-semibold text-white\">Recommended Guides</h3>","-        <span","-          className=\"px-2 py-0.5 text-xs font-medium rounded border\"","-          style={{","-            backgroundColor: `${colors.primary}20`,","-            color: colors.primary,","-            borderColor: `${colors.primary}40`,","-          }}","-        >","-          {archetype}","-        </span>","-      </div>","+      <SectionHeader title=\"Recommended Guides\" />"," ","-      <p className=\"text-sm text-neutral-400 mb-4\">","-        Guides tailored to your archetype for maximizing your aesthetic potential","-      </p>","-","-      <div className=\"grid gap-3 md:grid-cols-3\">","-        {guides.map((guide) => (","-          <div","-            key={guide.id}","-            onClick={() => onOpenGuide(guide)}","-            className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-cyan-500/30 transition-all cursor-pointer\"","+      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">","+        <div className=\"flex items-center justify-between mb-6\">","+          <div className=\"flex items-center gap-3\">","+            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">","+              <BookOpen size={18} className=\"text-cyan-400\" />","+            </div>","+            <div>","+              <h3 className=\"text-lg font-black italic uppercase text-white\">","+                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>","+              </h3>","+              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">","+                OPTIMIZED FOR YOUR ARCHETYPE","+              </p>","+            </div>","+          </div>","+          <span","+            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"","+            style={{","+              backgroundColor: `${colors.primary}15`,","+              color: colors.primary,","+              border: `1px solid ${colors.primary}30`,","+            }}","           >","-            <div className=\"flex items-center gap-3 mb-2\">","-              <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">","-                {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}","+            {archetype}","+          </span>","+        </div>","+","+        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">","+          {guides.map((guide) => (","+            <div","+              key={guide.id}","+              onClick={() => onOpenGuide(guide)}","+              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"","+            >","+              <div className=\"flex items-center gap-3 mb-3\">","+                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">","+                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}","+                </div>","+                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">","+                  {guide.title}","+                </h4>","               </div>","-              <h4 className=\"font-medium text-white group-hover:text-cyan-400 transition-colors text-sm line-clamp-1\">","-                {guide.title}","-              </h4>","-            </div>","-            <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">","-              {guide.description}","-            </p>","-            <div className=\"flex items-center justify-between\">","-              <div className=\"flex items-center gap-1 text-xs text-neutral-500\">","-                <Clock size={12} />","-                <span>{guide.estimatedReadTime} min</span>","+              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">","+                {guide.description}","+              </p>","+              <div className=\"flex items-center justify-between\">","+                <div className=\"flex items-center gap-1.5 text-neutral-500\">","+                  <Clock size={12} />","+                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">","+                    {guide.estimatedReadTime} MIN","+                  </span>","+                </div>","+                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">","+                  READ","+                  <ChevronRight size={12} />","+                </span>","               </div>","-              <span className=\"text-xs text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">","-                Read","-                <ArrowRight className=\"w-3 h-3\" />","-              </span>","             </div>","+          ))}","+        </div>","+","+        <Link href=\"/results?tab=guides\">","+          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">","+            <BookOpen size={14} />","+            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>","+            <ArrowRight size={14} />","           </div>","-        ))}","+        </Link>","       </div>","-","-      <Link href=\"/results?tab=guides\" className=\"block mt-4\">","-        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">","-          <span>View all guides</span>","-          <ArrowRight className=\"w-4 h-4\" />","-        </div>","-      </Link>","     </motion.div>","   );"," }"]},{"oldStart":528,"oldLines":7,"newStart":724,"newLines":6,"lines":[" export function ArchetypeTab() {","   const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();"," ","-  // Classify archetype from ratios","   const classification = useMemo((): ArchetypeClassification | null => {","     if (!frontRatios || frontRatios.length === 0) return null;"," "]},{"oldStart":540,"oldLines":7,"newStart":735,"newLines":6,"lines":["     }","   }, [frontRatios, sideRatios, gender, ethnicity]);"," ","-  // Handle guide opening - navigate to guides tab","   const handleOpenGuide = () => {","     setActiveTab('guides');","   };"]},{"oldStart":551,"oldLines":8,"newStart":745,"newLines":14,"lines":["         title=\"Archetype Classification\"","         subtitle=\"Determining your facial archetype based on your metrics\"","       >","-        <div className=\"bg-neutral-900 rounded-xl p-8 border border-neutral-800 text-center\">","-          <p className=\"text-neutral-400\">","+        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">","+          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">","+            <User size={32} className=\"text-neutral-600\" />","+          </div>","+          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">","+            CLASSIFICATION PENDING","+          </h3>","+          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">","             Unable to classify archetype. Please ensure your analysis is complete.","           </p>","         </div>"]},{"oldStart":562,"oldLines":17,"newStart":762,"newLines":23,"lines":[" ","   return (","     <TabContent","-      title=\"Archetype Classification\"","-      subtitle=\"Your facial aesthetic archetype based on bone structure and proportions\"","+      title=\"\"","+      subtitle=\"\"","     >","-      <div className=\"space-y-6\">","-        {/* Main Archetype Card */}","-        <ArchetypeCard","-          classification={classification}","-          showSecondary","-          showTransition={false}","-        />","+      <div className=\"space-y-10\">","+        {/* Page header */}","+        <header>","+          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">","+            Archetype <span className=\"text-cyan-400\">Classification</span>","+          </h1>","+          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">","+            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS","+          </p>","+        </header>"," ","+        {/* Premium Archetype Card */}","+        <PremiumArchetypeCard classification={classification} />","+","         {/* All Scores Breakdown */}","         <AllArchetypeScores classification={classification} />"," "]},{"oldStart":596,"oldLines":16,"newStart":802,"newLines":23,"lines":["           initial={{ opacity: 0 }}","           animate={{ opacity: 1 }}","           transition={{ delay: 0.5 }}","-          className=\"p-4 bg-neutral-900/50 rounded-lg border border-neutral-800\"","+          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"","         >","-          <div className=\"flex items-start gap-2\">","-            <Info className=\"w-4 h-4 text-neutral-500 flex-shrink-0 mt-0.5\" />","-            <p className=\"text-xs text-neutral-500\">","-              Archetype classification analyzes your facial structure including gonial angle,","-              face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype","-              represents your dominant aesthetic, while your secondary shows traits you also exhibit.","-              Style recommendations are tailored to complement your natural features.","-            </p>","+          <div className=\"flex items-start gap-4\">","+            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">","+              <Info size={18} className=\"text-neutral-500\" />","+            </div>","+            <div>","+              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">","+                METHODOLOGY","+              </h4>","+              <p className=\"text-sm text-neutral-400 leading-relaxed\">","+                Archetype classification analyzes your facial structure including gonial angle,","+                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype","+                represents your dominant aesthetic, while your secondary shows traits you also exhibit.","+                Style recommendations are tailored to complement your natural features.","+              </p>","+            </div>","           </div>","         </motion.div>","       </div>"]}],"originalFile":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"\n    >\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"text-sm font-medium text-neutral-400\">All Category Matches</h3>\n      </div>\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-3 rounded-lg border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-800 border-cyan-500/30'\n                  : 'bg-neutral-800/50 border-neutral-700/50 hover:border-neutral-600'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2 left-2 px-1.5 py-0.5 bg-cyan-500 rounded text-[9px] font-medium text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-bold mb-0.5\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] text-neutral-500 truncate\">{score.category}</div>\n              {/* Mini bar */}\n              <div className=\"mt-2 h-1 bg-neutral-700 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full rounded-full transition-all\"\n                  style={{\n                    width: `${score.score}%`,\n                    backgroundColor: colors?.primary || '#6b7280',\n                  }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - COMPACT CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n      className=\"bg-neutral-900/50 rounded-xl p-4 border border-neutral-800\"\n    >\n      <div className=\"flex items-center gap-2 mb-3\">\n        <Palette className=\"w-4 h-4 text-purple-400\" />\n        <h3 className=\"text-sm font-medium text-white\">{primary.subArchetype} Style Guide</h3>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-3\">\n        {/* Clothing */}\n        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n            Clothing\n          </h4>\n          <div className=\"flex flex-wrap gap-1\">\n            {styleGuide.clothing.slice(0, 3).map((item) => (\n              <span\n                key={item}\n                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"\n              >\n                {item}\n              </span>\n            ))}\n          </div>\n        </div>\n\n        {/* Hair */}\n        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n            Hair\n          </h4>\n          <div className=\"flex flex-wrap gap-1\">\n            {styleGuide.hair.slice(0, 3).map((item) => (\n              <span\n                key={item}\n                className=\"text-[11px] px-2 py-1 rounded bg-neutral-700/50 text-neutral-300\"\n              >\n                {item}\n              </span>\n            ))}\n          </div>\n        </div>\n\n        {/* Colors */}\n        <div className=\"bg-neutral-800/50 rounded-lg p-3\">\n          <h4 className=\"text-[10px] font-medium text-neutral-500 uppercase tracking-wider mb-2\">\n            Colors\n          </h4>\n          <div className=\"flex flex-wrap gap-1\">\n            {styleGuide.colors.map((color) => (\n              <span\n                key={color}\n                className=\"text-[11px] px-2 py-1 rounded border border-neutral-600 text-neutral-300\"\n                style={{ borderColor: `${colors.primary}40` }}\n              >\n                {color}\n              </span>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  // Find the target score\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n      className=\"bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-xl p-6 border border-cyan-500/20\"\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        <TrendingUp className=\"w-5 h-5 text-green-400\" />\n        <h3 className=\"font-semibold text-white\">Archetype Transition Potential</h3>\n      </div>\n\n      <div className=\"grid md:grid-cols-2 gap-6\">\n        {/* Current */}\n        <div className=\"bg-neutral-900/50 rounded-lg p-4\">\n          <p className=\"text-xs text-neutral-500 mb-2\">Current Archetype</p>\n          <p\n            className=\"text-xl font-bold mb-1\"\n            style={{ color: primaryColors.primary }}\n          >\n            {primary.subArchetype}\n          </p>\n          <p className=\"text-sm text-neutral-400\">{primary.category}</p>\n          <div className=\"mt-3\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"Match\"\n              color={primaryColors.primary}\n            />\n          </div>\n        </div>\n\n        {/* Target */}\n        <div className=\"bg-neutral-900/50 rounded-lg p-4\">\n          <p className=\"text-xs text-neutral-500 mb-2\">Transition Target</p>\n          <p\n            className=\"text-xl font-bold mb-1\"\n            style={{ color: targetColors?.primary || '#67e8f9' }}\n          >\n            {transitionPath.target}\n          </p>\n          <p className=\"text-sm text-neutral-400\">\n            {targetScore ? `${targetScore.score}% current match` : 'New category'}\n          </p>\n          {targetScore && (\n            <div className=\"mt-3\">\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"Current Match\"\n                color={targetColors?.primary}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Requirements */}\n      <div className=\"mt-6\">\n        <p className=\"text-sm text-neutral-400 mb-3\">To achieve this transition:</p>\n        <ul className=\"grid md:grid-cols-2 gap-2\">\n          {transitionPath.requirements.map((req, i) => (\n            <li\n              key={i}\n              className=\"flex items-center gap-2 p-3 bg-neutral-900/50 rounded-lg text-sm text-neutral-300\"\n            >\n              <span className=\"w-5 h-5 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs\">\n                {i + 1}\n              </span>\n              {req}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3)); // Show top 3\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n        className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n      >\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Users className=\"w-5 h-5 text-amber-400\" />\n          <h3 className=\"font-semibold text-white\">Recommended Forums</h3>\n        </div>\n        <div className=\"grid gap-3 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse bg-neutral-800 rounded-lg h-24\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Users className=\"w-5 h-5 text-amber-400\" />\n        <h3 className=\"font-semibold text-white\">Recommended Forums</h3>\n        <span\n          className=\"px-2 py-0.5 text-xs font-medium rounded border\"\n          style={{\n            backgroundColor: `${colors.primary}20`,\n            color: colors.primary,\n            borderColor: `${colors.primary}40`,\n          }}\n        >\n          {archetype}\n        </span>\n      </div>\n\n      <p className=\"text-sm text-neutral-400 mb-4\">\n        Forums tailored to your archetype to help you maximize your aesthetic potential\n      </p>\n\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        {forums.map((forum) => (\n          <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n            <div className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-amber-500/30 transition-all cursor-pointer\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                  {forum.category.icon || 'ðŸ’¬'}\n                </div>\n                <h4 className=\"font-medium text-white group-hover:text-amber-400 transition-colors text-sm line-clamp-1\">\n                  {forum.category.name}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">\n                {forum.reason || forum.category.description}\n              </p>\n              <div className=\"flex items-center justify-end\">\n                <span className=\"text-xs text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  Visit\n                  <ArrowRight className=\"w-3 h-3\" />\n                </span>\n              </div>\n            </div>\n          </Link>\n        ))}\n      </div>\n\n      <Link href=\"/forum\" className=\"block mt-4\">\n        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">\n          <span>Explore all forums</span>\n          <ArrowRight className=\"w-4 h-4\" />\n        </div>\n      </Link>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\n// Icon mapping for guides\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\n// Map archetypes to recommended guides\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n      className=\"bg-neutral-900 rounded-xl p-6 border border-neutral-800\"\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        <BookOpen className=\"w-5 h-5 text-cyan-400\" />\n        <h3 className=\"font-semibold text-white\">Recommended Guides</h3>\n        <span\n          className=\"px-2 py-0.5 text-xs font-medium rounded border\"\n          style={{\n            backgroundColor: `${colors.primary}20`,\n            color: colors.primary,\n            borderColor: `${colors.primary}40`,\n          }}\n        >\n          {archetype}\n        </span>\n      </div>\n\n      <p className=\"text-sm text-neutral-400 mb-4\">\n        Guides tailored to your archetype for maximizing your aesthetic potential\n      </p>\n\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        {guides.map((guide) => (\n          <div\n            key={guide.id}\n            onClick={() => onOpenGuide(guide)}\n            className=\"group bg-neutral-800/50 hover:bg-neutral-800 rounded-lg p-4 border border-neutral-700 hover:border-cyan-500/30 transition-all cursor-pointer\"\n          >\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n              </div>\n              <h4 className=\"font-medium text-white group-hover:text-cyan-400 transition-colors text-sm line-clamp-1\">\n                {guide.title}\n              </h4>\n            </div>\n            <p className=\"text-xs text-neutral-400 line-clamp-2 mb-2\">\n              {guide.description}\n            </p>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-1 text-xs text-neutral-500\">\n                <Clock size={12} />\n                <span>{guide.estimatedReadTime} min</span>\n              </div>\n              <span className=\"text-xs text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                Read\n                <ArrowRight className=\"w-3 h-3\" />\n              </span>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <Link href=\"/results?tab=guides\" className=\"block mt-4\">\n        <div className=\"flex items-center justify-center gap-2 py-2 text-sm text-neutral-400 hover:text-white transition-colors\">\n          <span>View all guides</span>\n          <ArrowRight className=\"w-4 h-4\" />\n        </div>\n      </Link>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  // Classify archetype from ratios\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  // Handle guide opening - navigate to guides tab\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"bg-neutral-900 rounded-xl p-8 border border-neutral-800 text-center\">\n          <p className=\"text-neutral-400\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"Archetype Classification\"\n      subtitle=\"Your facial aesthetic archetype based on bone structure and proportions\"\n    >\n      <div className=\"space-y-6\">\n        {/* Main Archetype Card */}\n        <ArchetypeCard\n          classification={classification}\n          showSecondary\n          showTransition={false}\n        />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"p-4 bg-neutral-900/50 rounded-lg border border-neutral-800\"\n        >\n          <div className=\"flex items-start gap-2\">\n            <Info className=\"w-4 h-4 text-neutral-500 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-xs text-neutral-500\">\n              Archetype classification analyzes your facial structure including gonial angle,\n              face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n              represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n              Style recommendations are tailored to complement your natural features.\n            </p>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n"}}
{"parentUuid":"32c06bca-0feb-47ca-9e64-bf17d626ee33","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01GiZcME9mcJgqPnj5mjW99Z","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me verify there are no TypeScript errors by running the type checker:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":20312,"cache_read_input_tokens":52915,"cache_creation":{"ephemeral_5m_input_tokens":20312,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwiAujNR8K6jDZ3upRZ","type":"assistant","uuid":"d7a4c19d-6b8b-4da2-8be3-eb2d4420cb66","timestamp":"2025-12-26T20:39:25.831Z"}
{"parentUuid":"d7a4c19d-6b8b-4da2-8be3-eb2d4420cb66","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01GiZcME9mcJgqPnj5mjW99Z","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017P19REzW5S5gKiy52K3kJw","name":"Bash","input":{"command":"npx tsc --noEmit 2>&1 | head -50","description":"Check TypeScript for errors"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":20312,"cache_read_input_tokens":52915,"cache_creation":{"ephemeral_5m_input_tokens":20312,"ephemeral_1h_input_tokens":0},"output_tokens":127,"service_tier":"standard"}},"requestId":"req_011CWVwiAujNR8K6jDZ3upRZ","type":"assistant","uuid":"2f4724e7-133f-43ec-b6f9-7b12d4d52c70","timestamp":"2025-12-26T20:39:27.449Z"}
{"parentUuid":"2f4724e7-133f-43ec-b6f9-7b12d4d52c70","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_017P19REzW5S5gKiy52K3kJw","type":"tool_result","content":"src/components/results/tabs/ArchetypeTab.tsx(111,57): error TS2322: Type '{ category: ArchetypeCategory; size: number; }' is not assignable to type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.\n  Property 'size' does not exist on type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.\nsrc/components/results/tabs/ArchetypeTab.tsx(184,61): error TS2322: Type '{ category: ArchetypeCategory; size: number; }' is not assignable to type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.\n  Property 'size' does not exist on type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.","is_error":false}]},"uuid":"9c09a69f-f564-4aed-9bf1-453626b269d2","timestamp":"2025-12-26T20:39:28.644Z","toolUseResult":{"stdout":"src/components/results/tabs/ArchetypeTab.tsx(111,57): error TS2322: Type '{ category: ArchetypeCategory; size: number; }' is not assignable to type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.\n  Property 'size' does not exist on type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.\nsrc/components/results/tabs/ArchetypeTab.tsx(184,61): error TS2322: Type '{ category: ArchetypeCategory; size: number; }' is not assignable to type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.\n  Property 'size' does not exist on type 'IntrinsicAttributes & { category: ArchetypeCategory; }'.","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"9c09a69f-f564-4aed-9bf1-453626b269d2","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01D4L61an4V41EPdTQU8HX83","type":"message","role":"assistant","content":[{"type":"text","text":"I need to check the CategoryIcon component to see its props:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":317,"cache_read_input_tokens":73227,"cache_creation":{"ephemeral_5m_input_tokens":317,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CWVwihFNBRmrZBjya5xrU","type":"assistant","uuid":"034a3ec8-e195-4947-96b1-14ac13f7e338","timestamp":"2025-12-26T20:39:32.879Z"}
{"parentUuid":"034a3ec8-e195-4947-96b1-14ac13f7e338","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01D4L61an4V41EPdTQU8HX83","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Wxh8MA9NMi7jNGDuRDv5dg","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/psl/archetype/ArchetypeTraits.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":317,"cache_read_input_tokens":73227,"cache_creation":{"ephemeral_5m_input_tokens":317,"ephemeral_1h_input_tokens":0},"output_tokens":104,"service_tier":"standard"}},"requestId":"req_011CWVwihFNBRmrZBjya5xrU","type":"assistant","uuid":"6c474c78-5830-47bc-a6bb-f062237e5450","timestamp":"2025-12-26T20:39:34.151Z"}
{"parentUuid":"6c474c78-5830-47bc-a6bb-f062237e5450","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Wxh8MA9NMi7jNGDuRDv5dg","type":"tool_result","content":"     1â†’'use client';\n     2â†’\n     3â†’import { motion } from 'framer-motion';\n     4â†’import { Sparkles, Zap, Eye, Crown, Shield, Flame } from 'lucide-react';\n     5â†’import { ArchetypeCategory, DimorphismLevel } from '@/lib/archetype-classifier';\n     6â†’\n     7â†’// ============================================\n     8â†’// TYPES\n     9â†’// ============================================\n    10â†’\n    11â†’interface ArchetypeTraitsProps {\n    12â†’  traits: string[];\n    13â†’  dimorphismLevel?: DimorphismLevel;\n    14â†’  compact?: boolean;\n    15â†’}\n    16â†’\n    17â†’interface DimorphismBadgeProps {\n    18â†’  level: DimorphismLevel;\n    19â†’  size?: 'sm' | 'md';\n    20â†’}\n    21â†’\n    22â†’// ============================================\n    23â†’// CATEGORY ICONS\n    24â†’// ============================================\n    25â†’\n    26â†’const CATEGORY_ICONS: Record<ArchetypeCategory, React.ReactNode> = {\n    27â†’  Softboy: <Sparkles className=\"w-4 h-4\" />,\n    28â†’  Prettyboy: <Crown className=\"w-4 h-4\" />,\n    29â†’  RobustPrettyboy: <Zap className=\"w-4 h-4\" />,\n    30â†’  Chad: <Shield className=\"w-4 h-4\" />,\n    31â†’  Hypermasculine: <Flame className=\"w-4 h-4\" />,\n    32â†’  Exotic: <Eye className=\"w-4 h-4\" />,\n    33â†’};\n    34â†’\n    35â†’// ============================================\n    36â†’// CATEGORY COLORS\n    37â†’// ============================================\n    38â†’\n    39â†’export const ARCHETYPE_COLORS: Record<ArchetypeCategory, { primary: string; bg: string; border: string }> = {\n    40â†’  Softboy: {\n    41â†’    primary: '#a78bfa',  // Purple\n    42â†’    bg: 'rgba(167, 139, 250, 0.1)',\n    43â†’    border: 'rgba(167, 139, 250, 0.3)',\n    44â†’  },\n    45â†’  Prettyboy: {\n    46â†’    primary: '#67e8f9',  // Cyan\n    47â†’    bg: 'rgba(103, 232, 249, 0.1)',\n    48â†’    border: 'rgba(103, 232, 249, 0.3)',\n    49â†’  },\n    50â†’  RobustPrettyboy: {\n    51â†’    primary: '#22c55e',  // Green\n    52â†’    bg: 'rgba(34, 197, 94, 0.1)',\n    53â†’    border: 'rgba(34, 197, 94, 0.3)',\n    54â†’  },\n    55â†’  Chad: {\n    56â†’    primary: '#f97316',  // Orange\n    57â†’    bg: 'rgba(249, 115, 22, 0.1)',\n    58â†’    border: 'rgba(249, 115, 22, 0.3)',\n    59â†’  },\n    60â†’  Hypermasculine: {\n    61â†’    primary: '#ef4444',  // Red\n    62â†’    bg: 'rgba(239, 68, 68, 0.1)',\n    63â†’    border: 'rgba(239, 68, 68, 0.3)',\n    64â†’  },\n    65â†’  Exotic: {\n    66â†’    primary: '#fbbf24',  // Yellow\n    67â†’    bg: 'rgba(251, 191, 36, 0.1)',\n    68â†’    border: 'rgba(251, 191, 36, 0.3)',\n    69â†’  },\n    70â†’};\n    71â†’\n    72â†’// ============================================\n    73â†’// DIMORPHISM COLORS\n    74â†’// ============================================\n    75â†’\n    76â†’const DIMORPHISM_COLORS: Record<DimorphismLevel, { label: string; color: string }> = {\n    77â†’  'low': { label: 'Low', color: '#a78bfa' },\n    78â†’  'low-balanced': { label: 'Low-Balanced', color: '#8b5cf6' },\n    79â†’  'balanced': { label: 'Balanced', color: '#67e8f9' },\n    80â†’  'above-average': { label: 'Above Average', color: '#22c55e' },\n    81â†’  'high': { label: 'High', color: '#f97316' },\n    82â†’  'very-high': { label: 'Very High', color: '#ef4444' },\n    83â†’};\n    84â†’\n    85â†’// ============================================\n    86â†’// COMPONENTS\n    87â†’// ============================================\n    88â†’\n    89â†’/**\n    90â†’ * Dimorphism level badge\n    91â†’ */\n    92â†’export function DimorphismBadge({ level, size = 'md' }: DimorphismBadgeProps) {\n    93â†’  const config = DIMORPHISM_COLORS[level];\n    94â†’  const sizeClasses = size === 'sm' ? 'text-xs px-2 py-0.5' : 'text-sm px-3 py-1';\n    95â†’\n    96â†’  return (\n    97â†’    <span\n    98â†’      className={`${sizeClasses} rounded-full font-medium`}\n    99â†’      style={{\n   100â†’        backgroundColor: `${config.color}20`,\n   101â†’        color: config.color,\n   102â†’        border: `1px solid ${config.color}40`,\n   103â†’      }}\n   104â†’    >\n   105â†’      {config.label} Dimorphism\n   106â†’    </span>\n   107â†’  );\n   108â†’}\n   109â†’\n   110â†’/**\n   111â†’ * Single trait badge\n   112â†’ */\n   113â†’function TraitBadge({ trait, index }: { trait: string; index: number }) {\n   114â†’  return (\n   115â†’    <motion.span\n   116â†’      initial={{ opacity: 0, scale: 0.8 }}\n   117â†’      animate={{ opacity: 1, scale: 1 }}\n   118â†’      transition={{ delay: index * 0.05 }}\n   119â†’      className=\"px-3 py-1.5 rounded-full bg-neutral-800 text-neutral-300 text-sm border border-neutral-700 hover:border-neutral-600 transition-colors\"\n   120â†’    >\n   121â†’      {trait}\n   122â†’    </motion.span>\n   123â†’  );\n   124â†’}\n   125â†’\n   126â†’/**\n   127â†’ * Category icon with color\n   128â†’ */\n   129â†’export function CategoryIcon({ category }: { category: ArchetypeCategory }) {\n   130â†’  const colors = ARCHETYPE_COLORS[category];\n   131â†’\n   132â†’  return (\n   133â†’    <div\n   134â†’      className=\"w-10 h-10 rounded-lg flex items-center justify-center\"\n   135â†’      style={{\n   136â†’        backgroundColor: colors.bg,\n   137â†’        border: `1px solid ${colors.border}`,\n   138â†’        color: colors.primary,\n   139â†’      }}\n   140â†’    >\n   141â†’      {CATEGORY_ICONS[category]}\n   142â†’    </div>\n   143â†’  );\n   144â†’}\n   145â†’\n   146â†’/**\n   147â†’ * Archetype traits display\n   148â†’ */\n   149â†’export function ArchetypeTraits({ traits, dimorphismLevel, compact = false }: ArchetypeTraitsProps) {\n   150â†’  if (compact) {\n   151â†’    return (\n   152â†’      <div className=\"flex flex-wrap gap-1.5\">\n   153â†’        {traits.slice(0, 4).map((trait) => (\n   154â†’          <span\n   155â†’            key={trait}\n   156â†’            className=\"px-2 py-0.5 rounded-full bg-neutral-800 text-neutral-400 text-xs border border-neutral-700\"\n   157â†’          >\n   158â†’            {trait}\n   159â†’          </span>\n   160â†’        ))}\n   161â†’        {traits.length > 4 && (\n   162â†’          <span className=\"px-2 py-0.5 rounded-full bg-neutral-800 text-neutral-500 text-xs\">\n   163â†’            +{traits.length - 4} more\n   164â†’          </span>\n   165â†’        )}\n   166â†’      </div>\n   167â†’    );\n   168â†’  }\n   169â†’\n   170â†’  return (\n   171â†’    <div className=\"space-y-3\">\n   172â†’      {/* Dimorphism badge */}\n   173â†’      {dimorphismLevel && (\n   174â†’        <div className=\"mb-3\">\n   175â†’          <DimorphismBadge level={dimorphismLevel} />\n   176â†’        </div>\n   177â†’      )}\n   178â†’\n   179â†’      {/* Traits */}\n   180â†’      <div className=\"flex flex-wrap gap-2\">\n   181â†’        {traits.map((trait, i) => (\n   182â†’          <TraitBadge key={trait} trait={trait} index={i} />\n   183â†’        ))}\n   184â†’      </div>\n   185â†’    </div>\n   186â†’  );\n   187â†’}\n   188â†’\n   189â†’/**\n   190â†’ * Confidence indicator bar\n   191â†’ */\n   192â†’export function ConfidenceBar({\n   193â†’  confidence,\n   194â†’  label,\n   195â†’  color,\n   196â†’}: {\n   197â†’  confidence: number;\n   198â†’  label?: string;\n   199â†’  color?: string;\n   200â†’}) {\n   201â†’  const percentage = Math.round(confidence * 100);\n   202â†’\n   203â†’  return (\n   204â†’    <div className=\"space-y-1\">\n   205â†’      {label && (\n   206â†’        <div className=\"flex justify-between text-xs\">\n   207â†’          <span className=\"text-neutral-400\">{label}</span>\n   208â†’          <span className=\"text-neutral-300\">{percentage}%</span>\n   209â†’        </div>\n   210â†’      )}\n   211â†’      <div className=\"h-2 bg-neutral-800 rounded-full overflow-hidden\">\n   212â†’        <motion.div\n   213â†’          initial={{ width: 0 }}\n   214â†’          animate={{ width: `${percentage}%` }}\n   215â†’          transition={{ duration: 0.5, ease: 'easeOut' }}\n   216â†’          className=\"h-full rounded-full\"\n   217â†’          style={{ backgroundColor: color || '#67e8f9' }}\n   218â†’        />\n   219â†’      </div>\n   220â†’    </div>\n   221â†’  );\n   222â†’}\n   223â†’\n   224â†’export default ArchetypeTraits;\n   225â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"9ce21e0c-c519-4507-a34d-025830150cf5","timestamp":"2025-12-26T20:39:34.203Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/psl/archetype/ArchetypeTraits.tsx","content":"'use client';\n\nimport { motion } from 'framer-motion';\nimport { Sparkles, Zap, Eye, Crown, Shield, Flame } from 'lucide-react';\nimport { ArchetypeCategory, DimorphismLevel } from '@/lib/archetype-classifier';\n\n// ============================================\n// TYPES\n// ============================================\n\ninterface ArchetypeTraitsProps {\n  traits: string[];\n  dimorphismLevel?: DimorphismLevel;\n  compact?: boolean;\n}\n\ninterface DimorphismBadgeProps {\n  level: DimorphismLevel;\n  size?: 'sm' | 'md';\n}\n\n// ============================================\n// CATEGORY ICONS\n// ============================================\n\nconst CATEGORY_ICONS: Record<ArchetypeCategory, React.ReactNode> = {\n  Softboy: <Sparkles className=\"w-4 h-4\" />,\n  Prettyboy: <Crown className=\"w-4 h-4\" />,\n  RobustPrettyboy: <Zap className=\"w-4 h-4\" />,\n  Chad: <Shield className=\"w-4 h-4\" />,\n  Hypermasculine: <Flame className=\"w-4 h-4\" />,\n  Exotic: <Eye className=\"w-4 h-4\" />,\n};\n\n// ============================================\n// CATEGORY COLORS\n// ============================================\n\nexport const ARCHETYPE_COLORS: Record<ArchetypeCategory, { primary: string; bg: string; border: string }> = {\n  Softboy: {\n    primary: '#a78bfa',  // Purple\n    bg: 'rgba(167, 139, 250, 0.1)',\n    border: 'rgba(167, 139, 250, 0.3)',\n  },\n  Prettyboy: {\n    primary: '#67e8f9',  // Cyan\n    bg: 'rgba(103, 232, 249, 0.1)',\n    border: 'rgba(103, 232, 249, 0.3)',\n  },\n  RobustPrettyboy: {\n    primary: '#22c55e',  // Green\n    bg: 'rgba(34, 197, 94, 0.1)',\n    border: 'rgba(34, 197, 94, 0.3)',\n  },\n  Chad: {\n    primary: '#f97316',  // Orange\n    bg: 'rgba(249, 115, 22, 0.1)',\n    border: 'rgba(249, 115, 22, 0.3)',\n  },\n  Hypermasculine: {\n    primary: '#ef4444',  // Red\n    bg: 'rgba(239, 68, 68, 0.1)',\n    border: 'rgba(239, 68, 68, 0.3)',\n  },\n  Exotic: {\n    primary: '#fbbf24',  // Yellow\n    bg: 'rgba(251, 191, 36, 0.1)',\n    border: 'rgba(251, 191, 36, 0.3)',\n  },\n};\n\n// ============================================\n// DIMORPHISM COLORS\n// ============================================\n\nconst DIMORPHISM_COLORS: Record<DimorphismLevel, { label: string; color: string }> = {\n  'low': { label: 'Low', color: '#a78bfa' },\n  'low-balanced': { label: 'Low-Balanced', color: '#8b5cf6' },\n  'balanced': { label: 'Balanced', color: '#67e8f9' },\n  'above-average': { label: 'Above Average', color: '#22c55e' },\n  'high': { label: 'High', color: '#f97316' },\n  'very-high': { label: 'Very High', color: '#ef4444' },\n};\n\n// ============================================\n// COMPONENTS\n// ============================================\n\n/**\n * Dimorphism level badge\n */\nexport function DimorphismBadge({ level, size = 'md' }: DimorphismBadgeProps) {\n  const config = DIMORPHISM_COLORS[level];\n  const sizeClasses = size === 'sm' ? 'text-xs px-2 py-0.5' : 'text-sm px-3 py-1';\n\n  return (\n    <span\n      className={`${sizeClasses} rounded-full font-medium`}\n      style={{\n        backgroundColor: `${config.color}20`,\n        color: config.color,\n        border: `1px solid ${config.color}40`,\n      }}\n    >\n      {config.label} Dimorphism\n    </span>\n  );\n}\n\n/**\n * Single trait badge\n */\nfunction TraitBadge({ trait, index }: { trait: string; index: number }) {\n  return (\n    <motion.span\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ delay: index * 0.05 }}\n      className=\"px-3 py-1.5 rounded-full bg-neutral-800 text-neutral-300 text-sm border border-neutral-700 hover:border-neutral-600 transition-colors\"\n    >\n      {trait}\n    </motion.span>\n  );\n}\n\n/**\n * Category icon with color\n */\nexport function CategoryIcon({ category }: { category: ArchetypeCategory }) {\n  const colors = ARCHETYPE_COLORS[category];\n\n  return (\n    <div\n      className=\"w-10 h-10 rounded-lg flex items-center justify-center\"\n      style={{\n        backgroundColor: colors.bg,\n        border: `1px solid ${colors.border}`,\n        color: colors.primary,\n      }}\n    >\n      {CATEGORY_ICONS[category]}\n    </div>\n  );\n}\n\n/**\n * Archetype traits display\n */\nexport function ArchetypeTraits({ traits, dimorphismLevel, compact = false }: ArchetypeTraitsProps) {\n  if (compact) {\n    return (\n      <div className=\"flex flex-wrap gap-1.5\">\n        {traits.slice(0, 4).map((trait) => (\n          <span\n            key={trait}\n            className=\"px-2 py-0.5 rounded-full bg-neutral-800 text-neutral-400 text-xs border border-neutral-700\"\n          >\n            {trait}\n          </span>\n        ))}\n        {traits.length > 4 && (\n          <span className=\"px-2 py-0.5 rounded-full bg-neutral-800 text-neutral-500 text-xs\">\n            +{traits.length - 4} more\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Dimorphism badge */}\n      {dimorphismLevel && (\n        <div className=\"mb-3\">\n          <DimorphismBadge level={dimorphismLevel} />\n        </div>\n      )}\n\n      {/* Traits */}\n      <div className=\"flex flex-wrap gap-2\">\n        {traits.map((trait, i) => (\n          <TraitBadge key={trait} trait={trait} index={i} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Confidence indicator bar\n */\nexport function ConfidenceBar({\n  confidence,\n  label,\n  color,\n}: {\n  confidence: number;\n  label?: string;\n  color?: string;\n}) {\n  const percentage = Math.round(confidence * 100);\n\n  return (\n    <div className=\"space-y-1\">\n      {label && (\n        <div className=\"flex justify-between text-xs\">\n          <span className=\"text-neutral-400\">{label}</span>\n          <span className=\"text-neutral-300\">{percentage}%</span>\n        </div>\n      )}\n      <div className=\"h-2 bg-neutral-800 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.5, ease: 'easeOut' }}\n          className=\"h-full rounded-full\"\n          style={{ backgroundColor: color || '#67e8f9' }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default ArchetypeTraits;\n","numLines":225,"startLine":1,"totalLines":225}}}
{"parentUuid":"9ce21e0c-c519-4507-a34d-025830150cf5","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_019FsPN1gbPNwJjXuALAC42w","type":"message","role":"assistant","content":[{"type":"text","text":"The CategoryIcon component doesn't accept a `size` prop - it has fixed dimensions. I need to remove the `size` prop from my usages. Let me fix the ArchetypeTab.tsx file:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":3123,"cache_read_input_tokens":73544,"cache_creation":{"ephemeral_5m_input_tokens":3123,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwj75Kw1b95agR2F5xC","type":"assistant","uuid":"2957fb44-fd41-46fa-8026-4e1384562e5e","timestamp":"2025-12-26T20:39:38.889Z"}
{"parentUuid":"2957fb44-fd41-46fa-8026-4e1384562e5e","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_019FsPN1gbPNwJjXuALAC42w","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QD37tyYkHa5ZN17MUarABR","name":"Edit","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","old_string":"            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} size={32} />\n            </motion.div>","new_string":"            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} />\n            </motion.div>"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":3123,"cache_read_input_tokens":73544,"cache_creation":{"ephemeral_5m_input_tokens":3123,"ephemeral_1h_input_tokens":0},"output_tokens":457,"service_tier":"standard"}},"requestId":"req_011CWVwj75Kw1b95agR2F5xC","type":"assistant","uuid":"9c119cec-5752-4422-862c-650bef457385","timestamp":"2025-12-26T20:39:44.658Z"}
{"parentUuid":"9c119cec-5752-4422-862c-650bef457385","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QD37tyYkHa5ZN17MUarABR","type":"tool_result","content":"The file /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n    97â†’      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n    98â†’        {/* Left: Primary archetype info */}\n    99â†’        <div>\n   100â†’          <div className=\"flex items-start gap-5 mb-6\">\n   101â†’            <motion.div\n   102â†’              initial={{ scale: 0.8 }}\n   103â†’              animate={{ scale: 1 }}\n   104â†’              transition={{ type: 'spring', stiffness: 200 }}\n   105â†’              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n   106â†’              style={{\n   107â†’                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n   108â†’                borderColor: `${colors.primary}30`,\n   109â†’              }}\n   110â†’            >\n   111â†’              <CategoryIcon category={primary.category} />\n   112â†’            </motion.div>\n   113â†’\n   114â†’            <div className=\"flex-1\">\n   115â†’              <span\n   116â†’                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\""}]},"uuid":"226be2c9-8e44-4404-a2bb-c953c7df32f4","timestamp":"2025-12-26T20:39:44.723Z","toolUseResult":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","oldString":"            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} size={32} />\n            </motion.div>","newString":"            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} />\n            </motion.div>","originalFile":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n  User,\n  Sparkles,\n  ChevronRight,\n  Globe,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n  DimorphismBadge,\n  ArchetypeTraits,\n  CategoryIcon,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// SECTION HEADER COMPONENT\n// ============================================\n\nfunction SectionHeader({ title }: { title: string }) {\n  return (\n    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n      {title}\n      <div className=\"flex-1 h-px bg-neutral-800\" />\n    </h2>\n  );\n}\n\n// ============================================\n// PREMIUM ARCHETYPE HERO CARD\n// ============================================\n\nfunction PremiumArchetypeCard({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { primary, secondary, dimorphismLevel } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    >\n      {/* Background decoration */}\n      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n        <User size={180} />\n      </div>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n            PRIMARY CLASSIFICATION\n          </span>\n          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n            {primary.subArchetype}\n          </h2>\n        </div>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Main content grid */}\n      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n        {/* Left: Primary archetype info */}\n        <div>\n          <div className=\"flex items-start gap-5 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} size={32} />\n            </motion.div>\n\n            <div className=\"flex-1\">\n              <span\n                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n                style={{\n                  backgroundColor: `${colors.primary}15`,\n                  color: colors.primary,\n                  border: `1px solid ${colors.primary}30`,\n                }}\n              >\n                {primary.category}\n              </span>\n              <div className=\"flex items-baseline gap-3\">\n                <span\n                  className=\"text-4xl font-black\"\n                  style={{ color: colors.primary }}\n                >\n                  {Math.round(primary.confidence * 100)}%\n                </span>\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  MATCH\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Confidence bar */}\n          <div className=\"mb-6\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH STRENGTH\"\n              color={colors.primary}\n            />\n          </div>\n\n          {/* Traits */}\n          <div>\n            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n              DEFINING TRAITS\n            </span>\n            <ArchetypeTraits traits={primary.traits} />\n          </div>\n        </div>\n\n        {/* Right: Secondary archetype */}\n        {secondary && (\n          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                SECONDARY MATCH\n              </span>\n              <span\n                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n                style={{\n                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n                  color: ARCHETYPE_COLORS[secondary.category].primary,\n                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n                }}\n              >\n                {Math.round(secondary.confidence * 100)}%\n              </span>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} size={24} />\n              </div>\n              <div>\n                <h3\n                  className=\"text-xl font-black italic uppercase\"\n                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n                >\n                  {secondary.subArchetype}\n                </h3>\n                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  {secondary.category}\n                </p>\n              </div>\n            </div>\n\n            {secondary.traits.length > 0 && (\n              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n            )}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n    >\n      <SectionHeader title=\"Category Breakdown\" />\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-4 rounded-2xl border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-900/60 border-cyan-500/30'\n                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-black mb-1\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n                {score.category}\n              </div>\n              {/* Progress bar */}\n              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${score.score}%` }}\n                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n                  className=\"h-full rounded-full\"\n                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - PREMIUM CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [\n    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n  ];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n    >\n      <SectionHeader title=\"Style Recommendations\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n        {/* Background decoration */}\n        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n          <Palette size={100} />\n        </div>\n\n        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n            <Palette size={18} className=\"text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              CURATED FOR YOUR ARCHETYPE\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n          {sections.map((section) => (\n            <div\n              key={section.key}\n              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <section.icon size={14} className=\"text-neutral-500\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                  {section.label}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {section.items.slice(0, 4).map((item) => (\n                  <span\n                    key={item}\n                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n                  >\n                    {item}\n                  </span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n    >\n      <SectionHeader title=\"Transition Potential\" />\n\n      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n            <TrendingUp size={18} className=\"text-green-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              YOUR PATH TO OPTIMIZATION\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n          {/* Current */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n              CURRENT\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: primaryColors.primary }}\n            >\n              {primary.subArchetype}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {primary.category}\n            </p>\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH\"\n              color={primaryColors.primary}\n            />\n          </div>\n\n          {/* Target */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n              TARGET\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: targetColors?.primary || '#67e8f9' }}\n            >\n              {transitionPath.target}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n            </p>\n            {targetScore && (\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"PROXIMITY\"\n                color={targetColors?.primary}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n            REQUIREMENTS\n          </span>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {transitionPath.requirements.map((req, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n              >\n                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n                  {i + 1}\n                </span>\n                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3));\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n      >\n        <SectionHeader title=\"Community Forums\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Community Forums\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <Users size={18} className=\"text-amber-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                BASED ON YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {forums.map((forum) => (\n            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                    {forum.category.icon || ''}\n                  </div>\n                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n                    {forum.category.name}\n                  </h4>\n                </div>\n                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                  {forum.reason || forum.category.description}\n                </p>\n                <div className=\"flex items-center justify-end\">\n                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                    VISIT\n                    <ChevronRight size={12} />\n                  </span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        <Link href=\"/forum\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <Globe size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Recommended Guides\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <BookOpen size={18} className=\"text-cyan-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                OPTIMIZED FOR YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {guides.map((guide) => (\n            <div\n              key={guide.id}\n              onClick={() => onOpenGuide(guide)}\n              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n                </div>\n                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n                  {guide.title}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                {guide.description}\n              </p>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n                  <Clock size={12} />\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n                    {guide.estimatedReadTime} MIN\n                  </span>\n                </div>\n                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  READ\n                  <ChevronRight size={12} />\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Link href=\"/results?tab=guides\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <BookOpen size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n            <User size={32} className=\"text-neutral-600\" />\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n            CLASSIFICATION PENDING\n          </h3>\n          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"\"\n      subtitle=\"\"\n    >\n      <div className=\"space-y-10\">\n        {/* Page header */}\n        <header>\n          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n            Archetype <span className=\"text-cyan-400\">Classification</span>\n          </h1>\n          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n          </p>\n        </header>\n\n        {/* Premium Archetype Card */}\n        <PremiumArchetypeCard classification={classification} />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n        >\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n              <Info size={18} className=\"text-neutral-500\" />\n            </div>\n            <div>\n              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n                METHODOLOGY\n              </h4>\n              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n                Archetype classification analyzes your facial structure including gonial angle,\n                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n                Style recommendations are tailored to complement your natural features.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n","structuredPatch":[{"oldStart":108,"oldLines":7,"newStart":108,"newLines":7,"lines":["                 borderColor: `${colors.primary}30`,","               }}","             >","-              <CategoryIcon category={primary.category} size={32} />","+              <CategoryIcon category={primary.category} />","             </motion.div>"," ","             <div className=\"flex-1\">"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"226be2c9-8e44-4404-a2bb-c953c7df32f4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01X9SLsT2XdfxYKnFpHf2BkN","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01N67b7MHkqcxTAZLC1sqP9F","name":"Edit","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","old_string":"              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} size={24} />\n              </div>","new_string":"              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} />\n              </div>"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":842,"cache_read_input_tokens":76667,"cache_creation":{"ephemeral_5m_input_tokens":842,"ephemeral_1h_input_tokens":0},"output_tokens":351,"service_tier":"standard"}},"requestId":"req_011CWVwjt2nExHaYiAQbsra6","type":"assistant","uuid":"6213d0ab-fc81-4fc1-ae6e-7232530b3361","timestamp":"2025-12-26T20:39:51.412Z"}
{"parentUuid":"6213d0ab-fc81-4fc1-ae6e-7232530b3361","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01N67b7MHkqcxTAZLC1sqP9F","type":"tool_result","content":"The file /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n   173â†’              </span>\n   174â†’            </div>\n   175â†’\n   176â†’            <div className=\"flex items-center gap-4 mb-4\">\n   177â†’              <div\n   178â†’                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n   179â†’                style={{\n   180â†’                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n   181â†’                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n   182â†’                }}\n   183â†’              >\n   184â†’                <CategoryIcon category={secondary.category} />\n   185â†’              </div>\n   186â†’              <div>\n   187â†’                <h3\n   188â†’                  className=\"text-xl font-black italic uppercase\"\n   189â†’                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}"}]},"uuid":"33964200-ed35-4a56-958f-dc9cbd0d8ade","timestamp":"2025-12-26T20:39:51.474Z","toolUseResult":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","oldString":"              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} size={24} />\n              </div>","newString":"              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} />\n              </div>","originalFile":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n  User,\n  Sparkles,\n  ChevronRight,\n  Globe,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n  DimorphismBadge,\n  ArchetypeTraits,\n  CategoryIcon,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// SECTION HEADER COMPONENT\n// ============================================\n\nfunction SectionHeader({ title }: { title: string }) {\n  return (\n    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n      {title}\n      <div className=\"flex-1 h-px bg-neutral-800\" />\n    </h2>\n  );\n}\n\n// ============================================\n// PREMIUM ARCHETYPE HERO CARD\n// ============================================\n\nfunction PremiumArchetypeCard({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { primary, secondary, dimorphismLevel } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    >\n      {/* Background decoration */}\n      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n        <User size={180} />\n      </div>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n            PRIMARY CLASSIFICATION\n          </span>\n          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n            {primary.subArchetype}\n          </h2>\n        </div>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Main content grid */}\n      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n        {/* Left: Primary archetype info */}\n        <div>\n          <div className=\"flex items-start gap-5 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} />\n            </motion.div>\n\n            <div className=\"flex-1\">\n              <span\n                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n                style={{\n                  backgroundColor: `${colors.primary}15`,\n                  color: colors.primary,\n                  border: `1px solid ${colors.primary}30`,\n                }}\n              >\n                {primary.category}\n              </span>\n              <div className=\"flex items-baseline gap-3\">\n                <span\n                  className=\"text-4xl font-black\"\n                  style={{ color: colors.primary }}\n                >\n                  {Math.round(primary.confidence * 100)}%\n                </span>\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  MATCH\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Confidence bar */}\n          <div className=\"mb-6\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH STRENGTH\"\n              color={colors.primary}\n            />\n          </div>\n\n          {/* Traits */}\n          <div>\n            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n              DEFINING TRAITS\n            </span>\n            <ArchetypeTraits traits={primary.traits} />\n          </div>\n        </div>\n\n        {/* Right: Secondary archetype */}\n        {secondary && (\n          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                SECONDARY MATCH\n              </span>\n              <span\n                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n                style={{\n                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n                  color: ARCHETYPE_COLORS[secondary.category].primary,\n                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n                }}\n              >\n                {Math.round(secondary.confidence * 100)}%\n              </span>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} size={24} />\n              </div>\n              <div>\n                <h3\n                  className=\"text-xl font-black italic uppercase\"\n                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n                >\n                  {secondary.subArchetype}\n                </h3>\n                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  {secondary.category}\n                </p>\n              </div>\n            </div>\n\n            {secondary.traits.length > 0 && (\n              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n            )}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n    >\n      <SectionHeader title=\"Category Breakdown\" />\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-4 rounded-2xl border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-900/60 border-cyan-500/30'\n                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-black mb-1\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n                {score.category}\n              </div>\n              {/* Progress bar */}\n              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${score.score}%` }}\n                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n                  className=\"h-full rounded-full\"\n                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - PREMIUM CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [\n    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n  ];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n    >\n      <SectionHeader title=\"Style Recommendations\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n        {/* Background decoration */}\n        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n          <Palette size={100} />\n        </div>\n\n        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n            <Palette size={18} className=\"text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              CURATED FOR YOUR ARCHETYPE\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n          {sections.map((section) => (\n            <div\n              key={section.key}\n              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <section.icon size={14} className=\"text-neutral-500\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                  {section.label}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {section.items.slice(0, 4).map((item) => (\n                  <span\n                    key={item}\n                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n                  >\n                    {item}\n                  </span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n    >\n      <SectionHeader title=\"Transition Potential\" />\n\n      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n            <TrendingUp size={18} className=\"text-green-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              YOUR PATH TO OPTIMIZATION\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n          {/* Current */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n              CURRENT\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: primaryColors.primary }}\n            >\n              {primary.subArchetype}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {primary.category}\n            </p>\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH\"\n              color={primaryColors.primary}\n            />\n          </div>\n\n          {/* Target */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n              TARGET\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: targetColors?.primary || '#67e8f9' }}\n            >\n              {transitionPath.target}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n            </p>\n            {targetScore && (\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"PROXIMITY\"\n                color={targetColors?.primary}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n            REQUIREMENTS\n          </span>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {transitionPath.requirements.map((req, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n              >\n                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n                  {i + 1}\n                </span>\n                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3));\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n      >\n        <SectionHeader title=\"Community Forums\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Community Forums\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <Users size={18} className=\"text-amber-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                BASED ON YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {forums.map((forum) => (\n            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                    {forum.category.icon || ''}\n                  </div>\n                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n                    {forum.category.name}\n                  </h4>\n                </div>\n                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                  {forum.reason || forum.category.description}\n                </p>\n                <div className=\"flex items-center justify-end\">\n                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                    VISIT\n                    <ChevronRight size={12} />\n                  </span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        <Link href=\"/forum\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <Globe size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Recommended Guides\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <BookOpen size={18} className=\"text-cyan-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                OPTIMIZED FOR YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {guides.map((guide) => (\n            <div\n              key={guide.id}\n              onClick={() => onOpenGuide(guide)}\n              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n                </div>\n                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n                  {guide.title}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                {guide.description}\n              </p>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n                  <Clock size={12} />\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n                    {guide.estimatedReadTime} MIN\n                  </span>\n                </div>\n                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  READ\n                  <ChevronRight size={12} />\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Link href=\"/results?tab=guides\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <BookOpen size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n            <User size={32} className=\"text-neutral-600\" />\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n            CLASSIFICATION PENDING\n          </h3>\n          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"\"\n      subtitle=\"\"\n    >\n      <div className=\"space-y-10\">\n        {/* Page header */}\n        <header>\n          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n            Archetype <span className=\"text-cyan-400\">Classification</span>\n          </h1>\n          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n          </p>\n        </header>\n\n        {/* Premium Archetype Card */}\n        <PremiumArchetypeCard classification={classification} />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n        >\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n              <Info size={18} className=\"text-neutral-500\" />\n            </div>\n            <div>\n              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n                METHODOLOGY\n              </h4>\n              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n                Archetype classification analyzes your facial structure including gonial angle,\n                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n                Style recommendations are tailored to complement your natural features.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n","structuredPatch":[{"oldStart":181,"oldLines":7,"newStart":181,"newLines":7,"lines":["                   borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,","                 }}","               >","-                <CategoryIcon category={secondary.category} size={24} />","+                <CategoryIcon category={secondary.category} />","               </div>","               <div>","                 <h3"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"33964200-ed35-4a56-958f-dc9cbd0d8ade","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Qkw1wGioAxoSkNSXyVEz7P","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me verify the TypeScript errors are fixed:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":764,"cache_read_input_tokens":77509,"cache_creation":{"ephemeral_5m_input_tokens":764,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWVwkNurLMLW8nVVyTqkv","type":"assistant","uuid":"97cc9324-f88c-4606-9758-b16f41e70c1d","timestamp":"2025-12-26T20:39:59.198Z"}
{"parentUuid":"97cc9324-f88c-4606-9758-b16f41e70c1d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Qkw1wGioAxoSkNSXyVEz7P","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01B5ZMqhoBA28RNh7tiSfCXe","name":"Bash","input":{"command":"npx tsc --noEmit 2>&1 | head -20","description":"Check TypeScript for errors"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":764,"cache_read_input_tokens":77509,"cache_creation":{"ephemeral_5m_input_tokens":764,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWVwkNurLMLW8nVVyTqkv","type":"assistant","uuid":"c1395cc4-88ea-46bd-bb35-8d400f42e907","timestamp":"2025-12-26T20:40:00.505Z"}
{"parentUuid":"c1395cc4-88ea-46bd-bb35-8d400f42e907","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01B5ZMqhoBA28RNh7tiSfCXe","type":"tool_result","content":"","is_error":false}]},"uuid":"12ad19a8-8d72-4ef2-b096-abc3e10c6ed7","timestamp":"2025-12-26T20:40:02.053Z","toolUseResult":{"stdout":"","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"12ad19a8-8d72-4ef2-b096-abc3e10c6ed7","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Eh6CBwALBm7Ly7MDnv2gW5","type":"message","role":"assistant","content":[{"type":"text","text":"No TypeScript errors. Let me also run the linter to make sure everything is clean:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":127,"cache_read_input_tokens":78273,"cache_creation":{"ephemeral_5m_input_tokens":127,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwmA7CXm7orNQFgim5M","type":"assistant","uuid":"3908e8b2-fd6b-4723-951c-f446083d91fc","timestamp":"2025-12-26T20:40:05.672Z"}
{"parentUuid":"3908e8b2-fd6b-4723-951c-f446083d91fc","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01Eh6CBwALBm7Ly7MDnv2gW5","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01S2cohqEEDR3AvgGSxGNwz3","name":"Bash","input":{"command":"npm run lint -- --max-warnings=50 2>&1 | tail -20","description":"Run ESLint to check for errors"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":127,"cache_read_input_tokens":78273,"cache_creation":{"ephemeral_5m_input_tokens":127,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwmA7CXm7orNQFgim5M","type":"assistant","uuid":"1956548a-0b1d-492e-af7a-76485fbdb005","timestamp":"2025-12-26T20:40:06.894Z"}
{"parentUuid":"1956548a-0b1d-492e-af7a-76485fbdb005","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01S2cohqEEDR3AvgGSxGNwz3","type":"tool_result","content":"./src/components/results/cards/AnalysisHistoryCard.tsx\n64:13  Warning: Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./src/components/results/modals/UserProfileModal.tsx\n108:21  Warning: Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./src/components/results/tabs/ArchetypeTab.tsx\n32:10  Error: 'ArchetypeCard' is defined but never used.  @typescript-eslint/no-unused-vars\n284:9  Error: 'colors' is assigned a value but never used.  @typescript-eslint/no-unused-vars\n\n./src/components/results/tabs/LeaderboardTab.tsx\n258:29  Warning: Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./src/contexts/ResultsContext.tsx\n920:6  Warning: React Hook useCallback has missing dependencies: 'frontPhoto', 'sidePhoto', and 'updateStreak'. Either include them or remove the dependency array.  react-hooks/exhaustive-deps\n1123:7  Warning: React Hook useMemo has a missing dependency: 'productRecommendations'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps\n\ninfo  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/basic-features/eslint#disabling-rules","is_error":false}]},"uuid":"65666597-86e6-41cc-aa3a-7f96c3577f4d","timestamp":"2025-12-26T20:40:08.967Z","toolUseResult":{"stdout":"./src/components/results/cards/AnalysisHistoryCard.tsx\n64:13  Warning: Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./src/components/results/modals/UserProfileModal.tsx\n108:21  Warning: Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./src/components/results/tabs/ArchetypeTab.tsx\n32:10  Error: 'ArchetypeCard' is defined but never used.  @typescript-eslint/no-unused-vars\n284:9  Error: 'colors' is assigned a value but never used.  @typescript-eslint/no-unused-vars\n\n./src/components/results/tabs/LeaderboardTab.tsx\n258:29  Warning: Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./src/contexts/ResultsContext.tsx\n920:6  Warning: React Hook useCallback has missing dependencies: 'frontPhoto', 'sidePhoto', and 'updateStreak'. Either include them or remove the dependency array.  react-hooks/exhaustive-deps\n1123:7  Warning: React Hook useMemo has a missing dependency: 'productRecommendations'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps\n\ninfo  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/basic-features/eslint#disabling-rules","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"65666597-86e6-41cc-aa3a-7f96c3577f4d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01CG5vu88UNdZsxneW7J5gzL","type":"message","role":"assistant","content":[{"type":"text","text":"I need to fix the unused imports and variable in ArchetypeTab.tsx:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":749,"cache_read_input_tokens":78400,"cache_creation":{"ephemeral_5m_input_tokens":749,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwmfdTxXHLB2Qq4dRcr","type":"assistant","uuid":"28ace460-3442-4c8b-8cc8-2b48f2a7734b","timestamp":"2025-12-26T20:40:14.069Z"}
{"parentUuid":"28ace460-3442-4c8b-8cc8-2b48f2a7734b","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01CG5vu88UNdZsxneW7J5gzL","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011sF4ryNzujuqEJtUnXmh7m","name":"Edit","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","old_string":"import { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {","new_string":"import { TabContent } from '../ResultsLayout';\nimport {"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":749,"cache_read_input_tokens":78400,"cache_creation":{"ephemeral_5m_input_tokens":749,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwmfdTxXHLB2Qq4dRcr","type":"assistant","uuid":"a93fe97a-38d8-4368-a94c-23aa4b3434c4","timestamp":"2025-12-26T20:40:16.716Z"}
{"parentUuid":"a93fe97a-38d8-4368-a94c-23aa4b3434c4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011sF4ryNzujuqEJtUnXmh7m","type":"tool_result","content":"The file /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n    27â†’} from 'lucide-react';\n    28â†’import { useResults } from '@/contexts/ResultsContext';\n    29â†’import { Guide } from '@/types/guides';\n    30â†’import { getGuideById } from '@/data/guides';\n    31â†’import { TabContent } from '../ResultsLayout';\n    32â†’import {\n    33â†’  ARCHETYPE_COLORS,\n    34â†’  ConfidenceBar,\n    35â†’  DimorphismBadge,\n    36â†’  ArchetypeTraits,"}]},"uuid":"d4527504-2902-4f2c-abac-f2c7cccfb052","timestamp":"2025-12-26T20:40:16.783Z","toolUseResult":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","oldString":"import { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {","newString":"import { TabContent } from '../ResultsLayout';\nimport {","originalFile":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n  User,\n  Sparkles,\n  ChevronRight,\n  Globe,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n  DimorphismBadge,\n  ArchetypeTraits,\n  CategoryIcon,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// SECTION HEADER COMPONENT\n// ============================================\n\nfunction SectionHeader({ title }: { title: string }) {\n  return (\n    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n      {title}\n      <div className=\"flex-1 h-px bg-neutral-800\" />\n    </h2>\n  );\n}\n\n// ============================================\n// PREMIUM ARCHETYPE HERO CARD\n// ============================================\n\nfunction PremiumArchetypeCard({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { primary, secondary, dimorphismLevel } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    >\n      {/* Background decoration */}\n      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n        <User size={180} />\n      </div>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n            PRIMARY CLASSIFICATION\n          </span>\n          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n            {primary.subArchetype}\n          </h2>\n        </div>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Main content grid */}\n      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n        {/* Left: Primary archetype info */}\n        <div>\n          <div className=\"flex items-start gap-5 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} />\n            </motion.div>\n\n            <div className=\"flex-1\">\n              <span\n                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n                style={{\n                  backgroundColor: `${colors.primary}15`,\n                  color: colors.primary,\n                  border: `1px solid ${colors.primary}30`,\n                }}\n              >\n                {primary.category}\n              </span>\n              <div className=\"flex items-baseline gap-3\">\n                <span\n                  className=\"text-4xl font-black\"\n                  style={{ color: colors.primary }}\n                >\n                  {Math.round(primary.confidence * 100)}%\n                </span>\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  MATCH\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Confidence bar */}\n          <div className=\"mb-6\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH STRENGTH\"\n              color={colors.primary}\n            />\n          </div>\n\n          {/* Traits */}\n          <div>\n            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n              DEFINING TRAITS\n            </span>\n            <ArchetypeTraits traits={primary.traits} />\n          </div>\n        </div>\n\n        {/* Right: Secondary archetype */}\n        {secondary && (\n          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                SECONDARY MATCH\n              </span>\n              <span\n                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n                style={{\n                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n                  color: ARCHETYPE_COLORS[secondary.category].primary,\n                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n                }}\n              >\n                {Math.round(secondary.confidence * 100)}%\n              </span>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} />\n              </div>\n              <div>\n                <h3\n                  className=\"text-xl font-black italic uppercase\"\n                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n                >\n                  {secondary.subArchetype}\n                </h3>\n                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  {secondary.category}\n                </p>\n              </div>\n            </div>\n\n            {secondary.traits.length > 0 && (\n              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n            )}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n    >\n      <SectionHeader title=\"Category Breakdown\" />\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-4 rounded-2xl border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-900/60 border-cyan-500/30'\n                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-black mb-1\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n                {score.category}\n              </div>\n              {/* Progress bar */}\n              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${score.score}%` }}\n                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n                  className=\"h-full rounded-full\"\n                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - PREMIUM CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [\n    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n  ];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n    >\n      <SectionHeader title=\"Style Recommendations\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n        {/* Background decoration */}\n        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n          <Palette size={100} />\n        </div>\n\n        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n            <Palette size={18} className=\"text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              CURATED FOR YOUR ARCHETYPE\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n          {sections.map((section) => (\n            <div\n              key={section.key}\n              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <section.icon size={14} className=\"text-neutral-500\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                  {section.label}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {section.items.slice(0, 4).map((item) => (\n                  <span\n                    key={item}\n                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n                  >\n                    {item}\n                  </span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n    >\n      <SectionHeader title=\"Transition Potential\" />\n\n      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n            <TrendingUp size={18} className=\"text-green-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              YOUR PATH TO OPTIMIZATION\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n          {/* Current */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n              CURRENT\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: primaryColors.primary }}\n            >\n              {primary.subArchetype}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {primary.category}\n            </p>\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH\"\n              color={primaryColors.primary}\n            />\n          </div>\n\n          {/* Target */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n              TARGET\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: targetColors?.primary || '#67e8f9' }}\n            >\n              {transitionPath.target}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n            </p>\n            {targetScore && (\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"PROXIMITY\"\n                color={targetColors?.primary}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n            REQUIREMENTS\n          </span>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {transitionPath.requirements.map((req, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n              >\n                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n                  {i + 1}\n                </span>\n                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3));\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n      >\n        <SectionHeader title=\"Community Forums\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Community Forums\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <Users size={18} className=\"text-amber-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                BASED ON YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {forums.map((forum) => (\n            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                    {forum.category.icon || ''}\n                  </div>\n                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n                    {forum.category.name}\n                  </h4>\n                </div>\n                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                  {forum.reason || forum.category.description}\n                </p>\n                <div className=\"flex items-center justify-end\">\n                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                    VISIT\n                    <ChevronRight size={12} />\n                  </span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        <Link href=\"/forum\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <Globe size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Recommended Guides\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <BookOpen size={18} className=\"text-cyan-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                OPTIMIZED FOR YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {guides.map((guide) => (\n            <div\n              key={guide.id}\n              onClick={() => onOpenGuide(guide)}\n              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n                </div>\n                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n                  {guide.title}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                {guide.description}\n              </p>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n                  <Clock size={12} />\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n                    {guide.estimatedReadTime} MIN\n                  </span>\n                </div>\n                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  READ\n                  <ChevronRight size={12} />\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Link href=\"/results?tab=guides\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <BookOpen size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n            <User size={32} className=\"text-neutral-600\" />\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n            CLASSIFICATION PENDING\n          </h3>\n          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"\"\n      subtitle=\"\"\n    >\n      <div className=\"space-y-10\">\n        {/* Page header */}\n        <header>\n          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n            Archetype <span className=\"text-cyan-400\">Classification</span>\n          </h1>\n          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n          </p>\n        </header>\n\n        {/* Premium Archetype Card */}\n        <PremiumArchetypeCard classification={classification} />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n        >\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n              <Info size={18} className=\"text-neutral-500\" />\n            </div>\n            <div>\n              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n                METHODOLOGY\n              </h4>\n              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n                Archetype classification analyzes your facial structure including gonial angle,\n                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n                Style recommendations are tailored to complement your natural features.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n","structuredPatch":[{"oldStart":29,"oldLines":7,"newStart":29,"newLines":6,"lines":[" import { Guide } from '@/types/guides';"," import { getGuideById } from '@/data/guides';"," import { TabContent } from '../ResultsLayout';","-import { ArchetypeCard } from '@/components/psl/archetype/ArchetypeCard';"," import {","   ARCHETYPE_COLORS,","   ConfidenceBar,"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"d4527504-2902-4f2c-abac-f2c7cccfb052","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01B5113697eoU1vPZ8EParWo","type":"message","role":"assistant","content":[{"type":"text","text":"Now fix the unused `colors` variable in StyleRecommendations:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":401,"cache_read_input_tokens":79149,"cache_creation":{"ephemeral_5m_input_tokens":401,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwnF8Lw1kVkxSnm1FDi","type":"assistant","uuid":"2cdbdecf-87a1-41e4-af75-94ecb8a44aa9","timestamp":"2025-12-26T20:40:20.207Z"}
{"parentUuid":"2cdbdecf-87a1-41e4-af75-94ecb8a44aa9","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01B5113697eoU1vPZ8EParWo","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01LXR7DkNYdBq666fSuVZz2f","name":"Edit","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","old_string":"function StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [","new_string":"function StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n\n  const sections = ["}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":401,"cache_read_input_tokens":79149,"cache_creation":{"ephemeral_5m_input_tokens":401,"ephemeral_1h_input_tokens":0},"output_tokens":249,"service_tier":"standard"}},"requestId":"req_011CWVwnF8Lw1kVkxSnm1FDi","type":"assistant","uuid":"464d07b4-79dc-4d59-8e35-43763d863379","timestamp":"2025-12-26T20:40:23.296Z"}
{"parentUuid":"464d07b4-79dc-4d59-8e35-43763d863379","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01LXR7DkNYdBq666fSuVZz2f","type":"tool_result","content":"The file /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n   273â†’// ============================================\n   274â†’// STYLE RECOMMENDATIONS - PREMIUM CARDS\n   275â†’// ============================================\n   276â†’\n   277â†’function StyleRecommendations({\n   278â†’  classification,\n   279â†’}: {\n   280â†’  classification: ArchetypeClassification;\n   281â†’}) {\n   282â†’  const { styleGuide, primary } = classification;\n   283â†’\n   284â†’  const sections = [\n   285â†’    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n   286â†’    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n   287â†’    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n   288â†’  ];"}]},"uuid":"d64d0d7a-bf65-4eac-960d-ed270fdd49de","timestamp":"2025-12-26T20:40:23.359Z","toolUseResult":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx","oldString":"function StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [","newString":"function StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n\n  const sections = [","originalFile":"'use client';\n\nimport { useMemo, useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Info,\n  Target,\n  Palette,\n  TrendingUp,\n  Users,\n  ArrowRight,\n  BookOpen,\n  Clock,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Dumbbell,\n  Calendar,\n  Heart,\n  Utensils,\n  Droplet,\n  User,\n  Sparkles,\n  ChevronRight,\n  Globe,\n} from 'lucide-react';\nimport { useResults } from '@/contexts/ResultsContext';\nimport { Guide } from '@/types/guides';\nimport { getGuideById } from '@/data/guides';\nimport { TabContent } from '../ResultsLayout';\nimport {\n  ARCHETYPE_COLORS,\n  ConfidenceBar,\n  DimorphismBadge,\n  ArchetypeTraits,\n  CategoryIcon,\n} from '@/components/psl/archetype/ArchetypeTraits';\nimport {\n  classifyFromRatios,\n  ArchetypeClassification,\n  ArchetypeCategory,\n} from '@/lib/archetype-classifier';\nimport { api, ArchetypeForumRecommendation } from '@/lib/api';\n\n// ============================================\n// SECTION HEADER COMPONENT\n// ============================================\n\nfunction SectionHeader({ title }: { title: string }) {\n  return (\n    <h2 className=\"text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600 mb-6 flex items-center gap-4\">\n      {title}\n      <div className=\"flex-1 h-px bg-neutral-800\" />\n    </h2>\n  );\n}\n\n// ============================================\n// PREMIUM ARCHETYPE HERO CARD\n// ============================================\n\nfunction PremiumArchetypeCard({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { primary, secondary, dimorphismLevel } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-8 relative overflow-hidden\"\n    >\n      {/* Background decoration */}\n      <div className=\"absolute top-0 right-0 p-8 opacity-5\">\n        <User size={180} />\n      </div>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8 relative z-10\">\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 block mb-2\">\n            PRIMARY CLASSIFICATION\n          </span>\n          <h2 className=\"text-3xl font-black tracking-tighter italic uppercase text-white\">\n            {primary.subArchetype}\n          </h2>\n        </div>\n        <DimorphismBadge level={dimorphismLevel} size=\"sm\" />\n      </div>\n\n      {/* Main content grid */}\n      <div className=\"grid md:grid-cols-2 gap-8 relative z-10\">\n        {/* Left: Primary archetype info */}\n        <div>\n          <div className=\"flex items-start gap-5 mb-6\">\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 rounded-2xl flex items-center justify-center border\"\n              style={{\n                background: `linear-gradient(135deg, ${colors.primary}20 0%, ${colors.primary}05 100%)`,\n                borderColor: `${colors.primary}30`,\n              }}\n            >\n              <CategoryIcon category={primary.category} />\n            </motion.div>\n\n            <div className=\"flex-1\">\n              <span\n                className=\"inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider mb-2\"\n                style={{\n                  backgroundColor: `${colors.primary}15`,\n                  color: colors.primary,\n                  border: `1px solid ${colors.primary}30`,\n                }}\n              >\n                {primary.category}\n              </span>\n              <div className=\"flex items-baseline gap-3\">\n                <span\n                  className=\"text-4xl font-black\"\n                  style={{ color: colors.primary }}\n                >\n                  {Math.round(primary.confidence * 100)}%\n                </span>\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  MATCH\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Confidence bar */}\n          <div className=\"mb-6\">\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH STRENGTH\"\n              color={colors.primary}\n            />\n          </div>\n\n          {/* Traits */}\n          <div>\n            <span className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-600 block mb-3\">\n              DEFINING TRAITS\n            </span>\n            <ArchetypeTraits traits={primary.traits} />\n          </div>\n        </div>\n\n        {/* Right: Secondary archetype */}\n        {secondary && (\n          <div className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-5\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                SECONDARY MATCH\n              </span>\n              <span\n                className=\"px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider\"\n                style={{\n                  backgroundColor: `${ARCHETYPE_COLORS[secondary.category].primary}15`,\n                  color: ARCHETYPE_COLORS[secondary.category].primary,\n                  border: `1px solid ${ARCHETYPE_COLORS[secondary.category].primary}30`,\n                }}\n              >\n                {Math.round(secondary.confidence * 100)}%\n              </span>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div\n                className=\"w-12 h-12 rounded-xl flex items-center justify-center border\"\n                style={{\n                  background: `linear-gradient(135deg, ${ARCHETYPE_COLORS[secondary.category].primary}15 0%, transparent 100%)`,\n                  borderColor: `${ARCHETYPE_COLORS[secondary.category].primary}20`,\n                }}\n              >\n                <CategoryIcon category={secondary.category} />\n              </div>\n              <div>\n                <h3\n                  className=\"text-xl font-black italic uppercase\"\n                  style={{ color: ARCHETYPE_COLORS[secondary.category].primary }}\n                >\n                  {secondary.subArchetype}\n                </h3>\n                <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                  {secondary.category}\n                </p>\n              </div>\n            </div>\n\n            {secondary.traits.length > 0 && (\n              <ArchetypeTraits traits={secondary.traits.slice(0, 3)} compact />\n            )}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// ALL SCORES - COMPACT GRID\n// ============================================\n\nfunction AllArchetypeScores({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const sortedScores = [...classification.allScores].sort((a, b) => b.score - a.score);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.2 }}\n    >\n      <SectionHeader title=\"Category Breakdown\" />\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {sortedScores.map((score, index) => {\n          const colors = ARCHETYPE_COLORS[score.category as ArchetypeCategory];\n          const isPrimary = index === 0;\n\n          return (\n            <div\n              key={score.category}\n              className={`relative p-4 rounded-2xl border transition-all ${\n                isPrimary\n                  ? 'bg-neutral-900/60 border-cyan-500/30'\n                  : 'bg-neutral-900/40 border-white/5 hover:border-white/10'\n              }`}\n            >\n              {isPrimary && (\n                <div className=\"absolute -top-2.5 left-3 px-2 py-0.5 bg-cyan-500 rounded-lg text-[9px] font-black uppercase tracking-wider text-black\">\n                  PRIMARY\n                </div>\n              )}\n              <div\n                className=\"text-2xl font-black mb-1\"\n                style={{ color: colors?.primary || '#6b7280' }}\n              >\n                {score.score}%\n              </div>\n              <div className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 truncate\">\n                {score.category}\n              </div>\n              {/* Progress bar */}\n              <div className=\"mt-3 h-1.5 bg-neutral-800 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${score.score}%` }}\n                  transition={{ duration: 0.8, delay: 0.3 + index * 0.05 }}\n                  className=\"h-full rounded-full\"\n                  style={{ backgroundColor: colors?.primary || '#6b7280' }}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// STYLE RECOMMENDATIONS - PREMIUM CARDS\n// ============================================\n\nfunction StyleRecommendations({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { styleGuide, primary } = classification;\n  const colors = ARCHETYPE_COLORS[primary.category];\n\n  const sections = [\n    { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },\n    { key: 'hair', label: 'HAIR', items: styleGuide.hair, icon: User },\n    { key: 'colors', label: 'COLORS', items: styleGuide.colors, icon: Palette },\n  ];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.3 }}\n    >\n      <SectionHeader title=\"Style Recommendations\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6 relative overflow-hidden\">\n        {/* Background decoration */}\n        <div className=\"absolute top-0 right-0 p-6 opacity-5\">\n          <Palette size={100} />\n        </div>\n\n        <div className=\"flex items-center gap-3 mb-6 relative z-10\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n            <Palette size={18} className=\"text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              {primary.subArchetype} <span className=\"text-purple-400\">Style</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              CURATED FOR YOUR ARCHETYPE\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-4 relative z-10\">\n          {sections.map((section) => (\n            <div\n              key={section.key}\n              className=\"rounded-2xl bg-neutral-900/50 border border-white/5 p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <section.icon size={14} className=\"text-neutral-500\" />\n                <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500\">\n                  {section.label}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {section.items.slice(0, 4).map((item) => (\n                  <span\n                    key={item}\n                    className=\"px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider bg-neutral-800/80 text-neutral-300 border border-white/5\"\n                  >\n                    {item}\n                  </span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// TRANSITION OPPORTUNITIES\n// ============================================\n\nfunction TransitionOpportunities({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const { transitionPath, primary, allScores } = classification;\n\n  if (!transitionPath) return null;\n\n  const targetScore = allScores.find((s) => s.category === transitionPath.target);\n  const primaryColors = ARCHETYPE_COLORS[primary.category];\n  const targetColors = ARCHETYPE_COLORS[transitionPath.target as ArchetypeCategory];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.4 }}\n    >\n      <SectionHeader title=\"Transition Potential\" />\n\n      <div className=\"rounded-[2rem] bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20 p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-cyan-500/30 flex items-center justify-center\">\n            <TrendingUp size={18} className=\"text-green-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-black italic uppercase text-white\">\n              ARCHETYPE <span className=\"text-cyan-400\">EVOLUTION</span>\n            </h3>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n              YOUR PATH TO OPTIMIZATION\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n          {/* Current */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-white/5 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-3\">\n              CURRENT\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: primaryColors.primary }}\n            >\n              {primary.subArchetype}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {primary.category}\n            </p>\n            <ConfidenceBar\n              confidence={primary.confidence}\n              label=\"MATCH\"\n              color={primaryColors.primary}\n            />\n          </div>\n\n          {/* Target */}\n          <div className=\"rounded-2xl bg-neutral-900/60 border border-cyan-500/20 p-5\">\n            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500 block mb-3\">\n              TARGET\n            </span>\n            <h4\n              className=\"text-2xl font-black italic uppercase mb-1\"\n              style={{ color: targetColors?.primary || '#67e8f9' }}\n            >\n              {transitionPath.target}\n            </h4>\n            <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500 mb-4\">\n              {targetScore ? `${targetScore.score}% CURRENT MATCH` : 'NEW CATEGORY'}\n            </p>\n            {targetScore && (\n              <ConfidenceBar\n                confidence={targetScore.confidence}\n                label=\"PROXIMITY\"\n                color={targetColors?.primary}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 block mb-4\">\n            REQUIREMENTS\n          </span>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {transitionPath.requirements.map((req, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-3 p-4 rounded-2xl bg-neutral-900/50 border border-white/5\"\n              >\n                <span className=\"w-7 h-7 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-xs font-black\">\n                  {i + 1}\n                </span>\n                <span className=\"text-sm text-neutral-300 font-medium\">{req}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED FORUMS SECTION\n// ============================================\n\nfunction RecommendedForumsSection({\n  classification,\n}: {\n  classification: ArchetypeClassification;\n}) {\n  const [forums, setForums] = useState<ArchetypeForumRecommendation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchForums() {\n      setIsLoading(true);\n      try {\n        const recommendations = await api.getArchetypeForumRecommendations(archetype);\n        if (isMounted) {\n          setForums(recommendations.slice(0, 3));\n        }\n      } catch (error) {\n        if (isMounted) {\n          console.error('[ArchetypeTab] Failed to fetch forum recommendations:', error);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchForums();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [archetype]);\n\n  if (isLoading) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.35 }}\n      >\n        <SectionHeader title=\"Community Forums\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse rounded-2xl bg-neutral-900/40 border border-white/5 h-32\" />\n          ))}\n        </div>\n      </motion.div>\n    );\n  }\n\n  if (forums.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Community Forums\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <Users size={18} className=\"text-amber-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                RECOMMENDED <span className=\"text-amber-400\">FORUMS</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                BASED ON YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {forums.map((forum) => (\n            <Link key={forum.category.id} href={`/forum/${forum.category.slug}`}>\n              <div className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-amber-500/30 p-5 transition-all cursor-pointer h-full\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20 flex items-center justify-center text-xl flex-shrink-0\">\n                    {forum.category.icon || ''}\n                  </div>\n                  <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-amber-400 transition-colors text-sm\">\n                    {forum.category.name}\n                  </h4>\n                </div>\n                <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                  {forum.reason || forum.category.description}\n                </p>\n                <div className=\"flex items-center justify-end\">\n                  <span className=\"text-[10px] font-black uppercase tracking-wider text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                    VISIT\n                    <ChevronRight size={12} />\n                  </span>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        <Link href=\"/forum\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <Globe size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">EXPLORE ALL FORUMS</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// RECOMMENDED GUIDES SECTION\n// ============================================\n\nconst GUIDE_ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={18} />,\n  Dumbbell: <Dumbbell size={18} />,\n  Brain: <Brain size={18} />,\n  Wrench: <Wrench size={18} />,\n  TrendingDown: <TrendingDown size={18} />,\n  Calendar: <Calendar size={18} />,\n  Target: <Target size={18} />,\n  Heart: <Heart size={18} />,\n  Utensils: <Utensils size={18} />,\n  Droplet: <Droplet size={18} />,\n};\n\nconst ARCHETYPE_GUIDES: Record<string, string[]> = {\n  Softboy: ['skincare', 'mindset', 'diet', 'maintenance'],\n  Prettyboy: ['skincare', 'maintenance', 'diet', 'body-fat'],\n  RobustPrettyboy: ['v-taper', 'training', 'skincare', 'diet'],\n  Chad: ['v-taper', 'training', 'core-neck', 'body-fat'],\n  Hypermasculine: ['v-taper', 'training', 'core-neck', 'cardio'],\n  Exotic: ['skincare', 'mindset', 'maintenance', 'diet'],\n};\n\nfunction RecommendedGuidesSection({\n  classification,\n  onOpenGuide,\n}: {\n  classification: ArchetypeClassification;\n  onOpenGuide: (guide: Guide) => void;\n}) {\n  const archetype = classification.primary.category;\n  const colors = ARCHETYPE_COLORS[archetype];\n  const guideIds = ARCHETYPE_GUIDES[archetype] || ARCHETYPE_GUIDES.Softboy;\n\n  const guides = guideIds\n    .map((id) => getGuideById(id))\n    .filter((g): g is Guide => g !== undefined)\n    .slice(0, 3);\n\n  if (guides.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.35 }}\n    >\n      <SectionHeader title=\"Recommended Guides\" />\n\n      <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center\">\n              <BookOpen size={18} className=\"text-cyan-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-black italic uppercase text-white\">\n                PROTOCOL <span className=\"text-cyan-400\">GUIDES</span>\n              </h3>\n              <p className=\"text-[10px] font-bold uppercase tracking-wider text-neutral-500\">\n                OPTIMIZED FOR YOUR ARCHETYPE\n              </p>\n            </div>\n          </div>\n          <span\n            className=\"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider\"\n            style={{\n              backgroundColor: `${colors.primary}15`,\n              color: colors.primary,\n              border: `1px solid ${colors.primary}30`,\n            }}\n          >\n            {archetype}\n          </span>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n          {guides.map((guide) => (\n            <div\n              key={guide.id}\n              onClick={() => onOpenGuide(guide)}\n              className=\"group rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-cyan-500/30 p-5 transition-all cursor-pointer\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/20 flex items-center justify-center text-cyan-400 flex-shrink-0\">\n                  {GUIDE_ICON_MAP[guide.icon] || <BookOpen size={18} />}\n                </div>\n                <h4 className=\"font-black uppercase tracking-tight text-white group-hover:text-cyan-400 transition-colors text-sm\">\n                  {guide.title}\n                </h4>\n              </div>\n              <p className=\"text-xs text-neutral-400 leading-relaxed line-clamp-2 mb-3\">\n                {guide.description}\n              </p>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1.5 text-neutral-500\">\n                  <Clock size={12} />\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider\">\n                    {guide.estimatedReadTime} MIN\n                  </span>\n                </div>\n                <span className=\"text-[10px] font-black uppercase tracking-wider text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1\">\n                  READ\n                  <ChevronRight size={12} />\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Link href=\"/results?tab=guides\">\n          <div className=\"flex items-center justify-center gap-2 py-3 rounded-2xl bg-neutral-900/50 border border-white/5 hover:border-white/10 text-sm text-neutral-400 hover:text-white transition-all\">\n            <BookOpen size={14} />\n            <span className=\"font-bold uppercase tracking-wider text-xs\">VIEW ALL GUIDES</span>\n            <ArrowRight size={14} />\n          </div>\n        </Link>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// MAIN ARCHETYPE TAB\n// ============================================\n\nexport function ArchetypeTab() {\n  const { frontRatios, sideRatios, gender, ethnicity, setActiveTab } = useResults();\n\n  const classification = useMemo((): ArchetypeClassification | null => {\n    if (!frontRatios || frontRatios.length === 0) return null;\n\n    try {\n      return classifyFromRatios(frontRatios, sideRatios || [], gender, ethnicity);\n    } catch (error) {\n      console.error('[ArchetypeTab] Classification error:', error);\n      return null;\n    }\n  }, [frontRatios, sideRatios, gender, ethnicity]);\n\n  const handleOpenGuide = () => {\n    setActiveTab('guides');\n  };\n\n  if (!classification) {\n    return (\n      <TabContent\n        title=\"Archetype Classification\"\n        subtitle=\"Determining your facial archetype based on your metrics\"\n      >\n        <div className=\"rounded-[2rem] bg-neutral-900/40 border border-white/5 p-12 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-900 border border-white/10 flex items-center justify-center mx-auto mb-6\">\n            <User size={32} className=\"text-neutral-600\" />\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-neutral-400 mb-2\">\n            CLASSIFICATION PENDING\n          </h3>\n          <p className=\"text-neutral-500 text-sm max-w-md mx-auto\">\n            Unable to classify archetype. Please ensure your analysis is complete.\n          </p>\n        </div>\n      </TabContent>\n    );\n  }\n\n  return (\n    <TabContent\n      title=\"\"\n      subtitle=\"\"\n    >\n      <div className=\"space-y-10\">\n        {/* Page header */}\n        <header>\n          <h1 className=\"text-3xl font-black tracking-tighter italic uppercase mb-2\">\n            Archetype <span className=\"text-cyan-400\">Classification</span>\n          </h1>\n          <p className=\"text-neutral-500 font-medium uppercase text-[10px] tracking-[0.2em]\">\n            FACIAL AESTHETIC PROFILE BASED ON BONE STRUCTURE & PROPORTIONS\n          </p>\n        </header>\n\n        {/* Premium Archetype Card */}\n        <PremiumArchetypeCard classification={classification} />\n\n        {/* All Scores Breakdown */}\n        <AllArchetypeScores classification={classification} />\n\n        {/* Style Recommendations */}\n        <StyleRecommendations classification={classification} />\n\n        {/* Recommended Guides */}\n        <RecommendedGuidesSection\n          classification={classification}\n          onOpenGuide={handleOpenGuide}\n        />\n\n        {/* Recommended Forums */}\n        <RecommendedForumsSection classification={classification} />\n\n        {/* Transition Opportunities */}\n        <TransitionOpportunities classification={classification} />\n\n        {/* Info footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"rounded-2xl bg-neutral-900/40 border border-white/5 p-6\"\n        >\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center flex-shrink-0\">\n              <Info size={18} className=\"text-neutral-500\" />\n            </div>\n            <div>\n              <h4 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500 mb-2\">\n                METHODOLOGY\n              </h4>\n              <p className=\"text-sm text-neutral-400 leading-relaxed\">\n                Archetype classification analyzes your facial structure including gonial angle,\n                face width-height ratio, canthal tilt, and cheekbone position. Your primary archetype\n                represents your dominant aesthetic, while your secondary shows traits you also exhibit.\n                Style recommendations are tailored to complement your natural features.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </TabContent>\n  );\n}\n","structuredPatch":[{"oldStart":280,"oldLines":7,"newStart":280,"newLines":6,"lines":["   classification: ArchetypeClassification;"," }) {","   const { styleGuide, primary } = classification;","-  const colors = ARCHETYPE_COLORS[primary.category];"," ","   const sections = [","     { key: 'clothing', label: 'CLOTHING', items: styleGuide.clothing, icon: Sparkles },"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"d64d0d7a-bf65-4eac-960d-ed270fdd49de","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01HNuWJo2i7yLL24Um9c9cSW","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me verify the linting passes:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":633,"cache_read_input_tokens":79550,"cache_creation":{"ephemeral_5m_input_tokens":633,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWVwnjEY7efoKJ1tNqibH","type":"assistant","uuid":"52ba36d7-6dbc-4da0-9fc2-603b77e3fa95","timestamp":"2025-12-26T20:40:26.458Z"}
{"parentUuid":"52ba36d7-6dbc-4da0-9fc2-603b77e3fa95","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01HNuWJo2i7yLL24Um9c9cSW","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BxHaQ6rBdRAJoWLMGCycx4","name":"Bash","input":{"command":"npm run lint -- --max-warnings=50 2>&1 | grep -E \"(Error|ArchetypeTab)\" | head -10","description":"Check for ESLint errors in ArchetypeTab"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":633,"cache_read_input_tokens":79550,"cache_creation":{"ephemeral_5m_input_tokens":633,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWVwnjEY7efoKJ1tNqibH","type":"assistant","uuid":"d33bf87c-16a5-45f2-ab21-69a9dfbcaf2e","timestamp":"2025-12-26T20:40:27.836Z"}
{"parentUuid":"d33bf87c-16a5-45f2-ab21-69a9dfbcaf2e","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BxHaQ6rBdRAJoWLMGCycx4","type":"tool_result","content":"","is_error":false}]},"uuid":"b727cba1-4f9e-4676-ac52-498334c5e4a8","timestamp":"2025-12-26T20:40:29.766Z","toolUseResult":{"stdout":"","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"b727cba1-4f9e-4676-ac52-498334c5e4a8","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01VrDGRjgh4YnqFA9LphkWK9","type":"message","role":"assistant","content":[{"type":"text","text":"No more errors in ArchetypeTab. Let me run a final TypeScript check and lint:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":147,"cache_read_input_tokens":80183,"cache_creation":{"ephemeral_5m_input_tokens":147,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwoCg34JgJhza48N4ox","type":"assistant","uuid":"e0d62ceb-79c2-4746-ae07-3bba73a1cf8c","timestamp":"2025-12-26T20:40:37.639Z"}
{"parentUuid":"e0d62ceb-79c2-4746-ae07-3bba73a1cf8c","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01VrDGRjgh4YnqFA9LphkWK9","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0168heZiXJ2QtTCrpFYUaUDb","name":"Bash","input":{"command":"npx tsc --noEmit && echo \"TypeScript: OK\"","description":"Final TypeScript check"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":147,"cache_read_input_tokens":80183,"cache_creation":{"ephemeral_5m_input_tokens":147,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwoCg34JgJhza48N4ox","type":"assistant","uuid":"fc1f1ebc-25ba-479a-bde3-cd30997fa129","timestamp":"2025-12-26T20:40:38.494Z"}
{"parentUuid":"fc1f1ebc-25ba-479a-bde3-cd30997fa129","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0168heZiXJ2QtTCrpFYUaUDb","type":"tool_result","content":"TypeScript: OK","is_error":false}]},"uuid":"77234885-7f2b-45fa-a041-7f1eea234584","timestamp":"2025-12-26T20:40:41.784Z","toolUseResult":{"stdout":"TypeScript: OK","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"77234885-7f2b-45fa-a041-7f1eea234584","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"07eb15f9-1807-445c-a67f-e2b0c9b2588f","version":"2.0.76","gitBranch":"main","agentId":"a3c9dc2","slug":"mellow-inventing-toast","message":{"model":"claude-opus-4-5-20251101","id":"msg_01G5Kk4YZH7LymhL5Nx4vMTQ","type":"message","role":"assistant","content":[{"type":"text","text":"The redesign is complete. Here is a summary of the changes made to `/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/ArchetypeTab.tsx`:\n\n## Summary of Premium Design Redesign\n\n### Design Patterns Applied:\n\n1. **Headers**: Updated to `text-3xl font-black tracking-tighter italic uppercase` with cyan accent spans for the page title\n\n2. **Section Headers**: Created reusable `SectionHeader` component using `text-[10px] font-black uppercase tracking-[0.4em] text-neutral-600` with horizontal divider line (`flex-1 h-px bg-neutral-800`)\n\n3. **Cards**: Updated all cards to use `rounded-[2rem] bg-neutral-900/40 border border-white/5` for premium containers and `rounded-2xl` for smaller nested cards\n\n4. **Badges**: All badges now use `font-black uppercase tracking-wider rounded-lg` with subtle backgrounds and borders\n\n5. **Labels**: Consistent `text-[10px] font-bold uppercase tracking-wider text-neutral-500/600` throughout\n\n6. **Icon Boxes**: Added `w-10 h-10 rounded-xl bg-neutral-900 border border-white/10 flex items-center justify-center` pattern for section icons\n\n7. **Premium Containers**: Large sections use `rounded-[2rem] bg-neutral-900/40 border border-white/5 p-6` with decorative background icons\n\n### Components Redesigned:\n\n- **PremiumArchetypeCard**: New hero card replacing the old ArchetypeCard import, featuring:\n  - Background decoration with large faded icon\n  - Two-column grid layout for primary/secondary archetypes\n  - Confidence bars with animated progress\n\n- **AllArchetypeScores**: Grid of score cards with:\n  - Animated progress bars\n  - PRIMARY badge on top scorer\n  - Hover states with border transitions\n\n- **StyleRecommendations**: Premium container with:\n  - Palette icon decoration in background\n  - Three-column grid for clothing/hair/colors\n  - Tag badges with uppercase tracking\n\n- **TransitionOpportunities**: Gradient container with:\n  - Current vs Target comparison grid\n  - Numbered requirement cards\n  - Cyan accent theming\n\n- **RecommendedForumsSection & RecommendedGuidesSection**: Both updated with:\n  - Premium container styling\n  - Icon boxes for section headers\n  - Card grids with hover animations\n  - Footer buttons for navigation\n\n- **Info Footer**: Updated to premium card style with icon box and methodology label"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":228,"cache_read_input_tokens":80330,"cache_creation":{"ephemeral_5m_input_tokens":228,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVwp5v23iLEkCsxX8nfd","type":"assistant","uuid":"34f131f2-55cd-405d-94ff-80043d91d79f","timestamp":"2025-12-26T20:40:58.602Z"}
