     1→/**
     2→ * FaceIQ-Style Results Page Types
     3→ * Complete type definitions for the results UI
     4→ */
     5→
     6→import { QualityTier, SeverityLevel, MeasurementUnit } from '@/lib/faceiq-scoring';
     7→
     8→// ============================================
     9→// ILLUSTRATION TYPES
    10→// ============================================
    11→
    12→export interface IllustrationPoint {
    13→  type: 'landmark' | 'calculated';
    14→  landmarkId?: string;
    15→  x?: number;
    16→  y?: number;
    17→  label?: string;
    18→}
    19→
    20→export interface IllustrationLine {
    21→  from: string;
    22→  to: string;
    23→  color: string;
    24→  style?: 'solid' | 'dashed';
    25→  label?: string;
    26→  labelColor?: string;
    27→  labelPosition?: 'start' | 'middle' | 'end';
    28→}
    29→
    30→export interface RatioIllustration {
    31→  points: Record<string, IllustrationPoint>;
    32→  lines: Record<string, IllustrationLine>;
    33→}
    34→
    35→// ============================================
    36→// RATIO/MEASUREMENT TYPES
    37→// ============================================
    38→
    39→export interface Ratio {
    40→  id: string;
    41→  name: string;
    42→  value: number;
    43→  score: number;  // 0-10 scale
    44→  standardizedScore: number;
    45→  unit: 'x' | 'mm' | '%' | '°';
    46→  idealMin: number;
    47→  idealMax: number;
    48→  rangeMin: number;
    49→  rangeMax: number;
    50→  description: string;
    51→  category: string;
    52→  qualityLevel: QualityTier;
    53→  severity: SeverityLevel;
    54→  illustration: RatioIllustration;
    55→  mayIndicateFlaws: string[];
    56→  mayIndicateStrengths: string[];
    57→  usedLandmarks: string[];
    58→  scoringCurveConfig?: {
    59→    decayRate: number;
    60→    maxScore: number;
    61→  };
    62→}
    63→
    64→// ============================================
    65→// STRENGTH/FLAW TYPES
    66→// ============================================
    67→
    68→export interface ResponsibleRatio {
    69→  ratioName: string;
    70→  ratioId: string;
    71→  score: number;
    72→  value: number;
    73→  isObfuscated?: boolean;
    74→  // Additional properties for AI descriptions
    75→  idealMin: number;
    76→  idealMax: number;
    77→  unit: string;
    78→  category?: string;
    79→}
    80→
    81→export interface Strength {
    82→  id: string;
    83→  strengthName: string;
    84→  summary: string;
    85→  avgScore: number;
    86→  qualityLevel: QualityTier;
    87→  categoryName: string;
    88→  responsibleRatios: ResponsibleRatio[];
    89→}
    90→
    91→export interface Flaw {
    92→  id: string;
    93→  flawName: string;
    94→  summary: string;
    95→  harmonyPercentageLost: number;
    96→  standardizedImpact: number;
    97→  categoryName: string;
    98→  isOther?: boolean;
    99→  responsibleRatios: ResponsibleRatio[];
   100→  rollingPointsDeducted?: number;
   101→  rollingHarmonyPercentageLost?: number;
   102→  rollingStandardizedImpact?: number;
   103→}
   104→
   105→// ============================================
   106→// RECOMMENDATION TYPES
   107→// ============================================
   108→
   109→export type RecommendationPhase = 'Surgical' | 'Minimally Invasive' | 'Foundational';
   110→
   111→export interface RecommendationTimeline {
   112→  effect_start: 'immediate' | 'delayed' | 'gradual';
   113→  full_results_weeks: number;
   114→  full_results_weeks_max?: number;
   115→}
   116→
   117→export interface RecommendationCost {
   118→  type: 'flat' | 'per_month' | 'per_session';
   119→  min: number;
   120→  max: number;
   121→  currency: string;
   122→}
   123→
   124→export interface RatioImpact {
   125→  ratioId: string;
   126→  ratioName: string;
   127→  direction: 'increase' | 'decrease' | 'both';
   128→  percentageEffect: number;
   129→}
   130→
   131→export interface Recommendation {
   132→  ref_id: string;
   133→  name: string;
   134→  description: string;
   135→  phase: RecommendationPhase;
   136→  impact: number;  // 0-1 effectiveness score
   137→  coverage: number;  // Number of metrics improved
   138→  percentage: string;  // e.g., "10-20%"
   139→  expectedImprovementRange?: { min: number; max: number };
   140→  matchedFlaws: string[];
   141→  matchedRatios: string[];
   142→  ratios_impacted: RatioImpact[];
   143→  timeline: RecommendationTimeline;
   144→  cost: RecommendationCost;
   145→  risks_side_effects: string | null;
   146→  warnings: string[];
   147→  gender: 'male' | 'female' | 'both';
   148→}
   149→
   150→// ============================================
   151→// HARMONY ANALYSIS TYPES
   152→// ============================================
   153→
   154→export interface ProfileAnalysis {
   155→  standardizedScore: number;
   156→  ratios: Ratio[];
   157→  overallAIDescription?: string | null;
   158→}
   159→
   160→export interface FullHarmonyAnalysis {
   161→  standardizedScore: number;
   162→  front: ProfileAnalysis;
   163→  side: ProfileAnalysis;
   164→  strengths: Strength[];
   165→  flaws: Flaw[];
   166→}
   167→
   168→// ============================================
   169→// FACE DATA TYPES
   170→// ============================================
   171→
   172→export interface FaceData {
   173→  id: string;
   174→  userId?: string;
   175→  frontPhotoUrl: string;
   176→  sidePhotoUrl?: string;
   177→  harmonyScore: number | null;
   178→  frontHarmonyScore: number | null;
   179→  sideHarmonyScore: number | null;
   180→  gender: 'male' | 'female';
   181→  race?: string;
   182→  unlocked: boolean;
   183→  actionPlanUnlocked: boolean;
   184→  harmonyAnalysis: FullHarmonyAnalysis;
   185→}
   186→
   187→// ============================================
   188→// UI STATE TYPES
   189→// ============================================
   190→
   191→export type ResultsTab =
   192→  | 'overview'
   193→  | 'front-ratios'
   194→  | 'side-ratios'
   195→  | 'plan'
   196→  | 'options'
   197→  | 'support';
   198→
   199→export interface ResultsUIState {
   200→  activeTab: ResultsTab;
   201→  expandedMeasurementId: string | null;
   202→  selectedVisualizationMetric: string | null;
   203→  categoryFilter: string | null;
   204→  showLandmarkOverlay: boolean;
   205→}
   206→
   207→// ============================================
   208→// CATEGORY TYPES
   209→// ============================================
   210→
   211→export interface MeasurementCategory {
   212→  id: string;
   213→  name: string;
   214→  color: string;
   215→  description: string;
   216→}
   217→
   218→export const MEASUREMENT_CATEGORIES: MeasurementCategory[] = [
   219→  { id: 'midface', name: 'Midface/Face Shape', color: '#67e8f9', description: 'Facial proportions and overall shape' },
   220→  { id: 'jaw-growth', name: 'Occlusion/Jaw Growth', color: '#a78bfa', description: 'Jaw development and bite alignment' },
   221→  { id: 'jaw-shape', name: 'Jaw Shape', color: '#f97316', description: 'Jawline contour and angles' },
   222→  { id: 'upper-third', name: 'Upper Third', color: '#84cc16', description: 'Forehead and hairline proportions' },
   223→  { id: 'eyes', name: 'Eyes', color: '#06b6d4', description: 'Eye shape, spacing, and canthal tilt' },
   224→  { id: 'nose', name: 'Nose', color: '#fbbf24', description: 'Nasal proportions and angles' },
   225→  { id: 'lips', name: 'Lips', color: '#ec4899', description: 'Lip proportions and projection' },
   226→  { id: 'chin', name: 'Chin', color: '#ef4444', description: 'Chin projection and shape' },
   227→  { id: 'neck', name: 'Neck', color: '#14b8a6', description: 'Neck angle and throat definition' },
   228→  { id: 'other', name: 'Other', color: '#6b7280', description: 'Additional measurements' },
   229→];
   230→
   231→// ============================================
   232→// SCORE COLOR HELPERS
   233→// ============================================
   234→
   235→export function getScoreColor(score: number): string {
   236→  if (score >= 8) return '#67e8f9';  // Cyan - ideal
   237→  if (score >= 6) return '#22c55e';  // Green - good
   238→  if (score >= 4) return '#fbbf24';  // Yellow - fair
   239→  return 'rgb(227, 67, 67)';         // Red - poor
   240→}
   241→
   242→export function getQualityColor(quality: QualityTier): string {
   243→  switch (quality) {
   244→    case 'ideal': return '#67e8f9';
   245→    case 'excellent': return '#22c55e';
   246→    case 'good': return '#fbbf24';
   247→    case 'below_average': return 'rgb(227, 67, 67)';
   248→    default: return '#6b7280';
   249→  }
   250→}
   251→
   252→export function getSeverityColor(severity: SeverityLevel): string {
   253→  switch (severity) {
   254→    case 'optimal': return '#67e8f9';
   255→    case 'minor': return '#22c55e';
   256→    case 'moderate': return '#fbbf24';
   257→    case 'major': return '#f97316';
   258→    case 'severe': return '#ef4444';
   259→    case 'extremely_severe': return '#dc2626';
   260→    default: return '#6b7280';
   261→  }
   262→}
   263→
   264→export function getCategoryColor(categoryName: string): string {
   265→  const cat = MEASUREMENT_CATEGORIES.find(c =>
   266→    c.name.toLowerCase().includes(categoryName.toLowerCase()) ||
   267→    categoryName.toLowerCase().includes(c.name.toLowerCase())
   268→  );
   269→  return cat?.color || '#6b7280';
   270→}
   271→
   272→// ============================================
   273→// UNIT FORMATTING
   274→// ============================================
   275→
   276→export function formatUnit(unit: 'x' | 'mm' | '%' | '°' | MeasurementUnit): string {
   277→  switch (unit) {
   278→    case 'x':
   279→    case 'ratio': return 'x';
   280→    case 'mm': return 'mm';
   281→    case '%':
   282→    case 'percent': return '%';
   283→    case '°':
   284→    case 'degrees': return '°';
   285→    default: return '';
   286→  }
   287→}
   288→
   289→export function formatValue(value: number, unit: 'x' | 'mm' | '%' | '°' | MeasurementUnit): string {
   290→  const unitStr = formatUnit(unit);
   291→  if (unit === '%' || unit === 'percent') {
   292→    return `${value.toFixed(1)}${unitStr}`;
   293→  }
   294→  if (unit === '°' || unit === 'degrees') {
   295→    return `${value.toFixed(1)}${unitStr}`;
   296→  }
   297→  return `${value.toFixed(2)}${unitStr}`;
   298→}
   299→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
