     1→'use client';
     2→
     3→import { useState } from 'react';
     4→import { motion, AnimatePresence } from 'framer-motion';
     5→import {
     6→  LayoutDashboard,
     7→  User,
     8→  ScanFace,
     9→  Sparkles,
    10→  Settings,
    11→  HelpCircle,
    12→  Menu,
    13→  X,
    14→  ChevronRight,
    15→} from 'lucide-react';
    16→import { useResults } from '@/contexts/ResultsContext';
    17→import { ResultsTab } from '@/types/results';
    18→import { ScoreCircle } from './shared';
    19→
    20→// ============================================
    21→// TAB NAVIGATION
    22→// ============================================
    23→
    24→interface TabConfig {
    25→  id: ResultsTab;
    26→  label: string;
    27→  icon: React.ReactNode;
    28→}
    29→
    30→const TABS: TabConfig[] = [
    31→  { id: 'overview', label: 'Overview', icon: <LayoutDashboard size={18} /> },
    32→  { id: 'front-ratios', label: 'Front Ratios', icon: <User size={18} /> },
    33→  { id: 'side-ratios', label: 'Side Ratios', icon: <ScanFace size={18} /> },
    34→  { id: 'plan', label: 'Your Plan', icon: <Sparkles size={18} /> },
    35→  { id: 'options', label: 'Options', icon: <Settings size={18} /> },
    36→  { id: 'support', label: 'Support', icon: <HelpCircle size={18} /> },
    37→];
    38→
    39→// ============================================
    40→// SIDEBAR
    41→// ============================================
    42→
    43→interface SidebarProps {
    44→  onClose?: () => void;
    45→}
    46→
    47→function Sidebar({ onClose }: SidebarProps) {
    48→  const { activeTab, setActiveTab, overallScore, frontPhoto } = useResults();
    49→
    50→  return (
    51→    <div className="flex flex-col h-full bg-neutral-950 border-r border-neutral-800">
    52→      {/* Header */}
    53→      <div className="flex items-center justify-between p-4 border-b border-neutral-800">
    54→        <div className="flex items-center gap-2">
    55→          <div className="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center">
    56→            <ScanFace size={18} className="text-white" />
    57→          </div>
    58→          <span className="font-semibold text-white">LOOKSMAXX</span>
    59→        </div>
    60→        {onClose && (
    61→          <button
    62→            onClick={onClose}
    63→            className="p-2 hover:bg-neutral-800 rounded-lg transition-colors md:hidden"
    64→          >
    65→            <X size={20} className="text-neutral-400" />
    66→          </button>
    67→        )}
    68→      </div>
    69→
    70→      {/* Profile Photo & Score */}
    71→      <div className="p-4 border-b border-neutral-800">
    72→        <div className="relative aspect-square rounded-xl overflow-hidden bg-neutral-900 mb-3">
    73→          {frontPhoto ? (
    74→            <img
    75→              src={frontPhoto}
    76→              alt="Your face"
    77→              className="w-full h-full object-cover"
    78→            />
    79→          ) : (
    80→            <div className="w-full h-full flex items-center justify-center">
    81→              <User size={48} className="text-neutral-700" />
    82→            </div>
    83→          )}
    84→          {/* Score badge */}
    85→          <div className="absolute bottom-2 right-2">
    86→            <ScoreCircle score={overallScore} size="sm" animate={false} />
    87→          </div>
    88→        </div>
    89→        <div className="text-center">
    90→          <p className="text-sm text-neutral-400">Harmony Score</p>
    91→          <p className="text-2xl font-bold text-white">{overallScore.toFixed(2)}</p>
    92→        </div>
    93→      </div>
    94→
    95→      {/* Navigation */}
    96→      <nav className="flex-1 p-2 overflow-y-auto">
    97→        {TABS.map((tab) => (
    98→          <button
    99→            key={tab.id}
   100→            onClick={() => {
   101→              setActiveTab(tab.id);
   102→              onClose?.();
   103→            }}
   104→            className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-all ${
   105→              activeTab === tab.id
   106→                ? 'bg-cyan-500/20 text-cyan-400'
   107→                : 'text-neutral-400 hover:bg-neutral-800 hover:text-white'
   108→            }`}
   109→          >
   110→            {tab.icon}
   111→            <span className="font-medium">{tab.label}</span>
   112→            {activeTab === tab.id && (
   113→              <ChevronRight size={16} className="ml-auto" />
   114→            )}
   115→          </button>
   116→        ))}
   117→      </nav>
   118→
   119→      {/* Footer */}
   120→      <div className="p-4 border-t border-neutral-800">
   121→        <button className="w-full py-2.5 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium rounded-lg hover:from-cyan-400 hover:to-blue-500 transition-all">
   122→          New Analysis
   123→        </button>
   124→      </div>
   125→    </div>
   126→  );
   127→}
   128→
   129→// ============================================
   130→// MOBILE HEADER
   131→// ============================================
   132→
   133→interface MobileHeaderProps {
   134→  onMenuClick: () => void;
   135→}
   136→
   137→function MobileHeader({ onMenuClick }: MobileHeaderProps) {
   138→  const { activeTab, overallScore } = useResults();
   139→  const currentTab = TABS.find((t) => t.id === activeTab);
   140→
   141→  return (
   142→    <header className="flex items-center justify-between px-4 py-3 bg-neutral-950 border-b border-neutral-800">
   143→      <button
   144→        onClick={onMenuClick}
   145→        className="p-2 hover:bg-neutral-800 rounded-lg transition-colors"
   146→      >
   147→        <Menu size={20} className="text-neutral-400" />
   148→      </button>
   149→      <div className="flex items-center gap-2">
   150→        {currentTab?.icon}
   151→        <span className="font-medium text-white">{currentTab?.label}</span>
   152→      </div>
   153→      <div className="flex items-center gap-2">
   154→        <span className="text-sm text-neutral-400">{overallScore.toFixed(1)}</span>
   155→        <div className="w-6 h-6 rounded-full bg-cyan-500/20 flex items-center justify-center">
   156→          <span className="text-xs text-cyan-400 font-bold">{Math.round(overallScore)}</span>
   157→        </div>
   158→      </div>
   159→    </header>
   160→  );
   161→}
   162→
   163→// ============================================
   164→// MAIN LAYOUT
   165→// ============================================
   166→
   167→interface ResultsLayoutProps {
   168→  children: React.ReactNode;
   169→}
   170→
   171→export function ResultsLayout({ children }: ResultsLayoutProps) {
   172→  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
   173→
   174→  return (
   175→    <div className="flex min-h-screen bg-black">
   176→      {/* Desktop Sidebar */}
   177→      <aside className="hidden md:flex md:w-[280px] md:flex-col md:fixed md:inset-y-0 z-40">
   178→        <Sidebar />
   179→      </aside>
   180→
   181→      {/* Mobile Menu Overlay */}
   182→      <AnimatePresence>
   183→        {mobileMenuOpen && (
   184→          <>
   185→            <motion.div
   186→              initial={{ opacity: 0 }}
   187→              animate={{ opacity: 1 }}
   188→              exit={{ opacity: 0 }}
   189→              onClick={() => setMobileMenuOpen(false)}
   190→              className="fixed inset-0 bg-black/60 z-40 md:hidden"
   191→            />
   192→            <motion.aside
   193→              initial={{ x: -280 }}
   194→              animate={{ x: 0 }}
   195→              exit={{ x: -280 }}
   196→              transition={{ type: 'spring', damping: 25, stiffness: 200 }}
   197→              className="fixed inset-y-0 left-0 w-[280px] z-50 md:hidden"
   198→            >
   199→              <Sidebar onClose={() => setMobileMenuOpen(false)} />
   200→            </motion.aside>
   201→          </>
   202→        )}
   203→      </AnimatePresence>
   204→
   205→      {/* Main Content */}
   206→      <div className="flex-1 md:pl-[280px] flex flex-col min-h-screen">
   207→        {/* Mobile Header */}
   208→        <div className="md:hidden">
   209→          <MobileHeader onMenuClick={() => setMobileMenuOpen(true)} />
   210→        </div>
   211→
   212→        {/* Content Area - no overflow so sticky works */}
   213→        <main className="flex-1">
   214→          <AnimatePresence mode="wait">
   215→            <motion.div
   216→              key={useResults().activeTab}
   217→              initial={{ opacity: 0, y: 10 }}
   218→              animate={{ opacity: 1, y: 0 }}
   219→              exit={{ opacity: 0, y: -10 }}
   220→              transition={{ duration: 0.2 }}
   221→            >
   222→              {children}
   223→            </motion.div>
   224→          </AnimatePresence>
   225→        </main>
   226→      </div>
   227→    </div>
   228→  );
   229→}
   230→
   231→// ============================================
   232→// TAB CONTENT WRAPPER
   233→// ============================================
   234→
   235→interface TabContentProps {
   236→  title: string;
   237→  subtitle?: string;
   238→  children: React.ReactNode;
   239→  rightContent?: React.ReactNode;
   240→}
   241→
   242→export function TabContent({ title, subtitle, children, rightContent }: TabContentProps) {
   243→  return (
   244→    <div className="p-4 md:p-6 lg:p-8 max-w-7xl mx-auto">
   245→      {/* Header */}
   246→      <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
   247→        <div>
   248→          <h1 className="text-2xl md:text-3xl font-bold text-white">{title}</h1>
   249→          {subtitle && (
   250→            <p className="text-neutral-400 mt-1">{subtitle}</p>
   251→          )}
   252→        </div>
   253→        {rightContent && (
   254→          <div className="mt-4 md:mt-0">{rightContent}</div>
   255→        )}
   256→      </div>
   257→
   258→      {/* Content */}
   259→      {children}
   260→    </div>
   261→  );
   262→}
   263→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
