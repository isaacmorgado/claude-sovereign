     1→'use client';
     2→
     3→import React, { createContext, useContext, useState, useMemo, useCallback, ReactNode } from 'react';
     4→import { LandmarkPoint } from '@/lib/landmarks';
     5→import {
     6→  analyzeFrontProfile,
     7→  analyzeSideProfile,
     8→  analyzeHarmony,
     9→  HarmonyAnalysis,
    10→  FaceIQScoreResult,
    11→  FACEIQ_METRICS,
    12→  Ethnicity,
    13→  Gender,
    14→} from '@/lib/faceiq-scoring';
    15→import {
    16→  calculateHarmonyScore,
    17→  getTopMetrics,
    18→  getBottomMetrics,
    19→  HarmonyScoreResult,
    20→  RankedMetric,
    21→} from '@/lib/looksmax-scoring';
    22→import {
    23→  classifyInsights,
    24→  convertToStrength,
    25→  convertToFlaw,
    26→  INSIGHTS_DEFINITIONS,
    27→} from '@/lib/insights-engine';
    28→import {
    29→  Ratio,
    30→  Strength,
    31→  Flaw,
    32→  Recommendation,
    33→  ResultsTab,
    34→  FullHarmonyAnalysis,
    35→} from '@/types/results';
    36→
    37→// ============================================
    38→// CONTEXT TYPES
    39→// ============================================
    40→
    41→interface ResultsContextType {
    42→  // Raw data
    43→  frontLandmarks: LandmarkPoint[];
    44→  sideLandmarks: LandmarkPoint[];
    45→  gender: Gender;
    46→  ethnicity: Ethnicity;
    47→  frontPhoto: string;
    48→  sidePhoto: string | null;
    49→
    50→  // Computed results
    51→  harmonyAnalysis: FullHarmonyAnalysis | null;
    52→  frontRatios: Ratio[];
    53→  sideRatios: Ratio[];
    54→  strengths: Strength[];
    55→  flaws: Flaw[];
    56→  recommendations: Recommendation[];
    57→
    58→  // Scores (now using weighted harmony from looksmax_engine.py)
    59→  overallScore: number;
    60→  frontScore: number;
    61→  sideScore: number;
    62→
    63→  // Weighted Harmony Score (from looksmax_engine.py)
    64→  harmonyScoreResult: HarmonyScoreResult | null;
    65→  harmonyPercentage: number;  // 0-100% weighted harmony
    66→
    67→  // Top 3 strengths and bottom 3 areas to improve with advice
    68→  topMetrics: RankedMetric[];
    69→  bottomMetrics: RankedMetric[];
    70→
    71→  // UI state
    72→  activeTab: ResultsTab;
    73→  setActiveTab: (tab: ResultsTab) => void;
    74→  expandedMeasurementId: string | null;
    75→  setExpandedMeasurementId: (id: string | null) => void;
    76→  selectedVisualizationMetric: string | null;
    77→  setSelectedVisualizationMetric: (id: string | null) => void;
    78→  categoryFilter: string | null;
    79→  setCategoryFilter: (category: string | null) => void;
    80→  showLandmarkOverlay: boolean;
    81→  setShowLandmarkOverlay: (show: boolean) => void;
    82→
    83→  // Actions
    84→  setResultsData: (data: ResultsInputData) => void;
    85→}
    86→
    87→interface ResultsInputData {
    88→  frontLandmarks: LandmarkPoint[];
    89→  sideLandmarks: LandmarkPoint[];
    90→  frontPhoto: string;
    91→  sidePhoto?: string;
    92→  gender: Gender;
    93→  ethnicity?: Ethnicity;
    94→}
    95→
    96→// ============================================
    97→// HELPER FUNCTIONS
    98→// ============================================
    99→
   100→function convertUnitToRatioUnit(unit: string): 'x' | 'mm' | '%' | '°' {
   101→  switch (unit) {
   102→    case 'ratio': return 'x';
   103→    case 'percent': return '%';
   104→    case 'degrees': return '°';
   105→    case 'mm': return 'mm';
   106→    default: return 'x';
   107→  }
   108→}
   109→
   110→function transformToRatio(result: FaceIQScoreResult, landmarks: LandmarkPoint[]): Ratio {
   111→  const metricConfig = FACEIQ_METRICS[result.metricId];
   112→
   113→  // Generate illustration based on metric
   114→  const illustration = generateIllustration(result.metricId, landmarks);
   115→
   116→  // Get flaw/strength mappings
   117→  const { mayIndicateFlaws, mayIndicateStrengths } = getFlawStrengthMappings(result);
   118→
   119→  return {
   120→    id: result.metricId,
   121→    name: result.name,
   122→    value: result.value,
   123→    score: result.score,
   124→    standardizedScore: result.standardizedScore,
   125→    unit: convertUnitToRatioUnit(result.unit),
   126→    idealMin: result.idealMin,
   127→    idealMax: result.idealMax,
   128→    rangeMin: metricConfig?.rangeMin || result.idealMin - 0.5,
   129→    rangeMax: metricConfig?.rangeMax || result.idealMax + 0.5,
   130→    description: metricConfig?.description || '',
   131→    category: result.category,
   132→    qualityLevel: result.qualityTier,
   133→    severity: result.severity,
   134→    illustration,
   135→    mayIndicateFlaws,
   136→    mayIndicateStrengths,
   137→    usedLandmarks: getUsedLandmarks(result.metricId),
   138→    scoringCurveConfig: metricConfig ? {
   139→      decayRate: metricConfig.decayRate,
   140→      maxScore: metricConfig.maxScore,
   141→    } : undefined,
   142→  };
   143→}
   144→
   145→// Enhanced illustration configuration type
   146→interface IllustrationConfig {
   147→  points: string[];
   148→  lines: Array<{
   149→    from: string;
   150→    to: string;
   151→    label?: string;
   152→    color?: string;
   153→    labelPosition?: 'start' | 'middle' | 'end';  // Matches IllustrationLine type
   154→  }>;
   155→}
   156→
   157→// Comprehensive illustration configurations for all metrics
   158→const ILLUSTRATION_CONFIGS: Record<string, IllustrationConfig> = {
   159→  // ==========================================
   160→  // FACE SHAPE / PROPORTIONS
   161→  // ==========================================
   162→  faceWidthToHeight: {
   163→    points: ['left_zygion', 'right_zygion', 'trichion', 'menton'],
   164→    lines: [
   165→      { from: 'left_zygion', to: 'right_zygion', label: 'Width', color: '#67e8f9', labelPosition: 'middle' },
   166→      { from: 'trichion', to: 'menton', label: 'Height', color: '#a78bfa', labelPosition: 'end' },
   167→    ],
   168→  },
   169→  totalFacialWidthToHeight: {
   170→    points: ['left_zygion', 'right_zygion', 'trichion', 'menton'],
   171→    lines: [
   172→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheek Width', color: '#67e8f9' },
   173→      { from: 'trichion', to: 'menton', label: 'Total Height', color: '#a78bfa' },
   174→    ],
   175→  },
   176→  lowerThirdProportion: {
   177→    points: ['subnasale', 'menton', 'trichion'],
   178→    lines: [
   179→      { from: 'subnasale', to: 'menton', label: 'Lower Third', color: '#f97316', labelPosition: 'end' },
   180→      { from: 'trichion', to: 'menton', label: 'Full Height', color: '#67e8f9', labelPosition: 'start' },
   181→    ],
   182→  },
   183→  middleThirdProportion: {
   184→    points: ['nasal_base', 'subnasale', 'trichion', 'menton'],
   185→    lines: [
   186→      { from: 'nasal_base', to: 'subnasale', label: 'Middle Third', color: '#22c55e', labelPosition: 'end' },
   187→      { from: 'trichion', to: 'menton', label: 'Full Height', color: '#67e8f9', labelPosition: 'start' },
   188→    ],
   189→  },
   190→  upperThirdProportion: {
   191→    points: ['trichion', 'nasal_base', 'menton'],
   192→    lines: [
   193→      { from: 'trichion', to: 'nasal_base', label: 'Upper Third', color: '#fbbf24', labelPosition: 'end' },
   194→      { from: 'trichion', to: 'menton', label: 'Full Height', color: '#67e8f9', labelPosition: 'start' },
   195→    ],
   196→  },
   197→  bitemporalWidth: {
   198→    points: ['left_temporal', 'right_temporal', 'left_zygion', 'right_zygion'],
   199→    lines: [
   200→      { from: 'left_temporal', to: 'right_temporal', label: 'Temple', color: '#fbbf24' },
   201→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheek', color: '#67e8f9' },
   202→    ],
   203→  },
   204→  cheekboneHeight: {
   205→    points: ['left_zygion', 'right_zygion', 'left_canthus_lateralis', 'right_canthus_lateralis', 'menton'],
   206→    lines: [
   207→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheekbone', color: '#ec4899' },
   208→      { from: 'left_canthus_lateralis', to: 'left_zygion', color: '#67e8f9' },
   209→    ],
   210→  },
   211→  midfaceRatio: {
   212→    points: ['left_zygion', 'right_zygion', 'left_canthus_medialis', 'right_canthus_medialis', 'subnasale'],
   213→    lines: [
   214→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Midface Width', color: '#67e8f9' },
   215→      { from: 'left_canthus_medialis', to: 'subnasale', label: 'Midface Height', color: '#a78bfa' },
   216→    ],
   217→  },
   218→
   219→  // ==========================================
   220→  // JAW MEASUREMENTS
   221→  // ==========================================
   222→  jawSlope: {
   223→    points: ['left_gonion_inferior', 'left_mentum_lateralis', 'menton', 'right_mentum_lateralis', 'right_gonion_inferior'],
   224→    lines: [
   225→      { from: 'left_gonion_inferior', to: 'left_mentum_lateralis', label: 'Jaw Slope', color: '#f97316' },
   226→      { from: 'right_gonion_inferior', to: 'right_mentum_lateralis', color: '#f97316' },
   227→    ],
   228→  },
   229→  jawFrontalAngle: {
   230→    points: ['left_gonion_inferior', 'menton', 'right_gonion_inferior'],
   231→    lines: [
   232→      { from: 'left_gonion_inferior', to: 'menton', label: 'Jaw Angle', color: '#f97316' },
   233→      { from: 'menton', to: 'right_gonion_inferior', color: '#f97316' },
   234→    ],
   235→  },
   236→  bigonialWidth: {
   237→    points: ['left_gonion_inferior', 'right_gonion_inferior', 'left_zygion', 'right_zygion'],
   238→    lines: [
   239→      { from: 'left_gonion_inferior', to: 'right_gonion_inferior', label: 'Jaw Width', color: '#f97316' },
   240→      { from: 'left_zygion', to: 'right_zygion', label: 'Cheek Width', color: '#67e8f9' },
   241→    ],
   242→  },
   243→  jawWidthRatio: {
   244→    points: ['left_gonion_inferior', 'right_gonion_inferior', 'left_zygion', 'right_zygion'],
   245→    lines: [
   246→      { from: 'left_gonion_inferior', to: 'right_gonion_inferior', label: 'Jaw', color: '#f97316' },
   247→      { from: 'left_zygion', to: 'right_zygion', label: 'Face', color: '#67e8f9' },
   248→    ],
   249→  },
   250→
   251→  // ==========================================
   252→  // EYE MEASUREMENTS
   253→  // ==========================================
   254→  lateralCanthalTilt: {
   255→    points: ['left_canthus_medialis', 'left_canthus_lateralis', 'right_canthus_medialis', 'right_canthus_lateralis'],
   256→    lines: [
   257→      { from: 'left_canthus_medialis', to: 'left_canthus_lateralis', label: 'Tilt', color: '#06b6d4', labelPosition: 'end' },
   258→      { from: 'right_canthus_medialis', to: 'right_canthus_lateralis', color: '#06b6d4' },
   259→    ],
   260→  },
   261→  eyeAspectRatio: {
   262→    points: ['left_canthus_medialis', 'left_canthus_lateralis', 'left_palpebra_superior', 'left_palpebra_inferior'],
   263→    lines: [
   264→      { from: 'left_canthus_medialis', to: 'left_canthus_lateralis', label: 'Width', color: '#06b6d4' },
   265→      { from: 'left_palpebra_superior', to: 'left_palpebra_inferior', label: 'Height', color: '#a78bfa' },
   266→    ],
   267→  },
   268→  eyeSeparationRatio: {
   269→    points: ['left_canthus_medialis', 'right_canthus_medialis', 'left_zygion', 'right_zygion'],
   270→    lines: [
   271→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Intercanthal', color: '#06b6d4' },
   272→      { from: 'left_zygion', to: 'right_zygion', label: 'Face Width', color: '#67e8f9' },
   273→    ],
   274→  },
   275→  interpupillaryRatio: {
   276→    points: ['left_pupila', 'right_pupila', 'left_zygion', 'right_zygion'],
   277→    lines: [
   278→      { from: 'left_pupila', to: 'right_pupila', label: 'IPD', color: '#06b6d4' },
   279→      { from: 'left_zygion', to: 'right_zygion', label: 'Face Width', color: '#67e8f9' },
   280→    ],
   281→  },
   282→  interpupillaryMouthWidthRatio: {
   283→    points: ['left_pupila', 'right_pupila', 'left_cheilion', 'right_cheilion'],
   284→    lines: [
   285→      { from: 'left_pupila', to: 'right_pupila', label: 'IPD', color: '#06b6d4' },
   286→      { from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth', color: '#ec4899' },
   287→    ],
   288→  },
   289→  oneEyeApartTest: {
   290→    points: ['left_canthus_medialis', 'right_canthus_medialis', 'left_canthus_lateralis'],
   291→    lines: [
   292→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Between Eyes', color: '#06b6d4' },
   293→      { from: 'left_canthus_medialis', to: 'left_canthus_lateralis', label: 'Eye Width', color: '#a78bfa' },
   294→    ],
   295→  },
   296→
   297→  // ==========================================
   298→  // EYEBROW MEASUREMENTS
   299→  // ==========================================
   300→  browLengthRatio: {
   301→    points: ['left_supercilium_medialis', 'left_supercilium_lateralis', 'left_zygion', 'right_zygion'],
   302→    lines: [
   303→      { from: 'left_supercilium_medialis', to: 'left_supercilium_lateralis', label: 'Brow', color: '#84cc16' },
   304→      { from: 'left_zygion', to: 'right_zygion', label: 'Face Width', color: '#67e8f9' },
   305→    ],
   306→  },
   307→  eyebrowTilt: {
   308→    points: ['left_supercilium_medialis', 'left_supercilium_apex', 'left_supercilium_lateralis'],
   309→    lines: [
   310→      { from: 'left_supercilium_medialis', to: 'left_supercilium_apex', label: 'Tilt', color: '#84cc16' },
   311→      { from: 'left_supercilium_apex', to: 'left_supercilium_lateralis', color: '#84cc16' },
   312→    ],
   313→  },
   314→  eyebrowLowSetedness: {
   315→    points: ['left_supercilium_medialis', 'left_palpebra_superior', 'left_canthus_medialis'],
   316→    lines: [
   317→      { from: 'left_supercilium_medialis', to: 'left_palpebra_superior', label: 'Brow-Eye Gap', color: '#84cc16' },
   318→    ],
   319→  },
   320→
   321→  // ==========================================
   322→  // NOSE MEASUREMENTS (FRONT)
   323→  // ==========================================
   324→  nasalIndex: {
   325→    points: ['left_ala_nasi', 'right_ala_nasi', 'nasal_base', 'subnasale'],
   326→    lines: [
   327→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Width', color: '#fbbf24' },
   328→      { from: 'nasal_base', to: 'subnasale', label: 'Height', color: '#a78bfa' },
   329→    ],
   330→  },
   331→  intercanthalNasalRatio: {
   332→    points: ['left_ala_nasi', 'right_ala_nasi', 'left_canthus_medialis', 'right_canthus_medialis'],
   333→    lines: [
   334→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Nose Width', color: '#fbbf24' },
   335→      { from: 'left_canthus_medialis', to: 'right_canthus_medialis', label: 'Intercanthal', color: '#06b6d4' },
   336→    ],
   337→  },
   338→  noseBridgeWidth: {
   339→    points: ['left_dorsum_nasi', 'right_dorsum_nasi', 'left_ala_nasi', 'right_ala_nasi'],
   340→    lines: [
   341→      { from: 'left_dorsum_nasi', to: 'right_dorsum_nasi', label: 'Bridge', color: '#fbbf24' },
   342→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Base', color: '#f97316' },
   343→    ],
   344→  },
   345→  noseTipPosition: {
   346→    points: ['subnasale', 'left_ala_nasi', 'right_ala_nasi'],
   347→    lines: [
   348→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Tip Position', color: '#fbbf24' },
   349→    ],
   350→  },
   351→
   352→  // ==========================================
   353→  // MOUTH/LIP MEASUREMENTS
   354→  // ==========================================
   355→  mouthNoseWidthRatio: {
   356→    points: ['left_cheilion', 'right_cheilion', 'left_ala_nasi', 'right_ala_nasi'],
   357→    lines: [
   358→      { from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth', color: '#ec4899' },
   359→      { from: 'left_ala_nasi', to: 'right_ala_nasi', label: 'Nose', color: '#fbbf24' },
   360→    ],
   361→  },
   362→  lowerUpperLipRatio: {
   363→    points: ['labrale_superius', 'mouth_middle', 'labrale_inferius'],
   364→    lines: [
   365→      { from: 'labrale_superius', to: 'mouth_middle', label: 'Upper', color: '#ec4899' },
   366→      { from: 'mouth_middle', to: 'labrale_inferius', label: 'Lower', color: '#f97316' },
   367→    ],
   368→  },
   369→  chinPhiltrumRatio: {
   370→    points: ['subnasale', 'labrale_superius', 'labrale_inferius', 'menton'],
   371→    lines: [
   372→      { from: 'subnasale', to: 'labrale_superius', label: 'Philtrum', color: '#ec4899' },
   373→      { from: 'labrale_inferius', to: 'menton', label: 'Chin', color: '#ef4444' },
   374→    ],
   375→  },
   376→  mouthWidth: {
   377→    points: ['left_cheilion', 'right_cheilion'],
   378→    lines: [{ from: 'left_cheilion', to: 'right_cheilion', label: 'Mouth Width', color: '#ec4899' }],
   379→  },
   380→
   381→  // ==========================================
   382→  // CHIN MEASUREMENTS
   383→  // ==========================================
   384→  chinHeight: {
   385→    points: ['labrale_inferius', 'menton'],
   386→    lines: [{ from: 'labrale_inferius', to: 'menton', label: 'Chin Height', color: '#ef4444' }],
   387→  },
   388→
   389→  // ==========================================
   390→  // NECK MEASUREMENTS
   391→  // ==========================================
   392→  neckWidthRatio: {
   393→    points: ['left_cervical_lateralis', 'right_cervical_lateralis', 'left_gonion_inferior', 'right_gonion_inferior'],
   394→    lines: [
   395→      { from: 'left_cervical_lateralis', to: 'right_cervical_lateralis', label: 'Neck', color: '#14b8a6' },
   396→      { from: 'left_gonion_inferior', to: 'right_gonion_inferior', label: 'Jaw', color: '#f97316' },
   397→    ],
   398→  },
   399→
   400→  // ==========================================
   401→  // SIDE PROFILE MEASUREMENTS
   402→  // ==========================================
   403→  gonialAngle: {
   404→    points: ['tragus', 'gonionBottom', 'menton'],
   405→    lines: [
   406→      { from: 'tragus', to: 'gonionBottom', label: 'Ramus', color: '#f97316' },
   407→      { from: 'gonionBottom', to: 'menton', label: 'Mandible', color: '#ef4444' },
   408→    ],
   409→  },
   410→  nasofrontalAngle: {
   411→    points: ['glabella', 'nasion', 'pronasale'],
   412→    lines: [
   413→      { from: 'glabella', to: 'nasion', label: 'Forehead', color: '#84cc16' },
   414→      { from: 'nasion', to: 'pronasale', label: 'Nose', color: '#fbbf24' },
   415→    ],
   416→  },
   417→  nasofacialAngle: {
   418→    points: ['nasion', 'pronasale', 'pogonion'],
   419→    lines: [
   420→      { from: 'nasion', to: 'pronasale', color: '#fbbf24' },
   421→      { from: 'pronasale', to: 'pogonion', color: '#67e8f9' },
   422→    ],
   423→  },
   424→  nasomentaAngle: {
   425→    points: ['nasion', 'pronasale', 'pogonion'],
   426→    lines: [
   427→      { from: 'nasion', to: 'pronasale', label: 'Nose', color: '#fbbf24' },
   428→      { from: 'pronasale', to: 'pogonion', label: 'To Chin', color: '#ef4444' },
   429→    ],
   430→  },
   431→  submentalCervicalAngle: {
   432→    points: ['menton', 'cervicalPoint', 'neckPoint'],
   433→    lines: [
   434→      { from: 'menton', to: 'cervicalPoint', label: 'Submental', color: '#14b8a6' },
   435→      { from: 'cervicalPoint', to: 'neckPoint', label: 'Cervical', color: '#06b6d4' },
   436→    ],
   437→  },
   438→  facialDepthToHeight: {
   439→    points: ['pronasale', 'tragus', 'nasion', 'menton'],
   440→    lines: [
   441→      { from: 'pronasale', to: 'tragus', label: 'Depth', color: '#67e8f9' },
   442→      { from: 'nasion', to: 'menton', label: 'Height', color: '#a78bfa' },
   443→    ],
   444→  },
   445→  anteriorFacialDepth: {
   446→    points: ['glabella', 'pronasale', 'pogonion'],
   447→    lines: [
   448→      { from: 'glabella', to: 'pronasale', color: '#67e8f9' },
   449→      { from: 'pronasale', to: 'pogonion', color: '#a78bfa' },
   450→    ],
   451→  },
   452→  mandibularPlaneAngle: {
   453→    points: ['gonionBottom', 'menton', 'orbitale', 'porion'],
   454→    lines: [
   455→      { from: 'gonionBottom', to: 'menton', label: 'Mandibular', color: '#f97316' },
   456→      { from: 'orbitale', to: 'porion', label: 'Frankfort', color: '#67e8f9' },
   457→    ],
   458→  },
   459→  ramusToMandibleRatio: {
   460→    points: ['gonionTop', 'gonionBottom', 'menton'],
   461→    lines: [
   462→      { from: 'gonionTop', to: 'gonionBottom', label: 'Ramus', color: '#f97316' },
   463→      { from: 'gonionBottom', to: 'menton', label: 'Mandible', color: '#ef4444' },
   464→    ],
   465→  },
   466→  orbitalVector: {
   467→    points: ['cornealApex', 'orbitale', 'cheekbone'],
   468→    lines: [
   469→      { from: 'cornealApex', to: 'cheekbone', label: 'Orbital Vector', color: '#06b6d4' },
   470→    ],
   471→  },
   472→  eLineLowerLip: {
   473→    points: ['pronasale', 'pogonion', 'labraleInferius'],
   474→    lines: [
   475→      { from: 'pronasale', to: 'pogonion', label: 'E-Line', color: '#67e8f9' },
   476→    ],
   477→  },
   478→  sLineLowerLip: {
   479→    points: ['pronasale', 'pogonion', 'labraleInferius'],
   480→    lines: [
   481→      { from: 'pronasale', to: 'pogonion', label: 'S-Line', color: '#a78bfa' },
   482→    ],
   483→  },
   484→  holdawayHLine: {
   485→    points: ['pronasale', 'pogonion', 'labraleSuperius', 'labraleInferius'],
   486→    lines: [
   487→      { from: 'pronasale', to: 'pogonion', label: 'H-Line', color: '#ec4899' },
   488→    ],
   489→  },
   490→  burstoneLowerLip: {
   491→    points: ['subnasale', 'pogonion', 'labraleInferius'],
   492→    lines: [
   493→      { from: 'subnasale', to: 'pogonion', label: 'Burstone', color: '#fbbf24' },
   494→    ],
   495→  },
   496→
   497→  // ==========================================
   498→  // ADDITIONAL FRONT PROFILE METRICS
   499→  // ==========================================
   500→  cupidsBowDepth: {

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
