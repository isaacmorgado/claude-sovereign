{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","type":"user","message":{"role":"user","content":"Find the SIDE_PROFILE_LANDMARKS or SIDE_LANDMARKS definition in the codebase and list all 31 side profile landmark IDs. Also find the getLandmarkImagePath function to understand how image paths are constructed for side profile landmarks."},"uuid":"35bae959-6f9b-428a-b05b-a256bb07b81a","timestamp":"2025-12-19T22:00:40.193Z"}
{"parentUuid":"35bae959-6f9b-428a-b05b-a256bb07b81a","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01E9x4TTiRGGSF3P34Z8Kbbp","type":"message","role":"assistant","content":[{"type":"text","text":"I'll search for the SIDE_PROFILE_LANDMARKS or SIDE_LANDMARKS definition and the getLandmarkImagePath function."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":1160,"cache_read_input_tokens":11028,"cache_creation":{"ephemeral_5m_input_tokens":1160,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWGoFPNM2qepe2QUoj5WM","type":"assistant","uuid":"16be1468-59d8-4d51-9042-68725d17487d","timestamp":"2025-12-19T22:00:41.460Z"}
{"parentUuid":"16be1468-59d8-4d51-9042-68725d17487d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01E9x4TTiRGGSF3P34Z8Kbbp","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01FTnnnGqKoCQCjv9WpZaRpn","name":"Grep","input":{"pattern":"SIDE_PROFILE_LANDMARKS|SIDE_LANDMARKS"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":1160,"cache_read_input_tokens":11028,"cache_creation":{"ephemeral_5m_input_tokens":1160,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWGoFPNM2qepe2QUoj5WM","type":"assistant","uuid":"efc2b7c4-c926-4cf1-abb1-586cc526ebe1","timestamp":"2025-12-19T22:00:41.674Z"}
{"parentUuid":"efc2b7c4-c926-4cf1-abb1-586cc526ebe1","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01E9x4TTiRGGSF3P34Z8Kbbp","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0173Kpp3TbmH6xedjjTF5CvJ","name":"Grep","input":{"pattern":"getLandmarkImagePath"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":1160,"cache_read_input_tokens":11028,"cache_creation":{"ephemeral_5m_input_tokens":1160,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWGoFPNM2qepe2QUoj5WM","type":"assistant","uuid":"14c33140-dc16-4912-9eaa-7473e0d986cd","timestamp":"2025-12-19T22:00:41.789Z"}
{"parentUuid":"14c33140-dc16-4912-9eaa-7473e0d986cd","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01FTnnnGqKoCQCjv9WpZaRpn","type":"tool_result","content":"Found 6 files\nsrc/components/LandmarkAnalysisTool.tsx\npublic/landmark-mapper.html\nsrc/lib/mediapipeDetection.ts\nsrc/hooks/useAutoDetection.ts\nsrc/lib/landmarks.ts\nsrc/components/SideProfileManualTool.tsx"}]},"uuid":"ecca102e-323d-4322-a0c0-28e23a3d06f4","timestamp":"2025-12-19T22:00:42.318Z","toolUseResult":{"mode":"files_with_matches","filenames":["src/components/LandmarkAnalysisTool.tsx","public/landmark-mapper.html","src/lib/mediapipeDetection.ts","src/hooks/useAutoDetection.ts","src/lib/landmarks.ts","src/components/SideProfileManualTool.tsx"],"numFiles":6}}
{"parentUuid":"ecca102e-323d-4322-a0c0-28e23a3d06f4","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0173Kpp3TbmH6xedjjTF5CvJ","type":"tool_result","content":"Found 3 files\nsrc/components/GuidedLandmarkPlacement.tsx\nsrc/components/LandmarkAnalysisTool.tsx\nsrc/lib/landmarkImages.ts"}]},"uuid":"5b750dd4-4e26-4d16-b7de-8fb9d4622a70","timestamp":"2025-12-19T22:00:42.413Z","toolUseResult":{"mode":"files_with_matches","filenames":["src/components/GuidedLandmarkPlacement.tsx","src/components/LandmarkAnalysisTool.tsx","src/lib/landmarkImages.ts"],"numFiles":3}}
{"parentUuid":"5b750dd4-4e26-4d16-b7de-8fb9d4622a70","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01XHZ1Tq8WtNZ8ube55ZWiQS","type":"message","role":"assistant","content":[{"type":"text","text":"Let me read these files to find the definitions and understand the structure."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":344,"cache_read_input_tokens":12188,"cache_creation":{"ephemeral_5m_input_tokens":344,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWGoFYntC9Q6DLXwP4cHS","type":"assistant","uuid":"12a7c28f-99bb-4989-bdf2-5e08ba786d19","timestamp":"2025-12-19T22:00:43.951Z"}
{"parentUuid":"12a7c28f-99bb-4989-bdf2-5e08ba786d19","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01XHZ1Tq8WtNZ8ube55ZWiQS","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_018aarhL2cM69vAuKTnzmrtc","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarks.ts"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":344,"cache_read_input_tokens":12188,"cache_creation":{"ephemeral_5m_input_tokens":344,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWGoFYntC9Q6DLXwP4cHS","type":"assistant","uuid":"8232abb7-e8b3-42eb-b87a-233a790d8963","timestamp":"2025-12-19T22:00:44.283Z"}
{"parentUuid":"8232abb7-e8b3-42eb-b87a-233a790d8963","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01XHZ1Tq8WtNZ8ube55ZWiQS","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QRPkvF9MiwLPuBvM5MuRGz","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarkImages.ts"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":344,"cache_read_input_tokens":12188,"cache_creation":{"ephemeral_5m_input_tokens":344,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWGoFYntC9Q6DLXwP4cHS","type":"assistant","uuid":"0e7e924f-8de2-46e1-acba-aa8d8bcae760","timestamp":"2025-12-19T22:00:44.686Z"}
{"parentUuid":"0e7e924f-8de2-46e1-acba-aa8d8bcae760","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01XHZ1Tq8WtNZ8ube55ZWiQS","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0117Gs5ibN8zX7mJdZvsJ9dz","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/SideProfileManualTool.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":344,"cache_read_input_tokens":12188,"cache_creation":{"ephemeral_5m_input_tokens":344,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWGoFYntC9Q6DLXwP4cHS","type":"assistant","uuid":"a7464bf8-362c-4d80-ae5b-ba78053ca63d","timestamp":"2025-12-19T22:00:44.767Z"}
{"parentUuid":"a7464bf8-362c-4d80-ae5b-ba78053ca63d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QRPkvF9MiwLPuBvM5MuRGz","type":"tool_result","content":"     1→/**\n     2→ * Mapping of landmark IDs to reference image names\n     3→ * Images are stored locally in /public/landmarks/front/ and /public/landmarks/side/\n     4→ *\n     5→ * Two image types available per landmark:\n     6→ * - male_white_*.webp: Photo reference showing landmark on a face\n     7→ * - infographic_*.webp: Diagram/infographic showing landmark placement\n     8→ */\n     9→\n    10→export interface LandmarkImageConfig {\n    11→  imageName: string;\n    12→  fallbackDescription: string;\n    13→}\n    14→\n    15→// Front profile landmark images (52 landmarks)\n    16→export const FRONT_LANDMARK_IMAGES: Record<string, LandmarkImageConfig> = {\n    17→  // Head\n    18→  trichion: {\n    19→    imageName: 'hairline',\n    20→    fallbackDescription: 'Place at the center of your hairline where it meets your forehead',\n    21→  },\n    22→\n    23→  // Eyes - Left\n    24→  left_pupila: {\n    25→    imageName: 'leftEyePupil',\n    26→    fallbackDescription: 'Place at the exact center of your left pupil',\n    27→  },\n    28→  left_canthus_medialis: {\n    29→    imageName: 'leftEyeMedialCanthus',\n    30→    fallbackDescription: 'Place at the inner corner where your left eyelids meet',\n    31→  },\n    32→  left_canthus_lateralis: {\n    33→    imageName: 'leftEyeLateralCanthus',\n    34→    fallbackDescription: 'Place at the outer corner where your left eyelids meet',\n    35→  },\n    36→  left_palpebra_superior: {\n    37→    imageName: 'leftEyeUpperEyelid',\n    38→    fallbackDescription: 'Place at the center of your left upper eyelid margin',\n    39→  },\n    40→  left_palpebra_inferior: {\n    41→    imageName: 'leftEyeLowerEyelid',\n    42→    fallbackDescription: 'Place at the center of your left lower eyelid margin',\n    43→  },\n    44→  left_sulcus_palpebralis_lateralis: {\n    45→    imageName: 'leftEyelidHoodEnd',\n    46→    fallbackDescription: 'Place where your left upper eyelid crease ends laterally',\n    47→  },\n    48→  left_pretarsal_skin_crease: {\n    49→    imageName: 'leftUpperEyelidCrease',\n    50→    fallbackDescription: 'Place at the center of your left upper eyelid crease',\n    51→  },\n    52→\n    53→  // Eyes - Right\n    54→  right_pupila: {\n    55→    imageName: 'rightEyePupil',\n    56→    fallbackDescription: 'Place at the exact center of your right pupil',\n    57→  },\n    58→  right_canthus_medialis: {\n    59→    imageName: 'rightEyeMedialCanthus',\n    60→    fallbackDescription: 'Place at the inner corner where your right eyelids meet',\n    61→  },\n    62→  right_canthus_lateralis: {\n    63→    imageName: 'rightEyeLateralCanthus',\n    64→    fallbackDescription: 'Place at the outer corner where your right eyelids meet',\n    65→  },\n    66→  right_palpebra_superior: {\n    67→    imageName: 'rightEyeUpperEyelid',\n    68→    fallbackDescription: 'Place at the center of your right upper eyelid margin',\n    69→  },\n    70→  right_palpebra_inferior: {\n    71→    imageName: 'rightEyeLowerEyelid',\n    72→    fallbackDescription: 'Place at the center of your right lower eyelid margin',\n    73→  },\n    74→  right_sulcus_palpebralis_lateralis: {\n    75→    imageName: 'rightEyelidHoodEnd',\n    76→    fallbackDescription: 'Place where your right upper eyelid crease ends laterally',\n    77→  },\n    78→  right_pretarsal_skin_crease: {\n    79→    imageName: 'rightUpperEyelidCrease',\n    80→    fallbackDescription: 'Place at the center of your right upper eyelid crease',\n    81→  },\n    82→\n    83→  // Eyebrows - Left\n    84→  left_supercilium_medialis: {\n    85→    imageName: 'leftBrowHead',\n    86→    fallbackDescription: 'Place at the innermost point where your left eyebrow starts',\n    87→  },\n    88→  left_supercilium_medial_corner: {\n    89→    imageName: 'leftBrowInnerCorner',\n    90→    fallbackDescription: 'Place at the inner corner of your left eyebrow',\n    91→  },\n    92→  left_supercilium_superior: {\n    93→    imageName: 'leftBrowArch',\n    94→    fallbackDescription: 'Place at the highest point of your left eyebrow arch',\n    95→  },\n    96→  left_supercilium_apex: {\n    97→    imageName: 'leftBrowPeak',\n    98→    fallbackDescription: 'Place at the peak of your left eyebrow curve',\n    99→  },\n   100→  left_supercilium_lateralis: {\n   101→    imageName: 'leftBrowTail',\n   102→    fallbackDescription: 'Place at the outer end of your left eyebrow',\n   103→  },\n   104→\n   105→  // Eyebrows - Right\n   106→  right_supercilium_medialis: {\n   107→    imageName: 'rightBrowHead',\n   108→    fallbackDescription: 'Place at the innermost point where your right eyebrow starts',\n   109→  },\n   110→  right_supercilium_medial_corner: {\n   111→    imageName: 'rightBrowInnerCorner',\n   112→    fallbackDescription: 'Place at the inner corner of your right eyebrow',\n   113→  },\n   114→  right_supercilium_superior: {\n   115→    imageName: 'rightBrowArch',\n   116→    fallbackDescription: 'Place at the highest point of your right eyebrow arch',\n   117→  },\n   118→  right_supercilium_apex: {\n   119→    imageName: 'rightBrowPeak',\n   120→    fallbackDescription: 'Place at the peak of your right eyebrow curve',\n   121→  },\n   122→  right_supercilium_lateralis: {\n   123→    imageName: 'rightBrowTail',\n   124→    fallbackDescription: 'Place at the outer end of your right eyebrow',\n   125→  },\n   126→\n   127→  // Nose\n   128→  nasal_base: {\n   129→    imageName: 'nasalBase',\n   130→    fallbackDescription: 'Place at the bridge of your nose between your eyes',\n   131→  },\n   132→  left_dorsum_nasi: {\n   133→    imageName: 'leftNoseBridge',\n   134→    fallbackDescription: 'Place on the left side of your nose bridge',\n   135→  },\n   136→  right_dorsum_nasi: {\n   137→    imageName: 'rightNoseBridge',\n   138→    fallbackDescription: 'Place on the right side of your nose bridge',\n   139→  },\n   140→  left_ala_nasi: {\n   141→    imageName: 'noseLeft',\n   142→    fallbackDescription: 'Place at the widest point of your left nostril',\n   143→  },\n   144→  right_ala_nasi: {\n   145→    imageName: 'noseRight',\n   146→    fallbackDescription: 'Place at the widest point of your right nostril',\n   147→  },\n   148→  subnasale: {\n   149→    imageName: 'noseBottom',\n   150→    fallbackDescription: 'Place at the base of your nose where it meets your upper lip',\n   151→  },\n   152→\n   153→  // Mouth\n   154→  labrale_superius: {\n   155→    imageName: 'cupidsBow',\n   156→    fallbackDescription: 'Place at the center peak of your upper lip',\n   157→  },\n   158→  cupids_bow: {\n   159→    imageName: 'innerCupidsBow',\n   160→    fallbackDescription: 'Place at the inner center of your Cupid\\'s bow',\n   161→  },\n   162→  mouth_middle: {\n   163→    imageName: 'mouthMiddle',\n   164→    fallbackDescription: 'Place at the center of your mouth opening',\n   165→  },\n   166→  labrale_inferius: {\n   167→    imageName: 'lowerLip',\n   168→    fallbackDescription: 'Place at the center of your lower lip border',\n   169→  },\n   170→  left_cheilion: {\n   171→    imageName: 'mouthLeft',\n   172→    fallbackDescription: 'Place at the left corner of your mouth',\n   173→  },\n   174→  right_cheilion: {\n   175→    imageName: 'mouthRight',\n   176→    fallbackDescription: 'Place at the right corner of your mouth',\n   177→  },\n   178→\n   179→  // Jaw\n   180→  left_gonion_superior: {\n   181→    imageName: 'leftTopGonion',\n   182→    fallbackDescription: 'Place at the upper angle of your left jaw',\n   183→  },\n   184→  right_gonion_superior: {\n   185→    imageName: 'rightTopGonion',\n   186→    fallbackDescription: 'Place at the upper angle of your right jaw',\n   187→  },\n   188→  left_gonion_inferior: {\n   189→    imageName: 'leftBottomGonion',\n   190→    fallbackDescription: 'Place at the lower angle of your left jaw',\n   191→  },\n   192→  right_gonion_inferior: {\n   193→    imageName: 'rightBottomGonion',\n   194→    fallbackDescription: 'Place at the lower angle of your right jaw',\n   195→  },\n   196→\n   197→  // Chin\n   198→  left_mentum_lateralis: {\n   199→    imageName: 'chinLeft',\n   200→    fallbackDescription: 'Place on the left side of your chin',\n   201→  },\n   202→  right_mentum_lateralis: {\n   203→    imageName: 'chinRight',\n   204→    fallbackDescription: 'Place on the right side of your chin',\n   205→  },\n   206→  menton: {\n   207→    imageName: 'chinBottom',\n   208→    fallbackDescription: 'Place at the lowest point of your chin',\n   209→  },\n   210→\n   211→  // Face Width\n   212→  left_zygion: {\n   213→    imageName: 'leftCheek',\n   214→    fallbackDescription: 'Place at the widest point of your left cheekbone',\n   215→  },\n   216→  right_zygion: {\n   217→    imageName: 'rightCheek',\n   218→    fallbackDescription: 'Place at the widest point of your right cheekbone',\n   219→  },\n   220→  left_temporal: {\n   221→    imageName: 'leftTemple',\n   222→    fallbackDescription: 'Place at your left temple',\n   223→  },\n   224→  right_temporal: {\n   225→    imageName: 'rightTemple',\n   226→    fallbackDescription: 'Place at your right temple',\n   227→  },\n   228→  left_auricular_lateral: {\n   229→    imageName: 'leftOuterEar',\n   230→    fallbackDescription: 'Place at the outermost point of your left ear',\n   231→  },\n   232→  right_auricular_lateral: {\n   233→    imageName: 'rightOuterEar',\n   234→    fallbackDescription: 'Place at the outermost point of your right ear',\n   235→  },\n   236→\n   237→  // Neck\n   238→  left_cervical_lateralis: {\n   239→    imageName: 'neckLeft',\n   240→    fallbackDescription: 'Place on the left side of your neck',\n   241→  },\n   242→  right_cervical_lateralis: {\n   243→    imageName: 'neckRight',\n   244→    fallbackDescription: 'Place on the right side of your neck',\n   245→  },\n   246→};\n   247→\n   248→// Side profile landmark images (31 landmarks)\n   249→export const SIDE_LANDMARK_IMAGES: Record<string, LandmarkImageConfig> = {\n   250→  // Skull/Head\n   251→  vertex: {\n   252→    imageName: 'vertex',\n   253→    fallbackDescription: 'Place at the highest point of your head',\n   254→  },\n   255→  external_occipital_region: {\n   256→    imageName: 'occiput',\n   257→    fallbackDescription: 'Place at the back of your head where it protrudes most',\n   258→  },\n   259→  trichion_profile: {\n   260→    imageName: 'trichion',\n   261→    fallbackDescription: 'Place at your hairline in profile view',\n   262→  },\n   263→  frontalis: {\n   264→    imageName: 'forehead',\n   265→    fallbackDescription: 'Place at the most prominent point of your forehead',\n   266→  },\n   267→\n   268→  // Upper Face\n   269→  glabella: {\n   270→    imageName: 'glabella',\n   271→    fallbackDescription: 'Place between your eyebrows at the brow ridge',\n   272→  },\n   273→  corneal_apex: {\n   274→    imageName: 'cornealApex',\n   275→    fallbackDescription: 'Place at the most forward point of your cornea',\n   276→  },\n   277→  lateral_eyelid: {\n   278→    imageName: 'eyelidEnd',\n   279→    fallbackDescription: 'Place at the lateral end of your eyelid',\n   280→  },\n   281→  lower_eyelid_profile: {\n   282→    imageName: 'lowerEyelid',\n   283→    fallbackDescription: 'Place at the lower eyelid margin',\n   284→  },\n   285→  zygoma_lateralis: {\n   286→    imageName: 'cheekbone',\n   287→    fallbackDescription: 'Place at the most prominent point of your cheekbone',\n   288→  },\n   289→\n   290→  // Nose\n   291→  nasion: {\n   292→    imageName: 'nasion',\n   293→    fallbackDescription: 'Place at the deepest point of your nasal bridge',\n   294→  },\n   295→  rhinion: {\n   296→    imageName: 'rhinion',\n   297→    fallbackDescription: 'Place at the junction of bone and cartilage on your nose bridge',\n   298→  },\n   299→  supratip: {\n   300→    imageName: 'supratip',\n   301→    fallbackDescription: 'Place just above your nose tip',\n   302→  },\n   303→  pronasale: {\n   304→    imageName: 'pronasale',\n   305→    fallbackDescription: 'Place at the most forward point of your nose tip',\n   306→  },\n   307→  infratip: {\n   308→    imageName: 'infratip',\n   309→    fallbackDescription: 'Place just below your nose tip',\n   310→  },\n   311→  columella: {\n   312→    imageName: 'columella',\n   313→    fallbackDescription: 'Place at the base of your columella (between nostrils)',\n   314→  },\n   315→  subnasale_profile: {\n   316→    imageName: 'subnasale',\n   317→    fallbackDescription: 'Place where your nose meets your upper lip',\n   318→  },\n   319→  subalare: {\n   320→    imageName: 'subalare',\n   321→    fallbackDescription: 'Place at the lower edge of your nostril',\n   322→  },\n   323→\n   324→  // Lips\n   325→  labrale_superius_profile: {\n   326→    imageName: 'labraleSuperius',\n   327→    fallbackDescription: 'Place at the most forward point of your upper lip',\n   328→  },\n   329→  labrale_inferius_profile: {\n   330→    imageName: 'labraleInferius',\n   331→    fallbackDescription: 'Place at the most forward point of your lower lip',\n   332→  },\n   333→  cheilion_profile: {\n   334→    imageName: 'cheilion',\n   335→    fallbackDescription: 'Place at the corner of your mouth',\n   336→  },\n   337→  sublabiale: {\n   338→    imageName: 'sublabiale',\n   339→    fallbackDescription: 'Place in the groove below your lower lip',\n   340→  },\n   341→\n   342→  // Jaw & Chin\n   343→  orbitale: {\n   344→    imageName: 'orbitale',\n   345→    fallbackDescription: 'Place at the lowest point of your eye socket',\n   346→  },\n   347→  gonion_superior_profile: {\n   348→    imageName: 'gonionTop',\n   349→    fallbackDescription: 'Place at the upper jaw angle',\n   350→  },\n   351→  gonion_inferior_profile: {\n   352→    imageName: 'gonionBottom',\n   353→    fallbackDescription: 'Place at the lower jaw angle',\n   354→  },\n   355→  pogonion: {\n   356→    imageName: 'pogonion',\n   357→    fallbackDescription: 'Place at the most forward point of your chin',\n   358→  },\n   359→  menton_profile: {\n   360→    imageName: 'menton',\n   361→    fallbackDescription: 'Place at the lowest point of your chin',\n   362→  },\n   363→\n   364→  // Ear\n   365→  porion: {\n   366→    imageName: 'porion',\n   367→    fallbackDescription: 'Place at the top of your ear canal opening',\n   368→  },\n   369→  tragus: {\n   370→    imageName: 'tragus',\n   371→    fallbackDescription: 'Place at the small flap covering your ear canal',\n   372→  },\n   373→  intertragic_notch: {\n   374→    imageName: 'intertragicNotch',\n   375→    fallbackDescription: 'Place at the notch between tragus and antitragus',\n   376→  },\n   377→\n   378→  // Neck\n   379→  cervical_point: {\n   380→    imageName: 'cervicalPoint',\n   381→    fallbackDescription: 'Place at the deepest point of your neck curve',\n   382→  },\n   383→  neckpoint: {\n   384→    imageName: 'neckPoint',\n   385→    fallbackDescription: 'Place at the neck reference point',\n   386→  },\n   387→};\n   388→\n   389→/**\n   390→ * Get the local image path for a landmark\n   391→ * @param landmarkId - The landmark ID\n   392→ * @param mode - 'front' or 'side' profile\n   393→ * @param type - 'photo' for face reference, 'infographic' for diagram\n   394→ * @returns Image path or null if not found\n   395→ */\n   396→export function getLandmarkImagePath(\n   397→  landmarkId: string,\n   398→  mode: 'front' | 'side',\n   399→  type: 'photo' | 'infographic' = 'photo'\n   400→): string | null {\n   401→  const mapping = mode === 'front' ? FRONT_LANDMARK_IMAGES : SIDE_LANDMARK_IMAGES;\n   402→  const config = mapping[landmarkId];\n   403→\n   404→  if (!config) {\n   405→    return null;\n   406→  }\n   407→\n   408→  const prefix = type === 'photo' ? 'male_white_' : 'infographic_';\n   409→  return `/landmarks/${mode}/${prefix}${config.imageName}.webp`;\n   410→}\n   411→\n   412→/**\n   413→ * Get fallback description for a landmark\n   414→ */\n   415→export function getLandmarkPlacementGuide(landmarkId: string, mode: 'front' | 'side'): string {\n   416→  const mapping = mode === 'front' ? FRONT_LANDMARK_IMAGES : SIDE_LANDMARK_IMAGES;\n   417→  const config = mapping[landmarkId];\n   418→  return config?.fallbackDescription || 'Place this landmark at the indicated position';\n   419→}\n   420→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"626dd3eb-7904-48b8-a218-e833402530fa","timestamp":"2025-12-19T22:00:44.895Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarkImages.ts","content":"/**\n * Mapping of landmark IDs to reference image names\n * Images are stored locally in /public/landmarks/front/ and /public/landmarks/side/\n *\n * Two image types available per landmark:\n * - male_white_*.webp: Photo reference showing landmark on a face\n * - infographic_*.webp: Diagram/infographic showing landmark placement\n */\n\nexport interface LandmarkImageConfig {\n  imageName: string;\n  fallbackDescription: string;\n}\n\n// Front profile landmark images (52 landmarks)\nexport const FRONT_LANDMARK_IMAGES: Record<string, LandmarkImageConfig> = {\n  // Head\n  trichion: {\n    imageName: 'hairline',\n    fallbackDescription: 'Place at the center of your hairline where it meets your forehead',\n  },\n\n  // Eyes - Left\n  left_pupila: {\n    imageName: 'leftEyePupil',\n    fallbackDescription: 'Place at the exact center of your left pupil',\n  },\n  left_canthus_medialis: {\n    imageName: 'leftEyeMedialCanthus',\n    fallbackDescription: 'Place at the inner corner where your left eyelids meet',\n  },\n  left_canthus_lateralis: {\n    imageName: 'leftEyeLateralCanthus',\n    fallbackDescription: 'Place at the outer corner where your left eyelids meet',\n  },\n  left_palpebra_superior: {\n    imageName: 'leftEyeUpperEyelid',\n    fallbackDescription: 'Place at the center of your left upper eyelid margin',\n  },\n  left_palpebra_inferior: {\n    imageName: 'leftEyeLowerEyelid',\n    fallbackDescription: 'Place at the center of your left lower eyelid margin',\n  },\n  left_sulcus_palpebralis_lateralis: {\n    imageName: 'leftEyelidHoodEnd',\n    fallbackDescription: 'Place where your left upper eyelid crease ends laterally',\n  },\n  left_pretarsal_skin_crease: {\n    imageName: 'leftUpperEyelidCrease',\n    fallbackDescription: 'Place at the center of your left upper eyelid crease',\n  },\n\n  // Eyes - Right\n  right_pupila: {\n    imageName: 'rightEyePupil',\n    fallbackDescription: 'Place at the exact center of your right pupil',\n  },\n  right_canthus_medialis: {\n    imageName: 'rightEyeMedialCanthus',\n    fallbackDescription: 'Place at the inner corner where your right eyelids meet',\n  },\n  right_canthus_lateralis: {\n    imageName: 'rightEyeLateralCanthus',\n    fallbackDescription: 'Place at the outer corner where your right eyelids meet',\n  },\n  right_palpebra_superior: {\n    imageName: 'rightEyeUpperEyelid',\n    fallbackDescription: 'Place at the center of your right upper eyelid margin',\n  },\n  right_palpebra_inferior: {\n    imageName: 'rightEyeLowerEyelid',\n    fallbackDescription: 'Place at the center of your right lower eyelid margin',\n  },\n  right_sulcus_palpebralis_lateralis: {\n    imageName: 'rightEyelidHoodEnd',\n    fallbackDescription: 'Place where your right upper eyelid crease ends laterally',\n  },\n  right_pretarsal_skin_crease: {\n    imageName: 'rightUpperEyelidCrease',\n    fallbackDescription: 'Place at the center of your right upper eyelid crease',\n  },\n\n  // Eyebrows - Left\n  left_supercilium_medialis: {\n    imageName: 'leftBrowHead',\n    fallbackDescription: 'Place at the innermost point where your left eyebrow starts',\n  },\n  left_supercilium_medial_corner: {\n    imageName: 'leftBrowInnerCorner',\n    fallbackDescription: 'Place at the inner corner of your left eyebrow',\n  },\n  left_supercilium_superior: {\n    imageName: 'leftBrowArch',\n    fallbackDescription: 'Place at the highest point of your left eyebrow arch',\n  },\n  left_supercilium_apex: {\n    imageName: 'leftBrowPeak',\n    fallbackDescription: 'Place at the peak of your left eyebrow curve',\n  },\n  left_supercilium_lateralis: {\n    imageName: 'leftBrowTail',\n    fallbackDescription: 'Place at the outer end of your left eyebrow',\n  },\n\n  // Eyebrows - Right\n  right_supercilium_medialis: {\n    imageName: 'rightBrowHead',\n    fallbackDescription: 'Place at the innermost point where your right eyebrow starts',\n  },\n  right_supercilium_medial_corner: {\n    imageName: 'rightBrowInnerCorner',\n    fallbackDescription: 'Place at the inner corner of your right eyebrow',\n  },\n  right_supercilium_superior: {\n    imageName: 'rightBrowArch',\n    fallbackDescription: 'Place at the highest point of your right eyebrow arch',\n  },\n  right_supercilium_apex: {\n    imageName: 'rightBrowPeak',\n    fallbackDescription: 'Place at the peak of your right eyebrow curve',\n  },\n  right_supercilium_lateralis: {\n    imageName: 'rightBrowTail',\n    fallbackDescription: 'Place at the outer end of your right eyebrow',\n  },\n\n  // Nose\n  nasal_base: {\n    imageName: 'nasalBase',\n    fallbackDescription: 'Place at the bridge of your nose between your eyes',\n  },\n  left_dorsum_nasi: {\n    imageName: 'leftNoseBridge',\n    fallbackDescription: 'Place on the left side of your nose bridge',\n  },\n  right_dorsum_nasi: {\n    imageName: 'rightNoseBridge',\n    fallbackDescription: 'Place on the right side of your nose bridge',\n  },\n  left_ala_nasi: {\n    imageName: 'noseLeft',\n    fallbackDescription: 'Place at the widest point of your left nostril',\n  },\n  right_ala_nasi: {\n    imageName: 'noseRight',\n    fallbackDescription: 'Place at the widest point of your right nostril',\n  },\n  subnasale: {\n    imageName: 'noseBottom',\n    fallbackDescription: 'Place at the base of your nose where it meets your upper lip',\n  },\n\n  // Mouth\n  labrale_superius: {\n    imageName: 'cupidsBow',\n    fallbackDescription: 'Place at the center peak of your upper lip',\n  },\n  cupids_bow: {\n    imageName: 'innerCupidsBow',\n    fallbackDescription: 'Place at the inner center of your Cupid\\'s bow',\n  },\n  mouth_middle: {\n    imageName: 'mouthMiddle',\n    fallbackDescription: 'Place at the center of your mouth opening',\n  },\n  labrale_inferius: {\n    imageName: 'lowerLip',\n    fallbackDescription: 'Place at the center of your lower lip border',\n  },\n  left_cheilion: {\n    imageName: 'mouthLeft',\n    fallbackDescription: 'Place at the left corner of your mouth',\n  },\n  right_cheilion: {\n    imageName: 'mouthRight',\n    fallbackDescription: 'Place at the right corner of your mouth',\n  },\n\n  // Jaw\n  left_gonion_superior: {\n    imageName: 'leftTopGonion',\n    fallbackDescription: 'Place at the upper angle of your left jaw',\n  },\n  right_gonion_superior: {\n    imageName: 'rightTopGonion',\n    fallbackDescription: 'Place at the upper angle of your right jaw',\n  },\n  left_gonion_inferior: {\n    imageName: 'leftBottomGonion',\n    fallbackDescription: 'Place at the lower angle of your left jaw',\n  },\n  right_gonion_inferior: {\n    imageName: 'rightBottomGonion',\n    fallbackDescription: 'Place at the lower angle of your right jaw',\n  },\n\n  // Chin\n  left_mentum_lateralis: {\n    imageName: 'chinLeft',\n    fallbackDescription: 'Place on the left side of your chin',\n  },\n  right_mentum_lateralis: {\n    imageName: 'chinRight',\n    fallbackDescription: 'Place on the right side of your chin',\n  },\n  menton: {\n    imageName: 'chinBottom',\n    fallbackDescription: 'Place at the lowest point of your chin',\n  },\n\n  // Face Width\n  left_zygion: {\n    imageName: 'leftCheek',\n    fallbackDescription: 'Place at the widest point of your left cheekbone',\n  },\n  right_zygion: {\n    imageName: 'rightCheek',\n    fallbackDescription: 'Place at the widest point of your right cheekbone',\n  },\n  left_temporal: {\n    imageName: 'leftTemple',\n    fallbackDescription: 'Place at your left temple',\n  },\n  right_temporal: {\n    imageName: 'rightTemple',\n    fallbackDescription: 'Place at your right temple',\n  },\n  left_auricular_lateral: {\n    imageName: 'leftOuterEar',\n    fallbackDescription: 'Place at the outermost point of your left ear',\n  },\n  right_auricular_lateral: {\n    imageName: 'rightOuterEar',\n    fallbackDescription: 'Place at the outermost point of your right ear',\n  },\n\n  // Neck\n  left_cervical_lateralis: {\n    imageName: 'neckLeft',\n    fallbackDescription: 'Place on the left side of your neck',\n  },\n  right_cervical_lateralis: {\n    imageName: 'neckRight',\n    fallbackDescription: 'Place on the right side of your neck',\n  },\n};\n\n// Side profile landmark images (31 landmarks)\nexport const SIDE_LANDMARK_IMAGES: Record<string, LandmarkImageConfig> = {\n  // Skull/Head\n  vertex: {\n    imageName: 'vertex',\n    fallbackDescription: 'Place at the highest point of your head',\n  },\n  external_occipital_region: {\n    imageName: 'occiput',\n    fallbackDescription: 'Place at the back of your head where it protrudes most',\n  },\n  trichion_profile: {\n    imageName: 'trichion',\n    fallbackDescription: 'Place at your hairline in profile view',\n  },\n  frontalis: {\n    imageName: 'forehead',\n    fallbackDescription: 'Place at the most prominent point of your forehead',\n  },\n\n  // Upper Face\n  glabella: {\n    imageName: 'glabella',\n    fallbackDescription: 'Place between your eyebrows at the brow ridge',\n  },\n  corneal_apex: {\n    imageName: 'cornealApex',\n    fallbackDescription: 'Place at the most forward point of your cornea',\n  },\n  lateral_eyelid: {\n    imageName: 'eyelidEnd',\n    fallbackDescription: 'Place at the lateral end of your eyelid',\n  },\n  lower_eyelid_profile: {\n    imageName: 'lowerEyelid',\n    fallbackDescription: 'Place at the lower eyelid margin',\n  },\n  zygoma_lateralis: {\n    imageName: 'cheekbone',\n    fallbackDescription: 'Place at the most prominent point of your cheekbone',\n  },\n\n  // Nose\n  nasion: {\n    imageName: 'nasion',\n    fallbackDescription: 'Place at the deepest point of your nasal bridge',\n  },\n  rhinion: {\n    imageName: 'rhinion',\n    fallbackDescription: 'Place at the junction of bone and cartilage on your nose bridge',\n  },\n  supratip: {\n    imageName: 'supratip',\n    fallbackDescription: 'Place just above your nose tip',\n  },\n  pronasale: {\n    imageName: 'pronasale',\n    fallbackDescription: 'Place at the most forward point of your nose tip',\n  },\n  infratip: {\n    imageName: 'infratip',\n    fallbackDescription: 'Place just below your nose tip',\n  },\n  columella: {\n    imageName: 'columella',\n    fallbackDescription: 'Place at the base of your columella (between nostrils)',\n  },\n  subnasale_profile: {\n    imageName: 'subnasale',\n    fallbackDescription: 'Place where your nose meets your upper lip',\n  },\n  subalare: {\n    imageName: 'subalare',\n    fallbackDescription: 'Place at the lower edge of your nostril',\n  },\n\n  // Lips\n  labrale_superius_profile: {\n    imageName: 'labraleSuperius',\n    fallbackDescription: 'Place at the most forward point of your upper lip',\n  },\n  labrale_inferius_profile: {\n    imageName: 'labraleInferius',\n    fallbackDescription: 'Place at the most forward point of your lower lip',\n  },\n  cheilion_profile: {\n    imageName: 'cheilion',\n    fallbackDescription: 'Place at the corner of your mouth',\n  },\n  sublabiale: {\n    imageName: 'sublabiale',\n    fallbackDescription: 'Place in the groove below your lower lip',\n  },\n\n  // Jaw & Chin\n  orbitale: {\n    imageName: 'orbitale',\n    fallbackDescription: 'Place at the lowest point of your eye socket',\n  },\n  gonion_superior_profile: {\n    imageName: 'gonionTop',\n    fallbackDescription: 'Place at the upper jaw angle',\n  },\n  gonion_inferior_profile: {\n    imageName: 'gonionBottom',\n    fallbackDescription: 'Place at the lower jaw angle',\n  },\n  pogonion: {\n    imageName: 'pogonion',\n    fallbackDescription: 'Place at the most forward point of your chin',\n  },\n  menton_profile: {\n    imageName: 'menton',\n    fallbackDescription: 'Place at the lowest point of your chin',\n  },\n\n  // Ear\n  porion: {\n    imageName: 'porion',\n    fallbackDescription: 'Place at the top of your ear canal opening',\n  },\n  tragus: {\n    imageName: 'tragus',\n    fallbackDescription: 'Place at the small flap covering your ear canal',\n  },\n  intertragic_notch: {\n    imageName: 'intertragicNotch',\n    fallbackDescription: 'Place at the notch between tragus and antitragus',\n  },\n\n  // Neck\n  cervical_point: {\n    imageName: 'cervicalPoint',\n    fallbackDescription: 'Place at the deepest point of your neck curve',\n  },\n  neckpoint: {\n    imageName: 'neckPoint',\n    fallbackDescription: 'Place at the neck reference point',\n  },\n};\n\n/**\n * Get the local image path for a landmark\n * @param landmarkId - The landmark ID\n * @param mode - 'front' or 'side' profile\n * @param type - 'photo' for face reference, 'infographic' for diagram\n * @returns Image path or null if not found\n */\nexport function getLandmarkImagePath(\n  landmarkId: string,\n  mode: 'front' | 'side',\n  type: 'photo' | 'infographic' = 'photo'\n): string | null {\n  const mapping = mode === 'front' ? FRONT_LANDMARK_IMAGES : SIDE_LANDMARK_IMAGES;\n  const config = mapping[landmarkId];\n\n  if (!config) {\n    return null;\n  }\n\n  const prefix = type === 'photo' ? 'male_white_' : 'infographic_';\n  return `/landmarks/${mode}/${prefix}${config.imageName}.webp`;\n}\n\n/**\n * Get fallback description for a landmark\n */\nexport function getLandmarkPlacementGuide(landmarkId: string, mode: 'front' | 'side'): string {\n  const mapping = mode === 'front' ? FRONT_LANDMARK_IMAGES : SIDE_LANDMARK_IMAGES;\n  const config = mapping[landmarkId];\n  return config?.fallbackDescription || 'Place this landmark at the indicated position';\n}\n","numLines":420,"startLine":1,"totalLines":420}}}
{"parentUuid":"626dd3eb-7904-48b8-a218-e833402530fa","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_018aarhL2cM69vAuKTnzmrtc","type":"tool_result","content":"     1→/**\n     2→ * Facial Landmark Types and Default Data\n     3→ * Based on TECHNICAL_SPECS.md medical terminology\n     4→ */\n     5→\n     6→export interface LandmarkPoint {\n     7→  id: string;\n     8→  label: string;\n     9→  medicalTerm: string;\n    10→  description: string;\n    11→  x: number;\n    12→  y: number;\n    13→  category: string;\n    14→}\n    15→\n    16→export interface LandmarkCategory {\n    17→  name: string;\n    18→  color: string;\n    19→  landmarks: string[];\n    20→}\n    21→\n    22→// ============================================\n    23→// FRONT PROFILE LANDMARKS (52 Points)\n    24→// ============================================\n    25→\n    26→export const FRONT_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n    27→  {\n    28→    name: 'Head',\n    29→    color: '#FF6B6B',\n    30→    landmarks: ['trichion'],\n    31→  },\n    32→  {\n    33→    name: 'Eyes - Left',\n    34→    color: '#4ECDC4',\n    35→    landmarks: [\n    36→      'left_pupila',\n    37→      'left_canthus_medialis',\n    38→      'left_canthus_lateralis',\n    39→      'left_palpebra_superior',\n    40→      'left_palpebra_inferior',\n    41→      'left_sulcus_palpebralis_lateralis',\n    42→      'left_pretarsal_skin_crease',\n    43→    ],\n    44→  },\n    45→  {\n    46→    name: 'Eyes - Right',\n    47→    color: '#45B7D1',\n    48→    landmarks: [\n    49→      'right_pupila',\n    50→      'right_canthus_medialis',\n    51→      'right_canthus_lateralis',\n    52→      'right_palpebra_superior',\n    53→      'right_palpebra_inferior',\n    54→      'right_sulcus_palpebralis_lateralis',\n    55→      'right_pretarsal_skin_crease',\n    56→    ],\n    57→  },\n    58→  {\n    59→    name: 'Eyebrows - Left',\n    60→    color: '#96CEB4',\n    61→    landmarks: [\n    62→      'left_supercilium_medialis',\n    63→      'left_supercilium_medial_corner',\n    64→      'left_supercilium_superior',\n    65→      'left_supercilium_apex',\n    66→      'left_supercilium_lateralis',\n    67→    ],\n    68→  },\n    69→  {\n    70→    name: 'Eyebrows - Right',\n    71→    color: '#88D8B0',\n    72→    landmarks: [\n    73→      'right_supercilium_medialis',\n    74→      'right_supercilium_medial_corner',\n    75→      'right_supercilium_superior',\n    76→      'right_supercilium_apex',\n    77→      'right_supercilium_lateralis',\n    78→    ],\n    79→  },\n    80→  {\n    81→    name: 'Nose',\n    82→    color: '#FFEAA7',\n    83→    landmarks: [\n    84→      'nasal_base',\n    85→      'left_dorsum_nasi',\n    86→      'right_dorsum_nasi',\n    87→      'left_ala_nasi',\n    88→      'right_ala_nasi',\n    89→      'subnasale',\n    90→    ],\n    91→  },\n    92→  {\n    93→    name: 'Mouth',\n    94→    color: '#DDA0DD',\n    95→    landmarks: [\n    96→      'labrale_superius',\n    97→      'cupids_bow',\n    98→      'mouth_middle',\n    99→      'labrale_inferius',\n   100→      'left_cheilion',\n   101→      'right_cheilion',\n   102→    ],\n   103→  },\n   104→  {\n   105→    name: 'Jaw',\n   106→    color: '#F39C12',\n   107→    landmarks: [\n   108→      'left_gonion_superior',\n   109→      'right_gonion_superior',\n   110→      'left_gonion_inferior',\n   111→      'right_gonion_inferior',\n   112→    ],\n   113→  },\n   114→  {\n   115→    name: 'Chin',\n   116→    color: '#E74C3C',\n   117→    landmarks: ['left_mentum_lateralis', 'right_mentum_lateralis', 'menton'],\n   118→  },\n   119→  {\n   120→    name: 'Face Width',\n   121→    color: '#9B59B6',\n   122→    landmarks: [\n   123→      'left_zygion',\n   124→      'right_zygion',\n   125→      'left_temporal',\n   126→      'right_temporal',\n   127→      'left_auricular_lateral',\n   128→      'right_auricular_lateral',\n   129→    ],\n   130→  },\n   131→  {\n   132→    name: 'Neck',\n   133→    color: '#1ABC9C',\n   134→    landmarks: ['left_cervical_lateralis', 'right_cervical_lateralis'],\n   135→  },\n   136→];\n   137→\n   138→export const FRONT_PROFILE_LANDMARKS: LandmarkPoint[] = [\n   139→  // Head/Hair\n   140→  {\n   141→    id: 'trichion',\n   142→    label: 'Hairline',\n   143→    medicalTerm: 'Trichion (frontal view)',\n   144→    description: 'Anterior hairline at midline',\n   145→    x: 0.5,\n   146→    y: 0.08,\n   147→    category: 'Head',\n   148→  },\n   149→\n   150→  // Eyes - Left\n   151→  {\n   152→    id: 'left_pupila',\n   153→    label: 'Left Pupil',\n   154→    medicalTerm: 'Left Pupila',\n   155→    description: 'Center of left pupil',\n   156→    x: 0.38,\n   157→    y: 0.35,\n   158→    category: 'Eyes - Left',\n   159→  },\n   160→  {\n   161→    id: 'left_canthus_medialis',\n   162→    label: 'Left Medial Canthus',\n   163→    medicalTerm: 'Left Canthus Medialis',\n   164→    description: 'Inner corner of left eye',\n   165→    x: 0.42,\n   166→    y: 0.35,\n   167→    category: 'Eyes - Left',\n   168→  },\n   169→  {\n   170→    id: 'left_canthus_lateralis',\n   171→    label: 'Left Lateral Canthus',\n   172→    medicalTerm: 'Left Canthus Lateralis',\n   173→    description: 'Outer corner of left eye',\n   174→    x: 0.32,\n   175→    y: 0.34,\n   176→    category: 'Eyes - Left',\n   177→  },\n   178→  {\n   179→    id: 'left_palpebra_superior',\n   180→    label: 'Left Upper Eyelid',\n   181→    medicalTerm: 'Left Palpebra Superior',\n   182→    description: 'Upper eyelid of left eye',\n   183→    x: 0.37,\n   184→    y: 0.33,\n   185→    category: 'Eyes - Left',\n   186→  },\n   187→  {\n   188→    id: 'left_palpebra_inferior',\n   189→    label: 'Left Lower Eyelid',\n   190→    medicalTerm: 'Left Palpebra Inferior',\n   191→    description: 'Lower eyelid of left eye',\n   192→    x: 0.37,\n   193→    y: 0.37,\n   194→    category: 'Eyes - Left',\n   195→  },\n   196→  {\n   197→    id: 'left_sulcus_palpebralis_lateralis',\n   198→    label: 'Left Eyelid Hood End',\n   199→    medicalTerm: 'Left Sulcus Palpebralis Lateralis',\n   200→    description: 'Lateral end of left upper eyelid crease',\n   201→    x: 0.31,\n   202→    y: 0.33,\n   203→    category: 'Eyes - Left',\n   204→  },\n   205→  {\n   206→    id: 'left_pretarsal_skin_crease',\n   207→    label: 'Left Upper Eyelid Crease',\n   208→    medicalTerm: 'Left Pretarsal Skin Crease',\n   209→    description: 'Left upper eyelid crease',\n   210→    x: 0.37,\n   211→    y: 0.32,\n   212→    category: 'Eyes - Left',\n   213→  },\n   214→\n   215→  // Eyes - Right\n   216→  {\n   217→    id: 'right_pupila',\n   218→    label: 'Right Pupil',\n   219→    medicalTerm: 'Right Pupila',\n   220→    description: 'Center of right pupil',\n   221→    x: 0.62,\n   222→    y: 0.35,\n   223→    category: 'Eyes - Right',\n   224→  },\n   225→  {\n   226→    id: 'right_canthus_medialis',\n   227→    label: 'Right Medial Canthus',\n   228→    medicalTerm: 'Right Canthus Medialis',\n   229→    description: 'Inner corner of right eye',\n   230→    x: 0.58,\n   231→    y: 0.35,\n   232→    category: 'Eyes - Right',\n   233→  },\n   234→  {\n   235→    id: 'right_canthus_lateralis',\n   236→    label: 'Right Lateral Canthus',\n   237→    medicalTerm: 'Right Canthus Lateralis',\n   238→    description: 'Outer corner of right eye',\n   239→    x: 0.68,\n   240→    y: 0.34,\n   241→    category: 'Eyes - Right',\n   242→  },\n   243→  {\n   244→    id: 'right_palpebra_superior',\n   245→    label: 'Right Upper Eyelid',\n   246→    medicalTerm: 'Right Palpebra Superior',\n   247→    description: 'Upper eyelid of right eye',\n   248→    x: 0.63,\n   249→    y: 0.33,\n   250→    category: 'Eyes - Right',\n   251→  },\n   252→  {\n   253→    id: 'right_palpebra_inferior',\n   254→    label: 'Right Lower Eyelid',\n   255→    medicalTerm: 'Right Palpebra Inferior',\n   256→    description: 'Lower eyelid of right eye',\n   257→    x: 0.63,\n   258→    y: 0.37,\n   259→    category: 'Eyes - Right',\n   260→  },\n   261→  {\n   262→    id: 'right_sulcus_palpebralis_lateralis',\n   263→    label: 'Right Eyelid Hood End',\n   264→    medicalTerm: 'Right Sulcus Palpebralis Lateralis',\n   265→    description: 'Lateral end of right upper eyelid crease',\n   266→    x: 0.69,\n   267→    y: 0.33,\n   268→    category: 'Eyes - Right',\n   269→  },\n   270→  {\n   271→    id: 'right_pretarsal_skin_crease',\n   272→    label: 'Right Upper Eyelid Crease',\n   273→    medicalTerm: 'Right Pretarsal Skin Crease',\n   274→    description: 'Right upper eyelid crease',\n   275→    x: 0.63,\n   276→    y: 0.32,\n   277→    category: 'Eyes - Right',\n   278→  },\n   279→\n   280→  // Eyebrows - Left\n   281→  {\n   282→    id: 'left_supercilium_medialis',\n   283→    label: 'Left Brow Head',\n   284→    medicalTerm: 'Left Supercilium Medialis',\n   285→    description: 'Medial start of left eyebrow',\n   286→    x: 0.43,\n   287→    y: 0.28,\n   288→    category: 'Eyebrows - Left',\n   289→  },\n   290→  {\n   291→    id: 'left_supercilium_medial_corner',\n   292→    label: 'Left Brow Inner Corner',\n   293→    medicalTerm: 'Left Supercilium Medial Corner',\n   294→    description: 'Inner corner of left eyebrow',\n   295→    x: 0.41,\n   296→    y: 0.27,\n   297→    category: 'Eyebrows - Left',\n   298→  },\n   299→  {\n   300→    id: 'left_supercilium_superior',\n   301→    label: 'Left Brow Arch',\n   302→    medicalTerm: 'Left Supercilium Superior',\n   303→    description: 'Superior arc of left eyebrow',\n   304→    x: 0.36,\n   305→    y: 0.26,\n   306→    category: 'Eyebrows - Left',\n   307→  },\n   308→  {\n   309→    id: 'left_supercilium_apex',\n   310→    label: 'Left Brow Peak',\n   311→    medicalTerm: 'Left Supercilium Apex',\n   312→    description: 'Highest point of left eyebrow',\n   313→    x: 0.34,\n   314→    y: 0.26,\n   315→    category: 'Eyebrows - Left',\n   316→  },\n   317→  {\n   318→    id: 'left_supercilium_lateralis',\n   319→    label: 'Left Brow Tail',\n   320→    medicalTerm: 'Left Supercilium Lateralis',\n   321→    description: 'Lateral end of left eyebrow',\n   322→    x: 0.29,\n   323→    y: 0.28,\n   324→    category: 'Eyebrows - Left',\n   325→  },\n   326→\n   327→  // Eyebrows - Right\n   328→  {\n   329→    id: 'right_supercilium_medialis',\n   330→    label: 'Right Brow Head',\n   331→    medicalTerm: 'Right Supercilium Medialis',\n   332→    description: 'Medial start of right eyebrow',\n   333→    x: 0.57,\n   334→    y: 0.28,\n   335→    category: 'Eyebrows - Right',\n   336→  },\n   337→  {\n   338→    id: 'right_supercilium_medial_corner',\n   339→    label: 'Right Brow Inner Corner',\n   340→    medicalTerm: 'Right Supercilium Medial Corner',\n   341→    description: 'Inner corner of right eyebrow',\n   342→    x: 0.59,\n   343→    y: 0.27,\n   344→    category: 'Eyebrows - Right',\n   345→  },\n   346→  {\n   347→    id: 'right_supercilium_superior',\n   348→    label: 'Right Brow Arch',\n   349→    medicalTerm: 'Right Supercilium Superior',\n   350→    description: 'Superior arc of right eyebrow',\n   351→    x: 0.64,\n   352→    y: 0.26,\n   353→    category: 'Eyebrows - Right',\n   354→  },\n   355→  {\n   356→    id: 'right_supercilium_apex',\n   357→    label: 'Right Brow Peak',\n   358→    medicalTerm: 'Right Supercilium Apex',\n   359→    description: 'Highest point of right eyebrow',\n   360→    x: 0.66,\n   361→    y: 0.26,\n   362→    category: 'Eyebrows - Right',\n   363→  },\n   364→  {\n   365→    id: 'right_supercilium_lateralis',\n   366→    label: 'Right Brow Tail',\n   367→    medicalTerm: 'Right Supercilium Lateralis',\n   368→    description: 'Lateral end of right eyebrow',\n   369→    x: 0.71,\n   370→    y: 0.28,\n   371→    category: 'Eyebrows - Right',\n   372→  },\n   373→\n   374→  // Nose\n   375→  {\n   376→    id: 'nasal_base',\n   377→    label: 'Nasal Base',\n   378→    medicalTerm: 'Nasal Base',\n   379→    description: 'Base of nasal dorsum',\n   380→    x: 0.5,\n   381→    y: 0.38,\n   382→    category: 'Nose',\n   383→  },\n   384→  {\n   385→    id: 'left_dorsum_nasi',\n   386→    label: 'Left Nose Bridge',\n   387→    medicalTerm: 'Left Dorsum Nasi',\n   388→    description: 'Left side of nasal bridge',\n   389→    x: 0.47,\n   390→    y: 0.42,\n   391→    category: 'Nose',\n   392→  },\n   393→  {\n   394→    id: 'right_dorsum_nasi',\n   395→    label: 'Right Nose Bridge',\n   396→    medicalTerm: 'Right Dorsum Nasi',\n   397→    description: 'Right side of nasal bridge',\n   398→    x: 0.53,\n   399→    y: 0.42,\n   400→    category: 'Nose',\n   401→  },\n   402→  {\n   403→    id: 'left_ala_nasi',\n   404→    label: 'Left Nose Side',\n   405→    medicalTerm: 'Left Ala Nasi',\n   406→    description: 'Lateral aspect of left nasal ala',\n   407→    x: 0.44,\n   408→    y: 0.5,\n   409→    category: 'Nose',\n   410→  },\n   411→  {\n   412→    id: 'right_ala_nasi',\n   413→    label: 'Right Nose Side',\n   414→    medicalTerm: 'Right Ala Nasi',\n   415→    description: 'Lateral aspect of right nasal ala',\n   416→    x: 0.56,\n   417→    y: 0.5,\n   418→    category: 'Nose',\n   419→  },\n   420→  {\n   421→    id: 'subnasale',\n   422→    label: 'Nose Bottom',\n   423→    medicalTerm: 'Subnasale',\n   424→    description: 'Junction of columella and upper lip',\n   425→    x: 0.5,\n   426→    y: 0.52,\n   427→    category: 'Nose',\n   428→  },\n   429→\n   430→  // Mouth\n   431→  {\n   432→    id: 'labrale_superius',\n   433→    label: \"Cupid's Bow\",\n   434→    medicalTerm: 'Labrale Superius',\n   435→    description: 'Midpoint of upper lip vermilion',\n   436→    x: 0.5,\n   437→    y: 0.58,\n   438→    category: 'Mouth',\n   439→  },\n   440→  {\n   441→    id: 'cupids_bow',\n   442→    label: \"Inner Cupid's Bow\",\n   443→    medicalTerm: \"Cupid's Bow\",\n   444→    description: 'Central peak of upper lip',\n   445→    x: 0.5,\n   446→    y: 0.57,\n   447→    category: 'Mouth',\n   448→  },\n   449→  {\n   450→    id: 'mouth_middle',\n   451→    label: 'Mouth Middle',\n   452→    medicalTerm: 'Mouth Middle',\n   453→    description: 'Center of mouth opening',\n   454→    x: 0.5,\n   455→    y: 0.62,\n   456→    category: 'Mouth',\n   457→  },\n   458→  {\n   459→    id: 'labrale_inferius',\n   460→    label: 'Lower Lip Center',\n   461→    medicalTerm: 'Labrale Inferius',\n   462→    description: 'Midpoint of lower lip vermilion border',\n   463→    x: 0.5,\n   464→    y: 0.66,\n   465→    category: 'Mouth',\n   466→  },\n   467→  {\n   468→    id: 'left_cheilion',\n   469→    label: 'Left Mouth Corner',\n   470→    medicalTerm: 'Left Cheilion',\n   471→    description: 'Left oral commissure',\n   472→    x: 0.42,\n   473→    y: 0.62,\n   474→    category: 'Mouth',\n   475→  },\n   476→  {\n   477→    id: 'right_cheilion',\n   478→    label: 'Right Mouth Corner',\n   479→    medicalTerm: 'Right Cheilion',\n   480→    description: 'Right oral commissure',\n   481→    x: 0.58,\n   482→    y: 0.62,\n   483→    category: 'Mouth',\n   484→  },\n   485→\n   486→  // Jaw\n   487→  {\n   488→    id: 'left_gonion_superior',\n   489→    label: 'Left Upper Jaw Angle',\n   490→    medicalTerm: 'Left Gonion Superior',\n   491→    description: 'Superior aspect of left mandibular angle',\n   492→    x: 0.22,\n   493→    y: 0.55,\n   494→    category: 'Jaw',\n   495→  },\n   496→  {\n   497→    id: 'right_gonion_superior',\n   498→    label: 'Right Upper Jaw Angle',\n   499→    medicalTerm: 'Right Gonion Superior',\n   500→    description: 'Superior aspect of right mandibular angle',\n   501→    x: 0.78,\n   502→    y: 0.55,\n   503→    category: 'Jaw',\n   504→  },\n   505→  {\n   506→    id: 'left_gonion_inferior',\n   507→    label: 'Left Lower Jaw Angle',\n   508→    medicalTerm: 'Left Gonion Inferior',\n   509→    description: 'Inferior aspect of left mandibular angle',\n   510→    x: 0.24,\n   511→    y: 0.7,\n   512→    category: 'Jaw',\n   513→  },\n   514→  {\n   515→    id: 'right_gonion_inferior',\n   516→    label: 'Right Lower Jaw Angle',\n   517→    medicalTerm: 'Right Gonion Inferior',\n   518→    description: 'Inferior aspect of right mandibular angle',\n   519→    x: 0.76,\n   520→    y: 0.7,\n   521→    category: 'Jaw',\n   522→  },\n   523→\n   524→  // Chin\n   525→  {\n   526→    id: 'left_mentum_lateralis',\n   527→    label: 'Left Chin',\n   528→    medicalTerm: 'Left Mentum Lateralis',\n   529→    description: 'Left lateral chin',\n   530→    x: 0.42,\n   531→    y: 0.8,\n   532→    category: 'Chin',\n   533→  },\n   534→  {\n   535→    id: 'right_mentum_lateralis',\n   536→    label: 'Right Chin',\n   537→    medicalTerm: 'Right Mentum Lateralis',\n   538→    description: 'Right lateral chin',\n   539→    x: 0.58,\n   540→    y: 0.8,\n   541→    category: 'Chin',\n   542→  },\n   543→  {\n   544→    id: 'menton',\n   545→    label: 'Chin Bottom',\n   546→    medicalTerm: 'Menton',\n   547→    description: 'Lowest point of chin in midline',\n   548→    x: 0.5,\n   549→    y: 0.88,\n   550→    category: 'Chin',\n   551→  },\n   552→\n   553→  // Face Width\n   554→  {\n   555→    id: 'left_zygion',\n   556→    label: 'Left Cheekbone',\n   557→    medicalTerm: 'Left Zygion',\n   558→    description: 'Most lateral point of left zygomatic arch',\n   559→    x: 0.18,\n   560→    y: 0.42,\n   561→    category: 'Face Width',\n   562→  },\n   563→  {\n   564→    id: 'right_zygion',\n   565→    label: 'Right Cheekbone',\n   566→    medicalTerm: 'Right Zygion',\n   567→    description: 'Most lateral point of right zygomatic arch',\n   568→    x: 0.82,\n   569→    y: 0.42,\n   570→    category: 'Face Width',\n   571→  },\n   572→  {\n   573→    id: 'left_temporal',\n   574→    label: 'Left Temple',\n   575→    medicalTerm: 'Left Temporal Point',\n   576→    description: 'Left temporal region',\n   577→    x: 0.2,\n   578→    y: 0.3,\n   579→    category: 'Face Width',\n   580→  },\n   581→  {\n   582→    id: 'right_temporal',\n   583→    label: 'Right Temple',\n   584→    medicalTerm: 'Right Temporal Point',\n   585→    description: 'Right temporal region',\n   586→    x: 0.8,\n   587→    y: 0.3,\n   588→    category: 'Face Width',\n   589→  },\n   590→  {\n   591→    id: 'left_auricular_lateral',\n   592→    label: 'Left Outer Ear',\n   593→    medicalTerm: 'Left Auricular Lateral Point',\n   594→    description: 'Lateral-most point of left ear',\n   595→    x: 0.12,\n   596→    y: 0.4,\n   597→    category: 'Face Width',\n   598→  },\n   599→  {\n   600→    id: 'right_auricular_lateral',\n   601→    label: 'Right Outer Ear',\n   602→    medicalTerm: 'Right Auricular Lateral Point',\n   603→    description: 'Lateral-most point of right ear',\n   604→    x: 0.88,\n   605→    y: 0.4,\n   606→    category: 'Face Width',\n   607→  },\n   608→\n   609→  // Neck\n   610→  {\n   611→    id: 'left_cervical_lateralis',\n   612→    label: 'Left Neck Point',\n   613→    medicalTerm: 'Left Cervical Lateralis',\n   614→    description: 'Left cervical point',\n   615→    x: 0.35,\n   616→    y: 0.95,\n   617→    category: 'Neck',\n   618→  },\n   619→  {\n   620→    id: 'right_cervical_lateralis',\n   621→    label: 'Right Neck Point',\n   622→    medicalTerm: 'Right Cervical Lateralis',\n   623→    description: 'Right cervical point',\n   624→    x: 0.65,\n   625→    y: 0.95,\n   626→    category: 'Neck',\n   627→  },\n   628→];\n   629→\n   630→// ============================================\n   631→// SIDE PROFILE LANDMARKS (38 Points)\n   632→// ============================================\n   633→\n   634→export const SIDE_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n   635→  {\n   636→    name: 'Cranium',\n   637→    color: '#FF6B6B',\n   638→    landmarks: ['vertex', 'external_occipital_region', 'trichion_profile'],\n   639→  },\n   640→  {\n   641→    name: 'Forehead',\n   642→    color: '#4ECDC4',\n   643→    landmarks: ['frontalis', 'glabella'],\n   644→  },\n   645→  {\n   646→    name: 'Eye Region',\n   647→    color: '#45B7D1',\n   648→    landmarks: [\n   649→      'corneal_apex',\n   650→      'lateral_eyelid',\n   651→      'palpebra_inferior_side',\n   652→      'orbitale',\n   653→    ],\n   654→  },\n   655→  {\n   656→    name: 'Nose',\n   657→    color: '#FFEAA7',\n   658→    landmarks: [\n   659→      'nasion',\n   660→      'rhinion',\n   661→      'supratip_break',\n   662→      'pronasale',\n   663→      'infratip_lobule',\n   664→      'columella_nasi',\n   665→      'subnasale_side',\n   666→      'subalare',\n   667→    ],\n   668→  },\n   669→  {\n   670→    name: 'Lips',\n   671→    color: '#DDA0DD',\n   672→    landmarks: [\n   673→      'labrale_superius_side',\n   674→      'cheilion_side',\n   675→      'labrale_inferius_side',\n   676→      'sublabiale',\n   677→    ],\n   678→  },\n   679→  {\n   680→    name: 'Chin',\n   681→    color: '#E74C3C',\n   682→    landmarks: ['pogonion', 'menton_side'],\n   683→  },\n   684→  {\n   685→    name: 'Jaw',\n   686→    color: '#F39C12',\n   687→    landmarks: ['gonion_superior_side', 'gonion_inferior_side'],\n   688→  },\n   689→  {\n   690→    name: 'Cheek',\n   691→    color: '#9B59B6',\n   692→    landmarks: ['zygion_soft_tissue'],\n   693→  },\n   694→  {\n   695→    name: 'Ear',\n   696→    color: '#3498DB',\n   697→    landmarks: ['porion', 'tragion', 'incisura_intertragica'],\n   698→  },\n   699→  {\n   700→    name: 'Neck',\n   701→    color: '#1ABC9C',\n   702→    landmarks: ['cervicale', 'anterior_cervical_landmark'],\n   703→  },\n   704→];\n   705→\n   706→export const SIDE_PROFILE_LANDMARKS: LandmarkPoint[] = [\n   707→  // Cranium\n   708→  {\n   709→    id: 'vertex',\n   710→    label: 'Top of Head',\n   711→    medicalTerm: 'Vertex',\n   712→    description: 'Highest point of cranium',\n   713→    x: 0.45,\n   714→    y: 0.02,\n   715→    category: 'Cranium',\n   716→  },\n   717→  {\n   718→    id: 'external_occipital_region',\n   719→    label: 'Occiput',\n   720→    medicalTerm: 'External Occipital Region',\n   721→    description: 'Back of skull',\n   722→    x: 0.85,\n   723→    y: 0.15,\n   724→    category: 'Cranium',\n   725→  },\n   726→  {\n   727→    id: 'trichion_profile',\n   728→    label: 'Hairline (profile)',\n   729→    medicalTerm: 'Trichion',\n   730→    description: 'Anterior hairline (profile view)',\n   731→    x: 0.35,\n   732→    y: 0.1,\n   733→    category: 'Cranium',\n   734→  },\n   735→\n   736→  // Forehead\n   737→  {\n   738→    id: 'frontalis',\n   739→    label: 'Forehead',\n   740→    medicalTerm: 'Frontalis',\n   741→    description: 'Forehead region',\n   742→    x: 0.3,\n   743→    y: 0.18,\n   744→    category: 'Forehead',\n   745→  },\n   746→  {\n   747→    id: 'glabella',\n   748→    label: 'Glabella',\n   749→    medicalTerm: 'Glabella',\n   750→    description: 'Most prominent point between eyebrows',\n   751→    x: 0.32,\n   752→    y: 0.28,\n   753→    category: 'Forehead',\n   754→  },\n   755→\n   756→  // Eye Region\n   757→  {\n   758→    id: 'corneal_apex',\n   759→    label: 'Corneal Apex',\n   760→    medicalTerm: 'Corneal Apex',\n   761→    description: 'Most anterior point of cornea',\n   762→    x: 0.28,\n   763→    y: 0.34,\n   764→    category: 'Eye Region',\n   765→  },\n   766→  {\n   767→    id: 'lateral_eyelid',\n   768→    label: 'Eyelid End',\n   769→    medicalTerm: 'Lateral Eyelid',\n   770→    description: 'Lateral extent of palpebral fissure',\n   771→    x: 0.35,\n   772→    y: 0.34,\n   773→    category: 'Eye Region',\n   774→  },\n   775→  {\n   776→    id: 'palpebra_inferior_side',\n   777→    label: 'Lower Eyelid',\n   778→    medicalTerm: 'Left Palpebra Inferior',\n   779→    description: 'Lower eyelid margin (profile view)',\n   780→    x: 0.3,\n   781→    y: 0.36,\n   782→    category: 'Eye Region',\n   783→  },\n   784→  {\n   785→    id: 'orbitale',\n   786→    label: 'Orbitale',\n   787→    medicalTerm: 'Orbitale',\n   788→    description: 'Lowest point of infraorbital margin',\n   789→    x: 0.35,\n   790→    y: 0.38,\n   791→    category: 'Eye Region',\n   792→  },\n   793→\n   794→  // Nose\n   795→  {\n   796→    id: 'nasion',\n   797→    label: 'Nasal Bridge Front',\n   798→    medicalTerm: 'Nasion',\n   799→    description: 'Deepest point of nasal root',\n   800→    x: 0.35,\n   801→    y: 0.32,\n   802→    category: 'Nose',\n   803→  },\n   804→  {\n   805→    id: 'rhinion',\n   806→    label: 'Rhinion',\n   807→    medicalTerm: 'Rhinion',\n   808→    description: 'Junction of bony and cartilaginous nose',\n   809→    x: 0.28,\n   810→    y: 0.4,\n   811→    category: 'Nose',\n   812→  },\n   813→  {\n   814→    id: 'supratip_break',\n   815→    label: 'Supratip',\n   816→    medicalTerm: 'Supratip Break',\n   817→    description: 'Depression above nasal tip',\n   818→    x: 0.22,\n   819→    y: 0.46,\n   820→    category: 'Nose',\n   821→  },\n   822→  {\n   823→    id: 'pronasale',\n   824→    label: 'Nose Tip',\n   825→    medicalTerm: 'Pronasale',\n   826→    description: 'Most anterior point of nasal tip',\n   827→    x: 0.18,\n   828→    y: 0.48,\n   829→    category: 'Nose',\n   830→  },\n   831→  {\n   832→    id: 'infratip_lobule',\n   833→    label: 'Infratip',\n   834→    medicalTerm: 'Infratip Lobule',\n   835→    description: 'Area below nasal tip',\n   836→    x: 0.2,\n   837→    y: 0.5,\n   838→    category: 'Nose',\n   839→  },\n   840→  {\n   841→    id: 'columella_nasi',\n   842→    label: 'Columella',\n   843→    medicalTerm: 'Columella Nasi',\n   844→    description: 'Fleshy external end of nasal septum',\n   845→    x: 0.24,\n   846→    y: 0.52,\n   847→    category: 'Nose',\n   848→  },\n   849→  {\n   850→    id: 'subnasale_side',\n   851→    label: 'Subnasale',\n   852→    medicalTerm: 'Subnasale',\n   853→    description: 'Junction of columella and upper lip',\n   854→    x: 0.3,\n   855→    y: 0.54,\n   856→    category: 'Nose',\n   857→  },\n   858→  {\n   859→    id: 'subalare',\n   860→    label: 'Subalare',\n   861→    medicalTerm: 'Subalare',\n   862→    description: 'Junction of alar base and upper lip',\n   863→    x: 0.28,\n   864→    y: 0.53,\n   865→    category: 'Nose',\n   866→  },\n   867→\n   868→  // Lips\n   869→  {\n   870→    id: 'labrale_superius_side',\n   871→    label: 'Upper Lip',\n   872→    medicalTerm: 'Labrale Superius',\n   873→    description: 'Upper lip vermilion border',\n   874→    x: 0.28,\n   875→    y: 0.58,\n   876→    category: 'Lips',\n   877→  },\n   878→  {\n   879→    id: 'cheilion_side',\n   880→    label: 'Mouth Corner',\n   881→    medicalTerm: 'Cheilion',\n   882→    description: 'Oral commissure (profile view)',\n   883→    x: 0.35,\n   884→    y: 0.62,\n   885→    category: 'Lips',\n   886→  },\n   887→  {\n   888→    id: 'labrale_inferius_side',\n   889→    label: 'Lower Lip',\n   890→    medicalTerm: 'Labrale Inferius',\n   891→    description: 'Lower lip vermilion border',\n   892→    x: 0.3,\n   893→    y: 0.66,\n   894→    category: 'Lips',\n   895→  },\n   896→  {\n   897→    id: 'sublabiale',\n   898→    label: 'Labiomental Fold',\n   899→    medicalTerm: 'Sublabiale',\n   900→    description: 'Deepest point of labiomental sulcus',\n   901→    x: 0.32,\n   902→    y: 0.7,\n   903→    category: 'Lips',\n   904→  },\n   905→\n   906→  // Chin\n   907→  {\n   908→    id: 'pogonion',\n   909→    label: 'Chin Point',\n   910→    medicalTerm: 'Pogonion (soft tissue)',\n   911→    description: 'Most anterior point of chin',\n   912→    x: 0.3,\n   913→    y: 0.76,\n   914→    category: 'Chin',\n   915→  },\n   916→  {\n   917→    id: 'menton_side',\n   918→    label: 'Chin Bottom',\n   919→    medicalTerm: 'Menton (soft tissue)',\n   920→    description: 'Lowest point of chin',\n   921→    x: 0.35,\n   922→    y: 0.82,\n   923→    category: 'Chin',\n   924→  },\n   925→\n   926→  // Jaw\n   927→  {\n   928→    id: 'gonion_superior_side',\n   929→    label: 'Upper Jaw Angle',\n   930→    medicalTerm: 'Gonion Superior',\n   931→    description: 'Superior mandibular angle',\n   932→    x: 0.7,\n   933→    y: 0.6,\n   934→    category: 'Jaw',\n   935→  },\n   936→  {\n   937→    id: 'gonion_inferior_side',\n   938→    label: 'Lower Jaw Angle',\n   939→    medicalTerm: 'Gonion Inferior',\n   940→    description: 'Inferior mandibular angle',\n   941→    x: 0.65,\n   942→    y: 0.72,\n   943→    category: 'Jaw',\n   944→  },\n   945→\n   946→  // Cheek\n   947→  {\n   948→    id: 'zygion_soft_tissue',\n   949→    label: 'Cheekbone',\n   950→    medicalTerm: 'Zygion (soft tissue over zygoma)',\n   951→    description: 'Soft tissue over zygomatic arch',\n   952→    x: 0.45,\n   953→    y: 0.42,\n   954→    category: 'Cheek',\n   955→  },\n   956→\n   957→  // Ear\n   958→  {\n   959→    id: 'porion',\n   960→    label: 'Porion',\n   961→    medicalTerm: 'Porion (soft tissue)',\n   962→    description: 'Superior aspect of external auditory meatus',\n   963→    x: 0.75,\n   964→    y: 0.35,\n   965→    category: 'Ear',\n   966→  },\n   967→  {\n   968→    id: 'tragion',\n   969→    label: 'Tragus',\n   970→    medicalTerm: 'Tragion (soft tissue)',\n   971→    description: 'Superior margin of tragus',\n   972→    x: 0.72,\n   973→    y: 0.42,\n   974→    category: 'Ear',\n   975→  },\n   976→  {\n   977→    id: 'incisura_intertragica',\n   978→    label: 'Intertragic Notch',\n   979→    medicalTerm: 'Incisura Intertragica',\n   980→    description: 'Notch between tragus and antitragus',\n   981→    x: 0.73,\n   982→    y: 0.45,\n   983→    category: 'Ear',\n   984→  },\n   985→\n   986→  // Neck\n   987→  {\n   988→    id: 'cervicale',\n   989→    label: 'Cervical Point',\n   990→    medicalTerm: 'Cervicale (soft tissue reference)',\n   991→    description: 'Cervical point for profile analysis',\n   992→    x: 0.5,\n   993→    y: 0.9,\n   994→    category: 'Neck',\n   995→  },\n   996→  {\n   997→    id: 'anterior_cervical_landmark',\n   998→    label: 'Neck Point',\n   999→    medicalTerm: 'Anterior Cervical Landmark',\n  1000→    description: 'Anterior neck landmark',\n  1001→    x: 0.4,\n  1002→    y: 0.88,\n  1003→    category: 'Neck',\n  1004→  },\n  1005→];\n  1006→\n  1007→// ============================================\n  1008→// MediaPipe Face Mesh Index Mapping\n  1009→// ============================================\n  1010→// NOTE: MEDIAPIPE_FRONT_MAPPING is defined in mediapipeDetection.ts (single source of truth)\n  1011→// Import from there if needed: import { MEDIAPIPE_FRONT_MAPPING } from './mediapipeDetection';\n  1012→\n  1013→// Helper to get category color for a landmark\n  1014→export function getLandmarkColor(\n  1015→  landmarkId: string,\n  1016→  categories: LandmarkCategory[]\n  1017→): string {\n  1018→  for (const category of categories) {\n  1019→    if (category.landmarks.includes(landmarkId)) {\n  1020→      return category.color;\n  1021→    }\n  1022→  }\n  1023→  return '#00f3ff'; // Default cyan\n  1024→}\n  1025→\n  1026→// ============================================\n  1027→// FaceIQ Side Profile Landmark Indices (106 points)\n  1028→// Reverse-engineered from FaceIQ Labs API\n  1029→// ============================================\n  1030→\n  1031→export const FACEIQ_SIDE_LANDMARKS = {\n  1032→  // Face Contour (0-16) - Jaw/Chin outline\n  1033→  MENTON: 0, // Chin bottom (lowest point)\n  1034→  POGONION: 2, // Chin prominence\n  1035→  GNATHION: 3, // Chin point\n  1036→  MANDIBLE_CONTOUR: [2, 3, 4, 5, 6, 7, 8], // Jaw line\n  1037→\n  1038→  // Posterior Points (1, 9-16) - Ear/Back of head\n  1039→  TRAGION: 1, // Ear point\n  1040→  EAR_CONTOUR: [9, 10, 11, 12, 13, 14, 15, 16],\n  1041→\n  1042→  // Forehead/Hairline (17)\n  1043→  TRICHION: 17, // Hairline\n  1044→\n  1045→  // Nose Profile (18-32)\n  1046→  NASION: 25, // Bridge of nose (deepest point)\n  1047→  PRONASALE: 32, // Nose tip\n  1048→  SUBNASALE: 52, // Base of nose\n  1049→  COLUMELLA: 53, // Nose columella\n  1050→  NOSE_BRIDGE: [25, 26, 27, 28, 29, 30, 31, 32],\n  1051→  NOSE_TIP_CONTOUR: [52, 53, 54, 55, 56, 57, 58, 59, 60],\n  1052→\n  1053→  // Eye Region (33-51)\n  1054→  EYE_LATERAL_CANTHUS: 33, // Outer eye corner\n  1055→  EYE_MEDIAL_CANTHUS: 35, // Inner eye corner\n  1056→  UPPER_EYELID: [37, 38, 39],\n  1057→  LOWER_EYELID: [40, 41, 42],\n  1058→  PUPIL: 34,\n  1059→  BROW_HEAD: 44, // Inner brow\n  1060→  BROW_ARCH: 45, // Brow peak\n  1061→  BROW_TAIL: 46, // Outer brow\n  1062→\n  1063→  // Lip Region (52-75)\n  1064→  LABRALE_SUPERIUS: 63, // Upper lip top\n  1065→  LABRALE_INFERIUS: 66, // Lower lip bottom\n  1066→  STOMION: 65, // Lip meeting point\n  1067→  UPPER_LIP_CONTOUR: [63, 64, 65],\n  1068→  LOWER_LIP_CONTOUR: [66, 67, 68],\n  1069→\n  1070→  // Additional Profile Points (76-105)\n  1071→  GLABELLA: 76, // Between eyebrows\n  1072→  SELLION: 77, // Deepest point of nasal bridge\n  1073→  SOFT_TISSUE_NASION: 78,\n  1074→  ORBITALE: 79, // Lowest point of eye socket\n  1075→  GONION: 85, // Jaw angle\n  1076→  CONDYLION: 86, // Top of jaw joint\n  1077→};\n  1078→\n  1079→// ============================================\n  1080→// FaceIQ Front Face Landmark Indices (MediaPipe 478 points)\n  1081→// ============================================\n  1082→\n  1083→export const FACEIQ_FRONT_LANDMARKS = {\n  1084→  // Key points from MediaPipe Face Mesh\n  1085→  NOSE_TIP: 1,\n  1086→  LEFT_EYE_INNER: 133,\n  1087→  LEFT_EYE_OUTER: 33,\n  1088→  RIGHT_EYE_INNER: 362,\n  1089→  RIGHT_EYE_OUTER: 263,\n  1090→  LEFT_CHEEK: 234,\n  1091→  RIGHT_CHEEK: 454,\n  1092→  UPPER_LIP: 13,\n  1093→  LOWER_LIP: 14,\n  1094→  CHIN: 152,\n  1095→  FOREHEAD: 10,\n  1096→  LEFT_EAR: 234,\n  1097→  RIGHT_EAR: 454,\n  1098→  LEFT_BROW_INNER: 107,\n  1099→  LEFT_BROW_OUTER: 70,\n  1100→  RIGHT_BROW_INNER: 336,\n  1101→  RIGHT_BROW_OUTER: 300,\n  1102→  NOSE_BRIDGE: 6,\n  1103→  LEFT_NOSTRIL: 129,\n  1104→  RIGHT_NOSTRIL: 358,\n  1105→};\n  1106→\n  1107→// ============================================\n  1108→// Scoring Configuration Types\n  1109→// ============================================\n  1110→\n  1111→export interface ScoringConfig {\n  1112→  idealValue: number;\n  1113→  standardDeviation: number;\n  1114→  minScore: number;\n  1115→  maxScore: number;\n  1116→  weight: number;\n  1117→}\n  1118→\n  1119→export interface GenderSpecificValues {\n  1120→  male: { ideal: number; range: [number, number] };\n  1121→  female: { ideal: number; range: [number, number] };\n  1122→}\n  1123→\n  1124→// ============================================\n  1125→// FaceIQ Ideal Values (Gender-Specific)\n  1126→// ============================================\n  1127→\n  1128→export const FACEIQ_IDEAL_VALUES: Record<string, GenderSpecificValues> = {\n  1129→  fwhr: {\n  1130→    male: { ideal: 1.9, range: [1.8, 2.1] },\n  1131→    female: { ideal: 1.75, range: [1.6, 1.9] },\n  1132→  },\n  1133→  canthalTilt: {\n  1134→    male: { ideal: 4, range: [2, 7] },\n  1135→    female: { ideal: 6, range: [4, 10] },\n  1136→  },\n  1137→  nasolabialAngle: {\n  1138→    male: { ideal: 95, range: [90, 100] },\n  1139→    female: { ideal: 105, range: [100, 115] },\n  1140→  },\n  1141→  gonialAngle: {\n  1142→    male: { ideal: 125, range: [120, 130] },\n  1143→    female: { ideal: 128, range: [125, 135] },\n  1144→  },\n  1145→  nasalIndex: {\n  1146→    male: { ideal: 0.7, range: [0.65, 0.75] },\n  1147→    female: { ideal: 0.65, range: [0.6, 0.7] },\n  1148→  },\n  1149→  lipRatio: {\n  1150→    male: { ideal: 0.5, range: [0.4, 0.6] },\n  1151→    female: { ideal: 0.5, range: [0.45, 0.55] },\n  1152→  },\n  1153→  facialConvexity: {\n  1154→    male: { ideal: 170, range: [165, 175] },\n  1155→    female: { ideal: 168, range: [163, 173] },\n  1156→  },\n  1157→  chinProjection: {\n  1158→    male: { ideal: 0, range: [-3, 3] },\n  1159→    female: { ideal: -2, range: [-5, 1] },\n  1160→  },\n  1161→};\n  1162→\n  1163→// ============================================\n  1164→// FaceIQ Scoring Configurations\n  1165→// ============================================\n  1166→\n  1167→export const FACEIQ_SCORING_CONFIGS: Record<string, ScoringConfig> = {\n  1168→  fwhr: {\n  1169→    idealValue: 1.9,\n  1170→    standardDeviation: 0.15,\n  1171→    minScore: 0,\n  1172→    maxScore: 100,\n  1173→    weight: 0.15,\n  1174→  },\n  1175→  canthalTilt: {\n  1176→    idealValue: 6,\n  1177→    standardDeviation: 3,\n  1178→    minScore: 0,\n  1179→    maxScore: 100,\n  1180→    weight: 0.1,\n  1181→  },\n  1182→  facialThirds: {\n  1183→    idealValue: 33.33,\n  1184→    standardDeviation: 3,\n  1185→    minScore: 0,\n  1186→    maxScore: 100,\n  1187→    weight: 0.1,\n  1188→  },\n  1189→  nasolabialAngle: {\n  1190→    idealValue: 102,\n  1191→    standardDeviation: 8,\n  1192→    minScore: 0,\n  1193→    maxScore: 100,\n  1194→    weight: 0.08,\n  1195→  },\n  1196→  gonialAngle: {\n  1197→    idealValue: 125,\n  1198→    standardDeviation: 5,\n  1199→    minScore: 0,\n  1200→    maxScore: 100,\n  1201→    weight: 0.08,\n  1202→  },\n  1203→  overallSymmetry: {\n  1204→    idealValue: 100,\n  1205→    standardDeviation: 5,\n  1206→    minScore: 0,\n  1207→    maxScore: 100,\n  1208→    weight: 0.15,\n  1209→  },\n  1210→  goldenRatio: {\n  1211→    idealValue: 1.618,\n  1212→    standardDeviation: 0.1,\n  1213→    minScore: 0,\n  1214→    maxScore: 100,\n  1215→    weight: 0.12,\n  1216→  },\n  1217→  nasalIndex: {\n  1218→    idealValue: 0.7,\n  1219→    standardDeviation: 0.08,\n  1220→    minScore: 0,\n  1221→    maxScore: 100,\n  1222→    weight: 0.06,\n  1223→  },\n  1224→  lipRatio: {\n  1225→    idealValue: 0.5,\n  1226→    standardDeviation: 0.1,\n  1227→    minScore: 0,\n  1228→    maxScore: 100,\n  1229→    weight: 0.06,\n  1230→  },\n  1231→  chinProjection: {\n  1232→    idealValue: 0,\n  1233→    standardDeviation: 3,\n  1234→    minScore: 0,\n  1235→    maxScore: 100,\n  1236→    weight: 0.05,\n  1237→  },\n  1238→  noseProjection: {\n  1239→    idealValue: 0.67,\n  1240→    standardDeviation: 0.05,\n  1241→    minScore: 0,\n  1242→    maxScore: 100,\n  1243→    weight: 0.05,\n  1244→  },\n  1245→};\n  1246→\n  1247→// ============================================\n  1248→// Population Statistics for Percentile Ranking\n  1249→// ============================================\n  1250→\n  1251→export interface PopulationStats {\n  1252→  mean: number;\n  1253→  standardDeviation: number;\n  1254→  sampleSize: number;\n  1255→}\n  1256→\n  1257→export const POPULATION_STATS: Record<string, PopulationStats> = {\n  1258→  harmonyScore: { mean: 65, standardDeviation: 12, sampleSize: 10000 },\n  1259→  fwhr: { mean: 1.85, standardDeviation: 0.2, sampleSize: 10000 },\n  1260→  canthalTilt: { mean: 4, standardDeviation: 4, sampleSize: 10000 },\n  1261→  symmetry: { mean: 85, standardDeviation: 8, sampleSize: 10000 },\n  1262→  goldenRatioMatch: { mean: 70, standardDeviation: 15, sampleSize: 10000 },\n  1263→};\n  1264→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"fb42f74e-f37f-4fe3-a319-44fce73aa4cb","timestamp":"2025-12-19T22:00:45.022Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarks.ts","content":"/**\n * Facial Landmark Types and Default Data\n * Based on TECHNICAL_SPECS.md medical terminology\n */\n\nexport interface LandmarkPoint {\n  id: string;\n  label: string;\n  medicalTerm: string;\n  description: string;\n  x: number;\n  y: number;\n  category: string;\n}\n\nexport interface LandmarkCategory {\n  name: string;\n  color: string;\n  landmarks: string[];\n}\n\n// ============================================\n// FRONT PROFILE LANDMARKS (52 Points)\n// ============================================\n\nexport const FRONT_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n  {\n    name: 'Head',\n    color: '#FF6B6B',\n    landmarks: ['trichion'],\n  },\n  {\n    name: 'Eyes - Left',\n    color: '#4ECDC4',\n    landmarks: [\n      'left_pupila',\n      'left_canthus_medialis',\n      'left_canthus_lateralis',\n      'left_palpebra_superior',\n      'left_palpebra_inferior',\n      'left_sulcus_palpebralis_lateralis',\n      'left_pretarsal_skin_crease',\n    ],\n  },\n  {\n    name: 'Eyes - Right',\n    color: '#45B7D1',\n    landmarks: [\n      'right_pupila',\n      'right_canthus_medialis',\n      'right_canthus_lateralis',\n      'right_palpebra_superior',\n      'right_palpebra_inferior',\n      'right_sulcus_palpebralis_lateralis',\n      'right_pretarsal_skin_crease',\n    ],\n  },\n  {\n    name: 'Eyebrows - Left',\n    color: '#96CEB4',\n    landmarks: [\n      'left_supercilium_medialis',\n      'left_supercilium_medial_corner',\n      'left_supercilium_superior',\n      'left_supercilium_apex',\n      'left_supercilium_lateralis',\n    ],\n  },\n  {\n    name: 'Eyebrows - Right',\n    color: '#88D8B0',\n    landmarks: [\n      'right_supercilium_medialis',\n      'right_supercilium_medial_corner',\n      'right_supercilium_superior',\n      'right_supercilium_apex',\n      'right_supercilium_lateralis',\n    ],\n  },\n  {\n    name: 'Nose',\n    color: '#FFEAA7',\n    landmarks: [\n      'nasal_base',\n      'left_dorsum_nasi',\n      'right_dorsum_nasi',\n      'left_ala_nasi',\n      'right_ala_nasi',\n      'subnasale',\n    ],\n  },\n  {\n    name: 'Mouth',\n    color: '#DDA0DD',\n    landmarks: [\n      'labrale_superius',\n      'cupids_bow',\n      'mouth_middle',\n      'labrale_inferius',\n      'left_cheilion',\n      'right_cheilion',\n    ],\n  },\n  {\n    name: 'Jaw',\n    color: '#F39C12',\n    landmarks: [\n      'left_gonion_superior',\n      'right_gonion_superior',\n      'left_gonion_inferior',\n      'right_gonion_inferior',\n    ],\n  },\n  {\n    name: 'Chin',\n    color: '#E74C3C',\n    landmarks: ['left_mentum_lateralis', 'right_mentum_lateralis', 'menton'],\n  },\n  {\n    name: 'Face Width',\n    color: '#9B59B6',\n    landmarks: [\n      'left_zygion',\n      'right_zygion',\n      'left_temporal',\n      'right_temporal',\n      'left_auricular_lateral',\n      'right_auricular_lateral',\n    ],\n  },\n  {\n    name: 'Neck',\n    color: '#1ABC9C',\n    landmarks: ['left_cervical_lateralis', 'right_cervical_lateralis'],\n  },\n];\n\nexport const FRONT_PROFILE_LANDMARKS: LandmarkPoint[] = [\n  // Head/Hair\n  {\n    id: 'trichion',\n    label: 'Hairline',\n    medicalTerm: 'Trichion (frontal view)',\n    description: 'Anterior hairline at midline',\n    x: 0.5,\n    y: 0.08,\n    category: 'Head',\n  },\n\n  // Eyes - Left\n  {\n    id: 'left_pupila',\n    label: 'Left Pupil',\n    medicalTerm: 'Left Pupila',\n    description: 'Center of left pupil',\n    x: 0.38,\n    y: 0.35,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_canthus_medialis',\n    label: 'Left Medial Canthus',\n    medicalTerm: 'Left Canthus Medialis',\n    description: 'Inner corner of left eye',\n    x: 0.42,\n    y: 0.35,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_canthus_lateralis',\n    label: 'Left Lateral Canthus',\n    medicalTerm: 'Left Canthus Lateralis',\n    description: 'Outer corner of left eye',\n    x: 0.32,\n    y: 0.34,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_palpebra_superior',\n    label: 'Left Upper Eyelid',\n    medicalTerm: 'Left Palpebra Superior',\n    description: 'Upper eyelid of left eye',\n    x: 0.37,\n    y: 0.33,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_palpebra_inferior',\n    label: 'Left Lower Eyelid',\n    medicalTerm: 'Left Palpebra Inferior',\n    description: 'Lower eyelid of left eye',\n    x: 0.37,\n    y: 0.37,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_sulcus_palpebralis_lateralis',\n    label: 'Left Eyelid Hood End',\n    medicalTerm: 'Left Sulcus Palpebralis Lateralis',\n    description: 'Lateral end of left upper eyelid crease',\n    x: 0.31,\n    y: 0.33,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_pretarsal_skin_crease',\n    label: 'Left Upper Eyelid Crease',\n    medicalTerm: 'Left Pretarsal Skin Crease',\n    description: 'Left upper eyelid crease',\n    x: 0.37,\n    y: 0.32,\n    category: 'Eyes - Left',\n  },\n\n  // Eyes - Right\n  {\n    id: 'right_pupila',\n    label: 'Right Pupil',\n    medicalTerm: 'Right Pupila',\n    description: 'Center of right pupil',\n    x: 0.62,\n    y: 0.35,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_canthus_medialis',\n    label: 'Right Medial Canthus',\n    medicalTerm: 'Right Canthus Medialis',\n    description: 'Inner corner of right eye',\n    x: 0.58,\n    y: 0.35,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_canthus_lateralis',\n    label: 'Right Lateral Canthus',\n    medicalTerm: 'Right Canthus Lateralis',\n    description: 'Outer corner of right eye',\n    x: 0.68,\n    y: 0.34,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_palpebra_superior',\n    label: 'Right Upper Eyelid',\n    medicalTerm: 'Right Palpebra Superior',\n    description: 'Upper eyelid of right eye',\n    x: 0.63,\n    y: 0.33,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_palpebra_inferior',\n    label: 'Right Lower Eyelid',\n    medicalTerm: 'Right Palpebra Inferior',\n    description: 'Lower eyelid of right eye',\n    x: 0.63,\n    y: 0.37,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_sulcus_palpebralis_lateralis',\n    label: 'Right Eyelid Hood End',\n    medicalTerm: 'Right Sulcus Palpebralis Lateralis',\n    description: 'Lateral end of right upper eyelid crease',\n    x: 0.69,\n    y: 0.33,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_pretarsal_skin_crease',\n    label: 'Right Upper Eyelid Crease',\n    medicalTerm: 'Right Pretarsal Skin Crease',\n    description: 'Right upper eyelid crease',\n    x: 0.63,\n    y: 0.32,\n    category: 'Eyes - Right',\n  },\n\n  // Eyebrows - Left\n  {\n    id: 'left_supercilium_medialis',\n    label: 'Left Brow Head',\n    medicalTerm: 'Left Supercilium Medialis',\n    description: 'Medial start of left eyebrow',\n    x: 0.43,\n    y: 0.28,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_medial_corner',\n    label: 'Left Brow Inner Corner',\n    medicalTerm: 'Left Supercilium Medial Corner',\n    description: 'Inner corner of left eyebrow',\n    x: 0.41,\n    y: 0.27,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_superior',\n    label: 'Left Brow Arch',\n    medicalTerm: 'Left Supercilium Superior',\n    description: 'Superior arc of left eyebrow',\n    x: 0.36,\n    y: 0.26,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_apex',\n    label: 'Left Brow Peak',\n    medicalTerm: 'Left Supercilium Apex',\n    description: 'Highest point of left eyebrow',\n    x: 0.34,\n    y: 0.26,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_lateralis',\n    label: 'Left Brow Tail',\n    medicalTerm: 'Left Supercilium Lateralis',\n    description: 'Lateral end of left eyebrow',\n    x: 0.29,\n    y: 0.28,\n    category: 'Eyebrows - Left',\n  },\n\n  // Eyebrows - Right\n  {\n    id: 'right_supercilium_medialis',\n    label: 'Right Brow Head',\n    medicalTerm: 'Right Supercilium Medialis',\n    description: 'Medial start of right eyebrow',\n    x: 0.57,\n    y: 0.28,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_medial_corner',\n    label: 'Right Brow Inner Corner',\n    medicalTerm: 'Right Supercilium Medial Corner',\n    description: 'Inner corner of right eyebrow',\n    x: 0.59,\n    y: 0.27,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_superior',\n    label: 'Right Brow Arch',\n    medicalTerm: 'Right Supercilium Superior',\n    description: 'Superior arc of right eyebrow',\n    x: 0.64,\n    y: 0.26,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_apex',\n    label: 'Right Brow Peak',\n    medicalTerm: 'Right Supercilium Apex',\n    description: 'Highest point of right eyebrow',\n    x: 0.66,\n    y: 0.26,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_lateralis',\n    label: 'Right Brow Tail',\n    medicalTerm: 'Right Supercilium Lateralis',\n    description: 'Lateral end of right eyebrow',\n    x: 0.71,\n    y: 0.28,\n    category: 'Eyebrows - Right',\n  },\n\n  // Nose\n  {\n    id: 'nasal_base',\n    label: 'Nasal Base',\n    medicalTerm: 'Nasal Base',\n    description: 'Base of nasal dorsum',\n    x: 0.5,\n    y: 0.38,\n    category: 'Nose',\n  },\n  {\n    id: 'left_dorsum_nasi',\n    label: 'Left Nose Bridge',\n    medicalTerm: 'Left Dorsum Nasi',\n    description: 'Left side of nasal bridge',\n    x: 0.47,\n    y: 0.42,\n    category: 'Nose',\n  },\n  {\n    id: 'right_dorsum_nasi',\n    label: 'Right Nose Bridge',\n    medicalTerm: 'Right Dorsum Nasi',\n    description: 'Right side of nasal bridge',\n    x: 0.53,\n    y: 0.42,\n    category: 'Nose',\n  },\n  {\n    id: 'left_ala_nasi',\n    label: 'Left Nose Side',\n    medicalTerm: 'Left Ala Nasi',\n    description: 'Lateral aspect of left nasal ala',\n    x: 0.44,\n    y: 0.5,\n    category: 'Nose',\n  },\n  {\n    id: 'right_ala_nasi',\n    label: 'Right Nose Side',\n    medicalTerm: 'Right Ala Nasi',\n    description: 'Lateral aspect of right nasal ala',\n    x: 0.56,\n    y: 0.5,\n    category: 'Nose',\n  },\n  {\n    id: 'subnasale',\n    label: 'Nose Bottom',\n    medicalTerm: 'Subnasale',\n    description: 'Junction of columella and upper lip',\n    x: 0.5,\n    y: 0.52,\n    category: 'Nose',\n  },\n\n  // Mouth\n  {\n    id: 'labrale_superius',\n    label: \"Cupid's Bow\",\n    medicalTerm: 'Labrale Superius',\n    description: 'Midpoint of upper lip vermilion',\n    x: 0.5,\n    y: 0.58,\n    category: 'Mouth',\n  },\n  {\n    id: 'cupids_bow',\n    label: \"Inner Cupid's Bow\",\n    medicalTerm: \"Cupid's Bow\",\n    description: 'Central peak of upper lip',\n    x: 0.5,\n    y: 0.57,\n    category: 'Mouth',\n  },\n  {\n    id: 'mouth_middle',\n    label: 'Mouth Middle',\n    medicalTerm: 'Mouth Middle',\n    description: 'Center of mouth opening',\n    x: 0.5,\n    y: 0.62,\n    category: 'Mouth',\n  },\n  {\n    id: 'labrale_inferius',\n    label: 'Lower Lip Center',\n    medicalTerm: 'Labrale Inferius',\n    description: 'Midpoint of lower lip vermilion border',\n    x: 0.5,\n    y: 0.66,\n    category: 'Mouth',\n  },\n  {\n    id: 'left_cheilion',\n    label: 'Left Mouth Corner',\n    medicalTerm: 'Left Cheilion',\n    description: 'Left oral commissure',\n    x: 0.42,\n    y: 0.62,\n    category: 'Mouth',\n  },\n  {\n    id: 'right_cheilion',\n    label: 'Right Mouth Corner',\n    medicalTerm: 'Right Cheilion',\n    description: 'Right oral commissure',\n    x: 0.58,\n    y: 0.62,\n    category: 'Mouth',\n  },\n\n  // Jaw\n  {\n    id: 'left_gonion_superior',\n    label: 'Left Upper Jaw Angle',\n    medicalTerm: 'Left Gonion Superior',\n    description: 'Superior aspect of left mandibular angle',\n    x: 0.22,\n    y: 0.55,\n    category: 'Jaw',\n  },\n  {\n    id: 'right_gonion_superior',\n    label: 'Right Upper Jaw Angle',\n    medicalTerm: 'Right Gonion Superior',\n    description: 'Superior aspect of right mandibular angle',\n    x: 0.78,\n    y: 0.55,\n    category: 'Jaw',\n  },\n  {\n    id: 'left_gonion_inferior',\n    label: 'Left Lower Jaw Angle',\n    medicalTerm: 'Left Gonion Inferior',\n    description: 'Inferior aspect of left mandibular angle',\n    x: 0.24,\n    y: 0.7,\n    category: 'Jaw',\n  },\n  {\n    id: 'right_gonion_inferior',\n    label: 'Right Lower Jaw Angle',\n    medicalTerm: 'Right Gonion Inferior',\n    description: 'Inferior aspect of right mandibular angle',\n    x: 0.76,\n    y: 0.7,\n    category: 'Jaw',\n  },\n\n  // Chin\n  {\n    id: 'left_mentum_lateralis',\n    label: 'Left Chin',\n    medicalTerm: 'Left Mentum Lateralis',\n    description: 'Left lateral chin',\n    x: 0.42,\n    y: 0.8,\n    category: 'Chin',\n  },\n  {\n    id: 'right_mentum_lateralis',\n    label: 'Right Chin',\n    medicalTerm: 'Right Mentum Lateralis',\n    description: 'Right lateral chin',\n    x: 0.58,\n    y: 0.8,\n    category: 'Chin',\n  },\n  {\n    id: 'menton',\n    label: 'Chin Bottom',\n    medicalTerm: 'Menton',\n    description: 'Lowest point of chin in midline',\n    x: 0.5,\n    y: 0.88,\n    category: 'Chin',\n  },\n\n  // Face Width\n  {\n    id: 'left_zygion',\n    label: 'Left Cheekbone',\n    medicalTerm: 'Left Zygion',\n    description: 'Most lateral point of left zygomatic arch',\n    x: 0.18,\n    y: 0.42,\n    category: 'Face Width',\n  },\n  {\n    id: 'right_zygion',\n    label: 'Right Cheekbone',\n    medicalTerm: 'Right Zygion',\n    description: 'Most lateral point of right zygomatic arch',\n    x: 0.82,\n    y: 0.42,\n    category: 'Face Width',\n  },\n  {\n    id: 'left_temporal',\n    label: 'Left Temple',\n    medicalTerm: 'Left Temporal Point',\n    description: 'Left temporal region',\n    x: 0.2,\n    y: 0.3,\n    category: 'Face Width',\n  },\n  {\n    id: 'right_temporal',\n    label: 'Right Temple',\n    medicalTerm: 'Right Temporal Point',\n    description: 'Right temporal region',\n    x: 0.8,\n    y: 0.3,\n    category: 'Face Width',\n  },\n  {\n    id: 'left_auricular_lateral',\n    label: 'Left Outer Ear',\n    medicalTerm: 'Left Auricular Lateral Point',\n    description: 'Lateral-most point of left ear',\n    x: 0.12,\n    y: 0.4,\n    category: 'Face Width',\n  },\n  {\n    id: 'right_auricular_lateral',\n    label: 'Right Outer Ear',\n    medicalTerm: 'Right Auricular Lateral Point',\n    description: 'Lateral-most point of right ear',\n    x: 0.88,\n    y: 0.4,\n    category: 'Face Width',\n  },\n\n  // Neck\n  {\n    id: 'left_cervical_lateralis',\n    label: 'Left Neck Point',\n    medicalTerm: 'Left Cervical Lateralis',\n    description: 'Left cervical point',\n    x: 0.35,\n    y: 0.95,\n    category: 'Neck',\n  },\n  {\n    id: 'right_cervical_lateralis',\n    label: 'Right Neck Point',\n    medicalTerm: 'Right Cervical Lateralis',\n    description: 'Right cervical point',\n    x: 0.65,\n    y: 0.95,\n    category: 'Neck',\n  },\n];\n\n// ============================================\n// SIDE PROFILE LANDMARKS (38 Points)\n// ============================================\n\nexport const SIDE_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n  {\n    name: 'Cranium',\n    color: '#FF6B6B',\n    landmarks: ['vertex', 'external_occipital_region', 'trichion_profile'],\n  },\n  {\n    name: 'Forehead',\n    color: '#4ECDC4',\n    landmarks: ['frontalis', 'glabella'],\n  },\n  {\n    name: 'Eye Region',\n    color: '#45B7D1',\n    landmarks: [\n      'corneal_apex',\n      'lateral_eyelid',\n      'palpebra_inferior_side',\n      'orbitale',\n    ],\n  },\n  {\n    name: 'Nose',\n    color: '#FFEAA7',\n    landmarks: [\n      'nasion',\n      'rhinion',\n      'supratip_break',\n      'pronasale',\n      'infratip_lobule',\n      'columella_nasi',\n      'subnasale_side',\n      'subalare',\n    ],\n  },\n  {\n    name: 'Lips',\n    color: '#DDA0DD',\n    landmarks: [\n      'labrale_superius_side',\n      'cheilion_side',\n      'labrale_inferius_side',\n      'sublabiale',\n    ],\n  },\n  {\n    name: 'Chin',\n    color: '#E74C3C',\n    landmarks: ['pogonion', 'menton_side'],\n  },\n  {\n    name: 'Jaw',\n    color: '#F39C12',\n    landmarks: ['gonion_superior_side', 'gonion_inferior_side'],\n  },\n  {\n    name: 'Cheek',\n    color: '#9B59B6',\n    landmarks: ['zygion_soft_tissue'],\n  },\n  {\n    name: 'Ear',\n    color: '#3498DB',\n    landmarks: ['porion', 'tragion', 'incisura_intertragica'],\n  },\n  {\n    name: 'Neck',\n    color: '#1ABC9C',\n    landmarks: ['cervicale', 'anterior_cervical_landmark'],\n  },\n];\n\nexport const SIDE_PROFILE_LANDMARKS: LandmarkPoint[] = [\n  // Cranium\n  {\n    id: 'vertex',\n    label: 'Top of Head',\n    medicalTerm: 'Vertex',\n    description: 'Highest point of cranium',\n    x: 0.45,\n    y: 0.02,\n    category: 'Cranium',\n  },\n  {\n    id: 'external_occipital_region',\n    label: 'Occiput',\n    medicalTerm: 'External Occipital Region',\n    description: 'Back of skull',\n    x: 0.85,\n    y: 0.15,\n    category: 'Cranium',\n  },\n  {\n    id: 'trichion_profile',\n    label: 'Hairline (profile)',\n    medicalTerm: 'Trichion',\n    description: 'Anterior hairline (profile view)',\n    x: 0.35,\n    y: 0.1,\n    category: 'Cranium',\n  },\n\n  // Forehead\n  {\n    id: 'frontalis',\n    label: 'Forehead',\n    medicalTerm: 'Frontalis',\n    description: 'Forehead region',\n    x: 0.3,\n    y: 0.18,\n    category: 'Forehead',\n  },\n  {\n    id: 'glabella',\n    label: 'Glabella',\n    medicalTerm: 'Glabella',\n    description: 'Most prominent point between eyebrows',\n    x: 0.32,\n    y: 0.28,\n    category: 'Forehead',\n  },\n\n  // Eye Region\n  {\n    id: 'corneal_apex',\n    label: 'Corneal Apex',\n    medicalTerm: 'Corneal Apex',\n    description: 'Most anterior point of cornea',\n    x: 0.28,\n    y: 0.34,\n    category: 'Eye Region',\n  },\n  {\n    id: 'lateral_eyelid',\n    label: 'Eyelid End',\n    medicalTerm: 'Lateral Eyelid',\n    description: 'Lateral extent of palpebral fissure',\n    x: 0.35,\n    y: 0.34,\n    category: 'Eye Region',\n  },\n  {\n    id: 'palpebra_inferior_side',\n    label: 'Lower Eyelid',\n    medicalTerm: 'Left Palpebra Inferior',\n    description: 'Lower eyelid margin (profile view)',\n    x: 0.3,\n    y: 0.36,\n    category: 'Eye Region',\n  },\n  {\n    id: 'orbitale',\n    label: 'Orbitale',\n    medicalTerm: 'Orbitale',\n    description: 'Lowest point of infraorbital margin',\n    x: 0.35,\n    y: 0.38,\n    category: 'Eye Region',\n  },\n\n  // Nose\n  {\n    id: 'nasion',\n    label: 'Nasal Bridge Front',\n    medicalTerm: 'Nasion',\n    description: 'Deepest point of nasal root',\n    x: 0.35,\n    y: 0.32,\n    category: 'Nose',\n  },\n  {\n    id: 'rhinion',\n    label: 'Rhinion',\n    medicalTerm: 'Rhinion',\n    description: 'Junction of bony and cartilaginous nose',\n    x: 0.28,\n    y: 0.4,\n    category: 'Nose',\n  },\n  {\n    id: 'supratip_break',\n    label: 'Supratip',\n    medicalTerm: 'Supratip Break',\n    description: 'Depression above nasal tip',\n    x: 0.22,\n    y: 0.46,\n    category: 'Nose',\n  },\n  {\n    id: 'pronasale',\n    label: 'Nose Tip',\n    medicalTerm: 'Pronasale',\n    description: 'Most anterior point of nasal tip',\n    x: 0.18,\n    y: 0.48,\n    category: 'Nose',\n  },\n  {\n    id: 'infratip_lobule',\n    label: 'Infratip',\n    medicalTerm: 'Infratip Lobule',\n    description: 'Area below nasal tip',\n    x: 0.2,\n    y: 0.5,\n    category: 'Nose',\n  },\n  {\n    id: 'columella_nasi',\n    label: 'Columella',\n    medicalTerm: 'Columella Nasi',\n    description: 'Fleshy external end of nasal septum',\n    x: 0.24,\n    y: 0.52,\n    category: 'Nose',\n  },\n  {\n    id: 'subnasale_side',\n    label: 'Subnasale',\n    medicalTerm: 'Subnasale',\n    description: 'Junction of columella and upper lip',\n    x: 0.3,\n    y: 0.54,\n    category: 'Nose',\n  },\n  {\n    id: 'subalare',\n    label: 'Subalare',\n    medicalTerm: 'Subalare',\n    description: 'Junction of alar base and upper lip',\n    x: 0.28,\n    y: 0.53,\n    category: 'Nose',\n  },\n\n  // Lips\n  {\n    id: 'labrale_superius_side',\n    label: 'Upper Lip',\n    medicalTerm: 'Labrale Superius',\n    description: 'Upper lip vermilion border',\n    x: 0.28,\n    y: 0.58,\n    category: 'Lips',\n  },\n  {\n    id: 'cheilion_side',\n    label: 'Mouth Corner',\n    medicalTerm: 'Cheilion',\n    description: 'Oral commissure (profile view)',\n    x: 0.35,\n    y: 0.62,\n    category: 'Lips',\n  },\n  {\n    id: 'labrale_inferius_side',\n    label: 'Lower Lip',\n    medicalTerm: 'Labrale Inferius',\n    description: 'Lower lip vermilion border',\n    x: 0.3,\n    y: 0.66,\n    category: 'Lips',\n  },\n  {\n    id: 'sublabiale',\n    label: 'Labiomental Fold',\n    medicalTerm: 'Sublabiale',\n    description: 'Deepest point of labiomental sulcus',\n    x: 0.32,\n    y: 0.7,\n    category: 'Lips',\n  },\n\n  // Chin\n  {\n    id: 'pogonion',\n    label: 'Chin Point',\n    medicalTerm: 'Pogonion (soft tissue)',\n    description: 'Most anterior point of chin',\n    x: 0.3,\n    y: 0.76,\n    category: 'Chin',\n  },\n  {\n    id: 'menton_side',\n    label: 'Chin Bottom',\n    medicalTerm: 'Menton (soft tissue)',\n    description: 'Lowest point of chin',\n    x: 0.35,\n    y: 0.82,\n    category: 'Chin',\n  },\n\n  // Jaw\n  {\n    id: 'gonion_superior_side',\n    label: 'Upper Jaw Angle',\n    medicalTerm: 'Gonion Superior',\n    description: 'Superior mandibular angle',\n    x: 0.7,\n    y: 0.6,\n    category: 'Jaw',\n  },\n  {\n    id: 'gonion_inferior_side',\n    label: 'Lower Jaw Angle',\n    medicalTerm: 'Gonion Inferior',\n    description: 'Inferior mandibular angle',\n    x: 0.65,\n    y: 0.72,\n    category: 'Jaw',\n  },\n\n  // Cheek\n  {\n    id: 'zygion_soft_tissue',\n    label: 'Cheekbone',\n    medicalTerm: 'Zygion (soft tissue over zygoma)',\n    description: 'Soft tissue over zygomatic arch',\n    x: 0.45,\n    y: 0.42,\n    category: 'Cheek',\n  },\n\n  // Ear\n  {\n    id: 'porion',\n    label: 'Porion',\n    medicalTerm: 'Porion (soft tissue)',\n    description: 'Superior aspect of external auditory meatus',\n    x: 0.75,\n    y: 0.35,\n    category: 'Ear',\n  },\n  {\n    id: 'tragion',\n    label: 'Tragus',\n    medicalTerm: 'Tragion (soft tissue)',\n    description: 'Superior margin of tragus',\n    x: 0.72,\n    y: 0.42,\n    category: 'Ear',\n  },\n  {\n    id: 'incisura_intertragica',\n    label: 'Intertragic Notch',\n    medicalTerm: 'Incisura Intertragica',\n    description: 'Notch between tragus and antitragus',\n    x: 0.73,\n    y: 0.45,\n    category: 'Ear',\n  },\n\n  // Neck\n  {\n    id: 'cervicale',\n    label: 'Cervical Point',\n    medicalTerm: 'Cervicale (soft tissue reference)',\n    description: 'Cervical point for profile analysis',\n    x: 0.5,\n    y: 0.9,\n    category: 'Neck',\n  },\n  {\n    id: 'anterior_cervical_landmark',\n    label: 'Neck Point',\n    medicalTerm: 'Anterior Cervical Landmark',\n    description: 'Anterior neck landmark',\n    x: 0.4,\n    y: 0.88,\n    category: 'Neck',\n  },\n];\n\n// ============================================\n// MediaPipe Face Mesh Index Mapping\n// ============================================\n// NOTE: MEDIAPIPE_FRONT_MAPPING is defined in mediapipeDetection.ts (single source of truth)\n// Import from there if needed: import { MEDIAPIPE_FRONT_MAPPING } from './mediapipeDetection';\n\n// Helper to get category color for a landmark\nexport function getLandmarkColor(\n  landmarkId: string,\n  categories: LandmarkCategory[]\n): string {\n  for (const category of categories) {\n    if (category.landmarks.includes(landmarkId)) {\n      return category.color;\n    }\n  }\n  return '#00f3ff'; // Default cyan\n}\n\n// ============================================\n// FaceIQ Side Profile Landmark Indices (106 points)\n// Reverse-engineered from FaceIQ Labs API\n// ============================================\n\nexport const FACEIQ_SIDE_LANDMARKS = {\n  // Face Contour (0-16) - Jaw/Chin outline\n  MENTON: 0, // Chin bottom (lowest point)\n  POGONION: 2, // Chin prominence\n  GNATHION: 3, // Chin point\n  MANDIBLE_CONTOUR: [2, 3, 4, 5, 6, 7, 8], // Jaw line\n\n  // Posterior Points (1, 9-16) - Ear/Back of head\n  TRAGION: 1, // Ear point\n  EAR_CONTOUR: [9, 10, 11, 12, 13, 14, 15, 16],\n\n  // Forehead/Hairline (17)\n  TRICHION: 17, // Hairline\n\n  // Nose Profile (18-32)\n  NASION: 25, // Bridge of nose (deepest point)\n  PRONASALE: 32, // Nose tip\n  SUBNASALE: 52, // Base of nose\n  COLUMELLA: 53, // Nose columella\n  NOSE_BRIDGE: [25, 26, 27, 28, 29, 30, 31, 32],\n  NOSE_TIP_CONTOUR: [52, 53, 54, 55, 56, 57, 58, 59, 60],\n\n  // Eye Region (33-51)\n  EYE_LATERAL_CANTHUS: 33, // Outer eye corner\n  EYE_MEDIAL_CANTHUS: 35, // Inner eye corner\n  UPPER_EYELID: [37, 38, 39],\n  LOWER_EYELID: [40, 41, 42],\n  PUPIL: 34,\n  BROW_HEAD: 44, // Inner brow\n  BROW_ARCH: 45, // Brow peak\n  BROW_TAIL: 46, // Outer brow\n\n  // Lip Region (52-75)\n  LABRALE_SUPERIUS: 63, // Upper lip top\n  LABRALE_INFERIUS: 66, // Lower lip bottom\n  STOMION: 65, // Lip meeting point\n  UPPER_LIP_CONTOUR: [63, 64, 65],\n  LOWER_LIP_CONTOUR: [66, 67, 68],\n\n  // Additional Profile Points (76-105)\n  GLABELLA: 76, // Between eyebrows\n  SELLION: 77, // Deepest point of nasal bridge\n  SOFT_TISSUE_NASION: 78,\n  ORBITALE: 79, // Lowest point of eye socket\n  GONION: 85, // Jaw angle\n  CONDYLION: 86, // Top of jaw joint\n};\n\n// ============================================\n// FaceIQ Front Face Landmark Indices (MediaPipe 478 points)\n// ============================================\n\nexport const FACEIQ_FRONT_LANDMARKS = {\n  // Key points from MediaPipe Face Mesh\n  NOSE_TIP: 1,\n  LEFT_EYE_INNER: 133,\n  LEFT_EYE_OUTER: 33,\n  RIGHT_EYE_INNER: 362,\n  RIGHT_EYE_OUTER: 263,\n  LEFT_CHEEK: 234,\n  RIGHT_CHEEK: 454,\n  UPPER_LIP: 13,\n  LOWER_LIP: 14,\n  CHIN: 152,\n  FOREHEAD: 10,\n  LEFT_EAR: 234,\n  RIGHT_EAR: 454,\n  LEFT_BROW_INNER: 107,\n  LEFT_BROW_OUTER: 70,\n  RIGHT_BROW_INNER: 336,\n  RIGHT_BROW_OUTER: 300,\n  NOSE_BRIDGE: 6,\n  LEFT_NOSTRIL: 129,\n  RIGHT_NOSTRIL: 358,\n};\n\n// ============================================\n// Scoring Configuration Types\n// ============================================\n\nexport interface ScoringConfig {\n  idealValue: number;\n  standardDeviation: number;\n  minScore: number;\n  maxScore: number;\n  weight: number;\n}\n\nexport interface GenderSpecificValues {\n  male: { ideal: number; range: [number, number] };\n  female: { ideal: number; range: [number, number] };\n}\n\n// ============================================\n// FaceIQ Ideal Values (Gender-Specific)\n// ============================================\n\nexport const FACEIQ_IDEAL_VALUES: Record<string, GenderSpecificValues> = {\n  fwhr: {\n    male: { ideal: 1.9, range: [1.8, 2.1] },\n    female: { ideal: 1.75, range: [1.6, 1.9] },\n  },\n  canthalTilt: {\n    male: { ideal: 4, range: [2, 7] },\n    female: { ideal: 6, range: [4, 10] },\n  },\n  nasolabialAngle: {\n    male: { ideal: 95, range: [90, 100] },\n    female: { ideal: 105, range: [100, 115] },\n  },\n  gonialAngle: {\n    male: { ideal: 125, range: [120, 130] },\n    female: { ideal: 128, range: [125, 135] },\n  },\n  nasalIndex: {\n    male: { ideal: 0.7, range: [0.65, 0.75] },\n    female: { ideal: 0.65, range: [0.6, 0.7] },\n  },\n  lipRatio: {\n    male: { ideal: 0.5, range: [0.4, 0.6] },\n    female: { ideal: 0.5, range: [0.45, 0.55] },\n  },\n  facialConvexity: {\n    male: { ideal: 170, range: [165, 175] },\n    female: { ideal: 168, range: [163, 173] },\n  },\n  chinProjection: {\n    male: { ideal: 0, range: [-3, 3] },\n    female: { ideal: -2, range: [-5, 1] },\n  },\n};\n\n// ============================================\n// FaceIQ Scoring Configurations\n// ============================================\n\nexport const FACEIQ_SCORING_CONFIGS: Record<string, ScoringConfig> = {\n  fwhr: {\n    idealValue: 1.9,\n    standardDeviation: 0.15,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.15,\n  },\n  canthalTilt: {\n    idealValue: 6,\n    standardDeviation: 3,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.1,\n  },\n  facialThirds: {\n    idealValue: 33.33,\n    standardDeviation: 3,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.1,\n  },\n  nasolabialAngle: {\n    idealValue: 102,\n    standardDeviation: 8,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.08,\n  },\n  gonialAngle: {\n    idealValue: 125,\n    standardDeviation: 5,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.08,\n  },\n  overallSymmetry: {\n    idealValue: 100,\n    standardDeviation: 5,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.15,\n  },\n  goldenRatio: {\n    idealValue: 1.618,\n    standardDeviation: 0.1,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.12,\n  },\n  nasalIndex: {\n    idealValue: 0.7,\n    standardDeviation: 0.08,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.06,\n  },\n  lipRatio: {\n    idealValue: 0.5,\n    standardDeviation: 0.1,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.06,\n  },\n  chinProjection: {\n    idealValue: 0,\n    standardDeviation: 3,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.05,\n  },\n  noseProjection: {\n    idealValue: 0.67,\n    standardDeviation: 0.05,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.05,\n  },\n};\n\n// ============================================\n// Population Statistics for Percentile Ranking\n// ============================================\n\nexport interface PopulationStats {\n  mean: number;\n  standardDeviation: number;\n  sampleSize: number;\n}\n\nexport const POPULATION_STATS: Record<string, PopulationStats> = {\n  harmonyScore: { mean: 65, standardDeviation: 12, sampleSize: 10000 },\n  fwhr: { mean: 1.85, standardDeviation: 0.2, sampleSize: 10000 },\n  canthalTilt: { mean: 4, standardDeviation: 4, sampleSize: 10000 },\n  symmetry: { mean: 85, standardDeviation: 8, sampleSize: 10000 },\n  goldenRatioMatch: { mean: 70, standardDeviation: 15, sampleSize: 10000 },\n};\n","numLines":1264,"startLine":1,"totalLines":1264}}}
{"parentUuid":"fb42f74e-f37f-4fe3-a319-44fce73aa4cb","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0117Gs5ibN8zX7mJdZvsJ9dz","type":"tool_result","content":"     1→'use client';\n     2→\n     3→import { useState, useRef, useCallback, useEffect } from 'react';\n     4→import Image from 'next/image';\n     5→import { motion, AnimatePresence } from 'framer-motion';\n     6→import { RotateCcw, ChevronLeft, ChevronRight, Wand2, Loader2, ZoomIn, ZoomOut } from 'lucide-react';\n     7→import {\n     8→  LandmarkPoint,\n     9→  SIDE_PROFILE_LANDMARKS,\n    10→  SIDE_LANDMARK_CATEGORIES,\n    11→  getLandmarkColor,\n    12→} from '@/lib/landmarks';\n    13→import { useFaceApi, FACE_API_LANDMARK_MAPPING } from '@/hooks/useFaceApi';\n    14→\n    15→// Re-export types for backwards compatibility\n    16→export type { LandmarkPoint } from '@/lib/landmarks';\n    17→\n    18→interface SideProfileManualToolProps {\n    19→  imageUrl: string;\n    20→  onLandmarksChange?: (landmarks: LandmarkPoint[]) => void;\n    21→  onComplete?: (landmarks: LandmarkPoint[]) => void;\n    22→}\n    23→\n    24→export function SideProfileManualTool({\n    25→  imageUrl,\n    26→  onLandmarksChange,\n    27→  onComplete,\n    28→}: SideProfileManualToolProps) {\n    29→  const containerRef = useRef<HTMLDivElement>(null);\n    30→  const imageRef = useRef<HTMLImageElement>(null);\n    31→  const [landmarks, setLandmarks] = useState<LandmarkPoint[]>(SIDE_PROFILE_LANDMARKS);\n    32→  const [activeLandmark, setActiveLandmark] = useState<string | null>(null);\n    33→  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n    34→  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n    35→  const [isGuided, setIsGuided] = useState(true);\n    36→  const [zoom, setZoom] = useState(1);\n    37→  const [isDetecting, setIsDetecting] = useState(false);\n    38→  const [detectionError, setDetectionError] = useState<string | null>(null);\n    39→\n    40→  // Face API hook for auto-detection\n    41→  const { isLoading: faceApiLoading, isReady: faceApiReady, error: faceApiError, detect } = useFaceApi();\n    42→\n    43→  useEffect(() => {\n    44→    onLandmarksChange?.(landmarks);\n    45→  }, [landmarks, onLandmarksChange]);\n    46→\n    47→  // Auto-detect landmarks using face-api.js\n    48→  const handleAutoDetect = useCallback(async () => {\n    49→    if (!faceApiReady || !imageRef.current) {\n    50→      setDetectionError('Face detection not ready. Please wait...');\n    51→      return;\n    52→    }\n    53→\n    54→    setIsDetecting(true);\n    55→    setDetectionError(null);\n    56→\n    57→    try {\n    58→      const result = await detect(imageRef.current);\n    59→\n    60→      if (!result) {\n    61→        setDetectionError('No face detected. Please ensure your side profile is clearly visible.');\n    62→        setIsDetecting(false);\n    63→        return;\n    64→      }\n    65→\n    66→      // Get image dimensions\n    67→      const imgWidth = imageRef.current.naturalWidth;\n    68→      const imgHeight = imageRef.current.naturalHeight;\n    69→\n    70→      // Map face-api.js 68-point landmarks to our side profile landmarks\n    71→      const detectedLandmarks = result.landmarks;\n    72→\n    73→      setLandmarks((prev) =>\n    74→        prev.map((lm) => {\n    75→          // Map our landmark IDs to face-api indices\n    76→          let detectedPoint = null;\n    77→\n    78→          switch (lm.id) {\n    79→            // Chin/Jaw landmarks\n    80→            case 'menton_side':\n    81→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.MENTON];\n    82→              break;\n    83→            case 'pogonion':\n    84→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.MENTON];\n    85→              break;\n    86→            case 'gonion_inferior_side':\n    87→              detectedPoint = detectedLandmarks[4]; // Jaw contour point\n    88→              break;\n    89→            case 'gonion_superior_side':\n    90→              detectedPoint = detectedLandmarks[3]; // Higher jaw point\n    91→              break;\n    92→\n    93→            // Nose landmarks\n    94→            case 'nasion':\n    95→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.NASION];\n    96→              break;\n    97→            case 'pronasale':\n    98→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.PRONASALE];\n    99→              break;\n   100→            case 'rhinion':\n   101→              detectedPoint = detectedLandmarks[28]; // Mid nose bridge\n   102→              break;\n   103→            case 'subnasale_side':\n   104→              detectedPoint = detectedLandmarks[33]; // Nose bottom center\n   105→              break;\n   106→            case 'columella_nasi':\n   107→              detectedPoint = detectedLandmarks[33];\n   108→              break;\n   109→\n   110→            // Lip landmarks\n   111→            case 'labrale_superius_side':\n   112→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.UPPER_LIP_TOP];\n   113→              break;\n   114→            case 'labrale_inferius_side':\n   115→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.LOWER_LIP_BOTTOM];\n   116→              break;\n   117→            case 'cheilion_side':\n   118→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.LEFT_MOUTH_CORNER];\n   119→              break;\n   120→            case 'sublabiale':\n   121→              // Approximate from lower lip and chin\n   122→              const lowerLip = detectedLandmarks[57];\n   123→              const chin = detectedLandmarks[8];\n   124→              if (lowerLip && chin) {\n   125→                detectedPoint = {\n   126→                  x: (lowerLip.x + chin.x) / 2,\n   127→                  y: lowerLip.y + (chin.y - lowerLip.y) * 0.3,\n   128→                };\n   129→              }\n   130→              break;\n   131→\n   132→            // Eye region\n   133→            case 'corneal_apex':\n   134→              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.LEFT_EYE_OUTER];\n   135→              break;\n   136→            case 'lateral_eyelid':\n   137→              detectedPoint = detectedLandmarks[36]; // Outer eye corner\n   138→              break;\n   139→            case 'palpebra_inferior_side':\n   140→              detectedPoint = detectedLandmarks[40]; // Lower eyelid\n   141→              break;\n   142→            case 'orbitale':\n   143→              detectedPoint = detectedLandmarks[41]; // Lower eye socket\n   144→              break;\n   145→\n   146→            // Forehead\n   147→            case 'glabella':\n   148→              // Approximate from brow points\n   149→              const leftBrow = detectedLandmarks[21];\n   150→              const rightBrow = detectedLandmarks[22];\n   151→              if (leftBrow && rightBrow) {\n   152→                detectedPoint = {\n   153→                  x: (leftBrow.x + rightBrow.x) / 2,\n   154→                  y: (leftBrow.y + rightBrow.y) / 2,\n   155→                };\n   156→              }\n   157→              break;\n   158→\n   159→            // Ear landmarks (use jaw contour as proxy)\n   160→            case 'tragion':\n   161→              detectedPoint = detectedLandmarks[1]; // Upper jaw near ear\n   162→              break;\n   163→            case 'porion':\n   164→              detectedPoint = detectedLandmarks[0]; // Near ear\n   165→              break;\n   166→\n   167→            default:\n   168→              break;\n   169→          }\n   170→\n   171→          if (detectedPoint) {\n   172→            return {\n   173→              ...lm,\n   174→              x: detectedPoint.x / imgWidth,\n   175→              y: detectedPoint.y / imgHeight,\n   176→            };\n   177→          }\n   178→\n   179→          return lm;\n   180→        })\n   181→      );\n   182→\n   183→      setIsDetecting(false);\n   184→    } catch (err) {\n   185→      setDetectionError(err instanceof Error ? err.message : 'Detection failed');\n   186→      setIsDetecting(false);\n   187→    }\n   188→  }, [faceApiReady, detect]);\n   189→\n   190→  // Zoom controls\n   191→  const handleZoomIn = () => setZoom((prev) => Math.min(prev + 0.25, 3));\n   192→  const handleZoomOut = () => setZoom((prev) => Math.max(prev - 0.25, 0.5));\n   193→\n   194→  const handleMouseDown = useCallback((id: string) => {\n   195→    setActiveLandmark(id);\n   196→  }, []);\n   197→\n   198→  const handleMouseMove = useCallback(\n   199→    (e: React.MouseEvent<HTMLDivElement>) => {\n   200→      if (!activeLandmark || !containerRef.current) return;\n   201→\n   202→      const rect = containerRef.current.getBoundingClientRect();\n   203→      const x = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));\n   204→      const y = Math.max(0, Math.min(1, (e.clientY - rect.top) / rect.height));\n   205→\n   206→      setLandmarks((prev) =>\n   207→        prev.map((lm) => (lm.id === activeLandmark ? { ...lm, x, y } : lm))\n   208→      );\n   209→    },\n   210→    [activeLandmark]\n   211→  );\n   212→\n   213→  const handleMouseUp = useCallback(() => {\n   214→    setActiveLandmark(null);\n   215→  }, []);\n   216→\n   217→  const handleTouchStart = useCallback((id: string) => {\n   218→    setActiveLandmark(id);\n   219→  }, []);\n   220→\n   221→  const handleTouchMove = useCallback(\n   222→    (e: React.TouchEvent<HTMLDivElement>) => {\n   223→      if (!activeLandmark || !containerRef.current) return;\n   224→\n   225→      const touch = e.touches[0];\n   226→      const rect = containerRef.current.getBoundingClientRect();\n   227→      const x = Math.max(0, Math.min(1, (touch.clientX - rect.left) / rect.width));\n   228→      const y = Math.max(0, Math.min(1, (touch.clientY - rect.top) / rect.height));\n   229→\n   230→      setLandmarks((prev) =>\n   231→        prev.map((lm) => (lm.id === activeLandmark ? { ...lm, x, y } : lm))\n   232→      );\n   233→    },\n   234→    [activeLandmark]\n   235→  );\n   236→\n   237→  const handleTouchEnd = useCallback(() => {\n   238→    setActiveLandmark(null);\n   239→  }, []);\n   240→\n   241→  const handleComplete = () => {\n   242→    onComplete?.(landmarks);\n   243→  };\n   244→\n   245→  const resetLandmarks = () => {\n   246→    setLandmarks(SIDE_PROFILE_LANDMARKS);\n   247→  };\n   248→\n   249→  // Guided mode - step through categories\n   250→  const currentCategory = isGuided ? SIDE_LANDMARK_CATEGORIES[currentStepIndex] : null;\n   251→\n   252→  const filteredLandmarks = selectedCategory\n   253→    ? landmarks.filter((lm) => lm.category === selectedCategory)\n   254→    : isGuided && currentCategory\n   255→      ? landmarks.filter((lm) => lm.category === currentCategory.name)\n   256→      : landmarks;\n   257→\n   258→  const visibleLandmarkIds = isGuided && currentCategory\n   259→    ? new Set(currentCategory.landmarks)\n   260→    : selectedCategory\n   261→      ? new Set(filteredLandmarks.map((lm) => lm.id))\n   262→      : new Set(landmarks.map((lm) => lm.id));\n   263→\n   264→  const nextStep = () => {\n   265→    if (currentStepIndex < SIDE_LANDMARK_CATEGORIES.length - 1) {\n   266→      setCurrentStepIndex(currentStepIndex + 1);\n   267→    }\n   268→  };\n   269→\n   270→  const prevStep = () => {\n   271→    if (currentStepIndex > 0) {\n   272→      setCurrentStepIndex(currentStepIndex - 1);\n   273→    }\n   274→  };\n   275→\n   276→  return (\n   277→    <div className=\"w-full max-w-4xl mx-auto\">\n   278→      {/* Header */}\n   279→      <motion.div\n   280→        initial={{ opacity: 0, y: -10 }}\n   281→        animate={{ opacity: 1, y: 0 }}\n   282→        className=\"mb-6 text-center\"\n   283→      >\n   284→        <h2 className=\"text-xl font-semibold text-white mb-2\">\n   285→          Side Profile Manual Adjustment\n   286→        </h2>\n   287→        <p className=\"text-neutral-400\">\n   288→          Drag each marker to match the facial landmarks on your profile photo\n   289→        </p>\n   290→      </motion.div>\n   291→\n   292→      {/* Mode Toggle and Controls */}\n   293→      <motion.div\n   294→        initial={{ opacity: 0, y: 10 }}\n   295→        animate={{ opacity: 1, y: 0 }}\n   296→        className=\"mb-4 flex flex-wrap justify-center gap-2\"\n   297→      >\n   298→        {/* Auto-Detect Button */}\n   299→        <button\n   300→          onClick={handleAutoDetect}\n   301→          disabled={!faceApiReady || isDetecting}\n   302→          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${\n   303→            faceApiReady && !isDetecting\n   304→              ? 'bg-green-500/20 text-green-400 hover:bg-green-500/30 border border-green-500/30'\n   305→              : 'bg-neutral-800 text-neutral-500 cursor-not-allowed'\n   306→          }`}\n   307→        >\n   308→          {isDetecting ? (\n   309→            <Loader2 className=\"w-4 h-4 animate-spin\" />\n   310→          ) : faceApiLoading ? (\n   311→            <Loader2 className=\"w-4 h-4 animate-spin\" />\n   312→          ) : (\n   313→            <Wand2 className=\"w-4 h-4\" />\n   314→          )}\n   315→          {isDetecting ? 'Detecting...' : faceApiLoading ? 'Loading AI...' : 'Auto-Detect'}\n   316→        </button>\n   317→\n   318→        <div className=\"w-px h-8 bg-neutral-800\" />\n   319→\n   320→        <button\n   321→          onClick={() => {\n   322→            setIsGuided(true);\n   323→            setSelectedCategory(null);\n   324→          }}\n   325→          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n   326→            isGuided\n   327→              ? 'bg-[#00f3ff] text-black'\n   328→              : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n   329→          }`}\n   330→        >\n   331→          Guided Mode\n   332→        </button>\n   333→        <button\n   334→          onClick={() => {\n   335→            setIsGuided(false);\n   336→            setSelectedCategory(null);\n   337→          }}\n   338→          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n   339→            !isGuided\n   340→              ? 'bg-[#00f3ff] text-black'\n   341→              : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n   342→          }`}\n   343→        >\n   344→          Free Edit\n   345→        </button>\n   346→\n   347→        <div className=\"w-px h-8 bg-neutral-800\" />\n   348→\n   349→        {/* Zoom Controls */}\n   350→        <div className=\"flex items-center gap-1\">\n   351→          <button\n   352→            onClick={handleZoomOut}\n   353→            disabled={zoom <= 0.5}\n   354→            className=\"p-2 rounded-lg bg-neutral-800 text-neutral-400 hover:bg-neutral-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n   355→          >\n   356→            <ZoomOut className=\"w-4 h-4\" />\n   357→          </button>\n   358→          <span className=\"text-xs text-neutral-400 w-12 text-center\">\n   359→            {(zoom * 100).toFixed(0)}%\n   360→          </span>\n   361→          <button\n   362→            onClick={handleZoomIn}\n   363→            disabled={zoom >= 3}\n   364→            className=\"p-2 rounded-lg bg-neutral-800 text-neutral-400 hover:bg-neutral-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n   365→          >\n   366→            <ZoomIn className=\"w-4 h-4\" />\n   367→          </button>\n   368→        </div>\n   369→\n   370→        <div className=\"w-px h-8 bg-neutral-800\" />\n   371→\n   372→        <button\n   373→          onClick={resetLandmarks}\n   374→          className=\"px-4 py-2 rounded-lg text-sm font-medium bg-neutral-800 text-neutral-400 hover:bg-neutral-700 transition-all flex items-center gap-2\"\n   375→        >\n   376→          <RotateCcw className=\"w-4 h-4\" />\n   377→          Reset\n   378→        </button>\n   379→      </motion.div>\n   380→\n   381→      {/* Detection Error/Status */}\n   382→      <AnimatePresence>\n   383→        {(detectionError || faceApiError) && (\n   384→          <motion.div\n   385→            initial={{ opacity: 0, y: -10 }}\n   386→            animate={{ opacity: 1, y: 0 }}\n   387→            exit={{ opacity: 0, y: -10 }}\n   388→            className=\"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm text-center\"\n   389→          >\n   390→            {detectionError || faceApiError?.message}\n   391→          </motion.div>\n   392→        )}\n   393→      </AnimatePresence>\n   394→\n   395→      {/* Guided Mode Step Indicator */}\n   396→      {isGuided && currentCategory && (\n   397→        <motion.div\n   398→          key={currentStepIndex}\n   399→          initial={{ opacity: 0, x: 20 }}\n   400→          animate={{ opacity: 1, x: 0 }}\n   401→          className=\"mb-4\"\n   402→        >\n   403→          <div className=\"flex items-center justify-between mb-2\">\n   404→            <button\n   405→              onClick={prevStep}\n   406→              disabled={currentStepIndex === 0}\n   407→              className={`p-2 rounded-lg transition-all ${\n   408→                currentStepIndex === 0\n   409→                  ? 'text-neutral-700 cursor-not-allowed'\n   410→                  : 'text-neutral-400 hover:text-white hover:bg-neutral-800'\n   411→              }`}\n   412→            >\n   413→              <ChevronLeft className=\"w-5 h-5\" />\n   414→            </button>\n   415→\n   416→            <div className=\"text-center\">\n   417→              <div className=\"flex items-center justify-center gap-2 mb-1\">\n   418→                <span\n   419→                  className=\"w-3 h-3 rounded-full\"\n   420→                  style={{ backgroundColor: currentCategory.color }}\n   421→                />\n   422→                <span className=\"text-white font-medium\">{currentCategory.name}</span>\n   423→              </div>\n   424→              <span className=\"text-xs text-neutral-400\">\n   425→                Step {currentStepIndex + 1} of {SIDE_LANDMARK_CATEGORIES.length} •{' '}\n   426→                {currentCategory.landmarks.length} points\n   427→              </span>\n   428→            </div>\n   429→\n   430→            <button\n   431→              onClick={nextStep}\n   432→              disabled={currentStepIndex === SIDE_LANDMARK_CATEGORIES.length - 1}\n   433→              className={`p-2 rounded-lg transition-all ${\n   434→                currentStepIndex === SIDE_LANDMARK_CATEGORIES.length - 1\n   435→                  ? 'text-neutral-700 cursor-not-allowed'\n   436→                  : 'text-neutral-400 hover:text-white hover:bg-neutral-800'\n   437→              }`}\n   438→            >\n   439→              <ChevronRight className=\"w-5 h-5\" />\n   440→            </button>\n   441→          </div>\n   442→\n   443→          {/* Progress bar */}\n   444→          <div className=\"w-full h-1 bg-neutral-800 rounded-full overflow-hidden\">\n   445→            <motion.div\n   446→              className=\"h-full rounded-full\"\n   447→              style={{ backgroundColor: currentCategory.color }}\n   448→              initial={{ width: 0 }}\n   449→              animate={{\n   450→                width: `${((currentStepIndex + 1) / SIDE_LANDMARK_CATEGORIES.length) * 100}%`,\n   451→              }}\n   452→              transition={{ duration: 0.3 }}\n   453→            />\n   454→          </div>\n   455→        </motion.div>\n   456→      )}\n   457→\n   458→      {/* Category Filter (Free Edit Mode) */}\n   459→      {!isGuided && (\n   460→        <motion.div\n   461→          initial={{ opacity: 0, y: 10 }}\n   462→          animate={{ opacity: 1, y: 0 }}\n   463→          className=\"mb-4 flex flex-wrap gap-2 justify-center\"\n   464→        >\n   465→          <button\n   466→            onClick={() => setSelectedCategory(null)}\n   467→            className={`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${\n   468→              selectedCategory === null\n   469→                ? 'bg-[#00f3ff] text-black'\n   470→                : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n   471→            }`}\n   472→          >\n   473→            All ({landmarks.length})\n   474→          </button>\n   475→          {SIDE_LANDMARK_CATEGORIES.map((category) => (\n   476→            <button\n   477→              key={category.name}\n   478→              onClick={() =>\n   479→                setSelectedCategory(\n   480→                  selectedCategory === category.name ? null : category.name\n   481→                )\n   482→              }\n   483→              className={`px-3 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-1.5 ${\n   484→                selectedCategory === category.name\n   485→                  ? 'bg-[#00f3ff] text-black'\n   486→                  : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n   487→              }`}\n   488→            >\n   489→              <span\n   490→                className=\"w-2 h-2 rounded-full\"\n   491→                style={{ backgroundColor: category.color }}\n   492→              />\n   493→              {category.name}\n   494→            </button>\n   495→          ))}\n   496→        </motion.div>\n   497→      )}\n   498→\n   499→      {/* Image Container with Landmarks */}\n   500→      <motion.div\n   501→        initial={{ opacity: 0, scale: 0.98 }}\n   502→        animate={{ opacity: 1, scale: 1 }}\n   503→        className=\"relative\"\n   504→      >\n   505→        <div\n   506→          ref={containerRef}\n   507→          className=\"relative w-full aspect-[3/4] rounded-2xl overflow-hidden bg-neutral-900 border border-neutral-800 select-none\"\n   508→          onMouseMove={handleMouseMove}\n   509→          onMouseUp={handleMouseUp}\n   510→          onMouseLeave={handleMouseUp}\n   511→          onTouchMove={handleTouchMove}\n   512→          onTouchEnd={handleTouchEnd}\n   513→        >\n   514→          {/* User's uploaded image with zoom */}\n   515→          <div\n   516→            style={{\n   517→              transform: `scale(${zoom})`,\n   518→              transformOrigin: 'center center',\n   519→            }}\n   520→            className=\"absolute inset-0 transition-transform duration-200\"\n   521→          >\n   522→            <Image\n   523→              ref={imageRef as React.RefObject<HTMLImageElement>}\n   524→              src={imageUrl}\n   525→              alt=\"Side profile\"\n   526→              fill\n   527→              className=\"object-contain pointer-events-none\"\n   528→              unoptimized\n   529→              draggable={false}\n   530→              onLoadingComplete={(img) => {\n   531→                // Store reference for face detection\n   532→                if (imageRef.current !== img) {\n   533→                  (imageRef as React.MutableRefObject<HTMLImageElement>).current = img;\n   534→                }\n   535→              }}\n   536→            />\n   537→          </div>\n   538→\n   539→          {/* Connection lines between sequential landmarks in category */}\n   540→          {isGuided && currentCategory && (\n   541→            <svg\n   542→              className=\"absolute inset-0 w-full h-full pointer-events-none\"\n   543→              viewBox=\"0 0 100 100\"\n   544→              preserveAspectRatio=\"none\"\n   545→            >\n   546→              {currentCategory.landmarks.map((landmarkId, index) => {\n   547→                if (index === currentCategory.landmarks.length - 1) return null;\n   548→                const current = landmarks.find((lm) => lm.id === landmarkId);\n   549→                const next = landmarks.find(\n   550→                  (lm) => lm.id === currentCategory.landmarks[index + 1]\n   551→                );\n   552→                if (!current || !next) return null;\n   553→\n   554→                return (\n   555→                  <line\n   556→                    key={`line-${landmarkId}`}\n   557→                    x1={current.x * 100}\n   558→                    y1={current.y * 100}\n   559→                    x2={next.x * 100}\n   560→                    y2={next.y * 100}\n   561→                    stroke={`${currentCategory.color}66`}\n   562→                    strokeWidth=\"0.3\"\n   563→                    strokeDasharray=\"1,1\"\n   564→                  />\n   565→                );\n   566→              })}\n   567→            </svg>\n   568→          )}\n   569→\n   570→          {/* Landmark Points */}\n   571→          {landmarks.map((landmark) => {\n   572→            const isVisible = visibleLandmarkIds.has(landmark.id);\n   573→            const color = getLandmarkColor(landmark.id, SIDE_LANDMARK_CATEGORIES);\n   574→\n   575→            return (\n   576→              <div\n   577→                key={landmark.id}\n   578→                className={`\n   579→                  absolute w-5 h-5 -translate-x-1/2 -translate-y-1/2 cursor-grab\n   580→                  transition-all duration-200\n   581→                  ${activeLandmark === landmark.id ? 'cursor-grabbing z-30' : 'z-10'}\n   582→                  ${isVisible ? 'opacity-100 scale-100' : 'opacity-10 scale-75 pointer-events-none'}\n   583→                `}\n   584→                style={{\n   585→                  left: `${landmark.x * 100}%`,\n   586→                  top: `${landmark.y * 100}%`,\n   587→                }}\n   588→                onMouseDown={() => isVisible && handleMouseDown(landmark.id)}\n   589→                onTouchStart={() => isVisible && handleTouchStart(landmark.id)}\n   590→              >\n   591→                {/* Outer glow ring */}\n   592→                <div\n   593→                  className={`\n   594→                    absolute inset-0 rounded-full\n   595→                    transition-all duration-200\n   596→                    ${activeLandmark === landmark.id ? 'scale-150' : ''}\n   597→                  `}\n   598→                  style={{\n   599→                    backgroundColor: `${color}33`,\n   600→                    boxShadow:\n   601→                      activeLandmark === landmark.id\n   602→                        ? `0 0 25px ${color}`\n   603→                        : `0 0 10px ${color}`,\n   604→                  }}\n   605→                />\n   606→\n   607→                {/* Main handle */}\n   608→                <div\n   609→                  className={`\n   610→                    absolute inset-1 rounded-full border-2 border-white\n   611→                    transition-all duration-200\n   612→                    ${activeLandmark === landmark.id ? 'scale-125' : ''}\n   613→                  `}\n   614→                  style={{\n   615→                    backgroundColor: color,\n   616→                    boxShadow: `0 0 10px ${color}, 0 0 20px ${color}`,\n   617→                  }}\n   618→                />\n   619→\n   620→                {/* Label tooltip */}\n   621→                <div\n   622→                  className={`\n   623→                    absolute left-6 top-1/2 -translate-y-1/2 whitespace-nowrap\n   624→                    px-2 py-1 rounded bg-black/95 border\n   625→                    text-xs font-medium z-50\n   626→                    pointer-events-none transition-opacity duration-200\n   627→                    ${activeLandmark === landmark.id ? 'opacity-100' : 'opacity-0'}\n   628→                  `}\n   629→                  style={{\n   630→                    borderColor: `${color}80`,\n   631→                    color: color,\n   632→                  }}\n   633→                >\n   634→                  <div>{landmark.label}</div>\n   635→                  <div className=\"text-[10px] opacity-70\">{landmark.medicalTerm}</div>\n   636→                </div>\n   637→              </div>\n   638→            );\n   639→          })}\n   640→        </div>\n   641→      </motion.div>\n   642→\n   643→      {/* Landmark Legend for Current Category */}\n   644→      <motion.div\n   645→        initial={{ opacity: 0, y: 10 }}\n   646→        animate={{ opacity: 1, y: 0 }}\n   647→        transition={{ delay: 0.2 }}\n   648→        className=\"mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2\"\n   649→      >\n   650→        {filteredLandmarks.map((landmark) => {\n   651→          const color = getLandmarkColor(landmark.id, SIDE_LANDMARK_CATEGORIES);\n   652→          return (\n   653→            <div\n   654→              key={landmark.id}\n   655→              className={`\n   656→                flex items-center gap-2 px-3 py-2 rounded-lg\n   657→                border transition-all duration-200 cursor-pointer\n   658→                ${\n   659→                  activeLandmark === landmark.id\n   660→                    ? 'border-neutral-600 bg-neutral-800'\n   661→                    : 'border-neutral-800 bg-black hover:bg-neutral-900'\n   662→                }\n   663→              `}\n   664→              onMouseEnter={() => setActiveLandmark(landmark.id)}\n   665→              onMouseLeave={() => setActiveLandmark(null)}\n   666→            >\n   667→              <div\n   668→                className=\"w-3 h-3 rounded-full flex-shrink-0\"\n   669→                style={{\n   670→                  backgroundColor: color,\n   671→                }}\n   672→              />\n   673→              <div className=\"min-w-0\">\n   674→                <p className=\"text-sm font-medium text-white truncate\">\n   675→                  {landmark.label}\n   676→                </p>\n   677→                <p className=\"text-xs text-neutral-500 truncate\">\n   678→                  {landmark.description}\n   679→                </p>\n   680→              </div>\n   681→            </div>\n   682→          );\n   683→        })}\n   684→      </motion.div>\n   685→\n   686→      {/* Navigation/Complete Buttons */}\n   687→      <motion.div\n   688→        initial={{ opacity: 0, y: 10 }}\n   689→        animate={{ opacity: 1, y: 0 }}\n   690→        transition={{ delay: 0.3 }}\n   691→        className=\"mt-8 flex justify-center gap-4\"\n   692→      >\n   693→        {isGuided && currentStepIndex < SIDE_LANDMARK_CATEGORIES.length - 1 ? (\n   694→          <button\n   695→            onClick={nextStep}\n   696→            className=\"\n   697→              px-8 py-4 rounded-xl font-semibold text-lg\n   698→              bg-[#00f3ff] text-black\n   699→              hover:shadow-[0_0_20px_rgba(0,243,255,0.3)]\n   700→              transition-all duration-300\n   701→            \"\n   702→          >\n   703→            Next: {SIDE_LANDMARK_CATEGORIES[currentStepIndex + 1]?.name}\n   704→          </button>\n   705→        ) : (\n   706→          <button\n   707→            onClick={handleComplete}\n   708→            className=\"\n   709→              px-8 py-4 rounded-xl font-semibold text-lg\n   710→              bg-[#00f3ff] text-black\n   711→              hover:shadow-[0_0_20px_rgba(0,243,255,0.3)]\n   712→              transition-all duration-300\n   713→            \"\n   714→          >\n   715→            Confirm Side Landmarks\n   716→          </button>\n   717→        )}\n   718→      </motion.div>\n   719→\n   720→      {/* Total Progress */}\n   721→      <motion.div\n   722→        initial={{ opacity: 0 }}\n   723→        animate={{ opacity: 1 }}\n   724→        transition={{ delay: 0.4 }}\n   725→        className=\"mt-4 text-center text-sm text-neutral-500\"\n   726→      >\n   727→        {landmarks.length} landmarks • Drag markers to adjust positions\n   728→      </motion.div>\n   729→    </div>\n   730→  );\n   731→}\n   732→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"ddc4f082-c013-4309-8974-32dd65760ea2","timestamp":"2025-12-19T22:00:45.038Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/SideProfileManualTool.tsx","content":"'use client';\n\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport Image from 'next/image';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { RotateCcw, ChevronLeft, ChevronRight, Wand2, Loader2, ZoomIn, ZoomOut } from 'lucide-react';\nimport {\n  LandmarkPoint,\n  SIDE_PROFILE_LANDMARKS,\n  SIDE_LANDMARK_CATEGORIES,\n  getLandmarkColor,\n} from '@/lib/landmarks';\nimport { useFaceApi, FACE_API_LANDMARK_MAPPING } from '@/hooks/useFaceApi';\n\n// Re-export types for backwards compatibility\nexport type { LandmarkPoint } from '@/lib/landmarks';\n\ninterface SideProfileManualToolProps {\n  imageUrl: string;\n  onLandmarksChange?: (landmarks: LandmarkPoint[]) => void;\n  onComplete?: (landmarks: LandmarkPoint[]) => void;\n}\n\nexport function SideProfileManualTool({\n  imageUrl,\n  onLandmarksChange,\n  onComplete,\n}: SideProfileManualToolProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const imageRef = useRef<HTMLImageElement>(null);\n  const [landmarks, setLandmarks] = useState<LandmarkPoint[]>(SIDE_PROFILE_LANDMARKS);\n  const [activeLandmark, setActiveLandmark] = useState<string | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [isGuided, setIsGuided] = useState(true);\n  const [zoom, setZoom] = useState(1);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [detectionError, setDetectionError] = useState<string | null>(null);\n\n  // Face API hook for auto-detection\n  const { isLoading: faceApiLoading, isReady: faceApiReady, error: faceApiError, detect } = useFaceApi();\n\n  useEffect(() => {\n    onLandmarksChange?.(landmarks);\n  }, [landmarks, onLandmarksChange]);\n\n  // Auto-detect landmarks using face-api.js\n  const handleAutoDetect = useCallback(async () => {\n    if (!faceApiReady || !imageRef.current) {\n      setDetectionError('Face detection not ready. Please wait...');\n      return;\n    }\n\n    setIsDetecting(true);\n    setDetectionError(null);\n\n    try {\n      const result = await detect(imageRef.current);\n\n      if (!result) {\n        setDetectionError('No face detected. Please ensure your side profile is clearly visible.');\n        setIsDetecting(false);\n        return;\n      }\n\n      // Get image dimensions\n      const imgWidth = imageRef.current.naturalWidth;\n      const imgHeight = imageRef.current.naturalHeight;\n\n      // Map face-api.js 68-point landmarks to our side profile landmarks\n      const detectedLandmarks = result.landmarks;\n\n      setLandmarks((prev) =>\n        prev.map((lm) => {\n          // Map our landmark IDs to face-api indices\n          let detectedPoint = null;\n\n          switch (lm.id) {\n            // Chin/Jaw landmarks\n            case 'menton_side':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.MENTON];\n              break;\n            case 'pogonion':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.MENTON];\n              break;\n            case 'gonion_inferior_side':\n              detectedPoint = detectedLandmarks[4]; // Jaw contour point\n              break;\n            case 'gonion_superior_side':\n              detectedPoint = detectedLandmarks[3]; // Higher jaw point\n              break;\n\n            // Nose landmarks\n            case 'nasion':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.NASION];\n              break;\n            case 'pronasale':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.PRONASALE];\n              break;\n            case 'rhinion':\n              detectedPoint = detectedLandmarks[28]; // Mid nose bridge\n              break;\n            case 'subnasale_side':\n              detectedPoint = detectedLandmarks[33]; // Nose bottom center\n              break;\n            case 'columella_nasi':\n              detectedPoint = detectedLandmarks[33];\n              break;\n\n            // Lip landmarks\n            case 'labrale_superius_side':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.UPPER_LIP_TOP];\n              break;\n            case 'labrale_inferius_side':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.LOWER_LIP_BOTTOM];\n              break;\n            case 'cheilion_side':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.LEFT_MOUTH_CORNER];\n              break;\n            case 'sublabiale':\n              // Approximate from lower lip and chin\n              const lowerLip = detectedLandmarks[57];\n              const chin = detectedLandmarks[8];\n              if (lowerLip && chin) {\n                detectedPoint = {\n                  x: (lowerLip.x + chin.x) / 2,\n                  y: lowerLip.y + (chin.y - lowerLip.y) * 0.3,\n                };\n              }\n              break;\n\n            // Eye region\n            case 'corneal_apex':\n              detectedPoint = detectedLandmarks[FACE_API_LANDMARK_MAPPING.LEFT_EYE_OUTER];\n              break;\n            case 'lateral_eyelid':\n              detectedPoint = detectedLandmarks[36]; // Outer eye corner\n              break;\n            case 'palpebra_inferior_side':\n              detectedPoint = detectedLandmarks[40]; // Lower eyelid\n              break;\n            case 'orbitale':\n              detectedPoint = detectedLandmarks[41]; // Lower eye socket\n              break;\n\n            // Forehead\n            case 'glabella':\n              // Approximate from brow points\n              const leftBrow = detectedLandmarks[21];\n              const rightBrow = detectedLandmarks[22];\n              if (leftBrow && rightBrow) {\n                detectedPoint = {\n                  x: (leftBrow.x + rightBrow.x) / 2,\n                  y: (leftBrow.y + rightBrow.y) / 2,\n                };\n              }\n              break;\n\n            // Ear landmarks (use jaw contour as proxy)\n            case 'tragion':\n              detectedPoint = detectedLandmarks[1]; // Upper jaw near ear\n              break;\n            case 'porion':\n              detectedPoint = detectedLandmarks[0]; // Near ear\n              break;\n\n            default:\n              break;\n          }\n\n          if (detectedPoint) {\n            return {\n              ...lm,\n              x: detectedPoint.x / imgWidth,\n              y: detectedPoint.y / imgHeight,\n            };\n          }\n\n          return lm;\n        })\n      );\n\n      setIsDetecting(false);\n    } catch (err) {\n      setDetectionError(err instanceof Error ? err.message : 'Detection failed');\n      setIsDetecting(false);\n    }\n  }, [faceApiReady, detect]);\n\n  // Zoom controls\n  const handleZoomIn = () => setZoom((prev) => Math.min(prev + 0.25, 3));\n  const handleZoomOut = () => setZoom((prev) => Math.max(prev - 0.25, 0.5));\n\n  const handleMouseDown = useCallback((id: string) => {\n    setActiveLandmark(id);\n  }, []);\n\n  const handleMouseMove = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      if (!activeLandmark || !containerRef.current) return;\n\n      const rect = containerRef.current.getBoundingClientRect();\n      const x = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));\n      const y = Math.max(0, Math.min(1, (e.clientY - rect.top) / rect.height));\n\n      setLandmarks((prev) =>\n        prev.map((lm) => (lm.id === activeLandmark ? { ...lm, x, y } : lm))\n      );\n    },\n    [activeLandmark]\n  );\n\n  const handleMouseUp = useCallback(() => {\n    setActiveLandmark(null);\n  }, []);\n\n  const handleTouchStart = useCallback((id: string) => {\n    setActiveLandmark(id);\n  }, []);\n\n  const handleTouchMove = useCallback(\n    (e: React.TouchEvent<HTMLDivElement>) => {\n      if (!activeLandmark || !containerRef.current) return;\n\n      const touch = e.touches[0];\n      const rect = containerRef.current.getBoundingClientRect();\n      const x = Math.max(0, Math.min(1, (touch.clientX - rect.left) / rect.width));\n      const y = Math.max(0, Math.min(1, (touch.clientY - rect.top) / rect.height));\n\n      setLandmarks((prev) =>\n        prev.map((lm) => (lm.id === activeLandmark ? { ...lm, x, y } : lm))\n      );\n    },\n    [activeLandmark]\n  );\n\n  const handleTouchEnd = useCallback(() => {\n    setActiveLandmark(null);\n  }, []);\n\n  const handleComplete = () => {\n    onComplete?.(landmarks);\n  };\n\n  const resetLandmarks = () => {\n    setLandmarks(SIDE_PROFILE_LANDMARKS);\n  };\n\n  // Guided mode - step through categories\n  const currentCategory = isGuided ? SIDE_LANDMARK_CATEGORIES[currentStepIndex] : null;\n\n  const filteredLandmarks = selectedCategory\n    ? landmarks.filter((lm) => lm.category === selectedCategory)\n    : isGuided && currentCategory\n      ? landmarks.filter((lm) => lm.category === currentCategory.name)\n      : landmarks;\n\n  const visibleLandmarkIds = isGuided && currentCategory\n    ? new Set(currentCategory.landmarks)\n    : selectedCategory\n      ? new Set(filteredLandmarks.map((lm) => lm.id))\n      : new Set(landmarks.map((lm) => lm.id));\n\n  const nextStep = () => {\n    if (currentStepIndex < SIDE_LANDMARK_CATEGORIES.length - 1) {\n      setCurrentStepIndex(currentStepIndex + 1);\n    }\n  };\n\n  const prevStep = () => {\n    if (currentStepIndex > 0) {\n      setCurrentStepIndex(currentStepIndex - 1);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto\">\n      {/* Header */}\n      <motion.div\n        initial={{ opacity: 0, y: -10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"mb-6 text-center\"\n      >\n        <h2 className=\"text-xl font-semibold text-white mb-2\">\n          Side Profile Manual Adjustment\n        </h2>\n        <p className=\"text-neutral-400\">\n          Drag each marker to match the facial landmarks on your profile photo\n        </p>\n      </motion.div>\n\n      {/* Mode Toggle and Controls */}\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"mb-4 flex flex-wrap justify-center gap-2\"\n      >\n        {/* Auto-Detect Button */}\n        <button\n          onClick={handleAutoDetect}\n          disabled={!faceApiReady || isDetecting}\n          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${\n            faceApiReady && !isDetecting\n              ? 'bg-green-500/20 text-green-400 hover:bg-green-500/30 border border-green-500/30'\n              : 'bg-neutral-800 text-neutral-500 cursor-not-allowed'\n          }`}\n        >\n          {isDetecting ? (\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n          ) : faceApiLoading ? (\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n          ) : (\n            <Wand2 className=\"w-4 h-4\" />\n          )}\n          {isDetecting ? 'Detecting...' : faceApiLoading ? 'Loading AI...' : 'Auto-Detect'}\n        </button>\n\n        <div className=\"w-px h-8 bg-neutral-800\" />\n\n        <button\n          onClick={() => {\n            setIsGuided(true);\n            setSelectedCategory(null);\n          }}\n          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n            isGuided\n              ? 'bg-[#00f3ff] text-black'\n              : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n          }`}\n        >\n          Guided Mode\n        </button>\n        <button\n          onClick={() => {\n            setIsGuided(false);\n            setSelectedCategory(null);\n          }}\n          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n            !isGuided\n              ? 'bg-[#00f3ff] text-black'\n              : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n          }`}\n        >\n          Free Edit\n        </button>\n\n        <div className=\"w-px h-8 bg-neutral-800\" />\n\n        {/* Zoom Controls */}\n        <div className=\"flex items-center gap-1\">\n          <button\n            onClick={handleZoomOut}\n            disabled={zoom <= 0.5}\n            className=\"p-2 rounded-lg bg-neutral-800 text-neutral-400 hover:bg-neutral-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <ZoomOut className=\"w-4 h-4\" />\n          </button>\n          <span className=\"text-xs text-neutral-400 w-12 text-center\">\n            {(zoom * 100).toFixed(0)}%\n          </span>\n          <button\n            onClick={handleZoomIn}\n            disabled={zoom >= 3}\n            className=\"p-2 rounded-lg bg-neutral-800 text-neutral-400 hover:bg-neutral-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <ZoomIn className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        <div className=\"w-px h-8 bg-neutral-800\" />\n\n        <button\n          onClick={resetLandmarks}\n          className=\"px-4 py-2 rounded-lg text-sm font-medium bg-neutral-800 text-neutral-400 hover:bg-neutral-700 transition-all flex items-center gap-2\"\n        >\n          <RotateCcw className=\"w-4 h-4\" />\n          Reset\n        </button>\n      </motion.div>\n\n      {/* Detection Error/Status */}\n      <AnimatePresence>\n        {(detectionError || faceApiError) && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm text-center\"\n          >\n            {detectionError || faceApiError?.message}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Guided Mode Step Indicator */}\n      {isGuided && currentCategory && (\n        <motion.div\n          key={currentStepIndex}\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          className=\"mb-4\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <button\n              onClick={prevStep}\n              disabled={currentStepIndex === 0}\n              className={`p-2 rounded-lg transition-all ${\n                currentStepIndex === 0\n                  ? 'text-neutral-700 cursor-not-allowed'\n                  : 'text-neutral-400 hover:text-white hover:bg-neutral-800'\n              }`}\n            >\n              <ChevronLeft className=\"w-5 h-5\" />\n            </button>\n\n            <div className=\"text-center\">\n              <div className=\"flex items-center justify-center gap-2 mb-1\">\n                <span\n                  className=\"w-3 h-3 rounded-full\"\n                  style={{ backgroundColor: currentCategory.color }}\n                />\n                <span className=\"text-white font-medium\">{currentCategory.name}</span>\n              </div>\n              <span className=\"text-xs text-neutral-400\">\n                Step {currentStepIndex + 1} of {SIDE_LANDMARK_CATEGORIES.length} •{' '}\n                {currentCategory.landmarks.length} points\n              </span>\n            </div>\n\n            <button\n              onClick={nextStep}\n              disabled={currentStepIndex === SIDE_LANDMARK_CATEGORIES.length - 1}\n              className={`p-2 rounded-lg transition-all ${\n                currentStepIndex === SIDE_LANDMARK_CATEGORIES.length - 1\n                  ? 'text-neutral-700 cursor-not-allowed'\n                  : 'text-neutral-400 hover:text-white hover:bg-neutral-800'\n              }`}\n            >\n              <ChevronRight className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          {/* Progress bar */}\n          <div className=\"w-full h-1 bg-neutral-800 rounded-full overflow-hidden\">\n            <motion.div\n              className=\"h-full rounded-full\"\n              style={{ backgroundColor: currentCategory.color }}\n              initial={{ width: 0 }}\n              animate={{\n                width: `${((currentStepIndex + 1) / SIDE_LANDMARK_CATEGORIES.length) * 100}%`,\n              }}\n              transition={{ duration: 0.3 }}\n            />\n          </div>\n        </motion.div>\n      )}\n\n      {/* Category Filter (Free Edit Mode) */}\n      {!isGuided && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mb-4 flex flex-wrap gap-2 justify-center\"\n        >\n          <button\n            onClick={() => setSelectedCategory(null)}\n            className={`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${\n              selectedCategory === null\n                ? 'bg-[#00f3ff] text-black'\n                : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n            }`}\n          >\n            All ({landmarks.length})\n          </button>\n          {SIDE_LANDMARK_CATEGORIES.map((category) => (\n            <button\n              key={category.name}\n              onClick={() =>\n                setSelectedCategory(\n                  selectedCategory === category.name ? null : category.name\n                )\n              }\n              className={`px-3 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-1.5 ${\n                selectedCategory === category.name\n                  ? 'bg-[#00f3ff] text-black'\n                  : 'bg-neutral-800 text-neutral-400 hover:bg-neutral-700'\n              }`}\n            >\n              <span\n                className=\"w-2 h-2 rounded-full\"\n                style={{ backgroundColor: category.color }}\n              />\n              {category.name}\n            </button>\n          ))}\n        </motion.div>\n      )}\n\n      {/* Image Container with Landmarks */}\n      <motion.div\n        initial={{ opacity: 0, scale: 0.98 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"relative\"\n      >\n        <div\n          ref={containerRef}\n          className=\"relative w-full aspect-[3/4] rounded-2xl overflow-hidden bg-neutral-900 border border-neutral-800 select-none\"\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onMouseLeave={handleMouseUp}\n          onTouchMove={handleTouchMove}\n          onTouchEnd={handleTouchEnd}\n        >\n          {/* User's uploaded image with zoom */}\n          <div\n            style={{\n              transform: `scale(${zoom})`,\n              transformOrigin: 'center center',\n            }}\n            className=\"absolute inset-0 transition-transform duration-200\"\n          >\n            <Image\n              ref={imageRef as React.RefObject<HTMLImageElement>}\n              src={imageUrl}\n              alt=\"Side profile\"\n              fill\n              className=\"object-contain pointer-events-none\"\n              unoptimized\n              draggable={false}\n              onLoadingComplete={(img) => {\n                // Store reference for face detection\n                if (imageRef.current !== img) {\n                  (imageRef as React.MutableRefObject<HTMLImageElement>).current = img;\n                }\n              }}\n            />\n          </div>\n\n          {/* Connection lines between sequential landmarks in category */}\n          {isGuided && currentCategory && (\n            <svg\n              className=\"absolute inset-0 w-full h-full pointer-events-none\"\n              viewBox=\"0 0 100 100\"\n              preserveAspectRatio=\"none\"\n            >\n              {currentCategory.landmarks.map((landmarkId, index) => {\n                if (index === currentCategory.landmarks.length - 1) return null;\n                const current = landmarks.find((lm) => lm.id === landmarkId);\n                const next = landmarks.find(\n                  (lm) => lm.id === currentCategory.landmarks[index + 1]\n                );\n                if (!current || !next) return null;\n\n                return (\n                  <line\n                    key={`line-${landmarkId}`}\n                    x1={current.x * 100}\n                    y1={current.y * 100}\n                    x2={next.x * 100}\n                    y2={next.y * 100}\n                    stroke={`${currentCategory.color}66`}\n                    strokeWidth=\"0.3\"\n                    strokeDasharray=\"1,1\"\n                  />\n                );\n              })}\n            </svg>\n          )}\n\n          {/* Landmark Points */}\n          {landmarks.map((landmark) => {\n            const isVisible = visibleLandmarkIds.has(landmark.id);\n            const color = getLandmarkColor(landmark.id, SIDE_LANDMARK_CATEGORIES);\n\n            return (\n              <div\n                key={landmark.id}\n                className={`\n                  absolute w-5 h-5 -translate-x-1/2 -translate-y-1/2 cursor-grab\n                  transition-all duration-200\n                  ${activeLandmark === landmark.id ? 'cursor-grabbing z-30' : 'z-10'}\n                  ${isVisible ? 'opacity-100 scale-100' : 'opacity-10 scale-75 pointer-events-none'}\n                `}\n                style={{\n                  left: `${landmark.x * 100}%`,\n                  top: `${landmark.y * 100}%`,\n                }}\n                onMouseDown={() => isVisible && handleMouseDown(landmark.id)}\n                onTouchStart={() => isVisible && handleTouchStart(landmark.id)}\n              >\n                {/* Outer glow ring */}\n                <div\n                  className={`\n                    absolute inset-0 rounded-full\n                    transition-all duration-200\n                    ${activeLandmark === landmark.id ? 'scale-150' : ''}\n                  `}\n                  style={{\n                    backgroundColor: `${color}33`,\n                    boxShadow:\n                      activeLandmark === landmark.id\n                        ? `0 0 25px ${color}`\n                        : `0 0 10px ${color}`,\n                  }}\n                />\n\n                {/* Main handle */}\n                <div\n                  className={`\n                    absolute inset-1 rounded-full border-2 border-white\n                    transition-all duration-200\n                    ${activeLandmark === landmark.id ? 'scale-125' : ''}\n                  `}\n                  style={{\n                    backgroundColor: color,\n                    boxShadow: `0 0 10px ${color}, 0 0 20px ${color}`,\n                  }}\n                />\n\n                {/* Label tooltip */}\n                <div\n                  className={`\n                    absolute left-6 top-1/2 -translate-y-1/2 whitespace-nowrap\n                    px-2 py-1 rounded bg-black/95 border\n                    text-xs font-medium z-50\n                    pointer-events-none transition-opacity duration-200\n                    ${activeLandmark === landmark.id ? 'opacity-100' : 'opacity-0'}\n                  `}\n                  style={{\n                    borderColor: `${color}80`,\n                    color: color,\n                  }}\n                >\n                  <div>{landmark.label}</div>\n                  <div className=\"text-[10px] opacity-70\">{landmark.medicalTerm}</div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </motion.div>\n\n      {/* Landmark Legend for Current Category */}\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.2 }}\n        className=\"mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2\"\n      >\n        {filteredLandmarks.map((landmark) => {\n          const color = getLandmarkColor(landmark.id, SIDE_LANDMARK_CATEGORIES);\n          return (\n            <div\n              key={landmark.id}\n              className={`\n                flex items-center gap-2 px-3 py-2 rounded-lg\n                border transition-all duration-200 cursor-pointer\n                ${\n                  activeLandmark === landmark.id\n                    ? 'border-neutral-600 bg-neutral-800'\n                    : 'border-neutral-800 bg-black hover:bg-neutral-900'\n                }\n              `}\n              onMouseEnter={() => setActiveLandmark(landmark.id)}\n              onMouseLeave={() => setActiveLandmark(null)}\n            >\n              <div\n                className=\"w-3 h-3 rounded-full flex-shrink-0\"\n                style={{\n                  backgroundColor: color,\n                }}\n              />\n              <div className=\"min-w-0\">\n                <p className=\"text-sm font-medium text-white truncate\">\n                  {landmark.label}\n                </p>\n                <p className=\"text-xs text-neutral-500 truncate\">\n                  {landmark.description}\n                </p>\n              </div>\n            </div>\n          );\n        })}\n      </motion.div>\n\n      {/* Navigation/Complete Buttons */}\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.3 }}\n        className=\"mt-8 flex justify-center gap-4\"\n      >\n        {isGuided && currentStepIndex < SIDE_LANDMARK_CATEGORIES.length - 1 ? (\n          <button\n            onClick={nextStep}\n            className=\"\n              px-8 py-4 rounded-xl font-semibold text-lg\n              bg-[#00f3ff] text-black\n              hover:shadow-[0_0_20px_rgba(0,243,255,0.3)]\n              transition-all duration-300\n            \"\n          >\n            Next: {SIDE_LANDMARK_CATEGORIES[currentStepIndex + 1]?.name}\n          </button>\n        ) : (\n          <button\n            onClick={handleComplete}\n            className=\"\n              px-8 py-4 rounded-xl font-semibold text-lg\n              bg-[#00f3ff] text-black\n              hover:shadow-[0_0_20px_rgba(0,243,255,0.3)]\n              transition-all duration-300\n            \"\n          >\n            Confirm Side Landmarks\n          </button>\n        )}\n      </motion.div>\n\n      {/* Total Progress */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.4 }}\n        className=\"mt-4 text-center text-sm text-neutral-500\"\n      >\n        {landmarks.length} landmarks • Drag markers to adjust positions\n      </motion.div>\n    </div>\n  );\n}\n","numLines":732,"startLine":1,"totalLines":732}}}
{"parentUuid":"ddc4f082-c013-4309-8974-32dd65760ea2","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"eb55f84a-af8c-40d2-b5b8-84e1f5f4adeb","version":"2.0.70","gitBranch":"main","agentId":"aae240c","slug":"scalable-frolicking-lemon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Jv1bWFJCRiBzTHpnVAkZhk","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! I found all the information you requested. Let me compile the complete details.\n\n## Side Profile Landmarks - Complete List\n\nBased on the codebase, the **SIDE_PROFILE_LANDMARKS** array contains **38 landmarks** (not 31 as you mentioned). Here are all the side profile landmark IDs organized by category:\n\n### All 38 Side Profile Landmark IDs:\n\n**Cranium (3):**\n1. vertex\n2. external_occipital_region\n3. trichion_profile\n\n**Forehead (2):**\n4. frontalis\n5. glabella\n\n**Eye Region (4):**\n6. corneal_apex\n7. lateral_eyelid\n8. palpebra_inferior_side\n9. orbitale\n\n**Nose (8):**\n10. nasion\n11. rhinion\n12. supratip_break\n13. pronasale\n14. infratip_lobule\n15. columella_nasi\n16. subnasale_side\n17. subalare\n\n**Lips (4):**\n18. labrale_superius_side\n19. cheilion_side\n20. labrale_inferius_side\n21. sublabiale\n\n**Chin (2):**\n22. pogonion\n23. menton_side\n\n**Jaw (2):**\n24. gonion_superior_side\n25. gonion_inferior_side\n\n**Cheek (1):**\n26. zygion_soft_tissue\n\n**Ear (3):**\n27. porion\n28. tragion\n29. incisura_intertragica\n\n**Neck (2):**\n30. cervicale\n31. anterior_cervical_landmark\n\n---\n\n## getLandmarkImagePath Function\n\nLocated in `/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarkImages.ts` (lines 396-410), the function constructs image paths as follows:\n\n```typescript\nexport function getLandmarkImagePath(\n  landmarkId: string,\n  mode: 'front' | 'side',\n  type: 'photo' | 'infographic' = 'photo'\n): string | null {\n  const mapping = mode === 'front' ? FRONT_LANDMARK_IMAGES : SIDE_LANDMARK_IMAGES;\n  const config = mapping[landmarkId];\n\n  if (!config) {\n    return null;\n  }\n\n  const prefix = type === 'photo' ? 'male_white_' : 'infographic_';\n  return `/landmarks/${mode}/${prefix}${config.imageName}.webp`;\n}\n```\n\n### How Image Paths are Constructed:\n\n1. **Base directory**: `/landmarks/{mode}/` where `mode` is either 'front' or 'side'\n2. **Prefix**: Either `male_white_` (for photo references) or `infographic_` (for diagrams)\n3. **Image name**: Retrieved from `SIDE_LANDMARK_IMAGES` mapping (e.g., 'vertex', 'pronasale', 'pogonion')\n4. **Extension**: `.webp`\n\n### Example Path Generation:\n\n- For landmark ID `pronasale` with side profile photo: `/landmarks/side/male_white_pronasale.webp`\n- For landmark ID `pronasale` with infographic: `/landmarks/side/infographic_pronasale.webp`\n\n### SIDE_LANDMARK_IMAGES Mapping (31 entries):\n\nThe `SIDE_LANDMARK_IMAGES` object maps each side profile landmark ID to an `imageName` and fallback description. For example:\n\n- `pronasale` → imageName: `'pronasale'` → fallbackDescription: \"Place at the most forward point of your nose tip\"\n- `pogonion` → imageName: `'pogonion'` → fallbackDescription: \"Place at the most forward point of your chin\"\n- `vertex` → imageName: `'vertex'` → fallbackDescription: \"Place at the highest point of your head\"\n\n**File location**: `/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarkImages.ts` (lines 248-387)"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":32101,"cache_read_input_tokens":12532,"cache_creation":{"ephemeral_5m_input_tokens":32101,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWGoFk8GHGw2yjG7pn6p6","type":"assistant","uuid":"1746b8b0-0322-4c32-ab78-e6345f7220d2","timestamp":"2025-12-19T22:00:55.181Z"}
