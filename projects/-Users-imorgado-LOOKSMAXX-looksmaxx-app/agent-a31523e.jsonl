{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"4e0d04e8-56ad-4bca-9e4b-36b62804ea66","version":"2.0.76","gitBranch":"main","agentId":"a31523e","slug":"shiny-hatching-balloon","type":"user","message":{"role":"user","content":"Read the GuideViewer component in /Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/GuidesTab.tsx\n\nUnderstand:\n1. Current section navigation structure\n2. How sections are rendered\n3. The animation/transition patterns used\n4. How to convert from top tabs to side panel\n\nFocus on the GuideViewer function and its layout structure."},"uuid":"721b4ec5-f489-4330-90fd-dfd8897f2b13","timestamp":"2025-12-26T08:23:17.539Z"}
{"parentUuid":"721b4ec5-f489-4330-90fd-dfd8897f2b13","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"4e0d04e8-56ad-4bca-9e4b-36b62804ea66","version":"2.0.76","gitBranch":"main","agentId":"a31523e","slug":"shiny-hatching-balloon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_018u3znvHfB1hKeQytFjVxDM","type":"message","role":"assistant","content":[{"type":"text","text":"I'll read the GuidesTab.tsx file to understand the current GuideViewer component structure."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":20450,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20450,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWUyaf3uohfQ7p3NjtFE6","type":"assistant","uuid":"d02a287a-f3e5-4153-a205-1d74f1887c4d","timestamp":"2025-12-26T08:23:19.052Z"}
{"parentUuid":"d02a287a-f3e5-4153-a205-1d74f1887c4d","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"4e0d04e8-56ad-4bca-9e4b-36b62804ea66","version":"2.0.76","gitBranch":"main","agentId":"a31523e","slug":"shiny-hatching-balloon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_018u3znvHfB1hKeQytFjVxDM","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0198ct6aHdJn7gLrpBtQfjRj","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/GuidesTab.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":20450,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20450,"ephemeral_1h_input_tokens":0},"output_tokens":109,"service_tier":"standard"}},"requestId":"req_011CWUyaf3uohfQ7p3NjtFE6","type":"assistant","uuid":"82db9b55-106e-4577-b560-f015c201bbee","timestamp":"2025-12-26T08:23:19.280Z"}
{"parentUuid":"82db9b55-106e-4577-b560-f015c201bbee","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"4e0d04e8-56ad-4bca-9e4b-36b62804ea66","version":"2.0.76","gitBranch":"main","agentId":"a31523e","slug":"shiny-hatching-balloon","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0198ct6aHdJn7gLrpBtQfjRj","type":"tool_result","content":"     1→'use client';\n     2→\n     3→import { useState, useCallback } from 'react';\n     4→import { motion, AnimatePresence } from 'framer-motion';\n     5→import {\n     6→  BookOpen,\n     7→  Dumbbell,\n     8→  Sparkles,\n     9→  Clock,\n    10→  ChevronRight,\n    11→  Search,\n    12→  Brain,\n    13→  Wrench,\n    14→  TrendingDown,\n    15→  Calendar,\n    16→  Target,\n    17→  Heart,\n    18→  Utensils,\n    19→  Droplet,\n    20→  X,\n    21→  ArrowLeft,\n    22→  MessageSquare,\n    23→  ExternalLink,\n    24→  ShoppingCart,\n    25→  CheckCircle2,\n    26→  AlertTriangle,\n    27→  Flame,\n    28→  Zap,\n    29→} from 'lucide-react';\n    30→import Image from 'next/image';\n    31→import Link from 'next/link';\n    32→import { TabContent } from '../ResultsLayout';\n    33→import {\n    34→  GUIDE_CATEGORIES,\n    35→  getGuidesByCategory,\n    36→  getTotalGuideCount,\n    37→  getTotalReadTime,\n    38→  searchGuides,\n    39→  getGuideProductById,\n    40→} from '@/data/guides';\n    41→import { Guide, GuideCategory, GuideMedia } from '@/types/guides';\n    42→import { useRegion } from '@/contexts/RegionContext';\n    43→import ReactMarkdown from 'react-markdown';\n    44→import remarkGfm from 'remark-gfm';\n    45→\n    46→// ============================================\n    47→// ICON MAPPING\n    48→// ============================================\n    49→\n    50→const ICON_MAP: Record<string, React.ReactNode> = {\n    51→  BookOpen: <BookOpen size={20} />,\n    52→  Dumbbell: <Dumbbell size={20} />,\n    53→  Sparkles: <Sparkles size={20} />,\n    54→  Brain: <Brain size={20} />,\n    55→  Wrench: <Wrench size={20} />,\n    56→  TrendingDown: <TrendingDown size={20} />,\n    57→  Calendar: <Calendar size={20} />,\n    58→  Target: <Target size={20} />,\n    59→  Heart: <Heart size={20} />,\n    60→  Utensils: <Utensils size={20} />,\n    61→  Droplet: <Droplet size={20} />,\n    62→};\n    63→\n    64→function getIconComponent(iconName: string, size = 20): React.ReactNode {\n    65→  // Check icon map first\n    66→  const mappedIcon = ICON_MAP[iconName];\n    67→  if (mappedIcon) return mappedIcon;\n    68→\n    69→  // Fallback to BookOpen\n    70→  return <BookOpen size={size} />;\n    71→}\n    72→\n    73→// ============================================\n    74→// MEDIA RENDERER\n    75→// ============================================\n    76→\n    77→interface MediaRendererProps {\n    78→  media: GuideMedia;\n    79→}\n    80→\n    81→function MediaRenderer({ media }: MediaRendererProps) {\n    82→  const [hasError, setHasError] = useState(false);\n    83→  const [isLoading, setIsLoading] = useState(true);\n    84→\n    85→  const handleError = useCallback(() => {\n    86→    setHasError(true);\n    87→    setIsLoading(false);\n    88→  }, []);\n    89→\n    90→  const handleLoad = useCallback(() => {\n    91→    setIsLoading(false);\n    92→  }, []);\n    93→\n    94→  const placementClasses = {\n    95→    inline: 'max-w-lg mx-auto',\n    96→    hero: 'w-full',\n    97→    'full-width': 'w-full',\n    98→  };\n    99→\n   100→  const isGif = media.type === 'gif' || media.url.endsWith('.gif');\n   101→\n   102→  // Show styled placeholder if image failed to load or doesn't exist\n   103→  if (hasError) {\n   104→    return (\n   105→      <figure className={`my-10 ${placementClasses[media.placement || 'inline']}`}>\n   106→        <div className=\"relative rounded-2xl overflow-hidden bg-gradient-to-br from-neutral-900 to-neutral-950 border border-neutral-800\">\n   107→          <div className=\"aspect-video flex items-center justify-center p-8\">\n   108→            <div className=\"text-center max-w-sm\">\n   109→              <div className=\"w-16 h-16 bg-gradient-to-br from-cyan-500/20 to-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-cyan-500/20\">\n   110→                {isGif ? (\n   111→                  <div className=\"w-6 h-6 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin\" />\n   112→                ) : (\n   113→                  <Sparkles size={28} className=\"text-cyan-400\" />\n   114→                )}\n   115→              </div>\n   116→              <p className=\"text-neutral-300 font-medium mb-2\">{media.alt}</p>\n   117→              {media.caption && (\n   118→                <p className=\"text-neutral-500 text-sm\">{media.caption}</p>\n   119→              )}\n   120→            </div>\n   121→          </div>\n   122→        </div>\n   123→      </figure>\n   124→    );\n   125→  }\n   126→\n   127→  return (\n   128→    <figure className={`my-10 ${placementClasses[media.placement || 'inline']}`}>\n   129→      <div className=\"relative rounded-2xl overflow-hidden bg-neutral-900 border border-neutral-800\">\n   130→        {/* Loading skeleton */}\n   131→        {isLoading && (\n   132→          <div className=\"absolute inset-0 bg-neutral-900 animate-pulse flex items-center justify-center\">\n   133→            <div className=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin\" />\n   134→          </div>\n   135→        )}\n   136→\n   137→        {isGif ? (\n   138→          // Use img for GIFs to preserve animation\n   139→          // eslint-disable-next-line @next/next/no-img-element\n   140→          <img\n   141→            src={media.url}\n   142→            alt={media.alt}\n   143→            className={`w-full h-auto transition-opacity duration-300 ${isLoading ? 'opacity-0' : 'opacity-100'}`}\n   144→            loading=\"lazy\"\n   145→            onError={handleError}\n   146→            onLoad={handleLoad}\n   147→          />\n   148→        ) : (\n   149→          <Image\n   150→            src={media.url}\n   151→            alt={media.alt}\n   152→            width={media.width || 800}\n   153→            height={media.height || 450}\n   154→            className={`w-full h-auto transition-opacity duration-300 ${isLoading ? 'opacity-0' : 'opacity-100'}`}\n   155→            onError={handleError}\n   156→            onLoad={handleLoad}\n   157→          />\n   158→        )}\n   159→      </div>\n   160→      {media.caption && (\n   161→        <figcaption className=\"mt-4 text-center text-sm text-neutral-500 italic\">\n   162→          {media.caption}\n   163→        </figcaption>\n   164→      )}\n   165→    </figure>\n   166→  );\n   167→}\n   168→\n   169→// ============================================\n   170→// PRODUCT CALLOUT (CONVERSION OPTIMIZED)\n   171→// ============================================\n   172→\n   173→interface ProductCalloutProps {\n   174→  productId: string;\n   175→}\n   176→\n   177→function ProductCallout({ productId }: ProductCalloutProps) {\n   178→  const { getLink } = useRegion();\n   179→  const product = getGuideProductById(productId);\n   180→\n   181→  if (!product) return null;\n   182→\n   183→  const link = getLink(product.regionLinks, product.directLink);\n   184→\n   185→  return (\n   186→    <div className=\"my-6 p-4 bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 rounded-xl\">\n   187→      <div className=\"flex items-center gap-4\">\n   188→        {/* Product Image */}\n   189→        {product.imageUrl && (\n   190→          <div className=\"w-16 h-16 bg-neutral-800 rounded-lg overflow-hidden flex-shrink-0\">\n   191→            <Image\n   192→              src={product.imageUrl}\n   193→              alt={product.name}\n   194→              width={64}\n   195→              height={64}\n   196→              className=\"w-full h-full object-cover\"\n   197→            />\n   198→          </div>\n   199→        )}\n   200→\n   201→        {/* Product Info */}\n   202→        <div className=\"flex-1 min-w-0\">\n   203→          <div className=\"flex items-center gap-2\">\n   204→            <h4 className=\"font-semibold text-white truncate\">{product.name}</h4>\n   205→            {product.brand && (\n   206→              <span className=\"text-xs text-neutral-500\">{product.brand}</span>\n   207→            )}\n   208→          </div>\n   209→          <p className=\"text-sm text-cyan-300 italic\">&ldquo;{product.tagline}&rdquo;</p>\n   210→        </div>\n   211→\n   212→        {/* CTA Button */}\n   213→        <a\n   214→          href={link}\n   215→          target=\"_blank\"\n   216→          rel=\"noopener noreferrer\"\n   217→          className=\"flex-shrink-0 flex items-center gap-2 px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-black font-medium rounded-lg transition-colors\"\n   218→        >\n   219→          <ShoppingCart size={16} />\n   220→          <span className=\"hidden sm:inline\">Buy Now</span>\n   221→        </a>\n   222→      </div>\n   223→    </div>\n   224→  );\n   225→}\n   226→\n   227→// ============================================\n   228→// FORUM DISCUSSION LINK\n   229→// ============================================\n   230→\n   231→interface ForumDiscussionLinkProps {\n   232→  forumCategory?: string;\n   233→  guideTitle: string;\n   234→}\n   235→\n   236→function ForumDiscussionLink({ forumCategory, guideTitle }: ForumDiscussionLinkProps) {\n   237→  if (!forumCategory) return null;\n   238→\n   239→  return (\n   240→    <div className=\"mt-8 p-6 bg-neutral-900/50 border border-neutral-800 rounded-xl\">\n   241→      <div className=\"flex items-center gap-3 mb-3\">\n   242→        <div className=\"w-10 h-10 bg-purple-500/10 rounded-xl flex items-center justify-center\">\n   243→          <MessageSquare size={20} className=\"text-purple-400\" />\n   244→        </div>\n   245→        <div>\n   246→          <h3 className=\"font-semibold text-white\">Discuss This Guide</h3>\n   247→          <p className=\"text-sm text-neutral-400\">Join the community conversation</p>\n   248→        </div>\n   249→      </div>\n   250→\n   251→      <p className=\"text-sm text-neutral-400 mb-4\">\n   252→        Have questions about {guideTitle.toLowerCase()}? Want to share your experience?\n   253→        Join the discussion in our community forum.\n   254→      </p>\n   255→\n   256→      <Link\n   257→        href={`/forum/${forumCategory}`}\n   258→        className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 border border-purple-500/30 rounded-lg transition-colors\"\n   259→      >\n   260→        <MessageSquare size={16} />\n   261→        Go to Forum\n   262→        <ExternalLink size={14} />\n   263→      </Link>\n   264→    </div>\n   265→  );\n   266→}\n   267→\n   268→// ============================================\n   269→// GUIDE STATS CARD\n   270→// ============================================\n   271→\n   272→function GuideStatsCard() {\n   273→  const totalGuides = getTotalGuideCount();\n   274→  const totalMinutes = getTotalReadTime();\n   275→\n   276→  return (\n   277→    <motion.div\n   278→      className=\"bg-gradient-to-br from-neutral-900 to-neutral-950 border border-neutral-800 rounded-2xl p-6 mb-6\"\n   279→      initial={{ opacity: 0, y: 20 }}\n   280→      animate={{ opacity: 1, y: 0 }}\n   281→    >\n   282→      <div className=\"flex items-center gap-3 mb-4\">\n   283→        <div className=\"w-10 h-10 bg-cyan-500/10 rounded-xl flex items-center justify-center\">\n   284→          <BookOpen size={20} className=\"text-cyan-400\" />\n   285→        </div>\n   286→        <div>\n   287→          <h2 className=\"font-semibold text-white\">Product Guides</h2>\n   288→          <p className=\"text-sm text-neutral-400\">Evidence-based looksmaxxing resources</p>\n   289→        </div>\n   290→      </div>\n   291→\n   292→      <div className=\"grid grid-cols-2 gap-4\">\n   293→        <div className=\"bg-neutral-900/50 rounded-xl p-4\">\n   294→          <div className=\"text-2xl font-bold text-white mb-1\">{totalGuides}</div>\n   295→          <div className=\"text-xs text-neutral-500\">Total Guides</div>\n   296→        </div>\n   297→        <div className=\"bg-neutral-900/50 rounded-xl p-4\">\n   298→          <div className=\"flex items-center gap-1.5 mb-1\">\n   299→            <Clock size={16} className=\"text-cyan-400\" />\n   300→            <div className=\"text-2xl font-bold text-white\">{totalMinutes}</div>\n   301→          </div>\n   302→          <div className=\"text-xs text-neutral-500\">Minutes of Content</div>\n   303→        </div>\n   304→      </div>\n   305→    </motion.div>\n   306→  );\n   307→}\n   308→\n   309→// ============================================\n   310→// GUIDE VIEWER MODAL\n   311→// ============================================\n   312→\n   313→interface GuideViewerProps {\n   314→  guide: Guide;\n   315→  onClose: () => void;\n   316→}\n   317→\n   318→function GuideViewer({ guide, onClose }: GuideViewerProps) {\n   319→  const [currentSection, setCurrentSection] = useState(0);\n   320→\n   321→  const section = guide.sections[currentSection];\n   322→\n   323→  return (\n   324→    <motion.div\n   325→      initial={{ opacity: 0 }}\n   326→      animate={{ opacity: 1 }}\n   327→      exit={{ opacity: 0 }}\n   328→      className=\"fixed inset-0 z-50 bg-neutral-950 overflow-y-auto\"\n   329→    >\n   330→      <div className=\"min-h-screen\">\n   331→        {/* Minimal Header */}\n   332→        <div className=\"sticky top-0 z-10 bg-neutral-950/95 backdrop-blur-md border-b border-neutral-900\">\n   333→          <div className=\"max-w-3xl mx-auto px-6 py-4 flex items-center justify-between\">\n   334→            <button\n   335→              onClick={onClose}\n   336→              className=\"flex items-center gap-2 text-neutral-500 hover:text-white transition-colors text-sm\"\n   337→            >\n   338→              <ArrowLeft size={18} />\n   339→              <span className=\"hidden sm:inline\">Back</span>\n   340→            </button>\n   341→            <div className=\"flex items-center gap-4 text-neutral-500 text-sm\">\n   342→              <span className=\"hidden sm:flex items-center gap-1.5\">\n   343→                <Clock size={14} />\n   344→                {guide.estimatedReadTime} min read\n   345→              </span>\n   346→              <span className=\"text-neutral-700\">|</span>\n   347→              <span className=\"text-neutral-400\">\n   348→                {currentSection + 1} of {guide.sections.length}\n   349→              </span>\n   350→            </div>\n   351→            <button\n   352→              onClick={onClose}\n   353→              className=\"p-2 hover:bg-neutral-900 rounded-lg transition-colors\"\n   354→            >\n   355→              <X size={18} className=\"text-neutral-500\" />\n   356→            </button>\n   357→          </div>\n   358→        </div>\n   359→\n   360→        {/* Article Content */}\n   361→        <article className=\"max-w-3xl mx-auto px-6 py-12 md:py-16\">\n   362→          {/* Hero Media */}\n   363→          {guide.heroMedia && currentSection === 0 && (\n   364→            <div className=\"mb-12\">\n   365→              <MediaRenderer media={guide.heroMedia} />\n   366→            </div>\n   367→          )}\n   368→\n   369→          {/* Article Header */}\n   370→          {currentSection === 0 && (\n   371→            <header className=\"mb-16 text-center\">\n   372→              <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-cyan-500/10 text-cyan-400 rounded-full text-xs font-medium mb-6\">\n   373→                {getIconComponent(guide.icon, 14)}\n   374→                <span className=\"uppercase tracking-wider\">Guide</span>\n   375→              </div>\n   376→\n   377→              <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 leading-tight\">\n   378→                {guide.title}\n   379→              </h1>\n   380→\n   381→              {guide.subtitle && (\n   382→                <p className=\"text-lg md:text-xl text-neutral-400 italic mb-6\">\n   383→                  {guide.subtitle}\n   384→                </p>\n   385→              )}\n   386→\n   387→              <p className=\"text-neutral-300 text-lg leading-relaxed max-w-2xl mx-auto\">\n   388→                {guide.description}\n   389→              </p>\n   390→\n   391→              {/* Divider */}\n   392→              <div className=\"flex items-center justify-center gap-3 mt-10\">\n   393→                <div className=\"h-px w-16 bg-gradient-to-r from-transparent to-neutral-800\" />\n   394→                <div className=\"w-1.5 h-1.5 bg-cyan-500 rounded-full\" />\n   395→                <div className=\"h-px w-16 bg-gradient-to-l from-transparent to-neutral-800\" />\n   396→              </div>\n   397→            </header>\n   398→          )}\n   399→\n   400→          {/* Section Navigation Pills */}\n   401→          <nav className=\"mb-10\">\n   402→            <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide justify-center\">\n   403→              {guide.sections.map((s, idx) => (\n   404→                <button\n   405→                  key={s.id}\n   406→                  onClick={() => setCurrentSection(idx)}\n   407→                  className={`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all ${\n   408→                    currentSection === idx\n   409→                      ? 'bg-white text-black font-medium'\n   410→                      : 'bg-neutral-900 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-300'\n   411→                  }`}\n   412→                >\n   413→                  {s.title}\n   414→                </button>\n   415→              ))}\n   416→            </div>\n   417→          </nav>\n   418→\n   419→          {/* Section Content */}\n   420→          <AnimatePresence mode=\"wait\">\n   421→            <motion.section\n   422→              key={section.id}\n   423→              initial={{ opacity: 0, y: 20 }}\n   424→              animate={{ opacity: 1, y: 0 }}\n   425→              exit={{ opacity: 0, y: -20 }}\n   426→              transition={{ duration: 0.3 }}\n   427→            >\n   428→              {/* Section Title */}\n   429→              <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-8 pb-4 border-b border-neutral-900\">\n   430→                {section.title}\n   431→              </h2>\n   432→\n   433→              {/* Tips Callout */}\n   434→              {section.tips && section.tips.length > 0 && (\n   435→                <aside className=\"mb-10 p-6 bg-gradient-to-br from-cyan-500/5 to-cyan-600/5 border-l-4 border-cyan-500 rounded-r-xl\">\n   436→                  <h4 className=\"text-sm font-semibold text-cyan-400 uppercase tracking-wider mb-4\">\n   437→                    Quick Tips\n   438→                  </h4>\n   439→                  <ul className=\"space-y-3\">\n   440→                    {section.tips.map((tip, i) => (\n   441→                      <li key={i} className=\"flex items-start gap-3 text-neutral-300\">\n   442→                        <span className=\"flex-shrink-0 w-5 h-5 bg-cyan-500/20 rounded-full flex items-center justify-center mt-0.5\">\n   443→                          <span className=\"text-cyan-400 text-xs font-bold\">{i + 1}</span>\n   444→                        </span>\n   445→                        <span className=\"leading-relaxed\">{tip}</span>\n   446→                      </li>\n   447→                    ))}\n   448→                  </ul>\n   449→                </aside>\n   450→              )}\n   451→\n   452→              {/* Warnings Callout */}\n   453→              {section.warnings && section.warnings.length > 0 && (\n   454→                <aside className=\"mb-10 p-6 bg-gradient-to-br from-amber-500/5 to-amber-600/5 border-l-4 border-amber-500 rounded-r-xl\">\n   455→                  <h4 className=\"text-sm font-semibold text-amber-400 uppercase tracking-wider mb-4\">\n   456→                    ⚠️ Important\n   457→                  </h4>\n   458→                  <ul className=\"space-y-3\">\n   459→                    {section.warnings.map((warning, i) => (\n   460→                      <li key={i} className=\"flex items-start gap-3 text-neutral-300\">\n   461→                        <span className=\"text-amber-400 mt-1\">•</span>\n   462→                        <span className=\"leading-relaxed\">{warning}</span>\n   463→                      </li>\n   464→                    ))}\n   465→                  </ul>\n   466→                </aside>\n   467→              )}\n   468→\n   469→              {/* Hero Media for Section */}\n   470→              {section.media && section.media.filter(m => m.placement === 'hero').map(media => (\n   471→                <div key={media.id} className=\"mb-10\">\n   472→                  <MediaRenderer media={media} />\n   473→                </div>\n   474→              ))}\n   475→\n   476→              {/* Article Body - Custom Markdown Rendering */}\n   477→              <div className=\"article-content\">\n   478→                <ReactMarkdown\n   479→                  remarkPlugins={[remarkGfm]}\n   480→                  components={{\n   481→                    // Paragraphs with generous spacing\n   482→                    p: ({ children }) => (\n   483→                      <p className=\"text-neutral-300 text-lg leading-[1.8] mb-6\">\n   484→                        {children}\n   485→                      </p>\n   486→                    ),\n   487→                    // Headers with clear hierarchy\n   488→                    h1: ({ children }) => (\n   489→                      <h1 className=\"text-2xl font-bold text-white mt-12 mb-6\">\n   490→                        {children}\n   491→                      </h1>\n   492→                    ),\n   493→                    h2: ({ children }) => (\n   494→                      <h2 className=\"text-xl font-bold text-white mt-10 mb-5 pb-3 border-b border-neutral-800\">\n   495→                        {children}\n   496→                      </h2>\n   497→                    ),\n   498→                    h3: ({ children }) => (\n   499→                      <h3 className=\"text-lg font-semibold text-white mt-8 mb-4\">\n   500→                        {children}\n   501→                      </h3>\n   502→                    ),\n   503→                    // Strong text\n   504→                    strong: ({ children }) => (\n   505→                      <strong className=\"font-semibold text-white\">\n   506→                        {children}\n   507→                      </strong>\n   508→                    ),\n   509→                    // Emphasis\n   510→                    em: ({ children }) => (\n   511→                      <em className=\"text-neutral-400 not-italic\">\n   512→                        {children}\n   513→                      </em>\n   514→                    ),\n   515→                    // Lists with proper spacing\n   516→                    ul: ({ children }) => (\n   517→                      <ul className=\"my-6 ml-0 space-y-3\">\n   518→                        {children}\n   519→                      </ul>\n   520→                    ),\n   521→                    ol: ({ children }) => (\n   522→                      <ol className=\"my-6 ml-0 space-y-3 list-decimal list-inside\">\n   523→                        {children}\n   524→                      </ol>\n   525→                    ),\n   526→                    li: ({ children }) => (\n   527→                      <li className=\"text-neutral-300 text-lg leading-[1.8] flex items-start gap-3\">\n   528→                        <span className=\"text-cyan-500 mt-1.5 flex-shrink-0\">•</span>\n   529→                        <span>{children}</span>\n   530→                      </li>\n   531→                    ),\n   532→                    // Tables - styled beautifully\n   533→                    table: ({ children }) => (\n   534→                      <div className=\"my-8 overflow-x-auto rounded-xl border border-neutral-800\">\n   535→                        <table className=\"w-full text-left\">\n   536→                          {children}\n   537→                        </table>\n   538→                      </div>\n   539→                    ),\n   540→                    thead: ({ children }) => (\n   541→                      <thead className=\"bg-neutral-900/80 border-b border-neutral-800\">\n   542→                        {children}\n   543→                      </thead>\n   544→                    ),\n   545→                    tbody: ({ children }) => (\n   546→                      <tbody className=\"divide-y divide-neutral-800/50\">\n   547→                        {children}\n   548→                      </tbody>\n   549→                    ),\n   550→                    tr: ({ children }) => (\n   551→                      <tr className=\"hover:bg-neutral-900/50 transition-colors\">\n   552→                        {children}\n   553→                      </tr>\n   554→                    ),\n   555→                    th: ({ children }) => (\n   556→                      <th className=\"px-4 py-3 text-sm font-semibold text-cyan-400 uppercase tracking-wider\">\n   557→                        {children}\n   558→                      </th>\n   559→                    ),\n   560→                    td: ({ children }) => (\n   561→                      <td className=\"px-4 py-3 text-neutral-300\">\n   562→                        {children}\n   563→                      </td>\n   564→                    ),\n   565→                    // Blockquotes\n   566→                    blockquote: ({ children }) => (\n   567→                      <blockquote className=\"my-8 pl-6 border-l-4 border-cyan-500 bg-neutral-900/50 py-4 pr-6 rounded-r-lg\">\n   568→                        {children}\n   569→                      </blockquote>\n   570→                    ),\n   571→                    // Code\n   572→                    code: ({ children }) => (\n   573→                      <code className=\"text-cyan-400 bg-neutral-900 px-2 py-1 rounded text-base\">\n   574→                        {children}\n   575→                      </code>\n   576→                    ),\n   577→                    // Links\n   578→                    a: ({ href, children }) => (\n   579→                      <a\n   580→                        href={href}\n   581→                        className=\"text-cyan-400 hover:text-cyan-300 underline underline-offset-4 decoration-cyan-500/30 hover:decoration-cyan-400 transition-colors\"\n   582→                        target=\"_blank\"\n   583→                        rel=\"noopener noreferrer\"\n   584→                      >\n   585→                        {children}\n   586→                      </a>\n   587→                    ),\n   588→                    // Horizontal rule\n   589→                    hr: () => (\n   590→                      <hr className=\"my-10 border-neutral-800\" />\n   591→                    ),\n   592→                  }}\n   593→                >\n   594→                  {section.content}\n   595→                </ReactMarkdown>\n   596→              </div>\n   597→\n   598→              {/* Inline Media */}\n   599→              {section.media && section.media.filter(m => m.placement !== 'hero').map(media => (\n   600→                <div key={media.id} className=\"my-10\">\n   601→                  <MediaRenderer media={media} />\n   602→                </div>\n   603→              ))}\n   604→\n   605→              {/* Product Recommendations */}\n   606→              {section.products && section.products.length > 0 && (\n   607→                <div className=\"mt-12 pt-8 border-t border-neutral-900\">\n   608→                  <h4 className=\"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-6\">\n   609→                    Recommended Products\n   610→                  </h4>\n   611→                  <div className=\"space-y-4\">\n   612→                    {section.products.map(productId => (\n   613→                      <ProductCallout key={productId} productId={productId} />\n   614→                    ))}\n   615→                  </div>\n   616→                </div>\n   617→              )}\n   618→\n   619→              {/* Section Navigation */}\n   620→              <nav className=\"flex items-center justify-between mt-16 pt-8 border-t border-neutral-900\">\n   621→                <button\n   622→                  onClick={() => setCurrentSection(Math.max(0, currentSection - 1))}\n   623→                  disabled={currentSection === 0}\n   624→                  className={`flex items-center gap-3 group transition-all ${\n   625→                    currentSection === 0\n   626→                      ? 'text-neutral-700 cursor-not-allowed'\n   627→                      : 'text-neutral-400 hover:text-white'\n   628→                  }`}\n   629→                >\n   630→                  <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${\n   631→                    currentSection === 0 ? 'bg-neutral-900' : 'bg-neutral-900 group-hover:bg-neutral-800'\n   632→                  }`}>\n   633→                    <ArrowLeft size={18} />\n   634→                  </div>\n   635→                  <div className=\"hidden sm:block text-left\">\n   636→                    <div className=\"text-xs text-neutral-600 uppercase tracking-wider\">Previous</div>\n   637→                    {currentSection > 0 && (\n   638→                      <div className=\"text-sm font-medium\">{guide.sections[currentSection - 1].title}</div>\n   639→                    )}\n   640→                  </div>\n   641→                </button>\n   642→\n   643→                <div className=\"flex items-center gap-2\">\n   644→                  {guide.sections.map((_, idx) => (\n   645→                    <button\n   646→                      key={idx}\n   647→                      onClick={() => setCurrentSection(idx)}\n   648→                      className={`w-2 h-2 rounded-full transition-all ${\n   649→                        currentSection === idx\n   650→                          ? 'bg-cyan-500 w-6'\n   651→                          : 'bg-neutral-800 hover:bg-neutral-700'\n   652→                      }`}\n   653→                    />\n   654→                  ))}\n   655→                </div>\n   656→\n   657→                <button\n   658→                  onClick={() => setCurrentSection(Math.min(guide.sections.length - 1, currentSection + 1))}\n   659→                  disabled={currentSection === guide.sections.length - 1}\n   660→                  className={`flex items-center gap-3 group transition-all ${\n   661→                    currentSection === guide.sections.length - 1\n   662→                      ? 'text-neutral-700 cursor-not-allowed'\n   663→                      : 'text-neutral-400 hover:text-white'\n   664→                  }`}\n   665→                >\n   666→                  <div className=\"hidden sm:block text-right\">\n   667→                    <div className=\"text-xs text-neutral-600 uppercase tracking-wider\">Next</div>\n   668→                    {currentSection < guide.sections.length - 1 && (\n   669→                      <div className=\"text-sm font-medium\">{guide.sections[currentSection + 1].title}</div>\n   670→                    )}\n   671→                  </div>\n   672→                  <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${\n   673→                    currentSection === guide.sections.length - 1 ? 'bg-neutral-900' : 'bg-neutral-900 group-hover:bg-cyan-500/20'\n   674→                  }`}>\n   675→                    <ChevronRight size={18} className={currentSection === guide.sections.length - 1 ? '' : 'group-hover:text-cyan-400'} />\n   676→                  </div>\n   677→                </button>\n   678→              </nav>\n   679→            </motion.section>\n   680→          </AnimatePresence>\n   681→\n   682→          {/* Forum Discussion Link (after last section) */}\n   683→          {currentSection === guide.sections.length - 1 && (\n   684→            <div className=\"mt-16\">\n   685→              <ForumDiscussionLink\n   686→                forumCategory={guide.forumCategory}\n   687→                guideTitle={guide.title}\n   688→              />\n   689→            </div>\n   690→          )}\n   691→        </article>\n   692→      </div>\n   693→    </motion.div>\n   694→  );\n   695→}\n   696→\n   697→// ============================================\n   698→// GUIDE CARD\n   699→// ============================================\n   700→\n   701→interface GuideCardProps {\n   702→  guide: Guide;\n   703→  index: number;\n   704→  onOpen: (guide: Guide) => void;\n   705→}\n   706→\n   707→function GuideCard({ guide, index, onOpen }: GuideCardProps) {\n   708→  const getCategoryColor = (guideId: string) => {\n   709→    const category = GUIDE_CATEGORIES.find(c => c.guideIds.includes(guideId));\n   710→    if (!category) return 'cyan';\n   711→    const colorMap: Record<string, string> = {\n   712→      blue: 'cyan',\n   713→      purple: 'purple',\n   714→      amber: 'amber',\n   715→    };\n   716→    return colorMap[category.color] || 'cyan';\n   717→  };\n   718→\n   719→  const color = getCategoryColor(guide.id);\n   720→\n   721→  const colorClasses = {\n   722→    cyan: 'from-cyan-500/10 to-cyan-600/10 border-cyan-500/20 text-cyan-400',\n   723→    purple: 'from-purple-500/10 to-purple-600/10 border-purple-500/20 text-purple-400',\n   724→    amber: 'from-amber-500/10 to-amber-600/10 border-amber-500/20 text-amber-400',\n   725→  };\n   726→\n   727→  const iconColorClasses = {\n   728→    cyan: 'bg-cyan-500/10 text-cyan-400',\n   729→    purple: 'bg-purple-500/10 text-purple-400',\n   730→    amber: 'bg-amber-500/10 text-amber-400',\n   731→  };\n   732→\n   733→  return (\n   734→    <motion.div\n   735→      onClick={() => onOpen(guide)}\n   736→      className={`bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses]} border rounded-xl p-5 hover:border-opacity-50 transition-all cursor-pointer group`}\n   737→      initial={{ opacity: 0, y: 20 }}\n   738→      animate={{ opacity: 1, y: 0 }}\n   739→      transition={{ delay: index * 0.05 }}\n   740→      whileHover={{ y: -2 }}\n   741→    >\n   742→      <div className=\"flex items-start justify-between mb-3\">\n   743→        <div className={`w-10 h-10 ${iconColorClasses[color as keyof typeof iconColorClasses]} rounded-xl flex items-center justify-center`}>\n   744→          {getIconComponent(guide.icon)}\n   745→        </div>\n   746→        <div className=\"flex items-center gap-1 text-neutral-500 text-xs\">\n   747→          <Clock size={12} />\n   748→          <span>{guide.estimatedReadTime} min</span>\n   749→        </div>\n   750→      </div>\n   751→\n   752→      <h3 className=\"font-semibold text-white mb-1 group-hover:text-cyan-300 transition-colors\">\n   753→        {guide.title}\n   754→      </h3>\n   755→\n   756→      {guide.subtitle && (\n   757→        <p className=\"text-xs text-neutral-400 mb-2 italic\">{guide.subtitle}</p>\n   758→      )}\n   759→\n   760→      <p className=\"text-sm text-neutral-400 mb-3 line-clamp-2\">{guide.description}</p>\n   761→\n   762→      <div className=\"flex items-center justify-between\">\n   763→        <div className=\"flex items-center gap-1 text-xs text-neutral-500\">\n   764→          <span>{guide.sections.length} sections</span>\n   765→          {guide.productIds && guide.productIds.length > 0 && (\n   766→            <>\n   767→              <span>-</span>\n   768→              <span>{guide.productIds.length} products</span>\n   769→            </>\n   770→          )}\n   771→        </div>\n   772→        <ChevronRight size={16} className=\"text-neutral-600 group-hover:text-cyan-400 transition-colors\" />\n   773→      </div>\n   774→    </motion.div>\n   775→  );\n   776→}\n   777→\n   778→// ============================================\n   779→// CATEGORY SECTION\n   780→// ============================================\n   781→\n   782→interface CategorySectionProps {\n   783→  category: GuideCategory;\n   784→  onOpenGuide: (guide: Guide) => void;\n   785→}\n   786→\n   787→function CategorySection({ category, onOpenGuide }: CategorySectionProps) {\n   788→  const guides = getGuidesByCategory(category.id);\n   789→\n   790→  if (guides.length === 0) return null;\n   791→\n   792→  const colorClasses = {\n   793→    blue: 'text-cyan-400 bg-cyan-500/10',\n   794→    purple: 'text-purple-400 bg-purple-500/10',\n   795→    amber: 'text-amber-400 bg-amber-500/10',\n   796→  };\n   797→\n   798→  return (\n   799→    <div className=\"mb-8\">\n   800→      <div className=\"flex items-center gap-3 mb-4\">\n   801→        <div className={`w-8 h-8 ${colorClasses[category.color as keyof typeof colorClasses]} rounded-lg flex items-center justify-center`}>\n   802→          {getIconComponent(category.icon)}\n   803→        </div>\n   804→        <div>\n   805→          <h3 className=\"font-semibold text-white\">{category.name}</h3>\n   806→          <p className=\"text-xs text-neutral-500\">{category.description}</p>\n   807→        </div>\n   808→      </div>\n   809→\n   810→      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n   811→        {guides.map((guide, idx) => (\n   812→          <GuideCard key={guide.id} guide={guide} index={idx} onOpen={onOpenGuide} />\n   813→        ))}\n   814→      </div>\n   815→    </div>\n   816→  );\n   817→}\n   818→\n   819→// ============================================\n   820→// SEARCH BAR\n   821→// ============================================\n   822→\n   823→interface SearchBarProps {\n   824→  query: string;\n   825→  onQueryChange: (query: string) => void;\n   826→}\n   827→\n   828→function SearchBar({ query, onQueryChange }: SearchBarProps) {\n   829→  return (\n   830→    <div className=\"relative mb-6\">\n   831→      <Search size={18} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500\" />\n   832→      <input\n   833→        type=\"text\"\n   834→        placeholder=\"Search guides...\"\n   835→        value={query}\n   836→        onChange={(e) => onQueryChange(e.target.value)}\n   837→        className=\"w-full bg-neutral-900 border border-neutral-800 rounded-xl pl-11 pr-4 py-3 text-white placeholder:text-neutral-500 focus:outline-none focus:border-cyan-500/50 transition-colors\"\n   838→      />\n   839→    </div>\n   840→  );\n   841→}\n   842→\n   843→// ============================================\n   844→// MAIN TAB COMPONENT\n   845→// ============================================\n   846→\n   847→export function GuidesTab() {\n   848→  const [searchQuery, setSearchQuery] = useState('');\n   849→  const [selectedGuide, setSelectedGuide] = useState<Guide | null>(null);\n   850→\n   851→  const filteredGuides = searchQuery.trim()\n   852→    ? searchGuides(searchQuery)\n   853→    : null;\n   854→\n   855→  const handleOpenGuide = (guide: Guide) => {\n   856→    setSelectedGuide(guide);\n   857→  };\n   858→\n   859→  const handleCloseGuide = () => {\n   860→    setSelectedGuide(null);\n   861→  };\n   862→\n   863→  return (\n   864→    <>\n   865→      <TabContent\n   866→        title=\"Product Guides\"\n   867→        subtitle=\"Evidence-based guides for optimal results\"\n   868→      >\n   869→        <div className=\"max-w-5xl mx-auto\">\n   870→          <GuideStatsCard />\n   871→\n   872→          <SearchBar query={searchQuery} onQueryChange={setSearchQuery} />\n   873→\n   874→          {filteredGuides ? (\n   875→            // Search Results\n   876→            <div>\n   877→              <p className=\"text-sm text-neutral-400 mb-4\">\n   878→                Found {filteredGuides.length} guide{filteredGuides.length !== 1 ? 's' : ''} matching &ldquo;{searchQuery}&rdquo;\n   879→              </p>\n   880→              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n   881→                {filteredGuides.map((guide, idx) => (\n   882→                  <GuideCard key={guide.id} guide={guide} index={idx} onOpen={handleOpenGuide} />\n   883→                ))}\n   884→              </div>\n   885→              {filteredGuides.length === 0 && (\n   886→                <div className=\"text-center py-12\">\n   887→                  <div className=\"w-16 h-16 bg-neutral-900 rounded-full flex items-center justify-center mx-auto mb-4\">\n   888→                    <Search size={24} className=\"text-neutral-600\" />\n   889→                  </div>\n   890→                  <p className=\"text-neutral-500\">No guides found matching your search</p>\n   891→                </div>\n   892→              )}\n   893→            </div>\n   894→          ) : (\n   895→            // Category View\n   896→            <div>\n   897→              {GUIDE_CATEGORIES.map(category => (\n   898→                <CategorySection key={category.id} category={category} onOpenGuide={handleOpenGuide} />\n   899→              ))}\n   900→            </div>\n   901→          )}\n   902→        </div>\n   903→      </TabContent>\n   904→\n   905→      {/* Guide Viewer Modal */}\n   906→      <AnimatePresence>\n   907→        {selectedGuide && (\n   908→          <GuideViewer guide={selectedGuide} onClose={handleCloseGuide} />\n   909→        )}\n   910→      </AnimatePresence>\n   911→    </>\n   912→  );\n   913→}\n   914→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"493975dc-0734-49a4-b442-a8f5366847f6","timestamp":"2025-12-26T08:23:19.462Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/components/results/tabs/GuidesTab.tsx","content":"'use client';\n\nimport { useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  BookOpen,\n  Dumbbell,\n  Sparkles,\n  Clock,\n  ChevronRight,\n  Search,\n  Brain,\n  Wrench,\n  TrendingDown,\n  Calendar,\n  Target,\n  Heart,\n  Utensils,\n  Droplet,\n  X,\n  ArrowLeft,\n  MessageSquare,\n  ExternalLink,\n  ShoppingCart,\n  CheckCircle2,\n  AlertTriangle,\n  Flame,\n  Zap,\n} from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { TabContent } from '../ResultsLayout';\nimport {\n  GUIDE_CATEGORIES,\n  getGuidesByCategory,\n  getTotalGuideCount,\n  getTotalReadTime,\n  searchGuides,\n  getGuideProductById,\n} from '@/data/guides';\nimport { Guide, GuideCategory, GuideMedia } from '@/types/guides';\nimport { useRegion } from '@/contexts/RegionContext';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\n// ============================================\n// ICON MAPPING\n// ============================================\n\nconst ICON_MAP: Record<string, React.ReactNode> = {\n  BookOpen: <BookOpen size={20} />,\n  Dumbbell: <Dumbbell size={20} />,\n  Sparkles: <Sparkles size={20} />,\n  Brain: <Brain size={20} />,\n  Wrench: <Wrench size={20} />,\n  TrendingDown: <TrendingDown size={20} />,\n  Calendar: <Calendar size={20} />,\n  Target: <Target size={20} />,\n  Heart: <Heart size={20} />,\n  Utensils: <Utensils size={20} />,\n  Droplet: <Droplet size={20} />,\n};\n\nfunction getIconComponent(iconName: string, size = 20): React.ReactNode {\n  // Check icon map first\n  const mappedIcon = ICON_MAP[iconName];\n  if (mappedIcon) return mappedIcon;\n\n  // Fallback to BookOpen\n  return <BookOpen size={size} />;\n}\n\n// ============================================\n// MEDIA RENDERER\n// ============================================\n\ninterface MediaRendererProps {\n  media: GuideMedia;\n}\n\nfunction MediaRenderer({ media }: MediaRendererProps) {\n  const [hasError, setHasError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const handleError = useCallback(() => {\n    setHasError(true);\n    setIsLoading(false);\n  }, []);\n\n  const handleLoad = useCallback(() => {\n    setIsLoading(false);\n  }, []);\n\n  const placementClasses = {\n    inline: 'max-w-lg mx-auto',\n    hero: 'w-full',\n    'full-width': 'w-full',\n  };\n\n  const isGif = media.type === 'gif' || media.url.endsWith('.gif');\n\n  // Show styled placeholder if image failed to load or doesn't exist\n  if (hasError) {\n    return (\n      <figure className={`my-10 ${placementClasses[media.placement || 'inline']}`}>\n        <div className=\"relative rounded-2xl overflow-hidden bg-gradient-to-br from-neutral-900 to-neutral-950 border border-neutral-800\">\n          <div className=\"aspect-video flex items-center justify-center p-8\">\n            <div className=\"text-center max-w-sm\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-cyan-500/20 to-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-cyan-500/20\">\n                {isGif ? (\n                  <div className=\"w-6 h-6 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <Sparkles size={28} className=\"text-cyan-400\" />\n                )}\n              </div>\n              <p className=\"text-neutral-300 font-medium mb-2\">{media.alt}</p>\n              {media.caption && (\n                <p className=\"text-neutral-500 text-sm\">{media.caption}</p>\n              )}\n            </div>\n          </div>\n        </div>\n      </figure>\n    );\n  }\n\n  return (\n    <figure className={`my-10 ${placementClasses[media.placement || 'inline']}`}>\n      <div className=\"relative rounded-2xl overflow-hidden bg-neutral-900 border border-neutral-800\">\n        {/* Loading skeleton */}\n        {isLoading && (\n          <div className=\"absolute inset-0 bg-neutral-900 animate-pulse flex items-center justify-center\">\n            <div className=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin\" />\n          </div>\n        )}\n\n        {isGif ? (\n          // Use img for GIFs to preserve animation\n          // eslint-disable-next-line @next/next/no-img-element\n          <img\n            src={media.url}\n            alt={media.alt}\n            className={`w-full h-auto transition-opacity duration-300 ${isLoading ? 'opacity-0' : 'opacity-100'}`}\n            loading=\"lazy\"\n            onError={handleError}\n            onLoad={handleLoad}\n          />\n        ) : (\n          <Image\n            src={media.url}\n            alt={media.alt}\n            width={media.width || 800}\n            height={media.height || 450}\n            className={`w-full h-auto transition-opacity duration-300 ${isLoading ? 'opacity-0' : 'opacity-100'}`}\n            onError={handleError}\n            onLoad={handleLoad}\n          />\n        )}\n      </div>\n      {media.caption && (\n        <figcaption className=\"mt-4 text-center text-sm text-neutral-500 italic\">\n          {media.caption}\n        </figcaption>\n      )}\n    </figure>\n  );\n}\n\n// ============================================\n// PRODUCT CALLOUT (CONVERSION OPTIMIZED)\n// ============================================\n\ninterface ProductCalloutProps {\n  productId: string;\n}\n\nfunction ProductCallout({ productId }: ProductCalloutProps) {\n  const { getLink } = useRegion();\n  const product = getGuideProductById(productId);\n\n  if (!product) return null;\n\n  const link = getLink(product.regionLinks, product.directLink);\n\n  return (\n    <div className=\"my-6 p-4 bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 rounded-xl\">\n      <div className=\"flex items-center gap-4\">\n        {/* Product Image */}\n        {product.imageUrl && (\n          <div className=\"w-16 h-16 bg-neutral-800 rounded-lg overflow-hidden flex-shrink-0\">\n            <Image\n              src={product.imageUrl}\n              alt={product.name}\n              width={64}\n              height={64}\n              className=\"w-full h-full object-cover\"\n            />\n          </div>\n        )}\n\n        {/* Product Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <h4 className=\"font-semibold text-white truncate\">{product.name}</h4>\n            {product.brand && (\n              <span className=\"text-xs text-neutral-500\">{product.brand}</span>\n            )}\n          </div>\n          <p className=\"text-sm text-cyan-300 italic\">&ldquo;{product.tagline}&rdquo;</p>\n        </div>\n\n        {/* CTA Button */}\n        <a\n          href={link}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex-shrink-0 flex items-center gap-2 px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-black font-medium rounded-lg transition-colors\"\n        >\n          <ShoppingCart size={16} />\n          <span className=\"hidden sm:inline\">Buy Now</span>\n        </a>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// FORUM DISCUSSION LINK\n// ============================================\n\ninterface ForumDiscussionLinkProps {\n  forumCategory?: string;\n  guideTitle: string;\n}\n\nfunction ForumDiscussionLink({ forumCategory, guideTitle }: ForumDiscussionLinkProps) {\n  if (!forumCategory) return null;\n\n  return (\n    <div className=\"mt-8 p-6 bg-neutral-900/50 border border-neutral-800 rounded-xl\">\n      <div className=\"flex items-center gap-3 mb-3\">\n        <div className=\"w-10 h-10 bg-purple-500/10 rounded-xl flex items-center justify-center\">\n          <MessageSquare size={20} className=\"text-purple-400\" />\n        </div>\n        <div>\n          <h3 className=\"font-semibold text-white\">Discuss This Guide</h3>\n          <p className=\"text-sm text-neutral-400\">Join the community conversation</p>\n        </div>\n      </div>\n\n      <p className=\"text-sm text-neutral-400 mb-4\">\n        Have questions about {guideTitle.toLowerCase()}? Want to share your experience?\n        Join the discussion in our community forum.\n      </p>\n\n      <Link\n        href={`/forum/${forumCategory}`}\n        className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 border border-purple-500/30 rounded-lg transition-colors\"\n      >\n        <MessageSquare size={16} />\n        Go to Forum\n        <ExternalLink size={14} />\n      </Link>\n    </div>\n  );\n}\n\n// ============================================\n// GUIDE STATS CARD\n// ============================================\n\nfunction GuideStatsCard() {\n  const totalGuides = getTotalGuideCount();\n  const totalMinutes = getTotalReadTime();\n\n  return (\n    <motion.div\n      className=\"bg-gradient-to-br from-neutral-900 to-neutral-950 border border-neutral-800 rounded-2xl p-6 mb-6\"\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n    >\n      <div className=\"flex items-center gap-3 mb-4\">\n        <div className=\"w-10 h-10 bg-cyan-500/10 rounded-xl flex items-center justify-center\">\n          <BookOpen size={20} className=\"text-cyan-400\" />\n        </div>\n        <div>\n          <h2 className=\"font-semibold text-white\">Product Guides</h2>\n          <p className=\"text-sm text-neutral-400\">Evidence-based looksmaxxing resources</p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"bg-neutral-900/50 rounded-xl p-4\">\n          <div className=\"text-2xl font-bold text-white mb-1\">{totalGuides}</div>\n          <div className=\"text-xs text-neutral-500\">Total Guides</div>\n        </div>\n        <div className=\"bg-neutral-900/50 rounded-xl p-4\">\n          <div className=\"flex items-center gap-1.5 mb-1\">\n            <Clock size={16} className=\"text-cyan-400\" />\n            <div className=\"text-2xl font-bold text-white\">{totalMinutes}</div>\n          </div>\n          <div className=\"text-xs text-neutral-500\">Minutes of Content</div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// GUIDE VIEWER MODAL\n// ============================================\n\ninterface GuideViewerProps {\n  guide: Guide;\n  onClose: () => void;\n}\n\nfunction GuideViewer({ guide, onClose }: GuideViewerProps) {\n  const [currentSection, setCurrentSection] = useState(0);\n\n  const section = guide.sections[currentSection];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 bg-neutral-950 overflow-y-auto\"\n    >\n      <div className=\"min-h-screen\">\n        {/* Minimal Header */}\n        <div className=\"sticky top-0 z-10 bg-neutral-950/95 backdrop-blur-md border-b border-neutral-900\">\n          <div className=\"max-w-3xl mx-auto px-6 py-4 flex items-center justify-between\">\n            <button\n              onClick={onClose}\n              className=\"flex items-center gap-2 text-neutral-500 hover:text-white transition-colors text-sm\"\n            >\n              <ArrowLeft size={18} />\n              <span className=\"hidden sm:inline\">Back</span>\n            </button>\n            <div className=\"flex items-center gap-4 text-neutral-500 text-sm\">\n              <span className=\"hidden sm:flex items-center gap-1.5\">\n                <Clock size={14} />\n                {guide.estimatedReadTime} min read\n              </span>\n              <span className=\"text-neutral-700\">|</span>\n              <span className=\"text-neutral-400\">\n                {currentSection + 1} of {guide.sections.length}\n              </span>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-neutral-900 rounded-lg transition-colors\"\n            >\n              <X size={18} className=\"text-neutral-500\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Article Content */}\n        <article className=\"max-w-3xl mx-auto px-6 py-12 md:py-16\">\n          {/* Hero Media */}\n          {guide.heroMedia && currentSection === 0 && (\n            <div className=\"mb-12\">\n              <MediaRenderer media={guide.heroMedia} />\n            </div>\n          )}\n\n          {/* Article Header */}\n          {currentSection === 0 && (\n            <header className=\"mb-16 text-center\">\n              <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-cyan-500/10 text-cyan-400 rounded-full text-xs font-medium mb-6\">\n                {getIconComponent(guide.icon, 14)}\n                <span className=\"uppercase tracking-wider\">Guide</span>\n              </div>\n\n              <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 leading-tight\">\n                {guide.title}\n              </h1>\n\n              {guide.subtitle && (\n                <p className=\"text-lg md:text-xl text-neutral-400 italic mb-6\">\n                  {guide.subtitle}\n                </p>\n              )}\n\n              <p className=\"text-neutral-300 text-lg leading-relaxed max-w-2xl mx-auto\">\n                {guide.description}\n              </p>\n\n              {/* Divider */}\n              <div className=\"flex items-center justify-center gap-3 mt-10\">\n                <div className=\"h-px w-16 bg-gradient-to-r from-transparent to-neutral-800\" />\n                <div className=\"w-1.5 h-1.5 bg-cyan-500 rounded-full\" />\n                <div className=\"h-px w-16 bg-gradient-to-l from-transparent to-neutral-800\" />\n              </div>\n            </header>\n          )}\n\n          {/* Section Navigation Pills */}\n          <nav className=\"mb-10\">\n            <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide justify-center\">\n              {guide.sections.map((s, idx) => (\n                <button\n                  key={s.id}\n                  onClick={() => setCurrentSection(idx)}\n                  className={`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all ${\n                    currentSection === idx\n                      ? 'bg-white text-black font-medium'\n                      : 'bg-neutral-900 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-300'\n                  }`}\n                >\n                  {s.title}\n                </button>\n              ))}\n            </div>\n          </nav>\n\n          {/* Section Content */}\n          <AnimatePresence mode=\"wait\">\n            <motion.section\n              key={section.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n            >\n              {/* Section Title */}\n              <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-8 pb-4 border-b border-neutral-900\">\n                {section.title}\n              </h2>\n\n              {/* Tips Callout */}\n              {section.tips && section.tips.length > 0 && (\n                <aside className=\"mb-10 p-6 bg-gradient-to-br from-cyan-500/5 to-cyan-600/5 border-l-4 border-cyan-500 rounded-r-xl\">\n                  <h4 className=\"text-sm font-semibold text-cyan-400 uppercase tracking-wider mb-4\">\n                    Quick Tips\n                  </h4>\n                  <ul className=\"space-y-3\">\n                    {section.tips.map((tip, i) => (\n                      <li key={i} className=\"flex items-start gap-3 text-neutral-300\">\n                        <span className=\"flex-shrink-0 w-5 h-5 bg-cyan-500/20 rounded-full flex items-center justify-center mt-0.5\">\n                          <span className=\"text-cyan-400 text-xs font-bold\">{i + 1}</span>\n                        </span>\n                        <span className=\"leading-relaxed\">{tip}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </aside>\n              )}\n\n              {/* Warnings Callout */}\n              {section.warnings && section.warnings.length > 0 && (\n                <aside className=\"mb-10 p-6 bg-gradient-to-br from-amber-500/5 to-amber-600/5 border-l-4 border-amber-500 rounded-r-xl\">\n                  <h4 className=\"text-sm font-semibold text-amber-400 uppercase tracking-wider mb-4\">\n                    ⚠️ Important\n                  </h4>\n                  <ul className=\"space-y-3\">\n                    {section.warnings.map((warning, i) => (\n                      <li key={i} className=\"flex items-start gap-3 text-neutral-300\">\n                        <span className=\"text-amber-400 mt-1\">•</span>\n                        <span className=\"leading-relaxed\">{warning}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </aside>\n              )}\n\n              {/* Hero Media for Section */}\n              {section.media && section.media.filter(m => m.placement === 'hero').map(media => (\n                <div key={media.id} className=\"mb-10\">\n                  <MediaRenderer media={media} />\n                </div>\n              ))}\n\n              {/* Article Body - Custom Markdown Rendering */}\n              <div className=\"article-content\">\n                <ReactMarkdown\n                  remarkPlugins={[remarkGfm]}\n                  components={{\n                    // Paragraphs with generous spacing\n                    p: ({ children }) => (\n                      <p className=\"text-neutral-300 text-lg leading-[1.8] mb-6\">\n                        {children}\n                      </p>\n                    ),\n                    // Headers with clear hierarchy\n                    h1: ({ children }) => (\n                      <h1 className=\"text-2xl font-bold text-white mt-12 mb-6\">\n                        {children}\n                      </h1>\n                    ),\n                    h2: ({ children }) => (\n                      <h2 className=\"text-xl font-bold text-white mt-10 mb-5 pb-3 border-b border-neutral-800\">\n                        {children}\n                      </h2>\n                    ),\n                    h3: ({ children }) => (\n                      <h3 className=\"text-lg font-semibold text-white mt-8 mb-4\">\n                        {children}\n                      </h3>\n                    ),\n                    // Strong text\n                    strong: ({ children }) => (\n                      <strong className=\"font-semibold text-white\">\n                        {children}\n                      </strong>\n                    ),\n                    // Emphasis\n                    em: ({ children }) => (\n                      <em className=\"text-neutral-400 not-italic\">\n                        {children}\n                      </em>\n                    ),\n                    // Lists with proper spacing\n                    ul: ({ children }) => (\n                      <ul className=\"my-6 ml-0 space-y-3\">\n                        {children}\n                      </ul>\n                    ),\n                    ol: ({ children }) => (\n                      <ol className=\"my-6 ml-0 space-y-3 list-decimal list-inside\">\n                        {children}\n                      </ol>\n                    ),\n                    li: ({ children }) => (\n                      <li className=\"text-neutral-300 text-lg leading-[1.8] flex items-start gap-3\">\n                        <span className=\"text-cyan-500 mt-1.5 flex-shrink-0\">•</span>\n                        <span>{children}</span>\n                      </li>\n                    ),\n                    // Tables - styled beautifully\n                    table: ({ children }) => (\n                      <div className=\"my-8 overflow-x-auto rounded-xl border border-neutral-800\">\n                        <table className=\"w-full text-left\">\n                          {children}\n                        </table>\n                      </div>\n                    ),\n                    thead: ({ children }) => (\n                      <thead className=\"bg-neutral-900/80 border-b border-neutral-800\">\n                        {children}\n                      </thead>\n                    ),\n                    tbody: ({ children }) => (\n                      <tbody className=\"divide-y divide-neutral-800/50\">\n                        {children}\n                      </tbody>\n                    ),\n                    tr: ({ children }) => (\n                      <tr className=\"hover:bg-neutral-900/50 transition-colors\">\n                        {children}\n                      </tr>\n                    ),\n                    th: ({ children }) => (\n                      <th className=\"px-4 py-3 text-sm font-semibold text-cyan-400 uppercase tracking-wider\">\n                        {children}\n                      </th>\n                    ),\n                    td: ({ children }) => (\n                      <td className=\"px-4 py-3 text-neutral-300\">\n                        {children}\n                      </td>\n                    ),\n                    // Blockquotes\n                    blockquote: ({ children }) => (\n                      <blockquote className=\"my-8 pl-6 border-l-4 border-cyan-500 bg-neutral-900/50 py-4 pr-6 rounded-r-lg\">\n                        {children}\n                      </blockquote>\n                    ),\n                    // Code\n                    code: ({ children }) => (\n                      <code className=\"text-cyan-400 bg-neutral-900 px-2 py-1 rounded text-base\">\n                        {children}\n                      </code>\n                    ),\n                    // Links\n                    a: ({ href, children }) => (\n                      <a\n                        href={href}\n                        className=\"text-cyan-400 hover:text-cyan-300 underline underline-offset-4 decoration-cyan-500/30 hover:decoration-cyan-400 transition-colors\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        {children}\n                      </a>\n                    ),\n                    // Horizontal rule\n                    hr: () => (\n                      <hr className=\"my-10 border-neutral-800\" />\n                    ),\n                  }}\n                >\n                  {section.content}\n                </ReactMarkdown>\n              </div>\n\n              {/* Inline Media */}\n              {section.media && section.media.filter(m => m.placement !== 'hero').map(media => (\n                <div key={media.id} className=\"my-10\">\n                  <MediaRenderer media={media} />\n                </div>\n              ))}\n\n              {/* Product Recommendations */}\n              {section.products && section.products.length > 0 && (\n                <div className=\"mt-12 pt-8 border-t border-neutral-900\">\n                  <h4 className=\"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-6\">\n                    Recommended Products\n                  </h4>\n                  <div className=\"space-y-4\">\n                    {section.products.map(productId => (\n                      <ProductCallout key={productId} productId={productId} />\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Section Navigation */}\n              <nav className=\"flex items-center justify-between mt-16 pt-8 border-t border-neutral-900\">\n                <button\n                  onClick={() => setCurrentSection(Math.max(0, currentSection - 1))}\n                  disabled={currentSection === 0}\n                  className={`flex items-center gap-3 group transition-all ${\n                    currentSection === 0\n                      ? 'text-neutral-700 cursor-not-allowed'\n                      : 'text-neutral-400 hover:text-white'\n                  }`}\n                >\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${\n                    currentSection === 0 ? 'bg-neutral-900' : 'bg-neutral-900 group-hover:bg-neutral-800'\n                  }`}>\n                    <ArrowLeft size={18} />\n                  </div>\n                  <div className=\"hidden sm:block text-left\">\n                    <div className=\"text-xs text-neutral-600 uppercase tracking-wider\">Previous</div>\n                    {currentSection > 0 && (\n                      <div className=\"text-sm font-medium\">{guide.sections[currentSection - 1].title}</div>\n                    )}\n                  </div>\n                </button>\n\n                <div className=\"flex items-center gap-2\">\n                  {guide.sections.map((_, idx) => (\n                    <button\n                      key={idx}\n                      onClick={() => setCurrentSection(idx)}\n                      className={`w-2 h-2 rounded-full transition-all ${\n                        currentSection === idx\n                          ? 'bg-cyan-500 w-6'\n                          : 'bg-neutral-800 hover:bg-neutral-700'\n                      }`}\n                    />\n                  ))}\n                </div>\n\n                <button\n                  onClick={() => setCurrentSection(Math.min(guide.sections.length - 1, currentSection + 1))}\n                  disabled={currentSection === guide.sections.length - 1}\n                  className={`flex items-center gap-3 group transition-all ${\n                    currentSection === guide.sections.length - 1\n                      ? 'text-neutral-700 cursor-not-allowed'\n                      : 'text-neutral-400 hover:text-white'\n                  }`}\n                >\n                  <div className=\"hidden sm:block text-right\">\n                    <div className=\"text-xs text-neutral-600 uppercase tracking-wider\">Next</div>\n                    {currentSection < guide.sections.length - 1 && (\n                      <div className=\"text-sm font-medium\">{guide.sections[currentSection + 1].title}</div>\n                    )}\n                  </div>\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${\n                    currentSection === guide.sections.length - 1 ? 'bg-neutral-900' : 'bg-neutral-900 group-hover:bg-cyan-500/20'\n                  }`}>\n                    <ChevronRight size={18} className={currentSection === guide.sections.length - 1 ? '' : 'group-hover:text-cyan-400'} />\n                  </div>\n                </button>\n              </nav>\n            </motion.section>\n          </AnimatePresence>\n\n          {/* Forum Discussion Link (after last section) */}\n          {currentSection === guide.sections.length - 1 && (\n            <div className=\"mt-16\">\n              <ForumDiscussionLink\n                forumCategory={guide.forumCategory}\n                guideTitle={guide.title}\n              />\n            </div>\n          )}\n        </article>\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// GUIDE CARD\n// ============================================\n\ninterface GuideCardProps {\n  guide: Guide;\n  index: number;\n  onOpen: (guide: Guide) => void;\n}\n\nfunction GuideCard({ guide, index, onOpen }: GuideCardProps) {\n  const getCategoryColor = (guideId: string) => {\n    const category = GUIDE_CATEGORIES.find(c => c.guideIds.includes(guideId));\n    if (!category) return 'cyan';\n    const colorMap: Record<string, string> = {\n      blue: 'cyan',\n      purple: 'purple',\n      amber: 'amber',\n    };\n    return colorMap[category.color] || 'cyan';\n  };\n\n  const color = getCategoryColor(guide.id);\n\n  const colorClasses = {\n    cyan: 'from-cyan-500/10 to-cyan-600/10 border-cyan-500/20 text-cyan-400',\n    purple: 'from-purple-500/10 to-purple-600/10 border-purple-500/20 text-purple-400',\n    amber: 'from-amber-500/10 to-amber-600/10 border-amber-500/20 text-amber-400',\n  };\n\n  const iconColorClasses = {\n    cyan: 'bg-cyan-500/10 text-cyan-400',\n    purple: 'bg-purple-500/10 text-purple-400',\n    amber: 'bg-amber-500/10 text-amber-400',\n  };\n\n  return (\n    <motion.div\n      onClick={() => onOpen(guide)}\n      className={`bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses]} border rounded-xl p-5 hover:border-opacity-50 transition-all cursor-pointer group`}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: index * 0.05 }}\n      whileHover={{ y: -2 }}\n    >\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className={`w-10 h-10 ${iconColorClasses[color as keyof typeof iconColorClasses]} rounded-xl flex items-center justify-center`}>\n          {getIconComponent(guide.icon)}\n        </div>\n        <div className=\"flex items-center gap-1 text-neutral-500 text-xs\">\n          <Clock size={12} />\n          <span>{guide.estimatedReadTime} min</span>\n        </div>\n      </div>\n\n      <h3 className=\"font-semibold text-white mb-1 group-hover:text-cyan-300 transition-colors\">\n        {guide.title}\n      </h3>\n\n      {guide.subtitle && (\n        <p className=\"text-xs text-neutral-400 mb-2 italic\">{guide.subtitle}</p>\n      )}\n\n      <p className=\"text-sm text-neutral-400 mb-3 line-clamp-2\">{guide.description}</p>\n\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-1 text-xs text-neutral-500\">\n          <span>{guide.sections.length} sections</span>\n          {guide.productIds && guide.productIds.length > 0 && (\n            <>\n              <span>-</span>\n              <span>{guide.productIds.length} products</span>\n            </>\n          )}\n        </div>\n        <ChevronRight size={16} className=\"text-neutral-600 group-hover:text-cyan-400 transition-colors\" />\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================\n// CATEGORY SECTION\n// ============================================\n\ninterface CategorySectionProps {\n  category: GuideCategory;\n  onOpenGuide: (guide: Guide) => void;\n}\n\nfunction CategorySection({ category, onOpenGuide }: CategorySectionProps) {\n  const guides = getGuidesByCategory(category.id);\n\n  if (guides.length === 0) return null;\n\n  const colorClasses = {\n    blue: 'text-cyan-400 bg-cyan-500/10',\n    purple: 'text-purple-400 bg-purple-500/10',\n    amber: 'text-amber-400 bg-amber-500/10',\n  };\n\n  return (\n    <div className=\"mb-8\">\n      <div className=\"flex items-center gap-3 mb-4\">\n        <div className={`w-8 h-8 ${colorClasses[category.color as keyof typeof colorClasses]} rounded-lg flex items-center justify-center`}>\n          {getIconComponent(category.icon)}\n        </div>\n        <div>\n          <h3 className=\"font-semibold text-white\">{category.name}</h3>\n          <p className=\"text-xs text-neutral-500\">{category.description}</p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {guides.map((guide, idx) => (\n          <GuideCard key={guide.id} guide={guide} index={idx} onOpen={onOpenGuide} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// SEARCH BAR\n// ============================================\n\ninterface SearchBarProps {\n  query: string;\n  onQueryChange: (query: string) => void;\n}\n\nfunction SearchBar({ query, onQueryChange }: SearchBarProps) {\n  return (\n    <div className=\"relative mb-6\">\n      <Search size={18} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500\" />\n      <input\n        type=\"text\"\n        placeholder=\"Search guides...\"\n        value={query}\n        onChange={(e) => onQueryChange(e.target.value)}\n        className=\"w-full bg-neutral-900 border border-neutral-800 rounded-xl pl-11 pr-4 py-3 text-white placeholder:text-neutral-500 focus:outline-none focus:border-cyan-500/50 transition-colors\"\n      />\n    </div>\n  );\n}\n\n// ============================================\n// MAIN TAB COMPONENT\n// ============================================\n\nexport function GuidesTab() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedGuide, setSelectedGuide] = useState<Guide | null>(null);\n\n  const filteredGuides = searchQuery.trim()\n    ? searchGuides(searchQuery)\n    : null;\n\n  const handleOpenGuide = (guide: Guide) => {\n    setSelectedGuide(guide);\n  };\n\n  const handleCloseGuide = () => {\n    setSelectedGuide(null);\n  };\n\n  return (\n    <>\n      <TabContent\n        title=\"Product Guides\"\n        subtitle=\"Evidence-based guides for optimal results\"\n      >\n        <div className=\"max-w-5xl mx-auto\">\n          <GuideStatsCard />\n\n          <SearchBar query={searchQuery} onQueryChange={setSearchQuery} />\n\n          {filteredGuides ? (\n            // Search Results\n            <div>\n              <p className=\"text-sm text-neutral-400 mb-4\">\n                Found {filteredGuides.length} guide{filteredGuides.length !== 1 ? 's' : ''} matching &ldquo;{searchQuery}&rdquo;\n              </p>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {filteredGuides.map((guide, idx) => (\n                  <GuideCard key={guide.id} guide={guide} index={idx} onOpen={handleOpenGuide} />\n                ))}\n              </div>\n              {filteredGuides.length === 0 && (\n                <div className=\"text-center py-12\">\n                  <div className=\"w-16 h-16 bg-neutral-900 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Search size={24} className=\"text-neutral-600\" />\n                  </div>\n                  <p className=\"text-neutral-500\">No guides found matching your search</p>\n                </div>\n              )}\n            </div>\n          ) : (\n            // Category View\n            <div>\n              {GUIDE_CATEGORIES.map(category => (\n                <CategorySection key={category.id} category={category} onOpenGuide={handleOpenGuide} />\n              ))}\n            </div>\n          )}\n        </div>\n      </TabContent>\n\n      {/* Guide Viewer Modal */}\n      <AnimatePresence>\n        {selectedGuide && (\n          <GuideViewer guide={selectedGuide} onClose={handleCloseGuide} />\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n","numLines":914,"startLine":1,"totalLines":914}}}
{"parentUuid":"493975dc-0734-49a4-b442-a8f5366847f6","isSidechain":true,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX/looksmaxx-app","sessionId":"4e0d04e8-56ad-4bca-9e4b-36b62804ea66","version":"2.0.76","gitBranch":"main","agentId":"a31523e","slug":"shiny-hatching-balloon","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01CLm3mp3eRpfR2anUUGUGAN","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! I've read the GuideViewer component. Let me provide you with a comprehensive analysis of the current structure and how to convert it to a side panel layout.\n\n## Analysis: Current GuideViewer Structure\n\n### Current Layout (Top Tabs Navigation)\n\n**Location**: Lines 318-695 in `GuideViewer` function\n\n**Section Navigation Structure**:\n- **Pills Navigation** (lines 400-417): Horizontal scrolling tabs at the top showing all sections\n- **State Management**: `currentSection` state (line 319) tracks active section index\n- **Content Rendering**: `section = guide.sections[currentSection]` (line 321) renders current section content\n- **Section Switching**: Clicking any pill calls `setCurrentSection(idx)` (line 406)\n\n### Key Components to Understand\n\n1. **Navigation Pills** (lines 400-417):\n   - Centered horizontal layout with overflow handling\n   - Styled with `px-4 py-2 rounded-full` pills\n   - Active state: `bg-white text-black font-medium`\n   - Inactive state: `bg-neutral-900 text-neutral-500`\n\n2. **Section Content** (lines 419-680):\n   - Wrapped in `AnimatePresence` for transition animations\n   - Fade + vertical slide animations via `motion.section`\n   - Includes hero media, tips, warnings, inline media, products, and navigation\n\n3. **Bottom Navigation** (lines 619-678):\n   - Previous/Next buttons with labels\n   - Dot indicators showing progress\n   - Disabled states at boundaries\n\n4. **Animation Patterns**:\n   - Initial: `opacity: 0, y: 20`\n   - Animate: `opacity: 1, y: 0`\n   - Exit: `opacity: 0, y: -20`\n   - Duration: 0.3s\n\n### Conversion Strategy: Top Tabs → Side Panel\n\n**Key Changes Required**:\n\n1. **Layout Structure**:\n   - Change from single-column (`max-w-3xl mx-auto`) to two-column grid\n   - Left panel: Sticky section navigation (170-200px)\n   - Right panel: Scrollable content area\n\n2. **Navigation Pills**:\n   - Convert from horizontal pills to vertical list\n   - Stack vertically with full width\n   - Keep active indicator but adjust styling\n\n3. **Animations**:\n   - Keep the same fade/slide transitions for content\n   - Consider slide-in from right for new sections\n\n4. **Responsive Behavior**:\n   - On mobile/tablet: Stay as top tabs (current layout)\n   - On desktop: Switch to side panel (new layout)\n   - Or collapse side panel on smaller screens to drawer/modal\n\n5. **Header Adjustments**:\n   - Keep sticky header but adjust max-width for new layout\n   - Adjust spacing for grid layout\n\n### Code Snippets for Reference\n\n**Current Pill Navigation** (lines 400-417):\n```typescript\n<nav className=\"mb-10\">\n  <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide justify-center\">\n    {guide.sections.map((s, idx) => (\n      <button\n        key={s.id}\n        onClick={() => setCurrentSection(idx)}\n        className={`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all ${\n          currentSection === idx\n            ? 'bg-white text-black font-medium'\n            : 'bg-neutral-900 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-300'\n        }`}\n      >\n        {s.title}\n      </button>\n    ))}\n  </div>\n</nav>\n```\n\n**Current Content Wrapper** (lines 360-361):\n```typescript\n<article className=\"max-w-3xl mx-auto px-6 py-12 md:py-16\">\n```\n\n### Recommendations\n\n1. **Create wrapper grid**: Change `<article>` container to use `grid grid-cols-[220px_1fr]` or `md:grid-cols-[220px_1fr]` for responsive behavior\n\n2. **Create new `SidePanel` component**: Extract navigation pills into a sticky left sidebar component with:\n   - Fixed/sticky positioning\n   - Scrollable section list\n   - Active indicator (left border or background)\n   - Compact styling to fit in narrow space\n\n3. **Update animation**: Consider sliding from right for new content since layout fundamentally changes\n\n4. **Maintain mobile UX**: Use `hidden md:block` for side panel and keep top tabs on mobile via different component variant\n\n5. **Styling approach**: Use modern Tailwind grid gaps, padding adjustments, and responsive prefixes to maintain design consistency\n\nWould you like me to proceed with creating the specific implementation for converting the navigation to a side panel layout?"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":12862,"cache_read_input_tokens":20450,"cache_creation":{"ephemeral_5m_input_tokens":12862,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWUyao4NFufbeeAvJEAb8","type":"assistant","uuid":"39199820-c7ca-4851-8654-c3f3945845c9","timestamp":"2025-12-26T08:23:30.870Z"}
