     1→'use client';
     2→
     3→import { useState } from 'react';
     4→import { motion, AnimatePresence } from 'framer-motion';
     5→import { Download, FileImage, FileText, Loader2, Check, X } from 'lucide-react';
     6→import { exportToImage, exportToPDF, generateFilename } from '@/lib/exportReport';
     7→
     8→interface ExportButtonProps {
     9→  elementId: string;
    10→  variant?: 'button' | 'icon';
    11→  className?: string;
    12→}
    13→
    14→export function ExportButton({
    15→  elementId,
    16→  variant = 'button',
    17→  className = '',
    18→}: ExportButtonProps) {
    19→  const [isOpen, setIsOpen] = useState(false);
    20→  const [isExporting, setIsExporting] = useState<'image' | 'pdf' | null>(null);
    21→  const [status, setStatus] = useState<{ type: 'success' | 'error'; message: string } | null>(null);
    22→
    23→  const handleExport = async (format: 'image' | 'pdf') => {
    24→    setIsExporting(format);
    25→    setStatus(null);
    26→
    27→    const filename = generateFilename('looksmaxx-results');
    28→
    29→    try {
    30→      const result = format === 'image'
    31→        ? await exportToImage(elementId, { filename })
    32→        : await exportToPDF(elementId, { filename });
    33→
    34→      if (result.success) {
    35→        setStatus({ type: 'success', message: `Exported as ${format.toUpperCase()}!` });
    36→        setTimeout(() => {
    37→          setStatus(null);
    38→          setIsOpen(false);
    39→        }, 1500);
    40→      } else {
    41→        setStatus({ type: 'error', message: result.error || 'Export failed' });
    42→      }
    43→    } catch {
    44→      setStatus({ type: 'error', message: 'Export failed' });
    45→    } finally {
    46→      setIsExporting(null);
    47→    }
    48→  };
    49→
    50→  if (variant === 'icon') {
    51→    return (
    52→      <button
    53→        onClick={() => setIsOpen(true)}
    54→        className={`p-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 transition-colors ${className}`}
    55→        title="Export results"
    56→      >
    57→        <Download size={18} className="text-neutral-300" />
    58→      </button>
    59→    );
    60→  }
    61→
    62→  return (
    63→    <div className="relative">
    64→      <button
    65→        onClick={() => setIsOpen(true)}
    66→        className={`flex items-center gap-2 px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors text-sm font-medium text-neutral-200 ${className}`}
    67→      >
    68→        <Download size={16} />
    69→        <span>Export</span>
    70→      </button>
    71→
    72→      {/* Export modal */}
    73→      <AnimatePresence>
    74→        {isOpen && (
    75→          <>
    76→            <motion.div
    77→              initial={{ opacity: 0 }}
    78→              animate={{ opacity: 1 }}
    79→              exit={{ opacity: 0 }}
    80→              className="fixed inset-0 bg-black/50 z-40"
    81→              onClick={() => !isExporting && setIsOpen(false)}
    82→            />
    83→            <motion.div
    84→              initial={{ opacity: 0, scale: 0.95 }}
    85→              animate={{ opacity: 1, scale: 1 }}
    86→              exit={{ opacity: 0, scale: 0.95 }}
    87→              className="absolute top-full mt-2 right-0 w-64 bg-neutral-900 border border-neutral-700 rounded-xl shadow-2xl z-50 overflow-hidden"
    88→            >
    89→              <div className="flex items-center justify-between p-4 border-b border-neutral-800">
    90→                <h3 className="font-semibold text-white">Export Results</h3>
    91→                <button
    92→                  onClick={() => !isExporting && setIsOpen(false)}
    93→                  className="p-1 hover:bg-neutral-800 rounded-lg transition-colors disabled:opacity-50"
    94→                  disabled={!!isExporting}
    95→                >
    96→                  <X size={16} className="text-neutral-400" />
    97→                </button>
    98→              </div>
    99→
   100→              <div className="p-4 space-y-3">
   101→                {/* Status message */}
   102→                <AnimatePresence>
   103→                  {status && (
   104→                    <motion.div
   105→                      initial={{ opacity: 0, height: 0 }}
   106→                      animate={{ opacity: 1, height: 'auto' }}
   107→                      exit={{ opacity: 0, height: 0 }}
   108→                      className={`flex items-center gap-2 p-2 rounded-lg text-sm ${
   109→                        status.type === 'success'
   110→                          ? 'bg-green-500/20 text-green-400'
   111→                          : 'bg-red-500/20 text-red-400'
   112→                      }`}
   113→                    >
   114→                      {status.type === 'success' ? (
   115→                        <Check size={14} />
   116→                      ) : (
   117→                        <X size={14} />
   118→                      )}
   119→                      {status.message}
   120→                    </motion.div>
   121→                  )}
   122→                </AnimatePresence>
   123→
   124→                {/* Export options */}
   125→                <button
   126→                  onClick={() => handleExport('image')}
   127→                  disabled={!!isExporting}
   128→                  className="w-full flex items-center gap-3 p-3 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
   129→                >
   130→                  {isExporting === 'image' ? (
   131→                    <Loader2 size={20} className="text-cyan-400 animate-spin" />
   132→                  ) : (
   133→                    <FileImage size={20} className="text-cyan-400" />
   134→                  )}
   135→                  <div className="text-left">
   136→                    <p className="font-medium text-neutral-200">Save as Image</p>
   137→                    <p className="text-xs text-neutral-500">PNG format, high quality</p>
   138→                  </div>
   139→                </button>
   140→
   141→                <button
   142→                  onClick={() => handleExport('pdf')}
   143→                  disabled={!!isExporting}
   144→                  className="w-full flex items-center gap-3 p-3 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
   145→                >
   146→                  {isExporting === 'pdf' ? (
   147→                    <Loader2 size={20} className="text-purple-400 animate-spin" />
   148→                  ) : (
   149→                    <FileText size={20} className="text-purple-400" />
   150→                  )}
   151→                  <div className="text-left">
   152→                    <p className="font-medium text-neutral-200">Save as PDF</p>
   153→                    <p className="text-xs text-neutral-500">Printable document</p>
   154→                  </div>
   155→                </button>
   156→
   157→                <p className="text-xs text-neutral-500 text-center pt-2">
   158→                  Exports the current results view
   159→                </p>
   160→              </div>
   161→            </motion.div>
   162→          </>
   163→        )}
   164→      </AnimatePresence>
   165→    </div>
   166→  );
   167→}
   168→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
