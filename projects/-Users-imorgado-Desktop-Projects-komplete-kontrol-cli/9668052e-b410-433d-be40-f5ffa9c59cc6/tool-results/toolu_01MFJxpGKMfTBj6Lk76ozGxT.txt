/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-458-        echo ""
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-459-        echo "Example workflow:"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-460-        echo "  1. eval_prompt=\$($0 evaluate 'fix bug' 'code...' 'code' 'auth module')"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-461-        echo "  2. [Send eval_prompt to Claude, get result]"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-462-        echo "  3. action=\$($0 process \"\$result\" 'fix bug')"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup:463:        echo "  4. [If action=revise, retry with improvements]"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-464-        echo ""
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-465-        echo "Quality Thresholds:"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-466-        echo "  - Score >= 7.0: Pass (continue)"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup:467:        echo "  - Score < 7.0: Revise (improve and retry)"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-468-        echo "  - Critical issues: Always revise"
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-469-        ;;
/Users/imorgado/.claude/hooks/auto-evaluator.sh.backup-470-esac
--
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-1-#!/bin/bash
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-2-# Reinforcement Learning Tracker - Learn from outcomes
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup:3:# Based on: DB-GPT retry patterns, swarms RL patterns
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-4-# Tracks success/failure patterns and adjusts strategies
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-5-
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-6-set -eo pipefail
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-7-
/Users/imorgado/.claude/hooks/reinforcement-learning.sh.backup-8-CLAUDE_DIR="${HOME}/.claude"
--
/Users/imorgado/.claude/hooks/error-handler.sh-1-#!/bin/bash
/Users/imorgado/.claude/hooks/error-handler.sh:2:# Enhanced Error Handler - Smart retry with backoff and error classification
/Users/imorgado/.claude/hooks/error-handler.sh-3-# Based on patterns from: Discord.js, Cypress, Uniswap, neo4j, midday-ai
/Users/imorgado/.claude/hooks/error-handler.sh-4-
/Users/imorgado/.claude/hooks/error-handler.sh-5-set -euo pipefail
/Users/imorgado/.claude/hooks/error-handler.sh-6-
/Users/imorgado/.claude/hooks/error-handler.sh-7-LOG_FILE="${HOME}/.claude/error-handler.log"
--
/Users/imorgado/.claude/hooks/error-handler.sh-13-
/Users/imorgado/.claude/hooks/error-handler.sh-14-# Error Classification (from neo4j/midday-ai patterns)
/Users/imorgado/.claude/hooks/error-handler.sh-15-classify_error() {
/Users/imorgado/.claude/hooks/error-handler.sh-16-    local error_msg="$1"
/Users/imorgado/.claude/hooks/error-handler.sh-17-
/Users/imorgado/.claude/hooks/error-handler.sh:18:    # Transient errors - should retry
/Users/imorgado/.claude/hooks/error-handler.sh-19-    if echo "$error_msg" | grep -qiE "timeout|ETIMEDOUT|ECONNRESET|ECONNREFUSED|network|socket hang up|ENOTFOUND|503|502|504"; then
/Users/imorgado/.claude/hooks/error-handler.sh-20-        echo "TRANSIENT"
/Users/imorgado/.claude/hooks/error-handler.sh-21-        return
/Users/imorgado/.claude/hooks/error-handler.sh-22-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-23-
/Users/imorgado/.claude/hooks/error-handler.sh:24:    # Rate limit errors - should retry with longer backoff
/Users/imorgado/.claude/hooks/error-handler.sh:25:    if echo "$error_msg" | grep -qiE "rate.?limit|429|too many requests|quota exceeded"; then
/Users/imorgado/.claude/hooks/error-handler.sh-26-        echo "RATE_LIMIT"
/Users/imorgado/.claude/hooks/error-handler.sh-27-        return
/Users/imorgado/.claude/hooks/error-handler.sh-28-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-29-
/Users/imorgado/.claude/hooks/error-handler.sh:30:    # Client errors - should NOT retry (fix needed)
/Users/imorgado/.claude/hooks/error-handler.sh-31-    if echo "$error_msg" | grep -qiE "syntax.?error|type.?error|reference.?error|400|401|403|404|validation|invalid"; then
/Users/imorgado/.claude/hooks/error-handler.sh-32-        echo "CLIENT_ERROR"
/Users/imorgado/.claude/hooks/error-handler.sh-33-        return
/Users/imorgado/.claude/hooks/error-handler.sh-34-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-35-
/Users/imorgado/.claude/hooks/error-handler.sh:36:    # Build/compile errors - should NOT retry (fix needed)
/Users/imorgado/.claude/hooks/error-handler.sh-37-    if echo "$error_msg" | grep -qiE "cannot find|not found|undefined|null|compilation|build failed|lint|typecheck"; then
/Users/imorgado/.claude/hooks/error-handler.sh-38-        echo "BUILD_ERROR"
/Users/imorgado/.claude/hooks/error-handler.sh-39-        return
/Users/imorgado/.claude/hooks/error-handler.sh-40-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-41-
/Users/imorgado/.claude/hooks/error-handler.sh:42:    # Database errors - may retry
/Users/imorgado/.claude/hooks/error-handler.sh-43-    if echo "$error_msg" | grep -qiE "database|postgres|mysql|sqlite|connection|deadlock"; then
/Users/imorgado/.claude/hooks/error-handler.sh-44-        echo "DATABASE_ERROR"
/Users/imorgado/.claude/hooks/error-handler.sh-45-        return
/Users/imorgado/.claude/hooks/error-handler.sh-46-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-47-
/Users/imorgado/.claude/hooks/error-handler.sh-48-    echo "UNKNOWN"
/Users/imorgado/.claude/hooks/error-handler.sh-49-}
/Users/imorgado/.claude/hooks/error-handler.sh-50-
/Users/imorgado/.claude/hooks/error-handler.sh:51:# Determine if error should trigger retry (from Discord.js/Uniswap patterns)
/Users/imorgado/.claude/hooks/error-handler.sh:52:should_retry() {
/Users/imorgado/.claude/hooks/error-handler.sh-53-    local classification="$1"
/Users/imorgado/.claude/hooks/error-handler.sh-54-    local attempt="$2"
/Users/imorgado/.claude/hooks/error-handler.sh-55-    local max_retries="${3:-3}"
/Users/imorgado/.claude/hooks/error-handler.sh-56-
/Users/imorgado/.claude/hooks/error-handler.sh-57-    if [[ $attempt -ge $max_retries ]]; then
--
/Users/imorgado/.claude/hooks/error-handler.sh-78-            echo "false"
/Users/imorgado/.claude/hooks/error-handler.sh-79-            ;;
/Users/imorgado/.claude/hooks/error-handler.sh-80-    esac
/Users/imorgado/.claude/hooks/error-handler.sh-81-}
/Users/imorgado/.claude/hooks/error-handler.sh-82-
/Users/imorgado/.claude/hooks/error-handler.sh:83:# Calculate retry delay with exponential backoff (from Cypress/Uniswap patterns)
/Users/imorgado/.claude/hooks/error-handler.sh:84:calculate_backoff() {
/Users/imorgado/.claude/hooks/error-handler.sh-85-    local attempt="$1"
/Users/imorgado/.claude/hooks/error-handler.sh-86-    local classification="$2"
/Users/imorgado/.claude/hooks/error-handler.sh-87-    local base_delay=1000  # 1 second
/Users/imorgado/.claude/hooks/error-handler.sh-88-    local max_delay=30000  # 30 seconds
/Users/imorgado/.claude/hooks/error-handler.sh-89-
/Users/imorgado/.claude/hooks/error-handler.sh:90:    # Rate limits get longer backoff
/Users/imorgado/.claude/hooks/error-handler.sh-91-    if [[ "$classification" == "RATE_LIMIT" ]]; then
/Users/imorgado/.claude/hooks/error-handler.sh-92-        base_delay=5000
/Users/imorgado/.claude/hooks/error-handler.sh-93-        max_delay=60000
/Users/imorgado/.claude/hooks/error-handler.sh-94-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-95-
/Users/imorgado/.claude/hooks/error-handler.sh:96:    # Exponential backoff: base * 2^attempt
/Users/imorgado/.claude/hooks/error-handler.sh-97-    local delay=$((base_delay * (2 ** attempt)))
/Users/imorgado/.claude/hooks/error-handler.sh-98-
/Users/imorgado/.claude/hooks/error-handler.sh-99-    # Cap at max delay
/Users/imorgado/.claude/hooks/error-handler.sh-100-    if [[ $delay -gt $max_delay ]]; then
/Users/imorgado/.claude/hooks/error-handler.sh-101-        delay=$max_delay
--
/Users/imorgado/.claude/hooks/error-handler.sh-159-    error_code=$(echo "$error_msg" | grep -oE '(E[0-9]+|TS[0-9]+)' | head -1 2>/dev/null || echo "none")
/Users/imorgado/.claude/hooks/error-handler.sh-160-
/Users/imorgado/.claude/hooks/error-handler.sh-161-    local timestamp
/Users/imorgado/.claude/hooks/error-handler.sh-162-    timestamp=$(date '+%Y-%m-%d %H:%M:%S')
/Users/imorgado/.claude/hooks/error-handler.sh-163-
/Users/imorgado/.claude/hooks/error-handler.sh:164:    local retry_status
/Users/imorgado/.claude/hooks/error-handler.sh:165:    retry_status=$(should_retry "$classification" "$attempt")
/Users/imorgado/.claude/hooks/error-handler.sh-166-
/Users/imorgado/.claude/hooks/error-handler.sh-167-    # Append to debug log (simpler than sed insertion)
/Users/imorgado/.claude/hooks/error-handler.sh-168-    cat >> "$DEBUG_LOG" << EOFENTRY
/Users/imorgado/.claude/hooks/error-handler.sh-169-
/Users/imorgado/.claude/hooks/error-handler.sh-170-### Issue: $classification (Attempt $attempt)
--
/Users/imorgado/.claude/hooks/error-handler.sh-172-**Classification**: $classification
/Users/imorgado/.claude/hooks/error-handler.sh-173-**File**: $file_line
/Users/imorgado/.claude/hooks/error-handler.sh-174-**Code**: $error_code
/Users/imorgado/.claude/hooks/error-handler.sh-175-**Error**: \`$error_msg\`
/Users/imorgado/.claude/hooks/error-handler.sh-176-**Context**: ${context:-none}
/Users/imorgado/.claude/hooks/error-handler.sh:177:**Retryable**: $retry_status
/Users/imorgado/.claude/hooks/error-handler.sh-178-EOFENTRY
/Users/imorgado/.claude/hooks/error-handler.sh-179-
/Users/imorgado/.claude/hooks/error-handler.sh-180-    log "Logged $classification error (attempt $attempt)"
/Users/imorgado/.claude/hooks/error-handler.sh-181-}
/Users/imorgado/.claude/hooks/error-handler.sh-182-
--
/Users/imorgado/.claude/hooks/error-handler.sh-221-            log "ðŸ’¡ Found $similar_count similar bug fixes in memory"
/Users/imorgado/.claude/hooks/error-handler.sh-222-        fi
/Users/imorgado/.claude/hooks/error-handler.sh-223-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-224-    # ============================================================================
/Users/imorgado/.claude/hooks/error-handler.sh-225-
/Users/imorgado/.claude/hooks/error-handler.sh:226:    # NEW: Query memory for known fixes BEFORE deciding to retry
/Users/imorgado/.claude/hooks/error-handler.sh-227-    local known_fix=""
/Users/imorgado/.claude/hooks/error-handler.sh-228-    local MEMORY_MANAGER="${HOME}/.claude/hooks/memory-manager.sh"
/Users/imorgado/.claude/hooks/error-handler.sh-229-    if [[ -x "$MEMORY_MANAGER" && "$attempt" -eq 0 ]]; then
/Users/imorgado/.claude/hooks/error-handler.sh-230-        local patterns
/Users/imorgado/.claude/hooks/error-handler.sh-231-        patterns=$("$MEMORY_MANAGER" find-patterns "$error_msg" 3 2>/dev/null || echo "[]")
--
/Users/imorgado/.claude/hooks/error-handler.sh-253-                return
/Users/imorgado/.claude/hooks/error-handler.sh-254-            fi
/Users/imorgado/.claude/hooks/error-handler.sh-255-        fi
/Users/imorgado/.claude/hooks/error-handler.sh-256-    fi
/Users/imorgado/.claude/hooks/error-handler.sh-257-
/Users/imorgado/.claude/hooks/error-handler.sh:258:    local retry
/Users/imorgado/.claude/hooks/error-handler.sh:259:    retry=$(should_retry "$classification" "$attempt" "$max_retries")
/Users/imorgado/.claude/hooks/error-handler.sh-260-
/Users/imorgado/.claude/hooks/error-handler.sh:261:    local backoff
/Users/imorgado/.claude/hooks/error-handler.sh:262:    backoff=$(calculate_backoff "$attempt" "$classification")
/Users/imorgado/.claude/hooks/error-handler.sh-263-
/Users/imorgado/.claude/hooks/error-handler.sh-264-    # Log to debug-log.md
/Users/imorgado/.claude/hooks/error-handler.sh-265-    log_error_to_debug "$error_msg" "$classification" "$attempt" "$context"
/Users/imorgado/.claude/hooks/error-handler.sh-266-
/Users/imorgado/.claude/hooks/error-handler.sh-267-    # Output JSON for caller
/Users/imorgado/.claude/hooks/error-handler.sh-268-    jq -n \
/Users/imorgado/.claude/hooks/error-handler.sh-269-        --arg classification "$classification" \
/Users/imorgado/.claude/hooks/error-handler.sh:270:        --arg retry "$retry" \
/Users/imorgado/.claude/hooks/error-handler.sh:271:        --argjson backoff "$backoff" \
/Users/imorgado/.claude/hooks/error-handler.sh-272-        --argjson attempt "$attempt" \
/Users/imorgado/.claude/hooks/error-handler.sh-273-        --arg error "$error_msg" \
/Users/imorgado/.claude/hooks/error-handler.sh-274-        '{
/Users/imorgado/.claude/hooks/error-handler.sh-275-            classification: $classification,
/Users/imorgado/.claude/hooks/error-handler.sh:276:            shouldRetry: ($retry == "true"),
/Users/imorgado/.claude/hooks/error-handler.sh:277:            backoffMs: $backoff,
/Users/imorgado/.claude/hooks/error-handler.sh-278-            attempt: $attempt,
/Users/imorgado/.claude/hooks/error-handler.sh-279-            error: $error,
/Users/imorgado/.claude/hooks/error-handler.sh-280-            hasKnownFix: false
/Users/imorgado/.claude/hooks/error-handler.sh-281-        }'
/Users/imorgado/.claude/hooks/error-handler.sh-282-}
--
/Users/imorgado/.claude/hooks/learning-engine.sh-362-
/Users/imorgado/.claude/hooks/learning-engine.sh-363-    local error_score
/Users/imorgado/.claude/hooks/learning-engine.sh-364-    error_score=$(( 100 - errors_encountered * 20 ))
/Users/imorgado/.claude/hooks/learning-engine.sh-365-    [[ $error_score -lt 0 ]] && error_score=0
/Users/imorgado/.claude/hooks/learning-engine.sh-366-
/Users/imorgado/.claude/hooks/learning-engine.sh:367:    local retry_score
/Users/imorgado/.claude/hooks/learning-engine.sh:368:    retry_score=$(( 100 - retries * 15 ))
/Users/imorgado/.claude/hooks/learning-engine.sh:369:    [[ $retry_score -lt 0 ]] && retry_score=0
/Users/imorgado/.claude/hooks/learning-engine.sh-370-
/Users/imorgado/.claude/hooks/learning-engine.sh-371-    # Weighted average
/Users/imorgado/.claude/hooks/learning-engine.sh-372-    local quality_score
/Users/imorgado/.claude/hooks/learning-engine.sh:373:    quality_score=$(( (speed_score * 30 + error_score * 40 + retry_score * 30) / 100 ))
/Users/imorgado/.claude/hooks/learning-engine.sh-374-
/Users/imorgado/.claude/hooks/learning-engine.sh:375:    echo "{\"qualityScore\":$quality_score,\"speedScore\":$speed_score,\"errorScore\":$error_score,\"retryScore\":$retry_score}"
/Users/imorgado/.claude/hooks/learning-engine.sh-376-    log "Quality score for $task_type: $quality_score/100"
/Users/imorgado/.claude/hooks/learning-engine.sh-377-}
/Users/imorgado/.claude/hooks/learning-engine.sh-378-
/Users/imorgado/.claude/hooks/learning-engine.sh-379-# =============================================================================
/Users/imorgado/.claude/hooks/learning-engine.sh-380-# LEARNING ANALYTICS
--
/Users/imorgado/.claude/hooks/plan-execute.sh-342-       --arg ts "$timestamp" \
/Users/imorgado/.claude/hooks/plan-execute.sh-343-       '
/Users/imorgado/.claude/hooks/plan-execute.sh-344-       .replanning.count += 1 |
/Users/imorgado/.claude/hooks/plan-execute.sh-345-       .replanning.reasons += [{reason: $reason, timestamp: $ts}] |
/Users/imorgado/.claude/hooks/plan-execute.sh-346-       .status = "replanning" |
/Users/imorgado/.claude/hooks/plan-execute.sh:347:       # Reset failed steps to pending for retry
/Users/imorgado/.claude/hooks/plan-execute.sh-348-       .steps = [.steps[] |
/Users/imorgado/.claude/hooks/plan-execute.sh-349-           if .status == "failed" then
/Users/imorgado/.claude/hooks/plan-execute.sh:350:               . + {status: "pending", retryCount: ((.retryCount // 0) + 1)}
/Users/imorgado/.claude/hooks/plan-execute.sh-351-           else . end
/Users/imorgado/.claude/hooks/plan-execute.sh-352-       ] |
/Users/imorgado/.claude/hooks/plan-execute.sh-353-       .failedSteps = []
/Users/imorgado/.claude/hooks/plan-execute.sh-354-       ' "$CURRENT_PLAN" > "$temp_file"
/Users/imorgado/.claude/hooks/plan-execute.sh-355-
--
/Users/imorgado/.claude/hooks/agent-loop.sh-461-
/Users/imorgado/.claude/hooks/agent-loop.sh-462-    local goal
/Users/imorgado/.claude/hooks/agent-loop.sh-463-    goal=$(jq -r '.goal' "$AGENT_STATE" 2>/dev/null || echo "")
/Users/imorgado/.claude/hooks/agent-loop.sh-464-
/Users/imorgado/.claude/hooks/agent-loop.sh-465-    # ============================================================================
/Users/imorgado/.claude/hooks/agent-loop.sh:466:    # ERROR HANDLER INTEGRATION: Classify error and get retry strategy
/Users/imorgado/.claude/hooks/agent-loop.sh-467-    # ============================================================================
/Users/imorgado/.claude/hooks/agent-loop.sh-468-    local ERROR_HANDLER="${HOME}/.claude/hooks/error-handler.sh"
/Users/imorgado/.claude/hooks/agent-loop.sh-469-    local error_classification="UNKNOWN"
/Users/imorgado/.claude/hooks/agent-loop.sh:470:    local should_retry="false"
/Users/imorgado/.claude/hooks/agent-loop.sh:471:    local backoff_ms=1000
/Users/imorgado/.claude/hooks/agent-loop.sh-472-    local attempt
/Users/imorgado/.claude/hooks/agent-loop.sh-473-    attempt=$(jq -r '.consecutiveFailures // 0' "$AGENT_STATE" 2>/dev/null || echo "0")
/Users/imorgado/.claude/hooks/agent-loop.sh-474-
/Users/imorgado/.claude/hooks/agent-loop.sh-475-    if [[ -x "$ERROR_HANDLER" ]]; then
/Users/imorgado/.claude/hooks/agent-loop.sh-476-        log "Analyzing error with error-handler..."
/Users/imorgado/.claude/hooks/agent-loop.sh-477-        local handler_response
/Users/imorgado/.claude/hooks/agent-loop.sh-478-        handler_response=$("$ERROR_HANDLER" handle "$error" "$attempt" 3 "agent-loop:$goal" 2>/dev/null || echo '{}')
/Users/imorgado/.claude/hooks/agent-loop.sh-479-
/Users/imorgado/.claude/hooks/agent-loop.sh-480-        error_classification=$(echo "$handler_response" | jq -r '.classification // "UNKNOWN"')
/Users/imorgado/.claude/hooks/agent-loop.sh:481:        should_retry=$(echo "$handler_response" | jq -r '.shouldRetry // false')
/Users/imorgado/.claude/hooks/agent-loop.sh:482:        backoff_ms=$(echo "$handler_response" | jq -r '.backoffMs // 1000')
/Users/imorgado/.claude/hooks/agent-loop.sh-483-
/Users/imorgado/.claude/hooks/agent-loop.sh:484:        log "Error classified as: $error_classification (retry: $should_retry, backoff: ${backoff_ms}ms)"
/Users/imorgado/.claude/hooks/agent-loop.sh-485-    fi
/Users/imorgado/.claude/hooks/agent-loop.sh-486-    # ============================================================================
/Users/imorgado/.claude/hooks/agent-loop.sh-487-
/Users/imorgado/.claude/hooks/agent-loop.sh-488-    jq --arg error "$error" \
/Users/imorgado/.claude/hooks/agent-loop.sh-489-       --arg ts "$timestamp" \
/Users/imorgado/.claude/hooks/agent-loop.sh-490-       --arg classification "$error_classification" \
/Users/imorgado/.claude/hooks/agent-loop.sh:491:       --arg retry "$should_retry" \
/Users/imorgado/.claude/hooks/agent-loop.sh:492:       --argjson backoff "$backoff_ms" \
/Users/imorgado/.claude/hooks/agent-loop.sh-493-       '
/Users/imorgado/.claude/hooks/agent-loop.sh-494-       .consecutiveFailures += 1 |
/Users/imorgado/.claude/hooks/agent-loop.sh-495-       .lastError = {
/Users/imorgado/.claude/hooks/agent-loop.sh-496-           message: $error,
/Users/imorgado/.claude/hooks/agent-loop.sh-497-           timestamp: $ts,
/Users/imorgado/.claude/hooks/agent-loop.sh-498-           iteration: .iteration,
/Users/imorgado/.claude/hooks/agent-loop.sh-499-           classification: $classification,
/Users/imorgado/.claude/hooks/agent-loop.sh:500:           shouldRetry: ($retry == "true"),
/Users/imorgado/.claude/hooks/agent-loop.sh:501:           backoffMs: $backoff
/Users/imorgado/.claude/hooks/agent-loop.sh-502-       }
/Users/imorgado/.claude/hooks/agent-loop.sh-503-       ' "$AGENT_STATE" > "$temp_file"
/Users/imorgado/.claude/hooks/agent-loop.sh-504-
/Users/imorgado/.claude/hooks/agent-loop.sh-505-    mv "$temp_file" "$AGENT_STATE"
/Users/imorgado/.claude/hooks/agent-loop.sh-506-
--
/Users/imorgado/.claude/hooks/lock-manager.sh-83-    log "Acquired lock: $lock_name (owner: $owner, pid: $$)"
/Users/imorgado/.claude/hooks/lock-manager.sh-84-    echo "acquired:$owner:$$"
/Users/imorgado/.claude/hooks/lock-manager.sh-85-    return 0
/Users/imorgado/.claude/hooks/lock-manager.sh-86-}
/Users/imorgado/.claude/hooks/lock-manager.sh-87-
/Users/imorgado/.claude/hooks/lock-manager.sh:88:# Acquire lock with retry (blocking)
/Users/imorgado/.claude/hooks/lock-manager.sh-89-acquire() {
/Users/imorgado/.claude/hooks/lock-manager.sh-90-    local lock_name="$1"
/Users/imorgado/.claude/hooks/lock-manager.sh-91-    local owner="${2:-$$}"
/Users/imorgado/.claude/hooks/lock-manager.sh-92-    local max_wait="${3:-300}"  # Max 5 minutes wait
/Users/imorgado/.claude/hooks/lock-manager.sh:93:    local retry_interval="${4:-2}"
/Users/imorgado/.claude/hooks/lock-manager.sh-94-
/Users/imorgado/.claude/hooks/lock-manager.sh-95-    local elapsed=0
/Users/imorgado/.claude/hooks/lock-manager.sh-96-
/Users/imorgado/.claude/hooks/lock-manager.sh-97-    while [[ $elapsed -lt $max_wait ]]; do
/Users/imorgado/.claude/hooks/lock-manager.sh-98-        if try_acquire "$lock_name" "$owner"; then
/Users/imorgado/.claude/hooks/lock-manager.sh-99-            return 0
/Users/imorgado/.claude/hooks/lock-manager.sh-100-        fi
/Users/imorgado/.claude/hooks/lock-manager.sh-101-
/Users/imorgado/.claude/hooks/lock-manager.sh:102:        sleep "$retry_interval"
/Users/imorgado/.claude/hooks/lock-manager.sh:103:        elapsed=$((elapsed + retry_interval))
/Users/imorgado/.claude/hooks/lock-manager.sh-104-        log "Waiting for lock $lock_name (${elapsed}s/${max_wait}s)"
/Users/imorgado/.claude/hooks/lock-manager.sh-105-    done
/Users/imorgado/.claude/hooks/lock-manager.sh-106-
/Users/imorgado/.claude/hooks/lock-manager.sh-107-    log "Failed to acquire lock $lock_name after ${max_wait}s"
/Users/imorgado/.claude/hooks/lock-manager.sh-108-    return 1
--
/Users/imorgado/.claude/hooks/lock-manager.sh-316-        echo ""
/Users/imorgado/.claude/hooks/lock-manager.sh-317-        echo "Usage: $0 <command> [args]"
/Users/imorgado/.claude/hooks/lock-manager.sh-318-        echo ""
/Users/imorgado/.claude/hooks/lock-manager.sh-319-        echo "Commands:"
/Users/imorgado/.claude/hooks/lock-manager.sh-320-        echo "  try <name> [owner] [timeout]      - Try to acquire lock (non-blocking)"
/Users/imorgado/.claude/hooks/lock-manager.sh:321:        echo "  acquire <name> [owner] [max_wait] [interval] - Acquire with retry"
/Users/imorgado/.claude/hooks/lock-manager.sh-322-        echo "  release <name> [owner]            - Release a lock"
/Users/imorgado/.claude/hooks/lock-manager.sh-323-        echo "  force-release <name>              - Force release (admin)"
/Users/imorgado/.claude/hooks/lock-manager.sh-324-        echo "  check <name>                      - Check if lock is held"
/Users/imorgado/.claude/hooks/lock-manager.sh-325-        echo "  info <name>                       - Get lock details"
/Users/imorgado/.claude/hooks/lock-manager.sh-326-        echo "  list                              - List all locks"
--
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-183-
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-184-### Autonomous Behaviors (Always Active)
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-185-- **Auto-checkpoint**: Run `/checkpoint` after completing any major feature or section
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-186-- **Auto-document**: Run `/document` after features pass quality gates
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-187-- **Auto-collect**: If you need research, gather it and continue
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh:188:- **Auto-fix**: If tests/build fails, fix and retry (up to 3 times)
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-189-- **Auto-memory**: Record patterns and reflections as you work
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-190-
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-191-### Error Handling
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-192-- If blocked, try alternative approaches before stopping
/Users/imorgado/.claude/hooks/autonomous-orchestrator.sh-193-- Record all fixes to debug-log.md
--
/Users/imorgado/.claude/hooks/task-queue.sh-167-    temp_file=$(mktemp)
/Users/imorgado/.claude/hooks/task-queue.sh-168-
/Users/imorgado/.claude/hooks/task-queue.sh-169-    local timestamp
/Users/imorgado/.claude/hooks/task-queue.sh-170-    timestamp=$(date -u +%Y-%m-%dT%H:%M:%SZ)
/Users/imorgado/.claude/hooks/task-queue.sh-171-
/Users/imorgado/.claude/hooks/task-queue.sh:172:    # Check attempts and either retry or move to failed
/Users/imorgado/.claude/hooks/task-queue.sh-173-    local attempts
/Users/imorgado/.claude/hooks/task-queue.sh-174-    attempts=$(jq -r --arg id "$task_id" '.tasks[] | select(.id == $id) | .attempts' "$QUEUE_FILE")
/Users/imorgado/.claude/hooks/task-queue.sh-175-    attempts=$((attempts + 0))
/Users/imorgado/.claude/hooks/task-queue.sh-176-
/Users/imorgado/.claude/hooks/task-queue.sh-177-    if [[ $attempts -lt $max_retries ]]; then
/Users/imorgado/.claude/hooks/task-queue.sh:178:        # Reset to pending for retry
/Users/imorgado/.claude/hooks/task-queue.sh-179-        jq --arg id "$task_id" \
/Users/imorgado/.claude/hooks/task-queue.sh-180-           --arg ts "$timestamp" \
/Users/imorgado/.claude/hooks/task-queue.sh-181-           --arg err "$error" \
/Users/imorgado/.claude/hooks/task-queue.sh-182-           '.tasks = [.tasks[] | if .id == $id then
/Users/imorgado/.claude/hooks/task-queue.sh-183-               .status = "pending" | .lastError = $err | .lastFailedAt = $ts
/Users/imorgado/.claude/hooks/task-queue.sh-184-           else . end]' "$QUEUE_FILE" > "$temp_file"
/Users/imorgado/.claude/hooks/task-queue.sh-185-
/Users/imorgado/.claude/hooks/task-queue.sh:186:        log "Task $task_id failed (attempt $attempts/$max_retries), will retry"
/Users/imorgado/.claude/hooks/task-queue.sh-187-    else
/Users/imorgado/.claude/hooks/task-queue.sh-188-        # Move to failed array
/Users/imorgado/.claude/hooks/task-queue.sh-189-        jq --arg id "$task_id" \
/Users/imorgado/.claude/hooks/task-queue.sh-190-           --arg ts "$timestamp" \
/Users/imorgado/.claude/hooks/task-queue.sh-191-           --arg err "$error" \
--
/Users/imorgado/.claude/hooks/retry-command.sh-1-#!/bin/bash
/Users/imorgado/.claude/hooks/retry-command.sh:2:# Retry Command with Backoff - Wraps any command with smart retry logic
/Users/imorgado/.claude/hooks/retry-command.sh:3:# Usage: retry-command.sh [max_retries] [command...]
/Users/imorgado/.claude/hooks/retry-command.sh:4:# Example: retry-command.sh 3 npm test
/Users/imorgado/.claude/hooks/retry-command.sh-5-
/Users/imorgado/.claude/hooks/retry-command.sh-6-set -uo pipefail
/Users/imorgado/.claude/hooks/retry-command.sh-7-
/Users/imorgado/.claude/hooks/retry-command.sh-8-SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
/Users/imorgado/.claude/hooks/retry-command.sh-9-ERROR_HANDLER="$SCRIPT_DIR/error-handler.sh"
/Users/imorgado/.claude/hooks/retry-command.sh:10:LOG_FILE="${HOME}/.claude/retry-command.log"
/Users/imorgado/.claude/hooks/retry-command.sh-11-
/Users/imorgado/.claude/hooks/retry-command.sh-12-log() {
/Users/imorgado/.claude/hooks/retry-command.sh-13-    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" >> "$LOG_FILE"
/Users/imorgado/.claude/hooks/retry-command.sh-14-}
/Users/imorgado/.claude/hooks/retry-command.sh-15-
--
/Users/imorgado/.claude/hooks/retry-command.sh-17-MAX_RETRIES="${1:-3}"
/Users/imorgado/.claude/hooks/retry-command.sh-18-shift
/Users/imorgado/.claude/hooks/retry-command.sh-19-COMMAND=("$@")
/Users/imorgado/.claude/hooks/retry-command.sh-20-
/Users/imorgado/.claude/hooks/retry-command.sh-21-if [[ ${#COMMAND[@]} -eq 0 ]]; then
/Users/imorgado/.claude/hooks/retry-command.sh:22:    echo "Usage: retry-command.sh [max_retries] [command...]"
/Users/imorgado/.claude/hooks/retry-command.sh-23-    exit 1
/Users/imorgado/.claude/hooks/retry-command.sh-24-fi
/Users/imorgado/.claude/hooks/retry-command.sh-25-
/Users/imorgado/.claude/hooks/retry-command.sh-26-ATTEMPT=0
/Users/imorgado/.claude/hooks/retry-command.sh-27-LAST_ERROR=""
--
/Users/imorgado/.claude/hooks/retry-command.sh-42-    fi
/Users/imorgado/.claude/hooks/retry-command.sh-43-
/Users/imorgado/.claude/hooks/retry-command.sh-44-    LAST_ERROR="$OUTPUT"
/Users/imorgado/.claude/hooks/retry-command.sh-45-    log "Failed with exit code $EXIT_CODE"
/Users/imorgado/.claude/hooks/retry-command.sh-46-
/Users/imorgado/.claude/hooks/retry-command.sh:47:    # Use error handler to classify and determine retry
/Users/imorgado/.claude/hooks/retry-command.sh-48-    if [[ -x "$ERROR_HANDLER" ]]; then
/Users/imorgado/.claude/hooks/retry-command.sh-49-        HANDLER_OUTPUT=$("$ERROR_HANDLER" "$LAST_ERROR" "$ATTEMPT" "$MAX_RETRIES" "${COMMAND[*]}")
/Users/imorgado/.claude/hooks/retry-command.sh-50-
/Users/imorgado/.claude/hooks/retry-command.sh-51-        SHOULD_RETRY=$(echo "$HANDLER_OUTPUT" | jq -r '.shouldRetry')
/Users/imorgado/.claude/hooks/retry-command.sh:52:        BACKOFF_MS=$(echo "$HANDLER_OUTPUT" | jq -r '.backoffMs')
/Users/imorgado/.claude/hooks/retry-command.sh-53-        CLASSIFICATION=$(echo "$HANDLER_OUTPUT" | jq -r '.classification')
/Users/imorgado/.claude/hooks/retry-command.sh-54-
/Users/imorgado/.claude/hooks/retry-command.sh-55-        log "Classification: $CLASSIFICATION, Retry: $SHOULD_RETRY, Backoff: ${BACKOFF_MS}ms"
/Users/imorgado/.claude/hooks/retry-command.sh-56-
/Users/imorgado/.claude/hooks/retry-command.sh-57-        if [[ "$SHOULD_RETRY" != "true" ]]; then
/Users/imorgado/.claude/hooks/retry-command.sh:58:            echo "Error not retryable ($CLASSIFICATION):"
/Users/imorgado/.claude/hooks/retry-command.sh-59-            echo "$LAST_ERROR"
/Users/imorgado/.claude/hooks/retry-command.sh-60-            exit $EXIT_CODE
/Users/imorgado/.claude/hooks/retry-command.sh-61-        fi
/Users/imorgado/.claude/hooks/retry-command.sh-62-
/Users/imorgado/.claude/hooks/retry-command.sh:63:        # Wait with backoff
/Users/imorgado/.claude/hooks/retry-command.sh-64-        BACKOFF_SEC=$((BACKOFF_MS / 1000))
/Users/imorgado/.claude/hooks/retry-command.sh-65-        if [[ $BACKOFF_SEC -gt 0 ]]; then
/Users/imorgado/.claude/hooks/retry-command.sh:66:            log "Waiting ${BACKOFF_SEC}s before retry..."
/Users/imorgado/.claude/hooks/retry-command.sh-67-            sleep $BACKOFF_SEC
/Users/imorgado/.claude/hooks/retry-command.sh-68-        fi
/Users/imorgado/.claude/hooks/retry-command.sh-69-    else
/Users/imorgado/.claude/hooks/retry-command.sh:70:        # Fallback: simple retry with fixed delay
/Users/imorgado/.claude/hooks/retry-command.sh-71-        sleep $((2 ** ATTEMPT))
/Users/imorgado/.claude/hooks/retry-command.sh-72-    fi
/Users/imorgado/.claude/hooks/retry-command.sh-73-
/Users/imorgado/.claude/hooks/retry-command.sh-74-    ATTEMPT=$((ATTEMPT + 1))
/Users/imorgado/.claude/hooks/retry-command.sh-75-done