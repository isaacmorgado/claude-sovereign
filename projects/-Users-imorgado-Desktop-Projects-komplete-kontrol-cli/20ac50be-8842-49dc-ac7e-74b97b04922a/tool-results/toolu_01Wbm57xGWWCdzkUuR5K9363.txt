2891:`).map((J)=>J.trim()).filter((J)=>/^\S+\.\w+$/.test(J));if(Y.length<5)return[];return Y}catch(A){return s(A),[]}}var Jo5=604800000,Ol2,Ml2;var uq0=w(()=>{IQ();h3();G2();WY();V6();f1();X9();O$A();hI();Ol2=W0(()=>{let A=JG(),Q=A.exampleFiles?.length?ch(A.exampleFiles):"<filepath>",B=["fix lint errors","fix typecheck errors",`how does ${Q} work?`,`refactor ${Q}`,"how do I log an error?",`edit ${Q} to...`,`write a test for ${Q}`,"create a util logging.py that..."];return`Try "${ch(B)}"`}),Ml2=W0(async()=>{let A=JG(),Q=Date.now(),B=A.exampleFilesGeneratedAt??0;if(Q-B>Jo5)A.exampleFiles=[];if(!A.exampleFiles?.length)Yo5().then((G)=>{if(G.length)tG((Z)=>({...Z,exampleFiles:G,exampleFilesGeneratedAt:Date.now()}))})})});function _l2({input:A,submitCount:Q}){let[{queuedCommands:B,promptSuggestionEnabled:G}]=e0();return Rl2.useMemo(()=>{if(A!=="")return;if(B.length>0&&(R1().queuedCommandUpHintCount||0)<Xo5)return"Press up to edit queued messages";if(Q<1&&G)return Ol2()},[A,B,Q,G])}var Rl2,Xo5=3;var jl2=w(()=>{uB();IQ();uq0();Rl2=c(JA(),1)});function Wo5(){return}function Do5({isLoading:A,agentName:Q,themeColor:B}){let G=B,Z=!1,Y=G??void 0,J=Q?`[${Q}]`:"";return Ax.createElement($,{color:Y,dimColor:A},J,tA.pointer," ")}function mq0({mode:A,isLoading:Q,hideAgentPrefix:B}){let G=Wo5(),Z=void 0;return Ax.createElement(T,{alignItems:"flex-start",alignSelf:"flex-start",flexWrap:"nowrap",justifyContent:"flex-start"},A==="bash"?Ax.createElement($,{color:"bashBorder",dimColor:Q},"! "):A==="background"?Ax.createElement($,{color:"background",dimColor:Q},"& "):Ax.createElement(Do5,{isLoading:Q,agentName:void 0,...{}}))}var Ax,Io5=null;var Tl2=w(()=>{I2();kA();YS();Ax=c(JA(),1)});function Sl2({isFirst:A,children:Q}){let B=qf.useMemo(()=>({isQueued:!0,isFirst:A,paddingWidth:Vo5}),[A]);return qf.createElement(Ko5.Provider,{value:B},qf.createElement(T,{paddingX:Pl2},Q))}var qf,Ko5,Pl2=2,Vo5;var xl2=w(()=>{kA();qf=c(JA(),1),Ko5=qf.createContext(void 0),Vo5=Pl2*2});function yl2(){let[{queuedCommands:A}]=e0();if(A.length===0)return null;let Q=a7(A.map((B)=>C0({content:B.value,imagePasteIds:B.imagePasteIds})));return a6A.createElement(T,{marginTop:1,flexDirection:"column"},Q.map((B,G)=>a6A.createElement(Sl2,{key:G,isFirst:G===0},a6A.createElement(VO,{message:B,messages:[],addMargin:!1,tools:[],commands:[],verbose:!1,erroredToolUseIDs:dq0,inProgressToolUseIDs:dq0,resolvedToolUseIDs:dq0,progressMessagesForMessage:[],shouldAnimate:!1,shouldShowDot:!1,isTranscriptMode:!1,isStatic:!0}))))}var a6A,dq0;var vl2=w(()=>{uB();kA();A6A();eQ();xl2();a6A=c(JA(),1),dq0=new Set});function kl2({hasStash:A}){if(!A)return null;return ebA.createElement(T,{paddingLeft:2},ebA.createElement($,{dimColor:!0},tA.pointerSmall," Stashed (auto-restores after submit)"))}var ebA;var bl2=w(()=>{kA();I2();ebA=c(JA(),1)});var AfA;var QfA=w(()=>{AfA={serverNamePatterns:["figma"],screenshotTool:"get_screenshot",displayName:"Figma",inputPlaceholder:"Paste Figma link with node-id",exampleFormat:"https://figma.com/design/.../...?node-id=63-367"}});import{pathToFileURL as Fo5}from"url";function fl2({imageId:A,backgroundColor:Q,isSelected:B=!1}){let G=HI1(A),Z=`[Image #${A}]`;if(G&&Fk()){let Y=Fo5(G).href;return Nf.createElement(Q9,{url:Y,fallback:Nf.createElement($,{backgroundColor:Q,inverse:B},Z)},Nf.createElement($,{backgroundColor:Q,inverse:B,bold:B},Z))}return Nf.createElement($,{backgroundColor:Q,inverse:B},Z)}var Nf;var hl2=w(()=>{kA();OIA();CFA();LIA();Nf=c(JA(),1)});function gl2({pastedContents:A,linkedAttachments:Q=[],isSelected:B=!1,selectedIndex:G=0,showTip:Z=!1,terminalWidth:Y=80}){let J=Object.values(A).filter((z)=>z.type==="image"),X=Q.filter((z)=>z.type==="ticket"),I=Q.filter((z)=>z.type==="figma-mockup"),W=J.length>0,D=X.length>0,K=I.length>0,V=J.length+X.length+I.length;if(V===0)return null;let F=B?V>1?"(←/→ select · backspace remove · ↓ cancel)":"(backspace remove · ↓ cancel)":"(↑ to select)",H=null;if(Z){if(K&&!D)H="Tip: use /ticket to link a ticket";else if(D||W)H="Tip: use /mockup to attach a Figma mockup"}if(H){let z=J.length*12,C=X.length*11,O=I.length*9,L=z+C+O,M=F.length,_=H.length,j=2,P=2;if(L+M+2+_+2>Y)H=null}let E=0;return ZU.createElement(T,{flexDirection:"row",gap:1,paddingX:1,flexWrap:"wrap"},J.map((z)=>{let C=E++;return ZU.createElement(fl2,{key:z.id,imageId:z.id,isSelected:B&&C===G})}),X.map((z)=>{let C=E++,O=B&&C===G;return ZU.createElement($,{key:z.id,inverse:O,bold:O},"[Ticket ",z.ticketData?.ticketId,"]")}),I.map((z)=>{let C=E++,O=B&&C===G;return ZU.createElement($,{key:z.id,inverse:O,bold:O},"[Mockup]")}),ZU.createElement(T,{flexGrow:1,justifyContent:"space-between",flexDirection:"row"},ZU.createElement($,{dimColor:!0},F),H&&ZU.createElement($,{dimColor:!0,italic:!0},H)))}function pq0(A,Q){return Object.values(A).filter((G)=>G.type==="image").length+Q.length}function ul2(A,Q,B){let G=Object.values(A).filter((I)=>I.type==="image"),Z=Q.filter((I)=>I.type==="ticket"),Y=Q.filter((I)=>I.type==="figma-mockup");if(B<G.length)return{type:"image",id:G[B].id};let J=B-G.length;if(J<Z.length)return{type:"ticket",id:Z[J].id};let X=J-Z.length;if(X<Y.length)return{type:"mockup",id:Y[X].id};return null}var ZU;var cq0=w(()=>{kA();hl2();ZU=c(JA(),1)});function ml2(A,Q,B,G,Z,Y,J,X,I,W,D){let[K,V]=rY.useState(""),[F,H]=rY.useState(!1),[E,z]=rY.useState(""),[C,O]=rY.useState(0),[L,M]=rY.useState("prompt"),[_,j]=rY.useState({}),[P,y]=rY.useState(void 0),v=rY.useRef(void 0),m=rY.useRef(new Set),h=rY.useRef(null),e=rY.useCallback(()=>{if(v.current)v.current.return(void 0),v.current=void 0},[]),t=rY.useCallback(()=>{I(!1),V(""),H(!1),z(""),O(0),M("prompt"),j({}),y(void 0),e(),m.current.clear()},[I,e]),b=rY.useCallback(async(yA,FA)=>{if(!X)return;if(K.length===0){e(),m.current.clear(),y(void 0),H(!1),B(E),G(C),Y(L),W(_);return}if(!yA)e(),v.current=NQ0(),m.current.clear();if(!v.current)return;while(!0){if(FA?.aborted)return;let GA=await v.current.next();if(GA.done){H(!0);return}let AA=GA.value.display,EA=AA.lastIndexOf(K);if(EA!==-1&&!m.current.has(AA)){m.current.add(AA),y(GA.value),H(!1);let $A=au(AA);Y($A),B(AA),W(GA.value.pastedContents);let r=TBA(AA).lastIndexOf(K);G(r!==-1?r:EA);return}}},[X,K,e,B,G,Y,W,E,C,L,_]),l=rY.useCallback(()=>{y9("history-search"),I(!0),z(Q),O(Z),M(J),j(D),v.current=NQ0(),m.current.clear()},[I,Q,Z,J,D]),QA=rY.useCallback(()=>{b(!0)},[b]),WA=rY.useCallback(()=>{if(P){let yA=au(P.display),FA=TBA(P.display);B(FA),Y(yA),W(P.pastedContents)}else W(_);t()},[P,B,Y,W,_,t]),wA=rY.useCallback(()=>{B(E),G(C),W(_),t()},[B,G,W,E,C,_,t]),_A=rY.useCallback(()=>{if(K.length===0)A({display:E,pastedContents:_});else if(P){let yA=au(P.display),FA=TBA(P.display);Y(yA),A({display:FA,pastedContents:P.pastedContents})}t()},[K,P,A,Y,E,_,t]);A2("history:search",l,{context:"Global",isActive:!X});let hA=rY.useMemo(()=>({"historySearch:next":QA,"historySearch:accept":WA,"historySearch:cancel":wA,"historySearch:execute":_A}),[QA,WA,wA,_A]);lD(hA,{context:"HistorySearch",isActive:X}),Y0((yA,FA)=>{if(FA.backspace&&K==="")wA()},{isActive:X});let jA=rY.useRef(b);return jA.current=b,rY.useEffect(()=>{h.current?.abort();let yA=new AbortController;return h.current=yA,jA.current(!1,yA.signal),()=>{yA.abort()}},[K]),{historyQuery:K,setHistoryQuery:V,historyMatch:P,historyFailedMatch:F}}var rY;var dl2=w(()=>{kA();nu();QZ();_6();rY=c(JA(),1)});function cl2({inputValue:A,isAssistantResponding:Q}){let[B,G]=e0(),{text:Z,promptId:Y,shownAt:J,acceptedAt:X,generationRequestId:I}=B.promptSuggestion,W=Q||A.length>0?null:Z,D=Z&&J>0,K=BfA.useCallback(()=>{G((E)=>({...E,promptSuggestion:{text:null,promptId:null,shownAt:0,acceptedAt:0,generationRequestId:null}}))},[G]),V=BfA.useCallback(()=>{if(!D)return;G((E)=>({...E,promptSuggestion:{...E.promptSuggestion,acceptedAt:Date.now()}}))},[D,G]),F=BfA.useCallback(()=>{if(W&&J===0)G((E)=>({...E,promptSuggestion:{...E.promptSuggestion,shownAt:Date.now()}}))},[W,J,G]),H=BfA.useCallback((E)=>{if(!D)return;let z=X>J,C=z||E===Z,O=C?X||Date.now():Date.now();p("tengu_prompt_suggestion",{outcome:C?"accepted":"ignored",prompt_id:Y,...I&&{generationRequestId:I},...C&&{acceptMethod:z?"tab":"enter"},...C&&{timeToAcceptMs:O-J},...!C&&{timeToIgnoreMs:O-J},similarity:Math.round(E.length/(Z?.length||1)*100)/100,...!1}),K()},[D,X,J,Z,Y,I,K]);return{suggestion:W,markAccepted:V,markShown:F,logOutcomeAtSubmission:H}}var BfA,pl2="↵ send";var ll2=w(()=>{uB();Z0();BfA=c(JA(),1)});function iq0(A){return A.toLowerCase().includes("opus-4-5")||!1}function lq0(A){return Number.isInteger(A)}function il2(A){if(typeof A==="string"&&A!=="unset")return A;if(typeof A==="number"){if(A<=30)return"low";if(A<=60)return"medium";return"high"}return"medium"}function o6A(){let A=process.env.CLAUDE_CODE_EFFORT_LEVEL;if(A){if(A==="unset")return;let G=parseInt(A,10);if(!isNaN(G)&&lq0(G))return G;if(["low","medium","high"].includes(A))return A}let B=NQ().effortLevel;if(B==="unset")return;if(B!==void 0){if(typeof B==="number"&&lq0(B))return B;if(typeof B==="string"&&["low","medium","high"].includes(B))return B}return}var rHA=w(()=>{GB()});function sHA({initial:A,sessionModel:Q,onSelect:B,onCancel:G,isStandaloneCommand:Z}){let Y=A===null?nq0:A,J=10,X=_Q(),I=!1,[W,D]=Pp.useState(()=>Ho5()),[K,V]=Pp.useState(!1),[F,H]=Pp.useState(Y),E=Pp.useMemo(()=>HJA(),[]),z=Pp.useMemo(()=>{if(A!==null&&!E.some((y)=>y.value===A))return[...E,{value:A,label:vT(A),description:"Current model"}];return E},[E,A]),C=Pp.useMemo(()=>z.map((y)=>({...y,value:y.value===null?nq0:y.value})),[z]),O=Pp.useMemo(()=>C.some((y)=>y.value===Y)?Y:C[0]?.value??void 0,[C,Y]),L=Math.min(10,C.length),M=Math.max(0,C.length-L),_=C.find((y)=>y.value===F)?.label,j=!1;Y0((y,v)=>{return});function P(y){if(y===nq0){B(null,void 0);return}B(y,void 0)}return X8.createElement(T,{flexDirection:"column",width:"100%"},Z&&X8.createElement(B8,{dividerColor:"permission",dividerDimColor:!1}),X8.createElement(T,{flexDirection:"column",paddingX:Z?1:0},X8.createElement(T,{flexDirection:"column"},X8.createElement(T,{marginBottom:1,flexDirection:"column"},X8.createElement($,{color:"remember",bold:!0},"Select model"),X8.createElement($,{dimColor:!0},"Switch between Claude models. Applies to this session and future Claude Code sessions. For other/previous model names, specify with --model."),Q&&X8.createElement($,{dimColor:!0},"Currently using ",vT(Q)," for this session (set by plan mode). Selecting a model will undo this.")),X8.createElement(T,{flexDirection:"column",marginBottom:1},X8.createElement(T,{flexDirection:"column"},X8.createElement(x0,{defaultValue:Y,defaultFocusValue:O,options:C,onChange:P,onFocus:H,onCancel:G??(()=>{}),visibleOptionCount:L})),M>0&&X8.createElement(T,{paddingLeft:3},X8.createElement($,{dimColor:!0},"and ",M," more…"))),!1),Z&&X8.createElement($,{dimColor:!0,italic:!0},X.pending?X8.createElement(X8.Fragment,null,"Press ",X.keyName," again to exit"):X8.createElement(YB,null,X8.createElement(y0,{shortcut:"Enter",action:"confirm"}),X8.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"exit"})))))}function Ho5(){let A=o6A();if(A===void 0)return"high";return il2(A)}var X8,Pp,nq0="__NO_PREFERENCE__";var CV1=w(()=>{kA();m2();rHA();GB();b8();U9();gW();e4();Z5();T3();Z0();X8=c(JA(),1),Pp=c(JA(),1)});function nl2({currentValue:A,onSelect:Q,onCancel:B,isMidConversation:G}){let Z=_Q(),Y=[{value:"true",label:"Enabled",description:"Claude will think before responding"},{value:"false",label:"Disabled",description:"Claude will respond without extended thinking"}];return A2("confirm:no",()=>{B?.()},{context:"Confirmation"}),X7.createElement(T,{flexDirection:"column",width:"100%"},X7.createElement(B8,{dividerColor:"permission",dividerDimColor:!1}),X7.createElement(T,{flexDirection:"column",paddingX:1},X7.createElement(T,{flexDirection:"column"},X7.createElement(T,{marginBottom:1,flexDirection:"column"},X7.createElement($,{color:"remember",bold:!0},"Toggle thinking mode"),X7.createElement($,{dimColor:!0},"Enable or disable thinking for this session."),G&&X7.createElement($,{color:"warning"},"Changing mid-conversation may reduce quality. For best results, set this at the start of a session.")),X7.createElement(T,{flexDirection:"column",marginBottom:1},X7.createElement(x0,{defaultValue:A?"true":"false",defaultFocusValue:A?"true":"false",options:Y,onChange:(J)=>Q(J==="true"),onCancel:B??(()=>{}),visibleOptionCount:2}))),X7.createElement($,{dimColor:!0,italic:!0},Z.pending?X7.createElement(X7.Fragment,null,"Press ",Z.keyName," again to exit"):X7.createElement(YB,null,X7.createElement(y0,{shortcut:"Enter",action:"confirm"}),X7.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"exit"})))))}var X7;var al2=w(()=>{kA();b8();U9();gW();e4();Z5();T3();_6();X7=c(JA(),1)});import*as ol2 from"path";function Uo5({debug:A,ideSelection:Q,toolPermissionContext:B,setToolPermissionContext:G,apiKeyStatus:Z,commands:Y,agents:J,isLoading:X,verbose:I,messages:W,onAutoUpdaterResult:D,autoUpdaterResult:K,input:V,onInputChange:F,mode:H,onModeChange:E,stashedPrompt:z,setStashedPrompt:C,submitCount:O,onShowMessageSelector:L,mcpClients:M,pastedContents:_,setPastedContents:j,vimMode:P,setVimMode:y,showBashesDialog:v,setShowBashesDialog:m,showDiffDialog:h,setShowDiffDialog:e,tasksSelected:t,setTasksSelected:b,diffSelected:l,setDiffSelected:QA,onForegroundTask:WA,onExit:wA,getToolUseContext:_A,onSubmit:hA,isSearchingHistory:jA,setIsSearchingHistory:yA,helpOpen:FA,setHelpOpen:GA}){let AA=Js(),[EA,$A]=N4.useState(!1),[MA,r]=N4.useState({show:!1}),[VA,XA]=N4.useState(V.length),[IA,NA]=e0(),{historyQuery:RA,setHistoryQuery:gA,historyMatch:mA,historyFailedMatch:Z1}=ml2((S0)=>{j(S0.pastedContents),HZ(S0.display)},V,F,XA,VA,E,H,jA,yA,j,_),F1=N4.useRef(qo5(W)),[PA,eA]=N4.useState(!1),[s1,v1]=N4.useState(!1),[L0,TQ]=N4.useState(!1),[ZQ,$Q]=N4.useState(!1),[S1,WQ]=N4.useState(!1),[J1,$1]=N4.useState(!1),[x1,_0]=N4.useState(!1),[p0,l0]=N4.useState(0),CA=N4.useMemo(()=>{let S0=V.indexOf(`
4042:`});function KV9(){let{updateWizardData:A,goBack:Q,goToStep:B,wizardData:G}=lJ(),[Z,Y]=ID.useState(G.generationPrompt||""),[J,X]=ID.useState(!1),[I,W]=ID.useState(null),[D,K]=ID.useState(Z.length),V=Js(),F=ID.useRef(null);Y0((z,C)=>{if(C.escape){if(J&&F.current)F.current.abort(),F.current=null,X(!1),W("Generation cancelled");else if(!J)A({generationPrompt:"",agentType:"",systemPrompt:"",whenToUse:"",generatedAgent:void 0,wasGenerated:!1}),Y(""),W(null),Q()}});let H=async()=>{let z=Z.trim();if(!z){W("Please describe what the agent should do");return}W(null),X(!0),A({generationPrompt:z,isGenerating:!0});let C=l9();F.current=C;try{let O=await WV9(z,V,[],C.signal);A({agentType:O.identifier,whenToUse:O.whenToUse,systemPrompt:O.systemPrompt,generatedAgent:O,isGenerating:!1,wasGenerated:!0}),B(6)}catch(O){if(O instanceof Error&&!O.message.includes("No assistant message found"))W(O.message||"Failed to generate agent");A({isGenerating:!1})}finally{X(!1),F.current=null}},E="Describe what this agent should do and when it should be used (be comprehensive for best results)";if(J)return ID.default.createElement(DW,{subtitle:E,footerText:ID.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"cancel"})},ID.default.createElement(T,{marginTop:1,flexDirection:"row",alignItems:"center"},ID.default.createElement(_9,null),ID.default.createElement($,{color:"suggestion"}," Generating agent from description...")));return ID.default.createElement(DW,{subtitle:E,footerText:ID.default.createElement(YB,null,ID.default.createElement(DB,{action:"confirm:yes",context:"Confirmation",fallback:"Enter",description:"submit"}),ID.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},ID.default.createElement(T,{flexDirection:"column",marginTop:1},I&&ID.default.createElement(T,{marginBottom:1},ID.default.createElement($,{color:"error"},I)),ID.default.createElement(d4,{value:Z,onChange:Y,onSubmit:H,placeholder:"e.g., Help me write unit tests for my code...",columns:80,cursorOffset:D,onChangeCursorOffset:K,focus:!0,showCursor:!0})))}var ID;var VV9=w(()=>{kA();kA();KY();Cj();mO();xG();DV9();yvA();nZ();Z5();T3();ID=c(JA(),1)});function wT0(A){if(!A)return"Agent type is required";if(!/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/.test(A))return"Agent type must start and end with alphanumeric characters and contain only letters, numbers, and hyphens";if(A.length<3)return"Agent type must be at least 3 characters long";if(A.length>50)return"Agent type must be less than 50 characters";return null}function FV9(A,Q,B){let G=[],Z=[];if(!A.agentType)G.push("Agent type is required");else{let J=wT0(A.agentType);if(J)G.push(J);let X=B.find((I)=>I.agentType===A.agentType&&I.source!==A.source);if(X)G.push(`Agent type "${A.agentType}" already exists in ${kzA(X.source)}`)}if(!A.whenToUse)G.push("Description (description) is required");else if(A.whenToUse.length<10)Z.push("Description should be more descriptive (at least 10 characters)");else if(A.whenToUse.length>5000)Z.push("Description is very long (over 5000 characters)");if(A.tools!==void 0&&!Array.isArray(A.tools))G.push("Tools must be an array");else{if(A.tools===void 0)Z.push("Agent has access to all tools");else if(A.tools.length===0)Z.push("No tools selected - agent will have very limited capabilities");let J=Ts(A,Q,!1);if(J.invalidTools.length>0)G.push(`Invalid tools: ${J.invalidTools.join(", ")}`)}let Y=A.getSystemPrompt();if(!Y)G.push("System prompt is required");else if(Y.length<20)G.push("System prompt is too short (minimum 20 characters)");else if(Y.length>1e4)Z.push("System prompt is very long (over 10,000 characters)");return{isValid:G.length===0,errors:G,warnings:Z}}var LT0=w(()=>{$6A();az1()});function HV9(A){let{goNext:Q,goBack:B,updateWizardData:G,wizardData:Z}=lJ(),[Y,J]=LC.useState(Z.agentType||""),[X,I]=LC.useState(null),[W,D]=LC.useState(Y.length);return A2("confirm:no",B,{context:"Confirmation"}),LC.default.createElement(DW,{subtitle:"Agent type (identifier)",footerText:LC.default.createElement(YB,null,LC.default.createElement(y0,{shortcut:"Type",action:"enter text"}),LC.default.createElement(y0,{shortcut:"Enter",action:"continue"}),LC.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},LC.default.createElement(T,{flexDirection:"column",marginTop:1},LC.default.createElement($,null,"Enter a unique identifier for your agent:"),LC.default.createElement(T,{marginTop:1},LC.default.createElement(d4,{value:Y,onChange:J,onSubmit:(V)=>{let F=V.trim(),H=wT0(F);if(H){I(H);return}I(null),G({agentType:F}),Q()},placeholder:"e.g., test-runner, tech-lead, etc",columns:60,cursorOffset:W,onChangeCursorOffset:D,focus:!0,showCursor:!0})),X&&LC.default.createElement(T,{marginTop:1},LC.default.createElement($,{color:"error"},X))))}var LC;var EV9=w(()=>{kA();KY();Cj();mO();LT0();e4();Z5();T3();_6();LC=c(JA(),1)});function zV9(){let{goNext:A,goBack:Q,updateWizardData:B,wizardData:G}=lJ(),[Z,Y]=bE.useState(G.systemPrompt||""),[J,X]=bE.useState(Z.length),[I,W]=bE.useState(null);return A2("confirm:no",Q,{context:"Confirmation"}),bE.default.createElement(DW,{subtitle:"System prompt",footerText:bE.default.createElement(YB,null,bE.default.createElement(y0,{shortcut:"Type",action:"enter text"}),bE.default.createElement(y0,{shortcut:"Enter",action:"continue"}),bE.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},bE.default.createElement(T,{flexDirection:"column",marginTop:1},bE.default.createElement($,null,"Enter the system prompt for your agent:"),bE.default.createElement($,{dimColor:!0},"Be comprehensive for best results"),bE.default.createElement(T,{marginTop:1},bE.default.createElement(d4,{value:Z,onChange:Y,onSubmit:()=>{let K=Z.trim();if(!K){W("System prompt is required");return}W(null),B({systemPrompt:K}),A()},placeholder:"You are a helpful code reviewer who...",columns:80,cursorOffset:J,onChangeCursorOffset:X,focus:!0,showCursor:!0})),I&&bE.default.createElement(T,{marginTop:1},bE.default.createElement($,{color:"error"},I))))}var bE;var CV9=w(()=>{kA();KY();Cj();mO();e4();Z5();T3();_6();bE=c(JA(),1)});function $V9(){let{goNext:A,goBack:Q,updateWizardData:B,wizardData:G}=lJ(),[Z,Y]=OC.useState(G.whenToUse||""),[J,X]=OC.useState(Z.length),[I,W]=OC.useState(null);return A2("confirm:no",Q,{context:"Confirmation"}),OC.default.createElement(DW,{subtitle:"Description (tell Claude when to use this agent)",footerText:OC.default.createElement(YB,null,OC.default.createElement(y0,{shortcut:"Type",action:"enter text"}),OC.default.createElement(y0,{shortcut:"Enter",action:"continue"}),OC.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},OC.default.createElement(T,{flexDirection:"column",marginTop:1},OC.default.createElement($,null,"When should Claude use this agent?"),OC.default.createElement(T,{marginTop:1},OC.default.createElement(d4,{value:Z,onChange:Y,onSubmit:(K)=>{let V=K.trim();if(!V){W("Description is required");return}W(null),B({whenToUse:V}),A()},placeholder:"e.g., use this agent after you're done writing code...",columns:80,cursorOffset:J,onChangeCursorOffset:X,focus:!0,showCursor:!0})),I&&OC.default.createElement(T,{marginTop:1},OC.default.createElement($,{color:"error"},I))))}var OC;var UV9=w(()=>{kA();KY();Cj();mO();e4();Z5();T3();_6();OC=c(JA(),1)});function MH7(A){let Q=new Map;return A.forEach((B)=>{if(Vj(B)){let G=UF(B.name);if(G?.serverName){let Z=Q.get(G.serverName)||[];Z.push(B),Q.set(G.serverName,Z)}}}),Array.from(Q.entries()).map(([B,G])=>({serverName:B,tools:G})).sort((B,G)=>B.serverName.localeCompare(G.serverName))}function oz1({tools:A,initialTools:Q,onComplete:B,onCancel:G}){let Z=NK.useMemo(()=>aC0({tools:A,isBuiltIn:!1,isAsync:!1}),[A]),Y=!Q||Q.includes("*")?Z.map((v)=>v.name):Q,[J,X]=NK.useState(Y),[I,W]=NK.useState(0),[D,K]=NK.useState(!1),V=NK.useMemo(()=>{let v=new Set(Z.map((m)=>m.name));return J.filter((m)=>v.has(m))},[J,Z]),F=new Set(V),H=V.length===Z.length&&Z.length>0,E=(v)=>{if(!v)return;X((m)=>m.includes(v)?m.filter((h)=>h!==v):[...m,v])},z=(v,m)=>{X((h)=>{if(m){let e=v.filter((t)=>!h.includes(t));return[...h,...e]}else return h.filter((e)=>!v.includes(e))})},C=()=>{let v=Z.map((e)=>e.name),h=V.length===v.length&&v.every((e)=>V.includes(e))?void 0:V;B(h)},O=NK.useMemo(()=>{let v=qV9(),m={readOnly:[],edit:[],execution:[],mcp:[],other:[]};return Z.forEach((h)=>{if(Vj(h))m.mcp.push(h);else if(v.READ_ONLY.toolNames.has(h.name))m.readOnly.push(h);else if(v.EDIT.toolNames.has(h.name))m.edit.push(h);else if(v.EXECUTION.toolNames.has(h.name))m.execution.push(h);else if(h.name!==j3)m.other.push(h)}),m},[Z]),L=(v)=>{let h=v.filter((e)=>F.has(e.name)).length<v.length;return()=>{let e=v.map((t)=>t.name);z(e,h)}},M=[];M.push({id:"continue",label:"Continue",action:C,isContinue:!0}),M.push({id:"bucket-all",label:`${H?tA.checkboxOn:tA.checkboxOff} All tools`,action:()=>{let v=Z.map((m)=>m.name);z(v,!H)}});let _=qV9();[{id:"bucket-readonly",name:_.READ_ONLY.name,tools:O.readOnly},{id:"bucket-edit",name:_.EDIT.name,tools:O.edit},{id:"bucket-execution",name:_.EXECUTION.name,tools:O.execution},{id:"bucket-mcp",name:_.MCP.name,tools:O.mcp},{id:"bucket-other",name:_.OTHER.name,tools:O.other}].forEach(({id:v,name:m,tools:h})=>{if(h.length===0)return;let t=h.filter((b)=>F.has(b.name)).length===h.length;M.push({id:v,label:`${t?tA.checkboxOn:tA.checkboxOff} ${m}`,action:L(h)})});let P=M.length;M.push({id:"toggle-individual",label:D?"Hide advanced options":"Show advanced options",action:()=>{if(K(!D),D&&I>P)W(P)},isToggle:!0});let y=NK.useMemo(()=>MH7(Z),[Z]);if(D){if(y.length>0)M.push({id:"mcp-servers-header",label:"MCP Servers:",action:()=>{},isHeader:!0}),y.forEach(({serverName:v,tools:m})=>{let e=m.filter((t)=>F.has(t.name)).length===m.length;M.push({id:`mcp-server-${v}`,label:`${e?tA.checkboxOn:tA.checkboxOff} ${v} (${m.length} tool${m.length===1?"":"s"})`,action:()=>{let t=m.map((b)=>b.name);z(t,!e)}})}),M.push({id:"tools-header",label:"Individual Tools:",action:()=>{},isHeader:!0});Z.forEach((v)=>{let m=v.name;if(v.name.startsWith("mcp__")){let h=UF(v.name);m=h?`${h.toolName} (${h.serverName})`:v.name}M.push({id:`tool-${v.name}`,label:`${F.has(v.name)?tA.checkboxOn:tA.checkboxOff} ${m}`,action:()=>E(v.name)})})}return Y0((v,m)=>{if(m.return){let h=M[I];if(h&&!h.isHeader)h.action()}else if(m.escape)if(G)G();else B(Q);else if(m.upArrow){let h=I-1;while(h>0&&M[h]?.isHeader)h--;W(Math.max(0,h))}else if(m.downArrow){let h=I+1;while(h<M.length-1&&M[h]?.isHeader)h++;W(Math.min(M.length-1,h))}}),NK.default.createElement(T,{flexDirection:"column",marginTop:1},NK.default.createElement($,{color:I===0?"suggestion":void 0,bold:I===0},I===0?`${tA.pointer} `:"  ","[ Continue ]"),NK.default.createElement($,{dimColor:!0},"─".repeat(40)),M.slice(1).map((v,m)=>{let h=m+1===I,e=v.isToggle,t=v.isHeader;return NK.default.createElement(NK.default.Fragment,{key:v.id},e&&NK.default.createElement($,{dimColor:!0},"─".repeat(40)),t&&m>0&&NK.default.createElement(T,{marginTop:1}),NK.default.createElement($,{color:t?void 0:h?"suggestion":void 0,dimColor:t,bold:e&&h},t?"":h?`${tA.pointer} `:"  ",e?`[ ${v.label} ]`:v.label))}),NK.default.createElement(T,{marginTop:1,flexDirection:"column"},NK.default.createElement($,{dimColor:!0},H?"All tools selected":`${F.size} of ${Z.length} tools selected`)))}var NK,qV9=()=>({READ_ONLY:{name:"Read-only tools",toolNames:new Set([Ls.name,Bp.name,XC.name,M5.name,fF.name,TW.name,YD1.name,QD1.name,GD1.name,Ad.name,Qd.name])},EDIT:{name:"Edit tools",toolNames:new Set([QC.name,BC.name,Af.name])},EXECUTION:{name:"Execution tools",toolNames:new Set([Z9.name,void 0].filter(Boolean))},MCP:{name:"MCP tools",toolNames:new Set,isMcp:!0},OTHER:{name:"Other tools",toolNames:new Set}});var OT0=w(()=>{kA();kA();I2();MJ();zW1();EkA();gkA();F_();QHA();oXA();kC0();SC0();yC0();EG1();zG1();Ns();Qp();I6A();ZK();$6A();NK=c(JA(),1)});function NV9({tools:A}){let{goNext:Q,goBack:B,updateWizardData:G,wizardData:Z}=lJ(),Y=(X)=>{G({selectedTools:X}),Q()},J=Z.selectedTools;return s3A.default.createElement(DW,{subtitle:"Select tools",footerText:s3A.default.createElement(YB,null,s3A.default.createElement(y0,{shortcut:"Enter",action:"toggle selection"}),s3A.default.createElement(y0,{shortcut:"↑↓",action:"navigate"}),s3A.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},s3A.default.createElement(oz1,{tools:A,initialTools:J,onComplete:Y,onCancel:B}))}var s3A;var wV9=w(()=>{OT0();Cj();mO();e4();Z5();T3();s3A=c(JA(),1)});function rz1({initialModel:A,onComplete:Q,onCancel:B}){let G=$j.useMemo(()=>OsQ(),[]),Z=$j.useMemo(()=>{if(A&&G.some((Y)=>Y.value===A))return A;return"sonnet"},[A,G]);return $j.createElement(T,{flexDirection:"column"},$j.createElement(T,{marginBottom:1},$j.createElement($,{dimColor:!0},"Model determines the agent's reasoning capabilities and speed.")),$j.createElement(x0,{options:G,defaultValue:Z,onChange:(Y)=>{Q(Y)},onCancel:()=>B?B():Q(A)}))}var $j;var MT0=w(()=>{kA();Q8();m2();$j=c(JA(),1)});function LV9(){let{goNext:A,goBack:Q,updateWizardData:B,wizardData:G}=lJ(),Z=(Y)=>{B({selectedModel:Y}),A()};return t3A.default.createElement(DW,{subtitle:"Select model",footerText:t3A.default.createElement(YB,null,t3A.default.createElement(y0,{shortcut:"↑↓",action:"navigate"}),t3A.default.createElement(y0,{shortcut:"Enter",action:"select"}),t3A.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},t3A.default.createElement(rz1,{initialModel:G.selectedModel,onComplete:Z,onCancel:Q}))}var t3A;var OV9=w(()=>{MT0();Cj();mO();e4();Z5();T3();t3A=c(JA(),1)});function sz1({agentName:A,currentColor:Q="automatic",onConfirm:B}){let[G,Z]=_U.useState(Math.max(0,bzA.findIndex((J)=>J===Q)));Y0((J,X)=>{if(X.upArrow)Z((I)=>I>0?I-1:bzA.length-1);else if(X.downArrow)Z((I)=>I<bzA.length-1?I+1:0);else if(X.return){let I=bzA[G];B(I==="automatic"?void 0:I)}});let Y=bzA[G];return _U.default.createElement(T,{flexDirection:"column",gap:1},_U.default.createElement(T,{flexDirection:"column"},bzA.map((J,X)=>{let I=X===G;return _U.default.createElement(T,{key:J,flexDirection:"row",gap:1},_U.default.createElement($,{color:I?"suggestion":void 0},I?tA.pointer:" "),J==="automatic"?_U.default.createElement($,{bold:I},"Automatic color"):_U.default.createElement(T,{gap:1},_U.default.createElement($,{backgroundColor:zr[J],color:"inverseText"}," "),_U.default.createElement($,{bold:I},J.charAt(0).toUpperCase()+J.slice(1))))})),_U.default.createElement(T,{marginTop:1},_U.default.createElement($,null,"Preview: "),Y===void 0||Y==="automatic"?_U.default.createElement($,{inverse:!0,bold:!0}," ",A," "):_U.default.createElement($,{backgroundColor:zr[Y],color:"inverseText",bold:!0}," ",A," ")))}var _U,bzA;var RT0=w(()=>{kA();YS();I2();_U=c(JA(),1),bzA=["automatic",...Ub]});function MV9(){let{goNext:A,goBack:Q,updateWizardData:B,wizardData:G}=lJ();A2("confirm:no",Q,{context:"Confirmation"});let Z=(Y)=>{B({selectedColor:Y,finalAgent:{agentType:G.agentType,whenToUse:G.whenToUse,getSystemPrompt:()=>G.systemPrompt,tools:G.selectedTools,...G.selectedModel?{model:G.selectedModel}:{},...Y?{color:Y}:{},source:G.location}}),A()};return Ce.default.createElement(DW,{subtitle:"Choose background color",footerText:Ce.default.createElement(YB,null,Ce.default.createElement(y0,{shortcut:"↑↓",action:"navigate"}),Ce.default.createElement(y0,{shortcut:"Enter",action:"select"}),Ce.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"go back"}))},Ce.default.createElement(T,{marginTop:1},Ce.default.createElement(sz1,{agentName:G.agentType||"agent",currentColor:"automatic",onConfirm:Z})))}var Ce;var RV9=w(()=>{kA();RT0();Cj();mO();e4();Z5();T3();_6();Ce=c(JA(),1)});function _V9({tools:A,existingAgents:Q,onSave:B,onSaveAndEdit:G,error:Z}){let{goBack:Y,wizardData:J}=lJ();Y0((D,K)=>{if(K.escape)Y();else if(D==="s"||K.return)B();else if(D==="e")G()});let X=J.finalAgent,I=FV9(X,A,Q),W=(D)=>{if(D===void 0)return"All tools";if(D.length===0)return"None";if(D.length===1)return D[0]||"None";if(D.length===2)return D.join(" and ");return`${D.slice(0,-1).join(", ")}, and ${D[D.length-1]}`};return m8.default.createElement(DW,{subtitle:"Confirm and save",footerText:m8.default.createElement(YB,null,m8.default.createElement(y0,{shortcut:"s/Enter",action:"save"}),m8.default.createElement(y0,{shortcut:"e",action:"edit in your editor"}),m8.default.createElement(DB,{action:"confirm:no",context:"Confirmation",fallback:"Esc",description:"cancel"}))},m8.default.createElement(T,{flexDirection:"column",marginTop:1},m8.default.createElement($,null,m8.default.createElement($,{bold:!0},"Name"),": ",X.agentType),m8.default.createElement($,null,m8.default.createElement($,{bold:!0},"Location"),":"," ",tK9({source:J.location,agentType:X.agentType})),m8.default.createElement($,null,m8.default.createElement($,{bold:!0},"Tools"),": ",W(X.tools)),m8.default.createElement($,null,m8.default.createElement($,{bold:!0},"Model"),": ",YeA(X.model)),m8.default.createElement(T,{marginTop:1},m8.default.createElement($,null,m8.default.createElement($,{bold:!0},"Description")," (tells Claude when to use this agent):")),m8.default.createElement(T,{marginLeft:2,marginTop:1},m8.default.createElement($,null,X.whenToUse.length>240?X.whenToUse.slice(0,240)+"…":X.whenToUse)),m8.default.createElement(T,{marginTop:1},m8.default.createElement($,null,m8.default.createElement($,{bold:!0},"System prompt"),":")),m8.default.createElement(T,{marginLeft:2,marginTop:1},m8.default.createElement($,null,(()=>{let D=X.getSystemPrompt();return D.length>240?D.slice(0,240)+"…":D})())),I.warnings.length>0&&m8.default.createElement(T,{marginTop:1,flexDirection:"column"},m8.default.createElement($,{color:"warning"},"Warnings:"),I.warnings.map((D,K)=>m8.default.createElement($,{key:K,dimColor:!0}," ","• ",D))),I.errors.length>0&&m8.default.createElement(T,{marginTop:1,flexDirection:"column"},m8.default.createElement($,{color:"error"},"Errors:"),I.errors.map((D,K)=>m8.default.createElement($,{key:K,color:"error"}," ","• ",D))),Z&&m8.default.createElement(T,{marginTop:1},m8.default.createElement($,{color:"error"},Z)),m8.default.createElement(T,{marginTop:2},m8.default.createElement($,{color:"success"},"Press ",m8.default.createElement($,{bold:!0},"s")," or ",m8.default.createElement($,{bold:!0},"Enter")," to save,"," ",m8.default.createElement($,{bold:!0},"e")," to save and edit"))))}var m8;var jV9=w(()=>{kA();kA();Cj();mO();LT0();vzA();m2();e4();Z5();T3();m8=c(JA(),1)});function TV9({tools:A,existingAgents:Q,onComplete:B}){let{wizardData:G}=lJ(),[Z,Y]=e3A.useState(null),[,J]=e0(),X=e3A.useCallback(async()=>{if(!G?.finalAgent)return;try{await HT0(G.location,G.finalAgent.agentType,G.finalAgent.whenToUse,G.finalAgent.tools,G.finalAgent.getSystemPrompt(),!0,G.finalAgent.color,G.finalAgent.model),J((W)=>{if(!G.finalAgent)return W;let D=W.agentDefinitions.allAgents.concat(G.finalAgent);return{...W,agentDefinitions:{...W.agentDefinitions,activeAgents:Yf(D),allAgents:D}}}),p("tengu_agent_created",{agent_type:G.finalAgent.agentType,generation_method:G.wasGenerated?"generated":"manual",source:G.location,tool_count:G.finalAgent.tools?.length??"all",has_custom_model:!!G.finalAgent.model,has_custom_color:!!G.finalAgent.color}),B(`Created agent: ${W1.bold(G.finalAgent.agentType)}`)}catch(W){Y(W instanceof Error?W.message:"Failed to save agent")}},[G,B,J]),I=e3A.useCallback(async()=>{if(!G?.finalAgent)return;try{await HT0(G.location,G.finalAgent.agentType,G.finalAgent.whenToUse,G.finalAgent.tools,G.finalAgent.getSystemPrompt(),!0,G.finalAgent.color,G.finalAgent.model),J((D)=>{if(!G.finalAgent)return D;let K=D.agentDefinitions.allAgents.concat(G.finalAgent);return{...D,agentDefinitions:{...D.agentDefinitions,activeAgents:Yf(K),allAgents:K}}});let W=FT0({source:G.location,agentType:G.finalAgent.agentType});await ls(W),p("tengu_agent_created",{agent_type:G.finalAgent.agentType,generation_method:G.wasGenerated?"generated":"manual",source:G.location,tool_count:G.finalAgent.tools?.length??"all",has_custom_model:!!G.finalAgent.model,has_custom_color:!!G.finalAgent.color,opened_in_editor:!0}),B(`Created agent: ${W1.bold(G.finalAgent.agentType)} and opened in editor. If you made edits, restart to load the latest version.`)}catch(W){Y(W instanceof Error?W.message:"Failed to save agent")}},[G,B,J]);return e3A.default.createElement(_V9,{tools:A,existingAgents:Q,onSave:X,onSaveAndEdit:I,error:Z})}var e3A;var PV9=w(()=>{t6();mO();jV9();vzA();dS();is();Z0();uB();e3A=c(JA(),1)});function SV9({tools:A,existingAgents:Q,onComplete:B,onCancel:G}){return lgA.default.createElement(CT0,{steps:[YV9,XV9,KV9,()=>lgA.default.createElement(HV9,{existingAgents:Q}),zV9,$V9,()=>lgA.default.createElement(NV9,{tools:A}),LV9,MV9,()=>lgA.default.createElement(TV9,{tools:A,existingAgents:Q,onComplete:B})],initialData:{},onComplete:()=>{},onCancel:G,title:"Create new agent",showStepCounter:!1})}var lgA;var xV9=w(()=>{mO();JV9();IV9();VV9();EV9();CV9();UV9();wV9();OV9();RV9();PV9();lgA=c(JA(),1)});function yV9({agent:A,tools:Q,onSaved:B,onBack:G}){let[,Z]=e0(),[Y,J]=Uj.useState("menu"),[X,I]=Uj.useState(0),[W,D]=Uj.useState(null),[K,V]=Uj.useState(A.color),F=Uj.useCallback(async()=>{try{let L=nz1(A);await ls(L),B(`Opened ${A.agentType} in editor. If you made edits, restart to load the latest version.`)}catch(L){D(L instanceof Error?L.message:"Failed to open editor")}},[A,B]),H=Uj.useCallback(async(L={})=>{let{tools:M,color:_,model:j}=L,P=_??K,y=M!==void 0,v=j!==void 0,m=P!==A.color;if(!y&&!v&&!m)return!1;try{if(!Zh2(A)&&!HD1(A))return!1;if(await AV9(A,A.whenToUse,M??A.tools,A.getSystemPrompt(),P,j??A.model),m&&P)oKA(A.agentType,P);return Z((h)=>{let e=h.agentDefinitions.allAgents.map((t)=>t.agentType===A.agentType?{...t,tools:M??t.tools,color:P,model:j??t.model}:t);return{...h,agentDefinitions:{...h.agentDefinitions,activeAgents:Yf(e),allAgents:e}}}),B(`Updated agent: ${W1.bold(A.agentType)}`),!0}catch(h){return D(h instanceof Error?h.message:"Failed to save agent"),!1}},[A,K,B,Z]),E=Uj.useMemo(()=>[{label:"Open in editor",action:F},{label:"Edit tools",action:()=>J("edit-tools")},{label:"Edit model",action:()=>J("edit-model")},{label:"Edit color",action:()=>J("edit-color")}],[F]),z=Uj.useCallback(()=>{if(D(null),Y==="menu")G();else J("menu")},[Y,G]),C=Uj.useCallback((L)=>{if(L.upArrow)I((M)=>Math.max(0,M-1));else if(L.downArrow)I((M)=>Math.min(E.length-1,M+1));else if(L.return){let M=E[X];if(M)M.action()}},[E,X]);Y0((L,M)=>{if(M.escape){z();return}if(Y==="menu")C(M)});let O=()=>$V.createElement(T,{flexDirection:"column"},$V.createElement($,{dimColor:!0},"Source: ",kzA(A.source)),$V.createElement(T,{marginTop:1,flexDirection:"column"},E.map((L,M)=>$V.createElement($,{key:L.label,color:M===X?"suggestion":void 0},M===X?`${tA.pointer} `:"  ",L.label))),W&&$V.createElement(T,{marginTop:1},$V.createElement($,{color:"error"},W)));switch(Y){case"menu":return O();case"edit-tools":return $V.createElement(oz1,{tools:Q,initialTools:A.tools,onComplete:async(L)=>{J("menu"),await H({tools:L})}});case"edit-color":return $V.createElement(sz1,{agentName:A.agentType,currentColor:K||A.color||"automatic",onConfirm:async(L)=>{V(L),J("menu"),await H({color:L})}});case"edit-model":return $V.createElement(rz1,{initialModel:A.model,onComplete:async(L)=>{J("menu"),await H({model:L})}});default:return null}}var $V,Uj;var vV9=w(()=>{kA();t6();dS();OT0();RT0();MT0();vzA();is();YS();I2();az1();uB();$V=c(JA(),1),Uj=c(JA(),1)});function kV9({agent:A,tools:Q,onBack:B}){let G=Ts(A,Q,!1),Z=eK9(A),Y=aKA(A.agentType);Y0((X,I)=>{if(I.escape||I.return)B()});function J(){if(G.hasWildcard)return j9.createElement($,null,"All tools");if(!A.tools||A.tools.length===0)return j9.createElement($,null,"None");return j9.createElement(j9.Fragment,null,G.validTools.length>0&&j9.createElement($,null,G.validTools.join(", ")),G.invalidTools.length>0&&j9.createElement($,{color:"warning"},tA.warning," Unrecognized:"," ",G.invalidTools.join(", ")))}return j9.createElement(T,{flexDirection:"column",gap:1},j9.createElement($,{dimColor:!0},Z),j9.createElement(T,{flexDirection:"column"},j9.createElement($,null,j9.createElement($,{bold:!0},"Description")," (tells Claude when to use this agent):"),j9.createElement(T,{marginLeft:2},j9.createElement($,null,A.whenToUse))),j9.createElement(T,null,j9.createElement($,null,j9.createElement($,{bold:!0},"Tools"),":"," "),J()),j9.createElement($,null,j9.createElement($,{bold:!0},"Model"),": ",YeA(A.model)),Y&&j9.createElement(T,null,j9.createElement($,null,j9.createElement($,{bold:!0},"Color"),":"," ",j9.createElement($,{backgroundColor:Y,color:"inverseText"}," ",A.agentType," "))),!u_(A)&&j9.createElement(j9.Fragment,null,j9.createElement(T,null,j9.createElement($,null,j9.createElement($,{bold:!0},"System prompt"),":")),j9.createElement(T,{marginLeft:2,marginRight:2},j9.createElement(QV,null,A.getSystemPrompt()))))}var j9;var bV9=w(()=>{kA();I2();dS();$6A();Mb();vzA();YS();m2();j9=c(JA(),1)});function fzA({instructions:A="Press ↑↓ to navigate · Enter to select · Esc to go back"}){let Q=_Q();return igA.createElement(T,{marginLeft:3},igA.createElement($,{dimColor:!0},Q.pending?`Press ${Q.keyName} again to exit`:A))}var igA;var fV9=w(()=>{kA();U9();igA=c(JA(),1)});function hV9({tools:A,onExit:Q}){let[B,G]=$e.useState({mode:"list-agents",source:"all"}),[Z,Y]=e0(),{allAgents:J,activeAgents:X}=Z.agentDefinitions,[I,W]=$e.useState([]),D=RV1(A,Z.mcp.tools,Z.toolPermissionContext);_Q();let K=$e.useMemo(()=>({"built-in":J.filter((H)=>H.source==="built-in"),userSettings:J.filter((H)=>H.source==="userSettings"),projectSettings:J.filter((H)=>H.source==="projectSettings"),policySettings:J.filter((H)=>H.source==="policySettings"),localSettings:J.filter((H)=>H.source==="localSettings"),flagSettings:J.filter((H)=>H.source==="flagSettings"),plugin:J.filter((H)=>H.source==="plugin"),all:J}),[J]);Y0((H,E)=>{if(!E.escape)return;let z=I.length>0?`Agent changes: