`).some((B)=>B.indexOf("(https.js:")!==-1||B.indexOf("node:https:")!==-1)}createSocket(A,Q,B){let G={...Q,secureEndpoint:this.isSecureEndpoint(Q)};Promise.resolve().then(()=>this.connect(A,G)).then((Z)=>{if(Z instanceof NWQ.Agent)return Z.addRequest(A,G);this[iy].currentSocket=Z,super.createSocket(A,Q,B)},B)}createConnection(){let A=this[iy].currentSocket;if(this[iy].currentSocket=void 0,!A)throw Error("No socket was returned in the `connect()` function");return A}get defaultPort(){return qWQ(this[iy].defaultPort,()=>this.protocol==="https:"?443:80)}set defaultPort(A){if(this[iy])this[iy].defaultPort=A}get protocol(){return qWQ(this[iy].protocol,()=>this.isSecureEndpoint()?"https:":"http:")}set protocol(A){if(this[iy])this[iy].protocol=A}}LWQ.Agent=wWQ});var RWQ=U((MWQ)=>{Object.defineProperty(MWQ,"__esModule",{value:!0});var bj4=CQ();function KiA(...A){bj4.logger.log("[https-proxy-agent:parse-proxy-response]",...A)}function fj4(A){return new Promise((Q,B)=>{let G=0,Z=[];function Y(){let D=A.read();if(D)W(D);else A.once("readable",Y)}function J(){A.removeListener("end",X),A.removeListener("error",I),A.removeListener("readable",Y)}function X(){J(),KiA("onend"),B(Error("Proxy connection ended before receiving CONNECT response"))}function I(D){J(),KiA("onerror %o",D),B(D)}function W(D){Z.push(D),G+=D.length;let K=Buffer.concat(Z,G),V=K.indexOf(`\r
\r
`);if(V===-1){KiA("have not received end of HTTP headers yet..."),Y();return}let F=K.slice(0,V).toString("ascii").split(`\r
`),H=F.shift();if(!H)return A.destroy(),B(Error("No header received from proxy CONNECT response"));let E=H.split(" "),z=+E[1],C=E.slice(2).join(" "),O={};for(let L of F){if(!L)continue;let M=L.indexOf(":");if(M===-1)return A.destroy(),B(Error(`Invalid header from proxy CONNECT response: "${L}"`));let _=L.slice(0,M).toLowerCase(),j=L.slice(M+1).trimStart(),P=O[_];if(typeof P==="string")O[_]=[P,j];else if(Array.isArray(P))P.push(j);else O[_]=j}KiA("got proxy server response: %o %o",H,O),J(),Q({connect:{statusCode:z,statusText:C,headers:O},buffered:K})}A.on("error",I),A.on("end",X),Y()})}MWQ.parseProxyResponse=fj4});var PWQ=U((TWQ)=>{var{_nullishCoalesce:gj4,_optionalChain:uj4}=CQ();Object.defineProperty(TWQ,"__esModule",{value:!0});var AqA=qA("net"),_WQ=qA("tls"),mj4=qA("url"),dj4=CQ(),pj4=OWQ(),cj4=RWQ();function QqA(...A){dj4.logger.log("[https-proxy-agent]",...A)}class e_1 extends pj4.Agent{static __initStatic(){this.protocols=["http","https"]}constructor(A,Q){super(Q);this.options={},this.proxy=typeof A==="string"?new mj4.URL(A):A,this.proxyHeaders=gj4(uj4([Q,"optionalAccess",(Z)=>Z.headers]),()=>({})),QqA("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let B=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),G=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...Q?jWQ(Q,"headers"):null,host:B,port:G}}async connect(A,Q){let{proxy:B}=this;if(!Q.host)throw TypeError('No "host" provided');let G;if(B.protocol==="https:"){QqA("Creating `tls.Socket`: %o",this.connectOpts);let K=this.connectOpts.servername||this.connectOpts.host;G=_WQ.connect({...this.connectOpts,servername:K&&AqA.isIP(K)?void 0:K})}else QqA("Creating `net.Socket`: %o",this.connectOpts),G=AqA.connect(this.connectOpts);let Z=typeof this.proxyHeaders==="function"?this.proxyHeaders():{...this.proxyHeaders},Y=AqA.isIPv6(Q.host)?`[${Q.host}]`:Q.host,J=`CONNECT ${Y}:${Q.port} HTTP/1.1\r
`;if(B.username||B.password){let K=`${decodeURIComponent(B.username)}:${decodeURIComponent(B.password)}`;Z["Proxy-Authorization"]=`Basic ${Buffer.from(K).toString("base64")}`}if(Z.Host=`${Y}:${Q.port}`,!Z["Proxy-Connection"])Z["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close";for(let K of Object.keys(Z))J+=`${K}: ${Z[K]}\r
`;let X=cj4.parseProxyResponse(G);G.write(`${J}\r
`);let{connect:I,buffered:W}=await X;if(A.emit("proxyConnect",I),this.emit("proxyConnect",I,A),I.statusCode===200){if(A.once("socket",lj4),Q.secureEndpoint){QqA("Upgrading socket connection to TLS");let K=Q.servername||Q.host;return _WQ.connect({...jWQ(Q,"host","path","port"),socket:G,servername:AqA.isIP(K)?void 0:K})}return G}G.destroy();let D=new AqA.Socket({writable:!1});return D.readable=!0,A.once("socket",(K)=>{QqA("Replaying proxy buffer for failed request"),K.push(W),K.push(null)}),D}}e_1.__initStatic();function lj4(A){A.resume()}function jWQ(A,...Q){let B={},G;for(G in A)if(!Q.includes(G))B[G]=A[G];return B}TWQ.HttpsProxyAgent=e_1});var Qj1=U((yWQ)=>{var{_nullishCoalesce:Aj1}=CQ();Object.defineProperty(yWQ,"__esModule",{value:!0});var nj4=qA("http"),aj4=qA("https"),oj4=qA("stream"),xWQ=qA("url"),rj4=qA("zlib"),SWQ=F6(),sj4=CQ(),tj4=PWQ(),ej4=32768;function AT4(A){return new oj4.Readable({read(){this.push(A),this.push(null)}})}function QT4(A){let Q;try{Q=new xWQ.URL(A.url)}catch(I){return sj4.consoleSandbox(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),SWQ.createTransport(A,()=>Promise.resolve({}))}let B=Q.protocol==="https:",G=BT4(Q,A.proxy||(B?process.env.https_proxy:void 0)||process.env.http_proxy),Z=B?aj4:nj4,Y=A.keepAlive===void 0?!1:A.keepAlive,J=G?new tj4.HttpsProxyAgent(G):new Z.Agent({keepAlive:Y,maxSockets:30,timeout:2000}),X=GT4(A,Aj1(A.httpModule,()=>Z),J);return SWQ.createTransport(A,X)}function BT4(A,Q){let{no_proxy:B}=process.env;if(B&&B.split(",").some((Z)=>A.host.endsWith(Z)||A.hostname.endsWith(Z)))return;else return Q}function GT4(A,Q,B){let{hostname:G,pathname:Z,port:Y,protocol:J,search:X}=new xWQ.URL(A.url);return function(W){return new Promise((D,K)=>{let V=AT4(W.body),F={...A.headers};if(W.body.length>ej4)F["content-encoding"]="gzip",V=V.pipe(rj4.createGzip());let H=Q.request({method:"POST",agent:B,headers:F,hostname:G,path:`${Z}${X}`,port:Y,protocol:J,ca:A.caCerts},(E)=>{E.on("data",()=>{}),E.on("end",()=>{}),E.setEncoding("utf8");let z=Aj1(E.headers["retry-after"],()=>null),C=Aj1(E.headers["x-sentry-rate-limits"],()=>null);D({statusCode:E.statusCode,headers:{"retry-after":z,"x-sentry-rate-limits":Array.isArray(C)?C[0]:C}})});H.on("error",K),V.pipe(H)})}}yWQ.makeNodeTransport=QT4});var E1A=U((vWQ)=>{Object.defineProperty(vWQ,"__esModule",{value:!0});var YT4=CQ(),JT4=YT4.parseSemver(process.versions.node);vWQ.NODE_VERSION=JT4});var hWQ=U((fWQ)=>{var{_optionalChain:IT4}=CQ();Object.defineProperty(fWQ,"__esModule",{value:!0});var kWQ=qA("domain"),z1A=F6();function bWQ(){return kWQ.active}function WT4(){let A=bWQ();if(!A)return;return z1A.ensureHubOnCarrier(A),z1A.getHubFromCarrier(A)}function DT4(A){let Q={};return z1A.ensureHubOnCarrier(Q,A),z1A.getHubFromCarrier(Q)}function KT4(A,Q){let B=bWQ();if(B&&IT4([Q,"optionalAccess",(J)=>J.reuseExisting]))return A();let G=kWQ.create(),Z=B?z1A.getHubFromCarrier(B):void 0,Y=DT4(Z);return z1A.setHubOnCarrier(G,Y),G.bind(()=>{return A()})()}function VT4(){z1A.setAsyncContextStrategy({getCurrentHub:WT4,runWithAsyncContext:KT4})}fWQ.setDomainAsyncContextStrategy=VT4});var uWQ=U((gWQ)=>{var{_optionalChain:HT4}=CQ();Object.defineProperty(gWQ,"__esModule",{value:!0});var Bj1=F6(),ET4=qA("async_hooks"),ViA;function zT4(){if(!ViA)ViA=new ET4.AsyncLocalStorage;function A(){return ViA.getStore()}function Q(G){let Z={};return Bj1.ensureHubOnCarrier(Z,G),Bj1.getHubFromCarrier(Z)}function B(G,Z){let Y=A();if(Y&&HT4([Z,"optionalAccess",(X)=>X.reuseExisting]))return G();let J=Q(Y);return ViA.run(J,()=>{return G()})}Bj1.setAsyncContextStrategy({getCurrentHub:A,runWithAsyncContext:B})}gWQ.setHooksAsyncContextStrategy=zT4});var dWQ=U((mWQ)=>{Object.defineProperty(mWQ,"__esModule",{value:!0});var $T4=E1A(),UT4=hWQ(),qT4=uWQ();function NT4(){if($T4.NODE_VERSION.major>=14)qT4.setHooksAsyncContextStrategy();else UT4.setDomainAsyncContextStrategy()}mWQ.setNodeAsyncContextStrategy=NT4});var HiA=U((iWQ)=>{Object.defineProperty(iWQ,"__esModule",{value:!0});var LT4=qA("util"),FiA=F6(),pWQ=CQ(),cWQ="Console",OT4=()=>{return{name:cWQ,setupOnce(){},setup(A){pWQ.addConsoleInstrumentationHandler(({args:Q,level:B})=>{if(FiA.getClient()!==A)return;FiA.addBreadcrumb({category:"console",level:pWQ.severityLevelFromString(B),message:LT4.format.apply(void 0,Q)},{input:[...Q],level:B})})}}},lWQ=FiA.defineIntegration(OT4),MT4=FiA.convertIntegrationFnToClass(cWQ,lWQ);iWQ.Console=MT4;iWQ.consoleIntegration=lWQ});var EiA=U((BDQ)=>{var{_optionalChain:C1A}=CQ();Object.defineProperty(BDQ,"__esModule",{value:!0});var jT4=qA("child_process"),aWQ=qA("fs"),jM=qA("os"),TT4=qA("path"),oWQ=qA("util"),rWQ=F6(),sWQ=oWQ.promisify(aWQ.readFile),tWQ=oWQ.promisify(aWQ.readdir),eWQ="Context",PT4=(A={})=>{let Q,B={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...A};async function G(Y){if(Q===void 0)Q=Z();let J=xT4(await Q);return Y.contexts={...Y.contexts,app:{...J.app,...C1A([Y,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.app])},os:{...J.os,...C1A([Y,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.os])},device:{...J.device,...C1A([Y,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.device])},culture:{...J.culture,...C1A([Y,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.culture])},cloud_resource:{...J.cloud_resource,...C1A([Y,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.cloud_resource])}},Y}async function Z(){let Y={};if(B.os)Y.os=await yT4();if(B.app)Y.app=kT4();if(B.device)Y.device=QDQ(B.device);if(B.culture){let J=vT4();if(J)Y.culture=J}if(B.cloudResource)Y.cloud_resource=mT4();return Y}return{name:eWQ,setupOnce(){},processEvent(Y){return G(Y)}}},ADQ=rWQ.defineIntegration(PT4),ST4=rWQ.convertIntegrationFnToClass(eWQ,ADQ);function xT4(A){if(C1A([A,"optionalAccess",(Q)=>Q.app,"optionalAccess",(Q)=>Q.app_memory]))A.app.app_memory=process.memoryUsage().rss;if(C1A([A,"optionalAccess",(Q)=>Q.device,"optionalAccess",(Q)=>Q.free_memory]))A.device.free_memory=jM.freemem();return A}async function yT4(){let A=jM.platform();switch(A){case"darwin":return gT4();case"linux":return uT4();default:return{name:bT4[A]||A,version:jM.release()}}}function vT4(){try{if(typeof process.versions.icu!=="string")return;let A=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format(A)==="enero"){let B=Intl.DateTimeFormat().resolvedOptions();return{locale:B.locale,timezone:B.timeZone}}}catch(A){}return}function kT4(){let A=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:A}}function QDQ(A){let Q={},B;try{B=jM.uptime&&jM.uptime()}catch(G){}if(typeof B==="number")Q.boot_time=new Date(Date.now()-B*1000).toISOString();if(Q.arch=jM.arch(),A===!0||A.memory)Q.memory_size=jM.totalmem(),Q.free_memory=jM.freemem();if(A===!0||A.cpu){let G=jM.cpus();if(G&&G.length){let Z=G[0];Q.processor_count=G.length,Q.cpu_description=Z.model,Q.processor_frequency=Z.speed}}return Q}var bT4={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},fT4=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],hT4={alpine:(A)=>A,arch:(A)=>ny(/distrib_release=(.*)/,A),centos:(A)=>ny(/release ([^ ]+)/,A),debian:(A)=>A,fedora:(A)=>ny(/release (..)/,A),mint:(A)=>ny(/distrib_release=(.*)/,A),red:(A)=>ny(/release ([^ ]+)/,A),suse:(A)=>ny(/VERSION = (.*)\n/,A),ubuntu:(A)=>ny(/distrib_release=(.*)/,A)};function ny(A,Q){let B=A.exec(Q);return B?B[1]:void 0}async function gT4(){let A={kernel_version:jM.release(),name:"Mac OS X",version:`10.${Number(jM.release().split(".")[0])-4}`};try{let Q=await new Promise((B,G)=>{jT4.execFile("/usr/bin/sw_vers",(Z,Y)=>{if(Z){G(Z);return}B(Y)})});A.name=ny(/^ProductName:\s+(.*)$/m,Q),A.version=ny(/^ProductVersion:\s+(.*)$/m,Q),A.build=ny(/^BuildVersion:\s+(.*)$/m,Q)}catch(Q){}return A}function nWQ(A){return A.split(" ")[0].toLowerCase()}async function uT4(){let A={kernel_version:jM.release(),name:"Linux"};try{let Q=await tWQ("/etc"),B=fT4.find((X)=>Q.includes(X.name));if(!B)return A;let G=TT4.join("/etc",B.name),Z=(await sWQ(G,{encoding:"utf-8"})).toLowerCase(),{distros:Y}=B;A.name=Y.find((X)=>Z.indexOf(nWQ(X))>=0)||Y[0];let J=nWQ(A.name);A.version=hT4[J](Z)}catch(Q){}return A}function mT4(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return}BDQ.Context=ST4;BDQ.getDeviceContext=QDQ;BDQ.nodeContextIntegration=ADQ;BDQ.readDirAsync=tWQ;BDQ.readFileAsync=sWQ});var CiA=U((XDQ)=>{var{_optionalChain:Gj1}=CQ();Object.defineProperty(XDQ,"__esModule",{value:!0});var nT4=qA("fs"),GDQ=F6(),ZDQ=CQ(),ziA=new ZDQ.LRUMap(100),aT4=7,YDQ="ContextLines";function oT4(A){return new Promise((Q,B)=>{nT4.readFile(A,"utf8",(G,Z)=>{if(G)B(G);else Q(Z)})})}var rT4=(A={})=>{let Q=A.frameContextLines!==void 0?A.frameContextLines:aT4;return{name:YDQ,setupOnce(){},processEvent(B){return tT4(B,Q)}}},JDQ=GDQ.defineIntegration(rT4),sT4=GDQ.convertIntegrationFnToClass(YDQ,JDQ);async function tT4(A,Q){let B={},G=[];if(Q>0&&Gj1([A,"access",(Z)=>Z.exception,"optionalAccess",(Z)=>Z.values]))for(let Z of A.exception.values){if(!Gj1([Z,"access",(Y)=>Y.stacktrace,"optionalAccess",(Y)=>Y.frames]))continue;for(let Y=Z.stacktrace.frames.length-1;Y>=0;Y--){let J=Z.stacktrace.frames[Y];if(J.filename&&!B[J.filename]&&!ziA.get(J.filename))G.push(AP4(J.filename)),B[J.filename]=1}}if(G.length>0)await Promise.all(G);if(Q>0&&Gj1([A,"access",(Z)=>Z.exception,"optionalAccess",(Z)=>Z.values])){for(let Z of A.exception.values)if(Z.stacktrace&&Z.stacktrace.frames)await eT4(Z.stacktrace.frames,Q)}return A}function eT4(A,Q){for(let B of A)if(B.filename&&B.context_line===void 0){let G=ziA.get(B.filename);if(G)try{ZDQ.addContextToFrame(G,B,Q)}catch(Z){}}}async function AP4(A){let Q=ziA.get(A);if(Q===null)return null;if(Q!==void 0)return Q;let B=null;try{B=(await oT4(A)).split(`
`)}catch(G){}return ziA.set(A,B),B}XDQ.ContextLines=sT4;XDQ.contextLinesIntegration=JDQ});var BqA=U((IDQ)=>{Object.defineProperty(IDQ,"__esModule",{value:!0});var GP4=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;IDQ.DEBUG_BUILD=GP4});var VDQ=U((KDQ)=>{var{_optionalChain:ay}=CQ();Object.defineProperty(KDQ,"__esModule",{value:!0});var Zj1=qA("url"),YP4=E1A();function JP4(A){let{protocol:Q,hostname:B,port:G}=DDQ(A),Z=A.path?A.path:"/";return`${Q}//${B}${G}${Z}`}function WDQ(A){let{protocol:Q,hostname:B,port:G}=DDQ(A),Z=A.pathname||"/",Y=A.auth?XP4(A.auth):"";return`${Q}//${Y}${B}${G}${Z}`}function XP4(A){let[Q,B]=A.split(":");return`${Q?"[Filtered]":""}:${B?"[Filtered]":""}@`}function IP4(A,Q,B){if(!A)return A;let[G,Z]=A.split(" ");if(Q.host&&!Q.protocol)Q.protocol=ay([B,"optionalAccess",(Y)=>Y.agent,"optionalAccess",(Y)=>Y.protocol]),Z=WDQ(Q);if(ay([Z,"optionalAccess",(Y)=>Y.startsWith,"call",(Y)=>Y("///")]))Z=Z.slice(2);return`${G} ${Z}`}function Yj1(A){let Q={protocol:A.protocol,hostname:typeof A.hostname==="string"&&A.hostname.startsWith("[")?A.hostname.slice(1,-1):A.hostname,hash:A.hash,search:A.search,pathname:A.pathname,path:`${A.pathname||""}${A.search||""}`,href:A.href};if(A.port!=="")Q.port=Number(A.port);if(A.username||A.password)Q.auth=`${A.username}:${A.password}`;return Q}function WP4(A,Q){let B,G;if(typeof Q[Q.length-1]==="function")B=Q.pop();if(typeof Q[0]==="string")G=Yj1(new Zj1.URL(Q[0]));else if(Q[0]instanceof Zj1.URL)G=Yj1(Q[0]);else{G=Q[0];try{let Z=new Zj1.URL(G.path||"",`${G.protocol||"http:"}//${G.hostname}`);G={pathname:Z.pathname,search:Z.search,hash:Z.hash,...G}}catch(Z){}}if(Q.length===2)G={...G,...Q[1]};if(G.protocol===void 0)if(YP4.NODE_VERSION.major>8)G.protocol=ay([ay([A,"optionalAccess",(Z)=>Z.globalAgent]),"optionalAccess",(Z)=>Z.protocol])||ay([G.agent,"optionalAccess",(Z)=>Z.protocol])||ay([G._defaultAgent,"optionalAccess",(Z)=>Z.protocol]);else G.protocol=ay([G.agent,"optionalAccess",(Z)=>Z.protocol])||ay([G._defaultAgent,"optionalAccess",(Z)=>Z.protocol])||ay([ay([A,"optionalAccess",(Z)=>Z.globalAgent]),"optionalAccess",(Z)=>Z.protocol]);if(B)return[G,B];else return[G]}function DDQ(A){let Q=A.protocol||"",B=A.hostname||A.host||"",G=!A.port||A.port===80||A.port===443||/^(.*):(\d+)$/.test(B)?"":`:${A.port}`;return{protocol:Q,hostname:B,port:G}}KDQ.cleanSpanDescription=IP4;KDQ.extractRawUrl=JP4;KDQ.extractUrl=WDQ;KDQ.normalizeRequestArgs=WP4;KDQ.urlToOptions=Yj1});var $iA=U((zDQ)=>{var{_optionalChain:yGA}=CQ();Object.defineProperty(zDQ,"__esModule",{value:!0});var Jz=F6(),hw=CQ(),Jj1=BqA(),EP4=E1A(),GqA=VDQ(),zP4=(A={})=>{let{breadcrumbs:Q,tracing:B,shouldCreateSpanForRequest:G}=A,Z={breadcrumbs:Q,tracing:B===!1?!1:hw.dropUndefinedKeys({enableIfHasTracingEnabled:B===!0?void 0:!0,shouldCreateSpanForRequest:G})};return new $1A(Z)},CP4=Jz.defineIntegration(zP4);class $1A{static __initStatic(){this.id="Http"}__init(){this.name=$1A.id}constructor(A={}){$1A.prototype.__init.call(this),this._breadcrumbs=typeof A.breadcrumbs>"u"?!0:A.breadcrumbs,this._tracing=!A.tracing?void 0:A.tracing===!0?{}:A.tracing}setupOnce(A,Q){let B=yGA([Q,"call",(I)=>I(),"access",(I)=>I.getClient,"call",(I)=>I(),"optionalAccess",(I)=>I.getOptions,"call",(I)=>I()]),G=HDQ(this._tracing,B);if(!this._breadcrumbs&&!G)return;if(B&&B.instrumenter!=="sentry"){Jj1.DEBUG_BUILD&&hw.logger.log("HTTP Integration is skipped because of instrumenter configuration.");return}let Z=EDQ(G,this._tracing,B),Y=yGA([B,"optionalAccess",(I)=>I.tracePropagationTargets])||yGA([this,"access",(I)=>I._tracing,"optionalAccess",(I)=>I.tracePropagationTargets]),J=qA("http"),X=FDQ(J,this._breadcrumbs,Z,Y);if(hw.fill(J,"get",X),hw.fill(J,"request",X),EP4.NODE_VERSION.major>8){let I=qA("https"),W=FDQ(I,this._breadcrumbs,Z,Y);hw.fill(I,"get",W),hw.fill(I,"request",W)}}}$1A.__initStatic();function FDQ(A,Q,B,G){let Z=new hw.LRUMap(100),Y=new hw.LRUMap(100),J=(W)=>{if(B===void 0)return!0;let D=Z.get(W);if(D!==void 0)return D;let K=B(W);return Z.set(W,K),K},X=(W)=>{if(G===void 0)return!0;let D=Y.get(W);if(D!==void 0)return D;let K=hw.stringMatchesSomePattern(W,G);return Y.set(W,K),K};function I(W,D,K,V){if(!Jz.getCurrentHub().getIntegration($1A))return;Jz.addBreadcrumb({category:"http",data:{status_code:V&&V.statusCode,...D},type:"http"},{event:W,request:K,response:V})}return function(D){return function(...V){let F=GqA.normalizeRequestArgs(A,V),H=F[0],E=GqA.extractRawUrl(H),z=GqA.extractUrl(H),C=Jz.getClient();if(Jz.isSentryRequestUrl(z,C))return D.apply(A,F);let O=Jz.getCurrentScope(),L=Jz.getIsolationScope(),M=Jz.getActiveSpan(),_=UP4(z,H),j=J(E)?yGA([M,"optionalAccess",(P)=>P.startChild,"call",(P)=>P({op:"http.client",origin:"auto.http.node.http",description:`${_["http.method"]} ${_.url}`,data:_})]):void 0;if(C&&X(E)){let{traceId:P,spanId:y,sampled:v,dsc:m}={...L.getPropagationContext(),...O.getPropagationContext()},h=j?Jz.spanToTraceHeader(j):hw.generateSentryTraceHeader(P,y,v),e=hw.dynamicSamplingContextToSentryBaggageHeader(m||(j?Jz.getDynamicSamplingContextFromSpan(j):Jz.getDynamicSamplingContextFromClient(P,C,O)));$P4(H,z,h,e)}else Jj1.DEBUG_BUILD&&hw.logger.log(`[Tracing] Not adding sentry-trace header to outgoing request (${z}) due to mismatching tracePropagationTargets option.`);return D.apply(A,F).once("response",function(P){let y=this;if(Q)I("response",_,y,P);if(j){if(P.statusCode)Jz.setHttpStatus(j,P.statusCode);j.updateName(GqA.cleanSpanDescription(Jz.spanToJSON(j).description||"",H,y)||""),j.end()}}).once("error",function(){let P=this;if(Q)I("error",_,P);if(j)Jz.setHttpStatus(j,500),j.updateName(GqA.cleanSpanDescription(Jz.spanToJSON(j).description||"",H,P)||""),j.end()})}}}function $P4(A,Q,B,G){if((A.headers||{})["sentry-trace"])return;Jj1.DEBUG_BUILD&&hw.logger.log(`[Tracing] Adding sentry-trace header ${B} to outgoing request to "${Q}": `),A.headers={...A.headers,"sentry-trace":B,...G&&G.length>0&&{baggage:qP4(A,G)}}}function UP4(A,Q){let B=Q.method||"GET",G={url:A,"http.method":B};if(Q.hash)G["http.fragment"]=Q.hash.substring(1);if(Q.search)G["http.query"]=Q.search.substring(1);return G}function qP4(A,Q){if(!A.headers||!A.headers.baggage)return Q;else if(!Q)return A.headers.baggage;else if(Array.isArray(A.headers.baggage))return[...A.headers.baggage,Q];return[A.headers.baggage,Q]}function HDQ(A,Q){return A===void 0?!1:A.enableIfHasTracingEnabled?Jz.hasTracingEnabled(Q):!0}function EDQ(A,Q,B){return A?yGA([Q,"optionalAccess",(Z)=>Z.shouldCreateSpanForRequest])||yGA([B,"optionalAccess",(Z)=>Z.shouldCreateSpanForRequest]):()=>!1}zDQ.Http=$1A;zDQ._getShouldCreateSpanForRequest=EDQ;zDQ._shouldCreateSpans=HDQ;zDQ.httpIntegration=CP4});var UDQ=U(($DQ)=>{Object.defineProperty($DQ,"__esModule",{value:!0});function MP4(A,Q,B){let G=0,Z=5,Y=0;return setInterval(()=>{if(Y===0){if(G>A){if(Z*=2,B(Z),Z>86400)Z=86400;Y=Z}}else if(Y-=1,Y===0)Q();G=0},1000).unref(),()=>{G+=1}}function Xj1(A){return A!==void 0&&(A.length===0||A==="?"||A==="<anonymous>")}function RP4(A,Q){return A===Q||Xj1(A)&&Xj1(Q)}function CDQ(A){if(A===void 0)return;return A.slice(-10).reduce((Q,B)=>`${Q},${B.function},${B.lineno},${B.colno}`,"")}function _P4(A,Q){if(Q===void 0)return;return CDQ(A(Q,1))}$DQ.createRateLimiter=MP4;$DQ.functionNamesMatch=RP4;$DQ.hashFrames=CDQ;$DQ.hashFromStack=_P4;$DQ.isAnonymous=Xj1});var ODQ=U((LDQ)=>{var{_optionalChain:xI}=CQ();Object.defineProperty(LDQ,"__esModule",{value:!0});var Ij1=F6(),UiA=CQ(),yP4=E1A(),qiA=UDQ();function Wj1(A){let Q=[],B=!1;function G(J){if(Q=[],B)return;B=!0,A(J)}Q.push(G);function Z(J){Q.push(J)}function Y(J){let X=Q.pop()||G;try{X(J)}catch(I){G(J)}}return{add:Z,next:Y}}class qDQ{constructor(){let{Session:A}=qA("inspector");this._session=new A}configureAndConnect(A,Q){this._session.connect(),this._session.on("Debugger.paused",(B)=>{A(B,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:Q?"all":"uncaught"})}setPauseOnExceptions(A){this._session.post("Debugger.setPauseOnExceptions",{state:A?"all":"uncaught"})}getLocalVariables(A,Q){this._getProperties(A,(B)=>{let{add:G,next:Z}=Wj1(Q);for(let Y of B)if(xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&xI([Y,"optionalAccess",(J)=>J.value,"access",(J)=>J.className])==="Array"){let J=Y.value.objectId;G((X)=>this._unrollArray(J,Y.name,X,Z))}else if(xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.className])==="Object"){let J=Y.value.objectId;G((X)=>this._unrollObject(J,Y.name,X,Z))}else if(xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])!=null||xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description])!=null)G((J)=>this._unrollOther(Y,J,Z));Z({})})}_getProperties(A,Q){this._session.post("Runtime.getProperties",{objectId:A,ownProperties:!0},(B,G)=>{if(B)Q([]);else Q(G.result)})}_unrollArray(A,Q,B,G){this._getProperties(A,(Z)=>{B[Q]=Z.filter((Y)=>Y.name!=="length"&&!isNaN(parseInt(Y.name,10))).sort((Y,J)=>parseInt(Y.name,10)-parseInt(J.name,10)).map((Y)=>xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])),G(B)})}_unrollObject(A,Q,B,G){this._getProperties(A,(Z)=>{B[Q]=Z.map((Y)=>[Y.name,xI([Y,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])]).reduce((Y,[J,X])=>{return Y[J]=X,Y},{}),G(B)})}_unrollOther(A,Q,B){if(xI([A,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.value])!=null)Q[A.name]=A.value.value;else if(xI([A,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.description])!=null&&xI([A,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.type])!=="function")Q[A.name]=`<${A.value.description}>`;B(Q)}}function vP4(){try{return new qDQ}catch(A){return}}var NDQ="LocalVariables",kP4=(A={},Q=vP4())=>{let B=new UiA.LRUMap(20),G,Z=!1;function Y(I,{params:{reason:W,data:D,callFrames:K}},V){if(W!=="exception"&&W!=="promiseRejection"){V();return}xI([G,"optionalCall",(z)=>z()]);let F=qiA.hashFromStack(I,xI([D,"optionalAccess",(z)=>z.description]));if(F==null){V();return}let{add:H,next:E}=Wj1((z)=>{B.set(F,z),V()});for(let z=0;z<Math.min(K.length,5);z++){let{scopeChain:C,functionName:O,this:L}=K[z],M=C.find((j)=>j.type==="local"),_=L.className==="global"||!L.className?O:`${L.className}.${O}`;if(xI([M,"optionalAccess",(j)=>j.object,"access",(j)=>j.objectId])===void 0)H((j)=>{j[z]={function:_},E(j)});else{let j=M.object.objectId;H((P)=>xI([Q,"optionalAccess",(y)=>y.getLocalVariables,"call",(y)=>y(j,(v)=>{P[z]={function:_,vars:v},E(P)})]))}}E([])}function J(I){let W=qiA.hashFrames(xI([I,"optionalAccess",(V)=>V.stacktrace,"optionalAccess",(V)=>V.frames]));if(W===void 0)return;let D=B.remove(W);if(D===void 0)return;let K=(xI([I,"access",(V)=>V.stacktrace,"optionalAccess",(V)=>V.frames])||[]).filter((V)=>V.function!=="new Promise");for(let V=0;V<K.length;V++){let F=K.length-V-1;if(!K[F]||!D[V])break;if(D[V].vars===void 0||K[F].in_app===!1||!qiA.functionNamesMatch(K[F].function,D[V].function))continue;K[F].vars=D[V].vars}}function X(I){for(let W of xI([I,"optionalAccess",(D)=>D.exception,"optionalAccess",(D)=>D.values])||[])J(W);return I}return{name:NDQ,setupOnce(){let I=Ij1.getClient(),W=xI([I,"optionalAccess",(D)=>D.getOptions,"call",(D)=>D()]);if(Q&&xI([W,"optionalAccess",(D)=>D.includeLocalVariables])){if(yP4.NODE_VERSION.major<18){UiA.logger.log("The `LocalVariables` integration is only supported on Node >= v18.");return}let K=A.captureAllExceptions!==!1;if(Q.configureAndConnect((V,F)=>Y(W.stackParser,V,F),K),K){let V=A.maxExceptionsPerSecond||50;G=qiA.createRateLimiter(V,()=>{UiA.logger.log("Local variables rate-limit lifted."),xI([Q,"optionalAccess",(F)=>F.setPauseOnExceptions,"call",(F)=>F(!0)])},(F)=>{UiA.logger.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${F} seconds.`),xI([Q,"optionalAccess",(H)=>H.setPauseOnExceptions,"call",(H)=>H(!1)])})}Z=!0}},processEvent(I){if(Z)return X(I);return I},_getCachedFramesCount(){return B.size},_getFirstCachedFrame(){return B.values()[0]}}},wDQ=Ij1.defineIntegration(kP4),bP4=Ij1.convertIntegrationFnToClass(NDQ,wDQ);LDQ.LocalVariablesSync=bP4;LDQ.createCallbackList=Wj1;LDQ.localVariablesSyncIntegration=wDQ});var NiA=U((RDQ)=>{Object.defineProperty(RDQ,"__esModule",{value:!0});var MDQ=ODQ(),uP4=MDQ.LocalVariablesSync,mP4=MDQ.localVariablesSyncIntegration;RDQ.LocalVariables=uP4;RDQ.localVariablesIntegration=mP4});var wiA=U((xDQ)=>{Object.defineProperty(xDQ,"__esModule",{value:!0});var _DQ=qA("fs"),jDQ=qA("path"),TDQ=F6(),Dj1,PDQ="Modules";function cP4(){try{return qA.cache?Object.keys(qA.cache):[]}catch(A){return[]}}function lP4(){let A=qA.main&&qA.main.paths||[],Q=cP4(),B={},G={};return Q.forEach((Z)=>{let Y=Z,J=()=>{let X=Y;if(Y=jDQ.dirname(X),!Y||X===Y||G[X])return;if(A.indexOf(Y)<0)return J();let I=jDQ.join(X,"package.json");if(G[X]=!0,!_DQ.existsSync(I))return J();try{let W=JSON.parse(_DQ.readFileSync(I,"utf8"));B[W.name]=W.version}catch(W){}};J()}),B}function iP4(){if(!Dj1)Dj1=lP4();return Dj1}var nP4=()=>{return{name:PDQ,setupOnce(){},processEvent(A){return A.modules={...A.modules,...iP4()},A}}},SDQ=TDQ.defineIntegration(nP4),aP4=TDQ.convertIntegrationFnToClass(PDQ,SDQ);xDQ.Modules=aP4;xDQ.modulesIntegration=SDQ});var Vj1=U((yDQ)=>{Object.defineProperty(yDQ,"__esModule",{value:!0});var sP4=F6(),LiA=CQ(),Kj1=BqA(),tP4=2000;function eP4(A){LiA.consoleSandbox(()=>{console.error(A)});let Q=sP4.getClient();if(Q===void 0)Kj1.DEBUG_BUILD&&LiA.logger.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);let B=Q.getOptions(),G=B&&B.shutdownTimeout&&B.shutdownTimeout>0&&B.shutdownTimeout||tP4;Q.close(G).then((Z)=>{if(!Z)Kj1.DEBUG_BUILD&&LiA.logger.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},(Z)=>{Kj1.DEBUG_BUILD&&LiA.logger.error(Z)})}yDQ.logAndExitProcess=eP4});var MiA=U((hDQ)=>{Object.defineProperty(hDQ,"__esModule",{value:!0});var OiA=F6(),QS4=CQ(),BS4=BqA(),vDQ=Vj1(),kDQ="OnUncaughtException",GS4=(A={})=>{let Q={exitEvenIfOtherHandlersAreRegistered:!0,...A};return{name:kDQ,setupOnce(){},setup(B){global.process.on("uncaughtException",fDQ(B,Q))}}},bDQ=OiA.defineIntegration(GS4),ZS4=OiA.convertIntegrationFnToClass(kDQ,bDQ);function fDQ(A,Q){let G=!1,Z=!1,Y=!1,J,X=A.getOptions();return Object.assign((I)=>{let W=vDQ.logAndExitProcess;if(Q.onFatalError)W=Q.onFatalError;else if(X.onFatalError)W=X.onFatalError;let K=global.process.listeners("uncaughtException").reduce((F,H)=>{if(H.name==="domainUncaughtExceptionClear"||H.tag&&H.tag==="sentry_tracingErrorCallback"||H._errorHandler)return F;else return F+1},0)===0,V=Q.exitEvenIfOtherHandlersAreRegistered||K;if(!G){if(J=I,G=!0,OiA.getClient()===A)OiA.captureException(I,{originalException:I,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"onuncaughtexception"}});if(!Y&&V)Y=!0,W(I)}else if(V){if(Y)BS4.DEBUG_BUILD&&QS4.logger.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),vDQ.logAndExitProcess(I);else if(!Z)Z=!0,setTimeout(()=>{if(!Y)Y=!0,W(J,I)},2000)}},{_errorHandler:!0})}hDQ.OnUncaughtException=ZS4;hDQ.makeErrorHandler=fDQ;hDQ.onUncaughtExceptionIntegration=bDQ});var _iA=U((pDQ)=>{Object.defineProperty(pDQ,"__esModule",{value:!0});var RiA=F6(),gDQ=CQ(),IS4=Vj1(),uDQ="OnUnhandledRejection",WS4=(A={})=>{let Q=A.mode||"warn";return{name:uDQ,setupOnce(){},setup(B){global.process.on("unhandledRejection",dDQ(B,{mode:Q}))}}},mDQ=RiA.defineIntegration(WS4),DS4=RiA.convertIntegrationFnToClass(uDQ,mDQ);function dDQ(A,Q){return function(G,Z){if(RiA.getClient()!==A)return;RiA.captureException(G,{originalException:Z,captureContext:{extra:{unhandledPromiseRejection:!0}},mechanism:{handled:!1,type:"onunhandledrejection"}}),KS4(G,Q)}}function KS4(A,Q){let B="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(Q.mode==="warn")gDQ.consoleSandbox(()=>{console.warn(B),console.error(A&&A.stack?A.stack:A)});else if(Q.mode==="strict")gDQ.consoleSandbox(()=>{console.warn(B)}),IS4.logAndExitProcess(A)}pDQ.OnUnhandledRejection=DS4;pDQ.makeUnhandledPromiseHandler=dDQ;pDQ.onUnhandledRejectionIntegration=mDQ});var jiA=U((aDQ)=>{Object.defineProperty(aDQ,"__esModule",{value:!0});var ES4=qA("http"),zS4=qA("url"),cDQ=F6(),vGA=CQ(),lDQ="Spotlight",CS4=(A={})=>{let Q={sidecarUrl:A.sidecarUrl||"http://localhost:8969/stream"};return{name:lDQ,setupOnce(){},setup(B){if(typeof process==="object"&&process.env)vGA.logger.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?");US4(B,Q)}}},iDQ=cDQ.defineIntegration(CS4),$S4=cDQ.convertIntegrationFnToClass(lDQ,iDQ);function US4(A,Q){let B=qS4(Q.sidecarUrl);if(!B)return;let G=0;if(typeof A.on!=="function"){vGA.logger.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}A.on("beforeEnvelope",(Z)=>{if(G>3){vGA.logger.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}let Y=vGA.serializeEnvelope(Z),X=nDQ()({method:"POST",path:B.pathname,hostname:B.hostname,port:B.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(I)=>{I.on("data",()=>{}),I.on("end",()=>{}),I.setEncoding("utf8")});X.on("error",()=>{G++,vGA.logger.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),X.write(Y),X.end()})}function qS4(A){try{return new zS4.URL(`${A}`)}catch(Q){vGA.logger.warn(`[Spotlight] Invalid sidecar URL: ${A}`);return}}function nDQ(){let{request:A}=ES4;if(NS4(A))return A.__sentry_original__;return A}function NS4(A){return"__sentry_original__"in A}aDQ.Spotlight=$S4;aDQ.getNativeHttpRequest=nDQ;aDQ.spotlightIntegration=iDQ});var PiA=U((oDQ)=>{var{_optionalChain:TiA}=CQ();Object.defineProperty(oDQ,"__esModule",{value:!0});var _D=F6(),U1A=CQ(),MS4=E1A();oDQ.ChannelName=void 0;(function(A){A.RequestCreate="undici:request:create";let B="undici:request:headers";A.RequestEnd=B;let G="undici:request:error";A.RequestError=G})(oDQ.ChannelName||(oDQ.ChannelName={}));var RS4=(A)=>{return new Gq(A)},_S4=_D.defineIntegration(RS4);class Gq{static __initStatic(){this.id="Undici"}__init(){this.name=Gq.id}__init2(){this._createSpanUrlMap=new U1A.LRUMap(100)}__init3(){this._headersUrlMap=new U1A.LRUMap(100)}constructor(A={}){Gq.prototype.__init.call(this),Gq.prototype.__init2.call(this),Gq.prototype.__init3.call(this),Gq.prototype.__init4.call(this),Gq.prototype.__init5.call(this),Gq.prototype.__init6.call(this),this._options={breadcrumbs:A.breadcrumbs===void 0?!0:A.breadcrumbs,tracing:A.tracing,shouldCreateSpanForRequest:A.shouldCreateSpanForRequest}}setupOnce(A){if(MS4.NODE_VERSION.major<16)return;let Q;try{Q=qA("diagnostics_channel")}catch(B){}if(!Q||!Q.subscribe)return;Q.subscribe(oDQ.ChannelName.RequestCreate,this._onRequestCreate),Q.subscribe(oDQ.ChannelName.RequestEnd,this._onRequestEnd),Q.subscribe(oDQ.ChannelName.RequestError,this._onRequestError)}_shouldCreateSpan(A){if(this._options.tracing===!1||this._options.tracing===void 0&&!_D.hasTracingEnabled())return!1;if(this._options.shouldCreateSpanForRequest===void 0)return!0;let Q=this._createSpanUrlMap.get(A);if(Q!==void 0)return Q;let B=this._options.shouldCreateSpanForRequest(A);return this._createSpanUrlMap.set(A,B),B}__init4(){this._onRequestCreate=(A)=>{if(!TiA([_D.getClient,"call",(D)=>D(),"optionalAccess",(D)=>D.getIntegration,"call",(D)=>D(Gq)]))return;let{request:Q}=A,B=Q.origin?Q.origin.toString()+Q.path:Q.path,G=_D.getClient();if(!G)return;if(_D.isSentryRequestUrl(B,G)||Q.__sentry_span__!==void 0)return;let Z=G.getOptions(),Y=_D.getCurrentScope(),J=_D.getIsolationScope(),X=_D.getActiveSpan(),I=this._shouldCreateSpan(B)?TS4(X,Q,B):void 0;if(I)Q.__sentry_span__=I;if(((D)=>{if(Z.tracePropagationTargets===void 0)return!0;let K=this._headersUrlMap.get(D);if(K!==void 0)return K;let V=U1A.stringMatchesSomePattern(D,Z.tracePropagationTargets);return this._headersUrlMap.set(D,V),V})(B)){let{traceId:D,spanId:K,sampled:V,dsc:F}={...J.getPropagationContext(),...Y.getPropagationContext()},H=I?_D.spanToTraceHeader(I):U1A.generateSentryTraceHeader(D,K,V),E=U1A.dynamicSamplingContextToSentryBaggageHeader(F||(I?_D.getDynamicSamplingContextFromSpan(I):_D.getDynamicSamplingContextFromClient(D,G,Y)));jS4(Q,H,E)}}}__init5(){this._onRequestEnd=(A)=>{if(!TiA([_D.getClient,"call",(Y)=>Y(),"optionalAccess",(Y)=>Y.getIntegration,"call",(Y)=>Y(Gq)]))return;let{request:Q,response:B}=A,G=Q.origin?Q.origin.toString()+Q.path:Q.path;if(_D.isSentryRequestUrl(G,_D.getClient()))return;let Z=Q.__sentry_span__;if(Z)_D.setHttpStatus(Z,B.statusCode),Z.end();if(this._options.breadcrumbs)_D.addBreadcrumb({category:"http",data:{method:Q.method,status_code:B.statusCode,url:G},type:"http"},{event:"response",request:Q,response:B})}}__init6(){this._onRequestError=(A)=>{if(!TiA([_D.getClient,"call",(Z)=>Z(),"optionalAccess",(Z)=>Z.getIntegration,"call",(Z)=>Z(Gq)]))return;let{request:Q}=A,B=Q.origin?Q.origin.toString()+Q.path:Q.path;if(_D.isSentryRequestUrl(B,_D.getClient()))return;let G=Q.__sentry_span__;if(G)G.setStatus("internal_error"),G.end();if(this._options.breadcrumbs)_D.addBreadcrumb({category:"http",data:{method:Q.method,url:B},level:"error",type:"http"},{event:"error",request:Q})}}}Gq.__initStatic();function jS4(A,Q,B){let G;if(Array.isArray(A.headers))G=A.headers.some((Z)=>Z==="sentry-trace");else G=A.headers.split(`\r
`).some((Y)=>Y.startsWith("sentry-trace:"));if(G)return;if(A.addHeader("sentry-trace",Q),B)A.addHeader("baggage",B)}function TS4(A,Q,B){let G=U1A.parseUrl(B),Z=Q.method||"GET",Y={"http.method":Z};if(G.search)Y["http.query"]=G.search;if(G.hash)Y["http.fragment"]=G.hash;return TiA([A,"optionalAccess",(J)=>J.startChild,"call",(J)=>J({op:"http.client",origin:"auto.http.node.undici",description:`${Z} ${U1A.getSanitizedUrlString(G)}`,data:Y})])}oDQ.Undici=Gq;oDQ.nativeNodeFetchintegration=_S4});var Fj1=U((tDQ)=>{Object.defineProperty(tDQ,"__esModule",{value:!0});var rDQ=qA("path"),xS4=CQ();function sDQ(A){return A.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function yS4(A=process.argv[1]?xS4.dirname(process.argv[1]):process.cwd(),Q=rDQ.sep==="\\"){let B=Q?sDQ(A):A;return(G)=>{if(!G)return;let Z=Q?sDQ(G):G,{dir:Y,base:J,ext:X}=rDQ.posix.parse(Z);if(X===".js"||X===".mjs"||X===".cjs")J=J.slice(0,X.length*-1);if(!Y)Y=".";let I=Y.lastIndexOf("/node_modules");if(I>-1)return`${Y.slice(I+14).replace(/\//g,".")}:${J}`;if(Y.startsWith(B)){let W=Y.slice(B.length+1).replace(/\//g,".");if(W)W+=":";return W+=J,W}return J}}tDQ.createGetModuleFromFilename=yS4});var Hj1=U((GKQ)=>{var{_optionalChain:kS4}=CQ();Object.defineProperty(GKQ,"__esModule",{value:!0});var TM=F6(),q1A=CQ(),bS4=dWQ(),fS4=t_1(),hS4=HiA(),gS4=EiA(),uS4=CiA(),mS4=$iA(),dS4=NiA(),pS4=wiA(),cS4=MiA(),lS4=_iA(),iS4=jiA(),nS4=PiA(),aS4=Fj1(),oS4=Qj1(),eDQ=[TM.inboundFiltersIntegration(),TM.functionToStringIntegration(),TM.linkedErrorsIntegration(),TM.requestDataIntegration(),hS4.consoleIntegration(),mS4.httpIntegration(),nS4.nativeNodeFetchintegration(),cS4.onUncaughtExceptionIntegration(),lS4.onUnhandledRejectionIntegration(),uS4.contextLinesIntegration(),dS4.localVariablesIntegration(),gS4.nodeContextIntegration(),pS4.modulesIntegration()];function AKQ(A){let Q=TM.getMainCarrier(),B=kS4([Q,"access",(G)=>G.__SENTRY__,"optionalAccess",(G)=>G.integrations])||[];return[...eDQ,...B]}function rS4(A={}){if(bS4.setNodeAsyncContextStrategy(),A.defaultIntegrations===void 0)A.defaultIntegrations=AKQ();if(A.dsn===void 0&&process.env.SENTRY_DSN)A.dsn=process.env.SENTRY_DSN;let Q=process.env.SENTRY_TRACES_SAMPLE_RATE;if(A.tracesSampleRate===void 0&&Q){let G=parseFloat(Q);if(isFinite(G))A.tracesSampleRate=G}if(A.release===void 0){let G=QKQ();if(G!==void 0)A.release=G;else A.autoSessionTracking=!1}if(A.environment===void 0&&process.env.SENTRY_ENVIRONMENT)A.environment=process.env.SENTRY_ENVIRONMENT;if(A.autoSessionTracking===void 0&&A.dsn!==void 0)A.autoSessionTracking=!0;if(A.instrumenter===void 0)A.instrumenter="sentry";let B={...A,stackParser:q1A.stackParserFromStackParserOptions(A.stackParser||BKQ),integrations:TM.getIntegrationsToSetup(A),transport:A.transport||oS4.makeNodeTransport};if(TM.initAndBind(A.clientClass||fS4.NodeClient,B),A.autoSessionTracking)tS4();if(eS4(),A.spotlight){let G=TM.getClient();if(G&&G.addIntegration){let Z=G.getOptions().integrations;for(let Y of Z)G.addIntegration(Y);G.addIntegration(iS4.spotlightIntegration({sidecarUrl:typeof A.spotlight==="string"?A.spotlight:void 0}))}}}function sS4(A){if(A===void 0)return!1;let Q=A&&A.getOptions();if(Q&&Q.autoSessionTracking!==void 0)return Q.autoSessionTracking;return!1}function QKQ(A){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(q1A.GLOBAL_OBJ.SENTRY_RELEASE&&q1A.GLOBAL_OBJ.SENTRY_RELEASE.id)return q1A.GLOBAL_OBJ.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||process.env.CF_PAGES_COMMIT_SHA||A}var BKQ=q1A.createStackParser(q1A.nodeStackLineParser(aS4.createGetModuleFromFilename()));function tS4(){TM.startSession(),process.on("beforeExit",()=>{let A=TM.getIsolationScope().getSession();if(A&&!["exited","crashed"].includes(A.status))TM.endSession()})}function eS4(){let A=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(A)){let Q=process.env.SENTRY_TRACE,B=process.env.SENTRY_BAGGAGE,G=q1A.propagationContextFromHeaders(Q,B);TM.getCurrentScope().setPropagationContext(G)}}GKQ.defaultIntegrations=eDQ;GKQ.defaultStackParser=BKQ;GKQ.getDefaultIntegrations=AKQ;GKQ.getSentryRelease=QKQ;GKQ.init=rS4;GKQ.isAutoSessionTrackingEnabled=sS4});var YKQ=U((ZKQ)=>{Object.defineProperty(ZKQ,"__esModule",{value:!0});var SiA=qA("fs"),Ej1=qA("path");function Jx4(A){let Q=Ej1.resolve(A);if(!SiA.existsSync(Q))throw Error(`Cannot read contents of ${Q}. Directory does not exist.`);if(!SiA.statSync(Q).isDirectory())throw Error(`Cannot read contents of ${Q}, because it is not a directory.`);let B=(G)=>{return SiA.readdirSync(G).reduce((Z,Y)=>{let J=Ej1.join(G,Y);if(SiA.statSync(J).isDirectory())return Z.concat(B(J));return Z.push(J),Z},[])};return B(Q).map((G)=>Ej1.relative(Q,G))}ZKQ.deepReadDirSync=Jx4});var JKQ=U((Ix4)=>{/*! @sentry/node 7.120.3 (5a833b4) | https://github.com/getsentry/sentry-javascript */Ix4.base64WorkerScript="aW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gJ2luc3BlY3Rvcic7CmltcG9ydCB7IHdvcmtlckRhdGEsIHBhcmVudFBvcnQgfSBmcm9tICd3b3JrZXJfdGhyZWFkcyc7CmltcG9ydCB7IHBvc2l4LCBzZXAgfSBmcm9tICdwYXRoJzsKaW1wb3J0ICogYXMgaHR0cCBmcm9tICdodHRwJzsKaW1wb3J0ICogYXMgaHR0cHMgZnJvbSAnaHR0cHMnOwppbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7CmltcG9ydCB7IFVSTCB9IGZyb20gJ3VybCc7CmltcG9ydCB7IGNyZWF0ZUd6aXAgfSBmcm9tICd6bGliJzsKaW1wb3J0ICogYXMgbmV0IGZyb20gJ25ldCc7CmltcG9ydCAqIGFzIHRscyBmcm9tICd0bHMnOwoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZApjb25zdCBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIG9uZSBvZiBhIGZldyBFcnJvciBvciBFcnJvci1saWtlCiAqIHtAbGluayBpc0Vycm9yfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRXJyb3Iod2F0KSB7CiAgc3dpdGNoIChvYmplY3RUb1N0cmluZy5jYWxsKHdhdCkpIHsKICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzoKICAgIGNhc2UgJ1tvYmplY3QgRXhjZXB0aW9uXSc6CiAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOgogICAgICByZXR1cm4gdHJ1ZTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBpc0luc3RhbmNlT2Yod2F0LCBFcnJvcik7CiAgfQp9Ci8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gYnVpbHQtaW4gY2xhc3MuCiAqCiAqIEBwYXJhbSB3YXQgVGhlIHZhbHVlIHRvIGJlIGNoZWNrZWQKICogQHBhcmFtIGNsYXNzTmFtZQogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0J1aWx0aW4od2F0LCBjbGFzc05hbWUpIHsKICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh3YXQpID09PSBgW29iamVjdCAke2NsYXNzTmFtZX1dYDsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIHN0cmluZwogKiB7QGxpbmsgaXNTdHJpbmd9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNTdHJpbmcod2F0KSB7CiAgcmV0dXJuIGlzQnVpbHRpbih3YXQsICdTdHJpbmcnKTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBvYmplY3QgbGl0ZXJhbCwgb3IgYSBjbGFzcyBpbnN0YW5jZS4KICoge0BsaW5rIGlzUGxhaW5PYmplY3R9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh3YXQpIHsKICByZXR1cm4gaXNCdWlsdGluKHdhdCwgJ09iamVjdCcpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIEV2ZW50IGluc3RhbmNlCiAqIHtAbGluayBpc0V2ZW50fS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRXZlbnQod2F0KSB7CiAgcmV0dXJuIHR5cGVvZiBFdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJbnN0YW5jZU9mKHdhdCwgRXZlbnQpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIEVsZW1lbnQgaW5zdGFuY2UKICoge0BsaW5rIGlzRWxlbWVudH0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0VsZW1lbnQod2F0KSB7CiAgcmV0dXJuIHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2Yod2F0LCBFbGVtZW50KTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlIGhhcyBhIHRoZW4gZnVuY3Rpb24uCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKi8KZnVuY3Rpb24gaXNUaGVuYWJsZSh3YXQpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzCiAgcmV0dXJuIEJvb2xlYW4od2F0ICYmIHdhdC50aGVuICYmIHR5cGVvZiB3YXQudGhlbiA9PT0gJ2Z1bmN0aW9uJyk7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYSBTeW50aGV0aWNFdmVudAogKiB7QGxpbmsgaXNTeW50aGV0aWNFdmVudH0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KHdhdCkgewogIHJldHVybiBpc1BsYWluT2JqZWN0KHdhdCkgJiYgJ25hdGl2ZUV2ZW50JyBpbiB3YXQgJiYgJ3ByZXZlbnREZWZhdWx0JyBpbiB3YXQgJiYgJ3N0b3BQcm9wYWdhdGlvbicgaW4gd2F0Owp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUgaXMgTmFOCiAqIHtAbGluayBpc05hTn0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc05hTiQxKHdhdCkgewogIHJldHVybiB0eXBlb2Ygd2F0ID09PSAnbnVtYmVyJyAmJiB3YXQgIT09IHdhdDsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBpbnN0YW5jZSBvZiBwcm92aWRlZCBjb25zdHJ1Y3Rvci4KICoge0BsaW5rIGlzSW5zdGFuY2VPZn0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcGFyYW0gYmFzZSBBIGNvbnN0cnVjdG9yIHRvIGJlIHVzZWQgaW4gYSBjaGVjay4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNJbnN0YW5jZU9mKHdhdCwgYmFzZSkgewogIHRyeSB7CiAgICByZXR1cm4gd2F0IGluc3RhbmNlb2YgYmFzZTsKICB9IGNhdGNoIChfZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIFZ1ZSBWaWV3TW9kZWwuCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1Z1ZVZpZXdNb2RlbCh3YXQpIHsKICAvLyBOb3QgdXNpbmcgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyBiZWNhdXNlIGluIFZ1ZSAzIGl0IHdvdWxkIHJlYWQgdGhlIGluc3RhbmNlJ3MgU3ltYm9sKFN5bWJvbC50b1N0cmluZ1RhZykgcHJvcGVydHkuCiAgcmV0dXJuICEhKHR5cGVvZiB3YXQgPT09ICdvYmplY3QnICYmIHdhdCAhPT0gbnVsbCAmJiAoKHdhdCApLl9faXNWdWUgfHwgKHdhdCApLl9pc1Z1ZSkpOwp9CgovKiogSW50ZXJuYWwgZ2xvYmFsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIFNlbnRyeSBleHRlbnNpb25zICAqLwoKLy8gVGhlIGNvZGUgYmVsb3cgZm9yICdpc0dsb2JhbE9iaicgYW5kICdHTE9CQUxfT0JKJyB3YXMgY29waWVkIGZyb20gY29yZS1qcyBiZWZvcmUgbW9kaWZpY2F0aW9uCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2Jsb2IvMWI5NDRkZjU1MjgyY2RjOTljOTBkYjVmNDllYjBiNmVkYTJjYzBhMy9wYWNrYWdlcy9jb3JlLWpzL2ludGVybmFscy9nbG9iYWwuanMKLy8gY29yZS1qcyBoYXMgdGhlIGZvbGxvd2luZyBsaWNlbmNlOgovLwovLyBDb3B5cmlnaHQgKGMpIDIwMTQtMjAyMiBEZW5pcyBQdXNoa2FyZXYKLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQovLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAovLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgovLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTgovLyBUSEUgU09GVFdBUkUuCgovKiogUmV0dXJucyAnb2JqJyBpZiBpdCdzIHRoZSBnbG9iYWwgb2JqZWN0LCBvdGhlcndpc2UgcmV0dXJucyB1bmRlZmluZWQgKi8KZnVuY3Rpb24gaXNHbG9iYWxPYmoob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouTWF0aCA9PSBNYXRoID8gb2JqIDogdW5kZWZpbmVkOwp9CgovKiogR2V0J3MgdGhlIGdsb2JhbCBvYmplY3QgZm9yIHRoZSBjdXJyZW50IEphdmFTY3JpcHQgcnVudGltZSAqLwpjb25zdCBHTE9CQUxfT0JKID0KICAodHlwZW9mIGdsb2JhbFRoaXMgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmooZ2xvYmFsVGhpcykpIHx8CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscwogICh0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIGlzR2xvYmFsT2JqKHdpbmRvdykpIHx8CiAgKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIGlzR2xvYmFsT2JqKHNlbGYpKSB8fAogICh0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGlzR2xvYmFsT2JqKGdsb2JhbCkpIHx8CiAgKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzOwogIH0pKCkgfHwKICB7fTsKCi8qKgogKiBAZGVwcmVjYXRlZCBVc2UgR0xPQkFMX09CSiBpbnN0ZWFkIG9yIFdJTkRPVyBmcm9tIEBzZW50cnkvYnJvd3Nlci4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjgKICovCmZ1bmN0aW9uIGdldEdsb2JhbE9iamVjdCgpIHsKICByZXR1cm4gR0xPQkFMX09CSiA7Cn0KCi8qKgogKiBSZXR1cm5zIGEgZ2xvYmFsIHNpbmdsZXRvbiBjb250YWluZWQgaW4gdGhlIGdsb2JhbCBgX19TRU5UUllfX2Agb2JqZWN0LgogKgogKiBJZiB0aGUgc2luZ2xldG9uIGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBpbiBgX19TRU5UUllfX2AsIGl0IHdpbGwgYmUgY3JlYXRlZCB1c2luZyB0aGUgZ2l2ZW4gZmFjdG9yeQogKiBmdW5jdGlvbiBhbmQgYWRkZWQgdG8gdGhlIGBfX1NFTlRSWV9fYCBvYmplY3QuCiAqCiAqIEBwYXJhbSBuYW1lIG5hbWUgb2YgdGhlIGdsb2JhbCBzaW5nbGV0b24gb24gX19TRU5UUllfXwogKiBAcGFyYW0gY3JlYXRvciBjcmVhdG9yIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBzaW5nbGV0b24gaWYgaXQgZG9lc24ndCBhbHJlYWR5IGV4aXN0IG9uIGBfX1NFTlRSWV9fYAogKiBAcGFyYW0gb2JqIChPcHRpb25hbCkgVGhlIGdsb2JhbCBvYmplY3Qgb24gd2hpY2ggdG8gbG9vayBmb3IgYF9fU0VOVFJZX19gLCBpZiBub3QgYEdMT0JBTF9PQkpgJ3MgcmV0dXJuIHZhbHVlCiAqIEByZXR1cm5zIHRoZSBzaW5nbGV0b24KICovCmZ1bmN0aW9uIGdldEdsb2JhbFNpbmdsZXRvbihuYW1lLCBjcmVhdG9yLCBvYmopIHsKICBjb25zdCBnYmwgPSAob2JqIHx8IEdMT0JBTF9PQkopIDsKICBjb25zdCBfX1NFTlRSWV9fID0gKGdibC5fX1NFTlRSWV9fID0gZ2JsLl9fU0VOVFJZX18gfHwge30pOwogIGNvbnN0IHNpbmdsZXRvbiA9IF9fU0VOVFJZX19bbmFtZV0gfHwgKF9fU0VOVFJZX19bbmFtZV0gPSBjcmVhdG9yKCkpOwogIHJldHVybiBzaW5nbGV0b247Cn0KCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpjb25zdCBXSU5ET1cgPSBnZXRHbG9iYWxPYmplY3QoKTsKCmNvbnN0IERFRkFVTFRfTUFYX1NUUklOR19MRU5HVEggPSA4MDsKCi8qKgogKiBHaXZlbiBhIGNoaWxkIERPTSBlbGVtZW50LCByZXR1cm5zIGEgcXVlcnktc2VsZWN0b3Igc3RhdGVtZW50IGRlc2NyaWJpbmcgdGhhdAogKiBhbmQgaXRzIGFuY2VzdG9ycwogKiBlLmcuIFtIVE1MRWxlbWVudF0gPT4gYm9keSA+IGRpdiA+IGlucHV0I2Zvby5idG5bbmFtZT1iYXpdCiAqIEByZXR1cm5zIGdlbmVyYXRlZCBET00gcGF0aAogKi8KZnVuY3Rpb24gaHRtbFRyZWVBc1N0cmluZygKICBlbGVtLAogIG9wdGlvbnMgPSB7fSwKKSB7CiAgaWYgKCFlbGVtKSB7CiAgICByZXR1cm4gJzx1bmtub3duPic7CiAgfQoKICAvLyB0cnkvY2F0Y2ggYm90aDoKICAvLyAtIGFjY2Vzc2luZyBldmVudC50YXJnZXQgKHNlZSBnZXRzZW50cnkvcmF2ZW4tanMjODM4LCAjNzY4KQogIC8vIC0gYGh0bWxUcmVlQXNTdHJpbmdgIGJlY2F1c2UgaXQncyBjb21wbGV4LCBhbmQganVzdCBhY2Nlc3NpbmcgdGhlIERPTSBpbmNvcnJlY3RseQogIC8vIC0gY2FuIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBzb21lIGNpcmN1bXN0YW5jZXMuCiAgdHJ5IHsKICAgIGxldCBjdXJyZW50RWxlbSA9IGVsZW0gOwogICAgY29uc3QgTUFYX1RSQVZFUlNFX0hFSUdIVCA9IDU7CiAgICBjb25zdCBvdXQgPSBbXTsKICAgIGxldCBoZWlnaHQgPSAwOwogICAgbGV0IGxlbiA9IDA7CiAgICBjb25zdCBzZXBhcmF0b3IgPSAnID4gJzsKICAgIGNvbnN0IHNlcExlbmd0aCA9IHNlcGFyYXRvci5sZW5ndGg7CiAgICBsZXQgbmV4dFN0cjsKICAgIGNvbnN0IGtleUF0dHJzID0gQXJyYXkuaXNBcnJheShvcHRpb25zKSA/IG9wdGlvbnMgOiBvcHRpb25zLmtleUF0dHJzOwogICAgY29uc3QgbWF4U3RyaW5nTGVuZ3RoID0gKCFBcnJheS5pc0FycmF5KG9wdGlvbnMpICYmIG9wdGlvbnMubWF4U3RyaW5nTGVuZ3RoKSB8fCBERUZBVUxUX01BWF9TVFJJTkdfTEVOR1RIOwoKICAgIHdoaWxlIChjdXJyZW50RWxlbSAmJiBoZWlnaHQrKyA8IE1BWF9UUkFWRVJTRV9IRUlHSFQpIHsKICAgICAgbmV4dFN0ciA9IF9odG1sRWxlbWVudEFzU3RyaW5nKGN1cnJlbnRFbGVtLCBrZXlBdHRycyk7CiAgICAgIC8vIGJhaWwgb3V0IGlmCiAgICAgIC8vIC0gbmV4dFN0ciBpcyB0aGUgJ2h0bWwnIGVsZW1lbnQKICAgICAgLy8gLSB0aGUgbGVuZ3RoIG9mIHRoZSBzdHJpbmcgdGhhdCB3b3VsZCBiZSBjcmVhdGVkIGV4Y2VlZHMgbWF4U3RyaW5nTGVuZ3RoCiAgICAgIC8vICAgKGlnbm9yZSB0aGlzIGxpbWl0IGlmIHdlIGFyZSBvbiB0aGUgZmlyc3QgaXRlcmF0aW9uKQogICAgICBpZiAobmV4dFN0ciA9PT0gJ2h0bWwnIHx8IChoZWlnaHQgPiAxICYmIGxlbiArIG91dC5sZW5ndGggKiBzZXBMZW5ndGggKyBuZXh0U3RyLmxlbmd0aCA+PSBtYXhTdHJpbmdMZW5ndGgpKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIG91dC5wdXNoKG5leHRTdHIpOwoKICAgICAgbGVuICs9IG5leHRTdHIubGVuZ3RoOwogICAgICBjdXJyZW50RWxlbSA9IGN1cnJlbnRFbGVtLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIG91dC5yZXZlcnNlKCkuam9pbihzZXBhcmF0b3IpOwogIH0gY2F0Y2ggKF9vTykgewogICAgcmV0dXJuICc8dW5rbm93bj4nOwogIH0KfQoKLyoqCiAqIFJldHVybnMgYSBzaW1wbGUsIHF1ZXJ5LXNlbGVjdG9yIHJlcHJlc2VudGF0aW9uIG9mIGEgRE9NIGVsZW1lbnQKICogZS5nLiBbSFRNTEVsZW1lbnRdID0+IGlucHV0I2Zvby5idG5bbmFtZT1iYXpdCiAqIEByZXR1cm5zIGdlbmVyYXRlZCBET00gcGF0aAogKi8KZnVuY3Rpb24gX2h0bWxFbGVtZW50QXNTdHJpbmcoZWwsIGtleUF0dHJzKSB7CiAgY29uc3QgZWxlbSA9IGVsCgo7CgogIGNvbnN0IG91dCA9IFtdOwogIGxldCBjbGFzc05hbWU7CiAgbGV0IGNsYXNzZXM7CiAgbGV0IGtleTsKICBsZXQgYXR0cjsKICBsZXQgaTsKCiAgaWYgKCFlbGVtIHx8ICFlbGVtLnRhZ05hbWUpIHsKICAgIHJldHVybiAnJzsKICB9CgogIC8vIEB0cy1leHBlY3QtZXJyb3IgV0lORE9XIGhhcyBIVE1MRWxlbWVudAogIGlmIChXSU5ET1cuSFRNTEVsZW1lbnQpIHsKICAgIC8vIElmIHVzaW5nIHRoZSBjb21wb25lbnQgbmFtZSBhbm5vdGF0aW9uIHBsdWdpbiwgdGhpcyB2YWx1ZSBtYXkgYmUgYXZhaWxhYmxlIG9uIHRoZSBET00gbm9kZQogICAgaWYgKGVsZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBlbGVtLmRhdGFzZXQgJiYgZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXSkgewogICAgICByZXR1cm4gZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXTsKICAgIH0KICB9CgogIG91dC5wdXNoKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKTsKCiAgLy8gUGFpcnMgb2YgYXR0cmlidXRlIGtleXMgZGVmaW5lZCBpbiBgc2VyaWFsaXplQXR0cmlidXRlYCBhbmQgdGhlaXIgdmFsdWVzIG9uIGVsZW1lbnQuCiAgY29uc3Qga2V5QXR0clBhaXJzID0KICAgIGtleUF0dHJzICYmIGtleUF0dHJzLmxlbmd0aAogICAgICA/IGtleUF0dHJzLmZpbHRlcihrZXlBdHRyID0+IGVsZW0uZ2V0QXR0cmlidXRlKGtleUF0dHIpKS5tYXAoa2V5QXR0ciA9PiBba2V5QXR0ciwgZWxlbS5nZXRBdHRyaWJ1dGUoa2V5QXR0cildKQogICAgICA6IG51bGw7CgogIGlmIChrZXlBdHRyUGFpcnMgJiYga2V5QXR0clBhaXJzLmxlbmd0aCkgewogICAga2V5QXR0clBhaXJzLmZvckVhY2goa2V5QXR0clBhaXIgPT4gewogICAgICBvdXQucHVzaChgWyR7a2V5QXR0clBhaXJbMF19PSIke2tleUF0dHJQYWlyWzFdfSJdYCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgaWYgKGVsZW0uaWQpIHsKICAgICAgb3V0LnB1c2goYCMke2VsZW0uaWR9YCk7CiAgICB9CgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogICAgY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWU7CiAgICBpZiAoY2xhc3NOYW1lICYmIGlzU3RyaW5nKGNsYXNzTmFtZSkpIHsKICAgICAgY2xhc3NlcyA9IGNsYXNzTmFtZS5zcGxpdCgvXHMrLyk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgb3V0LnB1c2goYC4ke2NsYXNzZXNbaV19YCk7CiAgICAgIH0KICAgIH0KICB9CiAgY29uc3QgYWxsb3dlZEF0dHJzID0gWydhcmlhLWxhYmVsJywgJ3R5cGUnLCAnbmFtZScsICd0aXRsZScsICdhbHQnXTsKICBmb3IgKGkgPSAwOyBpIDwgYWxsb3dlZEF0dHJzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBhbGxvd2VkQXR0cnNbaV07CiAgICBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoa2V5KTsKICAgIGlmIChhdHRyKSB7CiAgICAgIG91dC5wdXNoKGBbJHtrZXl9PSIke2F0dHJ9Il1gKTsKICAgIH0KICB9CiAgcmV0dXJuIG91dC5qb2luKCcnKTsKfQoKLyoqCiAqIFRoaXMgc2VydmVzIGFzIGEgYnVpbGQgdGltZSBmbGFnIHRoYXQgd2lsbCBiZSB0cnVlIGJ5IGRlZmF1bHQsIGJ1dCBmYWxzZSBpbiBub24tZGVidWcgYnVpbGRzIG9yIGlmIHVzZXJzIHJlcGxhY2UgYF9fU0VOVFJZX0RFQlVHX19gIGluIHRoZWlyIGdlbmVyYXRlZCBjb2RlLgogKgogKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuCiAqLwpjb25zdCBERUJVR19CVUlMRCQxID0gKHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fKTsKCi8qKiBQcmVmaXggZm9yIGxvZ2dpbmcgc3RyaW5ncyAqLwpjb25zdCBQUkVGSVggPSAnU2VudHJ5IExvZ2dlciAnOwoKY29uc3QgQ09OU09MRV9MRVZFTFMgPSBbCiAgJ2RlYnVnJywKICAnaW5mbycsCiAgJ3dhcm4nLAogICdlcnJvcicsCiAgJ2xvZycsCiAgJ2Fzc2VydCcsCiAgJ3RyYWNlJywKXSA7CgovKiogVGhpcyBtYXkgYmUgbXV0YXRlZCBieSB0aGUgY29uc29sZSBpbnN0cnVtZW50YXRpb24uICovCmNvbnN0IG9yaWdpbmFsQ29uc29sZU1ldGhvZHMKCiA9IHt9OwoKLyoqIEpTRG9jICovCgovKioKICogVGVtcG9yYXJpbHkgZGlzYWJsZSBzZW50cnkgY29uc29sZSBpbnN0cnVtZW50YXRpb25zLgogKgogKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIHJ1biBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBgY29uc29sZWAgbWVzc2FnZXMKICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrCiAqLwpmdW5jdGlvbiBjb25zb2xlU2FuZGJveChjYWxsYmFjaykgewogIGlmICghKCdjb25zb2xlJyBpbiBHTE9CQUxfT0JKKSkgewogICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgfQoKICBjb25zdCBjb25zb2xlID0gR0xPQkFMX09CSi5jb25zb2xlIDsKICBjb25zdCB3cmFwcGVkRnVuY3MgPSB7fTsKCiAgY29uc3Qgd3JhcHBlZExldmVscyA9IE9iamVjdC5rZXlzKG9yaWdpbmFsQ29uc29sZU1ldGhvZHMpIDsKCiAgLy8gUmVzdG9yZSBhbGwgd3JhcHBlZCBjb25zb2xlIG1ldGhvZHMKICB3cmFwcGVkTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4gewogICAgY29uc3Qgb3JpZ2luYWxDb25zb2xlTWV0aG9kID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kc1tsZXZlbF0gOwogICAgd3JhcHBlZEZ1bmNzW2xldmVsXSA9IGNvbnNvbGVbbGV2ZWxdIDsKICAgIGNvbnNvbGVbbGV2ZWxdID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kOwogIH0pOwoKICB0cnkgewogICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgfSBmaW5hbGx5IHsKICAgIC8vIFJldmVydCByZXN0b3JhdGlvbiB0byB3cmFwcGVkIHN0YXRlCiAgICB3cmFwcGVkTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4gewogICAgICBjb25zb2xlW2xldmVsXSA9IHdyYXBwZWRGdW5jc1tsZXZlbF0gOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBtYWtlTG9nZ2VyKCkgewogIGxldCBlbmFibGVkID0gZmFsc2U7CiAgY29uc3QgbG9nZ2VyID0gewogICAgZW5hYmxlOiAoKSA9PiB7CiAgICAgIGVuYWJsZWQgPSB0cnVlOwogICAgfSwKICAgIGRpc2FibGU6ICgpID0+IHsKICAgICAgZW5hYmxlZCA9IGZhbHNlOwogICAgfSwKICAgIGlzRW5hYmxlZDogKCkgPT4gZW5hYmxlZCwKICB9OwoKICBpZiAoREVCVUdfQlVJTEQkMSkgewogICAgQ09OU09MRV9MRVZFTFMuZm9yRWFjaChuYW1lID0+IHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgbG9nZ2VyW25hbWVdID0gKC4uLmFyZ3MpID0+IHsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgY29uc29sZVNhbmRib3goKCkgPT4gewogICAgICAgICAgICBHTE9CQUxfT0JKLmNvbnNvbGVbbmFtZV0oYCR7UFJFRklYfVske25hbWV9XTpgLCAuLi5hcmdzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBDT05TT0xFX0xFVkVMUy5mb3JFYWNoKG5hbWUgPT4gewogICAgICBsb2dnZXJbbmFtZV0gPSAoKSA9PiB1bmRlZmluZWQ7CiAgICB9KTsKICB9CgogIHJldHVybiBsb2dnZXIgOwp9Cgpjb25zdCBsb2dnZXIgPSBtYWtlTG9nZ2VyKCk7CgovKioKICogUmVuZGVycyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHNuLgogKgogKiBCeSBkZWZhdWx0LCB0aGlzIHdpbGwgcmVuZGVyIHRoZSBwdWJsaWMgcmVwcmVzZW50YXRpb24gd2l0aG91dCB0aGUgcGFzc3dvcmQKICogY29tcG9uZW50LiBUbyBnZXQgdGhlIGRlcHJlY2F0ZWQgcHJpdmF0ZSByZXByZXNlbnRhdGlvbiwgc2V0IGB3aXRoUGFzc3dvcmRgCiAqIHRvIHRydWUuCiAqCiAqIEBwYXJhbSB3aXRoUGFzc3dvcmQgV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHBhc3N3b3JkIHdpbGwgYmUgaW5jbHVkZWQuCiAqLwpmdW5jdGlvbiBkc25Ub1N0cmluZyhkc24sIHdpdGhQYXNzd29yZCA9IGZhbHNlKSB7CiAgY29uc3QgeyBob3N0LCBwYXRoLCBwYXNzLCBwb3J0LCBwcm9qZWN0SWQsIHByb3RvY29sLCBwdWJsaWNLZXkgfSA9IGRzbjsKICByZXR1cm4gKAogICAgYCR7cHJvdG9jb2x9Oi8vJHtwdWJsaWNLZXl9JHt3aXRoUGFzc3dvcmQgJiYgcGFzcyA/IGA6JHtwYXNzfWAgOiAnJ31gICsKICAgIGBAJHtob3N0fSR7cG9ydCA/IGA6JHtwb3J0fWAgOiAnJ30vJHtwYXRoID8gYCR7cGF0aH0vYCA6IHBhdGh9JHtwcm9qZWN0SWR9YAogICk7Cn0KCi8qKiBBbiBlcnJvciBlbWl0dGVkIGJ5IFNlbnRyeSBTREtzIGFuZCByZWxhdGVkIHV0aWxpdGllcy4gKi8KY2xhc3MgU2VudHJ5RXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgLyoqIERpc3BsYXkgbmFtZSBvZiB0aGlzIGVycm9yIGluc3RhbmNlLiAqLwoKICAgY29uc3RydWN0b3IoIG1lc3NhZ2UsIGxvZ0xldmVsID0gJ3dhcm4nKSB7CiAgICBzdXBlcihtZXNzYWdlKTt0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgdGhpcy5uYW1lID0gbmV3LnRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZTsKICAgIC8vIFRoaXMgc2V0cyB0aGUgcHJvdG90eXBlIHRvIGJlIGBFcnJvcmAsIG5vdCBgU2VudHJ5RXJyb3JgLiBJdCdzIHVuY2xlYXIgd2h5IHdlIGRvIHRoaXMsIGJ1dCBjb21tZW50aW5nIHRoaXMgbGluZQogICAgLy8gb3V0IGNhdXNlcyB2YXJpb3VzIChzZWVtaW5nbHkgdG90YWxseSB1bnJlbGF0ZWQpIHBsYXl3cmlnaHQgdGVzdHMgY29uc2lzdGVudGx5IHRpbWUgb3V0LiBGWUksIHRoaXMgbWFrZXMKICAgIC8vIGluc3RhbmNlcyBvZiBgU2VudHJ5RXJyb3JgIGZhaWwgYG9iaiBpbnN0YW5jZW9mIFNlbnRyeUVycm9yYCBjaGVja3MuCiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOwogICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsOwogIH0KfQoKLyoqCiAqIEVuY29kZXMgZ2l2ZW4gb2JqZWN0IGludG8gdXJsLWZyaWVuZGx5IGZvcm1hdAogKgogKiBAcGFyYW0gb2JqZWN0IEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNlcmlhbGl6YWJsZSB2YWx1ZXMKICogQHJldHVybnMgc3RyaW5nIEVuY29kZWQKICovCmZ1bmN0aW9uIHVybEVuY29kZShvYmplY3QpIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KQogICAgLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9iamVjdFtrZXldKX1gKQogICAgLmpvaW4oJyYnKTsKfQoKLyoqCiAqIFRyYW5zZm9ybXMgYW55IGBFcnJvcmAgb3IgYEV2ZW50YCBpbnRvIGEgcGxhaW4gb2JqZWN0IHdpdGggYWxsIG9mIHRoZWlyIGVudW1lcmFibGUgcHJvcGVydGllcywgYW5kIHNvbWUgb2YgdGhlaXIKICogbm9uLWVudW1lcmFibGUgcHJvcGVydGllcyBhdHRhY2hlZC4KICoKICogQHBhcmFtIHZhbHVlIEluaXRpYWwgc291cmNlIHRoYXQgd2UgaGF2ZSB0byB0cmFuc2Zvcm0gaW4gb3JkZXIgZm9yIGl0IHRvIGJlIHVzYWJsZSBieSB0aGUgc2VyaWFsaXplcgogKiBAcmV0dXJucyBBbiBFdmVudCBvciBFcnJvciB0dXJuZWQgaW50byBhbiBvYmplY3QgLSBvciB0aGUgdmFsdWUgYXJndXJtZW50IGl0c2VsZiwgd2hlbiB2YWx1ZSBpcyBuZWl0aGVyIGFuIEV2ZW50IG5vcgogKiAgYW4gRXJyb3IuCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9QbGFpbk9iamVjdCgKICB2YWx1ZSwKKQoKIHsKICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsCiAgICAgIG5hbWU6IHZhbHVlLm5hbWUsCiAgICAgIHN0YWNrOiB2YWx1ZS5zdGFjaywKICAgICAgLi4uZ2V0T3duUHJvcGVydGllcyh2YWx1ZSksCiAgICB9OwogIH0gZWxzZSBpZiAoaXNFdmVudCh2YWx1ZSkpIHsKICAgIGNvbnN0IG5ld09iagoKID0gewogICAgICB0eXBlOiB2YWx1ZS50eXBlLAogICAgICB0YXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLnRhcmdldCksCiAgICAgIGN1cnJlbnRUYXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLmN1cnJlbnRUYXJnZXQpLAogICAgICAuLi5nZXRPd25Qcm9wZXJ0aWVzKHZhbHVlKSwKICAgIH07CgogICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJbnN0YW5jZU9mKHZhbHVlLCBDdXN0b21FdmVudCkpIHsKICAgICAgbmV3T2JqLmRldGFpbCA9IHZhbHVlLmRldGFpbDsKICAgIH0KCiAgICByZXR1cm4gbmV3T2JqOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQp9CgovKiogQ3JlYXRlcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGFyZ2V0IG9mIGFuIGBFdmVudGAgb2JqZWN0ICovCmZ1bmN0aW9uIHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHRhcmdldCkgewogIHRyeSB7CiAgICByZXR1cm4gaXNFbGVtZW50KHRhcmdldCkgPyBodG1sVHJlZUFzU3RyaW5nKHRhcmdldCkgOiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0KTsKICB9IGNhdGNoIChfb08pIHsKICAgIHJldHVybiAnPHVua25vd24+JzsKICB9Cn0KCi8qKiBGaWx0ZXJzIG91dCBhbGwgYnV0IGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzICovCmZ1bmN0aW9uIGdldE93blByb3BlcnRpZXMob2JqKSB7CiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCkgewogICAgY29uc3QgZXh0cmFjdGVkUHJvcHMgPSB7fTsKICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gb2JqKSB7CiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wZXJ0eSkpIHsKICAgICAgICBleHRyYWN0ZWRQcm9wc1twcm9wZXJ0eV0gPSAob2JqIClbcHJvcGVydHldOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZXh0cmFjdGVkUHJvcHM7CiAgfSBlbHNlIHsKICAgIHJldHVybiB7fTsKICB9Cn0KCi8qKgogKiBHaXZlbiBhbnkgb2JqZWN0LCByZXR1cm4gYSBuZXcgb2JqZWN0IGhhdmluZyByZW1vdmVkIGFsbCBmaWVsZHMgd2hvc2UgdmFsdWUgd2FzIGB1bmRlZmluZWRgLgogKiBXb3JrcyByZWN1cnNpdmVseSBvbiBvYmplY3RzIGFuZCBhcnJheXMuCiAqCiAqIEF0dGVudGlvbjogVGhpcyBmdW5jdGlvbiBrZWVwcyBjaXJjdWxhciByZWZlcmVuY2VzIGluIHRoZSByZXR1cm5lZCBvYmplY3QuCiAqLwpmdW5jdGlvbiBkcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlKSB7CiAgLy8gVGhpcyBtYXAga2VlcHMgdHJhY2sgb2Ygd2hhdCBhbHJlYWR5IHZpc2l0ZWQgbm9kZXMgbWFwIHRvLgogIC8vIE91ciBTZXQgLSBiYXNlZCBtZW1vQnVpbGRlciBkb2Vzbid0IHdvcmsgaGVyZSBiZWNhdXNlIHdlIHdhbnQgdG8gdGhlIG91dHB1dCBvYmplY3QgdG8gaGF2ZSB0aGUgc2FtZSBjaXJjdWxhcgogIC8vIHJlZmVyZW5jZXMgYXMgdGhlIGlucHV0IG9iamVjdC4KICBjb25zdCBtZW1vaXphdGlvbk1hcCA9IG5ldyBNYXAoKTsKCiAgLy8gVGhpcyBmdW5jdGlvbiBqdXN0IHByb3hpZXMgYF9kcm9wVW5kZWZpbmVkS2V5c2AgdG8ga2VlcCB0aGUgYG1lbW9CdWlsZGVyYCBvdXQgb2YgdGhpcyBmdW5jdGlvbidzIEFQSQogIHJldHVybiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApOwp9CgpmdW5jdGlvbiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApIHsKICBpZiAoaXNQb2pvKGlucHV0VmFsdWUpKSB7CiAgICAvLyBJZiB0aGlzIG5vZGUgaGFzIGFscmVhZHkgYmVlbiB2aXNpdGVkIGR1ZSB0byBhIGNpcmN1bGFyIHJlZmVyZW5jZSwgcmV0dXJuIHRoZSBvYmplY3QgaXQgd2FzIG1hcHBlZCB0byBpbiB0aGUgbmV3IG9iamVjdAogICAgY29uc3QgbWVtb1ZhbCA9IG1lbW9pemF0aW9uTWFwLmdldChpbnB1dFZhbHVlKTsKICAgIGlmIChtZW1vVmFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIG1lbW9WYWwgOwogICAgfQoKICAgIGNvbnN0IHJldHVyblZhbHVlID0ge307CiAgICAvLyBTdG9yZSB0aGUgbWFwcGluZyBvZiB0aGlzIHZhbHVlIGluIGNhc2Ugd2UgdmlzaXQgaXQgYWdhaW4sIGluIGNhc2Ugb2YgY2lyY3VsYXIgZGF0YQogICAgbWVtb2l6YXRpb25NYXAuc2V0KGlucHV0VmFsdWUsIHJldHVyblZhbHVlKTsKCiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhpbnB1dFZhbHVlKSkgewogICAgICBpZiAodHlwZW9mIGlucHV0VmFsdWVba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICByZXR1cm5WYWx1ZVtrZXldID0gX2Ryb3BVbmRlZmluZWRLZXlzKGlucHV0VmFsdWVba2V5XSwgbWVtb2l6YXRpb25NYXApOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJldHVyblZhbHVlIDsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KGlucHV0VmFsdWUpKSB7CiAgICAvLyBJZiB0aGlzIG5vZGUgaGFzIGFscmVhZHkgYmVlbiB2aXNpdGVkIGR1ZSB0byBhIGNpcmN1bGFyIHJlZmVyZW5jZSwgcmV0dXJuIHRoZSBhcnJheSBpdCB3YXMgbWFwcGVkIHRvIGluIHRoZSBuZXcgb2JqZWN0CiAgICBjb25zdCBtZW1vVmFsID0gbWVtb2l6YXRpb25NYXAuZ2V0KGlucHV0VmFsdWUpOwogICAgaWYgKG1lbW9WYWwgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gbWVtb1ZhbCA7CiAgICB9CgogICAgY29uc3QgcmV0dXJuVmFsdWUgPSBbXTsKICAgIC8vIFN0b3JlIHRoZSBtYXBwaW5nIG9mIHRoaXMgdmFsdWUgaW4gY2FzZSB3ZSB2aXNpdCBpdCBhZ2FpbiwgaW4gY2FzZSBvZiBjaXJjdWxhciBkYXRhCiAgICBtZW1vaXphdGlvbk1hcC5zZXQoaW5wdXRWYWx1ZSwgcmV0dXJuVmFsdWUpOwoKICAgIGlucHV0VmFsdWUuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICByZXR1cm5WYWx1ZS5wdXNoKF9kcm9wVW5kZWZpbmVkS2V5cyhpdGVtLCBtZW1vaXphdGlvbk1hcCkpOwogICAgfSk7CgogICAgcmV0dXJuIHJldHVyblZhbHVlIDsKICB9CgogIHJldHVybiBpbnB1dFZhbHVlOwp9CgpmdW5jdGlvbiBpc1Bvam8oaW5wdXQpIHsKICBpZiAoIWlzUGxhaW5PYmplY3QoaW5wdXQpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB0cnkgewogICAgY29uc3QgbmFtZSA9IChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpICkuY29uc3RydWN0b3IubmFtZTsKICAgIHJldHVybiAhbmFtZSB8fCBuYW1lID09PSAnT2JqZWN0JzsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKgogKiBEb2VzIHRoaXMgZmlsZW5hbWUgbG9vayBsaWtlIGl0J3MgcGFydCBvZiB0aGUgYXBwIGNvZGU/CiAqLwpmdW5jdGlvbiBmaWxlbmFtZUlzSW5BcHAoZmlsZW5hbWUsIGlzTmF0aXZlID0gZmFsc2UpIHsKICBjb25zdCBpc0ludGVybmFsID0KICAgIGlzTmF0aXZlIHx8CiAgICAoZmlsZW5hbWUgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgaXQncyBhbiBhYnNvbHV0ZSBsaW51eCBwYXRoCiAgICAgICFmaWxlbmFtZS5zdGFydHNXaXRoKCcvJykgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgaXQncyBhbiBhYnNvbHV0ZSB3aW5kb3dzIHBhdGgKICAgICAgIWZpbGVuYW1lLm1hdGNoKC9eW0EtWl06LykgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgdGhlIHBhdGggaXMgc3RhcnRpbmcgd2l0aCBhIGRvdAogICAgICAhZmlsZW5hbWUuc3RhcnRzV2l0aCgnLicpICYmCiAgICAgIC8vIEl0J3Mgbm90IGludGVybmFsIGlmIHRoZSBmcmFtZSBoYXMgYSBwcm90b2NvbC4gSW4gbm9kZSwgdGhpcyBpcyB1c3VhbGx5IHRoZSBjYXNlIGlmIHRoZSBmaWxlIGdvdCBwcmUtcHJvY2Vzc2VkIHdpdGggYSBidW5kbGVyIGxpa2Ugd2VicGFjawogICAgICAhZmlsZW5hbWUubWF0Y2goL15bYS16QS1aXShbYS16QS1aMC05LlwtK10pKjpcL1wvLykpOyAvLyBTY2hlbWEgZnJvbTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM2NDE3ODIKCiAgLy8gaW5fYXBwIGlzIGFsbCB0aGF0J3Mgbm90IGFuIGludGVybmFsIE5vZGUgZnVuY3Rpb24gb3IgYSBtb2R1bGUgd2l0aGluIG5vZGVfbW9kdWxlcwogIC8vIG5vdGUgdGhhdCBpc05hdGl2ZSBhcHBlYXJzIHRvIHJldHVybiB0cnVlIGV2ZW4gZm9yIG5vZGUgY29yZSBsaWJyYXJpZXMKICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9yYXZlbi1ub2RlL2lzc3Vlcy8xNzYKCiAgcmV0dXJuICFpc0ludGVybmFsICYmIGZpbGVuYW1lICE9PSB1bmRlZmluZWQgJiYgIWZpbGVuYW1lLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvJyk7Cn0KCmNvbnN0IFNUQUNLVFJBQ0VfRlJBTUVfTElNSVQgPSA1MDsKY29uc3QgU1RSSVBfRlJBTUVfUkVHRVhQID0gL2NhcHR1cmVNZXNzYWdlfGNhcHR1cmVFeGNlcHRpb24vOwoKLyoqCiAqIFJlbW92ZXMgU2VudHJ5IGZyYW1lcyBmcm9tIHRoZSB0b3AgYW5kIGJvdHRvbSBvZiB0aGUgc3RhY2sgaWYgcHJlc2VudCBhbmQgZW5mb3JjZXMgYSBsaW1pdCBvZiBtYXggbnVtYmVyIG9mIGZyYW1lcy4KICogQXNzdW1lcyBzdGFjayBpbnB1dCBpcyBvcmRlcmVkIGZyb20gdG9wIHRvIGJvdHRvbSBhbmQgcmV0dXJucyB0aGUgcmV2ZXJzZSByZXByZXNlbnRhdGlvbiBzbyBjYWxsIHNpdGUgb2YgdGhlCiAqIGZ1bmN0aW9uIHRoYXQgY2F1c2VkIHRoZSBjcmFzaCBpcyB0aGUgbGFzdCBmcmFtZSBpbiB0aGUgYXJyYXkuCiAqIEBoaWRkZW4KICovCmZ1bmN0aW9uIHN0cmlwU2VudHJ5RnJhbWVzQW5kUmV2ZXJzZShzdGFjaykgewogIGlmICghc3RhY2subGVuZ3RoKSB7CiAgICByZXR1cm4gW107CiAgfQoKICBjb25zdCBsb2NhbFN0YWNrID0gQXJyYXkuZnJvbShzdGFjayk7CgogIC8vIElmIHN0YWNrIHN0YXJ0cyB3aXRoIG9uZSBvZiBvdXIgQVBJIGNhbGxzLCByZW1vdmUgaXQgKHN0YXJ0cywgbWVhbmluZyBpdCdzIHRoZSB0b3Agb2YgdGhlIHN0YWNrIC0gYWthIGxhc3QgY2FsbCkKICBpZiAoL3NlbnRyeVdyYXBwZWQvLnRlc3QobG9jYWxTdGFja1tsb2NhbFN0YWNrLmxlbmd0aCAtIDFdLmZ1bmN0aW9uIHx8ICcnKSkgewogICAgbG9jYWxTdGFjay5wb3AoKTsKICB9CgogIC8vIFJldmVyc2luZyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBwcm9jZWR1cmUgYWxsb3dzIHVzIHRvIGp1c3QgcG9wIHRoZSB2YWx1ZXMgb2ZmIHRoZSBzdGFjawogIGxvY2FsU3RhY2sucmV2ZXJzZSgpOwoKICAvLyBJZiBzdGFjayBlbmRzIHdpdGggb25lIG9mIG91ciBpbnRlcm5hbCBBUEkgY2FsbHMsIHJlbW92ZSBpdCAoZW5kcywgbWVhbmluZyBpdCdzIHRoZSBib3R0b20gb2YgdGhlIHN0YWNrIC0gYWthIHRvcC1tb3N0IGNhbGwpCiAgaWYgKFNUUklQX0ZSQU1FX1JFR0VYUC50ZXN0KGxvY2FsU3RhY2tbbG9jYWxTdGFjay5sZW5ndGggLSAxXS5mdW5jdGlvbiB8fCAnJykpIHsKICAgIGxvY2FsU3RhY2sucG9wKCk7CgogICAgLy8gV2hlbiB1c2luZyBzeW50aGV0aWMgZXZlbnRzLCB3ZSB3aWxsIGhhdmUgYSAyIGxldmVscyBkZWVwIHN0YWNrLCBhcyBgbmV3IEVycm9yKCdTZW50cnkgc3ludGhldGljRXhjZXB0aW9uJylgCiAgICAvLyBpcyBwcm9kdWNlZCB3aXRoaW4gdGhlIGh1YiBpdHNlbGYsIG1ha2luZyBpdDoKICAgIC8vCiAgICAvLyAgIFNlbnRyeS5jYXB0dXJlRXhjZXB0aW9uKCkKICAgIC8vICAgZ2V0Q3VycmVudEh1YigpLmNhcHR1cmVFeGNlcHRpb24oKQogICAgLy8KICAgIC8vIGluc3RlYWQgb2YganVzdCB0aGUgdG9wIGBTZW50cnlgIGNhbGwgaXRzZWxmLgogICAgLy8gVGhpcyBmb3JjZXMgdXMgdG8gcG9zc2libHkgc3RyaXAgYW4gYWRkaXRpb25hbCBmcmFtZSBpbiB0aGUgZXhhY3Qgc2FtZSB3YXMgYXMgYWJvdmUuCiAgICBpZiAoU1RSSVBfRlJBTUVfUkVHRVhQLnRlc3QobG9jYWxTdGFja1tsb2NhbFN0YWNrLmxlbmd0aCAtIDFdLmZ1bmN0aW9uIHx8ICcnKSkgewogICAgICBsb2NhbFN0YWNrLnBvcCgpOwogICAgfQogIH0KCiAgcmV0dXJuIGxvY2FsU3RhY2suc2xpY2UoMCwgU1RBQ0tUUkFDRV9GUkFNRV9MSU1JVCkubWFwKGZyYW1lID0+ICh7CiAgICAuLi5mcmFtZSwKICAgIGZpbGVuYW1lOiBmcmFtZS5maWxlbmFtZSB8fCBsb2NhbFN0YWNrW2xvY2FsU3RhY2subGVuZ3RoIC0gMV0uZmlsZW5hbWUsCiAgICBmdW5jdGlvbjogZnJhbWUuZnVuY3Rpb24gfHwgJz8nLAogIH0pKTsKfQoKY29uc3QgZGVmYXVsdEZ1bmN0aW9uTmFtZSA9ICc8YW5vbnltb3VzPic7CgovKioKICogU2FmZWx5IGV4dHJhY3QgZnVuY3Rpb24gbmFtZSBmcm9tIGl0c2VsZgogKi8KZnVuY3Rpb24gZ2V0RnVuY3Rpb25OYW1lKGZuKSB7CiAgdHJ5IHsKICAgIGlmICghZm4gfHwgdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBkZWZhdWx0RnVuY3Rpb25OYW1lOwogICAgfQogICAgcmV0dXJuIGZuLm5hbWUgfHwgZGVmYXVsdEZ1bmN0aW9uTmFtZTsKICB9IGNhdGNoIChlKSB7CiAgICAvLyBKdXN0IGFjY2Vzc2luZyBjdXN0b20gcHJvcHMgaW4gc29tZSBTZWxlbml1bSBlbnZpcm9ubWVudHMKICAgIC8vIGNhbiBjYXVzZSBhICJQZXJtaXNzaW9uIGRlbmllZCIgZXhjZXB0aW9uIChzZWUgcmF2ZW4tanMjNDk1KS4KICAgIHJldHVybiBkZWZhdWx0RnVuY3Rpb25OYW1lOwogIH0KfQoKLyoqCiAqIFVVSUQ0IGdlbmVyYXRvcgogKgogKiBAcmV0dXJucyBzdHJpbmcgR2VuZXJhdGVkIFVVSUQ0LgogKi8KZnVuY3Rpb24gdXVpZDQoKSB7CiAgY29uc3QgZ2JsID0gR0xPQkFMX09CSiA7CiAgY29uc3QgY3J5cHRvID0gZ2JsLmNyeXB0byB8fCBnYmwubXNDcnlwdG87CgogIGxldCBnZXRSYW5kb21CeXRlID0gKCkgPT4gTWF0aC5yYW5kb20oKSAqIDE2OwogIHRyeSB7CiAgICBpZiAoY3J5cHRvICYmIGNyeXB0by5yYW5kb21VVUlEKSB7CiAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpOwogICAgfQogICAgaWYgKGNyeXB0byAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgICAgIGdldFJhbmRvbUJ5dGUgPSAoKSA9PiB7CiAgICAgICAgLy8gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyBtaWdodCByZXR1cm4gdW5kZWZpbmVkIGluc3RlYWQgb2YgdGhlIHR5cGVkIGFycmF5CiAgICAgICAgLy8gaW4gb2xkIENocm9taXVtIHZlcnNpb25zIChlLmcuIDIzLjAuMTIzNS4wICgxNTE0MjIpKQogICAgICAgIC8vIEhvd2V2ZXIsIGB0eXBlZEFycmF5YCBpcyBzdGlsbCBmaWxsZWQgaW4tcGxhY2UuCiAgICAgICAgLy8gQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3J5cHRvL2dldFJhbmRvbVZhbHVlcyN0eXBlZGFycmF5CiAgICAgICAgY29uc3QgdHlwZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KDEpOwogICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXModHlwZWRBcnJheSk7CiAgICAgICAgcmV0dXJuIHR5cGVkQXJyYXlbMF07CiAgICAgIH07CiAgICB9CiAgfSBjYXRjaCAoXykgewogICAgLy8gc29tZSBydW50aW1lcyBjYW4gY3Jhc2ggaW52b2tpbmcgY3J5cHRvCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy84OTM1CiAgfQoKICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHQvMjExNzUyMyMyMTE3NTIzCiAgLy8gQ29uY2F0ZW5hdGluZyB0aGUgZm9sbG93aW5nIG51bWJlcnMgYXMgc3RyaW5ncyByZXN1bHRzIGluICcxMDAwMDAwMDEwMDA0MDAwODAwMDEwMDAwMDAwMDAwMCcKICByZXR1cm4gKChbMWU3XSApICsgMWUzICsgNGUzICsgOGUzICsgMWUxMSkucmVwbGFjZSgvWzAxOF0vZywgYyA9PgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2UKICAgICgoYyApIF4gKChnZXRSYW5kb21CeXRlKCkgJiAxNSkgPj4gKChjICkgLyA0KSkpLnRvU3RyaW5nKDE2KSwKICApOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIGlucHV0IGlzIGFscmVhZHkgYW4gYXJyYXksIGFuZCBpZiBpdCBpc24ndCwgd3JhcHMgaXQgaW4gb25lLgogKgogKiBAcGFyYW0gbWF5YmVBcnJheSBJbnB1dCB0byB0dXJuIGludG8gYW4gYXJyYXksIGlmIG5lY2Vzc2FyeQogKiBAcmV0dXJucyBUaGUgaW5wdXQsIGlmIGFscmVhZHkgYW4gYXJyYXksIG9yIGFuIGFycmF5IHdpdGggdGhlIGlucHV0IGFzIHRoZSBvbmx5IGVsZW1lbnQsIGlmIG5vdAogKi8KZnVuY3Rpb24gYXJyYXlpZnkobWF5YmVBcnJheSkgewogIHJldHVybiBBcnJheS5pc0FycmF5KG1heWJlQXJyYXkpID8gbWF5YmVBcnJheSA6IFttYXliZUFycmF5XTsKfQoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzICovCi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi8KCi8qKgogKiBIZWxwZXIgdG8gZGVjeWNsZSBqc29uIG9iamVjdHMKICovCmZ1bmN0aW9uIG1lbW9CdWlsZGVyKCkgewogIGNvbnN0IGhhc1dlYWtTZXQgPSB0eXBlb2YgV2Vha1NldCA9PT0gJ2Z1bmN0aW9uJzsKICBjb25zdCBpbm5lciA9IGhhc1dlYWtTZXQgPyBuZXcgV2Vha1NldCgpIDogW107CiAgZnVuY3Rpb24gbWVtb2l6ZShvYmopIHsKICAgIGlmIChoYXNXZWFrU2V0KSB7CiAgICAgIGlmIChpbm5lci5oYXMob2JqKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlubmVyLmFkZChvYmopOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1mb3Itb2YKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5uZXIubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgdmFsdWUgPSBpbm5lcltpXTsKICAgICAgaWYgKHZhbHVlID09PSBvYmopIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgaW5uZXIucHVzaChvYmopOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gdW5tZW1vaXplKG9iaikgewogICAgaWYgKGhhc1dlYWtTZXQpIHsKICAgICAgaW5uZXIuZGVsZXRlKG9iaik7CiAgICB9IGVsc2UgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlubmVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGlubmVyW2ldID09PSBvYmopIHsKICAgICAgICAgIGlubmVyLnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICByZXR1cm4gW21lbW9pemUsIHVubWVtb2l6ZV07Cn0KCi8qKgogKiBSZWN1cnNpdmVseSBub3JtYWxpemVzIHRoZSBnaXZlbiBvYmplY3QuCiAqCiAqIC0gQ3JlYXRlcyBhIGNvcHkgdG8gcHJldmVudCBvcmlnaW5hbCBpbnB1dCBtdXRhdGlvbgogKiAtIFNraXBzIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMKICogLSBXaGVuIHN0cmluZ2lmeWluZywgY2FsbHMgYHRvSlNPTmAgaWYgaW1wbGVtZW50ZWQKICogLSBSZW1vdmVzIGNpcmN1bGFyIHJlZmVyZW5jZXMKICogLSBUcmFuc2xhdGVzIG5vbi1zZXJpYWxpemFibGUgdmFsdWVzIChgdW5kZWZpbmVkYC9gTmFOYC9mdW5jdGlvbnMpIHRvIHNlcmlhbGl6YWJsZSBmb3JtYXQKICogLSBUcmFuc2xhdGVzIGtub3duIGdsb2JhbCBvYmplY3RzL2NsYXNzZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb25zCiAqIC0gVGFrZXMgY2FyZSBvZiBgRXJyb3JgIG9iamVjdCBzZXJpYWxpemF0aW9uCiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgZGVwdGggb2YgZmluYWwgb3V0cHV0CiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgbnVtYmVyIG9mIHByb3BlcnRpZXMvZWxlbWVudHMgaW5jbHVkZWQgaW4gYW55IHNpbmdsZSBvYmplY3QvYXJyYXkKICoKICogQHBhcmFtIGlucHV0IFRoZSBvYmplY3QgdG8gYmUgbm9ybWFsaXplZC4KICogQHBhcmFtIGRlcHRoIFRoZSBtYXggZGVwdGggdG8gd2hpY2ggdG8gbm9ybWFsaXplIHRoZSBvYmplY3QuIChBbnl0aGluZyBkZWVwZXIgc3RyaW5naWZpZWQgd2hvbGUuKQogKiBAcGFyYW0gbWF4UHJvcGVydGllcyBUaGUgbWF4IG51bWJlciBvZiBlbGVtZW50cyBvciBwcm9wZXJ0aWVzIHRvIGJlIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgYXJyYXkgb3IKICogb2JqZWN0IGluIHRoZSBub3JtYWxsaXplZCBvdXRwdXQuCiAqIEByZXR1cm5zIEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBvYmplY3QsIG9yIGAiKipub24tc2VyaWFsaXphYmxlKioiYCBpZiBhbnkgZXJyb3JzIGFyZSB0aHJvd24gZHVyaW5nIG5vcm1hbGl6YXRpb24uCiAqLwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQpmdW5jdGlvbiBub3JtYWxpemUoaW5wdXQsIGRlcHRoID0gMTAwLCBtYXhQcm9wZXJ0aWVzID0gK0luZmluaXR5KSB7CiAgdHJ5IHsKICAgIC8vIHNpbmNlIHdlJ3JlIGF0IHRoZSBvdXRlcm1vc3QgbGV2ZWwsIHdlIGRvbid0IHByb3ZpZGUgYSBrZXkKICAgIHJldHVybiB2aXNpdCgnJywgaW5wdXQsIGRlcHRoLCBtYXhQcm9wZXJ0aWVzKTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJldHVybiB7IEVSUk9SOiBgKipub24tc2VyaWFsaXphYmxlKiogKCR7ZXJyfSlgIH07CiAgfQp9CgovKioKICogVmlzaXRzIGEgbm9kZSB0byBwZXJmb3JtIG5vcm1hbGl6YXRpb24gb24gaXQKICoKICogQHBhcmFtIGtleSBUaGUga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIG5vZGUKICogQHBhcmFtIHZhbHVlIFRoZSBub2RlIHRvIGJlIHZpc2l0ZWQKICogQHBhcmFtIGRlcHRoIE9wdGlvbmFsIG51bWJlciBpbmRpY2F0aW5nIHRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aAogKiBAcGFyYW0gbWF4UHJvcGVydGllcyBPcHRpb25hbCBtYXhpbXVtIG51bWJlciBvZiBwcm9wZXJ0aWVzL2VsZW1lbnRzIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgb2JqZWN0L2FycmF5CiAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIE1lbW8gY2xhc3MgaGFuZGxpbmcgZGVjeWNsaW5nCiAqLwpmdW5jdGlvbiB2aXNpdCgKICBrZXksCiAgdmFsdWUsCiAgZGVwdGggPSArSW5maW5pdHksCiAgbWF4UHJvcGVydGllcyA9ICtJbmZpbml0eSwKICBtZW1vID0gbWVtb0J1aWxkZXIoKSwKKSB7CiAgY29uc3QgW21lbW9pemUsIHVubWVtb2l6ZV0gPSBtZW1vOwoKICAvLyBHZXQgdGhlIHNpbXBsZSBjYXNlcyBvdXQgb2YgdGhlIHdheSBmaXJzdAogIGlmICgKICAgIHZhbHVlID09IG51bGwgfHwgLy8gdGhpcyBtYXRjaGVzIG51bGwgYW5kIHVuZGVmaW5lZCAtPiBlcWVxIG5vdCBlcWVxZXEKICAgIChbJ251bWJlcicsICdib29sZWFuJywgJ3N0cmluZyddLmluY2x1ZGVzKHR5cGVvZiB2YWx1ZSkgJiYgIWlzTmFOJDEodmFsdWUpKQogICkgewogICAgcmV0dXJuIHZhbHVlIDsKICB9CgogIGNvbnN0IHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5VmFsdWUoa2V5LCB2YWx1ZSk7CgogIC8vIEFueXRoaW5nIHdlIGNvdWxkIHBvdGVudGlhbGx5IGRpZyBpbnRvIG1vcmUgKG9iamVjdHMgb3IgYXJyYXlzKSB3aWxsIGhhdmUgY29tZSBiYWNrIGFzIGAiW29iamVjdCBYWFhYXSJgLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSB3aWxsIGhhdmUgYWxyZWFkeSBiZWVuIHNlcmlhbGl6ZWQsIHNvIGlmIHdlIGRvbid0IHNlZSB0aGF0IHBhdHRlcm4sIHdlJ3JlIGRvbmUuCiAgaWYgKCFzdHJpbmdpZmllZC5zdGFydHNXaXRoKCdbb2JqZWN0ICcpKSB7CiAgICByZXR1cm4gc3RyaW5naWZpZWQ7CiAgfQoKICAvLyBGcm9tIGhlcmUgb24sIHdlIGNhbiBhc3NlcnQgdGhhdCBgdmFsdWVgIGlzIGVpdGhlciBhbiBvYmplY3Qgb3IgYW4gYXJyYXkuCgogIC8vIERvIG5vdCBub3JtYWxpemUgb2JqZWN0cyB0aGF0IHdlIGtub3cgaGF2ZSBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC4gQXMgYSBnZW5lcmFsIHJ1bGUsIHRoZQogIC8vICJfX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXyIgcHJvcGVydHkgc2hvdWxkIG9ubHkgYmUgdXNlZCBzcGFyaW5nbHkgYW5kIG9ubHkgc2hvdWxkIG9ubHkgYmUgc2V0IG9uIG9iamVjdHMgdGhhdAogIC8vIGhhdmUgYWxyZWFkeSBiZWVuIG5vcm1hbGl6ZWQuCiAgaWYgKCh2YWx1ZSApWydfX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXyddKSB7CiAgICByZXR1cm4gdmFsdWUgOwogIH0KCiAgLy8gV2UgY2FuIHNldCBgX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fYCBvbiBhbiBvYmplY3QgdG8gZW5zdXJlIHRoYXQgZnJvbSB0aGVyZQogIC8vIFdlIGtlZXAgYSBjZXJ0YWluIGFtb3VudCBvZiBkZXB0aC4KICAvLyBUaGlzIHNob3VsZCBiZSB1c2VkIHNwYXJpbmdseSwgZS5nLiB3ZSB1c2UgaXQgZm9yIHRoZSByZWR1eCBpbnRlZ3JhdGlvbiB0byBlbnN1cmUgd2UgZ2V0IGEgY2VydGFpbiBhbW91bnQgb2Ygc3RhdGUuCiAgY29uc3QgcmVtYWluaW5nRGVwdGggPQogICAgdHlwZW9mICh2YWx1ZSApWydfX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18nXSA9PT0gJ251bWJlcicKICAgICAgPyAoKHZhbHVlIClbJ19fc2VudHJ5X292ZXJyaWRlX25vcm1hbGl6YXRpb25fZGVwdGhfXyddICkKICAgICAgOiBkZXB0aDsKCiAgLy8gV2UncmUgYWxzbyBkb25lIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIG1heCBkZXB0aAogIGlmIChyZW1haW5pbmdEZXB0aCA9PT0gMCkgewogICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IGBzZXJpYWxpemVkYCBpcyBhIHN0cmluZyBvZiB0aGUgZm9ybSBgIltvYmplY3QgWFhYWF0iYC4gQ2xlYW4gaXQgdXAgc28gaXQncyBqdXN0IGAiW1hYWFhdImAuCiAgICByZXR1cm4gc3RyaW5naWZpZWQucmVwbGFjZSgnb2JqZWN0ICcsICcnKTsKICB9CgogIC8vIElmIHdlJ3ZlIGFscmVhZHkgdmlzaXRlZCB0aGlzIGJyYW5jaCwgYmFpbCBvdXQsIGFzIGl0J3MgY2lyY3VsYXIgcmVmZXJlbmNlLiBJZiBub3QsIG5vdGUgdGhhdCB3ZSdyZSBzZWVpbmcgaXQgbm93LgogIGlmIChtZW1vaXplKHZhbHVlKSkgewogICAgcmV0dXJuICdbQ2lyY3VsYXIgfl0nOwogIH0KCiAgLy8gSWYgdGhlIHZhbHVlIGhhcyBhIGB0b0pTT05gIG1ldGhvZCwgd2UgY2FsbCBpdCB0byBleHRyYWN0IG1vcmUgaW5mb3JtYXRpb24KICBjb25zdCB2YWx1ZVdpdGhUb0pTT04gPSB2YWx1ZSA7CiAgaWYgKHZhbHVlV2l0aFRvSlNPTiAmJiB0eXBlb2YgdmFsdWVXaXRoVG9KU09OLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykgewogICAgdHJ5IHsKICAgICAgY29uc3QganNvblZhbHVlID0gdmFsdWVXaXRoVG9KU09OLnRvSlNPTigpOwogICAgICAvLyBXZSBuZWVkIHRvIG5vcm1hbGl6ZSB0aGUgcmV0dXJuIHZhbHVlIG9mIGAudG9KU09OKClgIGluIGNhc2UgaXQgaGFzIGNpcmN1bGFyIHJlZmVyZW5jZXMKICAgICAgcmV0dXJuIHZpc2l0KCcnLCBqc29uVmFsdWUsIHJlbWFpbmluZ0RlcHRoIC0gMSwgbWF4UHJvcGVydGllcywgbWVtbyk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgLy8gcGFzcyAoVGhlIGJ1aWx0LWluIGB0b0pTT05gIGZhaWxlZCwgYnV0IHdlIGNhbiBzdGlsbCB0cnkgdG8gZG8gaXQgb3Vyc2VsdmVzKQogICAgfQogIH0KCiAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IHdlIGVpdGhlciBoYXZlIGFuIG9iamVjdCBvciBhbiBhcnJheSwgd2UgaGF2ZW4ndCBzZWVuIGl0IGJlZm9yZSwgYW5kIHdlJ3JlIGdvaW5nIHRvIHJlY3Vyc2UKICAvLyBiZWNhdXNlIHdlIGhhdmVuJ3QgeWV0IHJlYWNoZWQgdGhlIG1heCBkZXB0aC4gQ3JlYXRlIGFuIGFjY3VtdWxhdG9yIHRvIGhvbGQgdGhlIHJlc3VsdHMgb2YgdmlzaXRpbmcgZWFjaAogIC8vIHByb3BlcnR5L2VudHJ5LCBhbmQga2VlcCB0cmFjayBvZiB0aGUgbnVtYmVyIG9mIGl0ZW1zIHdlIGFkZCB0byBpdC4KICBjb25zdCBub3JtYWxpemVkID0gKEFycmF5LmlzQXJyYXkodmFsdWUpID8gW10gOiB7fSkgOwogIGxldCBudW1BZGRlZCA9IDA7CgogIC8vIEJlZm9yZSB3ZSBiZWdpbiwgY29udmVydGBFcnJvcmAgYW5kYEV2ZW50YCBpbnN0YW5jZXMgaW50byBwbGFpbiBvYmplY3RzLCBzaW5jZSBzb21lIG9mIGVhY2ggb2YgdGhlaXIgcmVsZXZhbnQKICAvLyBwcm9wZXJ0aWVzIGFyZSBub24tZW51bWVyYWJsZSBhbmQgb3RoZXJ3aXNlIHdvdWxkIGdldCBtaXNzZWQuCiAgY29uc3QgdmlzaXRhYmxlID0gY29udmVydFRvUGxhaW5PYmplY3QodmFsdWUgKTsKCiAgZm9yIChjb25zdCB2aXNpdEtleSBpbiB2aXNpdGFibGUpIHsKICAgIC8vIEF2b2lkIGl0ZXJhdGluZyBvdmVyIGZpZWxkcyBpbiB0aGUgcHJvdG90eXBlIGlmIHRoZXkndmUgc29tZWhvdyBiZWVuIGV4cG9zZWQgdG8gZW51bWVyYXRpb24uCiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2aXNpdGFibGUsIHZpc2l0S2V5KSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAobnVtQWRkZWQgPj0gbWF4UHJvcGVydGllcykgewogICAgICBub3JtYWxpemVkW3Zpc2l0S2V5XSA9ICdbTWF4UHJvcGVydGllcyB+XSc7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIFJlY3Vyc2l2ZWx5IHZpc2l0IGFsbCB0aGUgY2hpbGQgbm9kZXMKICAgIGNvbnN0IHZpc2l0VmFsdWUgPSB2aXNpdGFibGVbdmlzaXRLZXldOwogICAgbm9ybWFsaXplZFt2aXNpdEtleV0gPSB2aXNpdCh2aXNpdEtleSwgdmlzaXRWYWx1ZSwgcmVtYWluaW5nRGVwdGggLSAxLCBtYXhQcm9wZXJ0aWVzLCBtZW1vKTsKCiAgICBudW1BZGRlZCsrOwogIH0KCiAgLy8gT25jZSB3ZSd2ZSB2aXNpdGVkIGFsbCB0aGUgYnJhbmNoZXMsIHJlbW92ZSB0aGUgcGFyZW50IGZyb20gbWVtbyBzdG9yYWdlCiAgdW5tZW1vaXplKHZhbHVlKTsKCiAgLy8gUmV0dXJuIGFjY3VtdWxhdGVkIHZhbHVlcwogIHJldHVybiBub3JtYWxpemVkOwp9CgovKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovCi8qKgogKiBTdHJpbmdpZnkgdGhlIGdpdmVuIHZhbHVlLiBIYW5kbGVzIHZhcmlvdXMga25vd24gc3BlY2lhbCB2YWx1ZXMgYW5kIHR5cGVzLgogKgogKiBOb3QgbWVhbnQgdG8gYmUgdXNlZCBvbiBzaW1wbGUgcHJpbWl0aXZlcyB3aGljaCBhbHJlYWR5IGhhdmUgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24sIGFzIGl0IHdpbGwsIGZvciBleGFtcGxlLCB0dXJuCiAqIHRoZSBudW1iZXIgMTIzMSBpbnRvICJbT2JqZWN0IE51bWJlcl0iLCBub3Igb24gYG51bGxgLCBhcyBpdCB3aWxsIHRocm93LgogKgogKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0cmluZ2lmeQogKiBAcmV0dXJucyBBIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB2YWx1ZQogKi8KZnVuY3Rpb24gc3RyaW5naWZ5VmFsdWUoCiAga2V5LAogIC8vIHRoaXMgdHlwZSBpcyBhIHRpbnkgYml0IG9mIGEgY2hlYXQsIHNpbmNlIHRoaXMgZnVuY3Rpb24gZG9lcyBoYW5kbGUgTmFOICh3aGljaCBpcyB0ZWNobmljYWxseSBhIG51bWJlciksIGJ1dCBmb3IKICAvLyBvdXIgaW50ZXJuYWwgdXNlLCBpdCdsbCBkbwogIHZhbHVlLAopIHsKICB0cnkgewogICAgaWYgKGtleSA9PT0gJ2RvbWFpbicgJiYgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAodmFsdWUgKS5fZXZlbnRzKSB7CiAgICAgIHJldHVybiAnW0RvbWFpbl0nOwogICAgfQoKICAgIGlmIChrZXkgPT09ICdkb21haW5FbWl0dGVyJykgewogICAgICByZXR1cm4gJ1tEb21haW5FbWl0dGVyXSc7CiAgICB9CgogICAgLy8gSXQncyBzYWZlIHRvIHVzZSBgZ2xvYmFsYCwgYHdpbmRvd2AsIGFuZCBgZG9jdW1lbnRgIGhlcmUgaW4gdGhpcyBtYW5uZXIsIGFzIHdlIGFyZSBhc3NlcnRpbmcgdXNpbmcgYHR5cGVvZmAgZmlyc3QKICAgIC8vIHdoaWNoIHdvbid0IHRocm93IGlmIHRoZXkgYXJlIG5vdCBwcmVzZW50LgoKICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gZ2xvYmFsKSB7CiAgICAgIHJldHVybiAnW0dsb2JhbF0nOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gd2luZG93KSB7CiAgICAgIHJldHVybiAnW1dpbmRvd10nOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMKICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlID09PSBkb2N1bWVudCkgewogICAgICByZXR1cm4gJ1tEb2N1bWVudF0nOwogICAgfQoKICAgIGlmIChpc1Z1ZVZpZXdNb2RlbCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuICdbVnVlVmlld01vZGVsXSc7CiAgICB9CgogICAgLy8gUmVhY3QncyBTeW50aGV0aWNFdmVudCB0aGluZ3kKICAgIGlmIChpc1N5bnRoZXRpY0V2ZW50KHZhbHVlKSkgewogICAgICByZXR1cm4gJ1tTeW50aGV0aWNFdmVudF0nOwogICAgfQoKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlICE9PSB2YWx1ZSkgewogICAgICByZXR1cm4gJ1tOYU5dJzsKICAgIH0KCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBgW0Z1bmN0aW9uOiAke2dldEZ1bmN0aW9uTmFtZSh2YWx1ZSl9XWA7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N5bWJvbCcpIHsKICAgICAgcmV0dXJuIGBbJHtTdHJpbmcodmFsdWUpfV1gOwogICAgfQoKICAgIC8vIHN0cmluZ2lmaWVkIEJpZ0ludHMgYXJlIGluZGlzdGluZ3Vpc2hhYmxlIGZyb20gcmVndWxhciBudW1iZXJzLCBzbyB3ZSBuZWVkIHRvIGxhYmVsIHRoZW0gdG8gYXZvaWQgY29uZnVzaW9uCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYmlnaW50JykgewogICAgICByZXR1cm4gYFtCaWdJbnQ6ICR7U3RyaW5nKHZhbHVlKX1dYDsKICAgIH0KCiAgICAvLyBOb3cgdGhhdCB3ZSd2ZSBrbm9ja2VkIG91dCBhbGwgdGhlIHNwZWNpYWwgY2FzZXMgYW5kIHRoZSBwcmltaXRpdmVzLCBhbGwgd2UgaGF2ZSBsZWZ0IGFyZSBvYmplY3RzLiBTaW1wbHkgY2FzdGluZwogICAgLy8gdGhlbSB0byBzdHJpbmdzIG1lYW5zIHRoYXQgaW5zdGFuY2VzIG9mIGNsYXNzZXMgd2hpY2ggaGF2ZW4ndCBkZWZpbmVkIHRoZWlyIGB0b1N0cmluZ1RhZ2Agd2lsbCBqdXN0IGNvbWUgb3V0IGFzCiAgICAvLyBgIltvYmplY3QgT2JqZWN0XSJgLiBJZiB3ZSBpbnN0ZWFkIGxvb2sgYXQgdGhlIGNvbnN0cnVjdG9yJ3MgbmFtZSAod2hpY2ggaXMgdGhlIHNhbWUgYXMgdGhlIG5hbWUgb2YgdGhlIGNsYXNzKSwKICAgIC8vIHdlIGNhbiBtYWtlIHN1cmUgdGhhdCBvbmx5IHBsYWluIG9iamVjdHMgY29tZSBvdXQgdGhhdCB3YXkuCiAgICBjb25zdCBvYmpOYW1lID0gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKTsKCiAgICAvLyBIYW5kbGUgSFRNTCBFbGVtZW50cwogICAgaWYgKC9eSFRNTChcdyopRWxlbWVudCQvLnRlc3Qob2JqTmFtZSkpIHsKICAgICAgcmV0dXJuIGBbSFRNTEVsZW1lbnQ6ICR7b2JqTmFtZX1dYDsKICAgIH0KCiAgICByZXR1cm4gYFtvYmplY3QgJHtvYmpOYW1lfV1gOwogIH0gY2F0Y2ggKGVycikgewogICAgcmV0dXJuIGAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHtlcnJ9KWA7CiAgfQp9Ci8qIGVzbGludC1lbmFibGUgY29tcGxleGl0eSAqLwoKZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKSB7CiAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTsKCiAgcmV0dXJuIHByb3RvdHlwZSA/IHByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lIDogJ251bGwgcHJvdG90eXBlJzsKfQoKLyoqCiAqIE5vcm1hbGl6ZXMgVVJMcyBpbiBleGNlcHRpb25zIGFuZCBzdGFja3RyYWNlcyB0byBhIGJhc2UgcGF0aCBzbyBTZW50cnkgY2FuIGZpbmdlcnByaW50CiAqIGFjcm9zcyBwbGF0Zm9ybXMgYW5kIHdvcmtpbmcgZGlyZWN0b3J5LgogKgogKiBAcGFyYW0gdXJsIFRoZSBVUkwgdG8gYmUgbm9ybWFsaXplZC4KICogQHBhcmFtIGJhc2VQYXRoIFRoZSBhcHBsaWNhdGlvbiBiYXNlIHBhdGguCiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIFVSTC4KICovCmZ1bmN0aW9uIG5vcm1hbGl6ZVVybFRvQmFzZSh1cmwsIGJhc2VQYXRoKSB7CiAgY29uc3QgZXNjYXBlZEJhc2UgPSBiYXNlUGF0aAogICAgLy8gQmFja3NsYXNoIHRvIGZvcndhcmQKICAgIC5yZXBsYWNlKC9cXC9nLCAnLycpCiAgICAvLyBFc2NhcGUgUmVnRXhwIHNwZWNpYWwgY2hhcmFjdGVycwogICAgLnJlcGxhY2UoL1t8XFx7fSgpW1xdXiQrKj8uXS9nLCAnXFwkJicpOwoKICBsZXQgbmV3VXJsID0gdXJsOwogIHRyeSB7CiAgICBuZXdVcmwgPSBkZWNvZGVVUkkodXJsKTsKICB9IGNhdGNoIChfT28pIHsKICAgIC8vIFNvbWV0aW1lIHRoaXMgYnJlYWtzCiAgfQogIHJldHVybiAoCiAgICBuZXdVcmwKICAgICAgLnJlcGxhY2UoL1xcL2csICcvJykKICAgICAgLnJlcGxhY2UoL3dlYnBhY2s6XC8/L2csICcnKSAvLyBSZW1vdmUgaW50ZXJtZWRpYXRlIGJhc2UgcGF0aAogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHNlbnRyeS1pbnRlcm5hbC9zZGsvbm8tcmVnZXhwLWNvbnN0cnVjdG9yCiAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoYChmaWxlOi8vKT8vKiR7ZXNjYXBlZEJhc2V9LypgLCAnaWcnKSwgJ2FwcDovLy8nKQogICk7Cn0KCi8vIFNsaWdodGx5IG1vZGlmaWVkIChubyBJRTggc3VwcG9ydCwgRVM2KSBhbmQgdHJhbnNjcmliZWQgdG8gVHlwZVNjcmlwdAoKLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb24KLy8gJ3Jvb3QnIGlzIGp1c3QgYSBzbGFzaCwgb3Igbm90aGluZy4KY29uc3Qgc3BsaXRQYXRoUmUgPSAvXihcUys6XFx8XC8/KShbXHNcU10qPykoKD86XC57MSwyfXxbXi9cXF0rP3wpKFwuW14uL1xcXSp8KSkoPzpbL1xcXSopJC87Ci8qKiBKU0RvYyAqLwpmdW5jdGlvbiBzcGxpdFBhdGgoZmlsZW5hbWUpIHsKICAvLyBUcnVuY2F0ZSBmaWxlcyBuYW1lcyBncmVhdGVyIHRoYW4gMTAyNCBjaGFyYWN0ZXJzIHRvIGF2b2lkIHJlZ2V4IGRvcwogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvcHVsbC84NzM3I2Rpc2N1c3Npb25fcjEyODU3MTkxNzIKICBjb25zdCB0cnVuY2F0ZWQgPSBmaWxlbmFtZS5sZW5ndGggPiAxMDI0ID8gYDx0cnVuY2F0ZWQ+JHtmaWxlbmFtZS5zbGljZSgtMTAyNCl9YCA6IGZpbGVuYW1lOwogIGNvbnN0IHBhcnRzID0gc3BsaXRQYXRoUmUuZXhlYyh0cnVuY2F0ZWQpOwogIHJldHVybiBwYXJ0cyA/IHBhcnRzLnNsaWNlKDEpIDogW107Cn0KCi8qKiBKU0RvYyAqLwpmdW5jdGlvbiBkaXJuYW1lKHBhdGgpIHsKICBjb25zdCByZXN1bHQgPSBzcGxpdFBhdGgocGF0aCk7CiAgY29uc3Qgcm9vdCA9IHJlc3VsdFswXTsKICBsZXQgZGlyID0gcmVzdWx0WzFdOwoKICBpZiAoIXJvb3QgJiYgIWRpcikgewogICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyCiAgICByZXR1cm4gJy4nOwogIH0KCiAgaWYgKGRpcikgewogICAgLy8gSXQgaGFzIGEgZGlybmFtZSwgc3RyaXAgdHJhaWxpbmcgc2xhc2gKICAgIGRpciA9IGRpci5zbGljZSgwLCBkaXIubGVuZ3RoIC0gMSk7CiAgfQoKICByZXR1cm4gcm9vdCArIGRpcjsKfQoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlICovCgovKiogU3luY1Byb21pc2UgaW50ZXJuYWwgc3RhdGVzICovCnZhciBTdGF0ZXM7IChmdW5jdGlvbiAoU3RhdGVzKSB7CiAgLyoqIFBlbmRpbmcgKi8KICBjb25zdCBQRU5ESU5HID0gMDsgU3RhdGVzW1N0YXRlc1siUEVORElORyJdID0gUEVORElOR10gPSAiUEVORElORyI7CiAgLyoqIFJlc29sdmVkIC8gT0sgKi8KICBjb25zdCBSRVNPTFZFRCA9IDE7IFN0YXRlc1tTdGF0ZXNbIlJFU09MVkVEIl0gPSBSRVNPTFZFRF0gPSAiUkVTT0xWRUQiOwogIC8qKiBSZWplY3RlZCAvIEVycm9yICovCiAgY29uc3QgUkVKRUNURUQgPSAyOyBTdGF0ZXNbU3RhdGVzWyJSRUpFQ1RFRCJdID0gUkVKRUNURURdID0gIlJFSkVDVEVEIjsKfSkoU3RhdGVzIHx8IChTdGF0ZXMgPSB7fSkpOwoKLy8gT3ZlcmxvYWRzIHNvIHdlIGNhbiBjYWxsIHJlc29sdmVkU3luY1Byb21pc2Ugd2l0aG91dCBhcmd1bWVudHMgYW5kIGdlbmVyaWMgYXJndW1lbnQKCi8qKgogKiBDcmVhdGVzIGEgcmVzb2x2ZWQgc3luYyBwcm9taXNlLgogKgogKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIHJlc29sdmUgdGhlIHByb21pc2Ugd2l0aAogKiBAcmV0dXJucyB0aGUgcmVzb2x2ZWQgc3luYyBwcm9taXNlCiAqLwpmdW5jdGlvbiByZXNvbHZlZFN5bmNQcm9taXNlKHZhbHVlKSB7CiAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZShyZXNvbHZlID0+IHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0pOwp9CgovKioKICogQ3JlYXRlcyBhIHJlamVjdGVkIHN5bmMgcHJvbWlzZS4KICoKICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0byByZWplY3QgdGhlIHByb21pc2Ugd2l0aAogKiBAcmV0dXJucyB0aGUgcmVqZWN0ZWQgc3luYyBwcm9taXNlCiAqLwpmdW5jdGlvbiByZWplY3RlZFN5bmNQcm9taXNlKHJlYXNvbikgewogIHJldHVybiBuZXcgU3luY1Byb21pc2UoKF8sIHJlamVjdCkgPT4gewogICAgcmVqZWN0KHJlYXNvbik7CiAgfSk7Cn0KCi8qKgogKiBUaGVuYWJsZSBjbGFzcyB0aGF0IGJlaGF2ZXMgbGlrZSBhIFByb21pc2UgYW5kIGZvbGxvd3MgaXQncyBpbnRlcmZhY2UKICogYnV0IGlzIG5vdCBhc3luYyBpbnRlcm5hbGx5CiAqLwpjbGFzcyBTeW5jUHJvbWlzZSB7CgogICBjb25zdHJ1Y3RvcigKICAgIGV4ZWN1dG9yLAogICkge1N5bmNQcm9taXNlLnByb3RvdHlwZS5fX2luaXQuY2FsbCh0aGlzKTtTeW5jUHJvbWlzZS5wcm90b3R5cGUuX19pbml0Mi5jYWxsKHRoaXMpO1N5bmNQcm9taXNlLnByb3RvdHlwZS5fX2luaXQzLmNhbGwodGhpcyk7U3luY1Byb21pc2UucHJvdG90eXBlLl9faW5pdDQuY2FsbCh0aGlzKTsKICAgIHRoaXMuX3N0YXRlID0gU3RhdGVzLlBFTkRJTkc7CiAgICB0aGlzLl9oYW5kbGVycyA9IFtdOwoKICAgIHRyeSB7CiAgICAgIGV4ZWN1dG9yKHRoaXMuX3Jlc29sdmUsIHRoaXMuX3JlamVjdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRoaXMuX3JlamVjdChlKTsKICAgIH0KICB9CgogIC8qKiBKU0RvYyAqLwogICB0aGVuKAogICAgb25mdWxmaWxsZWQsCiAgICBvbnJlamVjdGVkLAogICkgewogICAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIHRoaXMuX2hhbmRsZXJzLnB1c2goWwogICAgICAgIGZhbHNlLAogICAgICAgIHJlc3VsdCA9PiB7CiAgICAgICAgICBpZiAoIW9uZnVsZmlsbGVkKSB7CiAgICAgICAgICAgIC8vIFRPRE86IMKvXF8o44OEKV8vwq8KICAgICAgICAgICAgLy8gVE9ETzogRklYTUUKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShvbmZ1bGZpbGxlZChyZXN1bHQpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVhc29uID0+IHsKICAgICAgICAgIGlmICghb25yZWplY3RlZCkgewogICAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShvbnJlamVjdGVkKHJlYXNvbikpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgXSk7CiAgICAgIHRoaXMuX2V4ZWN1dGVIYW5kbGVycygpOwogICAgfSk7CiAgfQoKICAvKiogSlNEb2MgKi8KICAgY2F0Y2goCiAgICBvbnJlamVjdGVkLAogICkgewogICAgcmV0dXJuIHRoaXMudGhlbih2YWwgPT4gdmFsLCBvbnJlamVjdGVkKTsKICB9CgogIC8qKiBKU0RvYyAqLwogICBmaW5hbGx5KG9uZmluYWxseSkgewogICAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIGxldCB2YWw7CiAgICAgIGxldCBpc1JlamVjdGVkOwoKICAgICAgcmV0dXJuIHRoaXMudGhlbigKICAgICAgICB2YWx1ZSA9PiB7CiAgICAgICAgICBpc1JlamVjdGVkID0gZmFsc2U7CiAgICAgICAgICB2YWwgPSB2YWx1ZTsKICAgICAgICAgIGlmIChvbmZpbmFsbHkpIHsKICAgICAgICAgICAgb25maW5hbGx5KCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZWFzb24gPT4gewogICAgICAgICAgaXNSZWplY3RlZCA9IHRydWU7CiAgICAgICAgICB2YWwgPSByZWFzb247CiAgICAgICAgICBpZiAob25maW5hbGx5KSB7CiAgICAgICAgICAgIG9uZmluYWxseSgpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICkudGhlbigoKSA9PiB7CiAgICAgICAgaWYgKGlzUmVqZWN0ZWQpIHsKICAgICAgICAgIHJlamVjdCh2YWwpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZSh2YWwgKTsKICAgICAgfSk7CiAgICB9KTsKICB9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0KCkge3RoaXMuX3Jlc29sdmUgPSAodmFsdWUpID0+IHsKICAgIHRoaXMuX3NldFJlc3VsdChTdGF0ZXMuUkVTT0xWRUQsIHZhbHVlKTsKICB9O30KCiAgLyoqIEpTRG9jICovCiAgICBfX2luaXQyKCkge3RoaXMuX3JlamVjdCA9IChyZWFzb24pID0+IHsKICAgIHRoaXMuX3NldFJlc3VsdChTdGF0ZXMuUkVKRUNURUQsIHJlYXNvbik7CiAgfTt9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0MygpIHt0aGlzLl9zZXRSZXN1bHQgPSAoc3RhdGUsIHZhbHVlKSA9PiB7CiAgICBpZiAodGhpcy5fc3RhdGUgIT09IFN0YXRlcy5QRU5ESU5HKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoaXNUaGVuYWJsZSh2YWx1ZSkpIHsKICAgICAgdm9pZCAodmFsdWUgKS50aGVuKHRoaXMuX3Jlc29sdmUsIHRoaXMuX3JlamVjdCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlOwogICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTsKCiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMoKTsKICB9O30KCiAgLyoqIEpTRG9jICovCiAgICBfX2luaXQ0KCkge3RoaXMuX2V4ZWN1dGVIYW5kbGVycyA9ICgpID0+IHsKICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gU3RhdGVzLlBFTkRJTkcpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGNhY2hlZEhhbmRsZXJzID0gdGhpcy5faGFuZGxlcnMuc2xpY2UoKTsKICAgIHRoaXMuX2hhbmRsZXJzID0gW107CgogICAgY2FjaGVkSGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHsKICAgICAgaWYgKGhhbmRsZXJbMF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gU3RhdGVzLlJFU09MVkVEKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlcwogICAgICAgIGhhbmRsZXJbMV0odGhpcy5fdmFsdWUgKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBTdGF0ZXMuUkVKRUNURUQpIHsKICAgICAgICBoYW5kbGVyWzJdKHRoaXMuX3ZhbHVlKTsKICAgICAgfQoKICAgICAgaGFuZGxlclswXSA9IHRydWU7CiAgICB9KTsKICB9O30KfQoKLyoqCiAqIENyZWF0ZXMgYW4gbmV3IFByb21pc2VCdWZmZXIgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBsaW1pdAogKiBAcGFyYW0gbGltaXQgbWF4IG51bWJlciBvZiBwcm9taXNlcyB0aGF0IGNhbiBiZSBzdG9yZWQgaW4gdGhlIGJ1ZmZlcgogKi8KZnVuY3Rpb24gbWFrZVByb21pc2VCdWZmZXIobGltaXQpIHsKICBjb25zdCBidWZmZXIgPSBbXTsKCiAgZnVuY3Rpb24gaXNSZWFkeSgpIHsKICAgIHJldHVybiBsaW1pdCA9PT0gdW5kZWZpbmVkIHx8IGJ1ZmZlci5sZW5ndGggPCBsaW1pdDsKICB9CgogIC8qKgogICAqIFJlbW92ZSBhIHByb21pc2UgZnJvbSB0aGUgcXVldWUuCiAgICoKICAgKiBAcGFyYW0gdGFzayBDYW4gYmUgYW55IFByb21pc2VMaWtlPFQ+CiAgICogQHJldHVybnMgUmVtb3ZlZCBwcm9taXNlLgogICAqLwogIGZ1bmN0aW9uIHJlbW92ZSh0YXNrKSB7CiAgICByZXR1cm4gYnVmZmVyLnNwbGljZShidWZmZXIuaW5kZXhPZih0YXNrKSwgMSlbMF07CiAgfQoKICAvKioKICAgKiBBZGQgYSBwcm9taXNlIChyZXByZXNlbnRpbmcgYW4gaW4tZmxpZ2h0IGFjdGlvbikgdG8gdGhlIHF1ZXVlLCBhbmQgc2V0IGl0IHRvIHJlbW92ZSBpdHNlbGYgb24gZnVsZmlsbG1lbnQuCiAgICoKICAgKiBAcGFyYW0gdGFza1Byb2R1Y2VyIEEgZnVuY3Rpb24gcHJvZHVjaW5nIGFueSBQcm9taXNlTGlrZTxUPjsgSW4gcHJldmlvdXMgdmVyc2lvbnMgdGhpcyB1c2VkIHRvIGJlIGB0YXNrOgogICAqICAgICAgICBQcm9taXNlTGlrZTxUPmAsIGJ1dCB1bmRlciB0aGF0IG1vZGVsLCBQcm9taXNlcyB3ZXJlIGluc3RhbnRseSBjcmVhdGVkIG9uIHRoZSBjYWxsLXNpdGUgYW5kIHRoZWlyIGV4ZWN1dG9yCiAgICogICAgICAgIGZ1bmN0aW9ucyB0aGVyZWZvcmUgcmFuIGltbWVkaWF0ZWx5LiBUaHVzLCBldmVuIGlmIHRoZSBidWZmZXIgd2FzIGZ1bGwsIHRoZSBhY3Rpb24gc3RpbGwgaGFwcGVuZWQuIEJ5CiAgICogICAgICAgIHJlcXVpcmluZyB0aGUgcHJvbWlzZSB0byBiZSB3cmFwcGVkIGluIGEgZnVuY3Rpb24sIHdlIGNhbiBkZWZlciBwcm9taXNlIGNyZWF0aW9uIHVudGlsIGFmdGVyIHRoZSBidWZmZXIKICAgKiAgICAgICAgbGltaXQgY2hlY2suCiAgICogQHJldHVybnMgVGhlIG9yaWdpbmFsIHByb21pc2UuCiAgICovCiAgZnVuY3Rpb24gYWRkKHRhc2tQcm9kdWNlcikgewogICAgaWYgKCFpc1JlYWR5KCkpIHsKICAgICAgcmV0dXJuIHJlamVjdGVkU3luY1Byb21pc2UobmV3IFNlbnRyeUVycm9yKCdOb3QgYWRkaW5nIFByb21pc2UgYmVjYXVzZSBidWZmZXIgbGltaXQgd2FzIHJlYWNoZWQuJykpOwogICAgfQoKICAgIC8vIHN0YXJ0IHRoZSB0YXNrIGFuZCBhZGQgaXRzIHByb21pc2UgdG8gdGhlIHF1ZXVlCiAgICBjb25zdCB0YXNrID0gdGFza1Byb2R1Y2VyKCk7CiAgICBpZiAoYnVmZmVyLmluZGV4T2YodGFzaykgPT09IC0xKSB7CiAgICAgIGJ1ZmZlci5wdXNoKHRhc2spOwogICAgfQogICAgdm9pZCB0YXNrCiAgICAgIC50aGVuKCgpID0+IHJlbW92ZSh0YXNrKSkKICAgICAgLy8gVXNlIGB0aGVuKG51bGwsIHJlamVjdGlvbkhhbmRsZXIpYCByYXRoZXIgdGhhbiBgY2F0Y2gocmVqZWN0aW9uSGFuZGxlcilgIHNvIHRoYXQgd2UgY2FuIHVzZSBgUHJvbWlzZUxpa2VgCiAgICAgIC8vIHJhdGhlciB0aGFuIGBQcm9taXNlYC4gYFByb21pc2VMaWtlYCBkb2Vzbid0IGhhdmUgYSBgLmNhdGNoYCBtZXRob2QsIG1ha2luZyBpdHMgcG9seWZpbGwgc21hbGxlci4gKEVTNSBkaWRuJ3QKICAgICAgLy8gaGF2ZSBwcm9taXNlcywgc28gVFMgaGFzIHRvIHBvbHlmaWxsIHdoZW4gZG93bi1jb21waWxpbmcuKQogICAgICAudGhlbihudWxsLCAoKSA9PgogICAgICAgIHJlbW92ZSh0YXNrKS50aGVuKG51bGwsICgpID0+IHsKICAgICAgICAgIC8vIFdlIGhhdmUgdG8gYWRkIGFub3RoZXIgY2F0Y2ggaGVyZSBiZWNhdXNlIGByZW1vdmUoKWAgc3RhcnRzIGEgbmV3IHByb21pc2UgY2hhaW4uCiAgICAgICAgfSksCiAgICAgICk7CiAgICByZXR1cm4gdGFzazsKICB9CgogIC8qKgogICAqIFdhaXQgZm9yIGFsbCBwcm9taXNlcyBpbiB0aGUgcXVldWUgdG8gcmVzb2x2ZSBvciBmb3IgdGltZW91dCB0byBleHBpcmUsIHdoaWNoZXZlciBjb21lcyBmaXJzdC4KICAgKgogICAqIEBwYXJhbSB0aW1lb3V0IFRoZSB0aW1lLCBpbiBtcywgYWZ0ZXIgd2hpY2ggdG8gcmVzb2x2ZSB0byBgZmFsc2VgIGlmIHRoZSBxdWV1ZSBpcyBzdGlsbCBub24tZW1wdHkuIFBhc3NpbmcgYDBgIChvcgogICAqIG5vdCBwYXNzaW5nIGFueXRoaW5nKSB3aWxsIG1ha2UgdGhlIHByb21pc2Ugd2FpdCBhcyBsb25nIGFzIGl0IHRha2VzIGZvciB0aGUgcXVldWUgdG8gZHJhaW4gYmVmb3JlIHJlc29sdmluZyB0bwogICAqIGB0cnVlYC4KICAgKiBAcmV0dXJucyBBIHByb21pc2Ugd2hpY2ggd2lsbCByZXNvbHZlIHRvIGB0cnVlYCBpZiB0aGUgcXVldWUgaXMgYWxyZWFkeSBlbXB0eSBvciBkcmFpbnMgYmVmb3JlIHRoZSB0aW1lb3V0LCBhbmQKICAgKiBgZmFsc2VgIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIGRyYWluKHRpbWVvdXQpIHsKICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBsZXQgY291bnRlciA9IGJ1ZmZlci5sZW5ndGg7CgogICAgICBpZiAoIWNvdW50ZXIpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTsKICAgICAgfQoKICAgICAgLy8gd2FpdCBmb3IgYHRpbWVvdXRgIG1zIGFuZCB0aGVuIHJlc29sdmUgdG8gYGZhbHNlYCAoaWYgbm90IGNhbmNlbGxlZCBmaXJzdCkKICAgICAgY29uc3QgY2FwdHVyZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHRpbWVvdXQgJiYgdGltZW91dCA+IDApIHsKICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwgdGltZW91dCk7CgogICAgICAvLyBpZiBhbGwgcHJvbWlzZXMgcmVzb2x2ZSBpbiB0aW1lLCBjYW5jZWwgdGhlIHRpbWVyIGFuZCByZXNvbHZlIHRvIGB0cnVlYAogICAgICBidWZmZXIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICB2b2lkIHJlc29sdmVkU3luY1Byb21pc2UoaXRlbSkudGhlbigoKSA9PiB7CiAgICAgICAgICBpZiAoIS0tY291bnRlcikgewogICAgICAgICAgICBjbGVhclRpbWVvdXQoY2FwdHVyZWRTZXRUaW1lb3V0KTsKICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9LCByZWplY3QpOwogICAgICB9KTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIHsKICAgICQ6IGJ1ZmZlciwKICAgIGFkZCwKICAgIGRyYWluLAogIH07Cn0KCmNvbnN0IE9ORV9TRUNPTkRfSU5fTVMgPSAxMDAwOwoKLyoqCiAqIEEgcGFydGlhbCBkZWZpbml0aW9uIG9mIHRoZSBbUGVyZm9ybWFuY2UgV2ViIEFQSV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BlcmZvcm1hbmNlfQogKiBmb3IgYWNjZXNzaW5nIGEgaGlnaC1yZXNvbHV0aW9uIG1vbm90b25pYyBjbG9jay4KICovCgovKioKICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIHRoZSBEYXRlIEFQSS4KICoKICogVE9ETyh2OCk6IFJldHVybiB0eXBlIHNob3VsZCBiZSByb3VuZGVkLgogKi8KZnVuY3Rpb24gZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpIHsKICByZXR1cm4gRGF0ZS5ub3coKSAvIE9ORV9TRUNPTkRfSU5fTVM7Cn0KCi8qKgogKiBSZXR1cm5zIGEgd3JhcHBlciBhcm91bmQgdGhlIG5hdGl2ZSBQZXJmb3JtYW5jZSBBUEkgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiwgb3IgdW5kZWZpbmVkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdAogKiBzdXBwb3J0IHRoZSBBUEkuCiAqCiAqIFdyYXBwaW5nIHRoZSBuYXRpdmUgQVBJIHdvcmtzIGFyb3VuZCBkaWZmZXJlbmNlcyBpbiBiZWhhdmlvciBmcm9tIGRpZmZlcmVudCBicm93c2Vycy4KICovCmZ1bmN0aW9uIGNyZWF0ZVVuaXhUaW1lc3RhbXBJblNlY29uZHNGdW5jKCkgewogIGNvbnN0IHsgcGVyZm9ybWFuY2UgfSA9IEdMT0JBTF9PQkogOwogIGlmICghcGVyZm9ybWFuY2UgfHwgIXBlcmZvcm1hbmNlLm5vdykgewogICAgcmV0dXJuIGRhdGVUaW1lc3RhbXBJblNlY29uZHM7CiAgfQoKICAvLyBTb21lIGJyb3dzZXIgYW5kIGVudmlyb25tZW50cyBkb24ndCBoYXZlIGEgdGltZU9yaWdpbiwgc28gd2UgZmFsbGJhY2sgdG8KICAvLyB1c2luZyBEYXRlLm5vdygpIHRvIGNvbXB1dGUgdGhlIHN0YXJ0aW5nIHRpbWUuCiAgY29uc3QgYXBwcm94U3RhcnRpbmdUaW1lT3JpZ2luID0gRGF0ZS5ub3coKSAtIHBlcmZvcm1hbmNlLm5vdygpOwogIGNvbnN0IHRpbWVPcmlnaW4gPSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luID09IHVuZGVmaW5lZCA/IGFwcHJveFN0YXJ0aW5nVGltZU9yaWdpbiA6IHBlcmZvcm1hbmNlLnRpbWVPcmlnaW47CgogIC8vIHBlcmZvcm1hbmNlLm5vdygpIGlzIGEgbW9ub3RvbmljIGNsb2NrLCB3aGljaCBtZWFucyBpdCBzdGFydHMgYXQgMCB3aGVuIHRoZSBwcm9jZXNzIGJlZ2lucy4gVG8gZ2V0IHRoZSBjdXJyZW50CiAgLy8gd2FsbCBjbG9jayB0aW1lIChhY3R1YWwgVU5JWCB0aW1lc3RhbXApLCB3ZSBuZWVkIHRvIGFkZCB0aGUgc3RhcnRpbmcgdGltZSBvcmlnaW4gYW5kIHRoZSBjdXJyZW50IHRpbWUgZWxhcHNlZC4KICAvLwogIC8vIFRPRE86IFRoaXMgZG9lcyBub3QgYWNjb3VudCBmb3IgdGhlIGNhc2Ugd2hlcmUgdGhlIG1vbm90b25pYyBjbG9jayB0aGF0IHBvd2VycyBwZXJmb3JtYW5jZS5ub3coKSBkcmlmdHMgZnJvbSB0aGUKICAvLyB3YWxsIGNsb2NrIHRpbWUsIHdoaWNoIGNhdXNlcyB0aGUgcmV0dXJuZWQgdGltZXN0YW1wIHRvIGJlIGluYWNjdXJhdGUuIFdlIHNob3VsZCBpbnZlc3RpZ2F0ZSBob3cgdG8gZGV0ZWN0IGFuZAogIC8vIGNvcnJlY3QgZm9yIHRoaXMuCiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTkwCiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbWRuL2NvbnRlbnQvaXNzdWVzLzQ3MTMKICAvLyBTZWU6IGh0dHBzOi8vZGV2LnRvL25vYW1yL3doZW4tYS1taWxsaXNlY29uZC1pcy1ub3QtYS1taWxsaXNlY29uZC0zaDYKICByZXR1cm4gKCkgPT4gewogICAgcmV0dXJuICh0aW1lT3JpZ2luICsgcGVyZm9ybWFuY2Uubm93KCkpIC8gT05FX1NFQ09ORF9JTl9NUzsKICB9Owp9CgovKioKICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIGVpdGhlciB0aGUgUGVyZm9ybWFuY2Ugb3IgRGF0ZSBBUElzLCBkZXBlbmRpbmcgb24gdGhlCiAqIGF2YWlsYWJpbGl0eSBvZiB0aGUgUGVyZm9ybWFuY2UgQVBJLgogKgogKiBCVUc6IE5vdGUgdGhhdCBiZWNhdXNlIG9mIGhvdyBicm93c2VycyBpbXBsZW1lbnQgdGhlIFBlcmZvcm1hbmNlIEFQSSwgdGhlIGNsb2NrIG1pZ2h0IHN0b3Agd2hlbiB0aGUgY29tcHV0ZXIgaXMKICogYXNsZWVwLiBUaGlzIGNyZWF0ZXMgYSBza2V3IGJldHdlZW4gYGRhdGVUaW1lc3RhbXBJblNlY29uZHNgIGFuZCBgdGltZXN0YW1wSW5TZWNvbmRzYC4gVGhlCiAqIHNrZXcgY2FuIGdyb3cgdG8gYXJiaXRyYXJ5IGFtb3VudHMgbGlrZSBkYXlzLCB3ZWVrcyBvciBtb250aHMuCiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTkwLgogKi8KY29uc3QgdGltZXN0YW1wSW5TZWNvbmRzID0gY3JlYXRlVW5peFRpbWVzdGFtcEluU2Vjb25kc0Z1bmMoKTsKCi8qKgogKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaC4gVGhpcyB2YWx1ZSBpcyBvbmx5IHVzYWJsZSBpbiBhIGJyb3dzZXIsIGFuZCBvbmx5IHdoZW4gdGhlCiAqIHBlcmZvcm1hbmNlIEFQSSBpcyBhdmFpbGFibGUuCiAqLwooKCkgPT4gewogIC8vIFVuZm9ydHVuYXRlbHkgYnJvd3NlcnMgbWF5IHJlcG9ydCBhbiBpbmFjY3VyYXRlIHRpbWUgb3JpZ2luIGRhdGEsIHRocm91Z2ggZWl0aGVyIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gb3IKICAvLyBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0LCB3aGljaCByZXN1bHRzIGluIHBvb3IgcmVzdWx0cyBpbiBwZXJmb3JtYW5jZSBkYXRhLiBXZSBvbmx5IHRyZWF0IHRpbWUgb3JpZ2luCiAgLy8gZGF0YSBhcyByZWxpYWJsZSBpZiB0aGV5IGFyZSB3aXRoaW4gYSByZWFzb25hYmxlIHRocmVzaG9sZCBvZiB0aGUgY3VycmVudCB0aW1lLgoKICBjb25zdCB7IHBlcmZvcm1hbmNlIH0gPSBHTE9CQUxfT0JKIDsKICBpZiAoIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICBjb25zdCB0aHJlc2hvbGQgPSAzNjAwICogMTAwMDsKICBjb25zdCBwZXJmb3JtYW5jZU5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogIGNvbnN0IGRhdGVOb3cgPSBEYXRlLm5vdygpOwoKICAvLyBpZiB0aW1lT3JpZ2luIGlzbid0IGF2YWlsYWJsZSBzZXQgZGVsdGEgdG8gdGhyZXNob2xkIHNvIGl0IGlzbid0IHVzZWQKICBjb25zdCB0aW1lT3JpZ2luRGVsdGEgPSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luCiAgICA/IE1hdGguYWJzKHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gKyBwZXJmb3JtYW5jZU5vdyAtIGRhdGVOb3cpCiAgICA6IHRocmVzaG9sZDsKICBjb25zdCB0aW1lT3JpZ2luSXNSZWxpYWJsZSA9IHRpbWVPcmlnaW5EZWx0YSA8IHRocmVzaG9sZDsKCiAgLy8gV2hpbGUgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4sIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4KICAvLyBpcyBub3QgYXMgd2lkZWx5IHN1cHBvcnRlZC4gTmFtZWx5LCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIGlzIHVuZGVmaW5lZCBpbiBTYWZhcmkgYXMgb2Ygd3JpdGluZy4KICAvLyBBbHNvIGFzIG9mIHdyaXRpbmcsIHBlcmZvcm1hbmNlLnRpbWluZyBpcyBub3QgYXZhaWxhYmxlIGluIFdlYiBXb3JrZXJzIGluIG1haW5zdHJlYW0gYnJvd3NlcnMsIHNvIGl0IGlzIG5vdCBhbHdheXMKICAvLyBhIHZhbGlkIGZhbGxiYWNrLiBJbiB0aGUgYWJzZW5jZSBvZiBhbiBpbml0aWFsIHRpbWUgcHJvdmlkZWQgYnkgdGhlIGJyb3dzZXIsIGZhbGxiYWNrIHRvIHRoZSBjdXJyZW50IHRpbWUgZnJvbSB0aGUKICAvLyBEYXRlIEFQSS4KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICBjb25zdCBuYXZpZ2F0aW9uU3RhcnQgPSBwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICBjb25zdCBoYXNOYXZpZ2F0aW9uU3RhcnQgPSB0eXBlb2YgbmF2aWdhdGlvblN0YXJ0ID09PSAnbnVtYmVyJzsKICAvLyBpZiBuYXZpZ2F0aW9uU3RhcnQgaXNuJ3QgYXZhaWxhYmxlIHNldCBkZWx0YSB0byB0aHJlc2hvbGQgc28gaXQgaXNuJ3QgdXNlZAogIGNvbnN0IG5hdmlnYXRpb25TdGFydERlbHRhID0gaGFzTmF2aWdhdGlvblN0YXJ0ID8gTWF0aC5hYnMobmF2aWdhdGlvblN0YXJ0ICsgcGVyZm9ybWFuY2VOb3cgLSBkYXRlTm93KSA6IHRocmVzaG9sZDsKICBjb25zdCBuYXZpZ2F0aW9uU3RhcnRJc1JlbGlhYmxlID0gbmF2aWdhdGlvblN0YXJ0RGVsdGEgPCB0aHJlc2hvbGQ7CgogIGlmICh0aW1lT3JpZ2luSXNSZWxpYWJsZSB8fCBuYXZpZ2F0aW9uU3RhcnRJc1JlbGlhYmxlKSB7CiAgICAvLyBVc2UgdGhlIG1vcmUgcmVsaWFibGUgdGltZSBvcmlnaW4KICAgIGlmICh0aW1lT3JpZ2luRGVsdGEgPD0gbmF2aWdhdGlvblN0YXJ0RGVsdGEpIHsKICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW47CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmF2aWdhdGlvblN0YXJ0OwogICAgfQogIH0KICByZXR1cm4gZGF0ZU5vdzsKfSkoKTsKCi8qKgogKiBDcmVhdGVzIGFuIGVudmVsb3BlLgogKiBNYWtlIHN1cmUgdG8gYWx3YXlzIGV4cGxpY2l0bHkgcHJvdmlkZSB0aGUgZ2VuZXJpYyB0byB0aGlzIGZ1bmN0aW9uCiAqIHNvIHRoYXQgdGhlIGVudmVsb3BlIHR5cGVzIHJlc29sdmUgY29ycmVjdGx5LgogKi8KZnVuY3Rpb24gY3JlYXRlRW52ZWxvcGUoaGVhZGVycywgaXRlbXMgPSBbXSkgewogIHJldHVybiBbaGVhZGVycywgaXRlbXNdIDsKfQoKLyoqCiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGxvb3AgdGhyb3VnaCB0aGUgaXRlbXMgYW5kIGl0ZW0gdHlwZXMgb2YgYW4gZW52ZWxvcGUuCiAqIChUaGlzIGZ1bmN0aW9uIHdhcyBtb3N0bHkgY3JlYXRlZCBiZWNhdXNlIHdvcmtpbmcgd2l0aCBlbnZlbG9wZSB0eXBlcyBpcyBwYWluZnVsIGF0IHRoZSBtb21lbnQpCiAqCiAqIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWUsIHRoZSByZXN0IG9mIHRoZSBpdGVtcyB3aWxsIGJlIHNraXBwZWQuCiAqLwpmdW5jdGlvbiBmb3JFYWNoRW52ZWxvcGVJdGVtKAogIGVudmVsb3BlLAogIGNhbGxiYWNrLAopIHsKICBjb25zdCBlbnZlbG9wZUl0ZW1zID0gZW52ZWxvcGVbMV07CgogIGZvciAoY29uc3QgZW52ZWxvcGVJdGVtIG9mIGVudmVsb3BlSXRlbXMpIHsKICAgIGNvbnN0IGVudmVsb3BlSXRlbVR5cGUgPSBlbnZlbG9wZUl0ZW1bMF0udHlwZTsKICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKGVudmVsb3BlSXRlbSwgZW52ZWxvcGVJdGVtVHlwZSk7CgogICAgaWYgKHJlc3VsdCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfQoKLyoqCiAqIEVuY29kZSBhIHN0cmluZyB0byBVVEY4LgogKi8KZnVuY3Rpb24gZW5jb2RlVVRGOChpbnB1dCwgdGV4dEVuY29kZXIpIHsKICBjb25zdCB1dGY4ID0gdGV4dEVuY29kZXIgfHwgbmV3IFRleHRFbmNvZGVyKCk7CiAgcmV0dXJuIHV0ZjguZW5jb2RlKGlucHV0KTsKfQoKLyoqCiAqIFNlcmlhbGl6ZXMgYW4gZW52ZWxvcGUuCiAqLwpmdW5jdGlvbiBzZXJpYWxpemVFbnZlbG9wZShlbnZlbG9wZSwgdGV4dEVuY29kZXIpIHsKICBjb25zdCBbZW52SGVhZGVycywgaXRlbXNdID0gZW52ZWxvcGU7CgogIC8vIEluaXRpYWxseSB3ZSBjb25zdHJ1Y3Qgb3VyIGVudmVsb3BlIGFzIGEgc3RyaW5nIGFuZCBvbmx5IGNvbnZlcnQgdG8gYmluYXJ5IGNodW5rcyBpZiB3ZSBlbmNvdW50ZXIgYmluYXJ5IGRhdGEKICBsZXQgcGFydHMgPSBKU09OLnN0cmluZ2lmeShlbnZIZWFkZXJzKTsKCiAgZnVuY3Rpb24gYXBwZW5kKG5leHQpIHsKICAgIGlmICh0eXBlb2YgcGFydHMgPT09ICdzdHJpbmcnKSB7CiAgICAgIHBhcnRzID0gdHlwZW9mIG5leHQgPT09ICdzdHJpbmcnID8gcGFydHMgKyBuZXh0IDogW2VuY29kZVVURjgocGFydHMsIHRleHRFbmNvZGVyKSwgbmV4dF07CiAgICB9IGVsc2UgewogICAgICBwYXJ0cy5wdXNoKHR5cGVvZiBuZXh0ID09PSAnc3RyaW5nJyA/IGVuY29kZVVURjgobmV4dCwgdGV4dEVuY29kZXIpIDogbmV4dCk7CiAgICB9CiAgfQoKICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHsKICAgIGNvbnN0IFtpdGVtSGVhZGVycywgcGF5bG9hZF0gPSBpdGVtOwoKICAgIGFwcGVuZChgXG4ke0pTT04uc3RyaW5naWZ5KGl0ZW1IZWFkZXJzKX1cbmApOwoKICAgIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycgfHwgcGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHsKICAgICAgYXBwZW5kKHBheWxvYWQpOwogICAgfSBlbHNlIHsKICAgICAgbGV0IHN0cmluZ2lmaWVkUGF5bG9hZDsKICAgICAgdHJ5IHsKICAgICAgICBzdHJpbmdpZmllZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIEluIGNhc2UsIGRlc3BpdGUgYWxsIG91ciBlZmZvcnRzIHRvIGtlZXAgYHBheWxvYWRgIGNpcmN1bGFyLWRlcGVuZGVuY3ktZnJlZSwgYEpTT04uc3RyaW5pZnkoKWAgc3RpbGwKICAgICAgICAvLyBmYWlscywgd2UgdHJ5IGFnYWluIGFmdGVyIG5vcm1hbGl6aW5nIGl0IGFnYWluIHdpdGggaW5maW5pdGUgbm9ybWFsaXphdGlvbiBkZXB0aC4gVGhpcyBvZiBjb3Vyc2UgaGFzIGEKICAgICAgICAvLyBwZXJmb3JtYW5jZSBpbXBhY3QgYnV0IGluIHRoaXMgY2FzZSBhIHBlcmZvcm1hbmNlIGhpdCBpcyBiZXR0ZXIgdGhhbiB0aHJvd2luZy4KICAgICAgICBzdHJpbmdpZmllZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShub3JtYWxpemUocGF5bG9hZCkpOwogICAgICB9CiAgICAgIGFwcGVuZChzdHJpbmdpZmllZFBheWxvYWQpOwogICAgfQogIH0KCiAgcmV0dXJuIHR5cGVvZiBwYXJ0cyA9PT0gJ3N0cmluZycgPyBwYXJ0cyA6IGNvbmNhdEJ1ZmZlcnMocGFydHMpOwp9CgpmdW5jdGlvbiBjb25jYXRCdWZmZXJzKGJ1ZmZlcnMpIHsKICBjb25zdCB0b3RhbExlbmd0aCA9IGJ1ZmZlcnMucmVkdWNlKChhY2MsIGJ1ZikgPT4gYWNjICsgYnVmLmxlbmd0aCwgMCk7CgogIGNvbnN0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTsKICBsZXQgb2Zmc2V0ID0gMDsKICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7CiAgICBtZXJnZWQuc2V0KGJ1ZmZlciwgb2Zmc2V0KTsKICAgIG9mZnNldCArPSBidWZmZXIubGVuZ3RoOwogIH0KCiAgcmV0dXJuIG1lcmdlZDsKfQoKY29uc3QgSVRFTV9UWVBFX1RPX0RBVEFfQ0FURUdPUllfTUFQID0gewogIHNlc3Npb246ICdzZXNzaW9uJywKICBzZXNzaW9uczogJ3Nlc3Npb24nLAogIGF0dGFjaG1lbnQ6ICdhdHRhY2htZW50JywKICB0cmFuc2FjdGlvbjogJ3RyYW5zYWN0aW9uJywKICBldmVudDogJ2Vycm9yJywKICBjbGllbnRfcmVwb3J0OiAnaW50ZXJuYWwnLAogIHVzZXJfcmVwb3J0OiAnZGVmYXVsdCcsCiAgcHJvZmlsZTogJ3Byb2ZpbGUnLAogIHJlcGxheV9ldmVudDogJ3JlcGxheScsCiAgcmVwbGF5X3JlY29yZGluZzogJ3JlcGxheScsCiAgY2hlY2tfaW46ICdtb25pdG9yJywKICBmZWVkYmFjazogJ2ZlZWRiYWNrJywKICBzcGFuOiAnc3BhbicsCiAgc3RhdHNkOiAnbWV0cmljX2J1Y2tldCcsCn07CgovKioKICogTWFwcyB0aGUgdHlwZSBvZiBhbiBlbnZlbG9wZSBpdGVtIHRvIGEgZGF0YSBjYXRlZ29yeS4KICovCmZ1bmN0aW9uIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSB7CiAgcmV0dXJuIElURU1fVFlQRV9UT19EQVRBX0NBVEVHT1JZX01BUFt0eXBlXTsKfQoKLyoqIEV4dHJhY3RzIHRoZSBtaW5pbWFsIFNESyBpbmZvIGZyb20gdGhlIG1ldGFkYXRhIG9yIGFuIGV2ZW50cyAqLwpmdW5jdGlvbiBnZXRTZGtNZXRhZGF0YUZvckVudmVsb3BlSGVhZGVyKG1ldGFkYXRhT3JFdmVudCkgewogIGlmICghbWV0YWRhdGFPckV2ZW50IHx8ICFtZXRhZGF0YU9yRXZlbnQuc2RrKSB7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IHsgbmFtZSwgdmVyc2lvbiB9ID0gbWV0YWRhdGFPckV2ZW50LnNkazsKICByZXR1cm4geyBuYW1lLCB2ZXJzaW9uIH07Cn0KCi8qKgogKiBDcmVhdGVzIGV2ZW50IGVudmVsb3BlIGhlYWRlcnMsIGJhc2VkIG9uIGV2ZW50LCBzZGsgaW5mbyBhbmQgdHVubmVsCiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gd2FzIGV4dHJhY3RlZCBmcm9tIHRoZSBjb3JlIHBhY2thZ2UgdG8gbWFrZSBpdCBhdmFpbGFibGUgaW4gUmVwbGF5CiAqLwpmdW5jdGlvbiBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycygKICBldmVudCwKICBzZGtJbmZvLAogIHR1bm5lbCwKICBkc24sCikgewogIGNvbnN0IGR5bmFtaWNTYW1wbGluZ0NvbnRleHQgPSBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEgJiYgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQ7CiAgcmV0dXJuIHsKICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCAsCiAgICBzZW50X2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAuLi4oc2RrSW5mbyAmJiB7IHNkazogc2RrSW5mbyB9KSwKICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYgeyBkc246IGRzblRvU3RyaW5nKGRzbikgfSksCiAgICAuLi4oZHluYW1pY1NhbXBsaW5nQ29udGV4dCAmJiB7CiAgICAgIHRyYWNlOiBkcm9wVW5kZWZpbmVkS2V5cyh7IC4uLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQgfSksCiAgICB9KSwKICB9Owp9CgovLyBJbnRlbnRpb25hbGx5IGtlZXBpbmcgdGhlIGtleSBicm9hZCwgYXMgd2UgZG9uJ3Qga25vdyBmb3Igc3VyZSB3aGF0IHJhdGUgbGltaXQgaGVhZGVycyBnZXQgcmV0dXJuZWQgZnJvbSBiYWNrZW5kCgpjb25zdCBERUZBVUxUX1JFVFJZX0FGVEVSID0gNjAgKiAxMDAwOyAvLyA2MCBzZWNvbmRzCgovKioKICogRXh0cmFjdHMgUmV0cnktQWZ0ZXIgdmFsdWUgZnJvbSB0aGUgcmVxdWVzdCBoZWFkZXIgb3IgcmV0dXJucyBkZWZhdWx0IHZhbHVlCiAqIEBwYXJhbSBoZWFkZXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mICdSZXRyeS1BZnRlcicgaGVhZGVyCiAqIEBwYXJhbSBub3cgY3VycmVudCB1bml4IHRpbWVzdGFtcAogKgogKi8KZnVuY3Rpb24gcGFyc2VSZXRyeUFmdGVySGVhZGVyKGhlYWRlciwgbm93ID0gRGF0ZS5ub3coKSkgewogIGNvbnN0IGhlYWRlckRlbGF5ID0gcGFyc2VJbnQoYCR7aGVhZGVyfWAsIDEwKTsKICBpZiAoIWlzTmFOKGhlYWRlckRlbGF5KSkgewogICAgcmV0dXJuIGhlYWRlckRlbGF5ICogMTAwMDsKICB9CgogIGNvbnN0IGhlYWRlckRhdGUgPSBEYXRlLnBhcnNlKGAke2hlYWRlcn1gKTsKICBpZiAoIWlzTmFOKGhlYWRlckRhdGUpKSB7CiAgICByZXR1cm4gaGVhZGVyRGF0ZSAtIG5vdzsKICB9CgogIHJldHVybiBERUZBVUxUX1JFVFJZX0FGVEVSOwp9CgovKioKICogR2V0cyB0aGUgdGltZSB0aGF0IHRoZSBnaXZlbiBjYXRlZ29yeSBpcyBkaXNhYmxlZCB1bnRpbCBmb3IgcmF0ZSBsaW1pdGluZy4KICogSW4gY2FzZSBubyBjYXRlZ29yeS1zcGVjaWZpYyBsaW1pdCBpcyBzZXQgYnV0IGEgZ2VuZXJhbCByYXRlIGxpbWl0IGFjcm9zcyBhbGwgY2F0ZWdvcmllcyBpcyBhY3RpdmUsCiAqIHRoYXQgdGltZSBpcyByZXR1cm5lZC4KICoKICogQHJldHVybiB0aGUgdGltZSBpbiBtcyB0aGF0IHRoZSBjYXRlZ29yeSBpcyBkaXNhYmxlZCB1bnRpbCBvciAwIGlmIHRoZXJlJ3Mgbm8gYWN0aXZlIHJhdGUgbGltaXQuCiAqLwpmdW5jdGlvbiBkaXNhYmxlZFVudGlsKGxpbWl0cywgZGF0YUNhdGVnb3J5KSB7CiAgcmV0dXJuIGxpbWl0c1tkYXRhQ2F0ZWdvcnldIHx8IGxpbWl0cy5hbGwgfHwgMDsKfQoKLyoqCiAqIENoZWNrcyBpZiBhIGNhdGVnb3J5IGlzIHJhdGUgbGltaXRlZAogKi8KZnVuY3Rpb24gaXNSYXRlTGltaXRlZChsaW1pdHMsIGRhdGFDYXRlZ29yeSwgbm93ID0gRGF0ZS5ub3coKSkgewogIHJldHVybiBkaXNhYmxlZFVudGlsKGxpbWl0cywgZGF0YUNhdGVnb3J5KSA+IG5vdzsKfQoKLyoqCiAqIFVwZGF0ZSByYXRlbGltaXRzIGZyb20gaW5jb21pbmcgaGVhZGVycy4KICoKICogQHJldHVybiB0aGUgdXBkYXRlZCBSYXRlTGltaXRzIG9iamVjdC4KICovCmZ1bmN0aW9uIHVwZGF0ZVJhdGVMaW1pdHMoCiAgbGltaXRzLAogIHsgc3RhdHVzQ29kZSwgaGVhZGVycyB9LAogIG5vdyA9IERhdGUubm93KCksCikgewogIGNvbnN0IHVwZGF0ZWRSYXRlTGltaXRzID0gewogICAgLi4ubGltaXRzLAogIH07CgogIC8vICJUaGUgbmFtZSBpcyBjYXNlLWluc2Vuc2l0aXZlLiIKICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSGVhZGVycy9nZXQKICBjb25zdCByYXRlTGltaXRIZWFkZXIgPSBoZWFkZXJzICYmIGhlYWRlcnNbJ3gtc2VudHJ5LXJhdGUtbGltaXRzJ107CiAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IGhlYWRlcnMgJiYgaGVhZGVyc1sncmV0cnktYWZ0ZXInXTsKCiAgaWYgKHJhdGVMaW1pdEhlYWRlcikgewogICAgLyoqCiAgICAgKiByYXRlIGxpbWl0IGhlYWRlcnMgYXJlIG9mIHRoZSBmb3JtCiAgICAgKiAgICAgPGhlYWRlcj4sPGhlYWRlcj4sLi4KICAgICAqIHdoZXJlIGVhY2ggPGhlYWRlcj4gaXMgb2YgdGhlIGZvcm0KICAgICAqICAgICA8cmV0cnlfYWZ0ZXI+OiA8Y2F0ZWdvcmllcz46IDxzY29wZT46IDxyZWFzb25fY29kZT46IDxuYW1lc3BhY2VzPgogICAgICogd2hlcmUKICAgICAqICAgICA8cmV0cnlfYWZ0ZXI+IGlzIGEgZGVsYXkgaW4gc2Vjb25kcwogICAgICogICAgIDxjYXRlZ29yaWVzPiBpcyB0aGUgZXZlbnQgdHlwZShzKSAoZXJyb3IsIHRyYW5zYWN0aW9uLCBldGMpIGJlaW5nIHJhdGUgbGltaXRlZCBhbmQgaXMgb2YgdGhlIGZvcm0KICAgICAqICAgICAgICAgPGNhdGVnb3J5Pjs8Y2F0ZWdvcnk+Oy4uLgogICAgICogICAgIDxzY29wZT4gaXMgd2hhdCdzIGJlaW5nIGxpbWl0ZWQgKG9yZywgcHJvamVjdCwgb3Iga2V5KSAtIGlnbm9yZWQgYnkgU0RLCiAgICAgKiAgICAgPHJlYXNvbl9jb2RlPiBpcyBhbiBhcmJpdHJhcnkgc3RyaW5nIGxpa2UgIm9yZ19xdW90YSIgLSBpZ25vcmVkIGJ5IFNESwogICAgICogICAgIDxuYW1lc3BhY2VzPiBTZW1pY29sb24tc2VwYXJhdGVkIGxpc3Qgb2YgbWV0cmljIG5hbWVzcGFjZSBpZGVudGlmaWVycy4gRGVmaW5lcyB3aGljaCBuYW1lc3BhY2Uocykgd2lsbCBiZSBhZmZlY3RlZC4KICAgICAqICAgICAgICAgT25seSBwcmVzZW50IGlmIHJhdGUgbGltaXQgYXBwbGllcyB0byB0aGUgbWV0cmljX2J1Y2tldCBkYXRhIGNhdGVnb3J5LgogICAgICovCiAgICBmb3IgKGNvbnN0IGxpbWl0IG9mIHJhdGVMaW1pdEhlYWRlci50cmltKCkuc3BsaXQoJywnKSkgewogICAgICBjb25zdCBbcmV0cnlBZnRlciwgY2F0ZWdvcmllcywgLCAsIG5hbWVzcGFjZXNdID0gbGltaXQuc3BsaXQoJzonLCA1KTsKICAgICAgY29uc3QgaGVhZGVyRGVsYXkgPSBwYXJzZUludChyZXRyeUFmdGVyLCAxMCk7CiAgICAgIGNvbnN0IGRlbGF5ID0gKCFpc05hTihoZWFkZXJEZWxheSkgPyBoZWFkZXJEZWxheSA6IDYwKSAqIDEwMDA7IC8vIDYwc2VjIGRlZmF1bHQKICAgICAgaWYgKCFjYXRlZ29yaWVzKSB7CiAgICAgICAgdXBkYXRlZFJhdGVMaW1pdHMuYWxsID0gbm93ICsgZGVsYXk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzLnNwbGl0KCc7JykpIHsKICAgICAgICAgIGlmIChjYXRlZ29yeSA9PT0gJ21ldHJpY19idWNrZXQnKSB7CiAgICAgICAgICAgIC8vIG5hbWVzcGFjZXMgd2lsbCBiZSBwcmVzZW50IHdoZW4gY2F0ZWdvcnkgPT09ICdtZXRyaWNfYnVja2V0JwogICAgICAgICAgICBpZiAoIW5hbWVzcGFjZXMgfHwgbmFtZXNwYWNlcy5zcGxpdCgnOycpLmluY2x1ZGVzKCdjdXN0b20nKSkgewogICAgICAgICAgICAgIHVwZGF0ZWRSYXRlTGltaXRzW2NhdGVnb3J5XSA9IG5vdyArIGRlbGF5OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1cGRhdGVkUmF0ZUxpbWl0c1tjYXRlZ29yeV0gPSBub3cgKyBkZWxheTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9IGVsc2UgaWYgKHJldHJ5QWZ0ZXJIZWFkZXIpIHsKICAgIHVwZGF0ZWRSYXRlTGltaXRzLmFsbCA9IG5vdyArIHBhcnNlUmV0cnlBZnRlckhlYWRlcihyZXRyeUFmdGVySGVhZGVyLCBub3cpOwogIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDI5KSB7CiAgICB1cGRhdGVkUmF0ZUxpbWl0cy5hbGwgPSBub3cgKyA2MCAqIDEwMDA7CiAgfQoKICByZXR1cm4gdXBkYXRlZFJhdGVMaW1pdHM7Cn0KCi8qKgogKiBBIG5vZGUuanMgd2F0Y2hkb2cgdGltZXIKICogQHBhcmFtIHBvbGxJbnRlcnZhbCBUaGUgaW50ZXJ2YWwgdGhhdCB3ZSBleHBlY3QgdG8gZ2V0IHBvbGxlZCBhdAogKiBAcGFyYW0gYW5yVGhyZXNob2xkIFRoZSB0aHJlc2hvbGQgZm9yIHdoZW4gd2UgY29uc2lkZXIgQU5SCiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2FsbCBmb3IgQU5SCiAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIGBwb2xsYCBhbmQgYGVuYWJsZWRgIGZ1bmN0aW9ucyB7QGxpbmsgV2F0Y2hkb2dSZXR1cm59CiAqLwpmdW5jdGlvbiB3YXRjaGRvZ1RpbWVyKAogIGNyZWF0ZVRpbWVyLAogIHBvbGxJbnRlcnZhbCwKICBhbnJUaHJlc2hvbGQsCiAgY2FsbGJhY2ssCikgewogIGNvbnN0IHRpbWVyID0gY3JlYXRlVGltZXIoKTsKICBsZXQgdHJpZ2dlcmVkID0gZmFsc2U7CiAgbGV0IGVuYWJsZWQgPSB0cnVlOwoKICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICBjb25zdCBkaWZmTXMgPSB0aW1lci5nZXRUaW1lTXMoKTsKCiAgICBpZiAodHJpZ2dlcmVkID09PSBmYWxzZSAmJiBkaWZmTXMgPiBwb2xsSW50ZXJ2YWwgKyBhbnJUaHJlc2hvbGQpIHsKICAgICAgdHJpZ2dlcmVkID0gdHJ1ZTsKICAgICAgaWYgKGVuYWJsZWQpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9CgogICAgaWYgKGRpZmZNcyA8IHBvbGxJbnRlcnZhbCArIGFuclRocmVzaG9sZCkgewogICAgICB0cmlnZ2VyZWQgPSBmYWxzZTsKICAgIH0KICB9LCAyMCk7CgogIHJldHVybiB7CiAgICBwb2xsOiAoKSA9PiB7CiAgICAgIHRpbWVyLnJlc2V0KCk7CiAgICB9LAogICAgZW5hYmxlZDogKHN0YXRlKSA9PiB7CiAgICAgIGVuYWJsZWQgPSBzdGF0ZTsKICAgIH0sCiAgfTsKfQoKLy8gdHlwZXMgY29waWVkIGZyb20gaW5zcGVjdG9yLmQudHMKCi8qKgogKiBDb252ZXJ0cyBEZWJ1Z2dlci5DYWxsRnJhbWUgdG8gU2VudHJ5IFN0YWNrRnJhbWUKICovCmZ1bmN0aW9uIGNhbGxGcmFtZVRvU3RhY2tGcmFtZSgKICBmcmFtZSwKICB1cmwsCiAgZ2V0TW9kdWxlRnJvbUZpbGVuYW1lLAopIHsKICBjb25zdCBmaWxlbmFtZSA9IHVybCA/IHVybC5yZXBsYWNlKC9eZmlsZTpcL1wvLywgJycpIDogdW5kZWZpbmVkOwoKICAvLyBDYWxsRnJhbWUgcm93L2NvbCBhcmUgMCBiYXNlZCwgd2hlcmVhcyBTdGFja0ZyYW1lIGFyZSAxIGJhc2VkCiAgY29uc3QgY29sbm8gPSBmcmFtZS5sb2NhdGlvbi5jb2x1bW5OdW1iZXIgPyBmcmFtZS5sb2NhdGlvbi5jb2x1bW5OdW1iZXIgKyAxIDogdW5kZWZpbmVkOwogIGNvbnN0IGxpbmVubyA9IGZyYW1lLmxvY2F0aW9uLmxpbmVOdW1iZXIgPyBmcmFtZS5sb2NhdGlvbi5saW5lTnVtYmVyICsgMSA6IHVuZGVmaW5lZDsKCiAgcmV0dXJuIGRyb3BVbmRlZmluZWRLZXlzKHsKICAgIGZpbGVuYW1lLAogICAgbW9kdWxlOiBnZXRNb2R1bGVGcm9tRmlsZW5hbWUoZmlsZW5hbWUpLAogICAgZnVuY3Rpb246IGZyYW1lLmZ1bmN0aW9uTmFtZSB8fCAnPycsCiAgICBjb2xubywKICAgIGxpbmVubywKICAgIGluX2FwcDogZmlsZW5hbWUgPyBmaWxlbmFtZUlzSW5BcHAoZmlsZW5hbWUpIDogdW5kZWZpbmVkLAogIH0pOwp9CgovKioKICogVGhpcyBzZXJ2ZXMgYXMgYSBidWlsZCB0aW1lIGZsYWcgdGhhdCB3aWxsIGJlIHRydWUgYnkgZGVmYXVsdCwgYnV0IGZhbHNlIGluIG5vbi1kZWJ1ZyBidWlsZHMgb3IgaWYgdXNlcnMgcmVwbGFjZSBgX19TRU5UUllfREVCVUdfX2AgaW4gdGhlaXIgZ2VuZXJhdGVkIGNvZGUuCiAqCiAqIEFUVEVOVElPTjogVGhpcyBjb25zdGFudCBtdXN0IG5ldmVyIGNyb3NzIHBhY2thZ2UgYm91bmRhcmllcyAoaS5lLiBiZSBleHBvcnRlZCkgdG8gZ3VhcmFudGVlIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRyZWUgc2hha2luZy4KICovCmNvbnN0IERFQlVHX0JVSUxEID0gKHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fKTsKCmNvbnN0IERFRkFVTFRfRU5WSVJPTk1FTlQgPSAncHJvZHVjdGlvbic7CgovKioKICogUmV0dXJucyB0aGUgZ2xvYmFsIGV2ZW50IHByb2Nlc3NvcnMuCiAqIEBkZXByZWNhdGVkIEdsb2JhbCBldmVudCBwcm9jZXNzb3JzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4KICovCmZ1bmN0aW9uIGdldEdsb2JhbEV2ZW50UHJvY2Vzc29ycygpIHsKICByZXR1cm4gZ2V0R2xvYmFsU2luZ2xldG9uKCdnbG9iYWxFdmVudFByb2Nlc3NvcnMnLCAoKSA9PiBbXSk7Cn0KCi8qKgogKiBQcm9jZXNzIGFuIGFycmF5IG9mIGV2ZW50IHByb2Nlc3NvcnMsIHJldHVybmluZyB0aGUgcHJvY2Vzc2VkIGV2ZW50IChvciBgbnVsbGAgaWYgdGhlIGV2ZW50IHdhcyBkcm9wcGVkKS4KICovCmZ1bmN0aW9uIG5vdGlmeUV2ZW50UHJvY2Vzc29ycygKICBwcm9jZXNzb3JzLAogIGV2ZW50LAogIGhpbnQsCiAgaW5kZXggPSAwLAopIHsKICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGNvbnN0IHByb2Nlc3NvciA9IHByb2Nlc3NvcnNbaW5kZXhdOwogICAgaWYgKGV2ZW50ID09PSBudWxsIHx8IHR5cGVvZiBwcm9jZXNzb3IgIT09ICdmdW5jdGlvbicpIHsKICAgICAgcmVzb2x2ZShldmVudCk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCByZXN1bHQgPSBwcm9jZXNzb3IoeyAuLi5ldmVudCB9LCBoaW50KSA7CgogICAgICBERUJVR19CVUlMRCAmJiBwcm9jZXNzb3IuaWQgJiYgcmVzdWx0ID09PSBudWxsICYmIGxvZ2dlci5sb2coYEV2ZW50IHByb2Nlc3NvciAiJHtwcm9jZXNzb3IuaWR9IiBkcm9wcGVkIGV2ZW50YCk7CgogICAgICBpZiAoaXNUaGVuYWJsZShyZXN1bHQpKSB7CiAgICAgICAgdm9pZCByZXN1bHQKICAgICAgICAgIC50aGVuKGZpbmFsID0+IG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhwcm9jZXNzb3JzLCBmaW5hbCwgaGludCwgaW5kZXggKyAxKS50aGVuKHJlc29sdmUpKQogICAgICAgICAgLnRoZW4obnVsbCwgcmVqZWN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2b2lkIG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhwcm9jZXNzb3JzLCByZXN1bHQsIGhpbnQsIGluZGV4ICsgMSkKICAgICAgICAgIC50aGVuKHJlc29sdmUpCiAgICAgICAgICAudGhlbihudWxsLCByZWplY3QpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCi8qKgogKiBDcmVhdGVzIGEgbmV3IGBTZXNzaW9uYCBvYmplY3QgYnkgc2V0dGluZyBjZXJ0YWluIGRlZmF1bHQgcGFyYW1ldGVycy4gSWYgb3B0aW9uYWwgQHBhcmFtIGNvbnRleHQKICogaXMgcGFzc2VkLCB0aGUgcGFzc2VkIHByb3BlcnRpZXMgYXJlIGFwcGxpZWQgdG8gdGhlIHNlc3Npb24gb2JqZWN0LgogKgogKiBAcGFyYW0gY29udGV4dCAob3B0aW9uYWwpIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBiZSBhcHBsaWVkIHRvIHRoZSByZXR1cm5lZCBzZXNzaW9uIG9iamVjdAogKgogKiBAcmV0dXJucyBhIG5ldyBgU2Vzc2lvbmAgb2JqZWN0CiAqLwpmdW5jdGlvbiBtYWtlU2Vzc2lvbihjb250ZXh0KSB7CiAgLy8gQm90aCB0aW1lc3RhbXAgYW5kIHN0YXJ0ZWQgYXJlIGluIHNlY29uZHMgc2luY2UgdGhlIFVOSVggZXBvY2guCiAgY29uc3Qgc3RhcnRpbmdUaW1lID0gdGltZXN0YW1wSW5TZWNvbmRzKCk7CgogIGNvbnN0IHNlc3Npb24gPSB7CiAgICBzaWQ6IHV1aWQ0KCksCiAgICBpbml0OiB0cnVlLAogICAgdGltZXN0YW1wOiBzdGFydGluZ1RpbWUsCiAgICBzdGFydGVkOiBzdGFydGluZ1RpbWUsCiAgICBkdXJhdGlvbjogMCwKICAgIHN0YXR1czogJ29rJywKICAgIGVycm9yczogMCwKICAgIGlnbm9yZUR1cmF0aW9uOiBmYWxzZSwKICAgIHRvSlNPTjogKCkgPT4gc2Vzc2lvblRvSlNPTihzZXNzaW9uKSwKICB9OwoKICBpZiAoY29udGV4dCkgewogICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCBjb250ZXh0KTsKICB9CgogIHJldHVybiBzZXNzaW9uOwp9CgovKioKICogVXBkYXRlcyBhIHNlc3Npb24gb2JqZWN0IHdpdGggdGhlIHByb3BlcnRpZXMgcGFzc2VkIGluIHRoZSBjb250ZXh0LgogKgogKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBtdXRhdGVzIHRoZSBwYXNzZWQgb2JqZWN0IGFuZCByZXR1cm5zIHZvaWQuCiAqIChIYWQgdG8gZG8gdGhpcyBpbnN0ZWFkIG9mIHJldHVybmluZyBhIG5ldyBhbmQgdXBkYXRlZCBzZXNzaW9uIGJlY2F1c2UgY2xvc2luZyBhbmQgc2VuZGluZyBhIHNlc3Npb24KICogbWFrZXMgYW4gdXBkYXRlIHRvIHRoZSBzZXNzaW9uIGFmdGVyIGl0IHdhcyBwYXNzZWQgdG8gdGhlIHNlbmRpbmcgbG9naWMuCiAqIEBzZWUgQmFzZUNsaWVudC5jYXB0dXJlU2Vzc2lvbiApCiAqCiAqIEBwYXJhbSBzZXNzaW9uIHRoZSBgU2Vzc2lvbmAgdG8gdXBkYXRlCiAqIEBwYXJhbSBjb250ZXh0IHRoZSBgU2Vzc2lvbkNvbnRleHRgIGhvbGRpbmcgdGhlIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgdXBkYXRlZCBpbiBAcGFyYW0gc2Vzc2lvbgogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHkKZnVuY3Rpb24gdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCBjb250ZXh0ID0ge30pIHsKICBpZiAoY29udGV4dC51c2VyKSB7CiAgICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQudXNlci5pcF9hZGRyZXNzKSB7CiAgICAgIHNlc3Npb24uaXBBZGRyZXNzID0gY29udGV4dC51c2VyLmlwX2FkZHJlc3M7CiAgICB9CgogICAgaWYgKCFzZXNzaW9uLmRpZCAmJiAhY29udGV4dC5kaWQpIHsKICAgICAgc2Vzc2lvbi5kaWQgPSBjb250ZXh0LnVzZXIuaWQgfHwgY29udGV4dC51c2VyLmVtYWlsIHx8IGNvbnRleHQudXNlci51c2VybmFtZTsKICAgIH0KICB9CgogIHNlc3Npb24udGltZXN0YW1wID0gY29udGV4dC50aW1lc3RhbXAgfHwgdGltZXN0YW1wSW5TZWNvbmRzKCk7CgogIGlmIChjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbSkgewogICAgc2Vzc2lvbi5hYm5vcm1hbF9tZWNoYW5pc20gPSBjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbTsKICB9CgogIGlmIChjb250ZXh0Lmlnbm9yZUR1cmF0aW9uKSB7CiAgICBzZXNzaW9uLmlnbm9yZUR1cmF0aW9uID0gY29udGV4dC5pZ25vcmVEdXJhdGlvbjsKICB9CiAgaWYgKGNvbnRleHQuc2lkKSB7CiAgICAvLyBHb29kIGVub3VnaCB1dWlkIHZhbGlkYXRpb24uIOKAlCBLYW1pbAogICAgc2Vzc2lvbi5zaWQgPSBjb250ZXh0LnNpZC5sZW5ndGggPT09IDMyID8gY29udGV4dC5zaWQgOiB1dWlkNCgpOwogIH0KICBpZiAoY29udGV4dC5pbml0ICE9PSB1bmRlZmluZWQpIHsKICAgIHNlc3Npb24uaW5pdCA9IGNvbnRleHQuaW5pdDsKICB9CiAgaWYgKCFzZXNzaW9uLmRpZCAmJiBjb250ZXh0LmRpZCkgewogICAgc2Vzc2lvbi5kaWQgPSBgJHtjb250ZXh0LmRpZH1gOwogIH0KICBpZiAodHlwZW9mIGNvbnRleHQuc3RhcnRlZCA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uc3RhcnRlZCA9IGNvbnRleHQuc3RhcnRlZDsKICB9CiAgaWYgKHNlc3Npb24uaWdub3JlRHVyYXRpb24pIHsKICAgIHNlc3Npb24uZHVyYXRpb24gPSB1bmRlZmluZWQ7CiAgfSBlbHNlIGlmICh0eXBlb2YgY29udGV4dC5kdXJhdGlvbiA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uZHVyYXRpb24gPSBjb250ZXh0LmR1cmF0aW9uOwogIH0gZWxzZSB7CiAgICBjb25zdCBkdXJhdGlvbiA9IHNlc3Npb24udGltZXN0YW1wIC0gc2Vzc2lvbi5zdGFydGVkOwogICAgc2Vzc2lvbi5kdXJhdGlvbiA9IGR1cmF0aW9uID49IDAgPyBkdXJhdGlvbiA6IDA7CiAgfQogIGlmIChjb250ZXh0LnJlbGVhc2UpIHsKICAgIHNlc3Npb24ucmVsZWFzZSA9IGNvbnRleHQucmVsZWFzZTsKICB9CiAgaWYgKGNvbnRleHQuZW52aXJvbm1lbnQpIHsKICAgIHNlc3Npb24uZW52aXJvbm1lbnQgPSBjb250ZXh0LmVudmlyb25tZW50OwogIH0KICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQuaXBBZGRyZXNzKSB7CiAgICBzZXNzaW9uLmlwQWRkcmVzcyA9IGNvbnRleHQuaXBBZGRyZXNzOwogIH0KICBpZiAoIXNlc3Npb24udXNlckFnZW50ICYmIGNvbnRleHQudXNlckFnZW50KSB7CiAgICBzZXNzaW9uLnVzZXJBZ2VudCA9IGNvbnRleHQudXNlckFnZW50OwogIH0KICBpZiAodHlwZW9mIGNvbnRleHQuZXJyb3JzID09PSAnbnVtYmVyJykgewogICAgc2Vzc2lvbi5lcnJvcnMgPSBjb250ZXh0LmVycm9yczsKICB9CiAgaWYgKGNvbnRleHQuc3RhdHVzKSB7CiAgICBzZXNzaW9uLnN0YXR1cyA9IGNvbnRleHQuc3RhdHVzOwogIH0KfQoKLyoqCiAqIENsb3NlcyBhIHNlc3Npb24gYnkgc2V0dGluZyBpdHMgc3RhdHVzIGFuZCB1cGRhdGluZyB0aGUgc2Vzc2lvbiBvYmplY3Qgd2l0aCBpdC4KICogSW50ZXJuYWxseSBjYWxscyBgdXBkYXRlU2Vzc2lvbmAgdG8gdXBkYXRlIHRoZSBwYXNzZWQgc2Vzc2lvbiBvYmplY3QuCiAqCiAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIG11dGF0ZXMgdGhlIHBhc3NlZCBzZXNzaW9uIChAc2VlIHVwZGF0ZVNlc3Npb24gZm9yIGV4cGxhbmF0aW9uKS4KICoKICogQHBhcmFtIHNlc3Npb24gdGhlIGBTZXNzaW9uYCBvYmplY3QgdG8gYmUgY2xvc2VkCiAqIEBwYXJhbSBzdGF0dXMgdGhlIGBTZXNzaW9uU3RhdHVzYCB3aXRoIHdoaWNoIHRoZSBzZXNzaW9uIHdhcyBjbG9zZWQuIElmIHlvdSBkb24ndCBwYXNzIGEgc3RhdHVzLAogKiAgICAgICAgICAgICAgIHRoaXMgZnVuY3Rpb24gd2lsbCBrZWVwIHRoZSBwcmV2aW91c2x5IHNldCBzdGF0dXMsIHVubGVzcyBpdCB3YXMgYCdvaydgIGluIHdoaWNoIGNhc2UKICogICAgICAgICAgICAgICBpdCBpcyBjaGFuZ2VkIHRvIGAnZXhpdGVkJ2AuCiAqLwpmdW5jdGlvbiBjbG9zZVNlc3Npb24oc2Vzc2lvbiwgc3RhdHVzKSB7CiAgbGV0IGNvbnRleHQgPSB7fTsKICBpZiAoc3RhdHVzKSB7CiAgICBjb250ZXh0ID0geyBzdGF0dXMgfTsKICB9IGVsc2UgaWYgKHNlc3Npb24uc3RhdHVzID09PSAnb2snKSB7CiAgICBjb250ZXh0ID0geyBzdGF0dXM6ICdleGl0ZWQnIH07CiAgfQoKICB1cGRhdGVTZXNzaW9uKHNlc3Npb24sIGNvbnRleHQpOwp9CgovKioKICogU2VyaWFsaXplcyBhIHBhc3NlZCBzZXNzaW9uIG9iamVjdCB0byBhIEpTT04gb2JqZWN0IHdpdGggYSBzbGlnaHRseSBkaWZmZXJlbnQgc3RydWN0dXJlLgogKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBTZW50cnkgYmFja2VuZCByZXF1aXJlcyBhIHNsaWdodGx5IGRpZmZlcmVudCBzY2hlbWEgb2YgYSBzZXNzaW9uCiAqIHRoYW4gdGhlIG9uZSB0aGUgSlMgU0RLcyB1c2UgaW50ZXJuYWxseS4KICoKICogQHBhcmFtIHNlc3Npb24gdGhlIHNlc3Npb24gdG8gYmUgY29udmVydGVkCiAqCiAqIEByZXR1cm5zIGEgSlNPTiBvYmplY3Qgb2YgdGhlIHBhc3NlZCBzZXNzaW9uCiAqLwpmdW5jdGlvbiBzZXNzaW9uVG9KU09OKHNlc3Npb24pIHsKICByZXR1cm4gZHJvcFVuZGVmaW5lZEtleXMoewogICAgc2lkOiBgJHtzZXNzaW9uLnNpZH1gLAogICAgaW5pdDogc2Vzc2lvbi5pbml0LAogICAgLy8gTWFrZSBzdXJlIHRoYXQgc2VjIGlzIGNvbnZlcnRlZCB0byBtcyBmb3IgZGF0ZSBjb25zdHJ1Y3RvcgogICAgc3RhcnRlZDogbmV3IERhdGUoc2Vzc2lvbi5zdGFydGVkICogMTAwMCkudG9JU09TdHJpbmcoKSwKICAgIHRpbWVzdGFtcDogbmV3IERhdGUoc2Vzc2lvbi50aW1lc3RhbXAgKiAxMDAwKS50b0lTT1N0cmluZygpLAogICAgc3RhdHVzOiBzZXNzaW9uLnN0YXR1cywKICAgIGVycm9yczogc2Vzc2lvbi5lcnJvcnMsCiAgICBkaWQ6IHR5cGVvZiBzZXNzaW9uLmRpZCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHNlc3Npb24uZGlkID09PSAnc3RyaW5nJyA/IGAke3Nlc3Npb24uZGlkfWAgOiB1bmRlZmluZWQsCiAgICBkdXJhdGlvbjogc2Vzc2lvbi5kdXJhdGlvbiwKICAgIGFibm9ybWFsX21lY2hhbmlzbTogc2Vzc2lvbi5hYm5vcm1hbF9tZWNoYW5pc20sCiAgICBhdHRyczogewogICAgICByZWxlYXNlOiBzZXNzaW9uLnJlbGVhc2UsCiAgICAgIGVudmlyb25tZW50OiBzZXNzaW9uLmVudmlyb25tZW50LAogICAgICBpcF9hZGRyZXNzOiBzZXNzaW9uLmlwQWRkcmVzcywKICAgICAgdXNlcl9hZ2VudDogc2Vzc2lvbi51c2VyQWdlbnQsCiAgICB9LAogIH0pOwp9Cgpjb25zdCBUUkFDRV9GTEFHX1NBTVBMRUQgPSAweDE7CgovKioKICogQ29udmVydCBhIHNwYW4gdG8gYSB0cmFjZSBjb250ZXh0LCB3aGljaCBjYW4gYmUgc2VudCBhcyB0aGUgYHRyYWNlYCBjb250ZXh0IGluIGFuIGV2ZW50LgogKi8KZnVuY3Rpb24gc3BhblRvVHJhY2VDb250ZXh0KHNwYW4pIHsKICBjb25zdCB7IHNwYW5JZDogc3Bhbl9pZCwgdHJhY2VJZDogdHJhY2VfaWQgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTsKICBjb25zdCB7IGRhdGEsIG9wLCBwYXJlbnRfc3Bhbl9pZCwgc3RhdHVzLCB0YWdzLCBvcmlnaW4gfSA9IHNwYW5Ub0pTT04oc3Bhbik7CgogIHJldHVybiBkcm9wVW5kZWZpbmVkS2V5cyh7CiAgICBkYXRhLAogICAgb3AsCiAgICBwYXJlbnRfc3Bhbl9pZCwKICAgIHNwYW5faWQsCiAgICBzdGF0dXMsCiAgICB0YWdzLAogICAgdHJhY2VfaWQsCiAgICBvcmlnaW4sCiAgfSk7Cn0KCi8qKgogKiBDb252ZXJ0IGEgc3BhbiB0byBhIEpTT04gcmVwcmVzZW50YXRpb24uCiAqIE5vdGUgdGhhdCBhbGwgZmllbGRzIHJldHVybmVkIGhlcmUgYXJlIG9wdGlvbmFsIGFuZCBuZWVkIHRvIGJlIGd1YXJkZWQgYWdhaW5zdC4KICoKICogTm90ZTogQmVjYXVzZSBvZiB0aGlzLCB3ZSBjdXJyZW50bHkgaGF2ZSBhIGNpcmN1bGFyIHR5cGUgZGVwZW5kZW5jeSAod2hpY2ggd2Ugb3B0ZWQgb3V0IG9mIGluIHBhY2thZ2UuanNvbikuCiAqIFRoaXMgaXMgbm90IGF2b2lkYWJsZSBhcyB3ZSBuZWVkIGBzcGFuVG9KU09OYCBpbiBgc3BhblV0aWxzLnRzYCwgd2hpY2ggaW4gdHVybiBpcyBuZWVkZWQgYnkgYHNwYW4udHNgIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KICogQW5kIGBzcGFuVG9KU09OYCBuZWVkcyB0aGUgU3BhbiBjbGFzcyBmcm9tIGBzcGFuLnRzYCB0byBjaGVjayBoZXJlLgogKiBUT0RPIHY4OiBXaGVuIHdlIHJlbW92ZSB0aGUgZGVwcmVjYXRlZCBzdHVmZiBmcm9tIGBzcGFuLnRzYCwgd2UgY2FuIHJlbW92ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeSBhZ2Fpbi4KICovCmZ1bmN0aW9uIHNwYW5Ub0pTT04oc3BhbikgewogIGlmIChzcGFuSXNTcGFuQ2xhc3Moc3BhbikpIHsKICAgIHJldHVybiBzcGFuLmdldFNwYW5KU09OKCk7CiAgfQoKICAvLyBGYWxsYmFjazogV2UgYWxzbyBjaGVjayBmb3IgYC50b0pTT04oKWAgaGVyZS4uLgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIGlmICh0eXBlb2Ygc3Bhbi50b0pTT04gPT09ICdmdW5jdGlvbicpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgcmV0dXJuIHNwYW4udG9KU09OKCk7CiAgfQoKICByZXR1cm4ge307Cn0KCi8qKgogKiBTYWRseSwgZHVlIHRvIGNpcmN1bGFyIGRlcGVuZGVuY3kgY2hlY2tzIHdlIGNhbm5vdCBhY3R1YWxseSBpbXBvcnQgdGhlIFNwYW4gY2xhc3MgaGVyZSBhbmQgY2hlY2sgZm9yIGluc3RhbmNlb2YuCiAqIDooIFNvIGluc3RlYWQgd2UgYXBwcm94aW1hdGUgdGhpcyBieSBjaGVja2luZyBpZiBpdCBoYXMgdGhlIGBnZXRTcGFuSlNPTmAgbWV0aG9kLgogKi8KZnVuY3Rpb24gc3BhbklzU3BhbkNsYXNzKHNwYW4pIHsKICByZXR1cm4gdHlwZW9mIChzcGFuICkuZ2V0U3BhbkpTT04gPT09ICdmdW5jdGlvbic7Cn0KCi8qKgogKiBSZXR1cm5zIHRydWUgaWYgYSBzcGFuIGlzIHNhbXBsZWQuCiAqIEluIG1vc3QgY2FzZXMsIHlvdSBzaG91bGQganVzdCB1c2UgYHNwYW4uaXNSZWNvcmRpbmcoKWAgaW5zdGVhZC4KICogSG93ZXZlciwgdGhpcyBoYXMgYSBzbGlnaHRseSBkaWZmZXJlbnQgc2VtYW50aWMsIGFzIGl0IGFsc28gcmV0dXJucyBmYWxzZSBpZiB0aGUgc3BhbiBpcyBmaW5pc2hlZC4KICogU28gaW4gdGhlIGNhc2Ugd2hlcmUgdGhpcyBkaXN0aW5jdGlvbiBpcyBpbXBvcnRhbnQsIHVzZSB0aGlzIG1ldGhvZC4KICovCmZ1bmN0aW9uIHNwYW5Jc1NhbXBsZWQoc3BhbikgewogIC8vIFdlIGFsaWduIG91ciB0cmFjZSBmbGFncyB3aXRoIHRoZSBvbmVzIE9wZW5UZWxlbWV0cnkgdXNlCiAgLy8gU28gd2UgYWxzbyBjaGVjayBmb3Igc2FtcGxlZCB0aGUgc2FtZSB3YXkgdGhleSBkby4KICBjb25zdCB7IHRyYWNlRmxhZ3MgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZQogIHJldHVybiBCb29sZWFuKHRyYWNlRmxhZ3MgJiBUUkFDRV9GTEFHX1NBTVBMRUQpOwp9CgovKioKICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIGNsaWVudC4KICovCmZ1bmN0aW9uIGdldENsaWVudCgpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICByZXR1cm4gZ2V0Q3VycmVudEh1YigpLmdldENsaWVudCgpOwp9CgovKioKICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjb3BlLgogKi8KZnVuY3Rpb24gZ2V0Q3VycmVudFNjb3BlKCkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIHJldHVybiBnZXRDdXJyZW50SHViKCkuZ2V0U2NvcGUoKTsKfQoKLyoqCiAqIFJldHVybnMgdGhlIHJvb3Qgc3BhbiBvZiBhIGdpdmVuIHNwYW4uCiAqCiAqIEFzIGxvbmcgYXMgd2UgdXNlIGBUcmFuc2FjdGlvbmBzIGludGVybmFsbHksIHRoZSByZXR1cm5lZCByb290IHNwYW4KICogd2lsbCBiZSBhIGBUcmFuc2FjdGlvbmAgYnV0IGJlIGF3YXJlIHRoYXQgdGhpcyBtaWdodCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS4KICoKICogSWYgdGhlIGdpdmVuIHNwYW4gaGFzIG5vIHJvb3Qgc3BhbiBvciB0cmFuc2FjdGlvbiwgYHVuZGVmaW5lZGAgaXMgcmV0dXJuZWQuCiAqLwpmdW5jdGlvbiBnZXRSb290U3BhbihzcGFuKSB7CiAgLy8gVE9ETyAodjgpOiBSZW1vdmUgdGhpcyBjaGVjayBhbmQganVzdCByZXR1cm4gc3BhbgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIHJldHVybiBzcGFuLnRyYW5zYWN0aW9uOwp9CgovKioKICogQ3JlYXRlcyBhIGR5bmFtaWMgc2FtcGxpbmcgY29udGV4dCBmcm9tIGEgY2xpZW50LgogKgogKiBEaXNwYXRjaGVzIHRoZSBgY3JlYXRlRHNjYCBsaWZlY3ljbGUgaG9vayBhcyBhIHNpZGUgZWZmZWN0LgogKi8KZnVuY3Rpb24gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQoCiAgdHJhY2VfaWQsCiAgY2xpZW50LAogIHNjb3BlLAopIHsKICBjb25zdCBvcHRpb25zID0gY2xpZW50LmdldE9wdGlvbnMoKTsKCiAgY29uc3QgeyBwdWJsaWNLZXk6IHB1YmxpY19rZXkgfSA9IGNsaWVudC5nZXREc24oKSB8fCB7fTsKICAvLyBUT0RPKHY4KTogUmVtb3ZlIHNlZ21lbnQgZnJvbSBVc2VyCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgY29uc3QgeyBzZWdtZW50OiB1c2VyX3NlZ21lbnQgfSA9IChzY29wZSAmJiBzY29wZS5nZXRVc2VyKCkpIHx8IHt9OwoKICBjb25zdCBkc2MgPSBkcm9wVW5kZWZpbmVkS2V5cyh7CiAgICBlbnZpcm9ubWVudDogb3B0aW9ucy5lbnZpcm9ubWVudCB8fCBERUZBVUxUX0VOVklST05NRU5ULAogICAgcmVsZWFzZTogb3B0aW9ucy5yZWxlYXNlLAogICAgdXNlcl9zZWdtZW50LAogICAgcHVibGljX2tleSwKICAgIHRyYWNlX2lkLAogIH0pIDsKCiAgY2xpZW50LmVtaXQgJiYgY2xpZW50LmVtaXQoJ2NyZWF0ZURzYycsIGRzYyk7CgogIHJldHVybiBkc2M7Cn0KCi8qKgogKiBBIFNwYW4gd2l0aCBhIGZyb3plbiBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQuCiAqLwoKLyoqCiAqIENyZWF0ZXMgYSBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQgZnJvbSBhIHNwYW4gKGFuZCBjbGllbnQgYW5kIHNjb3BlKQogKgogKiBAcGFyYW0gc3BhbiB0aGUgc3BhbiBmcm9tIHdoaWNoIGEgZmV3IHZhbHVlcyBsaWtlIHRoZSByb290IHNwYW4gbmFtZSBhbmQgc2FtcGxlIHJhdGUgYXJlIGV4dHJhY3RlZC4KICoKICogQHJldHVybnMgYSBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQKICovCmZ1bmN0aW9uIGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3BhbihzcGFuKSB7CiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7CiAgaWYgKCFjbGllbnQpIHsKICAgIHJldHVybiB7fTsKICB9CgogIC8vIHBhc3NpbmcgZW1pdD1mYWxzZSBoZXJlIHRvIG9ubHkgZW1pdCBsYXRlciBvbmNlIHRoZSBEU0MgaXMgYWN0dWFsbHkgcG9wdWxhdGVkCiAgY29uc3QgZHNjID0gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQoc3BhblRvSlNPTihzcGFuKS50cmFjZV9pZCB8fCAnJywgY2xpZW50LCBnZXRDdXJyZW50U2NvcGUoKSk7CgogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIHY3RnJvemVuRHNjIGFzIGEgVHJhbnNhY3Rpb24gd2lsbCBubyBsb25nZXIgaGF2ZSBfZnJvemVuRHluYW1pY1NhbXBsaW5nQ29udGV4dAogIGNvbnN0IHR4biA9IGdldFJvb3RTcGFuKHNwYW4pIDsKICBpZiAoIXR4bikgewogICAgcmV0dXJuIGRzYzsKICB9CgogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIHY3RnJvemVuRHNjIGFzIGEgVHJhbnNhY3Rpb24gd2lsbCBubyBsb25nZXIgaGF2ZSBfZnJvemVuRHluYW1pY1NhbXBsaW5nQ29udGV4dAogIC8vIEZvciBub3cgd2UgbmVlZCB0byBhdm9pZCBicmVha2luZyB1c2VycyB3aG8gZGlyZWN0bHkgY3JlYXRlZCBhIHR4biB3aXRoIGEgRFNDLCB3aGVyZSB0aGlzIGZpZWxkIGlzIHN0aWxsIHNldC4KICAvLyBAc2VlIFRyYW5zYWN0aW9uIGNsYXNzIGNvbnN0cnVjdG9yCiAgY29uc3QgdjdGcm96ZW5Ec2MgPSB0eG4gJiYgdHhuLl9mcm96ZW5EeW5hbWljU2FtcGxpbmdDb250ZXh0OwogIGlmICh2N0Zyb3plbkRzYykgewogICAgcmV0dXJuIHY3RnJvemVuRHNjOwogIH0KCiAgLy8gVE9ETyAodjgpOiBSZXBsYWNlIHR4bi5tZXRhZGF0YSB3aXRoIHR4bi5hdHRyaWJ1dGVzW10KICAvLyBXZSBjYW4ndCBkbyB0aGlzIHlldCBiZWNhdXNlIGF0dHJpYnV0ZXMgYXJlbid0IGFsd2F5cyBzZXQgeWV0LgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIGNvbnN0IHsgc2FtcGxlUmF0ZTogbWF5YmVTYW1wbGVSYXRlLCBzb3VyY2UgfSA9IHR4bi5tZXRhZGF0YTsKICBpZiAobWF5YmVTYW1wbGVSYXRlICE9IG51bGwpIHsKICAgIGRzYy5zYW1wbGVfcmF0ZSA9IGAke21heWJlU2FtcGxlUmF0ZX1gOwogIH0KCiAgLy8gV2UgZG9uJ3Qgd2FudCB0byBoYXZlIGEgdHJhbnNhY3Rpb24gbmFtZSBpbiB0aGUgRFNDIGlmIHRoZSBzb3VyY2UgaXMgInVybCIgYmVjYXVzZSBVUkxzIG1pZ2h0IGNvbnRhaW4gUElJCiAgY29uc3QganNvblNwYW4gPSBzcGFuVG9KU09OKHR4bik7CgogIC8vIGFmdGVyIEpTT04gY29udmVyc2lvbiwgdHhuLm5hbWUgYmVjb21lcyBqc29uU3Bhbi5kZXNjcmlwdGlvbgogIGlmIChzb3VyY2UgJiYgc291cmNlICE9PSAndXJsJykgewogICAgZHNjLnRyYW5zYWN0aW9uID0ganNvblNwYW4uZGVzY3JpcHRpb247CiAgfQoKICBkc2Muc2FtcGxlZCA9IFN0cmluZyhzcGFuSXNTYW1wbGVkKHR4bikpOwoKICBjbGllbnQuZW1pdCAmJiBjbGllbnQuZW1pdCgnY3JlYXRlRHNjJywgZHNjKTsKCiAgcmV0dXJuIGRzYzsKfQoKLyoqCiAqIEFwcGxpZXMgZGF0YSBmcm9tIHRoZSBzY29wZSB0byB0aGUgZXZlbnQgYW5kIHJ1bnMgYWxsIGV2ZW50IHByb2Nlc3NvcnMgb24gaXQuCiAqLwpmdW5jdGlvbiBhcHBseVNjb3BlRGF0YVRvRXZlbnQoZXZlbnQsIGRhdGEpIHsKICBjb25zdCB7IGZpbmdlcnByaW50LCBzcGFuLCBicmVhZGNydW1icywgc2RrUHJvY2Vzc2luZ01ldGFkYXRhIH0gPSBkYXRhOwoKICAvLyBBcHBseSBnZW5lcmFsIGRhdGEKICBhcHBseURhdGFUb0V2ZW50KGV2ZW50LCBkYXRhKTsKCiAgLy8gV2Ugd2FudCB0byBzZXQgdGhlIHRyYWNlIGNvbnRleHQgZm9yIG5vcm1hbCBldmVudHMgb25seSBpZiB0aGVyZSBpc24ndCBhbHJlYWR5CiAgLy8gYSB0cmFjZSBjb250ZXh0IG9uIHRoZSBldmVudC4gVGhlcmUgaXMgYSBwcm9kdWN0IGZlYXR1cmUgaW4gcGxhY2Ugd2hlcmUgd2UgbGluawogIC8vIGVycm9ycyB3aXRoIHRyYW5zYWN0aW9uIGFuZCBpdCByZWxpZXMgb24gdGhhdC4KICBpZiAoc3BhbikgewogICAgYXBwbHlTcGFuVG9FdmVudChldmVudCwgc3Bhbik7CiAgfQoKICBhcHBseUZpbmdlcnByaW50VG9FdmVudChldmVudCwgZmluZ2VycHJpbnQpOwogIGFwcGx5QnJlYWRjcnVtYnNUb0V2ZW50KGV2ZW50LCBicmVhZGNydW1icyk7CiAgYXBwbHlTZGtNZXRhZGF0YVRvRXZlbnQoZXZlbnQsIHNka1Byb2Nlc3NpbmdNZXRhZGF0YSk7Cn0KCmZ1bmN0aW9uIGFwcGx5RGF0YVRvRXZlbnQoZXZlbnQsIGRhdGEpIHsKICBjb25zdCB7CiAgICBleHRyYSwKICAgIHRhZ3MsCiAgICB1c2VyLAogICAgY29udGV4dHMsCiAgICBsZXZlbCwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdHJhbnNhY3Rpb25OYW1lLAogIH0gPSBkYXRhOwoKICBjb25zdCBjbGVhbmVkRXh0cmEgPSBkcm9wVW5kZWZpbmVkS2V5cyhleHRyYSk7CiAgaWYgKGNsZWFuZWRFeHRyYSAmJiBPYmplY3Qua2V5cyhjbGVhbmVkRXh0cmEpLmxlbmd0aCkgewogICAgZXZlbnQuZXh0cmEgPSB7IC4uLmNsZWFuZWRFeHRyYSwgLi4uZXZlbnQuZXh0cmEgfTsKICB9CgogIGNvbnN0IGNsZWFuZWRUYWdzID0gZHJvcFVuZGVmaW5lZEtleXModGFncyk7CiAgaWYgKGNsZWFuZWRUYWdzICYmIE9iamVjdC5rZXlzKGNsZWFuZWRUYWdzKS5sZW5ndGgpIHsKICAgIGV2ZW50LnRhZ3MgPSB7IC4uLmNsZWFuZWRUYWdzLCAuLi5ldmVudC50YWdzIH07CiAgfQoKICBjb25zdCBjbGVhbmVkVXNlciA9IGRyb3BVbmRlZmluZWRLZXlzKHVzZXIpOwogIGlmIChjbGVhbmVkVXNlciAmJiBPYmplY3Qua2V5cyhjbGVhbmVkVXNlcikubGVuZ3RoKSB7CiAgICBldmVudC51c2VyID0geyAuLi5jbGVhbmVkVXNlciwgLi4uZXZlbnQudXNlciB9OwogIH0KCiAgY29uc3QgY2xlYW5lZENvbnRleHRzID0gZHJvcFVuZGVmaW5lZEtleXMoY29udGV4dHMpOwogIGlmIChjbGVhbmVkQ29udGV4dHMgJiYgT2JqZWN0LmtleXMoY2xlYW5lZENvbnRleHRzKS5sZW5ndGgpIHsKICAgIGV2ZW50LmNvbnRleHRzID0geyAuLi5jbGVhbmVkQ29udGV4dHMsIC4uLmV2ZW50LmNvbnRleHRzIH07CiAgfQoKICBpZiAobGV2ZWwpIHsKICAgIGV2ZW50LmxldmVsID0gbGV2ZWw7CiAgfQoKICBpZiAodHJhbnNhY3Rpb25OYW1lKSB7CiAgICBldmVudC50cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uTmFtZTsKICB9Cn0KCmZ1bmN0aW9uIGFwcGx5QnJlYWRjcnVtYnNUb0V2ZW50KGV2ZW50LCBicmVhZGNydW1icykgewogIGNvbnN0IG1lcmdlZEJyZWFkY3J1bWJzID0gWy4uLihldmVudC5icmVhZGNydW1icyB8fCBbXSksIC4uLmJyZWFkY3J1bWJzXTsKICBldmVudC5icmVhZGNydW1icyA9IG1lcmdlZEJyZWFkY3J1bWJzLmxlbmd0aCA/IG1lcmdlZEJyZWFkY3J1bWJzIDogdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBhcHBseVNka01ldGFkYXRhVG9FdmVudChldmVudCwgc2RrUHJvY2Vzc2luZ01ldGFkYXRhKSB7CiAgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0gewogICAgLi4uZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLAogICAgLi4uc2RrUHJvY2Vzc2luZ01ldGFkYXRhLAogIH07Cn0KCmZ1bmN0aW9uIGFwcGx5U3BhblRvRXZlbnQoZXZlbnQsIHNwYW4pIHsKICBldmVudC5jb250ZXh0cyA9IHsgdHJhY2U6IHNwYW5Ub1RyYWNlQ29udGV4dChzcGFuKSwgLi4uZXZlbnQuY29udGV4dHMgfTsKICBjb25zdCByb290U3BhbiA9IGdldFJvb3RTcGFuKHNwYW4pOwogIGlmIChyb290U3BhbikgewogICAgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0gewogICAgICBkeW5hbWljU2FtcGxpbmdDb250ZXh0OiBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbiksCiAgICAgIC4uLmV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YSwKICAgIH07CiAgICBjb25zdCB0cmFuc2FjdGlvbk5hbWUgPSBzcGFuVG9KU09OKHJvb3RTcGFuKS5kZXNjcmlwdGlvbjsKICAgIGlmICh0cmFuc2FjdGlvbk5hbWUpIHsKICAgICAgZXZlbnQudGFncyA9IHsgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uTmFtZSwgLi4uZXZlbnQudGFncyB9OwogICAgfQogIH0KfQoKLyoqCiAqIEFwcGxpZXMgZmluZ2VycHJpbnQgZnJvbSB0aGUgc2NvcGUgdG8gdGhlIGV2ZW50IGlmIHRoZXJlJ3Mgb25lLAogKiB1c2VzIG1lc3NhZ2UgaWYgdGhlcmUncyBvbmUgaW5zdGVhZCBvciBnZXQgcmlkIG9mIGVtcHR5IGZpbmdlcnByaW50CiAqLwpmdW5jdGlvbiBhcHBseUZpbmdlcnByaW50VG9FdmVudChldmVudCwgZmluZ2VycHJpbnQpIHsKICAvLyBNYWtlIHN1cmUgaXQncyBhbiBhcnJheSBmaXJzdCBhbmQgd2UgYWN0dWFsbHkgaGF2ZSBzb21ldGhpbmcgaW4gcGxhY2UKICBldmVudC5maW5nZXJwcmludCA9IGV2ZW50LmZpbmdlcnByaW50ID8gYXJyYXlpZnkoZXZlbnQuZmluZ2VycHJpbnQpIDogW107CgogIC8vIElmIHdlIGhhdmUgc29tZXRoaW5nIG9uIHRoZSBzY29wZSwgdGhlbiBtZXJnZSBpdCB3aXRoIGV2ZW50CiAgaWYgKGZpbmdlcnByaW50KSB7CiAgICBldmVudC5maW5nZXJwcmludCA9IGV2ZW50LmZpbmdlcnByaW50LmNvbmNhdChmaW5nZXJwcmludCk7CiAgfQoKICAvLyBJZiB3ZSBoYXZlIG5vIGRhdGEgYXQgYWxsLCByZW1vdmUgZW1wdHkgYXJyYXkgZGVmYXVsdAogIGlmIChldmVudC5maW5nZXJwcmludCAmJiAhZXZlbnQuZmluZ2VycHJpbnQubGVuZ3RoKSB7CiAgICBkZWxldGUgZXZlbnQuZmluZ2VycHJpbnQ7CiAgfQp9CgovKioKICogRGVmYXVsdCB2YWx1ZSBmb3IgbWF4aW11bSBudW1iZXIgb2YgYnJlYWRjcnVtYnMgYWRkZWQgdG8gYW4gZXZlbnQuCiAqLwpjb25zdCBERUZBVUxUX01BWF9CUkVBRENSVU1CUyA9IDEwMDsKCi8qKgogKiBIb2xkcyBhZGRpdGlvbmFsIGV2ZW50IGluZm9ybWF0aW9uLiB7QGxpbmsgU2NvcGUuYXBwbHlUb0V2ZW50fSB3aWxsIGJlCiAqIGNhbGxlZCBieSB0aGUgY2xpZW50IGJlZm9yZSBhbiBldmVudCB3aWxsIGJlIHNlbnQuCiAqLwpjbGFzcyBTY29wZSAgewogIC8qKiBGbGFnIGlmIG5vdGlmeWluZyBpcyBoYXBwZW5pbmcuICovCgogIC8qKiBDYWxsYmFjayBmb3IgY2xpZW50IHRvIHJlY2VpdmUgc2NvcGUgY2hhbmdlcy4gKi8KCiAgLyoqIENhbGxiYWNrIGxpc3QgdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlciB7QGxpbmsgYXBwbHlUb0V2ZW50fS4gKi8KCiAgLyoqIEFycmF5IG9mIGJyZWFkY3J1bWJzLiAqLwoKICAvKiogVXNlciAqLwoKICAvKiogVGFncyAqLwoKICAvKiogRXh0cmEgKi8KCiAgLyoqIENvbnRleHRzICovCgogIC8qKiBBdHRhY2htZW50cyAqLwoKICAvKiogUHJvcGFnYXRpb24gQ29udGV4dCBmb3IgZGlzdHJpYnV0ZWQgdHJhY2luZyAqLwoKICAvKioKICAgKiBBIHBsYWNlIHRvIHN0YXNoIGRhdGEgd2hpY2ggaXMgbmVlZGVkIGF0IHNvbWUgcG9pbnQgaW4gdGhlIFNESydzIGV2ZW50IHByb2Nlc3NpbmcgcGlwZWxpbmUgYnV0IHdoaWNoIHNob3VsZG4ndCBnZXQKICAgKiBzZW50IHRvIFNlbnRyeQogICAqLwoKICAvKiogRmluZ2VycHJpbnQgKi8KCiAgLyoqIFNldmVyaXR5ICovCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCgogIC8qKgogICAqIFRyYW5zYWN0aW9uIE5hbWUKICAgKi8KCiAgLyoqIFNwYW4gKi8KCiAgLyoqIFNlc3Npb24gKi8KCiAgLyoqIFJlcXVlc3QgTW9kZSBTZXNzaW9uIFN0YXR1cyAqLwoKICAvKiogVGhlIGNsaWVudCBvbiB0aGlzIHNjb3BlICovCgogIC8vIE5PVEU6IEFueSBmaWVsZCB3aGljaCBnZXRzIGFkZGVkIGhlcmUgc2hvdWxkIGdldCBhZGRlZCBub3Qgb25seSB0byB0aGUgY29uc3RydWN0b3IgYnV0IGFsc28gdG8gdGhlIGBjbG9uZWAgbWV0aG9kLgoKICAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnMgPSBmYWxzZTsKICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzID0gW107CiAgICB0aGlzLl9ldmVudFByb2Nlc3NvcnMgPSBbXTsKICAgIHRoaXMuX2JyZWFkY3J1bWJzID0gW107CiAgICB0aGlzLl9hdHRhY2htZW50cyA9IFtdOwogICAgdGhpcy5fdXNlciA9IHt9OwogICAgdGhpcy5fdGFncyA9IHt9OwogICAgdGhpcy5fZXh0cmEgPSB7fTsKICAgIHRoaXMuX2NvbnRleHRzID0ge307CiAgICB0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEgPSB7fTsKICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IGdlbmVyYXRlUHJvcGFnYXRpb25Db250ZXh0KCk7CiAgfQoKICAvKioKICAgKiBJbmhlcml0IHZhbHVlcyBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBzY29wZS5jbG9uZSgpYCBhbmQgYG5ldyBTY29wZSgpYCBpbnN0ZWFkLgogICAqLwogICBzdGF0aWMgY2xvbmUoc2NvcGUpIHsKICAgIHJldHVybiBzY29wZSA/IHNjb3BlLmNsb25lKCkgOiBuZXcgU2NvcGUoKTsKICB9CgogIC8qKgogICAqIENsb25lIHRoaXMgc2NvcGUgaW5zdGFuY2UuCiAgICovCiAgIGNsb25lKCkgewogICAgY29uc3QgbmV3U2NvcGUgPSBuZXcgU2NvcGUoKTsKICAgIG5ld1Njb3BlLl9icmVhZGNydW1icyA9IFsuLi50aGlzLl9icmVhZGNydW1ic107CiAgICBuZXdTY29wZS5fdGFncyA9IHsgLi4udGhpcy5fdGFncyB9OwogICAgbmV3U2NvcGUuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSB9OwogICAgbmV3U2NvcGUuX2NvbnRleHRzID0geyAuLi50aGlzLl9jb250ZXh0cyB9OwogICAgbmV3U2NvcGUuX3VzZXIgPSB0aGlzLl91c2VyOwogICAgbmV3U2NvcGUuX2xldmVsID0gdGhpcy5fbGV2ZWw7CiAgICBuZXdTY29wZS5fc3BhbiA9IHRoaXMuX3NwYW47CiAgICBuZXdTY29wZS5fc2Vzc2lvbiA9IHRoaXMuX3Nlc3Npb247CiAgICBuZXdTY29wZS5fdHJhbnNhY3Rpb25OYW1lID0gdGhpcy5fdHJhbnNhY3Rpb25OYW1lOwogICAgbmV3U2NvcGUuX2ZpbmdlcnByaW50ID0gdGhpcy5fZmluZ2VycHJpbnQ7CiAgICBuZXdTY29wZS5fZXZlbnRQcm9jZXNzb3JzID0gWy4uLnRoaXMuX2V2ZW50UHJvY2Vzc29yc107CiAgICBuZXdTY29wZS5fcmVxdWVzdFNlc3Npb24gPSB0aGlzLl9yZXF1ZXN0U2Vzc2lvbjsKICAgIG5ld1Njb3BlLl9hdHRhY2htZW50cyA9IFsuLi50aGlzLl9hdHRhY2htZW50c107CiAgICBuZXdTY29wZS5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0geyAuLi50aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEgfTsKICAgIG5ld1Njb3BlLl9wcm9wYWdhdGlvbkNvbnRleHQgPSB7IC4uLnRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCB9OwogICAgbmV3U2NvcGUuX2NsaWVudCA9IHRoaXMuX2NsaWVudDsKCiAgICByZXR1cm4gbmV3U2NvcGU7CiAgfQoKICAvKiogVXBkYXRlIHRoZSBjbGllbnQgb24gdGhlIHNjb3BlLiAqLwogICBzZXRDbGllbnQoY2xpZW50KSB7CiAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7CiAgfQoKICAvKioKICAgKiBHZXQgdGhlIGNsaWVudCBhc3NpZ25lZCB0byB0aGlzIHNjb3BlLgogICAqCiAgICogSXQgaXMgZ2VuZXJhbGx5IHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgZ2xvYmFsIGZ1bmN0aW9uIGBTZW50cnkuZ2V0Q2xpZW50KClgIGluc3RlYWQsIHVubGVzcyB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuCiAgICovCiAgIGdldENsaWVudCgpIHsKICAgIHJldHVybiB0aGlzLl9jbGllbnQ7CiAgfQoKICAvKioKICAgKiBBZGQgaW50ZXJuYWwgb24gY2hhbmdlIGxpc3RlbmVyLiBVc2VkIGZvciBzdWIgU0RLcyB0aGF0IG5lZWQgdG8gc3RvcmUgdGhlIHNjb3BlLgogICAqIEBoaWRkZW4KICAgKi8KICAgYWRkU2NvcGVMaXN0ZW5lcihjYWxsYmFjaykgewogICAgdGhpcy5fc2NvcGVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBhZGRFdmVudFByb2Nlc3NvcihjYWxsYmFjaykgewogICAgdGhpcy5fZXZlbnRQcm9jZXNzb3JzLnB1c2goY2FsbGJhY2spOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRVc2VyKHVzZXIpIHsKICAgIC8vIElmIG51bGwgaXMgcGFzc2VkIHdlIHdhbnQgdG8gdW5zZXQgZXZlcnl0aGluZywgYnV0IHN0aWxsIGRlZmluZSBrZXlzLAogICAgLy8gc28gdGhhdCBsYXRlciBkb3duIGluIHRoZSBwaXBlbGluZSBhbnkgZXhpc3RpbmcgdmFsdWVzIGFyZSBjbGVhcmVkLgogICAgdGhpcy5fdXNlciA9IHVzZXIgfHwgewogICAgICBlbWFpbDogdW5kZWZpbmVkLAogICAgICBpZDogdW5kZWZpbmVkLAogICAgICBpcF9hZGRyZXNzOiB1bmRlZmluZWQsCiAgICAgIHNlZ21lbnQ6IHVuZGVmaW5lZCwKICAgICAgdXNlcm5hbWU6IHVuZGVmaW5lZCwKICAgIH07CgogICAgaWYgKHRoaXMuX3Nlc3Npb24pIHsKICAgICAgdXBkYXRlU2Vzc2lvbih0aGlzLl9zZXNzaW9uLCB7IHVzZXIgfSk7CiAgICB9CgogICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0VXNlcigpIHsKICAgIHJldHVybiB0aGlzLl91c2VyOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0UmVxdWVzdFNlc3Npb24oKSB7CiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdFNlc3Npb247CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRSZXF1ZXN0U2Vzc2lvbihyZXF1ZXN0U2Vzc2lvbikgewogICAgdGhpcy5fcmVxdWVzdFNlc3Npb24gPSByZXF1ZXN0U2Vzc2lvbjsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgc2V0VGFncyh0YWdzKSB7CiAgICB0aGlzLl90YWdzID0gewogICAgICAuLi50aGlzLl90YWdzLAogICAgICAuLi50YWdzLAogICAgfTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldFRhZyhrZXksIHZhbHVlKSB7CiAgICB0aGlzLl90YWdzID0geyAuLi50aGlzLl90YWdzLCBba2V5XTogdmFsdWUgfTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldEV4dHJhcyhleHRyYXMpIHsKICAgIHRoaXMuX2V4dHJhID0gewogICAgICAuLi50aGlzLl9leHRyYSwKICAgICAgLi4uZXh0cmFzLAogICAgfTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldEV4dHJhKGtleSwgZXh0cmEpIHsKICAgIHRoaXMuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSwgW2tleV06IGV4dHJhIH07CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRGaW5nZXJwcmludChmaW5nZXJwcmludCkgewogICAgdGhpcy5fZmluZ2VycHJpbnQgPSBmaW5nZXJwcmludDsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldExldmVsKAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBsZXZlbCwKICApIHsKICAgIHRoaXMuX2xldmVsID0gbGV2ZWw7CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBTZXRzIHRoZSB0cmFuc2FjdGlvbiBuYW1lIG9uIHRoZSBzY29wZSBmb3IgZnV0dXJlIGV2ZW50cy4KICAgKi8KICAgc2V0VHJhbnNhY3Rpb25OYW1lKG5hbWUpIHsKICAgIHRoaXMuX3RyYW5zYWN0aW9uTmFtZSA9IG5hbWU7CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRDb250ZXh0KGtleSwgY29udGV4dCkgewogICAgaWYgKGNvbnRleHQgPT09IG51bGwpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZQogICAgICBkZWxldGUgdGhpcy5fY29udGV4dHNba2V5XTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2NvbnRleHRzW2tleV0gPSBjb250ZXh0OwogICAgfQoKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIFNldHMgdGhlIFNwYW4gb24gdGhlIHNjb3BlLgogICAqIEBwYXJhbSBzcGFuIFNwYW4KICAgKiBAZGVwcmVjYXRlZCBJbnN0ZWFkIG9mIHNldHRpbmcgYSBzcGFuIG9uIGEgc2NvcGUsIHVzZSBgc3RhcnRTcGFuKClgL2BzdGFydFNwYW5NYW51YWwoKWAgaW5zdGVhZC4KICAgKi8KICAgc2V0U3BhbihzcGFuKSB7CiAgICB0aGlzLl9zcGFuID0gc3BhbjsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGBTcGFuYCBpZiB0aGVyZSBpcyBvbmUuCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBnZXRBY3RpdmVTcGFuKClgIGluc3RlYWQuCiAgICovCiAgIGdldFNwYW4oKSB7CiAgICByZXR1cm4gdGhpcy5fc3BhbjsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGBUcmFuc2FjdGlvbmAgYXR0YWNoZWQgdG8gdGhlIHNjb3BlIChpZiB0aGVyZSBpcyBvbmUpLgogICAqIEBkZXByZWNhdGVkIFlvdSBzaG91bGQgbm90IHJlbHkgb24gdGhlIHRyYW5zYWN0aW9uLCBidXQganVzdCB1c2UgYHN0YXJ0U3BhbigpYCBBUElzIGluc3RlYWQuCiAgICovCiAgIGdldFRyYW5zYWN0aW9uKCkgewogICAgLy8gT2Z0ZW4sIHRoaXMgc3BhbiAoaWYgaXQgZXhpc3RzIGF0IGFsbCkgd2lsbCBiZSBhIHRyYW5zYWN0aW9uLCBidXQgaXQncyBub3QgZ3VhcmFudGVlZCB0byBiZS4gUmVnYXJkbGVzcywgaXQgd2lsbAogICAgLy8gaGF2ZSBhIHBvaW50ZXIgdG8gdGhlIGN1cnJlbnRseS1hY3RpdmUgdHJhbnNhY3Rpb24uCiAgICBjb25zdCBzcGFuID0gdGhpcy5fc3BhbjsKICAgIC8vIENhbm5vdCByZXBsYWNlIHdpdGggZ2V0Um9vdFNwYW4gYmVjYXVzZSBnZXRSb290U3BhbiByZXR1cm5zIGEgc3Bhbiwgbm90IGEgdHJhbnNhY3Rpb24KICAgIC8vIEFsc28sIHRoaXMgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZCBhbnl3YXkuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHJldHVybiBzcGFuICYmIHNwYW4udHJhbnNhY3Rpb247CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRTZXNzaW9uKHNlc3Npb24pIHsKICAgIGlmICghc2Vzc2lvbikgewogICAgICBkZWxldGUgdGhpcy5fc2Vzc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX3Nlc3Npb24gPSBzZXNzaW9uOwogICAgfQogICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0U2Vzc2lvbigpIHsKICAgIHJldHVybiB0aGlzLl9zZXNzaW9uOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgdXBkYXRlKGNhcHR1cmVDb250ZXh0KSB7CiAgICBpZiAoIWNhcHR1cmVDb250ZXh0KSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGNvbnN0IHNjb3BlVG9NZXJnZSA9IHR5cGVvZiBjYXB0dXJlQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJyA/IGNhcHR1cmVDb250ZXh0KHRoaXMpIDogY2FwdHVyZUNvbnRleHQ7CgogICAgaWYgKHNjb3BlVG9NZXJnZSBpbnN0YW5jZW9mIFNjb3BlKSB7CiAgICAgIGNvbnN0IHNjb3BlRGF0YSA9IHNjb3BlVG9NZXJnZS5nZXRTY29wZURhdGEoKTsKCiAgICAgIHRoaXMuX3RhZ3MgPSB7IC4uLnRoaXMuX3RhZ3MsIC4uLnNjb3BlRGF0YS50YWdzIH07CiAgICAgIHRoaXMuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSwgLi4uc2NvcGVEYXRhLmV4dHJhIH07CiAgICAgIHRoaXMuX2NvbnRleHRzID0geyAuLi50aGlzLl9jb250ZXh0cywgLi4uc2NvcGVEYXRhLmNvbnRleHRzIH07CiAgICAgIGlmIChzY29wZURhdGEudXNlciAmJiBPYmplY3Qua2V5cyhzY29wZURhdGEudXNlcikubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5fdXNlciA9IHNjb3BlRGF0YS51c2VyOwogICAgICB9CiAgICAgIGlmIChzY29wZURhdGEubGV2ZWwpIHsKICAgICAgICB0aGlzLl9sZXZlbCA9IHNjb3BlRGF0YS5sZXZlbDsKICAgICAgfQogICAgICBpZiAoc2NvcGVEYXRhLmZpbmdlcnByaW50Lmxlbmd0aCkgewogICAgICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gc2NvcGVEYXRhLmZpbmdlcnByaW50OwogICAgICB9CiAgICAgIGlmIChzY29wZVRvTWVyZ2UuZ2V0UmVxdWVzdFNlc3Npb24oKSkgewogICAgICAgIHRoaXMuX3JlcXVlc3RTZXNzaW9uID0gc2NvcGVUb01lcmdlLmdldFJlcXVlc3RTZXNzaW9uKCk7CiAgICAgIH0KICAgICAgaWYgKHNjb3BlRGF0YS5wcm9wYWdhdGlvbkNvbnRleHQpIHsKICAgICAgICB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHQgPSBzY29wZURhdGEucHJvcGFnYXRpb25Db250ZXh0OwogICAgICB9CiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qoc2NvcGVUb01lcmdlKSkgewogICAgICBjb25zdCBzY29wZUNvbnRleHQgPSBjYXB0dXJlQ29udGV4dCA7CiAgICAgIHRoaXMuX3RhZ3MgPSB7IC4uLnRoaXMuX3RhZ3MsIC4uLnNjb3BlQ29udGV4dC50YWdzIH07CiAgICAgIHRoaXMuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSwgLi4uc2NvcGVDb250ZXh0LmV4dHJhIH07CiAgICAgIHRoaXMuX2NvbnRleHRzID0geyAuLi50aGlzLl9jb250ZXh0cywgLi4uc2NvcGVDb250ZXh0LmNvbnRleHRzIH07CiAgICAgIGlmIChzY29wZUNvbnRleHQudXNlcikgewogICAgICAgIHRoaXMuX3VzZXIgPSBzY29wZUNvbnRleHQudXNlcjsKICAgICAgfQogICAgICBpZiAoc2NvcGVDb250ZXh0LmxldmVsKSB7CiAgICAgICAgdGhpcy5fbGV2ZWwgPSBzY29wZUNvbnRleHQubGV2ZWw7CiAgICAgIH0KICAgICAgaWYgKHNjb3BlQ29udGV4dC5maW5nZXJwcmludCkgewogICAgICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gc2NvcGVDb250ZXh0LmZpbmdlcnByaW50OwogICAgICB9CiAgICAgIGlmIChzY29wZUNvbnRleHQucmVxdWVzdFNlc3Npb24pIHsKICAgICAgICB0aGlzLl9yZXF1ZXN0U2Vzc2lvbiA9IHNjb3BlQ29udGV4dC5yZXF1ZXN0U2Vzc2lvbjsKICAgICAgfQogICAgICBpZiAoc2NvcGVDb250ZXh0LnByb3BhZ2F0aW9uQ29udGV4dCkgewogICAgICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IHNjb3BlQ29udGV4dC5wcm9wYWdhdGlvbkNvbnRleHQ7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIGNsZWFyKCkgewogICAgdGhpcy5fYnJlYWRjcnVtYnMgPSBbXTsKICAgIHRoaXMuX3RhZ3MgPSB7fTsKICAgIHRoaXMuX2V4dHJhID0ge307CiAgICB0aGlzLl91c2VyID0ge307CiAgICB0aGlzLl9jb250ZXh0cyA9IHt9OwogICAgdGhpcy5fbGV2ZWwgPSB1bmRlZmluZWQ7CiAgICB0aGlzLl90cmFuc2FjdGlvbk5hbWUgPSB1bmRlZmluZWQ7CiAgICB0aGlzLl9maW5nZXJwcmludCA9IHVuZGVmaW5lZDsKICAgIHRoaXMuX3JlcXVlc3RTZXNzaW9uID0gdW5kZWZpbmVkOwogICAgdGhpcy5fc3BhbiA9IHVuZGVmaW5lZDsKICAgIHRoaXMuX3Nlc3Npb24gPSB1bmRlZmluZWQ7CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgdGhpcy5fYXR0YWNobWVudHMgPSBbXTsKICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IGdlbmVyYXRlUHJvcGFnYXRpb25Db250ZXh0KCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIGFkZEJyZWFkY3J1bWIoYnJlYWRjcnVtYiwgbWF4QnJlYWRjcnVtYnMpIHsKICAgIGNvbnN0IG1heENydW1icyA9IHR5cGVvZiBtYXhCcmVhZGNydW1icyA9PT0gJ251bWJlcicgPyBtYXhCcmVhZGNydW1icyA6IERFRkFVTFRfTUFYX0JSRUFEQ1JVTUJTOwoKICAgIC8vIE5vIGRhdGEgaGFzIGJlZW4gY2hhbmdlZCwgc28gZG9uJ3Qgbm90aWZ5IHNjb3BlIGxpc3RlbmVycwogICAgaWYgKG1heENydW1icyA8PSAwKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGNvbnN0IG1lcmdlZEJyZWFkY3J1bWIgPSB7CiAgICAgIHRpbWVzdGFtcDogZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpLAogICAgICAuLi5icmVhZGNydW1iLAogICAgfTsKCiAgICBjb25zdCBicmVhZGNydW1icyA9IHRoaXMuX2JyZWFkY3J1bWJzOwogICAgYnJlYWRjcnVtYnMucHVzaChtZXJnZWRCcmVhZGNydW1iKTsKICAgIHRoaXMuX2JyZWFkY3J1bWJzID0gYnJlYWRjcnVtYnMubGVuZ3RoID4gbWF4Q3J1bWJzID8gYnJlYWRjcnVtYnMuc2xpY2UoLW1heENydW1icykgOiBicmVhZGNydW1iczsKCiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0TGFzdEJyZWFkY3J1bWIoKSB7CiAgICByZXR1cm4gdGhpcy5fYnJlYWRjcnVtYnNbdGhpcy5fYnJlYWRjcnVtYnMubGVuZ3RoIC0gMV07CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBjbGVhckJyZWFkY3J1bWJzKCkgewogICAgdGhpcy5fYnJlYWRjcnVtYnMgPSBbXTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIGFkZEF0dGFjaG1lbnQoYXR0YWNobWVudCkgewogICAgdGhpcy5fYXR0YWNobWVudHMucHVzaChhdHRhY2htZW50KTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgYGdldFNjb3BlRGF0YSgpYCBpbnN0ZWFkLgogICAqLwogICBnZXRBdHRhY2htZW50cygpIHsKICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldFNjb3BlRGF0YSgpOwoKICAgIHJldHVybiBkYXRhLmF0dGFjaG1lbnRzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgY2xlYXJBdHRhY2htZW50cygpIHsKICAgIHRoaXMuX2F0dGFjaG1lbnRzID0gW107CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKiBAaW5oZXJpdERvYyAqLwogICBnZXRTY29wZURhdGEoKSB7CiAgICBjb25zdCB7CiAgICAgIF9icmVhZGNydW1icywKICAgICAgX2F0dGFjaG1lbnRzLAogICAgICBfY29udGV4dHMsCiAgICAgIF90YWdzLAogICAgICBfZXh0cmEsCiAgICAgIF91c2VyLAogICAgICBfbGV2ZWwsCiAgICAgIF9maW5nZXJwcmludCwKICAgICAgX2V2ZW50UHJvY2Vzc29ycywKICAgICAgX3Byb3BhZ2F0aW9uQ29udGV4dCwKICAgICAgX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YSwKICAgICAgX3RyYW5zYWN0aW9uTmFtZSwKICAgICAgX3NwYW4sCiAgICB9ID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iczogX2JyZWFkY3J1bWJzLAogICAgICBhdHRhY2htZW50czogX2F0dGFjaG1lbnRzLAogICAgICBjb250ZXh0czogX2NvbnRleHRzLAogICAgICB0YWdzOiBfdGFncywKICAgICAgZXh0cmE6IF9leHRyYSwKICAgICAgdXNlcjogX3VzZXIsCiAgICAgIGxldmVsOiBfbGV2ZWwsCiAgICAgIGZpbmdlcnByaW50OiBfZmluZ2VycHJpbnQgfHwgW10sCiAgICAgIGV2ZW50UHJvY2Vzc29yczogX2V2ZW50UHJvY2Vzc29ycywKICAgICAgcHJvcGFnYXRpb25Db250ZXh0OiBfcHJvcGFnYXRpb25Db250ZXh0LAogICAgICBzZGtQcm9jZXNzaW5nTWV0YWRhdGE6IF9zZGtQcm9jZXNzaW5nTWV0YWRhdGEsCiAgICAgIHRyYW5zYWN0aW9uTmFtZTogX3RyYW5zYWN0aW9uTmFtZSwKICAgICAgc3BhbjogX3NwYW4sCiAgICB9OwogIH0KCiAgLyoqCiAgICogQXBwbGllcyBkYXRhIGZyb20gdGhlIHNjb3BlIHRvIHRoZSBldmVudCBhbmQgcnVucyBhbGwgZXZlbnQgcHJvY2Vzc29ycyBvbiBpdC4KICAgKgogICAqIEBwYXJhbSBldmVudCBFdmVudAogICAqIEBwYXJhbSBoaW50IE9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9yaWdpbmFsIGV4Y2VwdGlvbiwgZm9yIHVzZSBieSB0aGUgZXZlbnQgcHJvY2Vzc29ycy4KICAgKiBAaGlkZGVuCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBhcHBseVNjb3BlRGF0YVRvRXZlbnQoKWAgZGlyZWN0bHkKICAgKi8KICAgYXBwbHlUb0V2ZW50KAogICAgZXZlbnQsCiAgICBoaW50ID0ge30sCiAgICBhZGRpdGlvbmFsRXZlbnRQcm9jZXNzb3JzID0gW10sCiAgKSB7CiAgICBhcHBseVNjb3BlRGF0YVRvRXZlbnQoZXZlbnQsIHRoaXMuZ2V0U2NvcGVEYXRhKCkpOwoKICAgIC8vIFRPRE8gKHY4KTogVXBkYXRlIHRoaXMgb3JkZXIgdG8gYmU6IEdsb2JhbCA+IENsaWVudCA+IFNjb3BlCiAgICBjb25zdCBldmVudFByb2Nlc3NvcnMgPSBbCiAgICAgIC4uLmFkZGl0aW9uYWxFdmVudFByb2Nlc3NvcnMsCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICAuLi5nZXRHbG9iYWxFdmVudFByb2Nlc3NvcnMoKSwKICAgICAgLi4udGhpcy5fZXZlbnRQcm9jZXNzb3JzLAogICAgXTsKCiAgICByZXR1cm4gbm90aWZ5RXZlbnRQcm9jZXNzb3JzKGV2ZW50UHJvY2Vzc29ycywgZXZlbnQsIGhpbnQpOwogIH0KCiAgLyoqCiAgICogQWRkIGRhdGEgd2hpY2ggd2lsbCBiZSBhY2Nlc3NpYmxlIGR1cmluZyBldmVudCBwcm9jZXNzaW5nIGJ1dCB3b24ndCBnZXQgc2VudCB0byBTZW50cnkKICAgKi8KICAgc2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKG5ld0RhdGEpIHsKICAgIHRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YSA9IHsgLi4udGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhLCAuLi5uZXdEYXRhIH07CgogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRQcm9wYWdhdGlvbkNvbnRleHQoY29udGV4dCkgewogICAgdGhpcy5fcHJvcGFnYXRpb25Db250ZXh0ID0gY29udGV4dDsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0UHJvcGFnYXRpb25Db250ZXh0KCkgewogICAgcmV0dXJuIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dDsKICB9CgogIC8qKgogICAqIENhcHR1cmUgYW4gZXhjZXB0aW9uIGZvciB0aGlzIHNjb3BlLgogICAqCiAgICogQHBhcmFtIGV4Y2VwdGlvbiBUaGUgZXhjZXB0aW9uIHRvIGNhcHR1cmUuCiAgICogQHBhcmFtIGhpbnQgT3B0aW5hbCBhZGRpdGlvbmFsIGRhdGEgdG8gYXR0YWNoIHRvIHRoZSBTZW50cnkgZXZlbnQuCiAgICogQHJldHVybnMgdGhlIGlkIG9mIHRoZSBjYXB0dXJlZCBTZW50cnkgZXZlbnQuCiAgICovCiAgIGNhcHR1cmVFeGNlcHRpb24oZXhjZXB0aW9uLCBoaW50KSB7CiAgICBjb25zdCBldmVudElkID0gaGludCAmJiBoaW50LmV2ZW50X2lkID8gaGludC5ldmVudF9pZCA6IHV1aWQ0KCk7CgogICAgaWYgKCF0aGlzLl9jbGllbnQpIHsKICAgICAgbG9nZ2VyLndhcm4oJ05vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBleGNlcHRpb24hJyk7CiAgICAgIHJldHVybiBldmVudElkOwogICAgfQoKICAgIGNvbnN0IHN5bnRoZXRpY0V4Y2VwdGlvbiA9IG5ldyBFcnJvcignU2VudHJ5IHN5bnRoZXRpY0V4Y2VwdGlvbicpOwoKICAgIHRoaXMuX2NsaWVudC5jYXB0dXJlRXhjZXB0aW9uKAogICAgICBleGNlcHRpb24sCiAgICAgIHsKICAgICAgICBvcmlnaW5hbEV4Y2VwdGlvbjogZXhjZXB0aW9uLAogICAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbiwKICAgICAgICAuLi5oaW50LAogICAgICAgIGV2ZW50X2lkOiBldmVudElkLAogICAgICB9LAogICAgICB0aGlzLAogICAgKTsKCiAgICByZXR1cm4gZXZlbnRJZDsKICB9CgogIC8qKgogICAqIENhcHR1cmUgYSBtZXNzYWdlIGZvciB0aGlzIHNjb3BlLgogICAqCiAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gY2FwdHVyZS4KICAgKiBAcGFyYW0gbGV2ZWwgQW4gb3B0aW9uYWwgc2V2ZXJpdHkgbGV2ZWwgdG8gcmVwb3J0IHRoZSBtZXNzYWdlIHdpdGguCiAgICogQHBhcmFtIGhpbnQgT3B0aW9uYWwgYWRkaXRpb25hbCBkYXRhIHRvIGF0dGFjaCB0byB0aGUgU2VudHJ5IGV2ZW50LgogICAqIEByZXR1cm5zIHRoZSBpZCBvZiB0aGUgY2FwdHVyZWQgbWVzc2FnZS4KICAgKi8KICAgY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIGhpbnQpIHsKICAgIGNvbnN0IGV2ZW50SWQgPSBoaW50ICYmIGhpbnQuZXZlbnRfaWQgPyBoaW50LmV2ZW50X2lkIDogdXVpZDQoKTsKCiAgICBpZiAoIXRoaXMuX2NsaWVudCkgewogICAgICBsb2dnZXIud2FybignTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIG1lc3NhZ2UhJyk7CiAgICAgIHJldHVybiBldmVudElkOwogICAgfQoKICAgIGNvbnN0IHN5bnRoZXRpY0V4Y2VwdGlvbiA9IG5ldyBFcnJvcihtZXNzYWdlKTsKCiAgICB0aGlzLl9jbGllbnQuY2FwdHVyZU1lc3NhZ2UoCiAgICAgIG1lc3NhZ2UsCiAgICAgIGxldmVsLAogICAgICB7CiAgICAgICAgb3JpZ2luYWxFeGNlcHRpb246IG1lc3NhZ2UsCiAgICAgICAgc3ludGhldGljRXhjZXB0aW9uLAogICAgICAgIC4uLmhpbnQsCiAgICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsCiAgICAgIH0sCiAgICAgIHRoaXMsCiAgICApOwoKICAgIHJldHVybiBldmVudElkOwogIH0KCiAgLyoqCiAgICogQ2FwdHVyZXMgYSBtYW51YWxseSBjcmVhdGVkIGV2ZW50IGZvciB0aGlzIHNjb3BlIGFuZCBzZW5kcyBpdCB0byBTZW50cnkuCiAgICoKICAgKiBAcGFyYW0gZXhjZXB0aW9uIFRoZSBldmVudCB0byBjYXB0dXJlLgogICAqIEBwYXJhbSBoaW50IE9wdGlvbmFsIGFkZGl0aW9uYWwgZGF0YSB0byBhdHRhY2ggdG8gdGhlIFNlbnRyeSBldmVudC4KICAgKiBAcmV0dXJucyB0aGUgaWQgb2YgdGhlIGNhcHR1cmVkIGV2ZW50LgogICAqLwogICBjYXB0dXJlRXZlbnQoZXZlbnQsIGhpbnQpIHsKICAgIGNvbnN0IGV2ZW50SWQgPSBoaW50ICYmIGhpbnQuZXZlbnRfaWQgPyBoaW50LmV2ZW50X2lkIDogdXVpZDQoKTsKCiAgICBpZiAoIXRoaXMuX2NsaWVudCkgewogICAgICBsb2dnZXIud2FybignTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50IScpOwogICAgICByZXR1cm4gZXZlbnRJZDsKICAgIH0KCiAgICB0aGlzLl9jbGllbnQuY2FwdHVyZUV2ZW50KGV2ZW50LCB7IC4uLmhpbnQsIGV2ZW50X2lkOiBldmVudElkIH0sIHRoaXMpOwoKICAgIHJldHVybiBldmVudElkOwogIH0KCiAgLyoqCiAgICogVGhpcyB3aWxsIGJlIGNhbGxlZCBvbiBldmVyeSBzZXQgY2FsbC4KICAgKi8KICAgX25vdGlmeVNjb3BlTGlzdGVuZXJzKCkgewogICAgLy8gV2UgbmVlZCB0aGlzIGNoZWNrIGZvciB0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnMgdG8gYmUgYWJsZSB0byB3b3JrIG9uIHNjb3BlIGR1cmluZyB1cGRhdGVzCiAgICAvLyBJZiB0aGlzIGNoZWNrIGlzIG5vdCBoZXJlIHdlJ2xsIHByb2R1Y2UgZW5kbGVzcyByZWN1cnNpb24gd2hlbiBzb21ldGhpbmcgaXMgZG9uZSB3aXRoIHRoZSBzY29wZQogICAgLy8gZHVyaW5nIHRoZSBjYWxsYmFjay4KICAgIGlmICghdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzKSB7CiAgICAgIHRoaXMuX25vdGlmeWluZ0xpc3RlbmVycyA9IHRydWU7CiAgICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2sgPT4gewogICAgICAgIGNhbGxiYWNrKHRoaXMpOwogICAgICB9KTsKICAgICAgdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzID0gZmFsc2U7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBnZW5lcmF0ZVByb3BhZ2F0aW9uQ29udGV4dCgpIHsKICByZXR1cm4gewogICAgdHJhY2VJZDogdXVpZDQoKSwKICAgIHNwYW5JZDogdXVpZDQoKS5zdWJzdHJpbmcoMTYpLAogIH07Cn0KCmNvbnN0IFNES19WRVJTSU9OID0gJzcuMTIwLjMnOwoKLyoqCiAqIEFQSSBjb21wYXRpYmlsaXR5IHZlcnNpb24gb2YgdGhpcyBodWIuCiAqCiAqIFdBUk5JTkc6IFRoaXMgbnVtYmVyIHNob3VsZCBvbmx5IGJlIGluY3JlYXNlZCB3aGVuIHRoZSBnbG9iYWwgaW50ZXJmYWNlCiAqIGNoYW5nZXMgYW5kIG5ldyBtZXRob2RzIGFyZSBpbnRyb2R1Y2VkLgogKgogKiBAaGlkZGVuCiAqLwpjb25zdCBBUElfVkVSU0lPTiA9IHBhcnNlRmxvYXQoU0RLX1ZFUlNJT04pOwoKLyoqCiAqIERlZmF1bHQgbWF4aW11bSBudW1iZXIgb2YgYnJlYWRjcnVtYnMgYWRkZWQgdG8gYW4gZXZlbnQuIENhbiBiZSBvdmVyd3JpdHRlbgogKiB3aXRoIHtAbGluayBPcHRpb25zLm1heEJyZWFkY3J1bWJzfS4KICovCmNvbnN0IERFRkFVTFRfQlJFQURDUlVNQlMgPSAxMDA7CgovKioKICogQGRlcHJlY2F0ZWQgVGhlIGBIdWJgIGNsYXNzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2ZXJzaW9uIDggb2YgdGhlIFNESyBpbiBmYXZvdXIgb2YgYFNjb3BlYCBhbmQgYENsaWVudGAgb2JqZWN0cy4KICoKICogSWYgeW91IHByZXZpb3VzbHkgdXNlZCB0aGUgYEh1YmAgY2xhc3MgZGlyZWN0bHksIHJlcGxhY2UgaXQgd2l0aCBgU2NvcGVgIGFuZCBgQ2xpZW50YCBvYmplY3RzLiBNb3JlIGluZm9ybWF0aW9uOgogKiAtIFtNdWx0aXBsZSBTZW50cnkgSW5zdGFuY2VzXShodHRwczovL2RvY3Muc2VudHJ5LmlvL3BsYXRmb3Jtcy9qYXZhc2NyaXB0L2Jlc3QtcHJhY3RpY2VzL211bHRpcGxlLXNlbnRyeS1pbnN0YW5jZXMvKQogKiAtIFtCcm93c2VyIEV4dGVuc2lvbnNdKGh0dHBzOi8vZG9jcy5zZW50cnkuaW8vcGxhdGZvcm1zL2phdmFzY3JpcHQvYmVzdC1wcmFjdGljZXMvYnJvd3Nlci1leHRlbnNpb25zLykKICoKICogU29tZSBvZiBvdXIgQVBJcyBhcmUgdHlwZWQgd2l0aCB0aGUgSHViIGNsYXNzIGluc3RlYWQgb2YgdGhlIGludGVyZmFjZSAoZS5nLiBgZ2V0Q3VycmVudEh1YmApLiBNb3N0IG9mIHRoZW0gYXJlIGRlcHJlY2F0ZWQKICogdGhlbXNlbHZlcyBhbmQgd2lsbCBhbHNvIGJlIHJlbW92ZWQgaW4gdmVyc2lvbiA4LiBNb3JlIGluZm9ybWF0aW9uOgogKiAtIFtNaWdyYXRpb24gR3VpZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvYmxvYi9kZXZlbG9wL01JR1JBVElPTi5tZCNkZXByZWNhdGUtaHViKQogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCmNsYXNzIEh1YiAgewogIC8qKiBJcyBhIHtAbGluayBMYXllcn1bXSBjb250YWluaW5nIHRoZSBjbGllbnQgYW5kIHNjb3BlICovCgogIC8qKiBDb250YWlucyB0aGUgbGFzdCBldmVudCBpZCBvZiBhIGNhcHR1cmVkIGV2ZW50LiAgKi8KCiAgLyoqCiAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgaHViLCB3aWxsIHB1c2ggb25lIHtAbGluayBMYXllcn0gaW50byB0aGUKICAgKiBpbnRlcm5hbCBzdGFjayBvbiBjcmVhdGlvbi4KICAgKgogICAqIEBwYXJhbSBjbGllbnQgYm91bmQgdG8gdGhlIGh1Yi4KICAgKiBAcGFyYW0gc2NvcGUgYm91bmQgdG8gdGhlIGh1Yi4KICAgKiBAcGFyYW0gdmVyc2lvbiBudW1iZXIsIGhpZ2hlciBudW1iZXIgbWVhbnMgaGlnaGVyIHByaW9yaXR5LgogICAqCiAgICogQGRlcHJlY2F0ZWQgSW5zdGFudGlhdGlvbiBvZiBIdWIgb2JqZWN0cyBpcyBkZXByZWNhdGVkIGFuZCB0aGUgY29uc3RydWN0b3Igd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb24gOCBvZiB0aGUgU0RLLgogICAqCiAgICogSWYgeW91IGFyZSBjdXJyZW50bHkgdXNpbmcgdGhlIEh1YiBmb3IgbXVsdGktY2xpZW50IHVzZSBsaWtlIHNvOgogICAqCiAgICogYGBgCiAgICogLy8gT0xECiAgICogY29uc3QgaHViID0gbmV3IEh1YigpOwogICAqIGh1Yi5iaW5kQ2xpZW50KGNsaWVudCk7CiAgICogbWFrZU1haW4oaHViKQogICAqIGBgYAogICAqCiAgICogaW5zdGVhZCBpbml0aWFsaXplIHRoZSBjbGllbnQgYXMgZm9sbG93czoKICAgKgogICAqIGBgYAogICAqIC8vIE5FVwogICAqIFNlbnRyeS53aXRoSXNvbGF0aW9uU2NvcGUoKCkgPT4gewogICAqICAgIFNlbnRyeS5zZXRDdXJyZW50Q2xpZW50KGNsaWVudCk7CiAgICogICAgY2xpZW50LmluaXQoKTsKICAgKiB9KTsKICAgKiBgYGAKICAgKgogICAqIElmIHlvdSBhcmUgdXNpbmcgdGhlIEh1YiB0byBjYXB0dXJlIGV2ZW50cyBsaWtlIHNvOgogICAqCiAgICogYGBgCiAgICogLy8gT0xECiAgICogY29uc3QgY2xpZW50ID0gbmV3IENsaWVudCgpOwogICAqIGNvbnN0IGh1YiA9IG5ldyBIdWIoY2xpZW50KTsKICAgKiBodWIuY2FwdHVyZUV4Y2VwdGlvbigpCiAgICogYGBgCiAgICoKICAgKiBpbnN0ZWFkIGNhcHR1cmUgaXNvbGF0ZWQgZXZlbnRzIGFzIGZvbGxvd3M6CiAgICoKICAgKiBgYGAKICAgKiAvLyBORVcKICAgKiBjb25zdCBjbGllbnQgPSBuZXcgQ2xpZW50KCk7CiAgICogY29uc3Qgc2NvcGUgPSBuZXcgU2NvcGUoKTsKICAgKiBzY29wZS5zZXRDbGllbnQoY2xpZW50KTsKICAgKiBzY29wZS5jYXB0dXJlRXhjZXB0aW9uKCk7CiAgICogYGBgCiAgICovCiAgIGNvbnN0cnVjdG9yKAogICAgY2xpZW50LAogICAgc2NvcGUsCiAgICBpc29sYXRpb25TY29wZSwKICAgICAgX3ZlcnNpb24gPSBBUElfVkVSU0lPTiwKICApIHt0aGlzLl92ZXJzaW9uID0gX3ZlcnNpb247CiAgICBsZXQgYXNzaWduZWRTY29wZTsKICAgIGlmICghc2NvcGUpIHsKICAgICAgYXNzaWduZWRTY29wZSA9IG5ldyBTY29wZSgpOwogICAgICBhc3NpZ25lZFNjb3BlLnNldENsaWVudChjbGllbnQpOwogICAgfSBlbHNlIHsKICAgICAgYXNzaWduZWRTY29wZSA9IHNjb3BlOwogICAgfQoKICAgIGxldCBhc3NpZ25lZElzb2xhdGlvblNjb3BlOwogICAgaWYgKCFpc29sYXRpb25TY29wZSkgewogICAgICBhc3NpZ25lZElzb2xhdGlvblNjb3BlID0gbmV3IFNjb3BlKCk7CiAgICAgIGFzc2lnbmVkSXNvbGF0aW9uU2NvcGUuc2V0Q2xpZW50KGNsaWVudCk7CiAgICB9IGVsc2UgewogICAgICBhc3NpZ25lZElzb2xhdGlvblNjb3BlID0gaXNvbGF0aW9uU2NvcGU7CiAgICB9CgogICAgdGhpcy5fc3RhY2sgPSBbeyBzY29wZTogYXNzaWduZWRTY29wZSB9XTsKCiAgICBpZiAoY2xpZW50KSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICB0aGlzLmJpbmRDbGllbnQoY2xpZW50KTsKICAgIH0KCiAgICB0aGlzLl9pc29sYXRpb25TY29wZSA9IGFzc2lnbmVkSXNvbGF0aW9uU2NvcGU7CiAgfQoKICAvKioKICAgKiBDaGVja3MgaWYgdGhpcyBodWIncyB2ZXJzaW9uIGlzIG9sZGVyIHRoYW4gdGhlIGdpdmVuIHZlcnNpb24uCiAgICoKICAgKiBAcGFyYW0gdmVyc2lvbiBBIHZlcnNpb24gbnVtYmVyIHRvIGNvbXBhcmUgdG8uCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBnaXZlbiB2ZXJzaW9uIGlzIG5ld2VyOyBvdGhlcndpc2UgZmFsc2UuCiAgICoKICAgKiBAZGVwcmVjYXRlZCBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4KICAgKi8KICAgaXNPbGRlclRoYW4odmVyc2lvbikgewogICAgcmV0dXJuIHRoaXMuX3ZlcnNpb24gPCB2ZXJzaW9uOwogIH0KCiAgLyoqCiAgICogVGhpcyBiaW5kcyB0aGUgZ2l2ZW4gY2xpZW50IHRvIHRoZSBjdXJyZW50IHNjb3BlLgogICAqIEBwYXJhbSBjbGllbnQgQW4gU0RLIGNsaWVudCAoY2xpZW50KSBpbnN0YW5jZS4KICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgaW5pdEFuZEJpbmQoKWAgZGlyZWN0bHksIG9yIGBzZXRDdXJyZW50Q2xpZW50KClgIGFuZC9vciBgY2xpZW50LmluaXQoKWAgaW5zdGVhZC4KICAgKi8KICAgYmluZENsaWVudChjbGllbnQpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3QgdG9wID0gdGhpcy5nZXRTdGFja1RvcCgpOwogICAgdG9wLmNsaWVudCA9IGNsaWVudDsKICAgIHRvcC5zY29wZS5zZXRDbGllbnQoY2xpZW50KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgaWYgKGNsaWVudCAmJiBjbGllbnQuc2V0dXBJbnRlZ3JhdGlvbnMpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICAgIGNsaWVudC5zZXR1cEludGVncmF0aW9ucygpOwogICAgfQogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgd2l0aFNjb3BlYCBpbnN0ZWFkLgogICAqLwogICBwdXNoU2NvcGUoKSB7CiAgICAvLyBXZSB3YW50IHRvIGNsb25lIHRoZSBjb250ZW50IG9mIHByZXYgc2NvcGUKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3Qgc2NvcGUgPSB0aGlzLmdldFNjb3BlKCkuY2xvbmUoKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTdGFjaygpLnB1c2goewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgY2xpZW50OiB0aGlzLmdldENsaWVudCgpLAogICAgICBzY29wZSwKICAgIH0pOwogICAgcmV0dXJuIHNjb3BlOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgd2l0aFNjb3BlYCBpbnN0ZWFkLgogICAqLwogICBwb3BTY29wZSgpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgaWYgKHRoaXMuZ2V0U3RhY2soKS5sZW5ndGggPD0gMSkgcmV0dXJuIGZhbHNlOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICByZXR1cm4gISF0aGlzLmdldFN0YWNrKCkucG9wKCk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkud2l0aFNjb3BlKClgIGluc3RlYWQuCiAgICovCiAgIHdpdGhTY29wZShjYWxsYmFjaykgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBjb25zdCBzY29wZSA9IHRoaXMucHVzaFNjb3BlKCk7CgogICAgbGV0IG1heWJlUHJvbWlzZVJlc3VsdDsKICAgIHRyeSB7CiAgICAgIG1heWJlUHJvbWlzZVJlc3VsdCA9IGNhbGxiYWNrKHNjb3BlKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICAgIHRoaXMucG9wU2NvcGUoKTsKICAgICAgdGhyb3cgZTsKICAgIH0KCiAgICBpZiAoaXNUaGVuYWJsZShtYXliZVByb21pc2VSZXN1bHQpKSB7CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBpc1RoZW5hYmxlIHJldHVybnMgdGhlIHdyb25nIHR5cGUKICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZVJlc3VsdC50aGVuKAogICAgICAgIHJlcyA9PiB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgICAgIHRoaXMucG9wU2NvcGUoKTsKICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgfSwKICAgICAgICBlID0+IHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICAgICAgdGhpcy5wb3BTY29wZSgpOwogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9LAogICAgICApOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5wb3BTY29wZSgpOwogICAgcmV0dXJuIG1heWJlUHJvbWlzZVJlc3VsdDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5nZXRDbGllbnQoKWAgaW5zdGVhZC4KICAgKi8KICAgZ2V0Q2xpZW50KCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICByZXR1cm4gdGhpcy5nZXRTdGFja1RvcCgpLmNsaWVudCA7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBzY29wZSBvZiB0aGUgdG9wIHN0YWNrLgogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkuZ2V0Q3VycmVudFNjb3BlKClgIGluc3RlYWQuCiAgICovCiAgIGdldFNjb3BlKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICByZXR1cm4gdGhpcy5nZXRTdGFja1RvcCgpLnNjb3BlOwogIH0KCiAgLyoqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkuZ2V0SXNvbGF0aW9uU2NvcGUoKWAgaW5zdGVhZC4KICAgKi8KICAgZ2V0SXNvbGF0aW9uU2NvcGUoKSB7CiAgICByZXR1cm4gdGhpcy5faXNvbGF0aW9uU2NvcGU7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBzY29wZSBzdGFjayBmb3IgZG9tYWlucyBvciB0aGUgcHJvY2Vzcy4KICAgKiBAZGVwcmVjYXRlZCBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4KICAgKi8KICAgZ2V0U3RhY2soKSB7CiAgICByZXR1cm4gdGhpcy5fc3RhY2s7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSB0b3Btb3N0IHNjb3BlIGxheWVyIGluIHRoZSBvcmRlciBkb21haW4gPiBsb2NhbCA+IHByb2Nlc3MuCiAgICogQGRlcHJlY2F0ZWQgVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjguCiAgICovCiAgIGdldFN0YWNrVG9wKCkgewogICAgcmV0dXJuIHRoaXMuX3N0YWNrW3RoaXMuX3N0YWNrLmxlbmd0aCAtIDFdOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24oKWAgaW5zdGVhZC4KICAgKi8KICAgY2FwdHVyZUV4Y2VwdGlvbihleGNlcHRpb24sIGhpbnQpIHsKICAgIGNvbnN0IGV2ZW50SWQgPSAodGhpcy5fbGFzdEV2ZW50SWQgPSBoaW50ICYmIGhpbnQuZXZlbnRfaWQgPyBoaW50LmV2ZW50X2lkIDogdXVpZDQoKSk7CiAgICBjb25zdCBzeW50aGV0aWNFeGNlcHRpb24gPSBuZXcgRXJyb3IoJ1NlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24nKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTY29wZSgpLmNhcHR1cmVFeGNlcHRpb24oZXhjZXB0aW9uLCB7CiAgICAgIG9yaWdpbmFsRXhjZXB0aW9uOiBleGNlcHRpb24sCiAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbiwKICAgICAgLi4uaGludCwKICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsCiAgICB9KTsKCiAgICByZXR1cm4gZXZlbnRJZDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgIGBTZW50cnkuY2FwdHVyZU1lc3NhZ2UoKWAgaW5zdGVhZC4KICAgKi8KICAgY2FwdHVyZU1lc3NhZ2UoCiAgICBtZXNzYWdlLAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBsZXZlbCwKICAgIGhpbnQsCiAgKSB7CiAgICBjb25zdCBldmVudElkID0gKHRoaXMuX2xhc3RFdmVudElkID0gaGludCAmJiBoaW50LmV2ZW50X2lkID8gaGludC5ldmVudF9pZCA6IHV1aWQ0KCkpOwogICAgY29uc3Qgc3ludGhldGljRXhjZXB0aW9uID0gbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldFNjb3BlKCkuY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIHsKICAgICAgb3JpZ2luYWxFeGNlcHRpb246IG1lc3NhZ2UsCiAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbiwKICAgICAgLi4uaGludCwKICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsCiAgICB9KTsKCiAgICByZXR1cm4gZXZlbnRJZDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5jYXB0dXJlRXZlbnQoKWAgaW5zdGVhZC4KICAgKi8KICAgY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50KSB7CiAgICBjb25zdCBldmVudElkID0gaGludCAmJiBoaW50LmV2ZW50X2lkID8gaGludC5ldmVudF9pZCA6IHV1aWQ0KCk7CiAgICBpZiAoIWV2ZW50LnR5cGUpIHsKICAgICAgdGhpcy5fbGFzdEV2ZW50SWQgPSBldmVudElkOwogICAgfQogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldFNjb3BlKCkuY2FwdHVyZUV2ZW50KGV2ZW50LCB7IC4uLmhpbnQsIGV2ZW50X2lkOiBldmVudElkIH0pOwogICAgcmV0dXJuIGV2ZW50SWQ7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjguCiAgICovCiAgIGxhc3RFdmVudElkKCkgewogICAgcmV0dXJuIHRoaXMuX2xhc3RFdmVudElkOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LmFkZEJyZWFkY3J1bWIoKWAgaW5zdGVhZC4KICAgKi8KICAgYWRkQnJlYWRjcnVtYihicmVhZGNydW1iLCBoaW50KSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IHsgc2NvcGUsIGNsaWVudCB9ID0gdGhpcy5nZXRTdGFja1RvcCgpOwoKICAgIGlmICghY2xpZW50KSByZXR1cm47CgogICAgY29uc3QgeyBiZWZvcmVCcmVhZGNydW1iID0gbnVsbCwgbWF4QnJlYWRjcnVtYnMgPSBERUZBVUxUX0JSRUFEQ1JVTUJTIH0gPQogICAgICAoY2xpZW50LmdldE9wdGlvbnMgJiYgY2xpZW50LmdldE9wdGlvbnMoKSkgfHwge307CgogICAgaWYgKG1heEJyZWFkY3J1bWJzIDw9IDApIHJldHVybjsKCiAgICBjb25zdCB0aW1lc3RhbXAgPSBkYXRlVGltZXN0YW1wSW5TZWNvbmRzKCk7CiAgICBjb25zdCBtZXJnZWRCcmVhZGNydW1iID0geyB0aW1lc3RhbXAsIC4uLmJyZWFkY3J1bWIgfTsKICAgIGNvbnN0IGZpbmFsQnJlYWRjcnVtYiA9IGJlZm9yZUJyZWFkY3J1bWIKICAgICAgPyAoY29uc29sZVNhbmRib3goKCkgPT4gYmVmb3JlQnJlYWRjcnVtYihtZXJnZWRCcmVhZGNydW1iLCBoaW50KSkgKQogICAgICA6IG1lcmdlZEJyZWFkY3J1bWI7CgogICAgaWYgKGZpbmFsQnJlYWRjcnVtYiA9PT0gbnVsbCkgcmV0dXJuOwoKICAgIGlmIChjbGllbnQuZW1pdCkgewogICAgICBjbGllbnQuZW1pdCgnYmVmb3JlQWRkQnJlYWRjcnVtYicsIGZpbmFsQnJlYWRjcnVtYiwgaGludCk7CiAgICB9CgogICAgLy8gVE9ETyh2OCk6IEkga25vdyB0aGlzIGNvbW1lbnQgZG9lc24ndCBtYWtlIG11Y2ggc2Vuc2UgYmVjYXVzZSB0aGUgaHViIHdpbGwgYmUgZGVwcmVjYXRlZCBidXQgSSBzdGlsbCB3YW50ZWQgdG8KICAgIC8vIHdyaXRlIGl0IGRvd24uIEluIHRoZW9yeSwgd2Ugd291bGQgaGF2ZSB0byBhZGQgdGhlIGJyZWFkY3J1bWJzIHRvIHRoZSBpc29sYXRpb24gc2NvcGUgaGVyZSwgaG93ZXZlciwgdGhhdCB3b3VsZAogICAgLy8gZHVwbGljYXRlIGFsbCBvZiB0aGUgYnJlYWRjcnVtYnMuIFRoZXJlIHdhcyB0aGUgcG9zc2liaWxpdHkgb2YgYWRkaW5nIGJyZWFkY3J1bWJzIHRvIGJvdGgsIHRoZSBpc29sYXRpb24gc2NvcGUKICAgIC8vIGFuZCB0aGUgbm9ybWFsIHNjb3BlLCBhbmQgZGVkdXBsaWNhdGluZyBpdCBkb3duIHRoZSBsaW5lIGluIHRoZSBldmVudCBwcm9jZXNzaW5nIHBpcGVsaW5lLiBIb3dldmVyLCB0aGF0IHdvdWxkCiAgICAvLyBoYXZlIGJlZW4gdmVyeSBmcmFnaWxlLCBiZWNhdXNlIHRoZSBicmVhZGNydW1iIG9iamVjdHMgd291bGQgaGF2ZSBuZWVkZWQgdG8ga2VlcCB0aGVpciBpZGVudGl0eSBhbGwgdGhyb3VnaG91dAogICAgLy8gdGhlIGV2ZW50IHByb2Nlc3NpbmcgcGlwZWxpbmUuCiAgICAvLyBJbiB0aGUgbmV3IGltcGxlbWVudGF0aW9uLCB0aGUgdG9wIGxldmVsIGBTZW50cnkuYWRkQnJlYWRjcnVtYigpYCBzaG91bGQgT05MWSB3cml0ZSB0byB0aGUgaXNvbGF0aW9uIHNjb3BlLgoKICAgIHNjb3BlLmFkZEJyZWFkY3J1bWIoZmluYWxCcmVhZGNydW1iLCBtYXhCcmVhZGNydW1icyk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LnNldFVzZXIoKWAgaW5zdGVhZC4KICAgKi8KICAgc2V0VXNlcih1c2VyKSB7CiAgICAvLyBUT0RPKHY4KTogVGhlIHRvcCBsZXZlbCBgU2VudHJ5LnNldFVzZXIoKWAgZnVuY3Rpb24gc2hvdWxkIHdyaXRlIE9OTFkgdG8gdGhlIGlzb2xhdGlvbiBzY29wZS4KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTY29wZSgpLnNldFVzZXIodXNlcik7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0SXNvbGF0aW9uU2NvcGUoKS5zZXRVc2VyKHVzZXIpOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5zZXRUYWdzKClgIGluc3RlYWQuCiAgICovCiAgIHNldFRhZ3ModGFncykgewogICAgLy8gVE9ETyh2OCk6IFRoZSB0b3AgbGV2ZWwgYFNlbnRyeS5zZXRUYWdzKClgIGZ1bmN0aW9uIHNob3VsZCB3cml0ZSBPTkxZIHRvIHRoZSBpc29sYXRpb24gc2NvcGUuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0U2NvcGUoKS5zZXRUYWdzKHRhZ3MpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldElzb2xhdGlvblNjb3BlKCkuc2V0VGFncyh0YWdzKTsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkuc2V0RXh0cmFzKClgIGluc3RlYWQuCiAgICovCiAgIHNldEV4dHJhcyhleHRyYXMpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0RXh0cmFzKClgIGZ1bmN0aW9uIHNob3VsZCB3cml0ZSBPTkxZIHRvIHRoZSBpc29sYXRpb24gc2NvcGUuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0U2NvcGUoKS5zZXRFeHRyYXMoZXh0cmFzKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRJc29sYXRpb25TY29wZSgpLnNldEV4dHJhcyhleHRyYXMpOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5zZXRUYWcoKWAgaW5zdGVhZC4KICAgKi8KICAgc2V0VGFnKGtleSwgdmFsdWUpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0VGFnKClgIGZ1bmN0aW9uIHNob3VsZCB3cml0ZSBPTkxZIHRvIHRoZSBpc29sYXRpb24gc2NvcGUuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0U2NvcGUoKS5zZXRUYWcoa2V5LCB2YWx1ZSk7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0SXNvbGF0aW9uU2NvcGUoKS5zZXRUYWcoa2V5LCB2YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LnNldEV4dHJhKClgIGluc3RlYWQuCiAgICovCiAgIHNldEV4dHJhKGtleSwgZXh0cmEpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0RXh0cmEoKWAgZnVuY3Rpb24gc2hvdWxkIHdyaXRlIE9OTFkgdG8gdGhlIGlzb2xhdGlvbiBzY29wZS4KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTY29wZSgpLnNldEV4dHJhKGtleSwgZXh0cmEpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldElzb2xhdGlvblNjb3BlKCkuc2V0RXh0cmEoa2V5LCBleHRyYSk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LnNldENvbnRleHQoKWAgaW5zdGVhZC4KICAgKi8KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICBzZXRDb250ZXh0KG5hbWUsIGNvbnRleHQpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0Q29udGV4dCgpYCBmdW5jdGlvbiBzaG91bGQgd3JpdGUgT05MWSB0byB0aGUgaXNvbGF0aW9uIHNjb3BlLgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldFNjb3BlKCkuc2V0Q29udGV4dChuYW1lLCBjb250ZXh0KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRJc29sYXRpb25TY29wZSgpLnNldENvbnRleHQobmFtZSwgY29udGV4dCk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBnZXRTY29wZSgpYCBkaXJlY3RseS4KICAgKi8KICAgY29uZmlndXJlU2NvcGUoY2FsbGJhY2spIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3QgeyBzY29wZSwgY2xpZW50IH0gPSB0aGlzLmdldFN0YWNrVG9wKCk7CiAgICBpZiAoY2xpZW50KSB7CiAgICAgIGNhbGxiYWNrKHNjb3BlKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgIHJ1bihjYWxsYmFjaykgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBjb25zdCBvbGRIdWIgPSBtYWtlTWFpbih0aGlzKTsKICAgIHRyeSB7CiAgICAgIGNhbGxiYWNrKHRoaXMpOwogICAgfSBmaW5hbGx5IHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICAgIG1ha2VNYWluKG9sZEh1Yik7CiAgICB9CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LmdldENsaWVudCgpLmdldEludGVncmF0aW9uQnlOYW1lKClgIGluc3RlYWQuCiAgICovCiAgIGdldEludGVncmF0aW9uKGludGVncmF0aW9uKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuZ2V0Q2xpZW50KCk7CiAgICBpZiAoIWNsaWVudCkgcmV0dXJuIG51bGw7CiAgICB0cnkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgcmV0dXJuIGNsaWVudC5nZXRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvbik7CiAgICB9IGNhdGNoIChfb08pIHsKICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYENhbm5vdCByZXRyaWV2ZSBpbnRlZ3JhdGlvbiAke2ludGVncmF0aW9uLmlkfSBmcm9tIHRoZSBjdXJyZW50IEh1YmApOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIC8qKgogICAqIFN0YXJ0cyBhIG5ldyBgVHJhbnNhY3Rpb25gIGFuZCByZXR1cm5zIGl0LiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCB0byBtYW51YWwgdHJhY2luZyBpbnN0cnVtZW50YXRpb24uCiAgICoKICAgKiBBIHRyZWUgc3RydWN0dXJlIGNhbiBiZSBidWlsdCBieSBhZGRpbmcgY2hpbGQgc3BhbnMgdG8gdGhlIHRyYW5zYWN0aW9uLCBhbmQgY2hpbGQgc3BhbnMgdG8gb3RoZXIgc3BhbnMuIFRvIHN0YXJ0IGEKICAgKiBuZXcgY2hpbGQgc3BhbiB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIG9yIGFueSBzcGFuLCBjYWxsIHRoZSByZXNwZWN0aXZlIGAuc3RhcnRDaGlsZCgpYCBtZXRob2QuCiAgICoKICAgKiBFdmVyeSBjaGlsZCBzcGFuIG11c3QgYmUgZmluaXNoZWQgYmVmb3JlIHRoZSB0cmFuc2FjdGlvbiBpcyBmaW5pc2hlZCwgb3RoZXJ3aXNlIHRoZSB1bmZpbmlzaGVkIHNwYW5zIGFyZSBkaXNjYXJkZWQuCiAgICoKICAgKiBUaGUgdHJhbnNhY3Rpb24gbXVzdCBiZSBmaW5pc2hlZCB3aXRoIGEgY2FsbCB0byBpdHMgYC5lbmQoKWAgbWV0aG9kLCBhdCB3aGljaCBwb2ludCB0aGUgdHJhbnNhY3Rpb24gd2l0aCBhbGwgaXRzCiAgICogZmluaXNoZWQgY2hpbGQgc3BhbnMgd2lsbCBiZSBzZW50IHRvIFNlbnRyeS4KICAgKgogICAqIEBwYXJhbSBjb250ZXh0IFByb3BlcnRpZXMgb2YgdGhlIG5ldyBgVHJhbnNhY3Rpb25gLgogICAqIEBwYXJhbSBjdXN0b21TYW1wbGluZ0NvbnRleHQgSW5mb3JtYXRpb24gZ2l2ZW4gdG8gdGhlIHRyYW5zYWN0aW9uIHNhbXBsaW5nIGZ1bmN0aW9uIChhbG9uZyB3aXRoIGNvbnRleHQtZGVwZW5kZW50CiAgICogZGVmYXVsdCB2YWx1ZXMpLiBTZWUge0BsaW5rIE9wdGlvbnMudHJhY2VzU2FtcGxlcn0uCiAgICoKICAgKiBAcmV0dXJucyBUaGUgdHJhbnNhY3Rpb24gd2hpY2ggd2FzIGp1c3Qgc3RhcnRlZAogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBzdGFydFNwYW4oKWAsIGBzdGFydFNwYW5NYW51YWwoKWAgb3IgYHN0YXJ0SW5hY3RpdmVTcGFuKClgIGluc3RlYWQuCiAgICovCiAgIHN0YXJ0VHJhbnNhY3Rpb24oY29udGV4dCwgY3VzdG9tU2FtcGxpbmdDb250ZXh0KSB7CiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9jYWxsRXh0ZW5zaW9uTWV0aG9kKCdzdGFydFRyYW5zYWN0aW9uJywgY29udGV4dCwgY3VzdG9tU2FtcGxpbmdDb250ZXh0KTsKCiAgICBpZiAoREVCVUdfQlVJTEQgJiYgIXJlc3VsdCkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgY29uc3QgY2xpZW50ID0gdGhpcy5nZXRDbGllbnQoKTsKICAgICAgaWYgKCFjbGllbnQpIHsKICAgICAgICBsb2dnZXIud2FybigKICAgICAgICAgICJUcmFjaW5nIGV4dGVuc2lvbiAnc3RhcnRUcmFuc2FjdGlvbicgaXMgbWlzc2luZy4gWW91IHNob3VsZCAnaW5pdCcgdGhlIFNESyBiZWZvcmUgY2FsbGluZyAnc3RhcnRUcmFuc2FjdGlvbiciLAogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9nZ2VyLndhcm4oYFRyYWNpbmcgZXh0ZW5zaW9uICdzdGFydFRyYW5zYWN0aW9uJyBoYXMgbm90IGJlZW4gYWRkZWQuIENhbGwgJ2FkZFRyYWNpbmdFeHRlbnNpb25zJyBiZWZvcmUgY2FsbGluZyAnaW5pdCc6ClNlbnRyeS5hZGRUcmFjaW5nRXh0ZW5zaW9ucygpOwpTZW50cnkuaW5pdCh7Li4ufSk7CmApOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBzcGFuVG9UcmFjZUhlYWRlcigpYCBpbnN0ZWFkLgogICAqLwogICB0cmFjZUhlYWRlcnMoKSB7CiAgICByZXR1cm4gdGhpcy5fY2FsbEV4dGVuc2lvbk1ldGhvZCgndHJhY2VIZWFkZXJzJyk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIHRvcCBsZXZlbCBgY2FwdHVyZVNlc3Npb25gIGluc3RlYWQuCiAgICovCiAgIGNhcHR1cmVTZXNzaW9uKGVuZFNlc3Npb24gPSBmYWxzZSkgewogICAgLy8gYm90aCBzZW5kIHRoZSB1cGRhdGUgYW5kIHB1bGwgdGhlIHNlc3Npb24gZnJvbSB0aGUgc2NvcGUKICAgIGlmIChlbmRTZXNzaW9uKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICByZXR1cm4gdGhpcy5lbmRTZXNzaW9uKCk7CiAgICB9CgogICAgLy8gb25seSBzZW5kIHRoZSB1cGRhdGUKICAgIHRoaXMuX3NlbmRTZXNzaW9uVXBkYXRlKCk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSB0b3AgbGV2ZWwgYGVuZFNlc3Npb25gIGluc3RlYWQuCiAgICovCiAgIGVuZFNlc3Npb24oKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRTdGFja1RvcCgpOwogICAgY29uc3Qgc2NvcGUgPSBsYXllci5zY29wZTsKICAgIGNvbnN0IHNlc3Npb24gPSBzY29wZS5nZXRTZXNzaW9uKCk7CiAgICBpZiAoc2Vzc2lvbikgewogICAgICBjbG9zZVNlc3Npb24oc2Vzc2lvbik7CiAgICB9CiAgICB0aGlzLl9zZW5kU2Vzc2lvblVwZGF0ZSgpOwoKICAgIC8vIHRoZSBzZXNzaW9uIGlzIG92ZXI7IHRha2UgaXQgb2ZmIG9mIHRoZSBzY29wZQogICAgc2NvcGUuc2V0U2Vzc2lvbigpOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgdG9wIGxldmVsIGBzdGFydFNlc3Npb25gIGluc3RlYWQuCiAgICovCiAgIHN0YXJ0U2Vzc2lvbihjb250ZXh0KSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IHsgc2NvcGUsIGNsaWVudCB9ID0gdGhpcy5nZXRTdGFja1RvcCgpOwogICAgY29uc3QgeyByZWxlYXNlLCBlbnZpcm9ubWVudCA9IERFRkFVTFRfRU5WSVJPTk1FTlQgfSA9IChjbGllbnQgJiYgY2xpZW50LmdldE9wdGlvbnMoKSkgfHwge307CgogICAgLy8gV2lsbCBmZXRjaCB1c2VyQWdlbnQgaWYgY2FsbGVkIGZyb20gYnJvd3NlciBzZGsKICAgIGNvbnN0IHsgdXNlckFnZW50IH0gPSBHTE9CQUxfT0JKLm5hdmlnYXRvciB8fCB7fTsKCiAgICBjb25zdCBzZXNzaW9uID0gbWFrZVNlc3Npb24oewogICAgICByZWxlYXNlLAogICAgICBlbnZpcm9ubWVudCwKICAgICAgdXNlcjogc2NvcGUuZ2V0VXNlcigpLAogICAgICAuLi4odXNlckFnZW50ICYmIHsgdXNlckFnZW50IH0pLAogICAgICAuLi5jb250ZXh0LAogICAgfSk7CgogICAgLy8gRW5kIGV4aXN0aW5nIHNlc3Npb24gaWYgdGhlcmUncyBvbmUKICAgIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gc2NvcGUuZ2V0U2Vzc2lvbiAmJiBzY29wZS5nZXRTZXNzaW9uKCk7CiAgICBpZiAoY3VycmVudFNlc3Npb24gJiYgY3VycmVudFNlc3Npb24uc3RhdHVzID09PSAnb2snKSB7CiAgICAgIHVwZGF0ZVNlc3Npb24oY3VycmVudFNlc3Npb24sIHsgc3RhdHVzOiAnZXhpdGVkJyB9KTsKICAgIH0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5lbmRTZXNzaW9uKCk7CgogICAgLy8gQWZ0ZXJ3YXJkcyB3ZSBzZXQgdGhlIG5ldyBzZXNzaW9uIG9uIHRoZSBzY29wZQogICAgc2NvcGUuc2V0U2Vzc2lvbihzZXNzaW9uKTsKCiAgICByZXR1cm4gc2Vzc2lvbjsKICB9CgogIC8qKgogICAqIFJldHVybnMgaWYgZGVmYXVsdCBQSUkgc2hvdWxkIGJlIHNlbnQgdG8gU2VudHJ5IGFuZCBwcm9wYWdhdGVkIGluIG91cmdvaW5nIHJlcXVlc3RzCiAgICogd2hlbiBUcmFjaW5nIGlzIHVzZWQuCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgdG9wLWxldmVsIGBnZXRDbGllbnQoKS5nZXRPcHRpb25zKCkuc2VuZERlZmF1bHRQaWlgIGluc3RlYWQuIFRoaXMgZnVuY3Rpb24KICAgKiBvbmx5IHVubmVjZXNzYXJpbHkgaW5jcmVhc2VkIEFQSSBzdXJmYWNlIGJ1dCBvbmx5IHdyYXBwZWQgYWNjZXNzaW5nIHRoZSBvcHRpb24uCiAgICovCiAgIHNob3VsZFNlbmREZWZhdWx0UGlpKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBjb25zdCBjbGllbnQgPSB0aGlzLmdldENsaWVudCgpOwogICAgY29uc3Qgb3B0aW9ucyA9IGNsaWVudCAmJiBjbGllbnQuZ2V0T3B0aW9ucygpOwogICAgcmV0dXJuIEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLnNlbmREZWZhdWx0UGlpKTsKICB9CgogIC8qKgogICAqIFNlbmRzIHRoZSBjdXJyZW50IFNlc3Npb24gb24gdGhlIHNjb3BlCiAgICovCiAgIF9zZW5kU2Vzc2lvblVwZGF0ZSgpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3QgeyBzY29wZSwgY2xpZW50IH0gPSB0aGlzLmdldFN0YWNrVG9wKCk7CgogICAgY29uc3Qgc2Vzc2lvbiA9IHNjb3BlLmdldFNlc3Npb24oKTsKICAgIGlmIChzZXNzaW9uICYmIGNsaWVudCAmJiBjbGllbnQuY2FwdHVyZVNlc3Npb24pIHsKICAgICAgY2xpZW50LmNhcHR1cmVTZXNzaW9uKHNlc3Npb24pOwogICAgfQogIH0KCiAgLyoqCiAgICogQ2FsbHMgZ2xvYmFsIGV4dGVuc2lvbiBtZXRob2QgYW5kIGJpbmRpbmcgY3VycmVudCBpbnN0YW5jZSB0byB0aGUgZnVuY3Rpb24gY2FsbAogICAqLwogIC8vIEB0cy1leHBlY3QtZXJyb3IgRnVuY3Rpb24gbGFja3MgZW5kaW5nIHJldHVybiBzdGF0ZW1lbnQgYW5kIHJldHVybiB0eXBlIGRvZXMgbm90IGluY2x1ZGUgJ3VuZGVmaW5lZCcuIHRzKDIzNjYpCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgX2NhbGxFeHRlbnNpb25NZXRob2QobWV0aG9kLCAuLi5hcmdzKSB7CiAgICBjb25zdCBjYXJyaWVyID0gZ2V0TWFpbkNhcnJpZXIoKTsKICAgIGNvbnN0IHNlbnRyeSA9IGNhcnJpZXIuX19TRU5UUllfXzsKICAgIGlmIChzZW50cnkgJiYgc2VudHJ5LmV4dGVuc2lvbnMgJiYgdHlwZW9mIHNlbnRyeS5leHRlbnNpb25zW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIHNlbnRyeS5leHRlbnNpb25zW21ldGhvZF0uYXBwbHkodGhpcywgYXJncyk7CiAgICB9CiAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybihgRXh0ZW5zaW9uIG1ldGhvZCAke21ldGhvZH0gY291bGRuJ3QgYmUgZm91bmQsIGRvaW5nIG5vdGhpbmcuYCk7CiAgfQp9CgovKioKICogUmV0dXJucyB0aGUgZ2xvYmFsIHNoaW0gcmVnaXN0cnkuCiAqCiAqIEZJWE1FOiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JsZW1hdGljLCBiZWNhdXNlIGRlc3BpdGUgYWx3YXlzIHJldHVybmluZyBhIHZhbGlkIENhcnJpZXIsCiAqIGl0IGhhcyBhbiBvcHRpb25hbCBgX19TRU5UUllfX2AgcHJvcGVydHksIHdoaWNoIHRoZW4gaW4gdHVybiByZXF1aXJlcyB1cyB0byBhbHdheXMgcGVyZm9ybSBhbiB1bm5lY2Vzc2FyeSBjaGVjawogKiBhdCB0aGUgY2FsbC1zaXRlLiBXZSBhbHdheXMgYWNjZXNzIHRoZSBjYXJyaWVyIHRocm91Z2ggdGhpcyBmdW5jdGlvbiwgc28gd2UgY2FuIGd1YXJhbnRlZSB0aGF0IGBfX1NFTlRSWV9fYCBpcyB0aGVyZS4KICoqLwpmdW5jdGlvbiBnZXRNYWluQ2FycmllcigpIHsKICBHTE9CQUxfT0JKLl9fU0VOVFJZX18gPSBHTE9CQUxfT0JKLl9fU0VOVFJZX18gfHwgewogICAgZXh0ZW5zaW9uczoge30sCiAgICBodWI6IHVuZGVmaW5lZCwKICB9OwogIHJldHVybiBHTE9CQUxfT0JKOwp9CgovKioKICogUmVwbGFjZXMgdGhlIGN1cnJlbnQgbWFpbiBodWIgd2l0aCB0aGUgcGFzc2VkIG9uZSBvbiB0aGUgZ2xvYmFsIG9iamVjdAogKgogKiBAcmV0dXJucyBUaGUgb2xkIHJlcGxhY2VkIGh1YgogKgogKiBAZGVwcmVjYXRlZCBVc2UgYHNldEN1cnJlbnRDbGllbnQoKWAgaW5zdGVhZC4KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBtYWtlTWFpbihodWIpIHsKICBjb25zdCByZWdpc3RyeSA9IGdldE1haW5DYXJyaWVyKCk7CiAgY29uc3Qgb2xkSHViID0gZ2V0SHViRnJvbUNhcnJpZXIocmVnaXN0cnkpOwogIHNldEh1Yk9uQ2FycmllcihyZWdpc3RyeSwgaHViKTsKICByZXR1cm4gb2xkSHViOwp9CgovKioKICogUmV0dXJucyB0aGUgZGVmYXVsdCBodWIgaW5zdGFuY2UuCiAqCiAqIElmIGEgaHViIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCBpbiB0aGUgZ2xvYmFsIGNhcnJpZXIgYnV0IHRoaXMgbW9kdWxlCiAqIGNvbnRhaW5zIGEgbW9yZSByZWNlbnQgdmVyc2lvbiwgaXQgcmVwbGFjZXMgdGhlIHJlZ2lzdGVyZWQgdmVyc2lvbi4KICogT3RoZXJ3aXNlLCB0aGUgY3VycmVudGx5IHJlZ2lzdGVyZWQgaHViIHdpbGwgYmUgcmV0dXJuZWQuCiAqCiAqIEBkZXByZWNhdGVkIFVzZSB0aGUgcmVzcGVjdGl2ZSByZXBsYWNlbWVudCBtZXRob2QgZGlyZWN0bHkgaW5zdGVhZC4KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBnZXRDdXJyZW50SHViKCkgewogIC8vIEdldCBtYWluIGNhcnJpZXIgKGdsb2JhbCBmb3IgZXZlcnkgZW52aXJvbm1lbnQpCiAgY29uc3QgcmVnaXN0cnkgPSBnZXRNYWluQ2FycmllcigpOwoKICBpZiAocmVnaXN0cnkuX19TRU5UUllfXyAmJiByZWdpc3RyeS5fX1NFTlRSWV9fLmFjcykgewogICAgY29uc3QgaHViID0gcmVnaXN0cnkuX19TRU5UUllfXy5hY3MuZ2V0Q3VycmVudEh1YigpOwoKICAgIGlmIChodWIpIHsKICAgICAgcmV0dXJuIGh1YjsKICAgIH0KICB9CgogIC8vIFJldHVybiBodWIgdGhhdCBsaXZlcyBvbiBhIGdsb2JhbCBvYmplY3QKICByZXR1cm4gZ2V0R2xvYmFsSHViKHJlZ2lzdHJ5KTsKfQoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCmZ1bmN0aW9uIGdldEdsb2JhbEh1YihyZWdpc3RyeSA9IGdldE1haW5DYXJyaWVyKCkpIHsKICAvLyBJZiB0aGVyZSdzIG5vIGh1Yiwgb3IgaXRzIGFuIG9sZCBBUEksIGFzc2lnbiBhIG5ldyBvbmUKCiAgaWYgKAogICAgIWhhc0h1Yk9uQ2FycmllcihyZWdpc3RyeSkgfHwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgZ2V0SHViRnJvbUNhcnJpZXIocmVnaXN0cnkpLmlzT2xkZXJUaGFuKEFQSV9WRVJTSU9OKQogICkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBzZXRIdWJPbkNhcnJpZXIocmVnaXN0cnksIG5ldyBIdWIoKSk7CiAgfQoKICAvLyBSZXR1cm4gaHViIHRoYXQgbGl2ZXMgb24gYSBnbG9iYWwgb2JqZWN0CiAgcmV0dXJuIGdldEh1YkZyb21DYXJyaWVyKHJlZ2lzdHJ5KTsKfQoKLyoqCiAqIFRoaXMgd2lsbCB0ZWxsIHdoZXRoZXIgYSBjYXJyaWVyIGhhcyBhIGh1YiBvbiBpdCBvciBub3QKICogQHBhcmFtIGNhcnJpZXIgb2JqZWN0CiAqLwpmdW5jdGlvbiBoYXNIdWJPbkNhcnJpZXIoY2FycmllcikgewogIHJldHVybiAhIShjYXJyaWVyICYmIGNhcnJpZXIuX19TRU5UUllfXyAmJiBjYXJyaWVyLl9fU0VOVFJZX18uaHViKTsKfQoKLyoqCiAqIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcge0BsaW5rIEh1Yn0gYW5kIGFkZCB0byB0aGUgcGFzc2VkIG9iamVjdCBvbgogKiBfX1NFTlRSWV9fLmh1Yi4KICogQHBhcmFtIGNhcnJpZXIgb2JqZWN0CiAqIEBoaWRkZW4KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBnZXRIdWJGcm9tQ2FycmllcihjYXJyaWVyKSB7CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgcmV0dXJuIGdldEdsb2JhbFNpbmdsZXRvbignaHViJywgKCkgPT4gbmV3IEh1YigpLCBjYXJyaWVyKTsKfQoKLyoqCiAqIFRoaXMgd2lsbCBzZXQgcGFzc2VkIHtAbGluayBIdWJ9IG9uIHRoZSBwYXNzZWQgb2JqZWN0J3MgX19TRU5UUllfXy5odWIgYXR0cmlidXRlCiAqIEBwYXJhbSBjYXJyaWVyIG9iamVjdAogKiBAcGFyYW0gaHViIEh1YgogKiBAcmV0dXJucyBBIGJvb2xlYW4gaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBzZXRIdWJPbkNhcnJpZXIoY2FycmllciwgaHViKSB7CiAgaWYgKCFjYXJyaWVyKSByZXR1cm4gZmFsc2U7CiAgY29uc3QgX19TRU5UUllfXyA9IChjYXJyaWVyLl9fU0VOVFJZX18gPSBjYXJyaWVyLl9fU0VOVFJZX18gfHwge30pOwogIF9fU0VOVFJZX18uaHViID0gaHViOwogIHJldHVybiB0cnVlOwp9CgovKioKICogQXBwbHkgU2RrSW5mbyAobmFtZSwgdmVyc2lvbiwgcGFja2FnZXMsIGludGVncmF0aW9ucykgdG8gdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQga2V5LgogKiBNZXJnZSB3aXRoIGV4aXN0aW5nIGRhdGEgaWYgYW55LgogKiovCmZ1bmN0aW9uIGVuaGFuY2VFdmVudFdpdGhTZGtJbmZvKGV2ZW50LCBzZGtJbmZvKSB7CiAgaWYgKCFzZGtJbmZvKSB7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQogIGV2ZW50LnNkayA9IGV2ZW50LnNkayB8fCB7fTsKICBldmVudC5zZGsubmFtZSA9IGV2ZW50LnNkay5uYW1lIHx8IHNka0luZm8ubmFtZTsKICBldmVudC5zZGsudmVyc2lvbiA9IGV2ZW50LnNkay52ZXJzaW9uIHx8IHNka0luZm8udmVyc2lvbjsKICBldmVudC5zZGsuaW50ZWdyYXRpb25zID0gWy4uLihldmVudC5zZGsuaW50ZWdyYXRpb25zIHx8IFtdKSwgLi4uKHNka0luZm8uaW50ZWdyYXRpb25zIHx8IFtdKV07CiAgZXZlbnQuc2RrLnBhY2thZ2VzID0gWy4uLihldmVudC5zZGsucGFja2FnZXMgfHwgW10pLCAuLi4oc2RrSW5mby5wYWNrYWdlcyB8fCBbXSldOwogIHJldHVybiBldmVudDsKfQoKLyoqIENyZWF0ZXMgYW4gZW52ZWxvcGUgZnJvbSBhIFNlc3Npb24gKi8KZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbkVudmVsb3BlKAogIHNlc3Npb24sCiAgZHNuLAogIG1ldGFkYXRhLAogIHR1bm5lbCwKKSB7CiAgY29uc3Qgc2RrSW5mbyA9IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGEpOwogIGNvbnN0IGVudmVsb3BlSGVhZGVycyA9IHsKICAgIHNlbnRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgIC4uLihzZGtJbmZvICYmIHsgc2RrOiBzZGtJbmZvIH0pLAogICAgLi4uKCEhdHVubmVsICYmIGRzbiAmJiB7IGRzbjogZHNuVG9TdHJpbmcoZHNuKSB9KSwKICB9OwoKICBjb25zdCBlbnZlbG9wZUl0ZW0gPQogICAgJ2FnZ3JlZ2F0ZXMnIGluIHNlc3Npb24gPyBbeyB0eXBlOiAnc2Vzc2lvbnMnIH0sIHNlc3Npb25dIDogW3sgdHlwZTogJ3Nlc3Npb24nIH0sIHNlc3Npb24udG9KU09OKCldOwoKICByZXR1cm4gY3JlYXRlRW52ZWxvcGUoZW52ZWxvcGVIZWFkZXJzLCBbZW52ZWxvcGVJdGVtXSk7Cn0KCi8qKgogKiBDcmVhdGUgYW4gRW52ZWxvcGUgZnJvbSBhbiBldmVudC4KICovCmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW52ZWxvcGUoCiAgZXZlbnQsCiAgZHNuLAogIG1ldGFkYXRhLAogIHR1bm5lbCwKKSB7CiAgY29uc3Qgc2RrSW5mbyA9IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGEpOwoKICAvKgogICAgTm90ZTogRHVlIHRvIFRTLCBldmVudC50eXBlIG1heSBiZSBgcmVwbGF5X2V2ZW50YCwgdGhlb3JldGljYWxseS4KICAgIEluIHByYWN0aWNlLCB3ZSBuZXZlciBjYWxsIGBjcmVhdGVFdmVudEVudmVsb3BlYCB3aXRoIGByZXBsYXlfZXZlbnRgIHR5cGUsCiAgICBhbmQgd2UnZCBoYXZlIHRvIGFkanV0IGEgbG9vb3Qgb2YgdHlwZXMgdG8gbWFrZSB0aGlzIHdvcmsgcHJvcGVybHkuCiAgICBXZSB3YW50IHRvIGF2b2lkIGNhc3RpbmcgdGhpcyBhcm91bmQsIGFzIHRoYXQgY291bGQgbGVhZCB0byBidWdzIChlLmcuIHdoZW4gd2UgYWRkIGFub3RoZXIgdHlwZSkKICAgIFNvIHRoZSBzYWZlIGNob2ljZSBpcyB0byByZWFsbHkgZ3VhcmQgYWdhaW5zdCB0aGUgcmVwbGF5X2V2ZW50IHR5cGUgaGVyZS4KICAqLwogIGNvbnN0IGV2ZW50VHlwZSA9IGV2ZW50LnR5cGUgJiYgZXZlbnQudHlwZSAhPT0gJ3JlcGxheV9ldmVudCcgPyBldmVudC50eXBlIDogJ2V2ZW50JzsKCiAgZW5oYW5jZUV2ZW50V2l0aFNka0luZm8oZXZlbnQsIG1ldGFkYXRhICYmIG1ldGFkYXRhLnNkayk7CgogIGNvbnN0IGVudmVsb3BlSGVhZGVycyA9IGNyZWF0ZUV2ZW50RW52ZWxvcGVIZWFkZXJzKGV2ZW50LCBzZGtJbmZvLCB0dW5uZWwsIGRzbik7CgogIC8vIFByZXZlbnQgdGhpcyBkYXRhICh3aGljaCwgaWYgaXQgZXhpc3RzLCB3YXMgdXNlZCBpbiBlYXJsaWVyIHN0ZXBzIGluIHRoZSBwcm9jZXNzaW5nIHBpcGVsaW5lKSBmcm9tIGJlaW5nIHNlbnQgdG8KICAvLyBzZW50cnkuIChOb3RlOiBPdXIgdXNlIG9mIHRoaXMgcHJvcGVydHkgY29tZXMgYW5kIGdvZXMgd2l0aCB3aGF0ZXZlciB3ZSBtaWdodCBiZSBkZWJ1Z2dpbmcsIHdoYXRldmVyIGhhY2tzIHdlIG1heQogIC8vIGhhdmUgdGVtcG9yYXJpbHkgYWRkZWQsIGV0Yy4gRXZlbiBpZiB3ZSBkb24ndCBoYXBwZW4gdG8gYmUgdXNpbmcgaXQgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLCBsZXQncyBub3QgZ2V0IHJpZAogIC8vIG9mIHRoaXMgYGRlbGV0ZWAsIGxlc3Qgd2UgbWlzcyBwdXR0aW5nIGl0IGJhY2sgaW4gdGhlIG5leHQgdGltZSB0aGUgcHJvcGVydHkgaXMgaW4gdXNlLikKICBkZWxldGUgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhOwoKICBjb25zdCBldmVudEl0ZW0gPSBbeyB0eXBlOiBldmVudFR5cGUgfSwgZXZlbnRdOwogIHJldHVybiBjcmVhdGVFbnZlbG9wZShlbnZlbG9wZUhlYWRlcnMsIFtldmVudEl0ZW1dKTsKfQoKY29uc3QgU0VOVFJZX0FQSV9WRVJTSU9OID0gJzcnOwoKLyoqIFJldHVybnMgdGhlIHByZWZpeCB0byBjb25zdHJ1Y3QgU2VudHJ5IGluZ2VzdGlvbiBBUEkgZW5kcG9pbnRzLiAqLwpmdW5jdGlvbiBnZXRCYXNlQXBpRW5kcG9pbnQoZHNuKSB7CiAgY29uc3QgcHJvdG9jb2wgPSBkc24ucHJvdG9jb2wgPyBgJHtkc24ucHJvdG9jb2x9OmAgOiAnJzsKICBjb25zdCBwb3J0ID0gZHNuLnBvcnQgPyBgOiR7ZHNuLnBvcnR9YCA6ICcnOwogIHJldHVybiBgJHtwcm90b2NvbH0vLyR7ZHNuLmhvc3R9JHtwb3J0fSR7ZHNuLnBhdGggPyBgLyR7ZHNuLnBhdGh9YCA6ICcnfS9hcGkvYDsKfQoKLyoqIFJldHVybnMgdGhlIGluZ2VzdCBBUEkgZW5kcG9pbnQgZm9yIHRhcmdldC4gKi8KZnVuY3Rpb24gX2dldEluZ2VzdEVuZHBvaW50KGRzbikgewogIHJldHVybiBgJHtnZXRCYXNlQXBpRW5kcG9pbnQoZHNuKX0ke2Rzbi5wcm9qZWN0SWR9L2VudmVsb3BlL2A7Cn0KCi8qKiBSZXR1cm5zIGEgVVJMLWVuY29kZWQgc3RyaW5nIHdpdGggYXV0aCBjb25maWcgc3VpdGFibGUgZm9yIGEgcXVlcnkgc3RyaW5nLiAqLwpmdW5jdGlvbiBfZW5jb2RlZEF1dGgoZHNuLCBzZGtJbmZvKSB7CiAgcmV0dXJuIHVybEVuY29kZSh7CiAgICAvLyBXZSBzZW5kIG9ubHkgdGhlIG1pbmltdW0gc2V0IG9mIHJlcXVpcmVkIGluZm9ybWF0aW9uLiBTZWUKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzI1NzIuCiAgICBzZW50cnlfa2V5OiBkc24ucHVibGljS2V5LAogICAgc2VudHJ5X3ZlcnNpb246IFNFTlRSWV9BUElfVkVSU0lPTiwKICAgIC4uLihzZGtJbmZvICYmIHsgc2VudHJ5X2NsaWVudDogYCR7c2RrSW5mby5uYW1lfS8ke3Nka0luZm8udmVyc2lvbn1gIH0pLAogIH0pOwp9CgovKioKICogUmV0dXJucyB0aGUgZW52ZWxvcGUgZW5kcG9pbnQgVVJMIHdpdGggYXV0aCBpbiB0aGUgcXVlcnkgc3RyaW5nLgogKgogKiBTZW5kaW5nIGF1dGggYXMgcGFydCBvZiB0aGUgcXVlcnkgc3RyaW5nIGFuZCBub3QgYXMgY3VzdG9tIEhUVFAgaGVhZGVycyBhdm9pZHMgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdHMuCiAqLwpmdW5jdGlvbiBnZXRFbnZlbG9wZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoKAogIGRzbiwKICAvLyBUT0RPICh2OCk6IFJlbW92ZSBgdHVubmVsT3JPcHRpb25zYCBpbiBmYXZvciBvZiBgb3B0aW9uc2AsIGFuZCB1c2UgdGhlIHN1YnN0aXR1dGUgY29kZSBiZWxvdwogIC8vIG9wdGlvbnM6IENsaWVudE9wdGlvbnMgPSB7fSBhcyBDbGllbnRPcHRpb25zLAogIHR1bm5lbE9yT3B0aW9ucyA9IHt9ICwKKSB7CiAgLy8gVE9ETyAodjgpOiBVc2UgdGhpcyBjb2RlIGluc3RlYWQKICAvLyBjb25zdCB7IHR1bm5lbCwgX21ldGFkYXRhID0ge30gfSA9IG9wdGlvbnM7CiAgLy8gcmV0dXJuIHR1bm5lbCA/IHR1bm5lbCA6IGAke19nZXRJbmdlc3RFbmRwb2ludChkc24pfT8ke19lbmNvZGVkQXV0aChkc24sIF9tZXRhZGF0YS5zZGspfWA7CgogIGNvbnN0IHR1bm5lbCA9IHR5cGVvZiB0dW5uZWxPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gdHVubmVsT3JPcHRpb25zIDogdHVubmVsT3JPcHRpb25zLnR1bm5lbDsKICBjb25zdCBzZGtJbmZvID0KICAgIHR5cGVvZiB0dW5uZWxPck9wdGlvbnMgPT09ICdzdHJpbmcnIHx8ICF0dW5uZWxPck9wdGlvbnMuX21ldGFkYXRhID8gdW5kZWZpbmVkIDogdHVubmVsT3JPcHRpb25zLl9tZXRhZGF0YS5zZGs7CgogIHJldHVybiB0dW5uZWwgPyB0dW5uZWwgOiBgJHtfZ2V0SW5nZXN0RW5kcG9pbnQoZHNuKX0/JHtfZW5jb2RlZEF1dGgoZHNuLCBzZGtJbmZvKX1gOwp9Cgpjb25zdCBERUZBVUxUX1RSQU5TUE9SVF9CVUZGRVJfU0laRSA9IDMwOwoKLyoqCiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYSBTZW50cnkgYFRyYW5zcG9ydGAKICoKICogQHBhcmFtIG9wdGlvbnMKICogQHBhcmFtIG1ha2VSZXF1ZXN0CiAqLwpmdW5jdGlvbiBjcmVhdGVUcmFuc3BvcnQoCiAgb3B0aW9ucywKICBtYWtlUmVxdWVzdCwKICBidWZmZXIgPSBtYWtlUHJvbWlzZUJ1ZmZlcigKICAgIG9wdGlvbnMuYnVmZmVyU2l6ZSB8fCBERUZBVUxUX1RSQU5TUE9SVF9CVUZGRVJfU0laRSwKICApLAopIHsKICBsZXQgcmF0ZUxpbWl0cyA9IHt9OwogIGNvbnN0IGZsdXNoID0gKHRpbWVvdXQpID0+IGJ1ZmZlci5kcmFpbih0aW1lb3V0KTsKCiAgZnVuY3Rpb24gc2VuZChlbnZlbG9wZSkgewogICAgY29uc3QgZmlsdGVyZWRFbnZlbG9wZUl0ZW1zID0gW107CgogICAgLy8gRHJvcCByYXRlIGxpbWl0ZWQgaXRlbXMgZnJvbSBlbnZlbG9wZQogICAgZm9yRWFjaEVudmVsb3BlSXRlbShlbnZlbG9wZSwgKGl0ZW0sIHR5cGUpID0+IHsKICAgICAgY29uc3QgZGF0YUNhdGVnb3J5ID0gZW52ZWxvcGVJdGVtVHlwZVRvRGF0YUNhdGVnb3J5KHR5cGUpOwogICAgICBpZiAoaXNSYXRlTGltaXRlZChyYXRlTGltaXRzLCBkYXRhQ2F0ZWdvcnkpKSB7CiAgICAgICAgY29uc3QgZXZlbnQgPSBnZXRFdmVudEZvckVudmVsb3BlSXRlbShpdGVtLCB0eXBlKTsKICAgICAgICBvcHRpb25zLnJlY29yZERyb3BwZWRFdmVudCgncmF0ZWxpbWl0X2JhY2tvZmYnLCBkYXRhQ2F0ZWdvcnksIGV2ZW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWx0ZXJlZEVudmVsb3BlSXRlbXMucHVzaChpdGVtKTsKICAgICAgfQogICAgfSk7CgogICAgLy8gU2tpcCBzZW5kaW5nIGlmIGVudmVsb3BlIGlzIGVtcHR5IGFmdGVyIGZpbHRlcmluZyBvdXQgcmF0ZSBsaW1pdGVkIGV2ZW50cwogICAgaWYgKGZpbHRlcmVkRW52ZWxvcGVJdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIHJlc29sdmVkU3luY1Byb21pc2UoKTsKICAgIH0KCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgY29uc3QgZmlsdGVyZWRFbnZlbG9wZSA9IGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlWzBdLCBmaWx0ZXJlZEVudmVsb3BlSXRlbXMgKTsKCiAgICAvLyBDcmVhdGVzIGNsaWVudCByZXBvcnQgZm9yIGVhY2ggaXRlbSBpbiBhbiBlbnZlbG9wZQogICAgY29uc3QgcmVjb3JkRW52ZWxvcGVMb3NzID0gKHJlYXNvbikgPT4gewogICAgICBmb3JFYWNoRW52ZWxvcGVJdGVtKGZpbHRlcmVkRW52ZWxvcGUsIChpdGVtLCB0eXBlKSA9PiB7CiAgICAgICAgY29uc3QgZXZlbnQgPSBnZXRFdmVudEZvckVudmVsb3BlSXRlbShpdGVtLCB0eXBlKTsKICAgICAgICBvcHRpb25zLnJlY29yZERyb3BwZWRFdmVudChyZWFzb24sIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSwgZXZlbnQpOwogICAgICB9KTsKICAgIH07CgogICAgY29uc3QgcmVxdWVzdFRhc2sgPSAoKSA9PgogICAgICBtYWtlUmVxdWVzdCh7IGJvZHk6IHNlcmlhbGl6ZUVudmVsb3BlKGZpbHRlcmVkRW52ZWxvcGUsIG9wdGlvbnMudGV4dEVuY29kZXIpIH0pLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byB0aHJvdyBvbiBOT0sgcmVzcG9uc2VzLCBidXQgd2Ugd2FudCB0byBhdCBsZWFzdCBsb2cgdGhlbQogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IHVuZGVmaW5lZCAmJiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXNDb2RlID49IDMwMCkpIHsKICAgICAgICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYFNlbnRyeSByZXNwb25kZWQgd2l0aCBzdGF0dXMgY29kZSAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9IHRvIHNlbnQgZXZlbnQuYCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmF0ZUxpbWl0cyA9IHVwZGF0ZVJhdGVMaW1pdHMocmF0ZUxpbWl0cywgcmVzcG9uc2UpOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgIH0sCiAgICAgICAgZXJyb3IgPT4gewogICAgICAgICAgcmVjb3JkRW52ZWxvcGVMb3NzKCduZXR3b3JrX2Vycm9yJyk7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9LAogICAgICApOwoKICAgIHJldHVybiBidWZmZXIuYWRkKHJlcXVlc3RUYXNrKS50aGVuKAogICAgICByZXN1bHQgPT4gcmVzdWx0LAogICAgICBlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VudHJ5RXJyb3IpIHsKICAgICAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5lcnJvcignU2tpcHBlZCBzZW5kaW5nIGV2ZW50IGJlY2F1c2UgYnVmZmVyIGlzIGZ1bGwuJyk7CiAgICAgICAgICByZWNvcmRFbnZlbG9wZUxvc3MoJ3F1ZXVlX292ZXJmbG93Jyk7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZWRTeW5jUHJvbWlzZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9CiAgICAgIH0sCiAgICApOwogIH0KCiAgLy8gV2UgdXNlIHRoaXMgdG8gaWRlbnRpZmlmeSBpZiB0aGUgdHJhbnNwb3J0IGlzIHRoZSBiYXNlIHRyYW5zcG9ydAogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIHRoaXMgYWdhaW4gYXMgd2UnbGwgbm8gbG9uZ2VyIG5lZWQgaXQKICBzZW5kLl9fc2VudHJ5X19iYXNlVHJhbnNwb3J0X18gPSB0cnVlOwoKICByZXR1cm4gewogICAgc2VuZCwKICAgIGZsdXNoLAogIH07Cn0KCmZ1bmN0aW9uIGdldEV2ZW50Rm9yRW52ZWxvcGVJdGVtKGl0ZW0sIHR5cGUpIHsKICBpZiAodHlwZSAhPT0gJ2V2ZW50JyAmJiB0eXBlICE9PSAndHJhbnNhY3Rpb24nKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaXRlbSkgPyAoaXRlbSApWzFdIDogdW5kZWZpbmVkOwp9CgovKiogbm9ybWFsaXplcyBXaW5kb3dzIHBhdGhzICovCmZ1bmN0aW9uIG5vcm1hbGl6ZVdpbmRvd3NQYXRoKHBhdGgpIHsKICByZXR1cm4gcGF0aAogICAgLnJlcGxhY2UoL15bQS1aXTovLCAnJykgLy8gcmVtb3ZlIFdpbmRvd3Mtc3R5bGUgcHJlZml4CiAgICAucmVwbGFjZSgvXFwvZywgJy8nKTsgLy8gcmVwbGFjZSBhbGwgYFxgIGluc3RhbmNlcyB3aXRoIGAvYAp9CgovKiogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZ2V0cyB0aGUgbW9kdWxlIG5hbWUgZnJvbSBhIGZpbGVuYW1lICovCmZ1bmN0aW9uIGNyZWF0ZUdldE1vZHVsZUZyb21GaWxlbmFtZSgKICBiYXNlUGF0aCA9IHByb2Nlc3MuYXJndlsxXSA/IGRpcm5hbWUocHJvY2Vzcy5hcmd2WzFdKSA6IHByb2Nlc3MuY3dkKCksCiAgaXNXaW5kb3dzID0gc2VwID09PSAnXFwnLAopIHsKICBjb25zdCBub3JtYWxpemVkQmFzZSA9IGlzV2luZG93cyA/IG5vcm1hbGl6ZVdpbmRvd3NQYXRoKGJhc2VQYXRoKSA6IGJhc2VQYXRoOwoKICByZXR1cm4gKGZpbGVuYW1lKSA9PiB7CiAgICBpZiAoIWZpbGVuYW1lKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBub3JtYWxpemVkRmlsZW5hbWUgPSBpc1dpbmRvd3MgPyBub3JtYWxpemVXaW5kb3dzUGF0aChmaWxlbmFtZSkgOiBmaWxlbmFtZTsKCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CiAgICBsZXQgeyBkaXIsIGJhc2U6IGZpbGUsIGV4dCB9ID0gcG9zaXgucGFyc2Uobm9ybWFsaXplZEZpbGVuYW1lKTsKCiAgICBpZiAoZXh0ID09PSAnLmpzJyB8fCBleHQgPT09ICcubWpzJyB8fCBleHQgPT09ICcuY2pzJykgewogICAgICBmaWxlID0gZmlsZS5zbGljZSgwLCBleHQubGVuZ3RoICogLTEpOwogICAgfQoKICAgIGlmICghZGlyKSB7CiAgICAgIC8vIE5vIGRpcm5hbWUgd2hhdHNvZXZlcgogICAgICBkaXIgPSAnLic7CiAgICB9CgogICAgY29uc3QgbiA9IGRpci5sYXN0SW5kZXhPZignL25vZGVfbW9kdWxlcycpOwogICAgaWYgKG4gPiAtMSkgewogICAgICByZXR1cm4gYCR7ZGlyLnNsaWNlKG4gKyAxNCkucmVwbGFjZSgvXC8vZywgJy4nKX06JHtmaWxlfWA7CiAgICB9CgogICAgLy8gTGV0J3Mgc2VlIGlmIGl0J3MgYSBwYXJ0IG9mIHRoZSBtYWluIG1vZHVsZQogICAgLy8gVG8gYmUgYSBwYXJ0IG9mIG1haW4gbW9kdWxlLCBpdCBoYXMgdG8gc2hhcmUgdGhlIHNhbWUgYmFzZQogICAgaWYgKGRpci5zdGFydHNXaXRoKG5vcm1hbGl6ZWRCYXNlKSkgewogICAgICBsZXQgbW9kdWxlTmFtZSA9IGRpci5zbGljZShub3JtYWxpemVkQmFzZS5sZW5ndGggKyAxKS5yZXBsYWNlKC9cLy9nLCAnLicpOwoKICAgICAgaWYgKG1vZHVsZU5hbWUpIHsKICAgICAgICBtb2R1bGVOYW1lICs9ICc6JzsKICAgICAgfQogICAgICBtb2R1bGVOYW1lICs9IGZpbGU7CgogICAgICByZXR1cm4gbW9kdWxlTmFtZTsKICAgIH0KCiAgICByZXR1cm4gZmlsZTsKICB9Owp9CgpmdW5jdGlvbiBfbnVsbGlzaENvYWxlc2NlJDIobGhzLCByaHNGbikgeyBpZiAobGhzICE9IG51bGwpIHsgcmV0dXJuIGxoczsgfSBlbHNlIHsgcmV0dXJuIHJoc0ZuKCk7IH0gfS8qKgogKiBUaGlzIGNvZGUgd2FzIG9yaWdpbmFsbHkgZm9ya2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL1Rvb1RhbGxOYXRlL3Byb3h5LWFnZW50cy90cmVlL2IxMzMyOTVmZDE2ZjY0NzU1NzhiNmIxNWJkOWI0ZTMzZWNiMGQwYjcKICogV2l0aCB0aGUgZm9sbG93aW5nIGxpY2VuY2U6CiAqCiAqIChUaGUgTUlUIExpY2Vuc2UpCiAqCiAqIENvcHlyaWdodCAoYykgMjAxMyBOYXRoYW4gUmFqbGljaCA8bmF0aGFuQHRvb3RhbGxuYXRlLm5ldD4qCiAqCiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwogKiBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKICogJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwogKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0bwogKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8KICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOioKICoKICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuKgogKgogKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwKICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4KICogSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkKICogQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwKICogVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUKICogU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAqLwoKY29uc3QgSU5URVJOQUwgPSBTeW1ib2woJ0FnZW50QmFzZUludGVybmFsU3RhdGUnKTsKCmNsYXNzIEFnZW50IGV4dGVuZHMgaHR0cC5BZ2VudCB7CgogIC8vIFNldCBieSBgaHR0cC5BZ2VudGAgLSBtaXNzaW5nIGZyb20gYEB0eXBlcy9ub2RlYAoKICBjb25zdHJ1Y3RvcihvcHRzKSB7CiAgICBzdXBlcihvcHRzKTsKICAgIHRoaXNbSU5URVJOQUxdID0ge307CiAgfQoKICAvKioKICAgKiBEZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGFuIGBodHRwYCBvciBgaHR0cHNgIHJlcXVlc3QuCiAgICovCiAgaXNTZWN1cmVFbmRwb2ludChvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucykgewogICAgICAvLyBGaXJzdCBjaGVjayB0aGUgYHNlY3VyZUVuZHBvaW50YCBwcm9wZXJ0eSBleHBsaWNpdGx5LCBzaW5jZSB0aGlzCiAgICAgIC8vIG1lYW5zIHRoYXQgYSBwYXJlbnQgYEFnZW50YCBpcyAicGFzc2luZyB0aHJvdWdoIiB0byB0aGlzIGluc3RhbmNlLgogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzCiAgICAgIGlmICh0eXBlb2YgKG9wdGlvbnMgKS5zZWN1cmVFbmRwb2ludCA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnMuc2VjdXJlRW5kcG9pbnQ7CiAgICAgIH0KCiAgICAgIC8vIElmIG5vIGV4cGxpY2l0IGBzZWN1cmVgIGVuZHBvaW50LCBjaGVjayBpZiBgcHJvdG9jb2xgIHByb3BlcnR5IGlzCiAgICAgIC8vIHNldC4gVGhpcyB3aWxsIHVzdWFsbHkgYmUgdGhlIGNhc2Ugc2luY2UgdXNpbmcgYSBmdWxsIHN0cmluZyBVUkwKICAgICAgLy8gb3IgYFVSTGAgaW5zdGFuY2Ugc2hvdWxkIGJlIHRoZSBtb3N0IGNvbW1vbiB1c2FnZS4KICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnByb3RvY29sID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBvcHRpb25zLnByb3RvY29sID09PSAnaHR0cHM6JzsKICAgICAgfQogICAgfQoKICAgIC8vIEZpbmFsbHksIGlmIG5vIGBwcm90b2NvbGAgcHJvcGVydHkgd2FzIHNldCwgdGhlbiBmYWxsIGJhY2sgdG8KICAgIC8vIGNoZWNraW5nIHRoZSBzdGFjayB0cmFjZSBvZiB0aGUgY3VycmVudCBjYWxsIHN0YWNrLCBhbmQgdHJ5IHRvCiAgICAvLyBkZXRlY3QgdGhlICJodHRwcyIgbW9kdWxlLgogICAgY29uc3QgeyBzdGFjayB9ID0gbmV3IEVycm9yKCk7CiAgICBpZiAodHlwZW9mIHN0YWNrICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHN0YWNrLnNwbGl0KCdcbicpLnNvbWUobCA9PiBsLmluZGV4T2YoJyhodHRwcy5qczonKSAhPT0gLTEgfHwgbC5pbmRleE9mKCdub2RlOmh0dHBzOicpICE9PSAtMSk7CiAgfQoKICBjcmVhdGVTb2NrZXQocmVxLCBvcHRpb25zLCBjYikgewogICAgY29uc3QgY29ubmVjdE9wdHMgPSB7CiAgICAgIC4uLm9wdGlvbnMsCiAgICAgIHNlY3VyZUVuZHBvaW50OiB0aGlzLmlzU2VjdXJlRW5kcG9pbnQob3B0aW9ucyksCiAgICB9OwogICAgUHJvbWlzZS5yZXNvbHZlKCkKICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jb25uZWN0KHJlcSwgY29ubmVjdE9wdHMpKQogICAgICAudGhlbihzb2NrZXQgPT4gewogICAgICAgIGlmIChzb2NrZXQgaW5zdGFuY2VvZiBodHRwLkFnZW50KSB7CiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGBhZGRSZXF1ZXN0KClgIGlzbid0IGRlZmluZWQgaW4gYEB0eXBlcy9ub2RlYAogICAgICAgICAgcmV0dXJuIHNvY2tldC5hZGRSZXF1ZXN0KHJlcSwgY29ubmVjdE9wdHMpOwogICAgICAgIH0KICAgICAgICB0aGlzW0lOVEVSTkFMXS5jdXJyZW50U29ja2V0ID0gc29ja2V0OwogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYGNyZWF0ZVNvY2tldCgpYCBpc24ndCBkZWZpbmVkIGluIGBAdHlwZXMvbm9kZWAKICAgICAgICBzdXBlci5jcmVhdGVTb2NrZXQocmVxLCBvcHRpb25zLCBjYik7CiAgICAgIH0sIGNiKTsKICB9CgogIGNyZWF0ZUNvbm5lY3Rpb24oKSB7CiAgICBjb25zdCBzb2NrZXQgPSB0aGlzW0lOVEVSTkFMXS5jdXJyZW50U29ja2V0OwogICAgdGhpc1tJTlRFUk5BTF0uY3VycmVudFNvY2tldCA9IHVuZGVmaW5lZDsKICAgIGlmICghc29ja2V0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc29ja2V0IHdhcyByZXR1cm5lZCBpbiB0aGUgYGNvbm5lY3QoKWAgZnVuY3Rpb24nKTsKICAgIH0KICAgIHJldHVybiBzb2NrZXQ7CiAgfQoKICBnZXQgZGVmYXVsdFBvcnQoKSB7CiAgICByZXR1cm4gX251bGxpc2hDb2FsZXNjZSQyKHRoaXNbSU5URVJOQUxdLmRlZmF1bHRQb3J0LCAoKSA9PiAoICh0aGlzLnByb3RvY29sID09PSAnaHR0cHM6JyA/IDQ0MyA6IDgwKSkpOwogIH0KCiAgc2V0IGRlZmF1bHRQb3J0KHYpIHsKICAgIGlmICh0aGlzW0lOVEVSTkFMXSkgewogICAgICB0aGlzW0lOVEVSTkFMXS5kZWZhdWx0UG9ydCA9IHY7CiAgICB9CiAgfQoKICBnZXQgcHJvdG9jb2woKSB7CiAgICByZXR1cm4gX251bGxpc2hDb2FsZXNjZSQyKHRoaXNbSU5URVJOQUxdLnByb3RvY29sLCAoKSA9PiAoICh0aGlzLmlzU2VjdXJlRW5kcG9pbnQoKSA/ICdodHRwczonIDogJ2h0dHA6JykpKTsKICB9CgogIHNldCBwcm90b2NvbCh2KSB7CiAgICBpZiAodGhpc1tJTlRFUk5BTF0pIHsKICAgICAgdGhpc1tJTlRFUk5BTF0ucHJvdG9jb2wgPSB2OwogICAgfQogIH0KfQoKZnVuY3Rpb24gZGVidWckMSguLi5hcmdzKSB7CiAgbG9nZ2VyLmxvZygnW2h0dHBzLXByb3h5LWFnZW50OnBhcnNlLXByb3h5LXJlc3BvbnNlXScsIC4uLmFyZ3MpOwp9CgpmdW5jdGlvbiBwYXJzZVByb3h5UmVzcG9uc2Uoc29ja2V0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIC8vIHdlIG5lZWQgdG8gYnVmZmVyIGFueSBIVFRQIHRyYWZmaWMgdGhhdCBoYXBwZW5zIHdpdGggdGhlIHByb3h5IGJlZm9yZSB3ZSBnZXQKICAgIC8vIHRoZSBDT05ORUNUIHJlc3BvbnNlLCBzbyB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGFuICIyMDAiCiAgICAvLyByZXNwb25zZSBjb2RlLCB0aGVuIHdlIGNhbiByZS1wbGF5IHRoZSAiZGF0YSIgZXZlbnRzIG9uIHRoZSBzb2NrZXQgb25jZSB0aGUKICAgIC8vIEhUVFAgcGFyc2VyIGlzIGhvb2tlZCB1cC4uLgogICAgbGV0IGJ1ZmZlcnNMZW5ndGggPSAwOwogICAgY29uc3QgYnVmZmVycyA9IFtdOwoKICAgIGZ1bmN0aW9uIHJlYWQoKSB7CiAgICAgIGNvbnN0IGIgPSBzb2NrZXQucmVhZCgpOwogICAgICBpZiAoYikgb25kYXRhKGIpOwogICAgICBlbHNlIHNvY2tldC5vbmNlKCdyZWFkYWJsZScsIHJlYWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwogICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcigncmVhZGFibGUnLCByZWFkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgICAgY2xlYW51cCgpOwogICAgICBkZWJ1ZyQxKCdvbmVuZCcpOwogICAgICByZWplY3QobmV3IEVycm9yKCdQcm94eSBjb25uZWN0aW9uIGVuZGVkIGJlZm9yZSByZWNlaXZpbmcgQ09OTkVDVCByZXNwb25zZScpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbmVycm9yKGVycikgewogICAgICBjbGVhbnVwKCk7CiAgICAgIGRlYnVnJDEoJ29uZXJyb3IgJW8nLCBlcnIpOwogICAgICByZWplY3QoZXJyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbmRhdGEoYikgewogICAgICBidWZmZXJzLnB1c2goYik7CiAgICAgIGJ1ZmZlcnNMZW5ndGggKz0gYi5sZW5ndGg7CgogICAgICBjb25zdCBidWZmZXJlZCA9IEJ1ZmZlci5jb25jYXQoYnVmZmVycywgYnVmZmVyc0xlbmd0aCk7CiAgICAgIGNvbnN0IGVuZE9mSGVhZGVycyA9IGJ1ZmZlcmVkLmluZGV4T2YoJ1xyXG5cclxuJyk7CgogICAgICBpZiAoZW5kT2ZIZWFkZXJzID09PSAtMSkgewogICAgICAgIC8vIGtlZXAgYnVmZmVyaW5nCiAgICAgICAgZGVidWckMSgnaGF2ZSBub3QgcmVjZWl2ZWQgZW5kIG9mIEhUVFAgaGVhZGVycyB5ZXQuLi4nKTsKICAgICAgICByZWFkKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBoZWFkZXJQYXJ0cyA9IGJ1ZmZlcmVkLnNsaWNlKDAsIGVuZE9mSGVhZGVycykudG9TdHJpbmcoJ2FzY2lpJykuc3BsaXQoJ1xyXG4nKTsKICAgICAgY29uc3QgZmlyc3RMaW5lID0gaGVhZGVyUGFydHMuc2hpZnQoKTsKICAgICAgaWYgKCFmaXJzdExpbmUpIHsKICAgICAgICBzb2NrZXQuZGVzdHJveSgpOwogICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdObyBoZWFkZXIgcmVjZWl2ZWQgZnJvbSBwcm94eSBDT05ORUNUIHJlc3BvbnNlJykpOwogICAgICB9CiAgICAgIGNvbnN0IGZpcnN0TGluZVBhcnRzID0gZmlyc3RMaW5lLnNwbGl0KCcgJyk7CiAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSArZmlyc3RMaW5lUGFydHNbMV07CiAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBmaXJzdExpbmVQYXJ0cy5zbGljZSgyKS5qb2luKCcgJyk7CiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTsKICAgICAgZm9yIChjb25zdCBoZWFkZXIgb2YgaGVhZGVyUGFydHMpIHsKICAgICAgICBpZiAoIWhlYWRlcikgY29udGludWU7CiAgICAgICAgY29uc3QgZmlyc3RDb2xvbiA9IGhlYWRlci5pbmRleE9mKCc6Jyk7CiAgICAgICAgaWYgKGZpcnN0Q29sb24gPT09IC0xKSB7CiAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpOwogICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoYEludmFsaWQgaGVhZGVyIGZyb20gcHJveHkgQ09OTkVDVCByZXNwb25zZTogIiR7aGVhZGVyfSJgKSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGtleSA9IGhlYWRlci5zbGljZSgwLCBmaXJzdENvbG9uKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGNvbnN0IHZhbHVlID0gaGVhZGVyLnNsaWNlKGZpcnN0Q29sb24gKyAxKS50cmltU3RhcnQoKTsKICAgICAgICBjb25zdCBjdXJyZW50ID0gaGVhZGVyc1trZXldOwogICAgICAgIGlmICh0eXBlb2YgY3VycmVudCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGhlYWRlcnNba2V5XSA9IFtjdXJyZW50LCB2YWx1ZV07CiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnQpKSB7CiAgICAgICAgICBjdXJyZW50LnB1c2godmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoZWFkZXJzW2tleV0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGVidWckMSgnZ290IHByb3h5IHNlcnZlciByZXNwb25zZTogJW8gJW8nLCBmaXJzdExpbmUsIGhlYWRlcnMpOwogICAgICBjbGVhbnVwKCk7CiAgICAgIHJlc29sdmUoewogICAgICAgIGNvbm5lY3Q6IHsKICAgICAgICAgIHN0YXR1c0NvZGUsCiAgICAgICAgICBzdGF0dXNUZXh0LAogICAgICAgICAgaGVhZGVycywKICAgICAgICB9LAogICAgICAgIGJ1ZmZlcmVkLAogICAgICB9KTsKICAgIH0KCiAgICBzb2NrZXQub24oJ2Vycm9yJywgb25lcnJvcik7CiAgICBzb2NrZXQub24oJ2VuZCcsIG9uZW5kKTsKCiAgICByZWFkKCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIF9udWxsaXNoQ29hbGVzY2UkMShsaHMsIHJoc0ZuKSB7IGlmIChsaHMgIT0gbnVsbCkgeyByZXR1cm4gbGhzOyB9IGVsc2UgeyByZXR1cm4gcmhzRm4oKTsgfSB9IGZ1bmN0aW9uIF9vcHRpb25hbENoYWluJDEob3BzKSB7IGxldCBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyBsZXQgdmFsdWUgPSBvcHNbMF07IGxldCBpID0gMTsgd2hpbGUgKGkgPCBvcHMubGVuZ3RoKSB7IGNvbnN0IG9wID0gb3BzW2ldOyBjb25zdCBmbiA9IG9wc1tpICsgMV07IGkgKz0gMjsgaWYgKChvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpICYmIHZhbHVlID09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBpZiAob3AgPT09ICdhY2Nlc3MnIHx8IG9wID09PSAnb3B0aW9uYWxBY2Nlc3MnKSB7IGxhc3RBY2Nlc3NMSFMgPSB2YWx1ZTsgdmFsdWUgPSBmbih2YWx1ZSk7IH0gZWxzZSBpZiAob3AgPT09ICdjYWxsJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpIHsgdmFsdWUgPSBmbigoLi4uYXJncykgPT4gdmFsdWUuY2FsbChsYXN0QWNjZXNzTEhTLCAuLi5hcmdzKSk7IGxhc3RBY2Nlc3NMSFMgPSB1bmRlZmluZWQ7IH0gfSByZXR1cm4gdmFsdWU7IH0KCmZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHsKICBsb2dnZXIubG9nKCdbaHR0cHMtcHJveHktYWdlbnRdJywgLi4uYXJncyk7Cn0KCi8qKgogKiBUaGUgYEh0dHBzUHJveHlBZ2VudGAgaW1wbGVtZW50cyBhbiBIVFRQIEFnZW50IHN1YmNsYXNzIHRoYXQgY29ubmVjdHMgdG8KICogdGhlIHNwZWNpZmllZCAiSFRUUChzKSBwcm94eSBzZXJ2ZXIiIGluIG9yZGVyIHRvIHByb3h5IEhUVFBTIHJlcXVlc3RzLgogKgogKiBPdXRnb2luZyBIVFRQIHJlcXVlc3RzIGFyZSBmaXJzdCB0dW5uZWxlZCB0aHJvdWdoIHRoZSBwcm94eSBzZXJ2ZXIgdXNpbmcgdGhlCiAqIGBDT05ORUNUYCBIVFRQIHJlcXVlc3QgbWV0aG9kIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5IHNlcnZlciwKICogYW5kIHRoZW4gdGhlIHByb3h5IHNlcnZlciBjb25uZWN0cyB0byB0aGUgZGVzdGluYXRpb24gdGFyZ2V0IGFuZCBpc3N1ZXMgdGhlCiAqIEhUVFAgcmVxdWVzdCBmcm9tIHRoZSBwcm94eSBzZXJ2ZXIuCiAqCiAqIGBodHRwczpgIHJlcXVlc3RzIGhhdmUgdGhlaXIgc29ja2V0IGNvbm5lY3Rpb24gdXBncmFkZWQgdG8gVExTIG9uY2UKICogdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5IHNlcnZlciBoYXMgYmVlbiBlc3RhYmxpc2hlZC4KICovCmNsYXNzIEh0dHBzUHJveHlBZ2VudCBleHRlbmRzIEFnZW50IHsKICBzdGF0aWMgX19pbml0U3RhdGljKCkge3RoaXMucHJvdG9jb2xzID0gWydodHRwJywgJ2h0dHBzJ107IH0KCiAgY29uc3RydWN0b3IocHJveHksIG9wdHMpIHsKICAgIHN1cGVyKG9wdHMpOwogICAgdGhpcy5vcHRpb25zID0ge307CiAgICB0aGlzLnByb3h5ID0gdHlwZW9mIHByb3h5ID09PSAnc3RyaW5nJyA/IG5ldyBVUkwocHJveHkpIDogcHJveHk7CiAgICB0aGlzLnByb3h5SGVhZGVycyA9IF9udWxsaXNoQ29hbGVzY2UkMShfb3B0aW9uYWxDaGFpbiQxKFtvcHRzLCAnb3B0aW9uYWxBY2Nlc3MnLCBfMiA9PiBfMi5oZWFkZXJzXSksICgpID0+ICgge30pKTsKICAgIGRlYnVnKCdDcmVhdGluZyBuZXcgSHR0cHNQcm94eUFnZW50IGluc3RhbmNlOiAlbycsIHRoaXMucHJveHkuaHJlZik7CgogICAgLy8gVHJpbSBvZmYgdGhlIGJyYWNrZXRzIGZyb20gSVB2NiBhZGRyZXNzZXMKICAgIGNvbnN0IGhvc3QgPSAodGhpcy5wcm94eS5ob3N0bmFtZSB8fCB0aGlzLnByb3h5Lmhvc3QpLnJlcGxhY2UoL15cW3xcXSQvZywgJycpOwogICAgY29uc3QgcG9ydCA9IHRoaXMucHJveHkucG9ydCA/IHBhcnNlSW50KHRoaXMucHJveHkucG9ydCwgMTApIDogdGhpcy5wcm94eS5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyA0NDMgOiA4MDsKICAgIHRoaXMuY29ubmVjdE9wdHMgPSB7CiAgICAgIC8vIEF0dGVtcHQgdG8gbmVnb3RpYXRlIGh0dHAvMS4xIGZvciBwcm94eSBzZXJ2ZXJzIHRoYXQgc3VwcG9ydCBodHRwLzIKICAgICAgQUxQTlByb3RvY29sczogWydodHRwLzEuMSddLAogICAgICAuLi4ob3B0cyA/IG9taXQob3B0cywgJ2hlYWRlcnMnKSA6IG51bGwpLAogICAgICBob3N0LAogICAgICBwb3J0LAogICAgfTsKICB9CgogIC8qKgogICAqIENhbGxlZCB3aGVuIHRoZSBub2RlLWNvcmUgSFRUUCBjbGllbnQgbGlicmFyeSBpcyBjcmVhdGluZyBhCiAgICogbmV3IEhUVFAgcmVxdWVzdC4KICAgKi8KICBhc3luYyBjb25uZWN0KHJlcSwgb3B0cykgewogICAgY29uc3QgeyBwcm94eSB9ID0gdGhpczsKCiAgICBpZiAoIW9wdHMuaG9zdCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyAiaG9zdCIgcHJvdmlkZWQnKTsKICAgIH0KCiAgICAvLyBDcmVhdGUgYSBzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgcHJveHkgc2VydmVyLgogICAgbGV0IHNvY2tldDsKICAgIGlmIChwcm94eS5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHsKICAgICAgZGVidWcoJ0NyZWF0aW5nIGB0bHMuU29ja2V0YDogJW8nLCB0aGlzLmNvbm5lY3RPcHRzKTsKICAgICAgY29uc3Qgc2VydmVybmFtZSA9IHRoaXMuY29ubmVjdE9wdHMuc2VydmVybmFtZSB8fCB0aGlzLmNvbm5lY3RPcHRzLmhvc3Q7CiAgICAgIHNvY2tldCA9IHRscy5jb25uZWN0KHsKICAgICAgICAuLi50aGlzLmNvbm5lY3RPcHRzLAogICAgICAgIHNlcnZlcm5hbWU6IHNlcnZlcm5hbWUgJiYgbmV0LmlzSVAoc2VydmVybmFtZSkgPyB1bmRlZmluZWQgOiBzZXJ2ZXJuYW1lLAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGRlYnVnKCdDcmVhdGluZyBgbmV0LlNvY2tldGA6ICVvJywgdGhpcy5jb25uZWN0T3B0cyk7CiAgICAgIHNvY2tldCA9IG5ldC5jb25uZWN0KHRoaXMuY29ubmVjdE9wdHMpOwogICAgfQoKICAgIGNvbnN0IGhlYWRlcnMgPQogICAgICB0eXBlb2YgdGhpcy5wcm94eUhlYWRlcnMgPT09ICdmdW5jdGlvbicgPyB0aGlzLnByb3h5SGVhZGVycygpIDogeyAuLi50aGlzLnByb3h5SGVhZGVycyB9OwogICAgY29uc3QgaG9zdCA9IG5ldC5pc0lQdjYob3B0cy5ob3N0KSA/IGBbJHtvcHRzLmhvc3R9XWAgOiBvcHRzLmhvc3Q7CiAgICBsZXQgcGF5bG9hZCA9IGBDT05ORUNUICR7aG9zdH06JHtvcHRzLnBvcnR9IEhUVFAvMS4xXHJcbmA7CgogICAgLy8gSW5qZWN0IHRoZSBgUHJveHktQXV0aG9yaXphdGlvbmAgaGVhZGVyIGlmIG5lY2Vzc2FyeS4KICAgIGlmIChwcm94eS51c2VybmFtZSB8fCBwcm94eS5wYXNzd29yZCkgewogICAgICBjb25zdCBhdXRoID0gYCR7ZGVjb2RlVVJJQ29tcG9uZW50KHByb3h5LnVzZXJuYW1lKX06JHtkZWNvZGVVUklDb21wb25lbnQocHJveHkucGFzc3dvcmQpfWA7CiAgICAgIGhlYWRlcnNbJ1Byb3h5LUF1dGhvcml6YXRpb24nXSA9IGBCYXNpYyAke0J1ZmZlci5mcm9tKGF1dGgpLnRvU3RyaW5nKCdiYXNlNjQnKX1gOwogICAgfQoKICAgIGhlYWRlcnMuSG9zdCA9IGAke2hvc3R9OiR7b3B0cy5wb3J0fWA7CgogICAgaWYgKCFoZWFkZXJzWydQcm94eS1Db25uZWN0aW9uJ10pIHsKICAgICAgaGVhZGVyc1snUHJveHktQ29ubmVjdGlvbiddID0gdGhpcy5rZWVwQWxpdmUgPyAnS2VlcC1BbGl2ZScgOiAnY2xvc2UnOwogICAgfQogICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKGhlYWRlcnMpKSB7CiAgICAgIHBheWxvYWQgKz0gYCR7bmFtZX06ICR7aGVhZGVyc1tuYW1lXX1cclxuYDsKICAgIH0KCiAgICBjb25zdCBwcm94eVJlc3BvbnNlUHJvbWlzZSA9IHBhcnNlUHJveHlSZXNwb25zZShzb2NrZXQpOwoKICAgIHNvY2tldC53cml0ZShgJHtwYXlsb2FkfVxyXG5gKTsKCiAgICBjb25zdCB7IGNvbm5lY3QsIGJ1ZmZlcmVkIH0gPSBhd2FpdCBwcm94eVJlc3BvbnNlUHJvbWlzZTsKICAgIHJlcS5lbWl0KCdwcm94eUNvbm5lY3QnLCBjb25uZWN0KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQKICAgIC8vIEB0cy1pZ25vcmUgTm90IEV2ZW50RW1pdHRlciBpbiBOb2RlIHR5cGVzCiAgICB0aGlzLmVtaXQoJ3Byb3h5Q29ubmVjdCcsIGNvbm5lY3QsIHJlcSk7CgogICAgaWYgKGNvbm5lY3Quc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgIHJlcS5vbmNlKCdzb2NrZXQnLCByZXN1bWUpOwoKICAgICAgaWYgKG9wdHMuc2VjdXJlRW5kcG9pbnQpIHsKICAgICAgICAvLyBUaGUgcHJveHkgaXMgY29ubmVjdGluZyB0byBhIFRMUyBzZXJ2ZXIsIHNvIHVwZ3JhZGUKICAgICAgICAvLyB0aGlzIHNvY2tldCBjb25uZWN0aW9uIHRvIGEgVExTIGNvbm5lY3Rpb24uCiAgICAgICAgZGVidWcoJ1VwZ3JhZGluZyBzb2NrZXQgY29ubmVjdGlvbiB0byBUTFMnKTsKICAgICAgICBjb25zdCBzZXJ2ZXJuYW1lID0gb3B0cy5zZXJ2ZXJuYW1lIHx8IG9wdHMuaG9zdDsKICAgICAgICByZXR1cm4gdGxzLmNvbm5lY3QoewogICAgICAgICAgLi4ub21pdChvcHRzLCAnaG9zdCcsICdwYXRoJywgJ3BvcnQnKSwKICAgICAgICAgIHNvY2tldCwKICAgICAgICAgIHNlcnZlcm5hbWU6IG5ldC5pc0lQKHNlcnZlcm5hbWUpID8gdW5kZWZpbmVkIDogc2VydmVybmFtZSwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNvY2tldDsKICAgIH0KCiAgICAvLyBTb21lIG90aGVyIHN0YXR1cyBjb2RlIHRoYXQncyBub3QgMjAwLi4uIG5lZWQgdG8gcmUtcGxheSB0aGUgSFRUUAogICAgLy8gaGVhZGVyICJkYXRhIiBldmVudHMgb250byB0aGUgc29ja2V0IG9uY2UgdGhlIEhUVFAgbWFjaGluZXJ5IGlzCiAgICAvLyBhdHRhY2hlZCBzbyB0aGF0IHRoZSBub2RlIGNvcmUgYGh0dHBgIGNhbiBwYXJzZSBhbmQgaGFuZGxlIHRoZQogICAgLy8gZXJyb3Igc3RhdHVzIGNvZGUuCgogICAgLy8gQ2xvc2UgdGhlIG9yaWdpbmFsIHNvY2tldCwgYW5kIGEgbmV3ICJmYWtlIiBzb2NrZXQgaXMgcmV0dXJuZWQKICAgIC8vIGluc3RlYWQsIHNvIHRoYXQgdGhlIHByb3h5IGRvZXNuJ3QgZ2V0IHRoZSBIVFRQIHJlcXVlc3QKICAgIC8vIHdyaXR0ZW4gdG8gaXQgKHdoaWNoIG1heSBjb250YWluIGBBdXRob3JpemF0aW9uYCBoZWFkZXJzIG9yIG90aGVyCiAgICAvLyBzZW5zaXRpdmUgZGF0YSkuCiAgICAvLwogICAgLy8gU2VlOiBodHRwczovL2hhY2tlcm9uZS5jb20vcmVwb3J0cy81NDE1MDIKICAgIHNvY2tldC5kZXN0cm95KCk7CgogICAgY29uc3QgZmFrZVNvY2tldCA9IG5ldyBuZXQuU29ja2V0KHsgd3JpdGFibGU6IGZhbHNlIH0pOwogICAgZmFrZVNvY2tldC5yZWFkYWJsZSA9IHRydWU7CgogICAgLy8gTmVlZCB0byB3YWl0IGZvciB0aGUgInNvY2tldCIgZXZlbnQgdG8gcmUtcGxheSB0aGUgImRhdGEiIGV2ZW50cy4KICAgIHJlcS5vbmNlKCdzb2NrZXQnLCAocykgPT4gewogICAgICBkZWJ1ZygnUmVwbGF5aW5nIHByb3h5IGJ1ZmZlciBmb3IgZmFpbGVkIHJlcXVlc3QnKTsKICAgICAgLy8gUmVwbGF5IHRoZSAiYnVmZmVyZWQiIEJ1ZmZlciBvbnRvIHRoZSBmYWtlIGBzb2NrZXRgLCBzaW5jZSBhdAogICAgICAvLyB0aGlzIHBvaW50IHRoZSBIVFRQIG1vZHVsZSBtYWNoaW5lcnkgaGFzIGJlZW4gaG9va2VkIHVwIGZvcgogICAgICAvLyB0aGUgdXNlci4KICAgICAgcy5wdXNoKGJ1ZmZlcmVkKTsKICAgICAgcy5wdXNoKG51bGwpOwogICAgfSk7CgogICAgcmV0dXJuIGZha2VTb2NrZXQ7CiAgfQp9IEh0dHBzUHJveHlBZ2VudC5fX2luaXRTdGF0aWMoKTsKCmZ1bmN0aW9uIHJlc3VtZShzb2NrZXQpIHsKICBzb2NrZXQucmVzdW1lKCk7Cn0KCmZ1bmN0aW9uIG9taXQoCiAgb2JqLAogIC4uLmtleXMKKQoKIHsKICBjb25zdCByZXQgPSB7fQoKOwogIGxldCBrZXk7CiAgZm9yIChrZXkgaW4gb2JqKSB7CiAgICBpZiAoIWtleXMuaW5jbHVkZXMoa2V5KSkgewogICAgICByZXRba2V5XSA9IG9ialtrZXldOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBfbnVsbGlzaENvYWxlc2NlKGxocywgcmhzRm4pIHsgaWYgKGxocyAhPSBudWxsKSB7IHJldHVybiBsaHM7IH0gZWxzZSB7IHJldHVybiByaHNGbigpOyB9IH0KLy8gRXN0aW1hdGVkIG1heGltdW0gc2l6ZSBmb3IgcmVhc29uYWJsZSBzdGFuZGFsb25lIGV2ZW50CmNvbnN0IEdaSVBfVEhSRVNIT0xEID0gMTAyNCAqIDMyOwoKLyoqCiAqIEdldHMgYSBzdHJlYW0gZnJvbSBhIFVpbnQ4QXJyYXkgb3Igc3RyaW5nCiAqIFJlYWRhYmxlLmZyb20gaXMgaWRlYWwgYnV0IHdhcyBhZGRlZCBpbiBub2RlLmpzIHYxMi4zLjAgYW5kIHYxMC4xNy4wCiAqLwpmdW5jdGlvbiBzdHJlYW1Gcm9tQm9keShib2R5KSB7CiAgcmV0dXJuIG5ldyBSZWFkYWJsZSh7CiAgICByZWFkKCkgewogICAgICB0aGlzLnB1c2goYm9keSk7CiAgICAgIHRoaXMucHVzaChudWxsKTsKICAgIH0sCiAgfSk7Cn0KCi8qKgogKiBDcmVhdGVzIGEgVHJhbnNwb3J0IHRoYXQgdXNlcyBuYXRpdmUgdGhlIG5hdGl2ZSAnaHR0cCcgYW5kICdodHRwcycgbW9kdWxlcyB0byBzZW5kIGV2ZW50cyB0byBTZW50cnkuCiAqLwpmdW5jdGlvbiBtYWtlTm9kZVRyYW5zcG9ydChvcHRpb25zKSB7CiAgbGV0IHVybFNlZ21lbnRzOwoKICB0cnkgewogICAgdXJsU2VnbWVudHMgPSBuZXcgVVJMKG9wdGlvbnMudXJsKTsKICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlU2FuZGJveCgoKSA9PiB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgIGNvbnNvbGUud2FybigKICAgICAgICAnW0BzZW50cnkvbm9kZV06IEludmFsaWQgZHNuIG9yIHR1bm5lbCBvcHRpb24sIHdpbGwgbm90IHNlbmQgYW55IGV2ZW50cy4gVGhlIHR1bm5lbCBvcHRpb24gbXVzdCBiZSBhIGZ1bGwgVVJMIHdoZW4gdXNlZC4nLAogICAgICApOwogICAgfSk7CiAgICByZXR1cm4gY3JlYXRlVHJhbnNwb3J0KG9wdGlvbnMsICgpID0+IFByb21pc2UucmVzb2x2ZSh7fSkpOwogIH0KCiAgY29uc3QgaXNIdHRwcyA9IHVybFNlZ21lbnRzLnByb3RvY29sID09PSAnaHR0cHM6JzsKCiAgLy8gUHJveHkgcHJpb3JpdGl6YXRpb246IGh0dHAgPT4gYG9wdGlvbnMucHJveHlgIHwgYHByb2Nlc3MuZW52Lmh0dHBfcHJveHlgCiAgLy8gUHJveHkgcHJpb3JpdGl6YXRpb246IGh0dHBzID0+IGBvcHRpb25zLnByb3h5YCB8IGBwcm9jZXNzLmVudi5odHRwc19wcm94eWAgfCBgcHJvY2Vzcy5lbnYuaHR0cF9wcm94eWAKICBjb25zdCBwcm94eSA9IGFwcGx5Tm9Qcm94eU9wdGlvbigKICAgIHVybFNlZ21lbnRzLAogICAgb3B0aW9ucy5wcm94eSB8fCAoaXNIdHRwcyA/IHByb2Nlc3MuZW52Lmh0dHBzX3Byb3h5IDogdW5kZWZpbmVkKSB8fCBwcm9jZXNzLmVudi5odHRwX3Byb3h5LAogICk7CgogIGNvbnN0IG5hdGl2ZUh0dHBNb2R1bGUgPSBpc0h0dHBzID8gaHR0cHMgOiBodHRwOwogIGNvbnN0IGtlZXBBbGl2ZSA9IG9wdGlvbnMua2VlcEFsaXZlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IG9wdGlvbnMua2VlcEFsaXZlOwoKICAvLyBUT0RPKHY3KTogRXZhbHVhdGUgaWYgd2UgY2FuIHNldCBrZWVwQWxpdmUgdG8gdHJ1ZS4gVGhpcyB3b3VsZCBpbnZvbHZlIHRlc3RpbmcgZm9yIG1lbW9yeSBsZWFrcyBpbiBvbGRlciBub2RlCiAgLy8gdmVyc2lvbnMoPj0gOCkgYXMgdGhleSBoYWQgbWVtb3J5IGxlYWtzIHdoZW4gdXNpbmcgaXQ6ICMyNTU1CiAgY29uc3QgYWdlbnQgPSBwcm94eQogICAgPyAobmV3IEh0dHBzUHJveHlBZ2VudChwcm94eSkgKQogICAgOiBuZXcgbmF0aXZlSHR0cE1vZHVsZS5BZ2VudCh7IGtlZXBBbGl2ZSwgbWF4U29ja2V0czogMzAsIHRpbWVvdXQ6IDIwMDAgfSk7CgogIGNvbnN0IHJlcXVlc3RFeGVjdXRvciA9IGNyZWF0ZVJlcXVlc3RFeGVjdXRvcihvcHRpb25zLCBfbnVsbGlzaENvYWxlc2NlKG9wdGlvbnMuaHR0cE1vZHVsZSwgKCkgPT4gKCBuYXRpdmVIdHRwTW9kdWxlKSksIGFnZW50KTsKICByZXR1cm4gY3JlYXRlVHJhbnNwb3J0KG9wdGlvbnMsIHJlcXVlc3RFeGVjdXRvcik7Cn0KCi8qKgogKiBIb25vcnMgdGhlIGBub19wcm94eWAgZW52IHZhcmlhYmxlIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgdG8gYWxsb3cgZm9yIGhvc3RzIGV4Y2x1c2lvbi4KICoKICogQHBhcmFtIHRyYW5zcG9ydFVybCBUaGUgVVJMIHRoZSB0cmFuc3BvcnQgaW50ZW5kcyB0byBzZW5kIGV2ZW50cyB0by4KICogQHBhcmFtIHByb3h5IFRoZSBjbGllbnQgY29uZmlndXJlZCBwcm94eS4KICogQHJldHVybnMgQSBwcm94eSB0aGUgdHJhbnNwb3J0IHNob3VsZCB1c2UuCiAqLwpmdW5jdGlvbiBhcHBseU5vUHJveHlPcHRpb24odHJhbnNwb3J0VXJsU2VnbWVudHMsIHByb3h5KSB7CiAgY29uc3QgeyBub19wcm94eSB9ID0gcHJvY2Vzcy5lbnY7CgogIGNvbnN0IHVybElzRXhlbXB0RnJvbVByb3h5ID0KICAgIG5vX3Byb3h5ICYmCiAgICBub19wcm94eQogICAgICAuc3BsaXQoJywnKQogICAgICAuc29tZSgKICAgICAgICBleGVtcHRpb24gPT4gdHJhbnNwb3J0VXJsU2VnbWVudHMuaG9zdC5lbmRzV2l0aChleGVtcHRpb24pIHx8IHRyYW5zcG9ydFVybFNlZ21lbnRzLmhvc3RuYW1lLmVuZHNXaXRoKGV4ZW1wdGlvbiksCiAgICAgICk7CgogIGlmICh1cmxJc0V4ZW1wdEZyb21Qcm94eSkgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9IGVsc2UgewogICAgcmV0dXJuIHByb3h5OwogIH0KfQoKLyoqCiAqIENyZWF0ZXMgYSBSZXF1ZXN0RXhlY3V0b3IgdG8gYmUgdXNlZCB3aXRoIGBjcmVhdGVUcmFuc3BvcnRgLgogKi8KZnVuY3Rpb24gY3JlYXRlUmVxdWVzdEV4ZWN1dG9yKAogIG9wdGlvbnMsCiAgaHR0cE1vZHVsZSwKICBhZ2VudCwKKSB7CiAgY29uc3QgeyBob3N0bmFtZSwgcGF0aG5hbWUsIHBvcnQsIHByb3RvY29sLCBzZWFyY2ggfSA9IG5ldyBVUkwob3B0aW9ucy51cmwpOwogIHJldHVybiBmdW5jdGlvbiBtYWtlUmVxdWVzdChyZXF1ZXN0KSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBsZXQgYm9keSA9IHN0cmVhbUZyb21Cb2R5KHJlcXVlc3QuYm9keSk7CgogICAgICBjb25zdCBoZWFkZXJzID0geyAuLi5vcHRpb25zLmhlYWRlcnMgfTsKCiAgICAgIGlmIChyZXF1ZXN0LmJvZHkubGVuZ3RoID4gR1pJUF9USFJFU0hPTEQpIHsKICAgICAgICBoZWFkZXJzWydjb250ZW50LWVuY29kaW5nJ10gPSAnZ3ppcCc7CiAgICAgICAgYm9keSA9IGJvZHkucGlwZShjcmVhdGVHemlwKCkpOwogICAgICB9CgogICAgICBjb25zdCByZXEgPSBodHRwTW9kdWxlLnJlcXVlc3QoCiAgICAgICAgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBhZ2VudCwKICAgICAgICAgIGhlYWRlcnMsCiAgICAgICAgICBob3N0bmFtZSwKICAgICAgICAgIHBhdGg6IGAke3BhdGhuYW1lfSR7c2VhcmNofWAsCiAgICAgICAgICBwb3J0LAogICAgICAgICAgcHJvdG9jb2wsCiAgICAgICAgICBjYTogb3B0aW9ucy5jYUNlcnRzLAogICAgICAgIH0sCiAgICAgICAgcmVzID0+IHsKICAgICAgICAgIHJlcy5vbignZGF0YScsICgpID0+IHsKICAgICAgICAgICAgLy8gRHJhaW4gc29ja2V0CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXMub24oJ2VuZCcsICgpID0+IHsKICAgICAgICAgICAgLy8gRHJhaW4gc29ja2V0CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXMuc2V0RW5jb2RpbmcoJ3V0ZjgnKTsKCiAgICAgICAgICAvLyAiS2V5LXZhbHVlIHBhaXJzIG9mIGhlYWRlciBuYW1lcyBhbmQgdmFsdWVzLiBIZWFkZXIgbmFtZXMgYXJlIGxvd2VyLWNhc2VkLiIKICAgICAgICAgIC8vIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzCiAgICAgICAgICBjb25zdCByZXRyeUFmdGVySGVhZGVyID0gX251bGxpc2hDb2FsZXNjZShyZXMuaGVhZGVyc1sncmV0cnktYWZ0ZXInXSwgKCkgPT4gKCBudWxsKSk7CiAgICAgICAgICBjb25zdCByYXRlTGltaXRzSGVhZGVyID0gX251bGxpc2hDb2FsZXNjZShyZXMuaGVhZGVyc1sneC1zZW50cnktcmF0ZS1saW1pdHMnXSwgKCkgPT4gKCBudWxsKSk7CgogICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ3JldHJ5LWFmdGVyJzogcmV0cnlBZnRlckhlYWRlciwKICAgICAgICAgICAgICAneC1zZW50cnktcmF0ZS1saW1pdHMnOiBBcnJheS5pc0FycmF5KHJhdGVMaW1pdHNIZWFkZXIpID8gcmF0ZUxpbWl0c0hlYWRlclswXSA6IHJhdGVMaW1pdHNIZWFkZXIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICApOwoKICAgICAgcmVxLm9uKCdlcnJvcicsIHJlamVjdCk7CiAgICAgIGJvZHkucGlwZShyZXEpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX29wdGlvbmFsQ2hhaW4ob3BzKSB7IGxldCBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyBsZXQgdmFsdWUgPSBvcHNbMF07IGxldCBpID0gMTsgd2hpbGUgKGkgPCBvcHMubGVuZ3RoKSB7IGNvbnN0IG9wID0gb3BzW2ldOyBjb25zdCBmbiA9IG9wc1tpICsgMV07IGkgKz0gMjsgaWYgKChvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpICYmIHZhbHVlID09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBpZiAob3AgPT09ICdhY2Nlc3MnIHx8IG9wID09PSAnb3B0aW9uYWxBY2Nlc3MnKSB7IGxhc3RBY2Nlc3NMSFMgPSB2YWx1ZTsgdmFsdWUgPSBmbih2YWx1ZSk7IH0gZWxzZSBpZiAob3AgPT09ICdjYWxsJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpIHsgdmFsdWUgPSBmbigoLi4uYXJncykgPT4gdmFsdWUuY2FsbChsYXN0QWNjZXNzTEhTLCAuLi5hcmdzKSk7IGxhc3RBY2Nlc3NMSFMgPSB1bmRlZmluZWQ7IH0gfSByZXR1cm4gdmFsdWU7IH0KY29uc3Qgb3B0aW9ucyA9IHdvcmtlckRhdGE7CmxldCBzZXNzaW9uOwpsZXQgaGFzU2VudEFuckV2ZW50ID0gZmFsc2U7CgpmdW5jdGlvbiBsb2cobXNnKSB7CiAgaWYgKG9wdGlvbnMuZGVidWcpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICBjb25zb2xlLmxvZyhgW0FOUiBXb3JrZXJdICR7bXNnfWApOwogIH0KfQoKY29uc3QgdXJsID0gZ2V0RW52ZWxvcGVFbmRwb2ludFdpdGhVcmxFbmNvZGVkQXV0aChvcHRpb25zLmRzbik7CmNvbnN0IHRyYW5zcG9ydCA9IG1ha2VOb2RlVHJhbnNwb3J0KHsKICB1cmwsCiAgcmVjb3JkRHJvcHBlZEV2ZW50OiAoKSA9PiB7CiAgICAvLwogIH0sCn0pOwoKYXN5bmMgZnVuY3Rpb24gc2VuZEFibm9ybWFsU2Vzc2lvbigpIHsKICAvLyBvZiB3ZSBoYXZlIGFuIGV4aXN0aW5nIHNlc3Npb24gcGFzc2VkIGZyb20gdGhlIG1haW4gdGhyZWFkLCBzZW5kIGl0IGFzIGFibm9ybWFsCiAgaWYgKHNlc3Npb24pIHsKICAgIGxvZygnU2VuZGluZyBhYm5vcm1hbCBzZXNzaW9uJyk7CiAgICB1cGRhdGVTZXNzaW9uKHNlc3Npb24sIHsgc3RhdHVzOiAnYWJub3JtYWwnLCBhYm5vcm1hbF9tZWNoYW5pc206ICdhbnJfZm9yZWdyb3VuZCcgfSk7CgogICAgY29uc3QgZW52ZWxvcGUgPSBjcmVhdGVTZXNzaW9uRW52ZWxvcGUoc2Vzc2lvbiwgb3B0aW9ucy5kc24sIG9wdGlvbnMuc2RrTWV0YWRhdGEpOwogICAgLy8gTG9nIHRoZSBlbnZlbG9wZSBzbyB0byBhaWQgaW4gdGVzdGluZwogICAgbG9nKEpTT04uc3RyaW5naWZ5KGVudmVsb3BlKSk7CgogICAgYXdhaXQgdHJhbnNwb3J0LnNlbmQoZW52ZWxvcGUpOwoKICAgIHRyeSB7CiAgICAgIC8vIE5vdGlmeSB0aGUgbWFpbiBwcm9jZXNzIHRoYXQgdGhlIHNlc3Npb24gaGFzIGVuZGVkIHNvIHRoZSBzZXNzaW9uIGNhbiBiZSBjbGVhcmVkIGZyb20gdGhlIHNjb3BlCiAgICAgIF9vcHRpb25hbENoYWluKFtwYXJlbnRQb3J0LCAnb3B0aW9uYWxBY2Nlc3MnLCBfMiA9PiBfMi5wb3N0TWVzc2FnZSwgJ2NhbGwnLCBfMyA9PiBfMygnc2Vzc2lvbi1lbmRlZCcpXSk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIC8vIGlnbm9yZQogICAgfQogIH0KfQoKbG9nKCdTdGFydGVkJyk7CgpmdW5jdGlvbiBwcmVwYXJlU3RhY2tGcmFtZXMoc3RhY2tGcmFtZXMpIHsKICBpZiAoIXN0YWNrRnJhbWVzKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgLy8gU3RyaXAgU2VudHJ5IGZyYW1lcyBhbmQgcmV2ZXJzZSB0aGUgc3RhY2sgZnJhbWVzIHNvIHRoZXkgYXJlIGluIHRoZSBjb3JyZWN0IG9yZGVyCiAgY29uc3Qgc3RyaXBwZWRGcmFtZXMgPSBzdHJpcFNlbnRyeUZyYW1lc0FuZFJldmVyc2Uoc3RhY2tGcmFtZXMpOwoKICAvLyBJZiB3ZSBoYXZlIGFuIGFwcCByb290IHBhdGgsIHJld3JpdGUgdGhlIGZpbGVuYW1lcyB0byBiZSByZWxhdGl2ZSB0byB0aGUgYXBwIHJvb3QKICBpZiAob3B0aW9ucy5hcHBSb290UGF0aCkgewogICAgZm9yIChjb25zdCBmcmFtZSBvZiBzdHJpcHBlZEZyYW1lcykgewogICAgICBpZiAoIWZyYW1lLmZpbGVuYW1lKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGZyYW1lLmZpbGVuYW1lID0gbm9ybWFsaXplVXJsVG9CYXNlKGZyYW1lLmZpbGVuYW1lLCBvcHRpb25zLmFwcFJvb3RQYXRoKTsKICAgIH0KICB9CgogIHJldHVybiBzdHJpcHBlZEZyYW1lczsKfQoKZnVuY3Rpb24gYXBwbHlTY29wZVRvRXZlbnQoZXZlbnQsIHNjb3BlKSB7CiAgYXBwbHlTY29wZURhdGFUb0V2ZW50KGV2ZW50LCBzY29wZSk7CgogIGlmICghX29wdGlvbmFsQ2hhaW4oW2V2ZW50LCAnYWNjZXNzJywgXzQgPT4gXzQuY29udGV4dHMsICdvcHRpb25hbEFjY2VzcycsIF81ID0+IF81LnRyYWNlXSkpIHsKICAgIGNvbnN0IHsgdHJhY2VJZCwgc3BhbklkLCBwYXJlbnRTcGFuSWQgfSA9IHNjb3BlLnByb3BhZ2F0aW9uQ29udGV4dDsKICAgIGV2ZW50LmNvbnRleHRzID0gewogICAgICB0cmFjZTogewogICAgICAgIHRyYWNlX2lkOiB0cmFjZUlkLAogICAgICAgIHNwYW5faWQ6IHNwYW5JZCwKICAgICAgICBwYXJlbnRfc3Bhbl9pZDogcGFyZW50U3BhbklkLAogICAgICB9LAogICAgICAuLi5ldmVudC5jb250ZXh0cywKICAgIH07CiAgfQp9Cgphc3luYyBmdW5jdGlvbiBzZW5kQW5yRXZlbnQoZnJhbWVzLCBzY29wZSkgewogIGlmIChoYXNTZW50QW5yRXZlbnQpIHsKICAgIHJldHVybjsKICB9CgogIGhhc1NlbnRBbnJFdmVudCA9IHRydWU7CgogIGF3YWl0IHNlbmRBYm5vcm1hbFNlc3Npb24oKTsKCiAgbG9nKCdTZW5kaW5nIGV2ZW50Jyk7CgogIGNvbnN0IGV2ZW50ID0gewogICAgZXZlbnRfaWQ6IHV1aWQ0KCksCiAgICBjb250ZXh0czogb3B0aW9ucy5jb250ZXh0cywKICAgIHJlbGVhc2U6IG9wdGlvbnMucmVsZWFzZSwKICAgIGVudmlyb25tZW50OiBvcHRpb25zLmVudmlyb25tZW50LAogICAgZGlzdDogb3B0aW9ucy5kaXN0LAogICAgcGxhdGZvcm06ICdub2RlJywKICAgIGxldmVsOiAnZXJyb3InLAogICAgZXhjZXB0aW9uOiB7CiAgICAgIHZhbHVlczogWwogICAgICAgIHsKICAgICAgICAgIHR5cGU6ICdBcHBsaWNhdGlvbk5vdFJlc3BvbmRpbmcnLAogICAgICAgICAgdmFsdWU6IGBBcHBsaWNhdGlvbiBOb3QgUmVzcG9uZGluZyBmb3IgYXQgbGVhc3QgJHtvcHRpb25zLmFuclRocmVzaG9sZH0gbXNgLAogICAgICAgICAgc3RhY2t0cmFjZTogeyBmcmFtZXM6IHByZXBhcmVTdGFja0ZyYW1lcyhmcmFtZXMpIH0sCiAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2F5ICdDcmFzaGVkIGluJyBmb3IgdGhlIHN0YWNrIHRyYWNlCiAgICAgICAgICBtZWNoYW5pc206IHsgdHlwZTogJ0FOUicgfSwKICAgICAgICB9LAogICAgICBdLAogICAgfSwKICAgIHRhZ3M6IG9wdGlvbnMuc3RhdGljVGFncywKICB9OwoKICBpZiAoc2NvcGUpIHsKICAgIGFwcGx5U2NvcGVUb0V2ZW50KGV2ZW50LCBzY29wZSk7CiAgfQoKICBjb25zdCBlbnZlbG9wZSA9IGNyZWF0ZUV2ZW50RW52ZWxvcGUoZXZlbnQsIG9wdGlvbnMuZHNuLCBvcHRpb25zLnNka01ldGFkYXRhKTsKICAvLyBMb2cgdGhlIGVudmVsb3BlIHRvIGFpZCBpbiB0ZXN0aW5nCiAgbG9nKEpTT04uc3RyaW5naWZ5KGVudmVsb3BlKSk7CgogIGF3YWl0IHRyYW5zcG9ydC5zZW5kKGVudmVsb3BlKTsKICBhd2FpdCB0cmFuc3BvcnQuZmx1c2goMjAwMCk7CgogIC8vIERlbGF5IGZvciA1IHNlY29uZHMgc28gdGhhdCBzdGRpbyBjYW4gZmx1c2ggaW4gdGhlIG1haW4gZXZlbnQgbG9vcCBldmVyIHJlc3RhcnRzLgogIC8vIFRoaXMgaXMgbWFpbmx5IGZvciB0aGUgYmVuZWZpdCBvZiBsb2dnaW5nL2RlYnVnZ2luZyBpc3N1ZXMuCiAgc2V0VGltZW91dCgoKSA9PiB7CiAgICBwcm9jZXNzLmV4aXQoMCk7CiAgfSwgNTAwMCk7Cn0KCmxldCBkZWJ1Z2dlclBhdXNlOwoKaWYgKG9wdGlvbnMuY2FwdHVyZVN0YWNrVHJhY2UpIHsKICBsb2coJ0Nvbm5lY3RpbmcgdG8gZGVidWdnZXInKTsKCiAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCkgOwogIHNlc3Npb24uY29ubmVjdFRvTWFpblRocmVhZCgpOwoKICBsb2coJ0Nvbm5lY3RlZCB0byBkZWJ1Z2dlcicpOwoKICAvLyBDb2xsZWN0IHNjcmlwdElkIC0+IHVybCBtYXAgc28gd2UgY2FuIGxvb2sgdXAgdGhlIGZpbGVuYW1lcyBsYXRlcgogIGNvbnN0IHNjcmlwdHMgPSBuZXcgTWFwKCk7CgogIHNlc3Npb24ub24oJ0RlYnVnZ2VyLnNjcmlwdFBhcnNlZCcsIGV2ZW50ID0+IHsKICAgIHNjcmlwdHMuc2V0KGV2ZW50LnBhcmFtcy5zY3JpcHRJZCwgZXZlbnQucGFyYW1zLnVybCk7CiAgfSk7CgogIHNlc3Npb24ub24oJ0RlYnVnZ2VyLnBhdXNlZCcsIGV2ZW50ID0+IHsKICAgIGlmIChldmVudC5wYXJhbXMucmVhc29uICE9PSAnb3RoZXInKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0cnkgewogICAgICBsb2coJ0RlYnVnZ2VyIHBhdXNlZCcpOwoKICAgICAgLy8gY29weSB0aGUgZnJhbWVzCiAgICAgIGNvbnN0IGNhbGxGcmFtZXMgPSBbLi4uZXZlbnQucGFyYW1zLmNhbGxGcmFtZXNdOwoKICAgICAgY29uc3QgZ2V0TW9kdWxlTmFtZSA9IG9wdGlvbnMuYXBwUm9vdFBhdGggPyBjcmVhdGVHZXRNb2R1bGVGcm9tRmlsZW5hbWUob3B0aW9ucy5hcHBSb290UGF0aCkgOiAoKSA9PiB1bmRlZmluZWQ7CiAgICAgIGNvbnN0IHN0YWNrRnJhbWVzID0gY2FsbEZyYW1lcy5tYXAoZnJhbWUgPT4KICAgICAgICBjYWxsRnJhbWVUb1N0YWNrRnJhbWUoZnJhbWUsIHNjcmlwdHMuZ2V0KGZyYW1lLmxvY2F0aW9uLnNjcmlwdElkKSwgZ2V0TW9kdWxlTmFtZSksCiAgICAgICk7CgogICAgICAvLyBFdmFsdWF0ZSBhIHNjcmlwdCBpbiB0aGUgY3VycmVudGx5IHBhdXNlZCBjb250ZXh0CiAgICAgIHNlc3Npb24ucG9zdCgKICAgICAgICAnUnVudGltZS5ldmFsdWF0ZScsCiAgICAgICAgewogICAgICAgICAgLy8gR3JhYiB0aGUgdHJhY2UgY29udGV4dCBmcm9tIHRoZSBjdXJyZW50IHNjb3BlCiAgICAgICAgICBleHByZXNzaW9uOiAnZ2xvYmFsLl9fU0VOVFJZX0dFVF9TQ09QRVNfXygpOycsCiAgICAgICAgICAvLyBEb24ndCByZS10cmlnZ2VyIHRoZSBkZWJ1Z2dlciBpZiB0aGlzIGNhdXNlcyBhbiBlcnJvcgogICAgICAgICAgc2lsZW50OiB0cnVlLAogICAgICAgICAgLy8gU2VyaWFsaXplIHRoZSByZXN1bHQgdG8ganNvbiBvdGhlcndpc2Ugb25seSBwcmltaXRpdmVzIGFyZSBzdXBwb3J0ZWQKICAgICAgICAgIHJldHVybkJ5VmFsdWU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICAoZXJyLCBwYXJhbSkgPT4gewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBsb2coYEVycm9yIGV4ZWN1dGluZyBzY3JpcHQ6ICcke2Vyci5tZXNzYWdlfSdgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBzY29wZXMgPSBwYXJhbSAmJiBwYXJhbS5yZXN1bHQgPyAocGFyYW0ucmVzdWx0LnZhbHVlICkgOiB1bmRlZmluZWQ7CgogICAgICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5yZXN1bWUnKTsKICAgICAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZGlzYWJsZScpOwoKICAgICAgICAgIHNlbmRBbnJFdmVudChzdGFja0ZyYW1lcywgc2NvcGVzKS50aGVuKG51bGwsICgpID0+IHsKICAgICAgICAgICAgbG9nKCdTZW5kaW5nIEFOUiBldmVudCBmYWlsZWQuJyk7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICApOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzZXNzaW9uLnBvc3QoJ0RlYnVnZ2VyLnJlc3VtZScpOwogICAgICBzZXNzaW9uLnBvc3QoJ0RlYnVnZ2VyLmRpc2FibGUnKTsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9KTsKCiAgZGVidWdnZXJQYXVzZSA9ICgpID0+IHsKICAgIHRyeSB7CiAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZW5hYmxlJywgKCkgPT4gewogICAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIucGF1c2UnKTsKICAgICAgfSk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIC8vCiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gY3JlYXRlSHJUaW1lcigpIHsKICAvLyBUT0RPICh2OCk6IFdlIGNhbiB1c2UgcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCkgYWZ0ZXIgd2UgZHJvcCBub2RlIHY4CiAgbGV0IGxhc3RQb2xsID0gcHJvY2Vzcy5ocnRpbWUoKTsKCiAgcmV0dXJuIHsKICAgIGdldFRpbWVNczogKCkgPT4gewogICAgICBjb25zdCBbc2Vjb25kcywgbmFub1NlY29uZHNdID0gcHJvY2Vzcy5ocnRpbWUobGFzdFBvbGwpOwogICAgICByZXR1cm4gTWF0aC5mbG9vcihzZWNvbmRzICogMWUzICsgbmFub1NlY29uZHMgLyAxZTYpOwogICAgfSwKICAgIHJlc2V0OiAoKSA9PiB7CiAgICAgIGxhc3RQb2xsID0gcHJvY2Vzcy5ocnRpbWUoKTsKICAgIH0sCiAgfTsKfQoKZnVuY3Rpb24gd2F0Y2hkb2dUaW1lb3V0KCkgewogIGxvZygnV2F0Y2hkb2cgdGltZW91dCcpOwoKICBpZiAoZGVidWdnZXJQYXVzZSkgewogICAgbG9nKCdQYXVzaW5nIGRlYnVnZ2VyIHRvIGNhcHR1cmUgc3RhY2sgdHJhY2UnKTsKICAgIGRlYnVnZ2VyUGF1c2UoKTsKICB9IGVsc2UgewogICAgbG9nKCdDYXB0dXJpbmcgZXZlbnQgd2l0aG91dCBhIHN0YWNrIHRyYWNlJyk7CiAgICBzZW5kQW5yRXZlbnQoKS50aGVuKG51bGwsICgpID0+IHsKICAgICAgbG9nKCdTZW5kaW5nIEFOUiBldmVudCBmYWlsZWQgb24gd2F0Y2hkb2cgdGltZW91dC4nKTsKICAgIH0pOwogIH0KfQoKY29uc3QgeyBwb2xsIH0gPSB3YXRjaGRvZ1RpbWVyKGNyZWF0ZUhyVGltZXIsIG9wdGlvbnMucG9sbEludGVydmFsLCBvcHRpb25zLmFuclRocmVzaG9sZCwgd2F0Y2hkb2dUaW1lb3V0KTsKCl9vcHRpb25hbENoYWluKFtwYXJlbnRQb3J0LCAnb3B0aW9uYWxBY2Nlc3MnLCBfNiA9PiBfNi5vbiwgJ2NhbGwnLCBfNyA9PiBfNygnbWVzc2FnZScsIChtc2cpID0+IHsKICBpZiAobXNnLnNlc3Npb24pIHsKICAgIHNlc3Npb24gPSBtYWtlU2Vzc2lvbihtc2cuc2Vzc2lvbik7CiAgfQoKICBwb2xsKCk7Cn0pXSk7"});var yiA=U((DKQ,KKQ)=>{var{_optionalChain:Dx4,_optionalChainDelete:XKQ}=CQ();Object.defineProperty(DKQ,"__esModule",{value:!0});var Kx4=qA("url"),Dg=F6(),xiA=CQ(),zj1=E1A(),Vx4=JKQ(),Fx4=50,Hx4=5000;function Cj1(A,...Q){xiA.logger.log(`[ANR] ${A}`,...Q)}function Ex4(){return xiA.GLOBAL_OBJ}function zx4(){let A=Dg.getGlobalScope().getScopeData();return Dg.mergeScopeData(A,Dg.getIsolationScope().getScopeData()),Dg.mergeScopeData(A,Dg.getCurrentScope().getScopeData()),A.attachments=[],A.eventProcessors=[],A}function Cx4(){return xiA.dynamicRequire(KKQ,"worker_threads")}async function $x4(A){let Q={message:"ANR"},B={};for(let G of A.getEventProcessors()){if(Q===null)break;Q=await G(Q,B)}return Dx4([Q,"optionalAccess",(G)=>G.contexts])||{}}var IKQ="Anr",Ux4=(A={})=>{if(zj1.NODE_VERSION.major<16||zj1.NODE_VERSION.major===16&&zj1.NODE_VERSION.minor<17)throw Error("ANR detection requires Node 16.17.0 or later");let Q,B,G=Ex4();return G.__SENTRY_GET_SCOPES__=zx4,{name:IKQ,setupOnce(){},startWorker:()=>{if(Q)return;if(B)Q=Nx4(B,A)},stopWorker:()=>{if(Q)Q.then((Z)=>{Z(),Q=void 0})},setup(Z){B=Z,setImmediate(()=>this.startWorker())}}},WKQ=Dg.defineIntegration(Ux4),qx4=Dg.convertIntegrationFnToClass(IKQ,WKQ);async function Nx4(A,Q){let B=A.getDsn();if(!B)return()=>{};let G=await $x4(A);XKQ([G,"access",(D)=>D.app,"optionalAccess",(D)=>delete D.app_memory]),XKQ([G,"access",(D)=>D.device,"optionalAccess",(D)=>delete D.free_memory]);let Z=A.getOptions(),Y=A.getSdkMetadata()||{};if(Y.sdk)Y.sdk.integrations=Z.integrations.map((D)=>D.name);let J={debug:xiA.logger.isEnabled(),dsn:B,environment:Z.environment||"production",release:Z.release,dist:Z.dist,sdkMetadata:Y,appRootPath:Q.appRootPath,pollInterval:Q.pollInterval||Fx4,anrThreshold:Q.anrThreshold||Hx4,captureStackTrace:!!Q.captureStackTrace,staticTags:Q.staticTags||{},contexts:G};if(J.captureStackTrace){let D=qA("inspector");if(!D.url())D.open(0)}let{Worker:X}=Cx4(),I=new X(new Kx4.URL(`data:application/javascript;base64,${Vx4.base64WorkerScript}`),{workerData:J});process.on("exit",()=>{I.terminate()});let W=setInterval(()=>{try{let D=Dg.getCurrentScope().getSession(),K=D?{...D,toJSON:void 0}:void 0;I.postMessage({session:K})}catch(D){}},J.pollInterval);return W.unref(),I.on("message",(D)=>{if(D==="session-ended")Cj1("ANR event sent from ANR worker. Clearing session in this thread."),Dg.getCurrentScope().setSession(void 0)}),I.once("error",(D)=>{clearInterval(W),Cj1("ANR worker error",D)}),I.once("exit",(D)=>{clearInterval(W),Cj1("ANR worker exit",D)}),I.unref(),()=>{I.terminate(),clearInterval(W)}}DKQ.Anr=qx4;DKQ.anrIntegration=WKQ});var FKQ=U((VKQ)=>{Object.defineProperty(VKQ,"__esModule",{value:!0});var Ox4=F6(),Mx4=yiA();function Rx4(A){let Q=Ox4.getClient();return new Mx4.Anr(A).setup(Q),Promise.resolve()}VKQ.enableAnrDetection=Rx4});var $j1=U((zKQ)=>{var{_optionalChain:HKQ}=CQ();Object.defineProperty(zKQ,"__esModule",{value:!0});var bGA=F6(),EKQ=CQ();function jx4(A={}){return function({path:Q,type:B,next:G,rawInput:Z}){let Y=HKQ([bGA.getClient,"call",(W)=>W(),"optionalAccess",(W)=>W.getOptions,"call",(W)=>W()]),J=bGA.getCurrentScope().getTransaction();if(J){J.updateName(`trpc/${Q}`),J.setAttribute(bGA.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,"route"),J.op="rpc.server";let W={procedure_type:B};if(A.attachRpcInput!==void 0?A.attachRpcInput:HKQ([Y,"optionalAccess",(D)=>D.sendDefaultPii]))W.input=EKQ.normalize(Z);J.setContext("trpc",W)}function X(W){if(!W.ok)bGA.captureException(W.error,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}})}let I;try{I=G()}catch(W){throw bGA.captureException(W,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}}),W}if(EKQ.isThenable(I))Promise.resolve(I).then((W)=>{X(W)},(W)=>{bGA.captureException(W,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}})});else X(I);return I}}zKQ.trpcMiddleware=jx4});var UKQ=U(($KQ)=>{Object.defineProperty($KQ,"__esModule",{value:!0});var CKQ=CQ();function Px4(A,Q){return CKQ.extractRequestData(A,{include:Q})}function Sx4(A,Q,B={}){return CKQ.addRequestDataToEvent(A,Q,{include:B})}$KQ.extractRequestData=Px4;$KQ.parseRequest=Sx4});var wKQ=U((NKQ)=>{var{_optionalChain:viA}=CQ();Object.defineProperty(NKQ,"__esModule",{value:!0});var iV=F6(),fGA=CQ(),vx4=BqA(),kiA=Hj1(),kx4=$j1(),qKQ=UKQ();function bx4(){return function(Q,B,G){let Z=viA([iV.getClient,"call",(D)=>D(),"optionalAccess",(D)=>D.getOptions,"call",(D)=>D()]);if(!Z||Z.instrumenter!=="sentry"||viA([Q,"access",(D)=>D.method,"optionalAccess",(D)=>D.toUpperCase,"call",(D)=>D()])==="OPTIONS"||viA([Q,"access",(D)=>D.method,"optionalAccess",(D)=>D.toUpperCase,"call",(D)=>D()])==="HEAD")return G();let Y=Q.headers&&fGA.isString(Q.headers["sentry-trace"])?Q.headers["sentry-trace"]:void 0,J=viA([Q,"access",(D)=>D.headers,"optionalAccess",(D)=>D.baggage]);if(!iV.hasTracingEnabled(Z))return G();let[X,I]=fGA.extractPathForTransaction(Q,{path:!0,method:!0}),W=iV.continueTrace({sentryTrace:Y,baggage:J},(D)=>iV.startTransaction({name:X,op:"http.server",origin:"auto.http.node.tracingHandler",...D,data:{[iV.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:I},metadata:{...D.metadata,request:Q}},{request:fGA.extractRequestData(Q)}));iV.getCurrentScope().setSpan(W),B.__sentry_transaction=W,B.once("finish",()=>{setImmediate(()=>{fGA.addRequestDataToTransaction(W,Q),iV.setHttpStatus(W,B.statusCode),W.end()})}),G()}}function fx4(A={}){let Q;if("include"in A)Q={include:A.include};else{let{ip:B,request:G,transaction:Z,user:Y}=A;if(B||G||Z||Y)Q={include:fGA.dropUndefinedKeys({ip:B,request:G,transaction:Z,user:Y})}}return Q}function hx4(A){let Q=fx4(A),B=iV.getClient();if(B&&kiA.isAutoSessionTrackingEnabled(B)){B.initSessionFlusher();let G=iV.getCurrentScope();if(G.getSession())G.setSession()}return function(Z,Y,J){if(A&&A.flushTimeout&&A.flushTimeout>0){let X=Y.end;Y.end=function(I,W,D){iV.flush(A.flushTimeout).then(()=>{X.call(this,I,W,D)}).then(null,(K)=>{vx4.DEBUG_BUILD&&fGA.logger.error(K),X.call(this,I,W,D)})}}iV.runWithAsyncContext(()=>{let X=iV.getCurrentScope();X.setSDKProcessingMetadata({request:Z,requestDataOptionsFromExpressHandler:Q});let I=iV.getClient();if(kiA.isAutoSessionTrackingEnabled(I))X.setRequestSession({status:"ok"});Y.once("finish",()=>{let W=iV.getClient();if(kiA.isAutoSessionTrackingEnabled(W))setImmediate(()=>{if(W&&W._captureRequestSession)W._captureRequestSession()})}),J()})}}function gx4(A){let Q=A.status||A.statusCode||A.status_code||A.output&&A.output.statusCode;return Q?parseInt(Q,10):500}function ux4(A){return gx4(A)>=500}function mx4(A){return function(B,G,Z,Y){if((A&&A.shouldHandleError||ux4)(B)){iV.withScope((X)=>{X.setSDKProcessingMetadata({request:G});let I=Z.__sentry_transaction;if(I&&!iV.getActiveSpan())X.setSpan(I);let W=iV.getClient();if(W&&kiA.isAutoSessionTrackingEnabled(W)){if(W._sessionFlusher!==void 0){let V=X.getRequestSession();if(V&&V.status!==void 0)V.status="crashed"}}let D=iV.captureException(B,{mechanism:{type:"middleware",handled:!1}});Z.sentry=D,Y(B)});return}Y(B)}}var dx4=kx4.trpcMiddleware;NKQ.extractRequestData=qKQ.extractRequestData;NKQ.parseRequest=qKQ.parseRequest;NKQ.errorHandler=mx4;NKQ.requestHandler=hx4;NKQ.tracingHandler=bx4;NKQ.trpcMiddleware=dx4});var Uj1=U((TKQ)=>{Object.defineProperty(TKQ,"__esModule",{value:!0});var Zq=F6(),OKQ=CQ();function LKQ(A){return A&&A.statusCode!==void 0}function ox4(A){return A&&A.error!==void 0}function rx4(A){Zq.captureException(A,{mechanism:{type:"hapi",handled:!1,data:{function:"hapiErrorPlugin"}}})}var MKQ={name:"SentryHapiErrorPlugin",version:Zq.SDK_VERSION,register:async function(A){A.events.on("request",(B,G)=>{let Z=Zq.getActiveTransaction();if(ox4(G))rx4(G.error);if(Z)Z.setStatus("internal_error"),Z.end()})}},RKQ={name:"SentryHapiTracingPlugin",version:Zq.SDK_VERSION,register:async function(A){let Q=A;Q.ext("onPreHandler",(B,G)=>{let Z=Zq.continueTrace({sentryTrace:B.headers["sentry-trace"]||void 0,baggage:B.headers.baggage||void 0},(Y)=>{return Zq.startTransaction({...Y,op:"hapi.request",name:B.route.path,description:`${B.route.method} ${B.path}`})});return Zq.getCurrentScope().setSpan(Z),G.continue}),Q.ext("onPreResponse",(B,G)=>{let Z=Zq.getActiveTransaction();if(B.response&&LKQ(B.response)&&Z){let Y=B.response;Y.header("sentry-trace",Zq.spanToTraceHeader(Z));let J=OKQ.dynamicSamplingContextToSentryBaggageHeader(Zq.getDynamicSamplingContextFromSpan(Z));if(J)Y.header("baggage",J)}return G.continue}),Q.ext("onPostHandler",(B,G)=>{let Z=Zq.getActiveTransaction();if(Z){if(B.response&&LKQ(B.response))Zq.setHttpStatus(Z,B.response.statusCode);Z.end()}return G.continue})}},_KQ="Hapi",sx4=(A={})=>{let Q=A.server;return{name:_KQ,setupOnce(){if(!Q)return;OKQ.fill(Q,"start",(B)=>{return async function(){return await this.register(RKQ),await this.register(MKQ),B.apply(this)}})}}},jKQ=Zq.defineIntegration(sx4),tx4=Zq.convertIntegrationFnToClass(_KQ,jKQ);TKQ.Hapi=tx4;TKQ.hapiErrorPlugin=MKQ;TKQ.hapiIntegration=jKQ;TKQ.hapiTracingPlugin=RKQ});var SKQ=U((PKQ)=>{Object.defineProperty(PKQ,"__esModule",{value:!0});var Gy4=HiA(),Zy4=$iA(),Yy4=MiA(),Jy4=_iA(),Xy4=wiA(),Iy4=CiA(),Wy4=EiA(),Dy4=F6(),Ky4=NiA(),Vy4=PiA(),Fy4=jiA(),Hy4=yiA(),Ey4=Uj1();PKQ.Console=Gy4.Console;PKQ.Http=Zy4.Http;PKQ.OnUncaughtException=Yy4.OnUncaughtException;PKQ.OnUnhandledRejection=Jy4.OnUnhandledRejection;PKQ.Modules=Xy4.Modules;PKQ.ContextLines=Iy4.ContextLines;PKQ.Context=Wy4.Context;PKQ.RequestData=Dy4.RequestData;PKQ.LocalVariables=Ky4.LocalVariables;PKQ.Undici=Vy4.Undici;PKQ.Spotlight=Fy4.Spotlight;PKQ.Anr=Hy4.Anr;PKQ.Hapi=Ey4.Hapi});var yKQ=U((xKQ)=>{Object.defineProperty(xKQ,"__esModule",{value:!0});var N1A=s_1();xKQ.Apollo=N1A.Apollo;xKQ.Express=N1A.Express;xKQ.GraphQL=N1A.GraphQL;xKQ.Mongo=N1A.Mongo;xKQ.Mysql=N1A.Mysql;xKQ.Postgres=N1A.Postgres;xKQ.Prisma=N1A.Prisma});var fKQ=U((bKQ)=>{Object.defineProperty(bKQ,"__esModule",{value:!0});var w1A=F6(),L1A=CQ(),vKQ="CaptureConsole",by4=(A={})=>{let Q=A.levels||L1A.CONSOLE_LEVELS;return{name:vKQ,setupOnce(){},setup(B){if(!("console"in L1A.GLOBAL_OBJ))return;L1A.addConsoleInstrumentationHandler(({args:G,level:Z})=>{if(w1A.getClient()!==B||!Q.includes(Z))return;hy4(G,Z)})}}},kKQ=w1A.defineIntegration(by4),fy4=w1A.convertIntegrationFnToClass(vKQ,kKQ);function hy4(A,Q){let B={level:L1A.severityLevelFromString(Q),extra:{arguments:A}};w1A.withScope((G)=>{if(G.addEventProcessor((J)=>{return J.logger="console",L1A.addExceptionMechanism(J,{handled:!1,type:"console"}),J}),Q==="assert"&&A[0]===!1){let J=`Assertion failed: ${L1A.safeJoin(A.slice(1)," ")||"console.assert"}`;G.setExtra("arguments",A.slice(1)),w1A.captureMessage(J,B);return}let Z=A.find((J)=>J instanceof Error);if(Q==="error"&&Z){w1A.captureException(Z,B);return}let Y=L1A.safeJoin(A," ");w1A.captureMessage(Y,B)})}bKQ.CaptureConsole=fy4;bKQ.captureConsoleIntegration=kKQ});var dKQ=U((mKQ)=>{Object.defineProperty(mKQ,"__esModule",{value:!0});var hKQ=F6(),my4=CQ(),gKQ="Debug",dy4=(A={})=>{let Q={debugger:!1,stringify:!1,...A};return{name:gKQ,setupOnce(){},setup(B){if(!B.on)return;B.on("beforeSendEvent",(G,Z)=>{if(Q.debugger)debugger;my4.consoleSandbox(()=>{if(Q.stringify){if(console.log(JSON.stringify(G,null,2)),Z&&Object.keys(Z).length)console.log(JSON.stringify(Z,null,2))}else if(console.log(G),Z&&Object.keys(Z).length)console.log(Z)})})}}},uKQ=hKQ.defineIntegration(dy4),py4=hKQ.convertIntegrationFnToClass(gKQ,uKQ);mKQ.Debug=py4;mKQ.debugIntegration=uKQ});var ZqA=U((pKQ)=>{Object.defineProperty(pKQ,"__esModule",{value:!0});var iy4=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;pKQ.DEBUG_BUILD=iy4});var eKQ=U((tKQ)=>{Object.defineProperty(tKQ,"__esModule",{value:!0});var iKQ=F6(),ay4=CQ(),oy4=ZqA(),nKQ="Dedupe",ry4=()=>{let A;return{name:nKQ,setupOnce(){},processEvent(Q){if(Q.type)return Q;try{if(oKQ(Q,A))return oy4.DEBUG_BUILD&&ay4.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(B){}return A=Q}}},aKQ=iKQ.defineIntegration(ry4),sy4=iKQ.convertIntegrationFnToClass(nKQ,aKQ);function oKQ(A,Q){if(!Q)return!1;if(ty4(A,Q))return!0;if(ey4(A,Q))return!0;return!1}function ty4(A,Q){let B=A.message,G=Q.message;if(!B&&!G)return!1;if(B&&!G||!B&&G)return!1;if(B!==G)return!1;if(!sKQ(A,Q))return!1;if(!rKQ(A,Q))return!1;return!0}function ey4(A,Q){let B=cKQ(Q),G=cKQ(A);if(!B||!G)return!1;if(B.type!==G.type||B.value!==G.value)return!1;if(!sKQ(A,Q))return!1;if(!rKQ(A,Q))return!1;return!0}function rKQ(A,Q){let B=lKQ(A),G=lKQ(Q);if(!B&&!G)return!0;if(B&&!G||!B&&G)return!1;if(B=B,G=G,G.length!==B.length)return!1;for(let Z=0;Z<G.length;Z++){let Y=G[Z],J=B[Z];if(Y.filename!==J.filename||Y.lineno!==J.lineno||Y.colno!==J.colno||Y.function!==J.function)return!1}return!0}function sKQ(A,Q){let B=A.fingerprint,G=Q.fingerprint;if(!B&&!G)return!0;if(B&&!G||!B&&G)return!1;B=B,G=G;try{return B.join("")===G.join("")}catch(Z){return!1}}function cKQ(A){return A.exception&&A.exception.values&&A.exception.values[0]}function lKQ(A){let Q=A.exception;if(Q)try{return Q.values[0].stacktrace.frames}catch(B){return}return}tKQ.Dedupe=sy4;tKQ._shouldDropEvent=oKQ;tKQ.dedupeIntegration=aKQ});var ZVQ=U((GVQ)=>{Object.defineProperty(GVQ,"__esModule",{value:!0});var AVQ=F6(),Qi=CQ(),Gv4=ZqA(),QVQ="ExtraErrorData",Zv4=(A={})=>{let Q=A.depth||3,B=A.captureErrorCause||!1;return{name:QVQ,setupOnce(){},processEvent(G,Z){return Jv4(G,Z,Q,B)}}},BVQ=AVQ.defineIntegration(Zv4),Yv4=AVQ.convertIntegrationFnToClass(QVQ,BVQ);function Jv4(A,Q={},B,G){if(!Q.originalException||!Qi.isError(Q.originalException))return A;let Z=Q.originalException.name||Q.originalException.constructor.name,Y=Xv4(Q.originalException,G);if(Y){let J={...A.contexts},X=Qi.normalize(Y,B);if(Qi.isPlainObject(X))Qi.addNonEnumerableProperty(X,"__sentry_skip_normalization__",!0),J[Z]=X;return{...A,contexts:J}}return A}function Xv4(A,Q){try{let B=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],G={};for(let Z of Object.keys(A)){if(B.indexOf(Z)!==-1)continue;let Y=A[Z];G[Z]=Qi.isError(Y)?Y.toString():Y}if(Q&&A.cause!==void 0)G.cause=Qi.isError(A.cause)?A.cause.toString():A.cause;if(typeof A.toJSON==="function"){let Z=A.toJSON();for(let Y of Object.keys(Z)){let J=Z[Y];G[Y]=Qi.isError(J)?J.toString():J}}return G}catch(B){Gv4.DEBUG_BUILD&&Qi.logger.error("Unable to extract extra data from the Error object:",B)}return null}GVQ.ExtraErrorData=Yv4;GVQ.extraErrorDataIntegration=BVQ});var JVQ=U((YVQ,qj1)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(A){if(typeof YVQ==="object"&&typeof qj1<"u")qj1.exports=A();else if(typeof define==="function"&&define.amd)define([],A);else{var Q;if(typeof window<"u")Q=window;else if(typeof global<"u")Q=global;else if(typeof self<"u")Q=self;else Q=this;Q.localforage=A()}})(function(){var A,Q,B;return function G(Z,Y,J){function X(D,K){if(!Y[D]){if(!Z[D]){var V=qA;if(!K&&V)return V(D,!0);if(I)return I(D,!0);var F=Error("Cannot find module '"+D+"'");throw F.code="MODULE_NOT_FOUND",F}var H=Y[D]={exports:{}};Z[D][0].call(H.exports,function(E){var z=Z[D][1][E];return X(z?z:E)},H,H.exports,G,Z,Y,J)}return Y[D].exports}var I=qA;for(var W=0;W<J.length;W++)X(J[W]);return X}({1:[function(G,Z,Y){(function(J){var X=J.MutationObserver||J.WebKitMutationObserver,I;if(X){var W=0,D=new X(E),K=J.document.createTextNode("");D.observe(K,{characterData:!0}),I=function(){K.data=W=++W%2}}else if(!J.setImmediate&&typeof J.MessageChannel<"u"){var V=new J.MessageChannel;V.port1.onmessage=E,I=function(){V.port2.postMessage(0)}}else if("document"in J&&"onreadystatechange"in J.document.createElement("script"))I=function(){var C=J.document.createElement("script");C.onreadystatechange=function(){E(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},J.document.documentElement.appendChild(C)};else I=function(){setTimeout(E,0)};var F,H=[];function E(){F=!0;var C,O,L=H.length;while(L){O=H,H=[],C=-1;while(++C<L)O[C]();L=H.length}F=!1}Z.exports=z;function z(C){if(H.push(C)===1&&!F)I()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(G,Z,Y){var J=G(1);function X(){}var I={},W=["REJECTED"],D=["FULFILLED"],K=["PENDING"];Z.exports=V;function V(j){if(typeof j!=="function")throw TypeError("resolver must be a function");if(this.state=K,this.queue=[],this.outcome=void 0,j!==X)z(this,j)}V.prototype.catch=function(j){return this.then(null,j)},V.prototype.then=function(j,P){if(typeof j!=="function"&&this.state===D||typeof P!=="function"&&this.state===W)return this;var y=new this.constructor(X);if(this.state!==K){var v=this.state===D?j:P;H(y,v,this.outcome)}else this.queue.push(new F(y,j,P));return y};function F(j,P,y){if(this.promise=j,typeof P==="function")this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled;if(typeof y==="function")this.onRejected=y,this.callRejected=this.otherCallRejected}F.prototype.callFulfilled=function(j){I.resolve(this.promise,j)},F.prototype.otherCallFulfilled=function(j){H(this.promise,this.onFulfilled,j)},F.prototype.callRejected=function(j){I.reject(this.promise,j)},F.prototype.otherCallRejected=function(j){H(this.promise,this.onRejected,j)};function H(j,P,y){J(function(){var v;try{v=P(y)}catch(m){return I.reject(j,m)}if(v===j)I.reject(j,TypeError("Cannot resolve promise with itself"));else I.resolve(j,v)})}I.resolve=function(j,P){var y=C(E,P);if(y.status==="error")return I.reject(j,y.value);var v=y.value;if(v)z(j,v);else{j.state=D,j.outcome=P;var m=-1,h=j.queue.length;while(++m<h)j.queue[m].callFulfilled(P)}return j},I.reject=function(j,P){j.state=W,j.outcome=P;var y=-1,v=j.queue.length;while(++y<v)j.queue[y].callRejected(P);return j};function E(j){var P=j&&j.then;if(j&&(typeof j==="object"||typeof j==="function")&&typeof P==="function")return function(){P.apply(j,arguments)}}function z(j,P){var y=!1;function v(t){if(y)return;y=!0,I.reject(j,t)}function m(t){if(y)return;y=!0,I.resolve(j,t)}function h(){P(m,v)}var e=C(h);if(e.status==="error")v(e.value)}function C(j,P){var y={};try{y.value=j(P),y.status="success"}catch(v){y.status="error",y.value=v}return y}V.resolve=O;function O(j){if(j instanceof this)return j;return I.resolve(new this(X),j)}V.reject=L;function L(j){var P=new this(X);return I.reject(P,j)}V.all=M;function M(j){var P=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(TypeError("must be an array"));var y=j.length,v=!1;if(!y)return this.resolve([]);var m=Array(y),h=0,e=-1,t=new this(X);while(++e<y)b(j[e],e);return t;function b(l,QA){P.resolve(l).then(WA,function(wA){if(!v)v=!0,I.reject(t,wA)});function WA(wA){if(m[QA]=wA,++h===y&&!v)v=!0,I.resolve(t,m)}}}V.race=_;function _(j){var P=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(TypeError("must be an array"));var y=j.length,v=!1;if(!y)return this.resolve([]);var m=-1,h=new this(X);while(++m<y)e(j[m]);return h;function e(t){P.resolve(t).then(function(b){if(!v)v=!0,I.resolve(h,b)},function(b){if(!v)v=!0,I.reject(h,b)})}}},{"1":1}],3:[function(G,Z,Y){(function(J){if(typeof J.Promise!=="function")J.Promise=G(2)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"2":2}],4:[function(G,Z,Y){var J=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(oA){return typeof oA}:function(oA){return oA&&typeof Symbol==="function"&&oA.constructor===Symbol&&oA!==Symbol.prototype?"symbol":typeof oA};function X(oA,KA){if(!(oA instanceof KA))throw TypeError("Cannot call a class as a function")}function I(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(oA){return}}var W=I();function D(){try{if(!W||!W.open)return!1;var oA=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),KA=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!oA||KA)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(YA){return!1}}function K(oA,KA){oA=oA||[],KA=KA||{};try{return new Blob(oA,KA)}catch(dA){if(dA.name!=="TypeError")throw dA;var YA=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,vA=new YA;for(var uA=0;uA<oA.length;uA+=1)vA.append(oA[uA]);return vA.getBlob(KA.type)}}if(typeof Promise>"u")G(3);var V=Promise;function F(oA,KA){if(KA)oA.then(function(YA){KA(null,YA)},function(YA){KA(YA)})}function H(oA,KA,YA){if(typeof KA==="function")oA.then(KA);if(typeof YA==="function")oA.catch(YA)}function E(oA){if(typeof oA!=="string")console.warn(oA+" used as a key, but it is not a string."),oA=String(oA);return oA}function z(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",O=void 0,L={},M=Object.prototype.toString,_="readonly",j="readwrite";function P(oA){var KA=oA.length,YA=new ArrayBuffer(KA),vA=new Uint8Array(YA);for(var uA=0;uA<KA;uA++)vA[uA]=oA.charCodeAt(uA);return YA}function y(oA){return new V(function(KA){var YA=oA.transaction(C,j),vA=K([""]);YA.objectStore(C).put(vA,"key"),YA.onabort=function(uA){uA.preventDefault(),uA.stopPropagation(),KA(!1)},YA.oncomplete=function(){var uA=navigator.userAgent.match(/Chrome\/(\d+)/),dA=navigator.userAgent.match(/Edge\//);KA(dA||!uA||parseInt(uA[1],10)>=43)}}).catch(function(){return!1})}function v(oA){if(typeof O==="boolean")return V.resolve(O);return y(oA).then(function(KA){return O=KA,O})}function m(oA){var KA=L[oA.name],YA={};if(YA.promise=new V(function(vA,uA){YA.resolve=vA,YA.reject=uA}),KA.deferredOperations.push(YA),!KA.dbReady)KA.dbReady=YA.promise;else KA.dbReady=KA.dbReady.then(function(){return YA.promise})}function h(oA){var KA=L[oA.name],YA=KA.deferredOperations.pop();if(YA)return YA.resolve(),YA.promise}function e(oA,KA){var YA=L[oA.name],vA=YA.deferredOperations.pop();if(vA)return vA.reject(KA),vA.promise}function t(oA,KA){return new V(function(YA,vA){if(L[oA.name]=L[oA.name]||FA(),oA.db)if(KA)m(oA),oA.db.close();else return YA(oA.db);var uA=[oA.name];if(KA)uA.push(oA.version);var dA=W.open.apply(W,uA);if(KA)dA.onupgradeneeded=function(C1){var T1=dA.result;try{if(T1.createObjectStore(oA.storeName),C1.oldVersion<=1)T1.createObjectStore(C)}catch(h1){if(h1.name==="ConstraintError")console.warn('The database "'+oA.name+'" has been upgraded from version '+C1.oldVersion+" to version "+C1.newVersion+', but the storage "'+oA.storeName+'" already exists.');else throw h1}};dA.onerror=function(C1){C1.preventDefault(),vA(dA.error)},dA.onsuccess=function(){var C1=dA.result;C1.onversionchange=function(T1){T1.target.close()},YA(C1),h(oA)}})}function b(oA){return t(oA,!1)}function l(oA){return t(oA,!0)}function QA(oA,KA){if(!oA.db)return!0;var YA=!oA.db.objectStoreNames.contains(oA.storeName),vA=oA.version<oA.db.version,uA=oA.version>oA.db.version;if(vA){if(oA.version!==KA)console.warn('The database "'+oA.name+`" can't be downgraded from version `+oA.db.version+" to version "+oA.version+".");oA.version=oA.db.version}if(uA||YA){if(YA){var dA=oA.db.version+1;if(dA>oA.version)oA.version=dA}return!0}return!1}function WA(oA){return new V(function(KA,YA){var vA=new FileReader;vA.onerror=YA,vA.onloadend=function(uA){var dA=btoa(uA.target.result||"");KA({__local_forage_encoded_blob:!0,data:dA,type:oA.type})},vA.readAsBinaryString(oA)})}function wA(oA){var KA=P(atob(oA.data));return K([KA],{type:oA.type})}function _A(oA){return oA&&oA.__local_forage_encoded_blob}function hA(oA){var KA=this,YA=KA._initReady().then(function(){var vA=L[KA._dbInfo.name];if(vA&&vA.dbReady)return vA.dbReady});return H(YA,oA,oA),YA}function jA(oA){m(oA);var KA=L[oA.name],YA=KA.forages;for(var vA=0;vA<YA.length;vA++){var uA=YA[vA];if(uA._dbInfo.db)uA._dbInfo.db.close(),uA._dbInfo.db=null}return oA.db=null,b(oA).then(function(dA){if(oA.db=dA,QA(oA))return l(oA);return dA}).then(function(dA){oA.db=KA.db=dA;for(var C1=0;C1<YA.length;C1++)YA[C1]._dbInfo.db=dA}).catch(function(dA){throw e(oA,dA),dA})}function yA(oA,KA,YA,vA){if(vA===void 0)vA=1;try{var uA=oA.db.transaction(oA.storeName,KA);YA(null,uA)}catch(dA){if(vA>0&&(!oA.db||dA.name==="InvalidStateError"||dA.name==="NotFoundError"))return V.resolve().then(function(){if(!oA.db||dA.name==="NotFoundError"&&!oA.db.objectStoreNames.contains(oA.storeName)&&oA.version<=oA.db.version){if(oA.db)oA.version=oA.db.version+1;return l(oA)}}).then(function(){return jA(oA).then(function(){yA(oA,KA,YA,vA-1)})}).catch(YA);YA(dA)}}function FA(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function GA(oA){var KA=this,YA={db:null};if(oA)for(var vA in oA)YA[vA]=oA[vA];var uA=L[YA.name];if(!uA)uA=FA(),L[YA.name]=uA;if(uA.forages.push(KA),!KA._initReady)KA._initReady=KA.ready,KA.ready=hA;var dA=[];function C1(){return V.resolve()}for(var T1=0;T1<uA.forages.length;T1++){var h1=uA.forages[T1];if(h1!==KA)dA.push(h1._initReady().catch(C1))}var n1=uA.forages.slice(0);return V.all(dA).then(function(){return YA.db=uA.db,b(YA)}).then(function(p1){if(YA.db=p1,QA(YA,KA._defaultConfig.version))return l(YA);return p1}).then(function(p1){YA.db=uA.db=p1,KA._dbInfo=YA;for(var N0=0;N0<n1.length;N0++){var MQ=n1[N0];if(MQ!==KA)MQ._dbInfo.db=YA.db,MQ._dbInfo.version=YA.version}})}function AA(oA,KA){var YA=this;oA=E(oA);var vA=new V(function(uA,dA){YA.ready().then(function(){yA(YA._dbInfo,_,function(C1,T1){if(C1)return dA(C1);try{var h1=T1.objectStore(YA._dbInfo.storeName),n1=h1.get(oA);n1.onsuccess=function(){var p1=n1.result;if(p1===void 0)p1=null;if(_A(p1))p1=wA(p1);uA(p1)},n1.onerror=function(){dA(n1.error)}}catch(p1){dA(p1)}})}).catch(dA)});return F(vA,KA),vA}function EA(oA,KA){var YA=this,vA=new V(function(uA,dA){YA.ready().then(function(){yA(YA._dbInfo,_,function(C1,T1){if(C1)return dA(C1);try{var h1=T1.objectStore(YA._dbInfo.storeName),n1=h1.openCursor(),p1=1;n1.onsuccess=function(){var N0=n1.result;if(N0){var MQ=N0.value;if(_A(MQ))MQ=wA(MQ);var vB=oA(MQ,N0.key,p1++);if(vB!==void 0)uA(vB);else N0.continue()}else uA()},n1.onerror=function(){dA(n1.error)}}catch(N0){dA(N0)}})}).catch(dA)});return F(vA,KA),vA}function $A(oA,KA,YA){var vA=this;oA=E(oA);var uA=new V(function(dA,C1){var T1;vA.ready().then(function(){if(T1=vA._dbInfo,M.call(KA)==="[object Blob]")return v(T1.db).then(function(h1){if(h1)return KA;return WA(KA)});return KA}).then(function(h1){yA(vA._dbInfo,j,function(n1,p1){if(n1)return C1(n1);try{var N0=p1.objectStore(vA._dbInfo.storeName);if(h1===null)h1=void 0;var MQ=N0.put(h1,oA);p1.oncomplete=function(){if(h1===void 0)h1=null;dA(h1)},p1.onabort=p1.onerror=function(){var vB=MQ.error?MQ.error:MQ.transaction.error;C1(vB)}}catch(vB){C1(vB)}})}).catch(C1)});return F(uA,YA),uA}function MA(oA,KA){var YA=this;oA=E(oA);var vA=new V(function(uA,dA){YA.ready().then(function(){yA(YA._dbInfo,j,function(C1,T1){if(C1)return dA(C1);try{var h1=T1.objectStore(YA._dbInfo.storeName),n1=h1.delete(oA);T1.oncomplete=function(){uA()},T1.onerror=function(){dA(n1.error)},T1.onabort=function(){var p1=n1.error?n1.error:n1.transaction.error;dA(p1)}}catch(p1){dA(p1)}})}).catch(dA)});return F(vA,KA),vA}function r(oA){var KA=this,YA=new V(function(vA,uA){KA.ready().then(function(){yA(KA._dbInfo,j,function(dA,C1){if(dA)return uA(dA);try{var T1=C1.objectStore(KA._dbInfo.storeName),h1=T1.clear();C1.oncomplete=function(){vA()},C1.onabort=C1.onerror=function(){var n1=h1.error?h1.error:h1.transaction.error;uA(n1)}}catch(n1){uA(n1)}})}).catch(uA)});return F(YA,oA),YA}function VA(oA){var KA=this,YA=new V(function(vA,uA){KA.ready().then(function(){yA(KA._dbInfo,_,function(dA,C1){if(dA)return uA(dA);try{var T1=C1.objectStore(KA._dbInfo.storeName),h1=T1.count();h1.onsuccess=function(){vA(h1.result)},h1.onerror=function(){uA(h1.error)}}catch(n1){uA(n1)}})}).catch(uA)});return F(YA,oA),YA}function XA(oA,KA){var YA=this,vA=new V(function(uA,dA){if(oA<0){uA(null);return}YA.ready().then(function(){yA(YA._dbInfo,_,function(C1,T1){if(C1)return dA(C1);try{var h1=T1.objectStore(YA._dbInfo.storeName),n1=!1,p1=h1.openKeyCursor();p1.onsuccess=function(){var N0=p1.result;if(!N0){uA(null);return}if(oA===0)uA(N0.key);else if(!n1)n1=!0,N0.advance(oA);else uA(N0.key)},p1.onerror=function(){dA(p1.error)}}catch(N0){dA(N0)}})}).catch(dA)});return F(vA,KA),vA}function IA(oA){var KA=this,YA=new V(function(vA,uA){KA.ready().then(function(){yA(KA._dbInfo,_,function(dA,C1){if(dA)return uA(dA);try{var T1=C1.objectStore(KA._dbInfo.storeName),h1=T1.openKeyCursor(),n1=[];h1.onsuccess=function(){var p1=h1.result;if(!p1){vA(n1);return}n1.push(p1.key),p1.continue()},h1.onerror=function(){uA(h1.error)}}catch(p1){uA(p1)}})}).catch(uA)});return F(YA,oA),YA}function NA(oA,KA){KA=z.apply(this,arguments);var YA=this.config();if(oA=typeof oA!=="function"&&oA||{},!oA.name)oA.name=oA.name||YA.name,oA.storeName=oA.storeName||YA.storeName;var vA=this,uA;if(!oA.name)uA=V.reject("Invalid arguments");else{var dA=oA.name===YA.name&&vA._dbInfo.db,C1=dA?V.resolve(vA._dbInfo.db):b(oA).then(function(T1){var h1=L[oA.name],n1=h1.forages;h1.db=T1;for(var p1=0;p1<n1.length;p1++)n1[p1]._dbInfo.db=T1;return T1});if(!oA.storeName)uA=C1.then(function(T1){m(oA);var h1=L[oA.name],n1=h1.forages;T1.close();for(var p1=0;p1<n1.length;p1++){var N0=n1[p1];N0._dbInfo.db=null}var MQ=new V(function(vB,a2){var c2=W.deleteDatabase(oA.name);c2.onerror=function(){var Q4=c2.result;if(Q4)Q4.close();a2(c2.error)},c2.onblocked=function(){console.warn('dropInstance blocked for database "'+oA.name+'" until all open connections are closed')},c2.onsuccess=function(){var Q4=c2.result;if(Q4)Q4.close();vB(Q4)}});return MQ.then(function(vB){h1.db=vB;for(var a2=0;a2<n1.length;a2++){var c2=n1[a2];h(c2._dbInfo)}}).catch(function(vB){throw(e(oA,vB)||V.resolve()).catch(function(){}),vB})});else uA=C1.then(function(T1){if(!T1.objectStoreNames.contains(oA.storeName))return;var h1=T1.version+1;m(oA);var n1=L[oA.name],p1=n1.forages;T1.close();for(var N0=0;N0<p1.length;N0++){var MQ=p1[N0];MQ._dbInfo.db=null,MQ._dbInfo.version=h1}var vB=new V(function(a2,c2){var Q4=W.open(oA.name,h1);Q4.onerror=function(q3){var zZ=Q4.result;zZ.close(),c2(q3)},Q4.onupgradeneeded=function(){var q3=Q4.result;q3.deleteObjectStore(oA.storeName)},Q4.onsuccess=function(){var q3=Q4.result;q3.close(),a2(q3)}});return vB.then(function(a2){n1.db=a2;for(var c2=0;c2<p1.length;c2++){var Q4=p1[c2];Q4._dbInfo.db=a2,h(Q4._dbInfo)}}).catch(function(a2){throw(e(oA,a2)||V.resolve()).catch(function(){}),a2})})}return F(uA,KA),uA}var RA={_driver:"asyncStorage",_initStorage:GA,_support:D(),iterate:EA,getItem:AA,setItem:$A,removeItem:MA,clear:r,length:VA,key:XA,keys:IA,dropInstance:NA};function gA(){return typeof openDatabase==="function"}var mA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z1="~~local_forage_type~",F1=/^~~local_forage_type~([^~]+)~/,PA="__lfsc__:",eA=PA.length,s1="arbf",v1="blob",L0="si08",TQ="ui08",ZQ="uic8",$Q="si16",S1="si32",WQ="ur16",J1="ui32",$1="fl32",x1="fl64",_0=eA+s1.length,p0=Object.prototype.toString;function l0(oA){var KA=oA.length*0.75,YA=oA.length,vA,uA=0,dA,C1,T1,h1;if(oA[oA.length-1]==="="){if(KA--,oA[oA.length-2]==="=")KA--}var n1=new ArrayBuffer(KA),p1=new Uint8Array(n1);for(vA=0;vA<YA;vA+=4)dA=mA.indexOf(oA[vA]),C1=mA.indexOf(oA[vA+1]),T1=mA.indexOf(oA[vA+2]),h1=mA.indexOf(oA[vA+3]),p1[uA++]=dA<<2|C1>>4,p1[uA++]=(C1&15)<<4|T1>>2,p1[uA++]=(T1&3)<<6|h1&63;return n1}function CA(oA){var KA=new Uint8Array(oA),YA="",vA;for(vA=0;vA<KA.length;vA+=3)YA+=mA[KA[vA]>>2],YA+=mA[(KA[vA]&3)<<4|KA[vA+1]>>4],YA+=mA[(KA[vA+1]&15)<<2|KA[vA+2]>>6],YA+=mA[KA[vA+2]&63];if(KA.length%3===2)YA=YA.substring(0,YA.length-1)+"=";else if(KA.length%3===1)YA=YA.substring(0,YA.length-2)+"==";return YA}function OA(oA,KA){var YA="";if(oA)YA=p0.call(oA);if(oA&&(YA==="[object ArrayBuffer]"||oA.buffer&&p0.call(oA.buffer)==="[object ArrayBuffer]")){var vA,uA=PA;if(oA instanceof ArrayBuffer)vA=oA,uA+=s1;else if(vA=oA.buffer,YA==="[object Int8Array]")uA+=L0;else if(YA==="[object Uint8Array]")uA+=TQ;else if(YA==="[object Uint8ClampedArray]")uA+=ZQ;else if(YA==="[object Int16Array]")uA+=$Q;else if(YA==="[object Uint16Array]")uA+=WQ;else if(YA==="[object Int32Array]")uA+=S1;else if(YA==="[object Uint32Array]")uA+=J1;else if(YA==="[object Float32Array]")uA+=$1;else if(YA==="[object Float64Array]")uA+=x1;else KA(Error("Failed to get type for BinaryArray"));KA(uA+CA(vA))}else if(YA==="[object Blob]"){var dA=new FileReader;dA.onload=function(){var C1=Z1+oA.type+"~"+CA(this.result);KA(PA+v1+C1)},dA.readAsArrayBuffer(oA)}else try{KA(JSON.stringify(oA))}catch(C1){console.error("Couldn't convert value into a JSON string: ",oA),KA(null,C1)}}function I1(oA){if(oA.substring(0,eA)!==PA)return JSON.parse(oA);var KA=oA.substring(_0),YA=oA.substring(eA,_0),vA;if(YA===v1&&F1.test(KA)){var uA=KA.match(F1);vA=uA[1],KA=KA.substring(uA[0].length)}var dA=l0(KA);switch(YA){case s1:return dA;case v1:return K([dA],{type:vA});case L0:return new Int8Array(dA);case TQ:return new Uint8Array(dA);case ZQ:return new Uint8ClampedArray(dA);case $Q:return new Int16Array(dA);case WQ:return new Uint16Array(dA);case S1:return new Int32Array(dA);case J1:return new Uint32Array(dA);case $1:return new Float32Array(dA);case x1:return new Float64Array(dA);default:throw Error("Unkown type: "+YA)}}var w1={serialize:OA,deserialize:I1,stringToBuffer:l0,bufferToString:CA};function H1(oA,KA,YA,vA){oA.executeSql("CREATE TABLE IF NOT EXISTS "+KA.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],YA,vA)}function D1(oA){var KA=this,YA={db:null};if(oA)for(var vA in oA)YA[vA]=typeof oA[vA]!=="string"?oA[vA].toString():oA[vA];var uA=new V(function(dA,C1){try{YA.db=openDatabase(YA.name,String(YA.version),YA.description,YA.size)}catch(T1){return C1(T1)}YA.db.transaction(function(T1){H1(T1,YA,function(){KA._dbInfo=YA,dA()},function(h1,n1){C1(n1)})},C1)});return YA.serializer=w1,uA}function t1(oA,KA,YA,vA,uA,dA){oA.executeSql(YA,vA,uA,function(C1,T1){if(T1.code===T1.SYNTAX_ERR)C1.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[KA.storeName],function(h1,n1){if(!n1.rows.length)H1(h1,KA,function(){h1.executeSql(YA,vA,uA,dA)},dA);else dA(h1,T1)},dA);else dA(C1,T1)},dA)}function Q0(oA,KA){var YA=this;oA=E(oA);var vA=new V(function(uA,dA){YA.ready().then(function(){var C1=YA._dbInfo;C1.db.transaction(function(T1){t1(T1,C1,"SELECT * FROM "+C1.storeName+" WHERE key = ? LIMIT 1",[oA],function(h1,n1){var p1=n1.rows.length?n1.rows.item(0).value:null;if(p1)p1=C1.serializer.deserialize(p1);uA(p1)},function(h1,n1){dA(n1)})})}).catch(dA)});return F(vA,KA),vA}function g0(oA,KA){var YA=this,vA=new V(function(uA,dA){YA.ready().then(function(){var C1=YA._dbInfo;C1.db.transaction(function(T1){t1(T1,C1,"SELECT * FROM "+C1.storeName,[],function(h1,n1){var p1=n1.rows,N0=p1.length;for(var MQ=0;MQ<N0;MQ++){var vB=p1.item(MQ),a2=vB.value;if(a2)a2=C1.serializer.deserialize(a2);if(a2=oA(a2,vB.key,MQ+1),a2!==void 0){uA(a2);return}}uA()},function(h1,n1){dA(n1)})})}).catch(dA)});return F(vA,KA),vA}function DQ(oA,KA,YA,vA){var uA=this;oA=E(oA);var dA=new V(function(C1,T1){uA.ready().then(function(){if(KA===void 0)KA=null;var h1=KA,n1=uA._dbInfo;n1.serializer.serialize(KA,function(p1,N0){if(N0)T1(N0);else n1.db.transaction(function(MQ){t1(MQ,n1,"INSERT OR REPLACE INTO "+n1.storeName+" (key, value) VALUES (?, ?)",[oA,p1],function(){C1(h1)},function(vB,a2){T1(a2)})},function(MQ){if(MQ.code===MQ.QUOTA_ERR){if(vA>0){C1(DQ.apply(uA,[oA,h1,YA,vA-1]));return}T1(MQ)}})})}).catch(T1)});return F(dA,YA),dA}function qB(oA,KA,YA){return DQ.apply(this,[oA,KA,YA,1])}function BB(oA,KA){var YA=this;oA=E(oA);var vA=new V(function(uA,dA){YA.ready().then(function(){var C1=YA._dbInfo;C1.db.transaction(function(T1){t1(T1,C1,"DELETE FROM "+C1.storeName+" WHERE key = ?",[oA],function(){uA()},function(h1,n1){dA(n1)})})}).catch(dA)});return F(vA,KA),vA}function d2(oA){var KA=this,YA=new V(function(vA,uA){KA.ready().then(function(){var dA=KA._dbInfo;dA.db.transaction(function(C1){t1(C1,dA,"DELETE FROM "+dA.storeName,[],function(){vA()},function(T1,h1){uA(h1)})})}).catch(uA)});return F(YA,oA),YA}function i0(oA){var KA=this,YA=new V(function(vA,uA){KA.ready().then(function(){var dA=KA._dbInfo;dA.db.transaction(function(C1){t1(C1,dA,"SELECT COUNT(key) as c FROM "+dA.storeName,[],function(T1,h1){var n1=h1.rows.item(0).c;vA(n1)},function(T1,h1){uA(h1)})})}).catch(uA)});return F(YA,oA),YA}function F0(oA,KA){var YA=this,vA=new V(function(uA,dA){YA.ready().then(function(){var C1=YA._dbInfo;C1.db.transaction(function(T1){t1(T1,C1,"SELECT key FROM "+C1.storeName+" WHERE id = ? LIMIT 1",[oA+1],function(h1,n1){var p1=n1.rows.length?n1.rows.item(0).key:null;uA(p1)},function(h1,n1){dA(n1)})})}).catch(dA)});return F(vA,KA),vA}function r0(oA){var KA=this,YA=new V(function(vA,uA){KA.ready().then(function(){var dA=KA._dbInfo;dA.db.transaction(function(C1){t1(C1,dA,"SELECT key FROM "+dA.storeName,[],function(T1,h1){var n1=[];for(var p1=0;p1<h1.rows.length;p1++)n1.push(h1.rows.item(p1).key);vA(n1)},function(T1,h1){uA(h1)})})}).catch(uA)});return F(YA,oA),YA}function yB(oA){return new V(function(KA,YA){oA.transaction(function(vA){vA.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(uA,dA){var C1=[];for(var T1=0;T1<dA.rows.length;T1++)C1.push(dA.rows.item(T1).name);KA({db:oA,storeNames:C1})},function(uA,dA){YA(dA)})},function(vA){YA(vA)})})}function p2(oA,KA){KA=z.apply(this,arguments);var YA=this.config();if(oA=typeof oA!=="function"&&oA||{},!oA.name)oA.name=oA.name||YA.name,oA.storeName=oA.storeName||YA.storeName;var vA=this,uA;if(!oA.name)uA=V.reject("Invalid arguments");else uA=new V(function(dA){var C1;if(oA.name===YA.name)C1=vA._dbInfo.db;else C1=openDatabase(oA.name,"","",0);if(!oA.storeName)dA(yB(C1));else dA({db:C1,storeNames:[oA.storeName]})}).then(function(dA){return new V(function(C1,T1){dA.db.transaction(function(h1){function n1(vB){return new V(function(a2,c2){h1.executeSql("DROP TABLE IF EXISTS "+vB,[],function(){a2()},function(Q4,q3){c2(q3)})})}var p1=[];for(var N0=0,MQ=dA.storeNames.length;N0<MQ;N0++)p1.push(n1(dA.storeNames[N0]));V.all(p1).then(function(){C1()}).catch(function(vB){T1(vB)})},function(h1){T1(h1)})})});return F(uA,KA),uA}var Y9={_driver:"webSQLStorage",_initStorage:D1,_support:gA(),iterate:g0,getItem:Q0,setItem:qB,removeItem:BB,clear:d2,length:i0,key:F0,keys:r0,dropInstance:p2};function cQ(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(oA){return!1}}function $2(oA,KA){var YA=oA.name+"/";if(oA.storeName!==KA.storeName)YA+=oA.storeName+"/";return YA}function c4(){var oA="_localforage_support_test";try{return localStorage.setItem(oA,!0),localStorage.removeItem(oA),!1}catch(KA){return!0}}function a6(){return!c4()||localStorage.length>0}function w6(oA){var KA=this,YA={};if(oA)for(var vA in oA)YA[vA]=oA[vA];if(YA.keyPrefix=$2(oA,KA._defaultConfig),!a6())return V.reject();return KA._dbInfo=YA,YA.serializer=w1,V.resolve()}function G3(oA){var KA=this,YA=KA.ready().then(function(){var vA=KA._dbInfo.keyPrefix;for(var uA=localStorage.length-1;uA>=0;uA--){var dA=localStorage.key(uA);if(dA.indexOf(vA)===0)localStorage.removeItem(dA)}});return F(YA,oA),YA}function SQ(oA,KA){var YA=this;oA=E(oA);var vA=YA.ready().then(function(){var uA=YA._dbInfo,dA=localStorage.getItem(uA.keyPrefix+oA);if(dA)dA=uA.serializer.deserialize(dA);return dA});return F(vA,KA),vA}function u2(oA,KA){var YA=this,vA=YA.ready().then(function(){var uA=YA._dbInfo,dA=uA.keyPrefix,C1=dA.length,T1=localStorage.length,h1=1;for(var n1=0;n1<T1;n1++){var p1=localStorage.key(n1);if(p1.indexOf(dA)!==0)continue;var N0=localStorage.getItem(p1);if(N0)N0=uA.serializer.deserialize(N0);if(N0=oA(N0,p1.substring(C1),h1++),N0!==void 0)return N0}});return F(vA,KA),vA}function V4(oA,KA){var YA=this,vA=YA.ready().then(function(){var uA=YA._dbInfo,dA;try{dA=localStorage.key(oA)}catch(C1){dA=null}if(dA)dA=dA.substring(uA.keyPrefix.length);return dA});return F(vA,KA),vA}function L6(oA){var KA=this,YA=KA.ready().then(function(){var vA=KA._dbInfo,uA=localStorage.length,dA=[];for(var C1=0;C1<uA;C1++){var T1=localStorage.key(C1);if(T1.indexOf(vA.keyPrefix)===0)dA.push(T1.substring(vA.keyPrefix.length))}return dA});return F(YA,oA),YA}function T2(oA){var KA=this,YA=KA.keys().then(function(vA){return vA.length});return F(YA,oA),YA}function B9(oA,KA){var YA=this;oA=E(oA);var vA=YA.ready().then(function(){var uA=YA._dbInfo;localStorage.removeItem(uA.keyPrefix+oA)});return F(vA,KA),vA}function D7(oA,KA,YA){var vA=this;oA=E(oA);var uA=vA.ready().then(function(){if(KA===void 0)KA=null;var dA=KA;return new V(function(C1,T1){var h1=vA._dbInfo;h1.serializer.serialize(KA,function(n1,p1){if(p1)T1(p1);else try{localStorage.setItem(h1.keyPrefix+oA,n1),C1(dA)}catch(N0){if(N0.name==="QuotaExceededError"||N0.name==="NS_ERROR_DOM_QUOTA_REACHED")T1(N0);T1(N0)}})})});return F(uA,YA),uA}function K7(oA,KA){if(KA=z.apply(this,arguments),oA=typeof oA!=="function"&&oA||{},!oA.name){var YA=this.config();oA.name=oA.name||YA.name,oA.storeName=oA.storeName||YA.storeName}var vA=this,uA;if(!oA.name)uA=V.reject("Invalid arguments");else uA=new V(function(dA){if(!oA.storeName)dA(oA.name+"/");else dA($2(oA,vA._defaultConfig))}).then(function(dA){for(var C1=localStorage.length-1;C1>=0;C1--){var T1=localStorage.key(C1);if(T1.indexOf(dA)===0)localStorage.removeItem(T1)}});return F(uA,KA),uA}var FZ={_driver:"localStorageWrapper",_initStorage:w6,_support:cQ(),iterate:u2,getItem:SQ,setItem:D7,removeItem:B9,clear:G3,length:T2,key:V4,keys:L6,dropInstance:K7},mZ=function(KA,YA){return KA===YA||typeof KA==="number"&&typeof YA==="number"&&isNaN(KA)&&isNaN(YA)},c5=function(KA,YA){var vA=KA.length,uA=0;while(uA<vA){if(mZ(KA[uA],YA))return!0;uA++}return!1},HZ=Array.isArray||function(oA){return Object.prototype.toString.call(oA)==="[object Array]"},H5={},RY={},V7={INDEXEDDB:RA,WEBSQL:Y9,LOCALSTORAGE:FZ},dZ=[V7.INDEXEDDB._driver,V7.WEBSQL._driver,V7.LOCALSTORAGE._driver],y3=["dropInstance"],pZ=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(y3),Z3={description:"",driver:dZ.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function CI(oA,KA){oA[KA]=function(){var YA=arguments;return oA.ready().then(function(){return oA[KA].apply(oA,YA)})}}function EZ(){for(var oA=1;oA<arguments.length;oA++){var KA=arguments[oA];if(KA){for(var YA in KA)if(KA.hasOwnProperty(YA))if(HZ(KA[YA]))arguments[0][YA]=KA[YA].slice();else arguments[0][YA]=KA[YA]}}return arguments[0]}var S5=function(){function oA(KA){X(this,oA);for(var YA in V7)if(V7.hasOwnProperty(YA)){var vA=V7[YA],uA=vA._driver;if(this[YA]=uA,!H5[uA])this.defineDriver(vA)}this._defaultConfig=EZ({},Z3),this._config=EZ({},this._defaultConfig,KA),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return oA.prototype.config=function(YA){if((typeof YA>"u"?"undefined":J(YA))==="object"){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var vA in YA){if(vA==="storeName")YA[vA]=YA[vA].replace(/\W/g,"_");if(vA==="version"&&typeof YA[vA]!=="number")return Error("Database version must be a number.");this._config[vA]=YA[vA]}if("driver"in YA&&YA.driver)return this.setDriver(this._config.driver);return!0}else if(typeof YA==="string")return this._config[YA];else return this._config},oA.prototype.defineDriver=function(YA,vA,uA){var dA=new V(function(C1,T1){try{var h1=YA._driver,n1=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!YA._driver){T1(n1);return}var p1=pZ.concat("_initStorage");for(var N0=0,MQ=p1.length;N0<MQ;N0++){var vB=p1[N0],a2=!c5(y3,vB);if((a2||YA[vB])&&typeof YA[vB]!=="function"){T1(n1);return}}var c2=function(){var zZ=function(iJ){return function(){var DD=Error("Method "+iJ+" is not implemented by the current driver"),S0=V.reject(DD);return F(S0,arguments[arguments.length-1]),S0}};for(var P7=0,BJ=y3.length;P7<BJ;P7++){var GJ=y3[P7];if(!YA[GJ])YA[GJ]=zZ(GJ)}};c2();var Q4=function(zZ){if(H5[h1])console.info("Redefining LocalForage driver: "+h1);H5[h1]=YA,RY[h1]=zZ,C1()};if("_support"in YA)if(YA._support&&typeof YA._support==="function")YA._support().then(Q4,T1);else Q4(!!YA._support);else Q4(!0)}catch(q3){T1(q3)}});return H(dA,vA,uA),dA},oA.prototype.driver=function(){return this._driver||null},oA.prototype.getDriver=function(YA,vA,uA){var dA=H5[YA]?V.resolve(H5[YA]):V.reject(Error("Driver not found."));return H(dA,vA,uA),dA},oA.prototype.getSerializer=function(YA){var vA=V.resolve(w1);return H(vA,YA),vA},oA.prototype.ready=function(YA){var vA=this,uA=vA._driverSet.then(function(){if(vA._ready===null)vA._ready=vA._initDriver();return vA._ready});return H(uA,YA,YA),uA},oA.prototype.setDriver=function(YA,vA,uA){var dA=this;if(!HZ(YA))YA=[YA];var C1=this._getSupportedDrivers(YA);function T1(){dA._config.driver=dA.driver()}function h1(N0){return dA._extend(N0),T1(),dA._ready=dA._initStorage(dA._config),dA._ready}function n1(N0){return function(){var MQ=0;function vB(){while(MQ<N0.length){var a2=N0[MQ];return MQ++,dA._dbInfo=null,dA._ready=null,dA.getDriver(a2).then(h1).catch(vB)}T1();var c2=Error("No available storage method found.");return dA._driverSet=V.reject(c2),dA._driverSet}return vB()}}var p1=this._driverSet!==null?this._driverSet.catch(function(){return V.resolve()}):V.resolve();return this._driverSet=p1.then(function(){var N0=C1[0];return dA._dbInfo=null,dA._ready=null,dA.getDriver(N0).then(function(MQ){dA._driver=MQ._driver,T1(),dA._wrapLibraryMethodsWithReady(),dA._initDriver=n1(C1)})}).catch(function(){T1();var N0=Error("No available storage method found.");return dA._driverSet=V.reject(N0),dA._driverSet}),H(this._driverSet,vA,uA),this._driverSet},oA.prototype.supports=function(YA){return!!RY[YA]},oA.prototype._extend=function(YA){EZ(this,YA)},oA.prototype._getSupportedDrivers=function(YA){var vA=[];for(var uA=0,dA=YA.length;uA<dA;uA++){var C1=YA[uA];if(this.supports(C1))vA.push(C1)}return vA},oA.prototype._wrapLibraryMethodsWithReady=function(){for(var YA=0,vA=pZ.length;YA<vA;YA++)CI(this,pZ[YA])},oA.prototype.createInstance=function(YA){return new oA(YA)},oA}(),x5=new S5;Z.exports=x5},{"3":3}]},{},[4])(4)})});var IVQ=U((XVQ)=>{Object.defineProperty(XVQ,"__esModule",{value:!0});var oy=CQ(),Dv4=JVQ(),O1A=ZqA(),Bi=oy.GLOBAL_OBJ;class YqA{static __initStatic(){this.id="Offline"}constructor(A={}){this.name=YqA.id,this.maxStoredEvents=A.maxStoredEvents||30,this.offlineEventStore=Dv4.createInstance({name:"sentry/offlineEventStore"})}setupOnce(A,Q){if(this.hub=Q(),"addEventListener"in Bi)Bi.addEventListener("online",()=>{this._sendEvents().catch(()=>{O1A.DEBUG_BUILD&&oy.logger.warn("could not send cached events")})});let B=(G)=>{if(this.hub&&this.hub.getIntegration(YqA)){if("navigator"in Bi&&"onLine"in Bi.navigator&&!Bi.navigator.onLine)return O1A.DEBUG_BUILD&&oy.logger.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(G).then((Z)=>this._enforceMaxEvents()).catch((Z)=>{O1A.DEBUG_BUILD&&oy.logger.warn("could not cache event while offline")}),null}return G};if(B.id=this.name,A(B),"navigator"in Bi&&"onLine"in Bi.navigator&&Bi.navigator.onLine)this._sendEvents().catch(()=>{O1A.DEBUG_BUILD&&oy.logger.warn("could not send cached events")})}async _cacheEvent(A){return this.offlineEventStore.setItem(oy.uuid4(),oy.normalize(A))}async _enforceMaxEvents(){let A=[];return this.offlineEventStore.iterate((Q,B,G)=>{A.push({cacheKey:B,event:Q})}).then(()=>this._purgeEvents(A.sort((Q,B)=>(B.event.timestamp||0)-(Q.event.timestamp||0)).slice(this.maxStoredEvents<A.length?this.maxStoredEvents:A.length).map((Q)=>Q.cacheKey))).catch((Q)=>{O1A.DEBUG_BUILD&&oy.logger.warn("could not enforce max events")})}async _purgeEvent(A){return this.offlineEventStore.removeItem(A)}async _purgeEvents(A){return Promise.all(A.map((Q)=>this._purgeEvent(Q))).then()}async _sendEvents(){return this.offlineEventStore.iterate((A,Q,B)=>{if(this.hub)this.hub.captureEvent(A),this._purgeEvent(Q).catch((G)=>{O1A.DEBUG_BUILD&&oy.logger.warn("could not purge event from cache")});else O1A.DEBUG_BUILD&&oy.logger.warn("no hub found - could not send cached event")})}}YqA.__initStatic();XVQ.Offline=YqA});var HVQ=U((FVQ)=>{Object.defineProperty(FVQ,"__esModule",{value:!0});var JqA=F6(),DVQ=CQ(),Vv4=DVQ.GLOBAL_OBJ,KVQ="ReportingObserver",WVQ=new WeakMap,Fv4=(A={})=>{let Q=A.types||["crash","deprecation","intervention"];function B(G){if(!WVQ.has(JqA.getClient()))return;for(let Z of G)JqA.withScope((Y)=>{Y.setExtra("url",Z.url);let J=`ReportingObserver [${Z.type}]`,X="No details available";if(Z.body){let I={};for(let W in Z.body)I[W]=Z.body[W];if(Y.setExtra("body",I),Z.type==="crash"){let W=Z.body;X=[W.crashId||"",W.reason||""].join(" ").trim()||X}else X=Z.body.message||X}JqA.captureMessage(`${J}: ${X}`)})}return{name:KVQ,setupOnce(){if(!DVQ.supportsReportingObserver())return;new Vv4.ReportingObserver(B,{buffered:!0,types:Q}).observe()},setup(G){WVQ.set(G,!0)}}},VVQ=JqA.defineIntegration(Fv4),Hv4=JqA.convertIntegrationFnToClass(KVQ,VVQ);FVQ.ReportingObserver=Hv4;FVQ.reportingObserverIntegration=VVQ});var qVQ=U((UVQ)=>{Object.defineProperty(UVQ,"__esModule",{value:!0});var zVQ=F6(),EVQ=CQ(),CVQ="RewriteFrames",Cv4=(A={})=>{let Q=A.root,B=A.prefix||"app:///",G=A.iteratee||((J)=>{if(!J.filename)return J;let X=/^[a-zA-Z]:\\/.test(J.filename)||J.filename.includes("\\")&&!J.filename.includes("/"),I=/^\//.test(J.filename);if(X||I){let W=X?J.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):J.filename,D=Q?EVQ.relative(Q,W):EVQ.basename(W);J.filename=`${B}${D}`}return J});function Z(J){try{return{...J,exception:{...J.exception,values:J.exception.values.map((X)=>({...X,...X.stacktrace&&{stacktrace:Y(X.stacktrace)}}))}}}catch(X){return J}}function Y(J){return{...J,frames:J&&J.frames&&J.frames.map((X)=>G(X))}}return{name:CVQ,setupOnce(){},processEvent(J){let X=J;if(J.exception&&Array.isArray(J.exception.values))X=Z(X);return X}}},$VQ=zVQ.defineIntegration(Cv4),$v4=zVQ.convertIntegrationFnToClass(CVQ,$VQ);UVQ.RewriteFrames=$v4;UVQ.rewriteFramesIntegration=$VQ});var MVQ=U((OVQ)=>{Object.defineProperty(OVQ,"__esModule",{value:!0});var NVQ=F6(),wVQ="SessionTiming",Nv4=()=>{let A=Date.now();return{name:wVQ,setupOnce(){},processEvent(Q){let B=Date.now();return{...Q,extra:{...Q.extra,["session:start"]:A,["session:duration"]:B-A,["session:end"]:B}}}}},LVQ=NVQ.defineIntegration(Nv4),wv4=NVQ.convertIntegrationFnToClass(wVQ,LVQ);OVQ.SessionTiming=wv4;OVQ.sessionTimingIntegration=LVQ});var jVQ=U((_VQ)=>{Object.defineProperty(_VQ,"__esModule",{value:!0});var Mv4=F6(),RVQ="Transaction",Rv4=()=>{return{name:RVQ,setupOnce(){},processEvent(A){let Q=jv4(A);for(let B=Q.length-1;B>=0;B--){let G=Q[B];if(G.in_app===!0){A.transaction=Tv4(G);break}}return A}}},_v4=Mv4.convertIntegrationFnToClass(RVQ,Rv4);function jv4(A){let Q=A.exception&&A.exception.values&&A.exception.values[0];return Q&&Q.stacktrace&&Q.stacktrace.frames||[]}function Tv4(A){return A.module||A.function?`${A.module||"?"}/${A.function||"?"}`:"<unknown>"}_VQ.Transaction=_v4});var bVQ=U((kVQ)=>{Object.defineProperty(kVQ,"__esModule",{value:!0});var Kg=F6(),ry=CQ(),biA=ZqA(),TVQ="HttpClient",Sv4=(A={})=>{let Q={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...A};return{name:TVQ,setupOnce(){},setup(B){uv4(B,Q),mv4(B,Q)}}},PVQ=Kg.defineIntegration(Sv4),xv4=Kg.convertIntegrationFnToClass(TVQ,PVQ);function yv4(A,Q,B,G){if(xVQ(A,B.status,B.url)){let Z=dv4(Q,G),Y,J,X,I;if(vVQ())[{headers:Y,cookies:X},{headers:J,cookies:I}]=[{cookieHeader:"Cookie",obj:Z},{cookieHeader:"Set-Cookie",obj:B}].map(({cookieHeader:D,obj:K})=>{let V=bv4(K.headers),F;try{let H=V[D]||V[D.toLowerCase()]||void 0;if(H)F=SVQ(H)}catch(H){biA.DEBUG_BUILD&&ry.logger.log(`Could not extract cookies from header ${D}`)}return{headers:V,cookies:F}});let W=yVQ({url:Z.url,method:Z.method,status:B.status,requestHeaders:Y,responseHeaders:J,requestCookies:X,responseCookies:I});Kg.captureEvent(W)}}function vv4(A,Q,B,G){if(xVQ(A,Q.status,Q.responseURL)){let Z,Y,J;if(vVQ()){try{let I=Q.getResponseHeader("Set-Cookie")||Q.getResponseHeader("set-cookie")||void 0;if(I)Y=SVQ(I)}catch(I){biA.DEBUG_BUILD&&ry.logger.log("Could not extract cookies from response headers")}try{J=fv4(Q)}catch(I){biA.DEBUG_BUILD&&ry.logger.log("Could not extract headers from response")}Z=G}let X=yVQ({url:Q.responseURL,method:B,status:Q.status,requestHeaders:Z,responseHeaders:J,responseCookies:Y});Kg.captureEvent(X)}}function kv4(A){if(A){let Q=A["Content-Length"]||A["content-length"];if(Q)return parseInt(Q,10)}return}function SVQ(A){return A.split("; ").reduce((Q,B)=>{let[G,Z]=B.split("=");return Q[G]=Z,Q},{})}function bv4(A){let Q={};return A.forEach((B,G)=>{Q[G]=B}),Q}function fv4(A){let Q=A.getAllResponseHeaders();if(!Q)return{};return Q.split(`\r
`).reduce((B,G)=>{let[Z,Y]=G.split(": ");return B[Z]=Y,B},{})}function hv4(A,Q){return A.some((B)=>{if(typeof B==="string")return Q.includes(B);return B.test(Q)})}function gv4(A,Q){return A.some((B)=>{if(typeof B==="number")return B===Q;return Q>=B[0]&&Q<=B[1]})}function uv4(A,Q){if(!ry.supportsNativeFetch())return;ry.addFetchInstrumentationHandler((B)=>{if(Kg.getClient()!==A)return;let{response:G,args:Z}=B,[Y,J]=Z;if(!G)return;yv4(Q,Y,G,J)})}function mv4(A,Q){if(!("XMLHttpRequest"in ry.GLOBAL_OBJ))return;ry.addXhrInstrumentationHandler((B)=>{if(Kg.getClient()!==A)return;let G=B.xhr,Z=G[ry.SENTRY_XHR_DATA_KEY];if(!Z)return;let{method:Y,request_headers:J}=Z;try{vv4(Q,G,Y,J)}catch(X){biA.DEBUG_BUILD&&ry.logger.warn("Error while extracting response event form XHR response",X)}})}function xVQ(A,Q,B){return gv4(A.failedRequestStatusCodes,Q)&&hv4(A.failedRequestTargets,B)&&!Kg.isSentryRequestUrl(B,Kg.getClient())}function yVQ(A){let Q=`HTTP Client Error with status code: ${A.status}`,B={message:Q,exception:{values:[{type:"Error",value:Q}]},request:{url:A.url,method:A.method,headers:A.requestHeaders,cookies:A.requestCookies},contexts:{response:{status_code:A.status,headers:A.responseHeaders,cookies:A.responseCookies,body_size:kv4(A.responseHeaders)}}};return ry.addExceptionMechanism(B,{type:"http.client",handled:!1}),B}function dv4(A,Q){if(!Q&&A instanceof Request)return A;if(A instanceof Request&&A.bodyUsed)return A;return new Request(A,Q)}function vVQ(){let A=Kg.getClient();return A?Boolean(A.getOptions().sendDefaultPii):!1}kVQ.HttpClient=xv4;kVQ.httpClientIntegration=PVQ});var dVQ=U((mVQ)=>{Object.defineProperty(mVQ,"__esModule",{value:!0});var fVQ=F6(),wj1=CQ(),Nj1=wj1.GLOBAL_OBJ,lv4=7,hVQ="ContextLines",iv4=(A={})=>{let Q=A.frameContextLines!=null?A.frameContextLines:lv4;return{name:hVQ,setupOnce(){},processEvent(B){return av4(B,Q)}}},gVQ=fVQ.defineIntegration(iv4),nv4=fVQ.convertIntegrationFnToClass(hVQ,gVQ);function av4(A,Q){let B=Nj1.document,G=Nj1.location&&wj1.stripUrlQueryAndFragment(Nj1.location.href);if(!B||!G)return A;let Z=A.exception&&A.exception.values;if(!Z||!Z.length)return A;let Y=B.documentElement.innerHTML;if(!Y)return A;let J=["<!DOCTYPE html>","<html>",...Y.split(`
`),"</html>"];return Z.forEach((X)=>{let I=X.stacktrace;if(I&&I.frames)I.frames=I.frames.map((W)=>uVQ(W,J,G,Q))}),A}function uVQ(A,Q,B,G){if(A.filename!==B||!A.lineno||!Q.length)return A;return wj1.addContextToFrame(Q,A,G),A}mVQ.ContextLines=nv4;mVQ.applySourceContextToFrame=uVQ;mVQ.contextLinesIntegration=gVQ});var eVQ=U((tVQ)=>{Object.defineProperty(tVQ,"__esModule",{value:!0});var pVQ=fKQ(),cVQ=dKQ(),lVQ=eKQ(),iVQ=ZVQ(),tv4=IVQ(),nVQ=HVQ(),aVQ=qVQ(),oVQ=MVQ(),ev4=jVQ(),rVQ=bVQ(),sVQ=dVQ();tVQ.CaptureConsole=pVQ.CaptureConsole;tVQ.captureConsoleIntegration=pVQ.captureConsoleIntegration;tVQ.Debug=cVQ.Debug;tVQ.debugIntegration=cVQ.debugIntegration;tVQ.Dedupe=lVQ.Dedupe;tVQ.dedupeIntegration=lVQ.dedupeIntegration;tVQ.ExtraErrorData=iVQ.ExtraErrorData;tVQ.extraErrorDataIntegration=iVQ.extraErrorDataIntegration;tVQ.Offline=tv4.Offline;tVQ.ReportingObserver=nVQ.ReportingObserver;tVQ.reportingObserverIntegration=nVQ.reportingObserverIntegration;tVQ.RewriteFrames=aVQ.RewriteFrames;tVQ.rewriteFramesIntegration=aVQ.rewriteFramesIntegration;tVQ.SessionTiming=oVQ.SessionTiming;tVQ.sessionTimingIntegration=oVQ.sessionTimingIntegration;tVQ.Transaction=ev4.Transaction;tVQ.HttpClient=rVQ.HttpClient;tVQ.httpClientIntegration=rVQ.httpClientIntegration;tVQ.ContextLines=sVQ.ContextLines;tVQ.contextLinesIntegration=sVQ.contextLinesIntegration});var fiA=U((AFQ)=>{Object.defineProperty(AFQ,"__esModule",{value:!0});var qk4=[["january","1"],["february","2"],["march","3"],["april","4"],["may","5"],["june","6"],["july","7"],["august","8"],["september","9"],["october","10"],["november","11"],["december","12"],["jan","1"],["feb","2"],["mar","3"],["apr","4"],["may","5"],["jun","6"],["jul","7"],["aug","8"],["sep","9"],["oct","10"],["nov","11"],["dec","12"],["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]];function Nk4(A){return qk4.reduce((Q,[B,G])=>Q.replace(new RegExp(B,"gi"),G),A)}AFQ.replaceCronNames=Nk4});var YFQ=U((ZFQ)=>{Object.defineProperty(ZFQ,"__esModule",{value:!0});var QFQ=F6(),BFQ=fiA(),GFQ="Automatic instrumentation of CronJob only supports crontab string";function Lk4(A,Q){let B=!1;return new Proxy(A,{construct(G,Z){let[Y,J,X,I,W,...D]=Z;if(typeof Y!=="string")throw Error(GFQ);if(B)throw Error(`A job named '${Q}' has already been scheduled`);B=!0;let K=BFQ.replaceCronNames(Y);function V(F,H){return QFQ.withMonitor(Q,()=>{return J(F,H)},{schedule:{type:"crontab",value:K},timezone:W||void 0})}return new G(Y,V,X,I,W,...D)},get(G,Z){if(Z==="from")return(Y)=>{let{cronTime:J,onTick:X,timeZone:I}=Y;if(typeof J!=="string")throw Error(GFQ);if(B)throw Error(`A job named '${Q}' has already been scheduled`);B=!0;let W=BFQ.replaceCronNames(J);return Y.onTick=(D,K)=>{return QFQ.withMonitor(Q,()=>{return X(D,K)},{schedule:{type:"crontab",value:W},timezone:I||void 0})},G.from(Y)};else return G[Z]}})}ZFQ.instrumentCron=Lk4});var IFQ=U((XFQ)=>{var{_optionalChain:JFQ}=CQ();Object.defineProperty(XFQ,"__esModule",{value:!0});var Mk4=F6(),Rk4=fiA();function _k4(A){return new Proxy(A,{get(Q,B){if(B==="schedule"&&Q.schedule)return new Proxy(Q.schedule,{apply(G,Z,Y){let[J,,X]=Y;if(!JFQ([X,"optionalAccess",(I)=>I.name]))throw Error('Missing "name" for scheduled job. A name is required for Sentry check-in monitoring.');return Mk4.withMonitor(X.name,()=>{return G.apply(Z,Y)},{schedule:{type:"crontab",value:Rk4.replaceCronNames(J)},timezone:JFQ([X,"optionalAccess",(I)=>I.timezone])})}});else return Q[B]}})}XFQ.instrumentNodeCron=_k4});var DFQ=U((WFQ)=>{Object.defineProperty(WFQ,"__esModule",{value:!0});var Tk4=F6(),Pk4=fiA();function Sk4(A){return new Proxy(A,{get(Q,B){if(B==="scheduleJob")return new Proxy(Q.scheduleJob,{apply(G,Z,Y){let[J,X]=Y;if(typeof J!=="string"||typeof X!=="string")throw Error("Automatic instrumentation of 'node-schedule' requires the first parameter of 'scheduleJob' to be a job name string and the second parameter to be a crontab string");let I=J,W=X;return Tk4.withMonitor(I,()=>{return G.apply(Z,Y)},{schedule:{type:"crontab",value:Pk4.replaceCronNames(W)}})}});return Q[B]}})}WFQ.instrumentNodeSchedule=Sk4});var hiA=U((EFQ)=>{Object.defineProperty(EFQ,"__esModule",{value:!0});var A9=F6(),yk4=zWQ(),vk4=t_1(),kk4=Qj1(),XqA=Hj1(),Lj1=CQ(),bk4=YKQ(),KFQ=Fj1(),fk4=FKQ(),hk4=wKQ(),gk4=SKQ(),uk4=yKQ(),Gi=eVQ(),mk4=HiA(),dk4=MiA(),pk4=_iA(),ck4=wiA(),lk4=CiA(),ik4=EiA(),nk4=NiA(),ak4=jiA(),ok4=yiA(),VFQ=Uj1(),FFQ=PiA(),HFQ=$iA(),rk4=$j1(),sk4=YFQ(),tk4=IFQ(),ek4=DFQ(),Ab4=KFQ.createGetModuleFromFilename(),Qb4={...A9.Integrations,...gk4,...uk4},Bb4={instrumentCron:sk4.instrumentCron,instrumentNodeCron:tk4.instrumentNodeCron,instrumentNodeSchedule:ek4.instrumentNodeSchedule};EFQ.Hub=A9.Hub;EFQ.SDK_VERSION=A9.SDK_VERSION;EFQ.SEMANTIC_ATTRIBUTE_SENTRY_OP=A9.SEMANTIC_ATTRIBUTE_SENTRY_OP;EFQ.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=A9.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN;EFQ.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=A9.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE;EFQ.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=A9.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE;EFQ.Scope=A9.Scope;EFQ.addBreadcrumb=A9.addBreadcrumb;EFQ.addEventProcessor=A9.addEventProcessor;EFQ.addGlobalEventProcessor=A9.addGlobalEventProcessor;EFQ.addIntegration=A9.addIntegration;EFQ.captureCheckIn=A9.captureCheckIn;EFQ.captureEvent=A9.captureEvent;EFQ.captureException=A9.captureException;EFQ.captureMessage=A9.captureMessage;EFQ.captureSession=A9.captureSession;EFQ.close=A9.close;EFQ.configureScope=A9.configureScope;EFQ.continueTrace=A9.continueTrace;EFQ.createTransport=A9.createTransport;EFQ.endSession=A9.endSession;EFQ.extractTraceparentData=A9.extractTraceparentData;EFQ.flush=A9.flush;EFQ.functionToStringIntegration=A9.functionToStringIntegration;EFQ.getActiveSpan=A9.getActiveSpan;EFQ.getActiveTransaction=A9.getActiveTransaction;EFQ.getClient=A9.getClient;EFQ.getCurrentHub=A9.getCurrentHub;EFQ.getCurrentScope=A9.getCurrentScope;EFQ.getGlobalScope=A9.getGlobalScope;EFQ.getHubFromCarrier=A9.getHubFromCarrier;EFQ.getIsolationScope=A9.getIsolationScope;EFQ.getSpanStatusFromHttpCode=A9.getSpanStatusFromHttpCode;EFQ.inboundFiltersIntegration=A9.inboundFiltersIntegration;EFQ.isInitialized=A9.isInitialized;EFQ.lastEventId=A9.lastEventId;EFQ.linkedErrorsIntegration=A9.linkedErrorsIntegration;EFQ.makeMain=A9.makeMain;EFQ.metrics=A9.metrics;EFQ.parameterize=A9.parameterize;EFQ.requestDataIntegration=A9.requestDataIntegration;EFQ.runWithAsyncContext=A9.runWithAsyncContext;EFQ.setContext=A9.setContext;EFQ.setCurrentClient=A9.setCurrentClient;EFQ.setExtra=A9.setExtra;EFQ.setExtras=A9.setExtras;EFQ.setHttpStatus=A9.setHttpStatus;EFQ.setMeasurement=A9.setMeasurement;EFQ.setTag=A9.setTag;EFQ.setTags=A9.setTags;EFQ.setUser=A9.setUser;EFQ.spanStatusfromHttpCode=A9.spanStatusfromHttpCode;EFQ.startActiveSpan=A9.startActiveSpan;EFQ.startInactiveSpan=A9.startInactiveSpan;EFQ.startSession=A9.startSession;EFQ.startSpan=A9.startSpan;EFQ.startSpanManual=A9.startSpanManual;EFQ.startTransaction=A9.startTransaction;EFQ.trace=A9.trace;EFQ.withActiveSpan=A9.withActiveSpan;EFQ.withIsolationScope=A9.withIsolationScope;EFQ.withMonitor=A9.withMonitor;EFQ.withScope=A9.withScope;EFQ.autoDiscoverNodePerformanceMonitoringIntegrations=yk4.autoDiscoverNodePerformanceMonitoringIntegrations;EFQ.NodeClient=vk4.NodeClient;EFQ.makeNodeTransport=kk4.makeNodeTransport;EFQ.defaultIntegrations=XqA.defaultIntegrations;EFQ.defaultStackParser=XqA.defaultStackParser;EFQ.getDefaultIntegrations=XqA.getDefaultIntegrations;EFQ.getSentryRelease=XqA.getSentryRelease;EFQ.init=XqA.init;EFQ.DEFAULT_USER_INCLUDES=Lj1.DEFAULT_USER_INCLUDES;EFQ.addRequestDataToEvent=Lj1.addRequestDataToEvent;EFQ.extractRequestData=Lj1.extractRequestData;EFQ.deepReadDirSync=bk4.deepReadDirSync;EFQ.createGetModuleFromFilename=KFQ.createGetModuleFromFilename;EFQ.enableAnrDetection=fk4.enableAnrDetection;EFQ.Handlers=hk4;EFQ.captureConsoleIntegration=Gi.captureConsoleIntegration;EFQ.debugIntegration=Gi.debugIntegration;EFQ.dedupeIntegration=Gi.dedupeIntegration;EFQ.extraErrorDataIntegration=Gi.extraErrorDataIntegration;EFQ.httpClientIntegration=Gi.httpClientIntegration;EFQ.reportingObserverIntegration=Gi.reportingObserverIntegration;EFQ.rewriteFramesIntegration=Gi.rewriteFramesIntegration;EFQ.sessionTimingIntegration=Gi.sessionTimingIntegration;EFQ.consoleIntegration=mk4.consoleIntegration;EFQ.onUncaughtExceptionIntegration=dk4.onUncaughtExceptionIntegration;EFQ.onUnhandledRejectionIntegration=pk4.onUnhandledRejectionIntegration;EFQ.modulesIntegration=ck4.modulesIntegration;EFQ.contextLinesIntegration=lk4.contextLinesIntegration;EFQ.nodeContextIntegration=ik4.nodeContextIntegration;EFQ.localVariablesIntegration=nk4.localVariablesIntegration;EFQ.spotlightIntegration=ak4.spotlightIntegration;EFQ.anrIntegration=ok4.anrIntegration;EFQ.hapiErrorPlugin=VFQ.hapiErrorPlugin;EFQ.hapiIntegration=VFQ.hapiIntegration;EFQ.Undici=FFQ.Undici;EFQ.nativeNodeFetchintegration=FFQ.nativeNodeFetchintegration;EFQ.Http=HFQ.Http;EFQ.httpIntegration=HFQ.httpIntegration;EFQ.trpcMiddleware=rk4.trpcMiddleware;EFQ.Integrations=Qb4;EFQ.cron=Bb4;EFQ.getModuleFromFilename=Ab4});class gGA{heap;length;static#A=!1;static create(A){let Q=UFQ(A);if(!Q)return[];gGA.#A=!0;let B=new gGA(A,Q);return gGA.#A=!1,B}constructor(A,Q){if(!gGA.#A)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new Q(A),this.length=0}push(A){this.heap[this.length++]=A}pop(){return this.heap[--this.length]}}var hGA,CFQ,Oj1,$FQ=(A,Q,B,G)=>{typeof Oj1.emitWarning==="function"?Oj1.emitWarning(A,Q,B,G):console.error(`[${B}] ${Q}: ${A}`)},giA,zFQ,Ah4=(A)=>!CFQ.has(A),wBG,Zi=(A)=>A&&A===Math.floor(A)&&A>0&&isFinite(A),UFQ=(A)=>!Zi(A)?null:A<=Math.pow(2,8)?Uint8Array:A<=Math.pow(2,16)?Uint16Array:A<=Math.pow(2,32)?Uint32Array:A<=Number.MAX_SAFE_INTEGER?IqA:null,IqA,PM;var uGA=w(()=>{hGA=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,CFQ=new Set,Oj1=typeof process==="object"&&!!process?process:{},giA=globalThis.AbortController,zFQ=globalThis.AbortSignal;if(typeof giA>"u"){zFQ=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(G,Z){this._onabort.push(Z)}},giA=class{constructor(){Q()}signal=new zFQ;abort(G){if(this.signal.aborted)return;this.signal.reason=G,this.signal.aborted=!0;for(let Z of this.signal._onabort)Z(G);this.signal.onabort?.(G)}};let A=Oj1.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",Q=()=>{if(!A)return;A=!1,$FQ("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",Q)}}wBG=Symbol("type");IqA=class IqA extends Array{constructor(A){super(A);this.fill(0)}};PM=class PM{#A;#Q;#B;#Z;#G;#X;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#Y;#D;#K;#I;#J;#E;#C;#H;#V;#q;#F;#N;#w;#$;#L;#j;#z;static unsafeExposeInternals(A){return{starts:A.#w,ttls:A.#$,sizes:A.#N,keyMap:A.#K,keyList:A.#I,valList:A.#J,next:A.#E,prev:A.#C,get head(){return A.#H},get tail(){return A.#V},free:A.#q,isBackgroundFetch:(Q)=>A.#W(Q),backgroundFetch:(Q,B,G,Z)=>A.#v(Q,B,G,Z),moveToTail:(Q)=>A.#S(Q),indexes:(Q)=>A.#O(Q),rindexes:(Q)=>A.#M(Q),isStale:(Q)=>A.#U(Q)}}get max(){return this.#A}get maxSize(){return this.#Q}get calculatedSize(){return this.#D}get size(){return this.#Y}get fetchMethod(){return this.#G}get memoMethod(){return this.#X}get dispose(){return this.#B}get disposeAfter(){return this.#Z}constructor(A){let{max:Q=0,ttl:B,ttlResolution:G=1,ttlAutopurge:Z,updateAgeOnGet:Y,updateAgeOnHas:J,allowStale:X,dispose:I,disposeAfter:W,noDisposeOnSet:D,noUpdateTTL:K,maxSize:V=0,maxEntrySize:F=0,sizeCalculation:H,fetchMethod:E,memoMethod:z,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:O,allowStaleOnFetchRejection:L,allowStaleOnFetchAbort:M,ignoreFetchAbort:_}=A;if(Q!==0&&!Zi(Q))throw TypeError("max option must be a nonnegative integer");let j=Q?UFQ(Q):Array;if(!j)throw Error("invalid max value: "+Q);if(this.#A=Q,this.#Q=V,this.maxEntrySize=F||this.#Q,this.sizeCalculation=H,this.sizeCalculation){if(!this.#Q&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw TypeError("sizeCalculation set to non-function")}if(z!==void 0&&typeof z!=="function")throw TypeError("memoMethod must be a function if defined");if(this.#X=z,E!==void 0&&typeof E!=="function")throw TypeError("fetchMethod must be a function if specified");if(this.#G=E,this.#j=!!E,this.#K=new Map,this.#I=Array(Q).fill(void 0),this.#J=Array(Q).fill(void 0),this.#E=new j(Q),this.#C=new j(Q),this.#H=0,this.#V=0,this.#q=gGA.create(Q),this.#Y=0,this.#D=0,typeof I==="function")this.#B=I;if(typeof W==="function")this.#Z=W,this.#F=[];else this.#Z=void 0,this.#F=void 0;if(this.#L=!!this.#B,this.#z=!!this.#Z,this.noDisposeOnSet=!!D,this.noUpdateTTL=!!K,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!L,this.allowStaleOnFetchAbort=!!M,this.ignoreFetchAbort=!!_,this.maxEntrySize!==0){if(this.#Q!==0){if(!Zi(this.#Q))throw TypeError("maxSize must be a positive integer if specified")}if(!Zi(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#m()}if(this.allowStale=!!X,this.noDeleteOnStaleGet=!!O,this.updateAgeOnGet=!!Y,this.updateAgeOnHas=!!J,this.ttlResolution=Zi(G)||G===0?G:1,this.ttlAutopurge=!!Z,this.ttl=B||0,this.ttl){if(!Zi(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#k()}if(this.#A===0&&this.ttl===0&&this.#Q===0)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#A&&!this.#Q){if(Ah4("LRU_CACHE_UNBOUNDED"))CFQ.add("LRU_CACHE_UNBOUNDED"),$FQ("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",PM)}}getRemainingTTL(A){return this.#K.has(A)?1/0:0}#k(){let A=new IqA(this.#A),Q=new IqA(this.#A);this.#$=A,this.#w=Q,this.#b=(Z,Y,J=hGA.now())=>{if(Q[Z]=Y!==0?J:0,A[Z]=Y,Y!==0&&this.ttlAutopurge){let X=setTimeout(()=>{if(this.#U(Z))this.#R(this.#I[Z],"expire")},Y+1);if(X.unref)X.unref()}},this.#T=(Z)=>{Q[Z]=A[Z]!==0?hGA.now():0},this.#_=(Z,Y)=>{if(A[Y]){let J=A[Y],X=Q[Y];if(!J||!X)return;Z.ttl=J,Z.start=X,Z.now=B||G();let I=Z.now-X;Z.remainingTTL=J-I}};let B=0,G=()=>{let Z=hGA.now();if(this.ttlResolution>0){B=Z;let Y=setTimeout(()=>B=0,this.ttlResolution);if(Y.unref)Y.unref()}return Z};this.getRemainingTTL=(Z)=>{let Y=this.#K.get(Z);if(Y===void 0)return 0;let J=A[Y],X=Q[Y];if(!J||!X)return 1/0;let I=(B||G())-X;return J-I},this.#U=(Z)=>{let Y=Q[Z],J=A[Z];return!!J&&!!Y&&(B||G())-Y>J}}#T=()=>{};#_=()=>{};#b=()=>{};#U=()=>!1;#m(){let A=new IqA(this.#A);this.#D=0,this.#N=A,this.#P=(Q)=>{this.#D-=A[Q],A[Q]=0},this.#f=(Q,B,G,Z)=>{if(this.#W(B))return 0;if(!Zi(G))if(Z){if(typeof Z!=="function")throw TypeError("sizeCalculation must be a function");if(G=Z(B,Q),!Zi(G))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return G},this.#x=(Q,B,G)=>{if(A[Q]=B,this.#Q){let Z=this.#Q-A[Q];while(this.#D>Z)this.#y(!0)}if(this.#D+=A[Q],G)G.entrySize=B,G.totalCalculatedSize=this.#D}}#P=(A)=>{};#x=(A,Q,B)=>{};#f=(A,Q,B,G)=>{if(B||G)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:A=this.allowStale}={}){if(this.#Y)for(let Q=this.#V;;){if(!this.#h(Q))break;if(A||!this.#U(Q))yield Q;if(Q===this.#H)break;else Q=this.#C[Q]}}*#M({allowStale:A=this.allowStale}={}){if(this.#Y)for(let Q=this.#H;;){if(!this.#h(Q))break;if(A||!this.#U(Q))yield Q;if(Q===this.#V)break;else Q=this.#E[Q]}}#h(A){return A!==void 0&&this.#K.get(this.#I[A])===A}*entries(){for(let A of this.#O())if(this.#J[A]!==void 0&&this.#I[A]!==void 0&&!this.#W(this.#J[A]))yield[this.#I[A],this.#J[A]]}*rentries(){for(let A of this.#M())if(this.#J[A]!==void 0&&this.#I[A]!==void 0&&!this.#W(this.#J[A]))yield[this.#I[A],this.#J[A]]}*keys(){for(let A of this.#O()){let Q=this.#I[A];if(Q!==void 0&&!this.#W(this.#J[A]))yield Q}}*rkeys(){for(let A of this.#M()){let Q=this.#I[A];if(Q!==void 0&&!this.#W(this.#J[A]))yield Q}}*values(){for(let A of this.#O())if(this.#J[A]!==void 0&&!this.#W(this.#J[A]))yield this.#J[A]}*rvalues(){for(let A of this.#M())if(this.#J[A]!==void 0&&!this.#W(this.#J[A]))yield this.#J[A]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(A,Q={}){for(let B of this.#O()){let G=this.#J[B],Z=this.#W(G)?G.__staleWhileFetching:G;if(Z===void 0)continue;if(A(Z,this.#I[B],this))return this.get(this.#I[B],Q)}}forEach(A,Q=this){for(let B of this.#O()){let G=this.#J[B],Z=this.#W(G)?G.__staleWhileFetching:G;if(Z===void 0)continue;A.call(Q,Z,this.#I[B],this)}}rforEach(A,Q=this){for(let B of this.#M()){let G=this.#J[B],Z=this.#W(G)?G.__staleWhileFetching:G;if(Z===void 0)continue;A.call(Q,Z,this.#I[B],this)}}purgeStale(){let A=!1;for(let Q of this.#M({allowStale:!0}))if(this.#U(Q))this.#R(this.#I[Q],"expire"),A=!0;return A}info(A){let Q=this.#K.get(A);if(Q===void 0)return;let B=this.#J[Q],G=this.#W(B)?B.__staleWhileFetching:B;if(G===void 0)return;let Z={value:G};if(this.#$&&this.#w){let Y=this.#$[Q],J=this.#w[Q];if(Y&&J){let X=Y-(hGA.now()-J);Z.ttl=X,Z.start=Date.now()}}if(this.#N)Z.size=this.#N[Q];return Z}dump(){let A=[];for(let Q of this.#O({allowStale:!0})){let B=this.#I[Q],G=this.#J[Q],Z=this.#W(G)?G.__staleWhileFetching:G;if(Z===void 0||B===void 0)continue;let Y={value:Z};if(this.#$&&this.#w){Y.ttl=this.#$[Q];let J=hGA.now()-this.#w[Q];Y.start=Math.floor(Date.now()-J)}if(this.#N)Y.size=this.#N[Q];A.unshift([B,Y])}return A}load(A){this.clear();for(let[Q,B]of A){if(B.start){let G=Date.now()-B.start;B.start=hGA.now()-G}this.set(Q,B.value,B)}}set(A,Q,B={}){if(Q===void 0)return this.delete(A),this;let{ttl:G=this.ttl,start:Z,noDisposeOnSet:Y=this.noDisposeOnSet,sizeCalculation:J=this.sizeCalculation,status:X}=B,{noUpdateTTL:I=this.noUpdateTTL}=B,W=this.#f(A,Q,B.size||0,J);if(this.maxEntrySize&&W>this.maxEntrySize){if(X)X.set="miss",X.maxEntrySizeExceeded=!0;return this.#R(A,"set"),this}let D=this.#Y===0?void 0:this.#K.get(A);if(D===void 0){if(D=this.#Y===0?this.#V:this.#q.length!==0?this.#q.pop():this.#Y===this.#A?this.#y(!1):this.#Y,this.#I[D]=A,this.#J[D]=Q,this.#K.set(A,D),this.#E[this.#V]=D,this.#C[D]=this.#V,this.#V=D,this.#Y++,this.#x(D,W,X),X)X.set="add";I=!1}else{this.#S(D);let K=this.#J[D];if(Q!==K){if(this.#j&&this.#W(K)){K.__abortController.abort(Error("replaced"));let{__staleWhileFetching:V}=K;if(V!==void 0&&!Y){if(this.#L)this.#B?.(V,A,"set");if(this.#z)this.#F?.push([V,A,"set"])}}else if(!Y){if(this.#L)this.#B?.(K,A,"set");if(this.#z)this.#F?.push([K,A,"set"])}if(this.#P(D),this.#x(D,W,X),this.#J[D]=Q,X){X.set="replace";let V=K&&this.#W(K)?K.__staleWhileFetching:K;if(V!==void 0)X.oldValue=V}}else if(X)X.set="update"}if(G!==0&&!this.#$)this.#k();if(this.#$){if(!I)this.#b(D,G,Z);if(X)this.#_(X,D)}if(!Y&&this.#z&&this.#F){let K=this.#F,V;while(V=K?.shift())this.#Z?.(...V)}return this}pop(){try{while(this.#Y){let A=this.#J[this.#H];if(this.#y(!0),this.#W(A)){if(A.__staleWhileFetching)return A.__staleWhileFetching}else if(A!==void 0)return A}}finally{if(this.#z&&this.#F){let A=this.#F,Q;while(Q=A?.shift())this.#Z?.(...Q)}}}#y(A){let Q=this.#H,B=this.#I[Q],G=this.#J[Q];if(this.#j&&this.#W(G))G.__abortController.abort(Error("evicted"));else if(this.#L||this.#z){if(this.#L)this.#B?.(G,B,"evict");if(this.#z)this.#F?.push([G,B,"evict"])}if(this.#P(Q),A)this.#I[Q]=void 0,this.#J[Q]=void 0,this.#q.push(Q);if(this.#Y===1)this.#H=this.#V=0,this.#q.length=0;else this.#H=this.#E[Q];return this.#K.delete(B),this.#Y--,Q}has(A,Q={}){let{updateAgeOnHas:B=this.updateAgeOnHas,status:G}=Q,Z=this.#K.get(A);if(Z!==void 0){let Y=this.#J[Z];if(this.#W(Y)&&Y.__staleWhileFetching===void 0)return!1;if(!this.#U(Z)){if(B)this.#T(Z);if(G)G.has="hit",this.#_(G,Z);return!0}else if(G)G.has="stale",this.#_(G,Z)}else if(G)G.has="miss";return!1}peek(A,Q={}){let{allowStale:B=this.allowStale}=Q,G=this.#K.get(A);if(G===void 0||!B&&this.#U(G))return;let Z=this.#J[G];return this.#W(Z)?Z.__staleWhileFetching:Z}#v(A,Q,B,G){let Z=Q===void 0?void 0:this.#J[Q];if(this.#W(Z))return Z;let Y=new giA,{signal:J}=B;J?.addEventListener("abort",()=>Y.abort(J.reason),{signal:Y.signal});let X={signal:Y.signal,options:B,context:G},I=(H,E=!1)=>{let{aborted:z}=Y.signal,C=B.ignoreFetchAbort&&H!==void 0;if(B.status)if(z&&!E){if(B.status.fetchAborted=!0,B.status.fetchError=Y.signal.reason,C)B.status.fetchAbortIgnored=!0}else B.status.fetchResolved=!0;if(z&&!C&&!E)return D(Y.signal.reason);let O=V;if(this.#J[Q]===V)if(H===void 0)if(O.__staleWhileFetching)this.#J[Q]=O.__staleWhileFetching;else this.#R(A,"fetch");else{if(B.status)B.status.fetchUpdated=!0;this.set(A,H,X.options)}return H},W=(H)=>{if(B.status)B.status.fetchRejected=!0,B.status.fetchError=H;return D(H)},D=(H)=>{let{aborted:E}=Y.signal,z=E&&B.allowStaleOnFetchAbort,C=z||B.allowStaleOnFetchRejection,O=C||B.noDeleteOnFetchRejection,L=V;if(this.#J[Q]===V){if(!O||L.__staleWhileFetching===void 0)this.#R(A,"fetch");else if(!z)this.#J[Q]=L.__staleWhileFetching}if(C){if(B.status&&L.__staleWhileFetching!==void 0)B.status.returnedStale=!0;return L.__staleWhileFetching}else if(L.__returned===L)throw H},K=(H,E)=>{let z=this.#G?.(A,Z,X);if(z&&z instanceof Promise)z.then((C)=>H(C===void 0?void 0:C),E);Y.signal.addEventListener("abort",()=>{if(!B.ignoreFetchAbort||B.allowStaleOnFetchAbort){if(H(void 0),B.allowStaleOnFetchAbort)H=(C)=>I(C,!0)}})};if(B.status)B.status.fetchDispatched=!0;let V=new Promise(K).then(I,W),F=Object.assign(V,{__abortController:Y,__staleWhileFetching:Z,__returned:void 0});if(Q===void 0)this.set(A,F,{...X.options,status:void 0}),Q=this.#K.get(A);else this.#J[Q]=F;return F}#W(A){if(!this.#j)return!1;let Q=A;return!!Q&&Q instanceof Promise&&Q.hasOwnProperty("__staleWhileFetching")&&Q.__abortController instanceof giA}async fetch(A,Q={}){let{allowStale:B=this.allowStale,updateAgeOnGet:G=this.updateAgeOnGet,noDeleteOnStaleGet:Z=this.noDeleteOnStaleGet,ttl:Y=this.ttl,noDisposeOnSet:J=this.noDisposeOnSet,size:X=0,sizeCalculation:I=this.sizeCalculation,noUpdateTTL:W=this.noUpdateTTL,noDeleteOnFetchRejection:D=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:K=this.allowStaleOnFetchRejection,ignoreFetchAbort:V=this.ignoreFetchAbort,allowStaleOnFetchAbort:F=this.allowStaleOnFetchAbort,context:H,forceRefresh:E=!1,status:z,signal:C}=Q;if(!this.#j){if(z)z.fetch="get";return this.get(A,{allowStale:B,updateAgeOnGet:G,noDeleteOnStaleGet:Z,status:z})}let O={allowStale:B,updateAgeOnGet:G,noDeleteOnStaleGet:Z,ttl:Y,noDisposeOnSet:J,size:X,sizeCalculation:I,noUpdateTTL:W,noDeleteOnFetchRejection:D,allowStaleOnFetchRejection:K,allowStaleOnFetchAbort:F,ignoreFetchAbort:V,status:z,signal:C},L=this.#K.get(A);if(L===void 0){if(z)z.fetch="miss";let M=this.#v(A,L,O,H);return M.__returned=M}else{let M=this.#J[L];if(this.#W(M)){let v=B&&M.__staleWhileFetching!==void 0;if(z){if(z.fetch="inflight",v)z.returnedStale=!0}return v?M.__staleWhileFetching:M.__returned=M}let _=this.#U(L);if(!E&&!_){if(z)z.fetch="hit";if(this.#S(L),G)this.#T(L);if(z)this.#_(z,L);return M}let j=this.#v(A,L,O,H),y=j.__staleWhileFetching!==void 0&&B;if(z){if(z.fetch=_?"stale":"refresh",y&&_)z.returnedStale=!0}return y?j.__staleWhileFetching:j.__returned=j}}async forceFetch(A,Q={}){let B=await this.fetch(A,Q);if(B===void 0)throw Error("fetch() returned undefined");return B}memo(A,Q={}){let B=this.#X;if(!B)throw Error("no memoMethod provided to constructor");let{context:G,forceRefresh:Z,...Y}=Q,J=this.get(A,Y);if(!Z&&J!==void 0)return J;let X=B(A,J,{options:Y,context:G});return this.set(A,X,Y),X}get(A,Q={}){let{allowStale:B=this.allowStale,updateAgeOnGet:G=this.updateAgeOnGet,noDeleteOnStaleGet:Z=this.noDeleteOnStaleGet,status:Y}=Q,J=this.#K.get(A);if(J!==void 0){let X=this.#J[J],I=this.#W(X);if(Y)this.#_(Y,J);if(this.#U(J)){if(Y)Y.get="stale";if(!I){if(!Z)this.#R(A,"expire");if(Y&&B)Y.returnedStale=!0;return B?X:void 0}else{if(Y&&B&&X.__staleWhileFetching!==void 0)Y.returnedStale=!0;return B?X.__staleWhileFetching:void 0}}else{if(Y)Y.get="hit";if(I)return X.__staleWhileFetching;if(this.#S(J),G)this.#T(J);return X}}else if(Y)Y.get="miss"}#g(A,Q){this.#C[Q]=A,this.#E[A]=Q}#S(A){if(A!==this.#V){if(A===this.#H)this.#H=this.#E[A];else this.#g(this.#C[A],this.#E[A]);this.#g(this.#V,A),this.#V=A}}delete(A){return this.#R(A,"delete")}#R(A,Q){let B=!1;if(this.#Y!==0){let G=this.#K.get(A);if(G!==void 0)if(B=!0,this.#Y===1)this.#u(Q);else{this.#P(G);let Z=this.#J[G];if(this.#W(Z))Z.__abortController.abort(Error("deleted"));else if(this.#L||this.#z){if(this.#L)this.#B?.(Z,A,Q);if(this.#z)this.#F?.push([Z,A,Q])}if(this.#K.delete(A),this.#I[G]=void 0,this.#J[G]=void 0,G===this.#V)this.#V=this.#C[G];else if(G===this.#H)this.#H=this.#E[G];else{let Y=this.#C[G];this.#E[Y]=this.#E[G];let J=this.#E[G];this.#C[J]=this.#C[G]}this.#Y--,this.#q.push(G)}}if(this.#z&&this.#F?.length){let G=this.#F,Z;while(Z=G?.shift())this.#Z?.(...Z)}return B}clear(){return this.#u("delete")}#u(A){for(let Q of this.#M({allowStale:!0})){let B=this.#J[Q];if(this.#W(B))B.__abortController.abort(Error("deleted"));else{let G=this.#I[Q];if(this.#L)this.#B?.(B,G,A);if(this.#z)this.#F?.push([B,G,A])}}if(this.#K.clear(),this.#J.fill(void 0),this.#I.fill(void 0),this.#$&&this.#w)this.#$.fill(0),this.#w.fill(0);if(this.#N)this.#N.fill(0);if(this.#H=0,this.#V=0,this.#q.length=0,this.#D=0,this.#Y=0,this.#z&&this.#F){let Q=this.#F,B;while(B=Q?.shift())this.#Z?.(...B)}}}});function Mj1(A,Q=300000){let B=new Map,G=(...Z)=>{let Y=Q1(Z),J=B.get(Y),X=Date.now();if(!J){let I=A(...Z);return B.set(Y,{value:I,timestamp:X,refreshing:!1}),I}if(J&&X-J.timestamp>Q&&!J.refreshing)return J.refreshing=!0,Promise.resolve().then(()=>{let I=A(...Z);B.set(Y,{value:I,timestamp:Date.now(),refreshing:!1})}).catch((I)=>{s(I instanceof Error?I:Error(String(I))),B.delete(Y)}),J.value;return B.get(Y).value};return G.cache={clear:()=>B.clear()},G}function uiA(A,Q=300000){let B=new Map,G=async(...Z)=>{let Y=Q1(Z),J=B.get(Y),X=Date.now();if(!J){let I=await A(...Z);return B.set(Y,{value:I,timestamp:X,refreshing:!1}),I}if(J&&X-J.timestamp>Q&&!J.refreshing)return J.refreshing=!0,A(...Z).then((I)=>{B.set(Y,{value:I,timestamp:Date.now(),refreshing:!1})}).catch((I)=>{s(I instanceof Error?I:Error(String(I))),B.delete(Y)}),J.value;return B.get(Y).value};return G.cache={clear:()=>B.clear()},G}var miA=w(()=>{f1();e1()});function Gh4(){let A=new Map;for(let[Q,B]of Object.entries(XX)){for(let[G,Z]of Object.entries(B))XX[G]={open:`\x1B[${Z[0]}m`,close:`\x1B[${Z[1]}m`},B[G]=XX[G],A.set(Z[0],Z[1]);Object.defineProperty(XX,Q,{value:B,enumerable:!1})}return Object.defineProperty(XX,"codes",{value:A,enumerable:!1}),XX.color.close="\x1B[39m",XX.bgColor.close="\x1B[49m",XX.color.ansi=qFQ(),XX.color.ansi256=NFQ(),XX.color.ansi16m=wFQ(),XX.bgColor.ansi=qFQ(10),XX.bgColor.ansi256=NFQ(10),XX.bgColor.ansi16m=wFQ(10),Object.defineProperties(XX,{rgbToAnsi256:{value(Q,B,G){if(Q===B&&B===G){if(Q<8)return 16;if(Q>248)return 231;return Math.round((Q-8)/247*24)+232}return 16+36*Math.round(Q/255*5)+6*Math.round(B/255*5)+Math.round(G/255*5)},enumerable:!1},hexToRgb:{value(Q){let B=/[a-f\d]{6}|[a-f\d]{3}/i.exec(Q.toString(16));if(!B)return[0,0,0];let[G]=B;if(G.length===3)G=[...G].map((Y)=>Y+Y).join("");let Z=Number.parseInt(G,16);return[Z>>16&255,Z>>8&255,Z&255]},enumerable:!1},hexToAnsi256:{value:(Q)=>XX.rgbToAnsi256(...XX.hexToRgb(Q)),enumerable:!1},ansi256ToAnsi:{value(Q){if(Q<8)return 30+Q;if(Q<16)return 90+(Q-8);let B,G,Z;if(Q>=232)B=((Q-232)*10+8)/255,G=B,Z=B;else{Q-=16;let X=Q%36;B=Math.floor(Q/36)/5,G=Math.floor(X/6)/5,Z=X%6/5}let Y=Math.max(B,G,Z)*2;if(Y===0)return 30;let J=30+(Math.round(Z)<<2|Math.round(G)<<1|Math.round(B));if(Y===2)J+=60;return J},enumerable:!1},rgbToAnsi:{value:(Q,B,G)=>XX.ansi256ToAnsi(XX.rgbToAnsi256(Q,B,G)),enumerable:!1},hexToAnsi:{value:(Q)=>XX.ansi256ToAnsi(XX.hexToAnsi256(Q)),enumerable:!1}}),XX}var qFQ=(A=0)=>(Q)=>`\x1B[${Q+A}m`,NFQ=(A=0)=>(Q)=>`\x1B[${38+A};5;${Q}m`,wFQ=(A=0)=>(Q,B,G)=>`\x1B[${38+A};2;${Q};${B};${G}m`,XX,_BG,Qh4,Bh4,jBG,Zh4,DT;var LFQ=w(()=>{XX={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},_BG=Object.keys(XX.modifier),Qh4=Object.keys(XX.color),Bh4=Object.keys(XX.bgColor),jBG=[...Qh4,...Bh4];Zh4=Gh4(),DT=Zh4});import Rj1 from"node:process";import Yh4 from"node:os";import OFQ from"node:tty";function SM(A,Q=globalThis.Deno?globalThis.Deno.args:Rj1.argv){let B=A.startsWith("-")?"":A.length===1?"-":"--",G=Q.indexOf(B+A),Z=Q.indexOf("--");return G!==-1&&(Z===-1||G<Z)}function Jh4(){if("FORCE_COLOR"in yI){if(yI.FORCE_COLOR==="true")return 1;if(yI.FORCE_COLOR==="false")return 0;return yI.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(yI.FORCE_COLOR,10),3)}}function Xh4(A){if(A===0)return!1;return{level:A,hasBasic:!0,has256:A>=2,has16m:A>=3}}function Ih4(A,{streamIsTTY:Q,sniffFlags:B=!0}={}){let G=Jh4();if(G!==void 0)diA=G;let Z=B?diA:G;if(Z===0)return 0;if(B){if(SM("color=16m")||SM("color=full")||SM("color=truecolor"))return 3;if(SM("color=256"))return 2}if("TF_BUILD"in yI&&"AGENT_NAME"in yI)return 1;if(A&&!Q&&Z===void 0)return 0;let Y=Z||0;if(yI.TERM==="dumb")return Y;if(Rj1.platform==="win32"){let J=Yh4.release().split(".");if(Number(J[0])>=10&&Number(J[2])>=10586)return Number(J[2])>=14931?3:2;return 1}if("CI"in yI){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((J)=>(J in yI)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((J)=>(J in yI))||yI.CI_NAME==="codeship")return 1;return Y}if("TEAMCITY_VERSION"in yI)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(yI.TEAMCITY_VERSION)?1:0;if(yI.COLORTERM==="truecolor")return 3;if(yI.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in yI){let J=Number.parseInt((yI.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(yI.TERM_PROGRAM){case"iTerm.app":return J>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(yI.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(yI.TERM))return 1;if("COLORTERM"in yI)return 1;return Y}function MFQ(A,Q={}){let B=Ih4(A,{streamIsTTY:A&&A.isTTY,...Q});return Xh4(B)}var yI,diA,Wh4,RFQ;var _FQ=w(()=>{({env:yI}=Rj1);if(SM("no-color")||SM("no-colors")||SM("color=false")||SM("color=never"))diA=0;else if(SM("color")||SM("colors")||SM("color=true")||SM("color=always"))diA=1;Wh4={stdout:MFQ({isTTY:OFQ.isatty(1)}),stderr:MFQ({isTTY:OFQ.isatty(2)})},RFQ=Wh4});function jFQ(A,Q,B){let G=A.indexOf(Q);if(G===-1)return A;let Z=Q.length,Y=0,J="";do J+=A.slice(Y,G)+Q+B,Y=G+Z,G=A.indexOf(Q,Y);while(G!==-1);return J+=A.slice(Y),J}function TFQ(A,Q,B,G){let Z=0,Y="";do{let J=A[G-1]==="\r";Y+=A.slice(Z,J?G-1:G)+Q+(J?`\r
`:`
`)+B,Z=G+1,G=A.indexOf(`
`,Z)}while(G!==-1);return Y+=A.slice(Z),Y}class Pj1{constructor(A){return yFQ(A)}}function DqA(A){return yFQ(A)}var PFQ,SFQ,_j1,mGA,WqA,xFQ,dGA,Dh4=(A,Q={})=>{if(Q.level&&!(Number.isInteger(Q.level)&&Q.level>=0&&Q.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let B=PFQ?PFQ.level:0;A.level=Q.level===void 0?B:Q.level},yFQ=(A)=>{let Q=(...B)=>B.join(" ");return Dh4(Q,A),Object.setPrototypeOf(Q,DqA.prototype),Q},jj1=(A,Q,B,...G)=>{if(A==="rgb"){if(Q==="ansi16m")return DT[B].ansi16m(...G);if(Q==="ansi256")return DT[B].ansi256(DT.rgbToAnsi256(...G));return DT[B].ansi(DT.rgbToAnsi(...G))}if(A==="hex")return jj1("rgb",Q,B,...DT.hexToRgb(...G));return DT[B][A](...G)},Kh4,Vh4,Tj1=(A,Q,B)=>{let G,Z;if(B===void 0)G=A,Z=Q;else G=B.openAll+A,Z=Q+B.closeAll;return{open:A,close:Q,openAll:G,closeAll:Z,parent:B}},piA=(A,Q,B)=>{let G=(...Z)=>Fh4(G,Z.length===1?""+Z[0]:Z.join(" "));return Object.setPrototypeOf(G,Vh4),G[_j1]=A,G[mGA]=Q,G[WqA]=B,G},Fh4=(A,Q)=>{if(A.level<=0||!Q)return A[WqA]?"":Q;let B=A[mGA];if(B===void 0)return Q;let{openAll:G,closeAll:Z}=B;if(Q.includes("\x1B"))while(B!==void 0)Q=jFQ(Q,B.close,B.open),B=B.parent;let Y=Q.indexOf(`
`);if(Y!==-1)Q=TFQ(Q,Z,G,Y);return G+Q+Z},Hh4,hBG,W1;var t6=w(()=>{LFQ();_FQ();({stdout:PFQ,stderr:SFQ}=RFQ),_j1=Symbol("GENERATOR"),mGA=Symbol("STYLER"),WqA=Symbol("IS_EMPTY"),xFQ=["ansi","ansi","ansi256","ansi16m"],dGA=Object.create(null);Object.setPrototypeOf(DqA.prototype,Function.prototype);for(let[A,Q]of Object.entries(DT))dGA[A]={get(){let B=piA(this,Tj1(Q.open,Q.close,this[mGA]),this[WqA]);return Object.defineProperty(this,A,{value:B}),B}};dGA.visible={get(){let A=piA(this,this[mGA],!0);return Object.defineProperty(this,"visible",{value:A}),A}};Kh4=["rgb","hex","ansi256"];for(let A of Kh4){dGA[A]={get(){let{level:B}=this;return function(...G){let Z=Tj1(jj1(A,xFQ[B],"color",...G),DT.color.close,this[mGA]);return piA(this,Z,this[WqA])}}};let Q="bg"+A[0].toUpperCase()+A.slice(1);dGA[Q]={get(){let{level:B}=this;return function(...G){let Z=Tj1(jj1(A,xFQ[B],"bgColor",...G),DT.bgColor.close,this[mGA]);return piA(this,Z,this[WqA])}}}}Vh4=Object.defineProperties(()=>{},{...dGA,level:{enumerable:!0,get(){return this[_j1].level},set(A){this[_j1].level=A}}});Object.defineProperties(DqA.prototype,dGA);Hh4=DqA(),hBG=DqA({level:SFQ?SFQ.level:0}),W1=Hh4});function vFQ(A,Q){return{name:`${A.name}-with-${Q.name}-fallback`,read(){let B=A.read();if(B!==null&&B!==void 0)return B;return Q.read()||{}},update(B){let G=A.read(),Z=A.update(B);if(Z.success){if(G===null)Q.delete();return Z}let Y=Q.update(B);if(Y.success)return{success:!0,warning:Y.warning};return{success:!1}},delete(){let B=A.delete(),G=Q.delete();return B||G}}}import{createHash as Eh4}from"crypto";import{userInfo as zh4}from"os";function Yi(A=""){let Q=zQ(),G=!process.env.CLAUDE_CONFIG_DIR?"":`-${Eh4("sha256").update(Q).digest("hex").substring(0,8)}`;return`Claude Code${b9().OAUTH_FILE_SUFFIX}${A}${G}`}function KqA(){try{return process.env.USER||zh4().username}catch{return"claude-code-user"}}function Ji(){M1A={data:null,valid:!1}}function bFQ(){if(process.platform!=="darwin")return!1;try{return U7A("security",["show-keychain-info"],{reject:!1,stdio:["ignore","pipe","pipe"]}).exitCode===36}catch{return!1}}var M1A,kFQ;var VqA=w(()=>{kw1();bQ();ZX();oU();e1();M1A={data:null,valid:!1};kFQ={name:"keychain",read(){if(M1A.valid)return M1A.data;try{let A=Yi("-credentials"),Q=KqA(),B=OD(`security find-generic-password -a "${Q}" -w -s "${A}"`);if(B){let G=QQ(B);return M1A={data:G,valid:!0},G}}catch(A){return M1A={data:null,valid:!0},null}return M1A={data:null,valid:!0},null},update(A){Ji();try{let Q=Yi("-credentials"),B=KqA(),G=Q1(A),Z=Buffer.from(G,"utf-8").toString("hex"),Y=`add-generic-password -U -a "${B}" -s "${Q}" -X "${Z}"
`;if(U7A("security",["-i"],{input:Y,stdio:["pipe","pipe","pipe"],reject:!1}).exitCode!==0)return{success:!1};return M1A={data:A,valid:!0},{success:!0}}catch(Q){return{success:!1}}},delete(){Ji();try{let A=Yi("-credentials"),Q=KqA();return OD(`security delete-generic-password -a "${Q}" -s "${A}"`),!0}catch(A){return!1}}}});import{join as Ch4}from"path";import{chmodSync as $h4}from"fs";function Sj1(){let A=zQ(),Q=".credentials.json";return{storageDir:A,storagePath:Ch4(A,".credentials.json")}}var xj1;var fFQ=w(()=>{EQ();bQ();e1();e1();xj1={name:"plaintext",read(){let{storagePath:A}=Sj1();if(xA().existsSync(A))try{let Q=xA().readFileSync(A,{encoding:"utf8"});return QQ(Q)}catch(Q){return null}return null},update(A){try{let{storageDir:Q,storagePath:B}=Sj1();if(!xA().existsSync(Q))xA().mkdirSync(Q);return bB(B,Q1(A),{encoding:"utf8",flush:!1}),$h4(B,384),{success:!0,warning:"Warning: Storing credentials in plaintext."}}catch(Q){return{success:!1}}},delete(){let{storagePath:A}=Sj1();if(xA().existsSync(A))try{return xA().unlinkSync(A),!0}catch(Q){return!1}return!0}}});function gw(){if(process.platform==="darwin")return vFQ(kFQ,xj1);return xj1}var ciA=w(()=>{VqA();fFQ()});function yj1(){let A=Jk0();if(A!==void 0)return A;let Q=process.env.CLAUDE_CODE_OAUTH_TOKEN_FILE_DESCRIPTOR;if(!Q)return q5A(null),null;let B=parseInt(Q,10);if(Number.isNaN(B))return k(`CLAUDE_CODE_OAUTH_TOKEN_FILE_DESCRIPTOR must be a valid file descriptor number, got: ${Q}`,{level:"error"}),q5A(null),null;try{let G=xA(),Z=process.platform==="darwin"||process.platform==="freebsd"?`/dev/fd/${B}`:`/proc/self/fd/${B}`,Y=G.readFileSync(Z,{encoding:"utf8"}).trim();if(!Y)return k("File descriptor contained empty OAuth token",{level:"error"}),q5A(null),null;return k(`Successfully read OAuth token from file descriptor ${B}`),q5A(Y),Y}catch(G){return k(`Failed to read OAuth token from file descriptor ${B}: ${G instanceof Error?G.message:String(G)}`,{level:"error"}),q5A(null),null}}function vj1(){let A=Xk0();if(A!==void 0)return A;let Q=process.env.CLAUDE_CODE_API_KEY_FILE_DESCRIPTOR;if(!Q)return N5A(null),null;let B=parseInt(Q,10);if(Number.isNaN(B))return k(`CLAUDE_CODE_API_KEY_FILE_DESCRIPTOR must be a valid file descriptor number, got: ${Q}`,{level:"error"}),N5A(null),null;try{let G=xA(),Z=process.platform==="darwin"||process.platform==="freebsd"?`/dev/fd/${B}`:`/proc/self/fd/${B}`,Y=G.readFileSync(Z,{encoding:"utf8"}).trim();if(!Y)return k("File descriptor contained empty API key",{level:"error"}),N5A(null),null;return k(`Successfully read API key from file descriptor ${B}`),N5A(Y),Y}catch(G){return k(`Failed to read API key from file descriptor ${B}: ${G instanceof Error?G.message:String(G)}`,{level:"error"}),N5A(null),null}}var hFQ=w(()=>{y1();EQ();q0()});async function liA(){let Q=R1().oauthAccount?.accountUuid,B=uw();if(!Q||!B)return;let G=`${b9().BASE_API_URL}/api/claude_cli_profile`;try{return(await fQ.get(G,{headers:{"x-api-key":B,"anthropic-beta":dl},params:{account_uuid:Q}})).data}catch(Z){s(Z)}}async function pGA(A){let Q=`${b9().BASE_API_URL}/api/oauth/profile`;try{return(await fQ.get(Q,{headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}})).data}catch(B){s(B)}}var FqA=w(()=>{f5();ZX();eB();IQ();f1()});function Vg(A){return Boolean(A?.includes(n7A))}function iiA(A){return A?.split(" ").filter(Boolean)??[]}function kj1({codeChallenge:A,state:Q,port:B,isManual:G,loginWithClaudeAi:Z,inferenceOnly:Y,orgUUID:J}){let X=Z?b9().CLAUDE_AI_AUTHORIZE_URL:b9().CONSOLE_AUTHORIZE_URL,I=new URL(X);I.searchParams.append("code","true"),I.searchParams.append("client_id",b9().CLIENT_ID),I.searchParams.append("response_type","code"),I.searchParams.append("redirect_uri",G?b9().MANUAL_REDIRECT_URL:`http://localhost:${B}/callback`);let W=Y?[n7A]:e3Q;if(I.searchParams.append("scope",W.join(" ")),I.searchParams.append("code_challenge",A),I.searchParams.append("code_challenge_method","S256"),I.searchParams.append("state",Q),J)I.searchParams.append("orgUUID",J);return I.toString()}async function gFQ(A,Q,B,G,Z=!1,Y){let J={grant_type:"authorization_code",code:A,redirect_uri:Z?b9().MANUAL_REDIRECT_URL:`http://localhost:${G}/callback`,client_id:b9().CLIENT_ID,code_verifier:B,state:Q};if(Y!==void 0)J.expires_in=Y;let X=await fQ.post(b9().TOKEN_URL,J,{headers:{"Content-Type":"application/json"}});if(X.status!==200)throw Error(X.status===401?"Authentication failed: Invalid authorization code":`Token exchange failed (${X.status}): ${X.statusText}`);return p("tengu_oauth_token_exchange_success",{}),X.data}async function bj1(A){let Q={grant_type:"refresh_token",refresh_token:A,client_id:b9().CLIENT_ID,scope:AM1.join(" ")};try{let B=await fQ.post(b9().TOKEN_URL,Q,{headers:{"Content-Type":"application/json"}});if(B.status!==200)throw Error(`Token refresh failed: ${B.statusText}`);let G=B.data,{access_token:Z,refresh_token:Y=A,expires_in:J}=G,X=Date.now()+J*1000,I=iiA(G.scope);p("tengu_oauth_token_refresh_success",{});let W=await fj1(Z);if(R1().oauthAccount){let K={};if(W.displayName!==void 0)K.displayName=W.displayName;if(typeof W.hasExtraUsageEnabled==="boolean")K.hasExtraUsageEnabled=W.hasExtraUsageEnabled;if(Object.keys(K).length>0)h0((V)=>({...V,oauthAccount:V.oauthAccount?{...V.oauthAccount,...K}:V.oauthAccount}))}return{accessToken:Z,refreshToken:Y,expiresAt:X,scopes:I,subscriptionType:W.subscriptionType,rateLimitTier:W.rateLimitTier}}catch(B){throw p("tengu_oauth_token_refresh_failure",{error:B.message}),B}}async function uFQ(A){let Q=await fQ.get(b9().ROLES_URL,{headers:{Authorization:`Bearer ${A}`}});if(Q.status!==200)throw Error(`Failed to fetch user roles: ${Q.statusText}`);let B=Q.data;if(!R1().oauthAccount)throw Error("OAuth account information not found in config");h0((Z)=>({...Z,oauthAccount:Z.oauthAccount?{...Z.oauthAccount,organizationRole:B.organization_role,workspaceRole:B.workspace_role,organizationName:B.organization_name}:Z.oauthAccount})),p("tengu_oauth_roles_stored",{org_role:B.organization_role})}async function mFQ(A){try{let Q=await fQ.post(b9().API_KEY_URL,null,{headers:{Authorization:`Bearer ${A}`}}),B=Q.data?.raw_key;if(B)return await pFQ(B),p("tengu_oauth_api_key",{status:"success",statusCode:Q.status}),B;return null}catch(Q){throw p("tengu_oauth_api_key",{status:"failure",error:Q instanceof Error?Q.message:String(Q)}),Q}}function Fg(A){if(A===null)return!1;let Q=300000;return Date.now()+Q>=A}async function fj1(A){let Q=await pGA(A),B=Q?.organization?.organization_type,G=null;switch(B){case"claude_max":G="max";break;case"claude_pro":G="pro";break;case"claude_enterprise":G="enterprise";break;case"claude_team":G="team";break;default:G=null;break}let Z={subscriptionType:G,rateLimitTier:Q?.organization?.rate_limit_tier??null,hasExtraUsageEnabled:Q?.organization?.has_extra_usage_enabled??null};if(Q?.account?.display_name)Z.displayName=Q.account.display_name;return p("tengu_oauth_profile_fetch_success",{}),Z}async function sy(){let Q=R1().oauthAccount?.organizationUuid;if(Q)return Q;let B=f4()?.accessToken;if(B===void 0)return null;let Z=(await pGA(B))?.organization?.uuid;if(!Z)return null;return Z}async function dFQ(){if(R1().oauthAccount||!OB())return!1;let Q=f4();if(Q?.accessToken){let B=await pGA(Q.accessToken);if(B)return hj1({accountUuid:B.account.uuid,emailAddress:B.account.email,organizationUuid:B.organization.uuid,displayName:B.account.display_name||void 0,hasExtraUsageEnabled:B.organization.has_extra_usage_enabled??!1,billingType:B.organization.billing_type??void 0}),!0}return!1}function hj1({accountUuid:A,emailAddress:Q,organizationUuid:B,displayName:G,hasExtraUsageEnabled:Z,billingType:Y}){let J={accountUuid:A,emailAddress:Q,organizationUuid:B,hasExtraUsageEnabled:Z,billingType:Y};if(G)J.displayName=G;h0((X)=>{if(X.oauthAccount?.accountUuid===J.accountUuid&&X.oauthAccount?.emailAddress===J.emailAddress&&X.oauthAccount?.organizationUuid===J.organizationUuid&&X.oauthAccount?.displayName===J.displayName&&X.oauthAccount?.hasExtraUsageEnabled===J.hasExtraUsageEnabled)return X;return{...X,oauthAccount:J}})}var mw=w(()=>{f5();ZX();Z0();IQ();eB();FqA()});function lFQ(){return null}function iFQ(A){let Q=lFQ();if(!Q)return A;let B=new globalThis.Headers(A);return Object.entries(Q).forEach(([G,Z])=>{if(Z!==void 0)B.set(G,Z)}),B}function cGA(){return niA&&!1}function nFQ(){return null}function aFQ(){return niA&&cFQ!==null&&!1}var qh4,niA=!1,cFQ=null,Nh4="max";var aiA=w(()=>{IQ();qh4={}});function a4(){return i1(process.env.CLAUDE_CODE_USE_BEDROCK)?"bedrock":i1(process.env.CLAUDE_CODE_USE_VERTEX)?"vertex":i1(process.env.CLAUDE_CODE_USE_FOUNDRY)?"foundry":"firstParty"}function KT(){return a4()}function oFQ(){let A=process.env.ANTHROPIC_BASE_URL;if(!A)return!0;try{let Q=new URL(A).host;return["api.anthropic.com"].includes(Q)}catch{return!1}}var jD=w(()=>{bQ()});var Xz=U((rFQ)=>{Object.defineProperty(rFQ,"__esModule",{value:!0});rFQ.Log=rFQ.LogLevel=void 0;var wh4=" DEBUG ",Lh4="  INFO ",Oh4="  WARN ",Mh4=" ERROR ";function oiA(A){return A.unshift("[Statsig]"),A}rFQ.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class R1A{static info(...A){if(R1A.level>=rFQ.LogLevel.Info)console.info(Lh4,...oiA(A))}static debug(...A){if(R1A.level>=rFQ.LogLevel.Debug)console.debug(wh4,...oiA(A))}static warn(...A){if(R1A.level>=rFQ.LogLevel.Warn)console.warn(Oh4,...oiA(A))}static error(...A){if(R1A.level>=rFQ.LogLevel.Error)console.error(Mh4,...oiA(A))}}rFQ.Log=R1A;R1A.level=rFQ.LogLevel.Warn});var _1A=U((QHQ)=>{var gj1,uj1,mj1;Object.defineProperty(QHQ,"__esModule",{value:!0});QHQ._getInstance=QHQ._getStatsigGlobalFlag=QHQ._getStatsigGlobal=void 0;var Rh4=Xz(),_h4=()=>{return __STATSIG__?__STATSIG__:riA};QHQ._getStatsigGlobal=_h4;var jh4=(A)=>{return QHQ._getStatsigGlobal()[A]};QHQ._getStatsigGlobalFlag=jh4;var Th4=(A)=>{let Q=QHQ._getStatsigGlobal();if(!A){if(Q.instances&&Object.keys(Q.instances).length>1)Rh4.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key.");return Q.firstInstance}return Q.instances&&Q.instances[A]};QHQ._getInstance=Th4;var iGA="__STATSIG__",tFQ=typeof window<"u"?window:{},eFQ=typeof global<"u"?global:{},AHQ=typeof globalThis<"u"?globalThis:{},riA=(mj1=(uj1=(gj1=tFQ[iGA])!==null&&gj1!==void 0?gj1:eFQ[iGA])!==null&&uj1!==void 0?uj1:AHQ[iGA])!==null&&mj1!==void 0?mj1:{instance:QHQ._getInstance};tFQ[iGA]=riA;eFQ[iGA]=riA;AHQ[iGA]=riA});var tiA=U((BHQ)=>{Object.defineProperty(BHQ,"__esModule",{value:!0});BHQ.Diagnostics=void 0;var siA=new Map,cj1="start",lj1="end",Sh4="statsig::diagnostics";BHQ.Diagnostics={_getMarkers:(A)=>{return siA.get(A)},_markInitOverallStart:(A)=>{aGA(A,nGA({},cj1,"overall"))},_markInitOverallEnd:(A,Q,B)=>{aGA(A,nGA({success:Q,error:Q?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:B},lj1,"overall"))},_markInitNetworkReqStart:(A,Q)=>{aGA(A,nGA(Q,cj1,"initialize","network_request"))},_markInitNetworkReqEnd:(A,Q)=>{aGA(A,nGA(Q,lj1,"initialize","network_request"))},_markInitProcessStart:(A)=>{aGA(A,nGA({},cj1,"initialize","process"))},_markInitProcessEnd:(A,Q)=>{aGA(A,nGA(Q,lj1,"initialize","process"))},_clearMarkers:(A)=>{siA.delete(A)},_formatError(A){if(!(A&&typeof A==="object"))return;return{code:ij1(A,"code"),name:ij1(A,"name"),message:ij1(A,"message")}},_getDiagnosticsData(A,Q,B,G){var Z;return{success:(A===null||A===void 0?void 0:A.ok)===!0,statusCode:A===null||A===void 0?void 0:A.status,sdkRegion:(Z=A===null||A===void 0?void 0:A.headers)===null||Z===void 0?void 0:Z.get("x-statsig-region"),isDelta:B.includes('"is_delta":true')===!0?!0:void 0,attempt:Q,error:BHQ.Diagnostics._formatError(G)}},_enqueueDiagnosticsEvent(A,Q,B,G){let Z=BHQ.Diagnostics._getMarkers(B);if(Z==null||Z.length<=0)return-1;let Y=Z[Z.length-1].timestamp-Z[0].timestamp;BHQ.Diagnostics._clearMarkers(B);let J=xh4(A,{context:"initialize",markers:Z.slice(),statsigOptions:G});return Q.enqueue(J),Y}};function nGA(A,Q,B,G){return Object.assign({key:B,action:Q,step:G,timestamp:Date.now()},A)}function xh4(A,Q){return{eventName:Sh4,user:A,value:null,metadata:Q,time:Date.now()}}function aGA(A,Q){var B;let G=(B=siA.get(A))!==null&&B!==void 0?B:[];G.push(Q),siA.set(A,G)}function ij1(A,Q){if(Q in A)return A[Q];return}});var eiA=U((GHQ)=>{Object.defineProperty(GHQ,"__esModule",{value:!0});GHQ._isTypeMatch=GHQ._typeOf=void 0;function yh4(A){return Array.isArray(A)?"array":typeof A}GHQ._typeOf=yh4;function vh4(A,Q){let B=(G)=>Array.isArray(G)?"array":typeof G;return B(A)===B(Q)}GHQ._isTypeMatch=vh4});var oGA=U((YHQ)=>{Object.defineProperty(YHQ,"__esModule",{value:!0});YHQ._getSortedObject=YHQ._DJB2Object=YHQ._DJB2=void 0;var bh4=eiA(),fh4=(A)=>{let Q=0;for(let B=0;B<A.length;B++){let G=A.charCodeAt(B);Q=(Q<<5)-Q+G,Q=Q&Q}return String(Q>>>0)};YHQ._DJB2=fh4;var hh4=(A,Q)=>{return YHQ._DJB2(JSON.stringify(YHQ._getSortedObject(A,Q)))};YHQ._DJB2Object=hh4;var gh4=(A,Q)=>{if(A==null)return null;let B=Object.keys(A).sort(),G={};return B.forEach((Z)=>{let Y=A[Z];if(Q===0||(0,bh4._typeOf)(Y)!=="object"){G[Z]=Y;return}G[Z]=YHQ._getSortedObject(Y,Q!=null?Q-1:Q)}),G};YHQ._getSortedObject=gh4});var EqA=U((WHQ)=>{Object.defineProperty(WHQ,"__esModule",{value:!0});WHQ._getStorageKey=WHQ._getUserStorageKey=void 0;var XHQ=oGA();function IHQ(A,Q,B){var G;if(B)return B(A,Q);let Z=Q&&Q.customIDs?Q.customIDs:{},Y=[`uid:${(G=Q===null||Q===void 0?void 0:Q.userID)!==null&&G!==void 0?G:""}`,`cids:${Object.keys(Z).sort((J,X)=>J.localeCompare(X)).map((J)=>`${J}-${Z[J]}`).join(",")}`,`k:${A}`];return(0,XHQ._DJB2)(Y.join("|"))}WHQ._getUserStorageKey=IHQ;function mh4(A,Q,B){if(Q)return IHQ(A,Q,B);return(0,XHQ._DJB2)(`k:${A}`)}WHQ._getStorageKey=mh4});var zqA=U((KHQ)=>{Object.defineProperty(KHQ,"__esModule",{value:!0});KHQ.NetworkParam=KHQ.NetworkDefault=KHQ.Endpoint=void 0;KHQ.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"};KHQ.NetworkDefault={[KHQ.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[KHQ.Endpoint._initialize]:"https://featureassets.org/v1",[KHQ.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"};KHQ.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}});var j1A=U((FHQ)=>{Object.defineProperty(FHQ,"__esModule",{value:!0});FHQ._getCurrentPageUrlSafe=FHQ._addDocumentEventListenerSafe=FHQ._addWindowEventListenerSafe=FHQ._isServerEnv=FHQ._getDocumentSafe=FHQ._getWindowSafe=void 0;var ch4=()=>{return typeof window<"u"?window:null};FHQ._getWindowSafe=ch4;var lh4=()=>{var A;let Q=FHQ._getWindowSafe();return(A=Q===null||Q===void 0?void 0:Q.document)!==null&&A!==void 0?A:null};FHQ._getDocumentSafe=lh4;var ih4=()=>{if(FHQ._getDocumentSafe()!==null)return!1;let A=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return typeof EdgeRuntime==="string"||A};FHQ._isServerEnv=ih4;var nh4=(A,Q)=>{let B=FHQ._getWindowSafe();if(typeof(B===null||B===void 0?void 0:B.addEventListener)==="function")B.addEventListener(A,Q)};FHQ._addWindowEventListenerSafe=nh4;var ah4=(A,Q)=>{let B=FHQ._getDocumentSafe();if(typeof(B===null||B===void 0?void 0:B.addEventListener)==="function")B.addEventListener(A,Q)};FHQ._addDocumentEventListenerSafe=ah4;var oh4=()=>{var A;try{return(A=FHQ._getWindowSafe())===null||A===void 0?void 0:A.location.href.split(/[?#]/)[0]}catch(Q){return}};FHQ._getCurrentPageUrlSafe=oh4});var oj1=U(($HQ)=>{Object.defineProperty($HQ,"__esModule",{value:!0});$HQ._createLayerParameterExposure=$HQ._createConfigExposure=$HQ._mapExposures=$HQ._createGateExposure=$HQ._isExposureEvent=void 0;var EHQ="statsig::config_exposure",zHQ="statsig::gate_exposure",CHQ="statsig::layer_exposure",aj1=(A,Q,B,G,Z)=>{if(B.bootstrapMetadata)G.bootstrapMetadata=B.bootstrapMetadata;return{eventName:A,user:Q,value:null,metadata:Gg4(B,G),secondaryExposures:Z,time:Date.now()}},eh4=({eventName:A})=>{return A===zHQ||A===EHQ||A===CHQ};$HQ._isExposureEvent=eh4;var Ag4=(A,Q,B)=>{var G,Z,Y;let J={gate:Q.name,gateValue:String(Q.value),ruleID:Q.ruleID};if(((G=Q.__evaluation)===null||G===void 0?void 0:G.version)!=null)J.configVersion=Q.__evaluation.version;return aj1(zHQ,A,Q.details,J,GnA((Y=(Z=Q.__evaluation)===null||Z===void 0?void 0:Z.secondary_exposures)!==null&&Y!==void 0?Y:[],B))};$HQ._createGateExposure=Ag4;function GnA(A,Q){return A.map((B)=>{if(typeof B==="string")return(Q!==null&&Q!==void 0?Q:{})[B];return B}).filter((B)=>B!=null)}$HQ._mapExposures=GnA;var Qg4=(A,Q,B)=>{var G,Z,Y,J;let X={config:Q.name,ruleID:Q.ruleID};if(((G=Q.__evaluation)===null||G===void 0?void 0:G.version)!=null)X.configVersion=Q.__evaluation.version;if(((Z=Q.__evaluation)===null||Z===void 0?void 0:Z.passed)!=null)X.rulePassed=String(Q.__evaluation.passed);return aj1(EHQ,A,Q.details,X,GnA((J=(Y=Q.__evaluation)===null||Y===void 0?void 0:Y.secondary_exposures)!==null&&J!==void 0?J:[],B))};$HQ._createConfigExposure=Qg4;var Bg4=(A,Q,B,G)=>{var Z,Y,J,X;let I=Q.__evaluation,W=((Z=I===null||I===void 0?void 0:I.explicit_parameters)===null||Z===void 0?void 0:Z.includes(B))===!0,D="",K=(Y=I===null||I===void 0?void 0:I.undelegated_secondary_exposures)!==null&&Y!==void 0?Y:[];if(W)D=(J=I.allocated_experiment_name)!==null&&J!==void 0?J:"",K=I.secondary_exposures;let V={config:Q.name,parameterName:B,ruleID:Q.ruleID,allocatedExperiment:D,isExplicitParameter:String(W)};if(((X=Q.__evaluation)===null||X===void 0?void 0:X.version)!=null)V.configVersion=Q.__evaluation.version;return aj1(CHQ,A,Q.details,V,GnA(K,G))};$HQ._createLayerParameterExposure=Bg4;var Gg4=(A,Q)=>{if(Q.reason=A.reason,A.lcut)Q.lcut=String(A.lcut);if(A.receivedAt)Q.receivedAt=String(A.receivedAt);return Q}});var Hg=U((qHQ)=>{Object.defineProperty(qHQ,"__esModule",{value:!0});qHQ._setObjectInStorage=qHQ._getObjectFromStorage=qHQ.Storage=void 0;var Ig4=Xz(),Wg4=j1A(),CqA={},sj1={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:(A)=>CqA[A]?CqA[A]:null,setItem:(A,Q)=>{CqA[A]=Q},removeItem:(A)=>{delete CqA[A]},getAllKeys:()=>Object.keys(CqA)},ZnA=null;try{let A=(0,Wg4._getWindowSafe)();if(A&&A.localStorage&&typeof A.localStorage.getItem==="function")ZnA={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:(Q)=>A.localStorage.getItem(Q),setItem:(Q,B)=>A.localStorage.setItem(Q,B),removeItem:(Q)=>A.localStorage.removeItem(Q),getAllKeys:()=>Object.keys(A.localStorage)}}catch(A){Ig4.Log.warn("Failed to setup localStorageProvider.")}var rj1=ZnA!==null&&ZnA!==void 0?ZnA:sj1,ty=rj1;function Dg4(A){try{return A()}catch(Q){if(Q instanceof Error&&Q.name==="SecurityError")return qHQ.Storage._setProvider(sj1),null;throw Q}}qHQ.Storage={isReady:()=>ty.isReady(),isReadyResolver:()=>ty.isReadyResolver(),getProviderName:()=>ty.getProviderName(),getItem:(A)=>Dg4(()=>ty.getItem(A)),setItem:(A,Q)=>ty.setItem(A,Q),removeItem:(A)=>ty.removeItem(A),getAllKeys:()=>ty.getAllKeys(),_setProvider:(A)=>{rj1=A,ty=A},_setDisabled:(A)=>{if(A)ty=sj1;else ty=rj1}};function Kg4(A){let Q=qHQ.Storage.getItem(A);return JSON.parse(Q!==null&&Q!==void 0?Q:"null")}qHQ._getObjectFromStorage=Kg4;function Vg4(A,Q){qHQ.Storage.setItem(A,JSON.stringify(Q))}qHQ._setObjectInStorage=Vg4});var tj1=U((LHQ)=>{Object.defineProperty(LHQ,"__esModule",{value:!0});LHQ.UrlConfiguration=void 0;var JnA=zqA(),Hg4={[JnA.Endpoint._initialize]:"i",[JnA.Endpoint._rgstr]:"e",[JnA.Endpoint._download_config_specs]:"d"};class wHQ{constructor(A,Q,B,G){if(this.customUrl=null,this.fallbackUrls=null,this.endpoint=A,this.endpointDnsKey=Hg4[A],Q)this.customUrl=Q;if(!Q&&B)this.customUrl=B.endsWith("/")?`${B}${A}`:`${B}/${A}`;if(G)this.fallbackUrls=G;let Z=JnA.NetworkDefault[A];this.defaultUrl=`${Z}/${A}`}getUrl(){var A;return(A=this.customUrl)!==null&&A!==void 0?A:this.defaultUrl}}LHQ.UrlConfiguration=wHQ});var WnA=U((RHQ)=>{Object.defineProperty(RHQ,"__esModule",{value:!0});RHQ._notifyVisibilityChanged=RHQ._subscribeToVisiblityChanged=RHQ._isUnloading=RHQ._isCurrentlyVisible=void 0;var XnA=j1A(),InA="foreground",AT1="background",MHQ=[],ej1=InA,QT1=!1,Eg4=()=>{return ej1===InA};RHQ._isCurrentlyVisible=Eg4;var zg4=()=>QT1;RHQ._isUnloading=zg4;var Cg4=(A)=>{MHQ.unshift(A)};RHQ._subscribeToVisiblityChanged=Cg4;var $g4=(A)=>{if(A===ej1)return;ej1=A,MHQ.forEach((Q)=>Q(A))};RHQ._notifyVisibilityChanged=$g4;(0,XnA._addWindowEventListenerSafe)("focus",()=>{QT1=!1,RHQ._notifyVisibilityChanged(InA)});(0,XnA._addWindowEventListenerSafe)("blur",()=>RHQ._notifyVisibilityChanged(AT1));(0,XnA._addWindowEventListenerSafe)("beforeunload",()=>{QT1=!0,RHQ._notifyVisibilityChanged(AT1)});(0,XnA._addDocumentEventListenerSafe)("visibilitychange",()=>{RHQ._notifyVisibilityChanged(document.visibilityState==="visible"?InA:AT1)})});var GT1=U((eGA)=>{var sGA=eGA&&eGA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(eGA,"__esModule",{value:!0});eGA.EventLogger=void 0;var wg4=EqA(),Lg4=oGA(),$qA=Xz(),_HQ=zqA(),BT1=j1A(),Og4=oj1(),tGA=Hg(),Mg4=tj1(),jHQ=WnA(),Rg4=100,_g4=1e4,jg4=1000,Tg4=600000,Pg4=500,THQ=200,UqA={},DnA={Startup:"startup",GainedFocus:"gained_focus"};class T1A{static _safeFlushAndForget(A){var Q;(Q=UqA[A])===null||Q===void 0||Q.flush().catch(()=>{})}static _safeRetryFailedLogs(A){var Q;(Q=UqA[A])===null||Q===void 0||Q._retryFailedLogs(DnA.GainedFocus)}constructor(A,Q,B,G){var Z;this._sdkKey=A,this._emitter=Q,this._network=B,this._options=G,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._isLoggingDisabled=(G===null||G===void 0?void 0:G.disableLogging)===!0,this._maxQueueSize=(Z=G===null||G===void 0?void 0:G.loggingBufferMaxSize)!==null&&Z!==void 0?Z:Rg4;let Y=G===null||G===void 0?void 0:G.networkConfig;this._logEventUrlConfig=new Mg4.UrlConfiguration(_HQ.Endpoint._rgstr,Y===null||Y===void 0?void 0:Y.logEventUrl,Y===null||Y===void 0?void 0:Y.api,Y===null||Y===void 0?void 0:Y.logEventFallbackUrls)}setLoggingDisabled(A){this._isLoggingDisabled=A}enqueue(A){if(!this._shouldLogEvent(A))return;if(this._normalizeAndAppendEvent(A),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize)T1A._safeFlushAndForget(this._sdkKey)}incrementNonExposureCount(A){var Q;let B=(Q=this._nonExposedChecks[A])!==null&&Q!==void 0?Q:0;this._nonExposedChecks[A]=B+1}reset(){this._lastExposureTimeMap={}}start(){if((0,BT1._isServerEnv)())return;UqA[this._sdkKey]=this,(0,jHQ._subscribeToVisiblityChanged)((A)=>{if(A==="background")T1A._safeFlushAndForget(this._sdkKey);else if(A==="foreground")T1A._safeRetryFailedLogs(this._sdkKey)}),this._retryFailedLogs(DnA.Startup),this._startBackgroundFlushInterval()}stop(){return sGA(this,void 0,void 0,function*(){if(this._flushIntervalId)clearInterval(this._flushIntervalId),this._flushIntervalId=null;delete UqA[this._sdkKey],yield this.flush()})}flush(){return sGA(this,void 0,void 0,function*(){if(this._appendAndResetNonExposedChecks(),this._queue.length===0)return;let A=this._queue;this._queue=[],yield this._sendEvents(A)})}_quickFlushIfNeeded(){if(this._hasRunQuickFlush)return;if(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>THQ)return;setTimeout(()=>T1A._safeFlushAndForget(this._sdkKey),THQ)}_shouldLogEvent(A){if((0,BT1._isServerEnv)())return!1;if(!(0,Og4._isExposureEvent)(A))return!0;let Q=A.user?A.user:{statsigEnvironment:void 0},B=(0,wg4._getUserStorageKey)(this._sdkKey,Q),G=A.metadata?A.metadata:{},Z=[A.eventName,B,G.gate,G.config,G.ruleID,G.allocatedExperiment,G.parameterName,String(G.isExplicitParameter),G.reason].join("|"),Y=this._lastExposureTimeMap[Z],J=Date.now();if(Y&&J-Y<Tg4)return!1;if(Object.keys(this._lastExposureTimeMap).length>jg4)this._lastExposureTimeMap={};return this._lastExposureTimeMap[Z]=J,!0}_sendEvents(A){var Q,B;return sGA(this,void 0,void 0,function*(){if(this._isLoggingDisabled)return this._saveFailedLogsToStorage(A),!1;try{let Z=(0,jHQ._isUnloading)()&&this._network.isBeaconSupported()&&((B=(Q=this._options)===null||Q===void 0?void 0:Q.networkConfig)===null||B===void 0?void 0:B.networkOverrideFunc)==null;if(this._emitter({name:"pre_logs_flushed",events:A}),(Z?yield this._sendEventsViaBeacon(A):yield this._sendEventsViaPost(A)).success)return this._emitter({name:"logs_flushed",events:A}),!0;else return $qA.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(A),!1}catch(G){return $qA.Log.warn("Failed to flush events."),!1}})}_sendEventsViaPost(A){var Q;return sGA(this,void 0,void 0,function*(){let B=yield this._network.post(this._getRequestData(A)),G=(Q=B===null||B===void 0?void 0:B.code)!==null&&Q!==void 0?Q:-1;return{success:G>=200&&G<300}})}_sendEventsViaBeacon(A){return sGA(this,void 0,void 0,function*(){return{success:yield this._network.beacon(this._getRequestData(A))}})}_getRequestData(A){return{sdkKey:this._sdkKey,data:{events:A},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[_HQ.NetworkParam.EventCount]:String(A.length)}}}_saveFailedLogsToStorage(A){while(A.length>Pg4)A.shift();let Q=this._getStorageKey();try{(0,tGA._setObjectInStorage)(Q,A)}catch(B){$qA.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(A){let Q=this._getStorageKey();(()=>sGA(this,void 0,void 0,function*(){if(!tGA.Storage.isReady())yield tGA.Storage.isReadyResolver();let B=(0,tGA._getObjectFromStorage)(Q);if(!B)return;if(A===DnA.Startup)tGA.Storage.removeItem(Q);if((yield this._sendEvents(B))&&A===DnA.GainedFocus)tGA.Storage.removeItem(Q)}))().catch(()=>{$qA.Log.warn("Failed to flush stored logs")})}_getStorageKey(){return`statsig.failed_logs.${(0,Lg4._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(A){if(A.user)A.user=Object.assign({},A.user),delete A.user.privateAttributes;let Q={},B=this._getCurrentPageUrl();if(B)Q.statsigMetadata={currentPage:B};let G=Object.assign(Object.assign({},A),Q);$qA.Log.debug("Enqueued Event:",G),this._queue.push(G)}_appendAndResetNonExposedChecks(){if(Object.keys(this._nonExposedChecks).length===0)return;this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={}}_getCurrentPageUrl(){var A;if(((A=this._options)===null||A===void 0?void 0:A.includeCurrentPageUrlWithEvents)===!1)return;return(0,BT1._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var A,Q;let B=(Q=(A=this._options)===null||A===void 0?void 0:A.loggingIntervalMs)!==null&&Q!==void 0?Q:_g4,G=setInterval(()=>{let Z=UqA[this._sdkKey];if(!Z||Z._flushIntervalId!==G)clearInterval(G);else T1A._safeFlushAndForget(this._sdkKey)},B);this._flushIntervalId=G}}eGA.EventLogger=T1A});var qqA=U((PHQ)=>{Object.defineProperty(PHQ,"__esModule",{value:!0});PHQ.StatsigMetadataProvider=PHQ.SDK_VERSION=void 0;PHQ.SDK_VERSION="3.12.1";var ZT1={sdkVersion:PHQ.SDK_VERSION,sdkType:"js-mono"};PHQ.StatsigMetadataProvider={get:()=>ZT1,add:(A)=>{ZT1=Object.assign(Object.assign({},ZT1),A)}}});var vHQ=U((yHQ)=>{Object.defineProperty(yHQ,"__esModule",{value:!0})});var KnA=U((kHQ)=>{Object.defineProperty(kHQ,"__esModule",{value:!0});kHQ.getUUID=void 0;function Sg4(){if(typeof crypto<"u"&&typeof crypto.randomUUID==="function")return crypto.randomUUID();let A=new Date().getTime(),Q=typeof performance<"u"&&performance.now&&performance.now()*1000||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(Math.random()*4)]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,(G)=>{let Z=Math.random()*16;if(A>0)Z=(A+Z)%16|0,A=Math.floor(A/16);else Z=(Q+Z)%16|0,Q=Math.floor(Q/16);return(G==="x"?Z:Z&7|8).toString(16)})}kHQ.getUUID=Sg4});var FnA=U((uHQ)=>{Object.defineProperty(uHQ,"__esModule",{value:!0});uHQ.StableID=void 0;var xg4=EqA(),yg4=Xz(),hHQ=Hg(),vg4=KnA(),VnA={};uHQ.StableID={get:(A)=>{if(VnA[A]==null){let Q=kg4(A);if(Q==null)Q=(0,vg4.getUUID)(),fHQ(Q,A);VnA[A]=Q}return VnA[A]},setOverride:(A,Q)=>{VnA[Q]=A,fHQ(A,Q)}};function gHQ(A){return`statsig.stable_id.${(0,xg4._getStorageKey)(A)}`}function fHQ(A,Q){let B=gHQ(Q);try{(0,hHQ._setObjectInStorage)(B,A)}catch(G){yg4.Log.warn("Failed to save StableID")}}function kg4(A){let Q=gHQ(A);return(0,hHQ._getObjectFromStorage)(Q)}});var YT1=U((dHQ)=>{Object.defineProperty(dHQ,"__esModule",{value:!0});dHQ._getFullUserHash=dHQ._normalizeUser=void 0;var bg4=oGA(),fg4=Xz();function hg4(A,Q,B){try{let G=JSON.parse(JSON.stringify(A));if(Q!=null&&Q.environment!=null)G.statsigEnvironment=Q.environment;else if(B!=null)G.statsigEnvironment={tier:B};return G}catch(G){return fg4.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}}dHQ._normalizeUser=hg4;function gg4(A){return A?(0,bg4._DJB2Object)(A):null}dHQ._getFullUserHash=gg4});var JT1=U((cHQ)=>{Object.defineProperty(cHQ,"__esModule",{value:!0});cHQ._typedJsonParse=void 0;var mg4=Xz();function dg4(A,Q,B){try{let G=JSON.parse(A);if(G&&typeof G==="object"&&Q in G)return G}catch(G){}return mg4.Log.error(`Failed to parse ${B}`),null}cHQ._typedJsonParse=dg4});var sHQ=U((Ii)=>{var XT1=Ii&&Ii.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(Ii,"__esModule",{value:!0});Ii._makeDataAdapterResult=Ii.DataAdapterCore=void 0;var HnA=Xz(),pg4=FnA(),EnA=YT1(),Xi=Hg(),iHQ=JT1(),nHQ=10;class aHQ{constructor(A,Q){this._adapterName=A,this._cacheSuffix=Q,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${Q}`,this._inMemoryCache=new oHQ}attach(A,Q){this._sdkKey=A,this._options=Q}getDataSync(A){let Q=A&&(0,EnA._normalizeUser)(A,this._options),B=this._getCacheKey(Q),G=this._inMemoryCache.get(B,Q);if(G)return G;let Z=this._loadFromCache(B);if(Z)return this._inMemoryCache.add(B,Z),this._inMemoryCache.get(B,Q);return null}setData(A,Q){let B=Q&&(0,EnA._normalizeUser)(Q,this._options),G=this._getCacheKey(B);this._inMemoryCache.add(G,znA("Bootstrap",A,null,B))}_getDataAsyncImpl(A,Q,B){return XT1(this,void 0,void 0,function*(){if(!Xi.Storage.isReady())yield Xi.Storage.isReadyResolver();let G=A!==null&&A!==void 0?A:this.getDataSync(Q),Z=[this._fetchAndPrepFromNetwork(G,Q,B)];if(B===null||B===void 0?void 0:B.timeoutMs)Z.push(new Promise((Y)=>setTimeout(Y,B.timeoutMs)).then(()=>{return HnA.Log.debug("Fetching latest value timed out"),null}));return yield Promise.race(Z)})}_prefetchDataImpl(A,Q){return XT1(this,void 0,void 0,function*(){let B=A&&(0,EnA._normalizeUser)(A,this._options),G=this._getCacheKey(B),Z=yield this._getDataAsyncImpl(null,B,Q);if(Z)this._inMemoryCache.add(G,Object.assign(Object.assign({},Z),{source:"Prefetch"}))})}_fetchAndPrepFromNetwork(A,Q,B){var G;return XT1(this,void 0,void 0,function*(){let Z=(G=A===null||A===void 0?void 0:A.data)!==null&&G!==void 0?G:null,Y=A!=null&&this._isCachedResultValidFor204(A,Q),J=yield this._fetchFromNetwork(Z,Q,B,Y);if(!J)return HnA.Log.debug("No response returned for latest value"),null;let X=(0,iHQ._typedJsonParse)(J,"has_updates","Response"),I=this._getSdkKey(),W=pg4.StableID.get(I),D=null;if((X===null||X===void 0?void 0:X.has_updates)===!0)D=znA("Network",J,W,Q);else if(Z&&(X===null||X===void 0?void 0:X.has_updates)===!1)D=znA("NetworkNotModified",Z,W,Q);else return null;let K=this._getCacheKey(Q);return this._inMemoryCache.add(K,D),this._writeToCache(K,D),D})}_getSdkKey(){if(this._sdkKey!=null)return this._sdkKey;return HnA.Log.error(`${this._adapterName} is not attached to a Client`),""}_loadFromCache(A){var Q;let B=(Q=Xi.Storage.getItem)===null||Q===void 0?void 0:Q.call(Xi.Storage,A);if(B==null)return null;let G=(0,iHQ._typedJsonParse)(B,"source","Cached Result");return G?Object.assign(Object.assign({},G),{source:"Cache"}):null}_writeToCache(A,Q){Xi.Storage.setItem(A,JSON.stringify(Q)),this._runLocalStorageCacheEviction(A)}_runLocalStorageCacheEviction(A){var Q;let B=(Q=(0,Xi._getObjectFromStorage)(this._lastModifiedStoreKey))!==null&&Q!==void 0?Q:{};B[A]=Date.now();let G=rHQ(B,nHQ);if(G)delete B[G],Xi.Storage.removeItem(G);(0,Xi._setObjectInStorage)(this._lastModifiedStoreKey,B)}}Ii.DataAdapterCore=aHQ;function znA(A,Q,B,G){return{source:A,data:Q,receivedAt:Date.now(),stableID:B,fullUserHash:(0,EnA._getFullUserHash)(G)}}Ii._makeDataAdapterResult=znA;class oHQ{constructor(){this._data={}}get(A,Q){var B;let G=this._data[A],Z=G===null||G===void 0?void 0:G.stableID,Y=(B=Q===null||Q===void 0?void 0:Q.customIDs)===null||B===void 0?void 0:B.stableID;if(Y&&Z&&Y!==Z)return HnA.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null;return G}add(A,Q){let B=rHQ(this._data,nHQ-1);if(B)delete this._data[B];this._data[A]=Q}merge(A){this._data=Object.assign(Object.assign({},this._data),A)}}function rHQ(A,Q){let B=Object.keys(A);if(B.length<=Q)return null;return B.reduce((G,Z)=>{let Y=A[G],J=A[Z];if(typeof Y==="object"&&typeof J==="object")return J.receivedAt<Y.receivedAt?Z:G;return J<Y?Z:G})}});var eHQ=U((tHQ)=>{Object.defineProperty(tHQ,"__esModule",{value:!0})});var CnA=U((QEQ)=>{Object.defineProperty(QEQ,"__esModule",{value:!0});QEQ.SDKType=void 0;var AEQ={},AZA;QEQ.SDKType={_get:(A)=>{var Q;return((Q=AEQ[A])!==null&&Q!==void 0?Q:"js-mono")+(AZA!==null&&AZA!==void 0?AZA:"")},_setClientType(A,Q){AEQ[A]=Q},_setBindingType(A){if(!AZA||AZA==="-react")AZA="-"+A}}});var IT1=U((Eg)=>{var cg4=Eg&&Eg.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(Eg,"__esModule",{value:!0});Eg.ErrorBoundary=Eg.EXCEPTION_ENDPOINT=void 0;var lg4=Xz(),ig4=CnA(),ng4=qqA();Eg.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";var ZEQ="[Statsig] UnknownError";class YEQ{constructor(A,Q,B,G){this._sdkKey=A,this._options=Q,this._emitter=B,this._lastSeenError=G,this._seen=new Set}wrap(A){try{let Q=A;og4(Q).forEach((B)=>{let G=Q[B];if("$EB"in G)return;Q[B]=(...Z)=>{return this._capture(B,()=>G.apply(A,Z))},Q[B].$EB=!0})}catch(Q){this._onError("eb:wrap",Q)}}logError(A,Q){this._onError(A,Q)}getLastSeenErrorAndReset(){let A=this._lastSeenError;return this._lastSeenError=void 0,A!==null&&A!==void 0?A:null}attachErrorIfNoneExists(A){if(this._lastSeenError)return;this._lastSeenError=GEQ(A)}_capture(A,Q){try{let B=Q();if(B&&B instanceof Promise)return B.catch((G)=>this._onError(A,G));return B}catch(B){return this._onError(A,B),null}}_onError(A,Q){try{lg4.Log.warn(`Caught error in ${A}`,{error:Q}),(()=>cg4(this,void 0,void 0,function*(){var G,Z,Y,J,X,I,W;let D=Q?Q:Error(ZEQ),K=D instanceof Error,V=K?D.name:"No Name",F=GEQ(D);if(this._lastSeenError=F,this._seen.has(V))return;if(this._seen.add(V),(Z=(G=this._options)===null||G===void 0?void 0:G.networkConfig)===null||Z===void 0?void 0:Z.preventAllNetworkTraffic){(Y=this._emitter)===null||Y===void 0||Y.call(this,{name:"error",error:Q,tag:A});return}let H=ig4.SDKType._get(this._sdkKey),E=ng4.StatsigMetadataProvider.get(),z=K?D.stack:ag4(D),C=JSON.stringify(Object.assign({tag:A,exception:V,info:z},Object.assign(Object.assign({},E),{sdkType:H})));yield((I=(X=(J=this._options)===null||J===void 0?void 0:J.networkConfig)===null||X===void 0?void 0:X.networkOverrideFunc)!==null&&I!==void 0?I:fetch)(Eg.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(H),"STATSIG-SDK-VERSION":String(E.sdkVersion),"Content-Type":"application/json"},body:C}),(W=this._emitter)===null||W===void 0||W.call(this,{name:"error",error:Q,tag:A})}))().then(()=>{}).catch(()=>{})}catch(B){}}}Eg.ErrorBoundary=YEQ;function GEQ(A){if(A instanceof Error)return A;else if(typeof A==="string")return Error(A);else return Error("An unknown error occurred.")}function ag4(A){try{return JSON.stringify(A)}catch(Q){return ZEQ}}function og4(A){let Q=new Set,B=Object.getPrototypeOf(A);while(B&&B!==Object.prototype)Object.getOwnPropertyNames(B).filter((G)=>typeof(B===null||B===void 0?void 0:B[G])==="function").forEach((G)=>Q.add(G)),B=Object.getPrototypeOf(B);return Array.from(Q)}});var XEQ=U((JEQ)=>{Object.defineProperty(JEQ,"__esModule",{value:!0})});var WEQ=U((IEQ)=>{Object.defineProperty(IEQ,"__esModule",{value:!0})});var KEQ=U((DEQ)=>{Object.defineProperty(DEQ,"__esModule",{value:!0})});var WT1=U((VEQ)=>{Object.defineProperty(VEQ,"__esModule",{value:!0});VEQ.createMemoKey=VEQ.MemoPrefix=void 0;VEQ.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_layer:"l",_paramStore:"p"};var rg4=new Set([]),sg4=new Set(["userPersistedValues"]);function tg4(A,Q,B){let G=`${A}|${Q}`;if(!B)return G;for(let Z of Object.keys(B)){if(sg4.has(Z))return;if(rg4.has(Z))G+=`|${Z}=true`;else G+=`|${Z}=${B[Z]}`}return G}VEQ.createMemoKey=tg4});var HEQ=U((QZA)=>{var Au4=QZA&&QZA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(QZA,"__esModule",{value:!0});QZA._fetchTxtRecords=void 0;var Qu4=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),Bu4="https://cloudflare-dns.com/dns-query",Gu4=["i","e","d"],Zu4=200;function Yu4(A){return Au4(this,void 0,void 0,function*(){let Q=yield A(Bu4,{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:Qu4});if(!Q.ok){let Z=Error("Failed to fetch TXT records from DNS");throw Z.name="DnsTxtFetchError",Z}let B=yield Q.arrayBuffer(),G=new Uint8Array(B);return Ju4(G)})}QZA._fetchTxtRecords=Yu4;function Ju4(A){let Q=A.findIndex((G,Z)=>Z<Zu4&&String.fromCharCode(G)==="="&&Gu4.includes(String.fromCharCode(A[Z-1])));if(Q===-1){let G=Error("Failed to parse TXT records from DNS");throw G.name="DnsTxtParseError",G}let B="";for(let G=Q-1;G<A.length;G++)B+=String.fromCharCode(A[G]);return B.split(",")}});var NEQ=U((Wi)=>{var EEQ=Wi&&Wi.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(Wi,"__esModule",{value:!0});Wi._isDomainFailure=Wi.NetworkFallbackResolver=void 0;var Xu4=HEQ(),Iu4=oGA(),Wu4=Xz(),KT1=Hg(),zEQ=604800000,Du4=14400000;class $EQ{constructor(A){var Q;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=(Q=A.networkConfig)===null||Q===void 0?void 0:Q.networkOverrideFunc}setErrorBoundary(A){this._errorBoundary=A}tryBumpExpiryTime(A,Q){var B;let G=(B=this._fallbackInfo)===null||B===void 0?void 0:B[Q.endpoint];if(!G)return;G.expiryTime=Date.now()+zEQ,DT1(A,Object.assign(Object.assign({},this._fallbackInfo),{[Q.endpoint]:G}))}getActiveFallbackUrl(A,Q){var B,G;let Z=this._fallbackInfo;if(Z==null)Z=(B=Ku4(A))!==null&&B!==void 0?B:{},this._fallbackInfo=Z;let Y=Z[Q.endpoint];if(!Y||Date.now()>((G=Y.expiryTime)!==null&&G!==void 0?G:0))return delete Z[Q.endpoint],this._fallbackInfo=Z,DT1(A,this._fallbackInfo),null;if(Y.url)return Y.url;return null}getFallbackFromProvided(A){let Q=CEQ(A);if(Q)return A.replace(Q,"");return null}tryFetchUpdatedFallbackInfo(A,Q,B,G){var Z,Y;return EEQ(this,void 0,void 0,function*(){try{if(!UEQ(B,G))return!1;let X=Q.customUrl==null&&Q.fallbackUrls==null?yield this._tryFetchFallbackUrlsFromNetwork(Q):Q.fallbackUrls,I=this._pickNewFallbackUrl((Z=this._fallbackInfo)===null||Z===void 0?void 0:Z[Q.endpoint],X);if(!I)return!1;return this._updateFallbackInfoWithNewUrl(A,Q.endpoint,I),!0}catch(J){return(Y=this._errorBoundary)===null||Y===void 0||Y.logError("tryFetchUpdatedFallbackInfo",J),!1}})}_updateFallbackInfoWithNewUrl(A,Q,B){var G,Z,Y;let J={url:B,expiryTime:Date.now()+zEQ,previous:[]},X=(G=this._fallbackInfo)===null||G===void 0?void 0:G[Q];if(X)J.previous.push(...X.previous);if(J.previous.length>10)J.previous=[];let I=(Y=(Z=this._fallbackInfo)===null||Z===void 0?void 0:Z[Q])===null||Y===void 0?void 0:Y.url;if(I!=null)J.previous.push(I);this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[Q]:J}),DT1(A,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(A){var Q;return EEQ(this,void 0,void 0,function*(){let B=this._dnsQueryCooldowns[A.endpoint];if(B&&Date.now()<B)return null;this._dnsQueryCooldowns[A.endpoint]=Date.now()+Du4;let G=[],Z=yield(0,Xu4._fetchTxtRecords)((Q=this._networkOverrideFunc)!==null&&Q!==void 0?Q:fetch),Y=CEQ(A.defaultUrl);for(let J of Z){if(!J.startsWith(A.endpointDnsKey+"="))continue;let X=J.split("=");if(X.length>1){let I=X[1];if(I.endsWith("/"))I=I.slice(0,-1);G.push(`https://${I}${Y}`)}}return G})}_pickNewFallbackUrl(A,Q){var B;if(Q==null)return null;let G=new Set((B=A===null||A===void 0?void 0:A.previous)!==null&&B!==void 0?B:[]),Z=A===null||A===void 0?void 0:A.url,Y=null;for(let J of Q){let X=J.endsWith("/")?J.slice(0,-1):J;if(!G.has(J)&&X!==Z){Y=X;break}}return Y}}Wi.NetworkFallbackResolver=$EQ;function UEQ(A,Q){var B;let G=(B=A===null||A===void 0?void 0:A.toLowerCase())!==null&&B!==void 0?B:"";return Q||G.includes("uncaught exception")||G.includes("failed to fetch")||G.includes("networkerror when attempting to fetch resource")}Wi._isDomainFailure=UEQ;function qEQ(A){return`statsig.network_fallback.${(0,Iu4._DJB2)(A)}`}function DT1(A,Q){let B=qEQ(A);if(!Q||Object.keys(Q).length===0){KT1.Storage.removeItem(B);return}KT1.Storage.setItem(B,JSON.stringify(Q))}function Ku4(A){let Q=qEQ(A),B=KT1.Storage.getItem(Q);if(!B)return null;try{return JSON.parse(B)}catch(G){return Wu4.Log.error("Failed to parse FallbackInfo"),null}}function CEQ(A){try{return new URL(A).pathname}catch(Q){return null}}});var VT1=U((LEQ)=>{Object.defineProperty(LEQ,"__esModule",{value:!0});LEQ.SDKFlags=void 0;var wEQ={};LEQ.SDKFlags={setFlags:(A,Q)=>{wEQ[A]=Q},get:(A,Q)=>{var B,G;return(G=(B=wEQ[A])===null||B===void 0?void 0:B[Q])!==null&&G!==void 0?G:!1}}});var UnA=U((SEQ)=>{Object.defineProperty(SEQ,"__esModule",{value:!0});SEQ.StatsigSession=SEQ.SessionID=void 0;var Vu4=EqA(),Fu4=Xz(),REQ=Hg(),_EQ=KnA(),jEQ=1800000,TEQ=14400000,$nA={};SEQ.SessionID={get:(A)=>{return SEQ.StatsigSession.get(A).data.sessionID}};SEQ.StatsigSession={get:(A)=>{if($nA[A]==null)$nA[A]=Hu4(A);let Q=$nA[A];return zu4(Q)},overrideInitialSessionID:(A,Q)=>{$nA[Q]=Eu4(A,Q)}};function Hu4(A){let Q=qu4(A),B=Date.now();if(!Q)Q={sessionID:(0,_EQ.getUUID)(),startTime:B,lastUpdate:B};return{data:Q,sdkKey:A}}function Eu4(A,Q){let B=Date.now();return{data:{sessionID:A,startTime:B,lastUpdate:B},sdkKey:Q}}function zu4(A){let Q=Date.now(),B=A.data;if(Cu4(B)||$u4(B))B.sessionID=(0,_EQ.getUUID)(),B.startTime=Q;B.lastUpdate=Q,Uu4(B,A.sdkKey),clearTimeout(A.idleTimeoutID),clearTimeout(A.ageTimeoutID);let G=Q-B.startTime,Z=A.sdkKey;return A.idleTimeoutID=MEQ(Z,jEQ),A.ageTimeoutID=MEQ(Z,TEQ-G),A}function MEQ(A,Q){return setTimeout(()=>{let B=__STATSIG__===null||__STATSIG__===void 0?void 0:__STATSIG__.instance(A);if(B)B.$emt({name:"session_expired"})},Q)}function Cu4({lastUpdate:A}){return Date.now()-A>jEQ}function $u4({startTime:A}){return Date.now()-A>TEQ}function PEQ(A){return`statsig.session_id.${(0,Vu4._getStorageKey)(A)}`}function Uu4(A,Q){let B=PEQ(Q);try{(0,REQ._setObjectInStorage)(B,A)}catch(G){Fu4.Log.warn("Failed to save SessionID")}}function qu4(A){let Q=PEQ(A);return(0,REQ._getObjectFromStorage)(Q)}});var HT1=U((xEQ)=>{Object.defineProperty(xEQ,"__esModule",{value:!0});xEQ.ErrorTag=void 0;xEQ.ErrorTag={NetworkError:"NetworkError"}});var dEQ=U((GZA)=>{var BZA=GZA&&GZA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(GZA,"__esModule",{value:!0});GZA.NetworkCore=void 0;_1A();var vEQ=_1A(),ET1=tiA(),P1A=Xz(),VT=zqA(),wu4=NEQ(),Lu4=VT1(),fEQ=CnA(),Ou4=j1A(),hEQ=UnA(),Mu4=FnA(),Ru4=HT1(),gEQ=qqA(),_u4=WnA(),ju4=1e4,Tu4=500,Pu4=30000,Su4=1000,uEQ=50,xu4=uEQ/Su4,yu4=new Set([408,500,502,503,504,522,524,599]);class mEQ{constructor(A,Q){if(this._emitter=Q,this._errorBoundary=null,this._timeout=ju4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,A)this._options=A;if(this._options.networkConfig)this._netConfig=this._options.networkConfig;if(this._netConfig.networkTimeoutMs)this._timeout=this._netConfig.networkTimeoutMs;this._fallbackResolver=new wu4.NetworkFallbackResolver(this._options)}setErrorBoundary(A){this._errorBoundary=A,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(A)}isBeaconSupported(){return typeof navigator<"u"&&typeof navigator.sendBeacon==="function"}getLastUsedInitUrlAndReset(){let A=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,A}beacon(A){return BZA(this,void 0,void 0,function*(){if(!kEQ(A))return!1;let Q=this._getInternalRequestArgs("POST",A);yield this._tryToCompressBody(Q);let B=yield this._getPopulatedURL(Q),G=navigator;return G.sendBeacon.bind(G)(B,Q.body)})}post(A){return BZA(this,void 0,void 0,function*(){let Q=this._getInternalRequestArgs("POST",A);return this._tryEncodeBody(Q),yield this._tryToCompressBody(Q),this._sendRequest(Q)})}get(A){let Q=this._getInternalRequestArgs("GET",A);return this._sendRequest(Q)}_sendRequest(A){var Q,B,G,Z;return BZA(this,void 0,void 0,function*(){if(!kEQ(A))return null;if(this._netConfig.preventAllNetworkTraffic)return null;let{method:Y,body:J,retries:X,attempt:I}=A,W=A.urlConfig.endpoint;if(this._isRateLimited(W))return P1A.Log.warn(`Request to ${W} was blocked because you are making requests too frequently.`),null;let D=I!==null&&I!==void 0?I:1,K=typeof AbortController<"u"?new AbortController:null,V=setTimeout(()=>{K===null||K===void 0||K.abort(`Timeout of ${this._timeout}ms expired.`)},this._timeout),F=yield this._getPopulatedURL(A),H=null,E=(0,_u4._isUnloading)();try{let z={method:Y,body:J,headers:Object.assign({},A.headers),signal:K===null||K===void 0?void 0:K.signal,priority:A.priority,keepalive:E};fu4(A,D);let C=this._leakyBucket[W];if(C)C.lastRequestTime=Date.now(),this._leakyBucket[W]=C;if(H=yield((Q=this._netConfig.networkOverrideFunc)!==null&&Q!==void 0?Q:fetch)(F,z),clearTimeout(V),!H.ok){let M=yield H.text().catch(()=>"No Text"),_=Error(`NetworkError: ${F} ${M}`);throw _.name="NetworkError",_}let L=yield H.text();return bEQ(A,H,D,L),this._fallbackResolver.tryBumpExpiryTime(A.sdkKey,A.urlConfig),{body:L,code:H.status}}catch(z){let C=ku4(K,z),O=bu4(K);if(bEQ(A,H,D,"",z),yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(A.sdkKey,A.urlConfig,C,O))A.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(A.sdkKey,A.urlConfig);if(!X||D>X||!yu4.has((B=H===null||H===void 0?void 0:H.status)!==null&&B!==void 0?B:500)){(G=this._emitter)===null||G===void 0||G.call(this,{name:"error",error:z,tag:Ru4.ErrorTag.NetworkError,requestArgs:A});let M=`A networking error occurred during ${Y} request to ${F}.`;return P1A.Log.error(M,C,z),(Z=this._errorBoundary)===null||Z===void 0||Z.attachErrorIfNoneExists(M),null}return yield hu4(D),this._sendRequest(Object.assign(Object.assign({},A),{retries:X,attempt:D+1}))}})}_isRateLimited(A){var Q;let B=Date.now(),G=(Q=this._leakyBucket[A])!==null&&Q!==void 0?Q:{count:0,lastRequestTime:B},Z=B-G.lastRequestTime,Y=Math.floor(Z*xu4);if(G.count=Math.max(0,G.count-Y),G.count>=uEQ)return!0;return G.count+=1,G.lastRequestTime=B,this._leakyBucket[A]=G,!1}_getPopulatedURL(A){var Q;return BZA(this,void 0,void 0,function*(){let B=(Q=A.fallbackUrl)!==null&&Q!==void 0?Q:A.urlConfig.getUrl();if(A.urlConfig.endpoint===VT.Endpoint._initialize||A.urlConfig.endpoint===VT.Endpoint._download_config_specs)this._lastUsedInitUrl=B;let G=Object.assign({[VT.NetworkParam.SdkKey]:A.sdkKey,[VT.NetworkParam.SdkType]:fEQ.SDKType._get(A.sdkKey),[VT.NetworkParam.SdkVersion]:gEQ.SDK_VERSION,[VT.NetworkParam.Time]:String(Date.now()),[VT.NetworkParam.SessionID]:hEQ.SessionID.get(A.sdkKey)},A.params),Z=Object.keys(G).map((Y)=>{return`${encodeURIComponent(Y)}=${encodeURIComponent(G[Y])}`}).join("&");return`${B}${Z?`?${Z}`:""}`})}_tryEncodeBody(A){var Q;let B=(0,Ou4._getWindowSafe)(),G=A.body;if(!A.isStatsigEncodable||this._options.disableStatsigEncoding||typeof G!=="string"||(0,vEQ._getStatsigGlobalFlag)("no-encode")!=null||!(B===null||B===void 0?void 0:B.btoa))return;try{A.body=B.btoa(G).split("").reverse().join(""),A.params=Object.assign(Object.assign({},(Q=A.params)!==null&&Q!==void 0?Q:{}),{[VT.NetworkParam.StatsigEncoded]:"1"})}catch(Z){P1A.Log.warn(`Request encoding failed for ${A.urlConfig.getUrl()}`,Z)}}_tryToCompressBody(A){var Q;return BZA(this,void 0,void 0,function*(){let B=A.body;if(!A.isCompressable||this._options.disableCompression||typeof B!=="string"||Lu4.SDKFlags.get(A.sdkKey,"enable_log_event_compression")!==!0||(0,vEQ._getStatsigGlobalFlag)("no-compress")!=null||typeof CompressionStream>"u"||typeof TextEncoder>"u")return;try{let G=new TextEncoder().encode(B),Z=new CompressionStream("gzip"),Y=Z.writable.getWriter();Y.write(G).catch(P1A.Log.error),Y.close().catch(P1A.Log.error);let J=Z.readable.getReader(),X=[],I;while(!(I=yield J.read()).done)X.push(I.value);let W=X.reduce((V,F)=>V+F.length,0),D=new Uint8Array(W),K=0;for(let V of X)D.set(V,K),K+=V.length;A.body=D,A.params=Object.assign(Object.assign({},(Q=A.params)!==null&&Q!==void 0?Q:{}),{[VT.NetworkParam.IsGzipped]:"1"})}catch(G){P1A.Log.warn(`Request compression failed for ${A.urlConfig.getUrl()}`,G)}})}_getInternalRequestArgs(A,Q){let B=this._fallbackResolver.getActiveFallbackUrl(Q.sdkKey,Q.urlConfig),G=Object.assign(Object.assign({},Q),{method:A,fallbackUrl:B});if("data"in Q)vu4(G,Q.data);return G}}GZA.NetworkCore=mEQ;var kEQ=(A)=>{if(!A.sdkKey)return P1A.Log.warn("Unable to make request without an SDK key"),!1;return!0},vu4=(A,Q)=>{let{sdkKey:B,fallbackUrl:G}=A,Z=Mu4.StableID.get(B),Y=hEQ.SessionID.get(B),J=fEQ.SDKType._get(B);A.body=JSON.stringify(Object.assign(Object.assign({},Q),{statsigMetadata:Object.assign(Object.assign({},gEQ.StatsigMetadataProvider.get()),{stableID:Z,sessionID:Y,sdkType:J,fallbackUrl:G})}))};function ku4(A,Q){if((A===null||A===void 0?void 0:A.signal.aborted)&&typeof A.signal.reason==="string")return A.signal.reason;if(typeof Q==="string")return Q;if(Q instanceof Error)return`${Q.name}: ${Q.message}`;return"Unknown Error"}function bu4(A){return(A===null||A===void 0?void 0:A.signal.aborted)&&typeof A.signal.reason==="string"&&A.signal.reason.includes("Timeout")||!1}function fu4(A,Q){if(A.urlConfig.endpoint!==VT.Endpoint._initialize)return;ET1.Diagnostics._markInitNetworkReqStart(A.sdkKey,{attempt:Q})}function bEQ(A,Q,B,G,Z){if(A.urlConfig.endpoint!==VT.Endpoint._initialize)return;ET1.Diagnostics._markInitNetworkReqEnd(A.sdkKey,ET1.Diagnostics._getDiagnosticsData(Q,B,G,Z))}function hu4(A){return BZA(this,void 0,void 0,function*(){yield new Promise((Q)=>setTimeout(Q,Math.min(Tu4*(A*A),Pu4)))})}});var cEQ=U((pEQ)=>{Object.defineProperty(pEQ,"__esModule",{value:!0})});var iEQ=U((lEQ)=>{Object.defineProperty(lEQ,"__esModule",{value:!0})});var aEQ=U((ZZA)=>{var gu4=ZZA&&ZZA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(ZZA,"__esModule",{value:!0});ZZA.StatsigClientBase=void 0;_1A();var uu4=_1A(),mu4=IT1(),du4=GT1(),zT1=Xz(),pu4=WT1(),cu4=j1A(),lu4=UnA(),qnA=Hg(),iu4=3000;class nEQ{constructor(A,Q,B,G){var Z;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};let Y=this.$emt.bind(this);(G===null||G===void 0?void 0:G.logLevel)!=null&&(zT1.Log.level=G.logLevel),(G===null||G===void 0?void 0:G.disableStorage)&&qnA.Storage._setDisabled(!0),(G===null||G===void 0?void 0:G.initialSessionID)&&lu4.StatsigSession.overrideInitialSessionID(G.initialSessionID,A),(G===null||G===void 0?void 0:G.storageProvider)&&qnA.Storage._setProvider(G.storageProvider),this._sdkKey=A,this._options=G!==null&&G!==void 0?G:{},this._memoCache={},this.overrideAdapter=(Z=G===null||G===void 0?void 0:G.overrideAdapter)!==null&&Z!==void 0?Z:null,this._logger=new du4.EventLogger(A,Y,B,G),this._errorBoundary=new mu4.ErrorBoundary(A,G,Y),this._errorBoundary.wrap(this),this._errorBoundary.wrap(Q),this._errorBoundary.wrap(this._logger),B.setErrorBoundary(this._errorBoundary),this.dataAdapter=Q,this.dataAdapter.attach(A,G),this.storageProvider=qnA.Storage,this._primeReadyRipcord(),nu4(A,this)}updateRuntimeOptions(A){if(A.disableLogging!=null)this._options.disableLogging=A.disableLogging,this._logger.setLoggingDisabled(A.disableLogging);if(A.disableStorage!=null)this._options.disableStorage=A.disableStorage,qnA.Storage._setDisabled(A.disableStorage)}flush(){return this._logger.flush()}shutdown(){return gu4(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()})}on(A,Q){if(!this._listeners[A])this._listeners[A]=[];this._listeners[A].push(Q)}off(A,Q){if(this._listeners[A]){let B=this._listeners[A].indexOf(Q);if(B!==-1)this._listeners[A].splice(B,1)}}$on(A,Q){Q.__isInternal=!0,this.on(A,Q)}$emt(A){var Q;let B=(G)=>{try{G(A)}catch(Z){if(G.__isInternal===!0){this._errorBoundary.logError(`__emit:${A.name}`,Z);return}zT1.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",A)}};if(this._listeners[A.name])this._listeners[A.name].forEach((G)=>B(G));(Q=this._listeners["*"])===null||Q===void 0||Q.forEach(B)}_setStatus(A,Q){this.loadingStatus=A,this._memoCache={},this.$emt({name:"values_updated",status:A,values:Q})}_enqueueExposure(A,Q,B){if((B===null||B===void 0?void 0:B.disableExposureLog)===!0){this._logger.incrementNonExposureCount(A);return}this._logger.enqueue(Q)}_memoize(A,Q){return(B,G)=>{if(this._options.disableEvaluationMemoization)return Q(B,G);let Z=(0,pu4.createMemoKey)(A,B,G);if(!Z)return Q(B,G);if(!(Z in this._memoCache)){if(Object.keys(this._memoCache).length>=iu4)this._memoCache={};this._memoCache[Z]=Q(B,G)}return this._memoCache[Z]}}}ZZA.StatsigClientBase=nEQ;function nu4(A,Q){var B;if((0,cu4._isServerEnv)())return;let G=(0,uu4._getStatsigGlobal)(),Z=(B=G.instances)!==null&&B!==void 0?B:{},Y=Q;if(Z[A]!=null)zT1.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");if(Z[A]=Y,!G.firstInstance)G.firstInstance=Y;G.instances=Z,__STATSIG__=G}});var sEQ=U((oEQ)=>{Object.defineProperty(oEQ,"__esModule",{value:!0});oEQ.DataAdapterCachePrefix=void 0;oEQ.DataAdapterCachePrefix="statsig.cached"});var eEQ=U((tEQ)=>{Object.defineProperty(tEQ,"__esModule",{value:!0})});var QzQ=U((AzQ)=>{Object.defineProperty(AzQ,"__esModule",{value:!0})});var YzQ=U((GzQ)=>{Object.defineProperty(GzQ,"__esModule",{value:!0});GzQ._makeTypedGet=GzQ._mergeOverride=GzQ._makeLayer=GzQ._makeExperiment=GzQ._makeDynamicConfig=GzQ._makeFeatureGate=void 0;var au4=Xz(),ou4=eiA(),ru4="default";function CT1(A,Q,B,G){var Z;return{name:A,details:Q,ruleID:(Z=B===null||B===void 0?void 0:B.rule_id)!==null&&Z!==void 0?Z:ru4,__evaluation:B,value:G}}function su4(A,Q,B){return CT1(A,Q,B,(B===null||B===void 0?void 0:B.value)===!0)}GzQ._makeFeatureGate=su4;function BzQ(A,Q,B){var G;let Z=(G=B===null||B===void 0?void 0:B.value)!==null&&G!==void 0?G:{};return Object.assign(Object.assign({},CT1(A,Q,B,Z)),{get:NnA(A,B===null||B===void 0?void 0:B.value)})}GzQ._makeDynamicConfig=BzQ;function tu4(A,Q,B){var G;let Z=BzQ(A,Q,B);return Object.assign(Object.assign({},Z),{groupName:(G=B===null||B===void 0?void 0:B.group_name)!==null&&G!==void 0?G:null})}GzQ._makeExperiment=tu4;function eu4(A,Q,B,G){var Z,Y;return Object.assign(Object.assign({},CT1(A,Q,B,void 0)),{get:NnA(A,B===null||B===void 0?void 0:B.value,G),groupName:(Z=B===null||B===void 0?void 0:B.group_name)!==null&&Z!==void 0?Z:null,__value:(Y=B===null||B===void 0?void 0:B.value)!==null&&Y!==void 0?Y:{}})}GzQ._makeLayer=eu4;function Am4(A,Q,B,G){return Object.assign(Object.assign(Object.assign({},A),Q),{get:NnA(A.name,B,G)})}GzQ._mergeOverride=Am4;function NnA(A,Q,B){return(G,Z)=>{var Y;let J=(Y=Q===null||Q===void 0?void 0:Q[G])!==null&&Y!==void 0?Y:null;if(J==null)return Z!==null&&Z!==void 0?Z:null;if(Z!=null&&!(0,ou4._isTypeMatch)(J,Z))return au4.Log.warn(`Parameter type mismatch. '${A}.${G}' was found to be type '${typeof J}' but fallback/return type is '${typeof Z}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),Z!==null&&Z!==void 0?Z:null;return B===null||B===void 0||B(G),J}}GzQ._makeTypedGet=NnA});var XzQ=U((JzQ)=>{Object.defineProperty(JzQ,"__esModule",{value:!0})});var DzQ=U((IzQ)=>{Object.defineProperty(IzQ,"__esModule",{value:!0});IzQ.UPDATE_DETAIL_ERROR_MESSAGES=IzQ.createUpdateDetails=void 0;var Jm4=(A,Q,B,G,Z,Y)=>{return{duration:B,source:Q,success:A,error:G,sourceUrl:Z,warnings:Y}};IzQ.createUpdateDetails=Jm4;IzQ.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}});var Di=U((H4)=>{var Im4=H4&&H4.__createBinding||(Object.create?function(A,Q,B,G){if(G===void 0)G=B;var Z=Object.getOwnPropertyDescriptor(Q,B);if(!Z||("get"in Z?!Q.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Q[B]}};Object.defineProperty(A,G,Z)}:function(A,Q,B,G){if(G===void 0)G=B;A[G]=Q[B]}),H8=H4&&H4.__exportStar||function(A,Q){for(var B in A)if(B!=="default"&&!Object.prototype.hasOwnProperty.call(Q,B))Im4(Q,A,B)};Object.defineProperty(H4,"__esModule",{value:!0});H4.Storage=H4.Log=H4.EventLogger=H4.Diagnostics=void 0;_1A();var Wm4=tiA();Object.defineProperty(H4,"Diagnostics",{enumerable:!0,get:function(){return Wm4.Diagnostics}});var Dm4=GT1();Object.defineProperty(H4,"EventLogger",{enumerable:!0,get:function(){return Dm4.EventLogger}});var KzQ=Xz();Object.defineProperty(H4,"Log",{enumerable:!0,get:function(){return KzQ.Log}});var Km4=qqA(),Vm4=Hg();Object.defineProperty(H4,"Storage",{enumerable:!0,get:function(){return Vm4.Storage}});H8(_1A(),H4);H8(EqA(),H4);H8(vHQ(),H4);H8(sHQ(),H4);H8(tiA(),H4);H8(eHQ(),H4);H8(IT1(),H4);H8(XEQ(),H4);H8(WEQ(),H4);H8(oGA(),H4);H8(KEQ(),H4);H8(Xz(),H4);H8(WT1(),H4);H8(zqA(),H4);H8(dEQ(),H4);H8(cEQ(),H4);H8(iEQ(),H4);H8(j1A(),H4);H8(CnA(),H4);H8(UnA(),H4);H8(FnA(),H4);H8(aEQ(),H4);H8(HT1(),H4);H8(sEQ(),H4);H8(oj1(),H4);H8(qqA(),H4);H8(eEQ(),H4);H8(QzQ(),H4);H8(YzQ(),H4);H8(XzQ(),H4);H8(YT1(),H4);H8(Hg(),H4);H8(JT1(),H4);H8(eiA(),H4);H8(tj1(),H4);H8(KnA(),H4);H8(WnA(),H4);H8(DzQ(),H4);H8(VT1(),H4);__STATSIG__=Object.assign(Object.assign({},__STATSIG__!==null&&__STATSIG__!==void 0?__STATSIG__:{}),{Log:KzQ.Log,SDK_VERSION:Km4.SDK_VERSION})});var HzQ=U((FzQ)=>{Object.defineProperty(FzQ,"__esModule",{value:!0});var S1A=Di();class VzQ{constructor(A){this._sdkKey=A,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null}finalize(){if(this._values)return;this._source="NoValues"}getValues(){return this._rawValues?(0,S1A._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(A,Q){var B;if(!A)return!1;let G=(0,S1A._typedJsonParse)(A.data,"has_updates","EvaluationResponse");if(G==null)return!1;if(this._source=A.source,(G===null||G===void 0?void 0:G.has_updates)!==!0)return!0;if(this._rawValues=A.data,this._lcut=G.time,this._receivedAt=A.receivedAt,this._values=G,this._bootstrapMetadata=this._extractBootstrapMetadata(A.source,G),A.source&&G.user)this._setWarningState(Q,G);return S1A.SDKFlags.setFlags(this._sdkKey,(B=G.sdk_flags)!==null&&B!==void 0?B:{}),!0}getWarnings(){if(this._warnings.size===0)return;return Array.from(this._warnings)}getGate(A){var Q;return this._getDetailedStoreResult((Q=this._values)===null||Q===void 0?void 0:Q.feature_gates,A)}getConfig(A){var Q;return this._getDetailedStoreResult((Q=this._values)===null||Q===void 0?void 0:Q.dynamic_configs,A)}getLayer(A){var Q;return this._getDetailedStoreResult((Q=this._values)===null||Q===void 0?void 0:Q.layer_configs,A)}getParamStore(A){var Q;return this._getDetailedStoreResult((Q=this._values)===null||Q===void 0?void 0:Q.param_stores,A)}getSource(){return this._source}getExposureMapping(){var A;return(A=this._values)===null||A===void 0?void 0:A.exposures}_extractBootstrapMetadata(A,Q){if(A!=="Bootstrap")return null;let B={};if(Q.user)B.user=Q.user;if(Q.sdkInfo)B.generatorSDKInfo=Q.sdkInfo;return B.lcut=Q.time,B}_getDetailedStoreResult(A,Q){let B=null;if(A)B=A[Q]?A[Q]:A[(0,S1A._DJB2)(Q)];return{result:B,details:this._getDetails(B==null)}}_setWarningState(A,Q){var B;let G=S1A.StableID.get(this._sdkKey);if(((B=A.customIDs)===null||B===void 0?void 0:B.stableID)!==G){this._warnings.add("StableIDMismatch");return}if("user"in Q){let Z=Q.user;if((0,S1A._getFullUserHash)(A)!==(0,S1A._getFullUserHash)(Z))this._warnings.add("PartialUserMatch")}}getCurrentSourceDetails(){if(this._source==="Uninitialized"||this._source==="NoValues")return{reason:this._source};let A={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};if(this._warnings.size>0)A.warnings=Array.from(this._warnings);return A}_getDetails(A){var Q,B;let G=this.getCurrentSourceDetails(),Z=G.reason,Y=(Q=G.warnings)!==null&&Q!==void 0?Q:[];if(this._source==="Bootstrap"&&Y.length>0)Z=Z+Y[0];if(Z!=="Uninitialized"&&Z!=="NoValues")Z=`${Z}:${A?"Unrecognized":"Recognized"}`;let J=this._source==="Bootstrap"?(B=this._bootstrapMetadata)!==null&&B!==void 0?B:void 0:void 0;if(J)G.bootstrapMetadata=J;return Object.assign(Object.assign({},G),{reason:Z})}}FzQ.default=VzQ});var $zQ=U((zzQ)=>{Object.defineProperty(zzQ,"__esModule",{value:!0});zzQ._resolveDeltasResponse=void 0;var EzQ=Di(),Hm4=2;function Em4(A,Q){let B=(0,EzQ._typedJsonParse)(Q,"checksum","DeltasEvaluationResponse");if(!B)return{hadBadDeltaChecksum:!0};let G=zm4(A,B),Z=Cm4(G),Y=(0,EzQ._DJB2Object)({feature_gates:Z.feature_gates,dynamic_configs:Z.dynamic_configs,layer_configs:Z.layer_configs},Hm4);if(Y!==B.checksumV2)return{hadBadDeltaChecksum:!0,badChecksum:Y,badMergedConfigs:Z,badFullResponse:B.deltas_full_response};return JSON.stringify(Z)}zzQ._resolveDeltasResponse=Em4;function zm4(A,Q){return Object.assign(Object.assign(Object.assign({},A),Q),{feature_gates:Object.assign(Object.assign({},A.feature_gates),Q.feature_gates),layer_configs:Object.assign(Object.assign({},A.layer_configs),Q.layer_configs),dynamic_configs:Object.assign(Object.assign({},A.dynamic_configs),Q.dynamic_configs)})}function Cm4(A){let Q=A;return $T1(A.deleted_gates,Q.feature_gates),delete Q.deleted_gates,$T1(A.deleted_configs,Q.dynamic_configs),delete Q.deleted_configs,$T1(A.deleted_layers,Q.layer_configs),delete Q.deleted_layers,Q}function $T1(A,Q){A===null||A===void 0||A.forEach((B)=>{delete Q[B]})}});var UT1=U((NqA)=>{var UzQ=NqA&&NqA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(NqA,"__esModule",{value:!0});var wnA=Di(),$m4=$zQ();class qzQ extends wnA.NetworkCore{constructor(A,Q){super(A,Q);let B=A===null||A===void 0?void 0:A.networkConfig;this._initializeUrlConfig=new wnA.UrlConfiguration(wnA.Endpoint._initialize,B===null||B===void 0?void 0:B.initializeUrl,B===null||B===void 0?void 0:B.api,B===null||B===void 0?void 0:B.initializeFallbackUrls)}fetchEvaluations(A,Q,B,G,Z){return UzQ(this,void 0,void 0,function*(){let Y=Q?(0,wnA._typedJsonParse)(Q,"has_updates","InitializeResponse"):null,J={user:G,hash:"djb2",deltasResponseRequested:!1,full_checksum:null};if(Y===null||Y===void 0?void 0:Y.has_updates)J=Object.assign(Object.assign({},J),{sinceTime:Z?Y.time:0,previousDerivedFields:"derived_fields"in Y&&Z?Y.derived_fields:{},deltasResponseRequested:!0,full_checksum:Y.full_checksum});return this._fetchEvaluations(A,Y,J,B)})}_fetchEvaluations(A,Q,B,G){var Z,Y;return UzQ(this,void 0,void 0,function*(){let J=yield this.post({sdkKey:A,urlConfig:this._initializeUrlConfig,data:B,retries:2,isStatsigEncodable:!0,priority:G});if((J===null||J===void 0?void 0:J.code)===204)return'{"has_updates": false}';if((J===null||J===void 0?void 0:J.code)!==200)return(Z=J===null||J===void 0?void 0:J.body)!==null&&Z!==void 0?Z:null;if((Q===null||Q===void 0?void 0:Q.has_updates)!==!0||((Y=J.body)===null||Y===void 0?void 0:Y.includes('"is_delta":true'))!==!0||B.deltasResponseRequested!==!0)return J.body;let X=(0,$m4._resolveDeltasResponse)(Q,J.body);if(typeof X==="string")return X;return this._fetchEvaluations(A,Q,Object.assign(Object.assign(Object.assign({},B),X),{deltasResponseRequested:!1}),G)})}}NqA.default=qzQ});var OzQ=U((wzQ)=>{Object.defineProperty(wzQ,"__esModule",{value:!0});wzQ._makeParamStoreGetter=void 0;var NzQ=Di(),LnA={disableExposureLog:!0};function OnA(A){return A==null||A.disableExposureLog===!1}function qT1(A,Q){return Q!=null&&!(0,NzQ._isTypeMatch)(A,Q)}function Um4(A,Q){return A.value}function qm4(A,Q,B){if(A.getFeatureGate(Q.gate_name,OnA(B)?void 0:LnA).value)return Q.pass_value;return Q.fail_value}function Nm4(A,Q,B,G){let Y=A.getDynamicConfig(Q.config_name,LnA).get(Q.param_name);if(qT1(Y,B))return B;if(OnA(G))A.getDynamicConfig(Q.config_name);return Y}function wm4(A,Q,B,G){let Y=A.getExperiment(Q.experiment_name,LnA).get(Q.param_name);if(qT1(Y,B))return B;if(OnA(G))A.getExperiment(Q.experiment_name);return Y}function Lm4(A,Q,B,G){let Y=A.getLayer(Q.layer_name,LnA).get(Q.param_name);if(qT1(Y,B))return B;if(OnA(G))A.getLayer(Q.layer_name).get(Q.param_name);return Y}function Om4(A,Q,B){return(G,Z)=>{if(Q==null)return Z;let Y=Q[G];if(Y==null||Z!=null&&(0,NzQ._typeOf)(Z)!==Y.param_type)return Z;switch(Y.ref_type){case"static":return Um4(Y,B);case"gate":return qm4(A,Y,B);case"dynamic_config":return Nm4(A,Y,Z,B);case"experiment":return wm4(A,Y,Z,B);case"layer":return Lm4(A,Y,Z,B);default:return Z}}}wzQ._makeParamStoreGetter=Om4});var RzQ=U((YZA)=>{var Mm4=YZA&&YZA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(YZA,"__esModule",{value:!0});YZA.StatsigEvaluationsDataAdapter=void 0;var x1A=Di(),Rm4=UT1();class MzQ extends x1A.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations");this._network=null,this._options=null}attach(A,Q){super.attach(A,Q),this._network=new Rm4.default(Q!==null&&Q!==void 0?Q:{})}getDataAsync(A,Q,B){return this._getDataAsyncImpl(A,(0,x1A._normalizeUser)(Q,this._options),B)}prefetchData(A,Q){return this._prefetchDataImpl(A,Q)}setData(A){let Q=(0,x1A._typedJsonParse)(A,"has_updates","data");if(Q&&"user"in Q)super.setData(A,Q.user);else x1A.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(A,Q){super.setData(A,Q)}_fetchFromNetwork(A,Q,B,G){var Z;return Mm4(this,void 0,void 0,function*(){let Y=yield(Z=this._network)===null||Z===void 0?void 0:Z.fetchEvaluations(this._getSdkKey(),A,B===null||B===void 0?void 0:B.priority,Q,G);return Y!==null&&Y!==void 0?Y:null})}_getCacheKey(A){var Q;let B=(0,x1A._getStorageKey)(this._getSdkKey(),A,(Q=this._options)===null||Q===void 0?void 0:Q.customUserCacheKeyFunc);return`${x1A.DataAdapterCachePrefix}.${this._cacheSuffix}.${B}`}_isCachedResultValidFor204(A,Q){return A.fullUserHash!=null&&A.fullUserHash===(0,x1A._getFullUserHash)(Q)}}YZA.StatsigEvaluationsDataAdapter=MzQ});var jzQ=U((wqA)=>{var NT1=wqA&&wqA.__awaiter||function(A,Q,B,G){function Z(Y){return Y instanceof B?Y:new B(function(J){J(Y)})}return new(B||(B=Promise))(function(Y,J){function X(D){try{W(G.next(D))}catch(K){J(K)}}function I(D){try{W(G.throw(D))}catch(K){J(K)}}function W(D){D.done?Y(D.value):Z(D.value).then(X,I)}W((G=G.apply(A,Q||[])).next())})};Object.defineProperty(wqA,"__esModule",{value:!0});var T8=Di(),_m4=HzQ(),jm4=UT1(),_zQ=OzQ(),Tm4=RzQ();class MnA extends T8.StatsigClientBase{static instance(A){let Q=(0,T8._getStatsigGlobal)().instance(A);if(Q instanceof MnA)return Q;return T8.Log.warn((0,T8._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new MnA(A!==null&&A!==void 0?A:"",{})}constructor(A,Q,B=null){var G,Z;T8.SDKType._setClientType(A,"javascript-client");let Y=new jm4.default(B,(X)=>{this.$emt(X)});super(A,(G=B===null||B===void 0?void 0:B.dataAdapter)!==null&&G!==void 0?G:new Tm4.StatsigEvaluationsDataAdapter,Y,B);this.getFeatureGate=this._memoize(T8.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(T8.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(T8.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getLayer=this._memoize(T8.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(T8.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new _m4.default(A),this._network=Y,this._user=this._configureUser(Q,B);let J=(Z=B===null||B===void 0?void 0:B.plugins)!==null&&Z!==void 0?Z:[];for(let X of J)X.bind(this)}initializeSync(A){var Q;if(this.loadingStatus!=="Uninitialized")return(0,T8.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...(Q=this._store.getWarnings())!==null&&Q!==void 0?Q:[]]);return this._logger.start(),this.updateUserSync(this._user,A)}initializeAsync(A){return NT1(this,void 0,void 0,function*(){if(this._initializePromise)return this._initializePromise;return this._initializePromise=this._initializeAsyncImpl(A),this._initializePromise})}updateUserSync(A,Q){var B;let G=performance.now(),Z=[...(B=this._store.getWarnings())!==null&&B!==void 0?B:[]];this._resetForUser(A);let Y=this.dataAdapter.getDataSync(this._user);if(Y==null)Z.push("NoCachedValues");this._store.setValues(Y,this._user),this._finalizeUpdate(Y);let J=Q===null||Q===void 0?void 0:Q.disableBackgroundCacheRefresh;if(J===!0||J==null&&(Y===null||Y===void 0?void 0:Y.source)==="Bootstrap")return(0,T8.createUpdateDetails)(!0,this._store.getSource(),performance.now()-G,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),Z);return this._runPostUpdate(Y!==null&&Y!==void 0?Y:null,this._user),(0,T8.createUpdateDetails)(!0,this._store.getSource(),performance.now()-G,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),Z)}updateUserAsync(A,Q){return NT1(this,void 0,void 0,function*(){this._resetForUser(A);let B=this._user;T8.Diagnostics._markInitOverallStart(this._sdkKey);let G=this.dataAdapter.getDataSync(B);if(this._store.setValues(G,this._user),this._setStatus("Loading",G),G=yield this.dataAdapter.getDataAsync(G,B,Q),B!==this._user)return(0,T8.createUpdateDetails)(!1,this._store.getSource(),-1,Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let Z=!1;if(G!=null)T8.Diagnostics._markInitProcessStart(this._sdkKey),Z=this._store.setValues(G,this._user),T8.Diagnostics._markInitProcessEnd(this._sdkKey,{success:Z});if(this._finalizeUpdate(G),!Z)this._errorBoundary.attachErrorIfNoneExists(T8.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"});T8.Diagnostics._markInitOverallEnd(this._sdkKey,Z,this._store.getCurrentSourceDetails());let Y=T8.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,T8.createUpdateDetails)(Z,this._store.getSource(),Y,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:T8.StatsigSession.get(this._sdkKey),stableID:T8.StableID.get(this._sdkKey)}}checkGate(A,Q){return this.getFeatureGate(A,Q).value}logEvent(A,Q,B){let G=typeof A==="string"?{eventName:A,value:Q,metadata:B}:A;this._logger.enqueue(Object.assign(Object.assign({},G),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",()=>{this.loadingStatus==="Loading"&&this._finalizeUpdate(null)})}_initializeAsyncImpl(A){return NT1(this,void 0,void 0,function*(){if(!T8.Storage.isReady())yield T8.Storage.isReadyResolver();return this._logger.start(),this.updateUserAsync(this._user,A)})}_finalizeUpdate(A){this._store.finalize(),this._setStatus("Ready",A)}_runPostUpdate(A,Q){this.dataAdapter.getDataAsync(A,Q,{priority:"low"}).catch((B)=>{T8.Log.error("An error occurred after update.",B)})}_resetForUser(A){this._logger.reset(),this._store.reset(),this._user=this._configureUser(A,this._options)}_configureUser(A,Q){var B;let G=(0,T8._normalizeUser)(A,Q),Z=(B=G.customIDs)===null||B===void 0?void 0:B.stableID;if(Z)T8.StableID.setOverride(Z,this._sdkKey);return G}_getFeatureGateImpl(A,Q){var B,G;let{result:Z,details:Y}=this._store.getGate(A),J=(0,T8._makeFeatureGate)(A,Y,Z),X=(G=(B=this.overrideAdapter)===null||B===void 0?void 0:B.getGateOverride)===null||G===void 0?void 0:G.call(B,J,this._user,Q),I=X!==null&&X!==void 0?X:J;return this._enqueueExposure(A,(0,T8._createGateExposure)(this._user,I,this._store.getExposureMapping()),Q),this.$emt({name:"gate_evaluation",gate:I}),I}_getDynamicConfigImpl(A,Q){var B,G;let{result:Z,details:Y}=this._store.getConfig(A),J=(0,T8._makeDynamicConfig)(A,Y,Z),X=(G=(B=this.overrideAdapter)===null||B===void 0?void 0:B.getDynamicConfigOverride)===null||G===void 0?void 0:G.call(B,J,this._user,Q),I=X!==null&&X!==void 0?X:J;return this._enqueueExposure(A,(0,T8._createConfigExposure)(this._user,I,this._store.getExposureMapping()),Q),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:I}),I}_getExperimentImpl(A,Q){var B,G,Z,Y;let{result:J,details:X}=this._store.getConfig(A),I=(0,T8._makeExperiment)(A,X,J);if(I.__evaluation!=null)I.__evaluation.secondary_exposures=(0,T8._mapExposures)((G=(B=I.__evaluation)===null||B===void 0?void 0:B.secondary_exposures)!==null&&G!==void 0?G:[],this._store.getExposureMapping());let W=(Y=(Z=this.overrideAdapter)===null||Z===void 0?void 0:Z.getExperimentOverride)===null||Y===void 0?void 0:Y.call(Z,I,this._user,Q),D=W!==null&&W!==void 0?W:I;return this._enqueueExposure(A,(0,T8._createConfigExposure)(this._user,D,this._store.getExposureMapping()),Q),this.$emt({name:"experiment_evaluation",experiment:D}),D}_getLayerImpl(A,Q){var B,G,Z;let{result:Y,details:J}=this._store.getLayer(A),X=(0,T8._makeLayer)(A,J,Y),I=(G=(B=this.overrideAdapter)===null||B===void 0?void 0:B.getLayerOverride)===null||G===void 0?void 0:G.call(B,X,this._user,Q);if(Q===null||Q===void 0?void 0:Q.disableExposureLog)this._logger.incrementNonExposureCount(A);let W=(0,T8._mergeOverride)(X,I,(Z=I===null||I===void 0?void 0:I.__value)!==null&&Z!==void 0?Z:X.__value,(D)=>{if(Q===null||Q===void 0?void 0:Q.disableExposureLog)return;this._enqueueExposure(A,(0,T8._createLayerParameterExposure)(this._user,W,D,this._store.getExposureMapping()),Q)});return this.$emt({name:"layer_evaluation",layer:W}),W}_getParameterStoreImpl(A,Q){var B,G;let{result:Z,details:Y}=this._store.getParamStore(A);this._logger.incrementNonExposureCount(A);let J={name:A,details:Y,__configuration:Z,get:(0,_zQ._makeParamStoreGetter)(this,Z,Q)},X=(G=(B=this.overrideAdapter)===null||B===void 0?void 0:B.getParamStoreOverride)===null||G===void 0?void 0:G.call(B,J,Q);if(X!=null)J.__configuration=X.config,J.details=X.details,J.get=(0,_zQ._makeParamStoreGetter)(this,X.config,Q);return J}}wqA.default=MnA});var PzQ=U((ey)=>{var Pm4=ey&&ey.__createBinding||(Object.create?function(A,Q,B,G){if(G===void 0)G=B;var Z=Object.getOwnPropertyDescriptor(Q,B);if(!Z||("get"in Z?!Q.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Q[B]}};Object.defineProperty(A,G,Z)}:function(A,Q,B,G){if(G===void 0)G=B;A[G]=Q[B]}),Sm4=ey&&ey.__exportStar||function(A,Q){for(var B in A)if(B!=="default"&&!Object.prototype.hasOwnProperty.call(Q,B))Pm4(Q,A,B)};Object.defineProperty(ey,"__esModule",{value:!0});ey.StatsigClient=void 0;var TzQ=jzQ();ey.StatsigClient=TzQ.default;Sm4(Di(),ey);__STATSIG__=Object.assign(Object.assign({},__STATSIG__!==null&&__STATSIG__!==void 0?__STATSIG__:{}),{StatsigClient:TzQ.default});ey.default=__STATSIG__});var xm4,ym4,vm4;var SzQ=w(()=>{xm4={visibilityState:"visible",documentElement:{lang:"en"},addEventListener:(A,Q)=>{}},ym4={document:xm4,location:{href:"node://localhost",pathname:"/"},addEventListener:(A,Q)=>{if(A==="beforeunload")process.on("exit",()=>{if(typeof Q==="function")Q({});else Q.handleEvent({})})},focus:()=>{},innerHeight:768,innerWidth:1024},vm4={sendBeacon:(A,Q)=>{return!0},userAgent:"Mozilla/5.0 (Node.js) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0",language:"en-US"};if(typeof window>"u")global.window=ym4;if(typeof navigator>"u")global.navigator=vm4});import*as LqA from"path";import{existsSync as xzQ,mkdirSync as km4,readdirSync as bm4,readFileSync as fm4,unlinkSync as hm4}from"fs";import{writeFile as gm4}from"fs/promises";function JZA(){return LqA.join(zQ(),"statsig")}class wT1{cache=new Map;ready=!1;constructor(){try{if(!xzQ(JZA()))km4(JZA(),{recursive:!0});let A=bm4(JZA());for(let Q of A){let B=decodeURIComponent(Q),G=fm4(LqA.join(JZA(),Q),"utf8");this.cache.set(B,G)}this.ready=!0}catch(A){s(A),this.ready=!0}}isReady(){return this.ready}isReadyResolver(){return this.ready?Promise.resolve():null}getProviderName(){return"FileSystemStorageProvider"}getItem(A){return this.cache.get(A)??null}setItem(A,Q){this.cache.set(A,Q);let B=encodeURIComponent(A);gm4(LqA.join(JZA(),B),Q,"utf8").catch((G)=>s(G))}removeItem(A){this.cache.delete(A);let Q=encodeURIComponent(A),B=LqA.join(JZA(),Q);if(!xzQ(B))return;try{hm4(B)}catch(G){s(G)}}getAllKeys(){return Array.from(this.cache.keys())}}var yzQ=w(()=>{f1();bQ()});function RnA(A){try{let Q=String(A),B=process.platform==="win32"?`powershell.exe -NoProfile -Command "(Get-CimInstance Win32_Process -Filter \\"ProcessId=${Q}\\").ParentProcessId"`:`ps -o ppid= -p ${Q}`,G=OD(B,{timeout:1000});return G?G.trim():null}catch{return null}}function _nA(A){try{let Q=String(A),B=process.platform==="win32"?`powershell.exe -NoProfile -Command "(Get-CimInstance Win32_Process -Filter \\"ProcessId=${Q}\\").CommandLine"`:`ps -o command= -p ${Q}`,G=OD(B,{timeout:1000});return G?G.trim():null}catch{return null}}var jnA=w(()=>{V6()});function cm4(){if(process.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"){if(n0.platform!=="darwin")return pm4()||"pycharm"}return n0.terminal}var um4,mm4=()=>{return process.platform==="linux"&&process.env.CLAUDE_CODE_BUBBLEWRAP==="1"},dm4,pm4,Yq;var y1A=w(()=>{V6();jnA();X9();EQ();y1();h3();um4=W0(async()=>{let{code:A}=await PQ("test",["-f","/.dockerenv"]);if(A!==0)return!1;return process.platform==="linux"}),dm4=W0(()=>{if(process.platform!=="linux")return!1;let A=xA();try{if(A.existsSync("/lib/libc.musl-x86_64.so.1")||A.existsSync("/lib/libc.musl-aarch64.so.1"))return!0;let Q=OD("ldd /bin/ls 2>/dev/null");return Q!==null&&Q.includes("musl")}catch{return k("musl detection failed, assuming glibc"),!1}}),pm4=W0(()=>{if(process.platform==="darwin")return null;try{let Q=process.pid.toString();for(let B=0;B<10;B++){let G=_nA(Q);if(G){let Y=G.toLowerCase();for(let J of GM1)if(Y.includes(J))return J}let Z=RnA(Q);if(!Z||Z==="0"||Z===Q)break;Q=Z}}catch{}return null});Yq={...n0,terminal:cm4(),getIsDocker:um4,getIsBubblewrapSandbox:mm4,isMuslEnvironment:dm4}});function vzQ(A){
if(A.includes("glm/glm-4.7"))return" GLM-4.7 (Orchestrator/Builder)";
if(A.includes("glm/glm-4-flash"))return" GLM-4 Flash (Free)";
if(A.includes("google/gemini-3-pro"))return" Gemini 3 Pro (Frontend/Research)";
if(A.includes("google/gemini-2.0-flash"))return" Gemini 2.0 Flash";
if(A.includes("dphn/Dolphin"))return" Dolphin-3 (Security/RE)";
if(A.includes("Qwen2.5-72B-Instruct-abliterated"))return" Qwen 72B (Unrestricted)";
if(A.includes("WhiteRabbitNeo"))return" WhiteRabbitNeo 70B (Unrestricted)";
if(A.includes("Llama-3-70B-Instruct-abliterated"))return" Llama 70B (Uncensored)";
if(A.includes("Llama-3-8B-Instruct-abliterated"))return" Llama 8B (Uncensored)";if(a4()==="foundry")return;let Q=A.toLowerCase();if(Q.includes("claude-sonnet-4-5")&&Q.includes("[1m]"))return"Sonnet 4.5 (with 1M context)";if(Q.includes("claude-sonnet-4-5"))return"Sonnet 4.5";if(Q.includes("claude-sonnet-4")&&Q.includes("[1m]"))return"Sonnet 4 (with 1M context)";if(Q.includes("claude-sonnet-4"))return"Sonnet 4";if(Q.includes("claude-opus-4-5"))return"Opus 4.5";if(Q.includes("claude-opus-4-1"))return"Opus 4.1";if(Q.includes("claude-opus-4"))return"Opus 4";if(Q.includes("claude-3-7-sonnet"))return"Claude 3.7 Sonnet";if(Q.includes("claude-3-5-sonnet"))return"Claude 3.5 Sonnet";if(Q.includes("claude-haiku-4-5"))return"Haiku 4.5";if(Q.includes("claude-3-5-haiku"))return"Claude 3.5 Haiku";return}var OqA,MqA,RqA,_qA,v1A,LT1,jqA,TqA,PqA;var SqA=w(()=>{jD();OqA={firstParty:"claude-3-7-sonnet-20250219",bedrock:"us.anthropic.claude-3-7-sonnet-20250219-v1:0",vertex:"claude-3-7-sonnet@20250219",foundry:"claude-3-7-sonnet"},MqA={firstParty:"claude-3-5-sonnet-20241022",bedrock:"anthropic.claude-3-5-sonnet-20241022-v2:0",vertex:"claude-3-5-sonnet-v2@20241022",foundry:"claude-3-5-sonnet"},RqA={firstParty:"claude-3-5-haiku-20241022",bedrock:"us.anthropic.claude-3-5-haiku-20241022-v1:0",vertex:"claude-3-5-haiku@20241022",foundry:"claude-3-5-haiku"},_qA={firstParty:"claude-haiku-4-5-20251001",bedrock:"us.anthropic.claude-haiku-4-5-20251001-v1:0",vertex:"claude-haiku-4-5@20251001",foundry:"claude-haiku-4-5"},v1A={firstParty:"claude-sonnet-4-20250514",bedrock:"us.anthropic.claude-sonnet-4-20250514-v1:0",vertex:"claude-sonnet-4@20250514",foundry:"claude-sonnet-4"},LT1={firstParty:"claude-sonnet-4-5-20250929",bedrock:"us.anthropic.claude-sonnet-4-5-20250929-v1:0",vertex:"claude-sonnet-4-5@20250929",foundry:"claude-sonnet-4-5"},jqA={firstParty:"claude-opus-4-20250514",bedrock:"us.anthropic.claude-opus-4-20250514-v1:0",vertex:"claude-opus-4@20250514",foundry:"claude-opus-4"},TqA={firstParty:"claude-opus-4-1-20250805",bedrock:"us.anthropic.claude-opus-4-1-20250805-v1:0",vertex:"claude-opus-4-1@20250805",foundry:"claude-opus-4-1"},PqA={firstParty:"claude-opus-4-5-20251101",bedrock:"us.anthropic.claude-opus-4-5-20251101-v1:0",vertex:"claude-opus-4-5@20251101",foundry:"claude-opus-4-5"}
// Custom models injected by patch for clauded
,XqA={firstParty:"glm/glm-4.7",bedrock:"glm/glm-4.7",vertex:"glm/glm-4.7",foundry:"glm/glm-4.7"}
,YqA={firstParty:"glm/glm-4-flash",bedrock:"glm/glm-4-flash",vertex:"glm/glm-4-flash",foundry:"glm/glm-4-flash"}
,ZqA={firstParty:"google/gemini-3-pro",bedrock:"google/gemini-3-pro",vertex:"google/gemini-3-pro",foundry:"google/gemini-3-pro"}
,WqA={firstParty:"google/gemini-2.0-flash",bedrock:"google/gemini-2.0-flash",vertex:"google/gemini-2.0-flash",foundry:"google/gemini-2.0-flash"}
,VqA={firstParty:"featherless/dphn/Dolphin-Mistral-24B-Venice-Edition",bedrock:"featherless/dphn/Dolphin-Mistral-24B-Venice-Edition",vertex:"featherless/dphn/Dolphin-Mistral-24B-Venice-Edition",foundry:"featherless/dphn/Dolphin-Mistral-24B-Venice-Edition"}
,UqA={firstParty:"featherless/huihui-ai/Qwen2.5-72B-Instruct-abliterated",bedrock:"featherless/huihui-ai/Qwen2.5-72B-Instruct-abliterated",vertex:"featherless/huihui-ai/Qwen2.5-72B-Instruct-abliterated",foundry:"featherless/huihui-ai/Qwen2.5-72B-Instruct-abliterated"}
,TqA={firstParty:"featherless/WhiteRabbitNeo/Llama-3.1-WhiteRabbitNeo-2-70B",bedrock:"featherless/WhiteRabbitNeo/Llama-3.1-WhiteRabbitNeo-2-70B",vertex:"featherless/WhiteRabbitNeo/Llama-3.1-WhiteRabbitNeo-2-70B",foundry:"featherless/WhiteRabbitNeo/Llama-3.1-WhiteRabbitNeo-2-70B"}
,SqA={firstParty:"featherless/Llama-3-70B-Instruct-abliterated",bedrock:"featherless/Llama-3-70B-Instruct-abliterated",vertex:"featherless/Llama-3-70B-Instruct-abliterated",foundry:"featherless/Llama-3-70B-Instruct-abliterated"}
,RqA={firstParty:"featherless/Llama-3-8B-Instruct-abliterated",bedrock:"featherless/Llama-3-8B-Instruct-abliterated",vertex:"featherless/Llama-3-8B-Instruct-abliterated",foundry:"featherless/Llama-3-8B-Instruct-abliterated"}});var kzQ=U((rm4)=>{rm4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(rm4.HttpAuthLocation||(rm4.HttpAuthLocation={}));rm4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(rm4.HttpApiKeyAuthLocation||(rm4.HttpApiKeyAuthLocation={}));rm4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(rm4.EndpointURLScheme||(rm4.EndpointURLScheme={}));rm4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(rm4.AlgorithmId||(rm4.AlgorithmId={}));var lm4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>rm4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>rm4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},im4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},nm4=(A)=>{return lm4(A)},am4=(A)=>{return im4(A)};rm4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(rm4.FieldPosition||(rm4.FieldPosition={}));var om4="__smithy_context";rm4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(rm4.IniSectionType||(rm4.IniSectionType={}));rm4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(rm4.RequestHandlerProtocol||(rm4.RequestHandlerProtocol={}));rm4.SMITHY_CONTEXT_KEY=om4;rm4.getDefaultClientConfiguration=nm4;rm4.resolveDefaultRuntimeConfig=am4});var gzQ=U((Yd4)=>{var Ad4=kzQ(),Qd4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},Bd4=(A)=>{return{httpHandler:A.httpHandler()}};class bzQ{name;kind;values;constructor({name:A,kind:Q=Ad4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class fzQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class TnA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new TnA({...A,headers:{...A.headers}});if(Q.query)Q.query=Gd4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return TnA.clone(this)}}function Gd4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class hzQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function Zd4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}Yd4.Field=bzQ;Yd4.Fields=fzQ;Yd4.HttpRequest=TnA;Yd4.HttpResponse=hzQ;Yd4.getHttpHandlerExtensionConfiguration=Qd4;Yd4.isValidHostname=Zd4;Yd4.resolveHttpHandlerRuntimeConfig=Bd4});var zg=U((zd4)=>{var Fd4=gzQ();function Hd4(A){return A}var uzQ=(A)=>(Q)=>async(B)=>{if(!Fd4.HttpRequest.isInstance(B.request))return Q(B);let{request:G}=B,{handlerProtocol:Z=""}=A.requestHandler.metadata||{};if(Z.indexOf("h2")>=0&&!G.headers[":authority"])delete G.headers.host,G.headers[":authority"]=G.hostname+(G.port?":"+G.port:"");else if(!G.headers.host){let Y=G.hostname;if(G.port!=null)Y+=`:${G.port}`;G.headers.host=Y}return Q(B)},mzQ={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ed4=(A)=>({applyToStack:(Q)=>{Q.add(uzQ(A),mzQ)}});zd4.getHostHeaderPlugin=Ed4;zd4.hostHeaderMiddleware=uzQ;zd4.hostHeaderMiddlewareOptions=mzQ;zd4.resolveHostHeaderConfig=Hd4});var Cg=U((wd4)=>{var dzQ=()=>(A,Q)=>async(B)=>{try{let G=await A(B),{clientName:Z,commandName:Y,logger:J,dynamoDbDocumentClientOptions:X={}}=Q,{overrideInputFilterSensitiveLog:I,overrideOutputFilterSensitiveLog:W}=X,D=I??Q.inputFilterSensitiveLog,K=W??Q.outputFilterSensitiveLog,{$metadata:V,...F}=G.output;return J?.info?.({clientName:Z,commandName:Y,input:D(B.input),output:K(F),metadata:V}),G}catch(G){let{clientName:Z,commandName:Y,logger:J,dynamoDbDocumentClientOptions:X={}}=Q,{overrideInputFilterSensitiveLog:I}=X,W=I??Q.inputFilterSensitiveLog;throw J?.error?.({clientName:Z,commandName:Y,input:W(B.input),error:G,metadata:G.$metadata}),G}},pzQ={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Nd4=(A)=>({applyToStack:(Q)=>{Q.add(dzQ(),pzQ)}});wd4.getLoggerPlugin=Nd4;wd4.loggerMiddleware=dzQ;wd4.loggerMiddlewareOptions=pzQ});var lzQ=U((Rd4)=>{var yqA={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},PT1=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");if(!PT1)globalThis.awslambda=globalThis.awslambda||{};class PnA{static PROTECTED_KEYS=yqA;isProtectedKey(A){return Object.values(yqA).includes(A)}getRequestId(){return this.get(yqA.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(yqA.X_RAY_TRACE_ID)}getTenantId(){return this.get(yqA.TENANT_ID)}}class czQ extends PnA{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(A){return this.currentContext?.[A]}set(A,Q){if(this.isProtectedKey(A))throw Error(`Cannot modify protected Lambda context field: ${String(A)}`);this.currentContext=this.currentContext||{},this.currentContext[A]=Q}run(A,Q){this.currentContext=A;try{return Q()}finally{this.currentContext=void 0}}}class xT1 extends PnA{als;static async create(){let A=new xT1,Q=await import("node:async_hooks");return A.als=new Q.AsyncLocalStorage,A}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(A){return this.als.getStore()?.[A]}set(A,Q){if(this.isProtectedKey(A))throw Error(`Cannot modify protected Lambda context field: ${String(A)}`);let B=this.als.getStore();if(!B)throw Error("No context available");B[A]=Q}run(A,Q){return this.als.run(A,Q)}}Rd4.InvokeStore=void 0;(function(A){let Q=null;async function B(){if(!Q)Q=(async()=>{let Z="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await xT1.create():new czQ;if(!PT1&&globalThis.awslambda?.InvokeStore)return globalThis.awslambda.InvokeStore;else if(!PT1&&globalThis.awslambda)return globalThis.awslambda.InvokeStore=Z,Z;else return Z})();return Q}A.getInstanceAsync=B,A._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{if(Q=null,globalThis.awslambda?.InvokeStore)delete globalThis.awslambda.InvokeStore;globalThis.awslambda={}}}:void 0})(Rd4.InvokeStore||(Rd4.InvokeStore={}));Rd4.InvokeStoreBase=PnA});var izQ=U((yd4)=>{yd4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(yd4.HttpAuthLocation||(yd4.HttpAuthLocation={}));yd4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(yd4.HttpApiKeyAuthLocation||(yd4.HttpApiKeyAuthLocation={}));yd4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(yd4.EndpointURLScheme||(yd4.EndpointURLScheme={}));yd4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(yd4.AlgorithmId||(yd4.AlgorithmId={}));var jd4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>yd4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>yd4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},Td4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Pd4=(A)=>{return jd4(A)},Sd4=(A)=>{return Td4(A)};yd4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(yd4.FieldPosition||(yd4.FieldPosition={}));var xd4="__smithy_context";yd4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(yd4.IniSectionType||(yd4.IniSectionType={}));yd4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(yd4.RequestHandlerProtocol||(yd4.RequestHandlerProtocol={}));yd4.SMITHY_CONTEXT_KEY=xd4;yd4.getDefaultClientConfiguration=Pd4;yd4.resolveDefaultRuntimeConfig=Sd4});var rzQ=U((dd4)=>{var fd4=izQ(),hd4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},gd4=(A)=>{return{httpHandler:A.httpHandler()}};class nzQ{name;kind;values;constructor({name:A,kind:Q=fd4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class azQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class SnA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new SnA({...A,headers:{...A.headers}});if(Q.query)Q.query=ud4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return SnA.clone(this)}}function ud4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class ozQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function md4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}dd4.Field=nzQ;dd4.Fields=azQ;dd4.HttpRequest=SnA;dd4.HttpResponse=ozQ;dd4.getHttpHandlerExtensionConfiguration=hd4;dd4.isValidHostname=md4;dd4.resolveHttpHandlerRuntimeConfig=gd4});var ezQ=U((szQ)=>{Object.defineProperty(szQ,"__esModule",{value:!0});szQ.recursionDetectionMiddleware=void 0;var rd4=lzQ(),sd4=rzQ(),gT1="X-Amzn-Trace-Id",td4="AWS_LAMBDA_FUNCTION_NAME",ed4="_X_AMZN_TRACE_ID",Ap4=()=>(A)=>async(Q)=>{let{request:B}=Q;if(!sd4.HttpRequest.isInstance(B))return A(Q);let G=Object.keys(B.headers??{}).find((D)=>D.toLowerCase()===gT1.toLowerCase())??gT1;if(B.headers.hasOwnProperty(G))return A(Q);let Z=process.env[td4],Y=process.env[ed4],I=(await rd4.InvokeStore.getInstanceAsync())?.getXRayTraceId()??Y,W=(D)=>typeof D==="string"&&D.length>0;if(W(Z)&&W(I))B.headers[gT1]=I;return A({...Q,request:B})};szQ.recursionDetectionMiddleware=Ap4});var $g=U((mT1)=>{var uT1=ezQ(),Qp4={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Bp4=(A)=>({applyToStack:(Q)=>{Q.add(uT1.recursionDetectionMiddleware(),Qp4)}});mT1.getRecursionDetectionPlugin=Bp4;Object.keys(uT1).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(mT1,A))Object.defineProperty(mT1,A,{enumerable:!0,get:function(){return uT1[A]}})})});var aT1=U((Wp4)=>{Wp4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(Wp4.HttpAuthLocation||(Wp4.HttpAuthLocation={}));Wp4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(Wp4.HttpApiKeyAuthLocation||(Wp4.HttpApiKeyAuthLocation={}));Wp4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(Wp4.EndpointURLScheme||(Wp4.EndpointURLScheme={}));Wp4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(Wp4.AlgorithmId||(Wp4.AlgorithmId={}));var Zp4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>Wp4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>Wp4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},Yp4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Jp4=(A)=>{return Zp4(A)},Xp4=(A)=>{return Yp4(A)};Wp4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(Wp4.FieldPosition||(Wp4.FieldPosition={}));var Ip4="__smithy_context";Wp4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(Wp4.IniSectionType||(Wp4.IniSectionType={}));Wp4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(Wp4.RequestHandlerProtocol||(Wp4.RequestHandlerProtocol={}));Wp4.SMITHY_CONTEXT_KEY=Ip4;Wp4.getDefaultClientConfiguration=Jp4;Wp4.resolveDefaultRuntimeConfig=Xp4});var ACQ=U(($p4)=>{$p4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})($p4.HttpAuthLocation||($p4.HttpAuthLocation={}));$p4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})($p4.HttpApiKeyAuthLocation||($p4.HttpApiKeyAuthLocation={}));$p4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})($p4.EndpointURLScheme||($p4.EndpointURLScheme={}));$p4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})($p4.AlgorithmId||($p4.AlgorithmId={}));var Fp4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>$p4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>$p4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},Hp4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Ep4=(A)=>{return Fp4(A)},zp4=(A)=>{return Hp4(A)};$p4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})($p4.FieldPosition||($p4.FieldPosition={}));var Cp4="__smithy_context";$p4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})($p4.IniSectionType||($p4.IniSectionType={}));$p4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})($p4.RequestHandlerProtocol||($p4.RequestHandlerProtocol={}));$p4.SMITHY_CONTEXT_KEY=Cp4;$p4.getDefaultClientConfiguration=Ep4;$p4.resolveDefaultRuntimeConfig=zp4});var Iz=U((Op4)=>{var QCQ=ACQ(),wp4=(A)=>A[QCQ.SMITHY_CONTEXT_KEY]||(A[QCQ.SMITHY_CONTEXT_KEY]={}),Lp4=(A)=>{if(typeof A==="function")return A;let Q=Promise.resolve(A);return()=>Q};Op4.getSmithyContext=wp4;Op4.normalizeProvider=Lp4});var BCQ=U((xp4)=>{xp4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(xp4.HttpAuthLocation||(xp4.HttpAuthLocation={}));xp4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(xp4.HttpApiKeyAuthLocation||(xp4.HttpApiKeyAuthLocation={}));xp4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(xp4.EndpointURLScheme||(xp4.EndpointURLScheme={}));xp4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(xp4.AlgorithmId||(xp4.AlgorithmId={}));var _p4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>xp4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>xp4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},jp4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Tp4=(A)=>{return _p4(A)},Pp4=(A)=>{return jp4(A)};xp4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(xp4.FieldPosition||(xp4.FieldPosition={}));var Sp4="__smithy_context";xp4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(xp4.IniSectionType||(xp4.IniSectionType={}));xp4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(xp4.RequestHandlerProtocol||(xp4.RequestHandlerProtocol={}));xp4.SMITHY_CONTEXT_KEY=Sp4;xp4.getDefaultClientConfiguration=Tp4;xp4.resolveDefaultRuntimeConfig=Pp4});var JCQ=U((mp4)=>{var bp4=BCQ(),fp4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},hp4=(A)=>{return{httpHandler:A.httpHandler()}};class GCQ{name;kind;values;constructor({name:A,kind:Q=bp4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class ZCQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class xnA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new xnA({...A,headers:{...A.headers}});if(Q.query)Q.query=gp4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return xnA.clone(this)}}function gp4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class YCQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function up4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}mp4.Field=GCQ;mp4.Fields=ZCQ;mp4.HttpRequest=xnA;mp4.HttpResponse=YCQ;mp4.getHttpHandlerExtensionConfiguration=fp4;mp4.isValidHostname=up4;mp4.resolveHttpHandlerRuntimeConfig=hp4});var IP1=U((sp4)=>{var op4=JCQ(),XCQ=(A,Q)=>(B,G)=>async(Z)=>{let{response:Y}=await B(Z);try{let J=await Q(Y,A);return{response:Y,output:J}}catch(J){if(Object.defineProperty(J,"$response",{value:Y,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in J)){try{J.message+=`
  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`}catch(I){if(!G.logger||G.logger?.constructor?.name==="NoOpLogger")console.warn("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.");else G.logger?.warn?.("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.")}if(typeof J.$responseBodyText<"u"){if(J.$response)J.$response.body=J.$responseBodyText}try{if(op4.HttpResponse.isInstance(Y)){let{headers:I={}}=Y,W=Object.entries(I);J.$metadata={httpStatusCode:Y.statusCode,requestId:XP1(/^x-[\w-]+-request-?id$/,W),extendedRequestId:XP1(/^x-[\w-]+-id-2$/,W),cfId:XP1(/^x-[\w-]+-cf-id$/,W)}}}catch(I){}}throw J}},XP1=(A,Q)=>{return(Q.find(([B])=>{return B.match(A)})||[void 0,void 0])[1]},ICQ=(A,Q)=>(B,G)=>async(Z)=>{let Y=A,J=G.endpointV2?.url&&Y.urlParser?async()=>Y.urlParser(G.endpointV2.url):Y.endpoint;if(!J)throw Error("No valid endpoint provider available.");let X=await Q(Z.input,{...A,endpoint:J});return B({...Z,request:X})},WCQ={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},DCQ={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function rp4(A,Q,B){return{applyToStack:(G)=>{G.add(XCQ(A,B),WCQ),G.add(ICQ(A,Q),DCQ)}}}sp4.deserializerMiddleware=XCQ;sp4.deserializerMiddlewareOption=WCQ;sp4.getSerdePlugin=rp4;sp4.serializerMiddleware=ICQ;sp4.serializerMiddlewareOption=DCQ});var hqA=U((Ic4)=>{var Gc4=aT1(),Zc4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},Yc4=(A)=>{return{httpHandler:A.httpHandler()}};class KCQ{name;kind;values;constructor({name:A,kind:Q=Gc4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class VCQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class ynA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new ynA({...A,headers:{...A.headers}});if(Q.query)Q.query=Jc4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return ynA.clone(this)}}function Jc4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class FCQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function Xc4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}Ic4.Field=KCQ;Ic4.Fields=VCQ;Ic4.HttpRequest=ynA;Ic4.HttpResponse=FCQ;Ic4.getHttpHandlerExtensionConfiguration=Zc4;Ic4.isValidHostname=Xc4;Ic4.resolveHttpHandlerRuntimeConfig=Yc4});var HCQ=U((Cc4)=>{var zc4=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";Cc4.isArrayBuffer=zc4});var vnA=U((wc4)=>{var Uc4=HCQ(),WP1=qA("buffer"),qc4=(A,Q=0,B=A.byteLength-Q)=>{if(!Uc4.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return WP1.Buffer.from(A,Q,B)},Nc4=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?WP1.Buffer.from(A,Q):WP1.Buffer.from(A)};wc4.fromArrayBuffer=qc4;wc4.fromString=Nc4});var CCQ=U((ECQ)=>{Object.defineProperty(ECQ,"__esModule",{value:!0});ECQ.fromBase64=void 0;var Mc4=vnA(),Rc4=/^[A-Za-z0-9+/]*={0,2}$/,_c4=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!Rc4.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,Mc4.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};ECQ.fromBase64=_c4});var $CQ=U((Tc4)=>{var jc4=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";Tc4.isArrayBuffer=jc4});var UCQ=U((vc4)=>{var Sc4=$CQ(),DP1=qA("buffer"),xc4=(A,Q=0,B=A.byteLength-Q)=>{if(!Sc4.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return DP1.Buffer.from(A,Q,B)},yc4=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?DP1.Buffer.from(A,Q):DP1.Buffer.from(A)};vc4.fromArrayBuffer=xc4;vc4.fromString=yc4});var lG=U((gc4)=>{var qCQ=UCQ(),NCQ=(A)=>{let Q=qCQ.fromString(A,"utf8");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength/Uint8Array.BYTES_PER_ELEMENT)},fc4=(A)=>{if(typeof A==="string")return NCQ(A);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(A)},hc4=(A)=>{if(typeof A==="string")return A;if(typeof A!=="object"||typeof A.byteOffset!=="number"||typeof A.byteLength!=="number")throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return qCQ.fromArrayBuffer(A.buffer,A.byteOffset,A.byteLength).toString("utf8")};gc4.fromUtf8=NCQ;gc4.toUint8Array=fc4;gc4.toUtf8=hc4});var OCQ=U((wCQ)=>{Object.defineProperty(wCQ,"__esModule",{value:!0});wCQ.toBase64=void 0;var pc4=vnA(),cc4=lG(),lc4=(A)=>{let Q;if(typeof A==="string")Q=(0,cc4.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,pc4.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};wCQ.toBase64=lc4});var XZA=U((gqA)=>{var MCQ=CCQ(),RCQ=OCQ();Object.keys(MCQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(gqA,A))Object.defineProperty(gqA,A,{enumerable:!0,get:function(){return MCQ[A]}})});Object.keys(RCQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(gqA,A))Object.defineProperty(gqA,A,{enumerable:!0,get:function(){return RCQ[A]}})})});var KP1=U((jCQ)=>{Object.defineProperty(jCQ,"__esModule",{value:!0});jCQ.ChecksumStream=void 0;var ic4=XZA(),nc4=qA("stream");class _CQ extends nc4.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:A,checksum:Q,source:B,checksumSourceLocation:G,base64Encoder:Z}){super();if(typeof B.pipe==="function")this.source=B;else throw Error(`@smithy/util-stream: unsupported source type ${B?.constructor?.name??B} in ChecksumStream.`);this.base64Encoder=Z??ic4.toBase64,this.expectedChecksum=A,this.checksum=Q,this.checksumSourceLocation=G,this.source.pipe(this)}_read(A){}_write(A,Q,B){try{this.checksum.update(A),this.push(A)}catch(G){return B(G)}return B()}async _final(A){try{let Q=await this.checksum.digest(),B=this.base64Encoder(Q);if(this.expectedChecksum!==B)return A(Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${B}" in response header "${this.checksumSourceLocation}".`))}catch(Q){return A(Q)}return this.push(null),A()}}jCQ.ChecksumStream=_CQ});var Ki=U((PCQ)=>{Object.defineProperty(PCQ,"__esModule",{value:!0});PCQ.isBlob=PCQ.isReadableStream=void 0;var ac4=(A)=>typeof ReadableStream==="function"&&(A?.constructor?.name===ReadableStream.name||A instanceof ReadableStream);PCQ.isReadableStream=ac4;var oc4=(A)=>{return typeof Blob==="function"&&(A?.constructor?.name===Blob.name||A instanceof Blob)};PCQ.isBlob=oc4});var kCQ=U((yCQ)=>{Object.defineProperty(yCQ,"__esModule",{value:!0});yCQ.ChecksumStream=void 0;var sc4=typeof ReadableStream==="function"?ReadableStream:function(){};class xCQ extends sc4{}yCQ.ChecksumStream=xCQ});var hCQ=U((bCQ)=>{Object.defineProperty(bCQ,"__esModule",{value:!0});bCQ.createChecksumStream=void 0;var tc4=XZA(),ec4=Ki(),Al4=kCQ(),Ql4=({expectedChecksum:A,checksum:Q,source:B,checksumSourceLocation:G,base64Encoder:Z})=>{if(!(0,ec4.isReadableStream)(B))throw Error(`@smithy/util-stream: unsupported source type ${B?.constructor?.name??B} in ChecksumStream.`);let Y=Z??tc4.toBase64;if(typeof TransformStream!=="function")throw Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let J=new TransformStream({start(){},async transform(I,W){Q.update(I),W.enqueue(I)},async flush(I){let W=await Q.digest(),D=Y(W);if(A!==D){let K=Error(`Checksum mismatch: expected "${A}" but received "${D}" in response header "${G}".`);I.error(K)}else I.terminate()}});B.pipeThrough(J);let X=J.readable;return Object.setPrototypeOf(X,Al4.ChecksumStream.prototype),X};bCQ.createChecksumStream=Ql4});var uCQ=U((gCQ)=>{Object.defineProperty(gCQ,"__esModule",{value:!0});gCQ.createChecksumStream=Yl4;var Bl4=Ki(),Gl4=KP1(),Zl4=hCQ();function Yl4(A){if(typeof ReadableStream==="function"&&(0,Bl4.isReadableStream)(A.source))return(0,Zl4.createChecksumStream)(A);return new Gl4.ChecksumStream(A)}});var VP1=U((dCQ)=>{Object.defineProperty(dCQ,"__esModule",{value:!0});dCQ.ByteArrayCollector=void 0;class mCQ{allocByteArray;byteLength=0;byteArrays=[];constructor(A){this.allocByteArray=A}push(A){this.byteArrays.push(A),this.byteLength+=A.byteLength}flush(){if(this.byteArrays.length===1){let B=this.byteArrays[0];return this.reset(),B}let A=this.allocByteArray(this.byteLength),Q=0;for(let B=0;B<this.byteArrays.length;++B){let G=this.byteArrays[B];A.set(G,Q),Q+=G.byteLength}return this.reset(),A}reset(){this.byteArrays=[],this.byteLength=0}}dCQ.ByteArrayCollector=mCQ});var oCQ=U((nCQ)=>{Object.defineProperty(nCQ,"__esModule",{value:!0});nCQ.createBufferedReadable=void 0;nCQ.createBufferedReadableStream=cCQ;nCQ.merge=lCQ;nCQ.flush=knA;nCQ.sizeOf=IZA;nCQ.modeOf=iCQ;var Xl4=VP1();function cCQ(A,Q,B){let G=A.getReader(),Z=!1,Y=0,J=["",new Xl4.ByteArrayCollector((W)=>new Uint8Array(W))],X=-1,I=async(W)=>{let{value:D,done:K}=await G.read(),V=D;if(K){if(X!==-1){let F=knA(J,X);if(IZA(F)>0)W.enqueue(F)}W.close()}else{let F=iCQ(V,!1);if(X!==F){if(X>=0)W.enqueue(knA(J,X));X=F}if(X===-1){W.enqueue(V);return}let H=IZA(V);Y+=H;let E=IZA(J[X]);if(H>=Q&&E===0)W.enqueue(V);else{let z=lCQ(J,X,V);if(!Z&&Y>Q*2)Z=!0,B?.warn(`@smithy/util-stream - stream chunk size ${H} is below threshold of ${Q}, automatically buffering.`);if(z>=Q)W.enqueue(knA(J,X));else await I(W)}}};return new ReadableStream({pull:I})}nCQ.createBufferedReadable=cCQ;function lCQ(A,Q,B){switch(Q){case 0:return A[0]+=B,IZA(A[0]);case 1:case 2:return A[Q].push(B),IZA(A[Q])}}function knA(A,Q){switch(Q){case 0:let B=A[0];return A[0]="",B;case 1:case 2:return A[Q].flush()}throw Error(`@smithy/util-stream - invalid index ${Q} given to flush()`)}function IZA(A){return A?.byteLength??A?.length??0}function iCQ(A,Q=!0){if(Q&&typeof Buffer<"u"&&A instanceof Buffer)return 2;if(A instanceof Uint8Array)return 1;if(typeof A==="string")return 0;return-1}});var tCQ=U((sCQ)=>{Object.defineProperty(sCQ,"__esModule",{value:!0});sCQ.createBufferedReadable=El4;var Fl4=qA("node:stream"),rCQ=VP1(),Ug=oCQ(),Hl4=Ki();function El4(A,Q,B){if((0,Hl4.isReadableStream)(A))return(0,Ug.createBufferedReadableStream)(A,Q,B);let G=new Fl4.Readable({read(){}}),Z=!1,Y=0,J=["",new rCQ.ByteArrayCollector((I)=>new Uint8Array(I)),new rCQ.ByteArrayCollector((I)=>Buffer.from(new Uint8Array(I)))],X=-1;return A.on("data",(I)=>{let W=(0,Ug.modeOf)(I,!0);if(X!==W){if(X>=0)G.push((0,Ug.flush)(J,X));X=W}if(X===-1){G.push(I);return}let D=(0,Ug.sizeOf)(I);Y+=D;let K=(0,Ug.sizeOf)(J[X]);if(D>=Q&&K===0)G.push(I);else{let V=(0,Ug.merge)(J,X,I);if(!Z&&Y>Q*2)Z=!0,B?.warn(`@smithy/util-stream - stream chunk size ${D} is below threshold of ${Q}, automatically buffering.`);if(V>=Q)G.push((0,Ug.flush)(J,X))}}),A.on("end",()=>{if(X!==-1){let I=(0,Ug.flush)(J,X);if((0,Ug.sizeOf)(I)>0)G.push(I)}G.push(null)}),G}});var Q$Q=U((eCQ)=>{Object.defineProperty(eCQ,"__esModule",{value:!0});eCQ.getAwsChunkedEncodingStream=void 0;var Cl4=qA("stream"),$l4=(A,Q)=>{let{base64Encoder:B,bodyLengthChecker:G,checksumAlgorithmFn:Z,checksumLocationName:Y,streamHasher:J}=Q,X=B!==void 0&&Z!==void 0&&Y!==void 0&&J!==void 0,I=X?J(Z,A):void 0,W=new Cl4.Readable({read:()=>{}});return A.on("data",(D)=>{let K=G(D)||0;W.push(`${K.toString(16)}\r
`),W.push(D),W.push(`\r
`)}),A.on("end",async()=>{if(W.push(`0\r
`),X){let D=B(await I);W.push(`${Y}:${D}\r
`),W.push(`\r
`)}W.push(null)}),W};eCQ.getAwsChunkedEncodingStream=$l4});var G$Q=U((B$Q)=>{Object.defineProperty(B$Q,"__esModule",{value:!0});B$Q.headStream=Ul4;async function Ul4(A,Q){let B=0,G=[],Z=A.getReader(),Y=!1;while(!Y){let{done:I,value:W}=await Z.read();if(W)G.push(W),B+=W?.byteLength??0;if(B>=Q)break;Y=I}Z.releaseLock();let J=new Uint8Array(Math.min(Q,B)),X=0;for(let I of G){if(I.byteLength>J.byteLength-X){J.set(I.subarray(0,J.byteLength-X),X);break}else J.set(I,X);X+=I.length}return J}});var X$Q=U((Y$Q)=>{Object.defineProperty(Y$Q,"__esModule",{value:!0});Y$Q.headStream=void 0;var Nl4=qA("stream"),wl4=G$Q(),Ll4=Ki(),Ol4=(A,Q)=>{if((0,Ll4.isReadableStream)(A))return(0,wl4.headStream)(A,Q);return new Promise((B,G)=>{let Z=new Z$Q;Z.limit=Q,A.pipe(Z),A.on("error",(Y)=>{Z.end(),G(Y)}),Z.on("error",G),Z.on("finish",function(){let Y=new Uint8Array(Buffer.concat(this.buffers));B(Y)})})};Y$Q.headStream=Ol4;class Z$Q extends Nl4.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(A,Q,B){if(this.buffers.push(A),this.bytesBuffered+=A.byteLength??0,this.bytesBuffered>=this.limit){let G=this.bytesBuffered-this.limit,Z=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=Z.subarray(0,Z.byteLength-G),this.emit("finish")}B()}}});var I$Q=U((Pl4)=>{Pl4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(Pl4.HttpAuthLocation||(Pl4.HttpAuthLocation={}));Pl4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(Pl4.HttpApiKeyAuthLocation||(Pl4.HttpApiKeyAuthLocation={}));Pl4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(Pl4.EndpointURLScheme||(Pl4.EndpointURLScheme={}));Pl4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(Pl4.AlgorithmId||(Pl4.AlgorithmId={}));var Ml4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>Pl4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>Pl4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},Rl4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},_l4=(A)=>{return Ml4(A)},jl4=(A)=>{return Rl4(A)};Pl4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(Pl4.FieldPosition||(Pl4.FieldPosition={}));var Tl4="__smithy_context";Pl4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(Pl4.IniSectionType||(Pl4.IniSectionType={}));Pl4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(Pl4.RequestHandlerProtocol||(Pl4.RequestHandlerProtocol={}));Pl4.SMITHY_CONTEXT_KEY=Tl4;Pl4.getDefaultClientConfiguration=_l4;Pl4.resolveDefaultRuntimeConfig=jl4});var V$Q=U((gl4)=>{var vl4=I$Q(),kl4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},bl4=(A)=>{return{httpHandler:A.httpHandler()}};class W$Q{name;kind;values;constructor({name:A,kind:Q=vl4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class D$Q{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class bnA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new bnA({...A,headers:{...A.headers}});if(Q.query)Q.query=fl4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return bnA.clone(this)}}function fl4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class K$Q{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function hl4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}gl4.Field=W$Q;gl4.Fields=D$Q;gl4.HttpRequest=bnA;gl4.HttpResponse=K$Q;gl4.getHttpHandlerExtensionConfiguration=kl4;gl4.isValidHostname=hl4;gl4.resolveHttpHandlerRuntimeConfig=bl4});var H$Q=U((ol4)=>{var F$Q=(A)=>encodeURIComponent(A).replace(/[!'()*]/g,nl4),nl4=(A)=>`%${A.charCodeAt(0).toString(16).toUpperCase()}`,al4=(A)=>A.split("/").map(F$Q).join("/");ol4.escapeUri=F$Q;ol4.escapeUriPath=al4});var E$Q=U((el4)=>{var UP1=H$Q();function tl4(A){let Q=[];for(let B of Object.keys(A).sort()){let G=A[B];if(B=UP1.escapeUri(B),Array.isArray(G))for(let Z=0,Y=G.length;Z<Y;Z++)Q.push(`${B}=${UP1.escapeUri(G[Z])}`);else{let Z=B;if(G||typeof G==="string")Z+=`=${UP1.escapeUri(G)}`;Q.push(Z)}}return Q.join("&")}el4.buildQueryString=tl4});var dw=U((Vi4)=>{var U$Q=V$Q(),q$Q=E$Q(),fnA=qA("http"),hnA=qA("https"),N$Q=qA("stream"),qP1=qA("http2"),Qi4=["ECONNRESET","EPIPE","ETIMEDOUT"],w$Q=(A)=>{let Q={};for(let B of Object.keys(A)){let G=A[B];Q[B]=Array.isArray(G)?G.join(","):G}return Q},aC={setTimeout:(A,Q)=>setTimeout(A,Q),clearTimeout:(A)=>clearTimeout(A)},z$Q=1000,Bi4=(A,Q,B=0)=>{if(!B)return-1;let G=(Z)=>{let Y=aC.setTimeout(()=>{A.destroy(),Q(Object.assign(Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${B} ms.`),{name:"TimeoutError"}))},B-Z),J=(X)=>{if(X?.connecting)X.on("connect",()=>{aC.clearTimeout(Y)});else aC.clearTimeout(Y)};if(A.socket)J(A.socket);else A.on("socket",J)};if(B<2000)return G(0),0;return aC.setTimeout(G.bind(null,z$Q),z$Q)},Gi4=(A,Q,B=0,G,Z)=>{if(B)return aC.setTimeout(()=>{let Y=`@smithy/node-http-handler - [${G?"ERROR":"WARN"}] a request has exceeded the configured ${B} ms requestTimeout.`;if(G){let J=Object.assign(Error(Y),{name:"TimeoutError",code:"ETIMEDOUT"});A.destroy(J),Q(J)}else Y+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",Z?.warn?.(Y)},B);return-1},Zi4=3000,Yi4=(A,{keepAlive:Q,keepAliveMsecs:B},G=Zi4)=>{if(Q!==!0)return-1;let Z=()=>{if(A.socket)A.socket.setKeepAlive(Q,B||0);else A.on("socket",(Y)=>{Y.setKeepAlive(Q,B||0)})};if(G===0)return Z(),0;return aC.setTimeout(Z,G)},C$Q=3000,Ji4=(A,Q,B=0)=>{let G=(Z)=>{let Y=B-Z,J=()=>{A.destroy(),Q(Object.assign(Error(`@smithy/node-http-handler - the request socket timed out after ${B} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};if(A.socket)A.socket.setTimeout(Y,J),A.on("close",()=>A.socket?.removeListener("timeout",J));else A.setTimeout(Y,J)};if(0<B&&B<6000)return G(0),0;return aC.setTimeout(G.bind(null,B===0?0:C$Q),C$Q)},$$Q=6000;async function L$Q(A,Q,B=$$Q,G=!1){let Z=Q.headers??{},Y=Z.Expect||Z.expect,J=-1,X=!0;if(!G&&Y==="100-continue")X=await Promise.race([new Promise((I)=>{J=Number(aC.setTimeout(()=>I(!0),Math.max($$Q,B)))}),new Promise((I)=>{A.on("continue",()=>{aC.clearTimeout(J),I(!0)}),A.on("response",()=>{aC.clearTimeout(J),I(!1)}),A.on("error",()=>{aC.clearTimeout(J),I(!1)})})]);if(X)Xi4(A,Q.body)}function Xi4(A,Q){if(Q instanceof N$Q.Readable){Q.pipe(A);return}if(Q){if(Buffer.isBuffer(Q)||typeof Q==="string"){A.end(Q);return}let B=Q;if(typeof B==="object"&&B.buffer&&typeof B.byteOffset==="number"&&typeof B.byteLength==="number"){A.end(Buffer.from(B.buffer,B.byteOffset,B.byteLength));return}A.end(Buffer.from(Q));return}A.end()}var Ii4=0;class gnA{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(A){if(typeof A?.handle==="function")return A;return new gnA(A)}static checkSocketUsage(A,Q,B=console){let{sockets:G,requests:Z,maxSockets:Y}=A;if(typeof Y!=="number"||Y===1/0)return Q;let J=15000;if(Date.now()-J<Q)return Q;if(G&&Z)for(let X in G){let I=G[X]?.length??0,W=Z[X]?.length??0;if(I>=Y&&W>=2*Y)return B?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${I} and ${W} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return Q}constructor(A){this.configProvider=new Promise((Q,B)=>{if(typeof A==="function")A().then((G)=>{Q(this.resolveDefaultConfig(G))}).catch(B);else Q(this.resolveDefaultConfig(A))})}resolveDefaultConfig(A){let{requestTimeout:Q,connectionTimeout:B,socketTimeout:G,socketAcquisitionWarningTimeout:Z,httpAgent:Y,httpsAgent:J,throwOnRequestTimeout:X}=A||{},I=!0,W=50;return{connectionTimeout:B,requestTimeout:Q,socketTimeout:G,socketAcquisitionWarningTimeout:Z,throwOnRequestTimeout:X,httpAgent:(()=>{if(Y instanceof fnA.Agent||typeof Y?.destroy==="function")return this.externalAgent=!0,Y;return new fnA.Agent({keepAlive:!0,maxSockets:50,...Y})})(),httpsAgent:(()=>{if(J instanceof hnA.Agent||typeof J?.destroy==="function")return this.externalAgent=!0,J;return new hnA.Agent({keepAlive:!0,maxSockets:50,...J})})(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(A,{abortSignal:Q,requestTimeout:B}={}){if(!this.config)this.config=await this.configProvider;return new Promise((G,Z)=>{let Y=this.config,J=void 0,X=[],I=async(P)=>{await J,X.forEach(aC.clearTimeout),G(P)},W=async(P)=>{await J,X.forEach(aC.clearTimeout),Z(P)};if(Q?.aborted){let P=Error("Request aborted");P.name="AbortError",W(P);return}let D=A.protocol==="https:",K=A.headers??{},V=(K.Expect??K.expect)==="100-continue",F=D?Y.httpsAgent:Y.httpAgent;if(V&&!this.externalAgent)F=new(D?hnA.Agent:fnA.Agent)({keepAlive:!1,maxSockets:1/0});X.push(aC.setTimeout(()=>{this.socketWarningTimestamp=gnA.checkSocketUsage(F,this.socketWarningTimestamp,Y.logger)},Y.socketAcquisitionWarningTimeout??(Y.requestTimeout??2000)+(Y.connectionTimeout??1000)));let H=q$Q.buildQueryString(A.query||{}),E=void 0;if(A.username!=null||A.password!=null){let P=A.username??"",y=A.password??"";E=`${P}:${y}`}let z=A.path;if(H)z+=`?${H}`;if(A.fragment)z+=`#${A.fragment}`;let C=A.hostname??"";if(C[0]==="["&&C.endsWith("]"))C=A.hostname.slice(1,-1);else C=A.hostname;let O={headers:A.headers,host:C,method:A.method,path:z,port:A.port,agent:F,auth:E},M=(D?hnA.request:fnA.request)(O,(P)=>{let y=new U$Q.HttpResponse({statusCode:P.statusCode||-1,reason:P.statusMessage,headers:w$Q(P.headers),body:P});I({response:y})});if(M.on("error",(P)=>{if(Qi4.includes(P.code))W(Object.assign(P,{name:"TimeoutError"}));else W(P)}),Q){let P=()=>{M.destroy();let y=Error("Request aborted");y.name="AbortError",W(y)};if(typeof Q.addEventListener==="function"){let y=Q;y.addEventListener("abort",P,{once:!0}),M.once("close",()=>y.removeEventListener("abort",P))}else Q.onabort=P}let _=B??Y.requestTimeout;X.push(Bi4(M,W,Y.connectionTimeout)),X.push(Gi4(M,W,_,Y.throwOnRequestTimeout,Y.logger??console)),X.push(Ji4(M,W,Y.socketTimeout));let j=O.agent;if(typeof j==="object"&&"keepAlive"in j)X.push(Yi4(M,{keepAlive:j.keepAlive,keepAliveMsecs:j.keepAliveMsecs}));J=L$Q(M,A,_,this.externalAgent).catch((P)=>{return X.forEach(aC.clearTimeout),Z(P)})})}updateHttpClientConfig(A,Q){this.config=void 0,this.configProvider=this.configProvider.then((B)=>{return{...B,[A]:Q}})}httpHandlerConfigs(){return this.config??{}}}class O$Q{sessions=[];constructor(A){this.sessions=A??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(A){this.sessions.push(A)}contains(A){return this.sessions.includes(A)}remove(A){this.sessions=this.sessions.filter((Q)=>Q!==A)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(A){for(let Q of this.sessions)if(Q===A){if(!Q.destroyed)Q.destroy()}}}class M$Q{constructor(A){if(this.config=A,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(A,Q){let B=this.getUrlString(A),G=this.sessionCache.get(B);if(G){let X=G.poll();if(X&&!this.config.disableConcurrency)return X}let Z=qP1.connect(B);if(this.config.maxConcurrency)Z.settings({maxConcurrentStreams:this.config.maxConcurrency},(X)=>{if(X)throw Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+A.destination.toString())});Z.unref();let Y=()=>{Z.destroy(),this.deleteSession(B,Z)};if(Z.on("goaway",Y),Z.on("error",Y),Z.on("frameError",Y),Z.on("close",()=>this.deleteSession(B,Z)),Q.requestTimeout)Z.setTimeout(Q.requestTimeout,Y);let J=this.sessionCache.get(B)||new O$Q;return J.offerLast(Z),this.sessionCache.set(B,J),Z}deleteSession(A,Q){let B=this.sessionCache.get(A);if(!B)return;if(!B.contains(Q))return;B.remove(Q),this.sessionCache.set(A,B)}release(A,Q){let B=this.getUrlString(A);this.sessionCache.get(B)?.offerLast(Q)}destroy(){for(let[A,Q]of this.sessionCache){for(let B of Q){if(!B.destroyed)B.destroy();Q.remove(B)}this.sessionCache.delete(A)}}setMaxConcurrentStreams(A){if(A&&A<=0)throw RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=A}setDisableConcurrentStreams(A){this.config.disableConcurrency=A}getUrlString(A){return A.destination.toString()}}class NP1{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new M$Q({});static create(A){if(typeof A?.handle==="function")return A;return new NP1(A)}constructor(A){this.configProvider=new Promise((Q,B)=>{if(typeof A==="function")A().then((G)=>{Q(G||{})}).catch(B);else Q(A||{})})}destroy(){this.connectionManager.destroy()}async handle(A,{abortSignal:Q,requestTimeout:B}={}){if(!this.config){if(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams)this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams)}let{requestTimeout:G,disableConcurrentStreams:Z}=this.config,Y=B??G;return new Promise((J,X)=>{let I=!1,W=void 0,D=async(v)=>{await W,J(v)},K=async(v)=>{await W,X(v)};if(Q?.aborted){I=!0;let v=Error("Request aborted");v.name="AbortError",K(v);return}let{hostname:V,method:F,port:H,protocol:E,query:z}=A,C="";if(A.username!=null||A.password!=null){let v=A.username??"",m=A.password??"";C=`${v}:${m}@`}let O=`${E}//${C}${V}${H?`:${H}`:""}`,L={destination:new URL(O)},M=this.connectionManager.lease(L,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:Z||!1}),_=(v)=>{if(Z)this.destroySession(M);I=!0,K(v)},j=q$Q.buildQueryString(z||{}),P=A.path;if(j)P+=`?${j}`;if(A.fragment)P+=`#${A.fragment}`;let y=M.request({...A.headers,[qP1.constants.HTTP2_HEADER_PATH]:P,[qP1.constants.HTTP2_HEADER_METHOD]:F});if(M.ref(),y.on("response",(v)=>{let m=new U$Q.HttpResponse({statusCode:v[":status"]||-1,headers:w$Q(v),body:y});if(I=!0,D({response:m}),Z)M.close(),this.connectionManager.deleteSession(O,M)}),Y)y.setTimeout(Y,()=>{y.close();let v=Error(`Stream timed out because of no activity for ${Y} ms`);v.name="TimeoutError",_(v)});if(Q){let v=()=>{y.close();let m=Error("Request aborted");m.name="AbortError",_(m)};if(typeof Q.addEventListener==="function"){let m=Q;m.addEventListener("abort",v,{once:!0}),y.once("close",()=>m.removeEventListener("abort",v))}else Q.onabort=v}y.on("frameError",(v,m,h)=>{_(Error(`Frame type id ${v} in stream id ${h} has failed with code ${m}.`))}),y.on("error",_),y.on("aborted",()=>{_(Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${y.rstCode}.`))}),y.on("close",()=>{if(M.unref(),Z)M.destroy();if(!I)_(Error("Unexpected error: http2 request did not get a response"))}),W=L$Q(y,A,Y)})}updateHttpClientConfig(A,Q){this.config=void 0,this.configProvider=this.configProvider.then((B)=>{return{...B,[A]:Q}})}httpHandlerConfigs(){return this.config??{}}destroySession(A){if(!A.destroyed)A.destroy()}}class R$Q extends N$Q.Writable{bufferedBytes=[];_write(A,Q,B){this.bufferedBytes.push(A),B()}}var Wi4=(A)=>{if(Di4(A))return Ki4(A);return new Promise((Q,B)=>{let G=new R$Q;A.pipe(G),A.on("error",(Z)=>{G.end(),B(Z)}),G.on("error",B),G.on("finish",function(){let Z=new Uint8Array(Buffer.concat(this.bufferedBytes));Q(Z)})})},Di4=(A)=>typeof ReadableStream==="function"&&A instanceof ReadableStream;async function Ki4(A){let Q=[],B=A.getReader(),G=!1,Z=0;while(!G){let{done:X,value:I}=await B.read();if(I)Q.push(I),Z+=I.length;G=X}let Y=new Uint8Array(Z),J=0;for(let X of Q)Y.set(X,J),J+=X.length;return Y}Vi4.DEFAULT_REQUEST_TIMEOUT=Ii4;Vi4.NodeHttp2Handler=NP1;Vi4.NodeHttpHandler=gnA;Vi4.streamCollector=Wi4});var _$Q=U((wi4)=>{wi4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(wi4.HttpAuthLocation||(wi4.HttpAuthLocation={}));wi4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(wi4.HttpApiKeyAuthLocation||(wi4.HttpApiKeyAuthLocation={}));wi4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(wi4.EndpointURLScheme||(wi4.EndpointURLScheme={}));wi4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(wi4.AlgorithmId||(wi4.AlgorithmId={}));var Ci4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>wi4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>wi4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},$i4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Ui4=(A)=>{return Ci4(A)},qi4=(A)=>{return $i4(A)};wi4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(wi4.FieldPosition||(wi4.FieldPosition={}));var Ni4="__smithy_context";wi4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(wi4.IniSectionType||(wi4.IniSectionType={}));wi4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(wi4.RequestHandlerProtocol||(wi4.RequestHandlerProtocol={}));wi4.SMITHY_CONTEXT_KEY=Ni4;wi4.getDefaultClientConfiguration=Ui4;wi4.resolveDefaultRuntimeConfig=qi4});var S$Q=U((Si4)=>{var Ri4=_$Q(),_i4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},ji4=(A)=>{return{httpHandler:A.httpHandler()}};class j$Q{name;kind;values;constructor({name:A,kind:Q=Ri4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class T$Q{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class unA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new unA({...A,headers:{...A.headers}});if(Q.query)Q.query=Ti4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return unA.clone(this)}}function Ti4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class P$Q{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function Pi4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}Si4.Field=j$Q;Si4.Fields=T$Q;Si4.HttpRequest=unA;Si4.HttpResponse=P$Q;Si4.getHttpHandlerExtensionConfiguration=_i4;Si4.isValidHostname=Pi4;Si4.resolveHttpHandlerRuntimeConfig=ji4});var y$Q=U((mi4)=>{var x$Q=(A)=>encodeURIComponent(A).replace(/[!'()*]/g,gi4),gi4=(A)=>`%${A.charCodeAt(0).toString(16).toUpperCase()}`,ui4=(A)=>A.split("/").map(x$Q).join("/");mi4.escapeUri=x$Q;mi4.escapeUriPath=ui4});var v$Q=U((li4)=>{var jP1=y$Q();function ci4(A){let Q=[];for(let B of Object.keys(A).sort()){let G=A[B];if(B=jP1.escapeUri(B),Array.isArray(G))for(let Z=0,Y=G.length;Z<Y;Z++)Q.push(`${B}=${jP1.escapeUri(G[Z])}`);else{let Z=B;if(G||typeof G==="string")Z+=`=${jP1.escapeUri(G)}`;Q.push(Z)}}return Q.join("&")}li4.buildQueryString=ci4});var f$Q=U((An4)=>{var k$Q=S$Q(),ni4=v$Q(),ai4=XZA();function b$Q(A,Q){return new Request(A,Q)}function oi4(A=0){return new Promise((Q,B)=>{if(A)setTimeout(()=>{let G=Error(`Request did not complete within ${A} ms`);G.name="TimeoutError",B(G)},A)})}var mnA={supported:void 0};class TP1{config;configProvider;static create(A){if(typeof A?.handle==="function")return A;return new TP1(A)}constructor(A){if(typeof A==="function")this.configProvider=A().then((Q)=>Q||{});else this.config=A??{},this.configProvider=Promise.resolve(this.config);if(mnA.supported===void 0)mnA.supported=Boolean(typeof Request<"u"&&"keepalive"in b$Q("https://[::1]"))}destroy(){}async handle(A,{abortSignal:Q,requestTimeout:B}={}){if(!this.config)this.config=await this.configProvider;let G=B??this.config.requestTimeout,Z=this.config.keepAlive===!0,Y=this.config.credentials;if(Q?.aborted){let C=Error("Request aborted");return C.name="AbortError",Promise.reject(C)}let J=A.path,X=ni4.buildQueryString(A.query||{});if(X)J+=`?${X}`;if(A.fragment)J+=`#${A.fragment}`;let I="";if(A.username!=null||A.password!=null){let C=A.username??"",O=A.password??"";I=`${C}:${O}@`}let{port:W,method:D}=A,K=`${A.protocol}//${I}${A.hostname}${W?`:${W}`:""}${J}`,V=D==="GET"||D==="HEAD"?void 0:A.body,F={body:V,headers:new Headers(A.headers),method:D,credentials:Y};if(this.config?.cache)F.cache=this.config.cache;if(V)F.duplex="half";if(typeof AbortController<"u")F.signal=Q;if(mnA.supported)F.keepalive=Z;if(typeof this.config.requestInit==="function")Object.assign(F,this.config.requestInit(A));let H=()=>{},E=b$Q(K,F),z=[fetch(E).then((C)=>{let O=C.headers,L={};for(let _ of O.entries())L[_[0]]=_[1];if(C.body==null)return C.blob().then((_)=>({response:new k$Q.HttpResponse({headers:L,reason:C.statusText,statusCode:C.status,body:_})}));return{response:new k$Q.HttpResponse({headers:L,reason:C.statusText,statusCode:C.status,body:C.body})}}),oi4(G)];if(Q)z.push(new Promise((C,O)=>{let L=()=>{let M=Error("Request aborted");M.name="AbortError",O(M)};if(typeof Q.addEventListener==="function"){let M=Q;M.addEventListener("abort",L,{once:!0}),H=()=>M.removeEventListener("abort",L)}else Q.onabort=L}));return Promise.race(z).finally(H)}updateHttpClientConfig(A,Q){this.config=void 0,this.configProvider=this.configProvider.then((B)=>{return B[A]=Q,B})}httpHandlerConfigs(){return this.config??{}}}var ri4=async(A)=>{if(typeof Blob==="function"&&A instanceof Blob||A.constructor?.name==="Blob"){if(Blob.prototype.arrayBuffer!==void 0)return new Uint8Array(await A.arrayBuffer());return si4(A)}return ti4(A)};async function si4(A){let Q=await ei4(A),B=ai4.fromBase64(Q);return new Uint8Array(B)}async function ti4(A){let Q=[],B=A.getReader(),G=!1,Z=0;while(!G){let{done:X,value:I}=await B.read();if(I)Q.push(I),Z+=I.length;G=X}let Y=new Uint8Array(Z),J=0;for(let X of Q)Y.set(X,J),J+=X.length;return Y}function ei4(A){return new Promise((Q,B)=>{let G=new FileReader;G.onloadend=()=>{if(G.readyState!==2)return B(Error("Reader aborted too early"));let Z=G.result??"",Y=Z.indexOf(","),J=Y>-1?Y+1:Z.length;Q(Z.substring(J))},G.onabort=()=>B(Error("Read aborted")),G.onerror=()=>B(G.error),G.readAsDataURL(A)})}An4.FetchHttpHandler=TP1;An4.keepAliveSupport=mnA;An4.streamCollector=ri4});var g$Q=U((Jn4)=>{var h$Q={},PP1={};for(let A=0;A<256;A++){let Q=A.toString(16).toLowerCase();if(Q.length===1)Q=`0${Q}`;h$Q[A]=Q,PP1[Q]=A}function Zn4(A){if(A.length%2!==0)throw Error("Hex encoded strings must have an even number length");let Q=new Uint8Array(A.length/2);for(let B=0;B<A.length;B+=2){let G=A.slice(B,B+2).toLowerCase();if(G in PP1)Q[B/2]=PP1[G];else throw Error(`Cannot decode unrecognized sequence ${G} as hexadecimal`)}return Q}function Yn4(A){let Q="";for(let B=0;B<A.byteLength;B++)Q+=h$Q[A[B]];return Q}Jn4.fromHex=Zn4;Jn4.toHex=Yn4});var l$Q=U((p$Q)=>{Object.defineProperty(p$Q,"__esModule",{value:!0});p$Q.sdkStreamMixin=void 0;var Wn4=f$Q(),Dn4=XZA(),Kn4=g$Q(),Vn4=lG(),u$Q=Ki(),m$Q="The stream has already been transformed.",Fn4=(A)=>{if(!d$Q(A)&&!(0,u$Q.isReadableStream)(A)){let Z=A?.__proto__?.constructor?.name||A;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${Z}`)}let Q=!1,B=async()=>{if(Q)throw Error(m$Q);return Q=!0,await(0,Wn4.streamCollector)(A)},G=(Z)=>{if(typeof Z.stream!=="function")throw Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return Z.stream()};return Object.assign(A,{transformToByteArray:B,transformToString:async(Z)=>{let Y=await B();if(Z==="base64")return(0,Dn4.toBase64)(Y);else if(Z==="hex")return(0,Kn4.toHex)(Y);else if(Z===void 0||Z==="utf8"||Z==="utf-8")return(0,Vn4.toUtf8)(Y);else if(typeof TextDecoder==="function")return new TextDecoder(Z).decode(Y);else throw Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(Q)throw Error(m$Q);if(Q=!0,d$Q(A))return G(A);else if((0,u$Q.isReadableStream)(A))return A;else throw Error(`Cannot transform payload to web stream, got ${A}`)}})};p$Q.sdkStreamMixin=Fn4;var d$Q=(A)=>typeof Blob==="function"&&A instanceof Blob});var o$Q=U((n$Q)=>{Object.defineProperty(n$Q,"__esModule",{value:!0});n$Q.sdkStreamMixin=void 0;var Hn4=dw(),En4=vnA(),SP1=qA("stream"),zn4=l$Q(),i$Q="The stream has already been transformed.",Cn4=(A)=>{if(!(A instanceof SP1.Readable))try{return(0,zn4.sdkStreamMixin)(A)}catch(G){let Z=A?.__proto__?.constructor?.name||A;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${Z}`)}let Q=!1,B=async()=>{if(Q)throw Error(i$Q);return Q=!0,await(0,Hn4.streamCollector)(A)};return Object.assign(A,{transformToByteArray:B,transformToString:async(G)=>{let Z=await B();if(G===void 0||Buffer.isEncoding(G))return(0,En4.fromArrayBuffer)(Z.buffer,Z.byteOffset,Z.byteLength).toString(G);else return new TextDecoder(G).decode(Z)},transformToWebStream:()=>{if(Q)throw Error(i$Q);if(A.readableFlowing!==null)throw Error("The stream has been consumed by other callbacks.");if(typeof SP1.Readable.toWeb!=="function")throw Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return Q=!0,SP1.Readable.toWeb(A)}})};n$Q.sdkStreamMixin=Cn4});var s$Q=U((r$Q)=>{Object.defineProperty(r$Q,"__esModule",{value:!0});r$Q.splitStream=$n4;async function $n4(A){if(typeof A.stream==="function")A=A.stream();return A.tee()}});var QUQ=U((AUQ)=>{Object.defineProperty(AUQ,"__esModule",{value:!0});AUQ.splitStream=Nn4;var t$Q=qA("stream"),qn4=s$Q(),e$Q=Ki();async function Nn4(A){if((0,e$Q.isReadableStream)(A)||(0,e$Q.isBlob)(A))return(0,qn4.splitStream)(A);let Q=new t$Q.PassThrough,B=new t$Q.PassThrough;return A.pipe(Q),A.pipe(B),[Q,B]}});var xP1=U((qH)=>{var BUQ=XZA(),GUQ=lG(),ZUQ=KP1(),YUQ=uCQ(),JUQ=tCQ(),XUQ=Q$Q(),IUQ=X$Q(),WUQ=o$Q(),DUQ=QUQ(),KUQ=Ki();class dqA extends Uint8Array{static fromString(A,Q="utf-8"){if(typeof A==="string"){if(Q==="base64")return dqA.mutate(BUQ.fromBase64(A));return dqA.mutate(GUQ.fromUtf8(A))}throw Error(`Unsupported conversion from ${typeof A} to Uint8ArrayBlobAdapter.`)}static mutate(A){return Object.setPrototypeOf(A,dqA.prototype),A}transformToString(A="utf-8"){if(A==="base64")return BUQ.toBase64(this);return GUQ.toUtf8(this)}}qH.Uint8ArrayBlobAdapter=dqA;Object.keys(ZUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return ZUQ[A]}})});Object.keys(YUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return YUQ[A]}})});Object.keys(JUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return JUQ[A]}})});Object.keys(XUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return XUQ[A]}})});Object.keys(IUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return IUQ[A]}})});Object.keys(WUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return WUQ[A]}})});Object.keys(DUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return DUQ[A]}})});Object.keys(KUQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qH,A))Object.defineProperty(qH,A,{enumerable:!0,get:function(){return KUQ[A]}})})});var IX=U((bn4)=>{var On4=hqA(),VUQ=Iz(),dnA=(A)=>{if(typeof A==="function")return A();return A},kP1=(A,Q,B,G,Z)=>({name:Q,namespace:A,traits:B,input:G,output:Z}),Mn4=(A)=>(Q,B)=>async(G)=>{let{response:Z}=await Q(G),{operationSchema:Y}=VUQ.getSmithyContext(B),[,J,X,I,W,D]=Y??[];try{let K=await A.protocol.deserializeResponse(kP1(J,X,I,W,D),{...A,...B},Z);return{response:Z,output:K}}catch(K){if(Object.defineProperty(K,"$response",{value:Z,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in K)){try{K.message+=`
  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`}catch(F){if(!B.logger||B.logger?.constructor?.name==="NoOpLogger")console.warn("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.");else B.logger?.warn?.("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.")}if(typeof K.$responseBodyText<"u"){if(K.$response)K.$response.body=K.$responseBodyText}try{if(On4.HttpResponse.isInstance(Z)){let{headers:F={}}=Z,H=Object.entries(F);K.$metadata={httpStatusCode:Z.statusCode,requestId:yP1(/^x-[\w-]+-request-?id$/,H),extendedRequestId:yP1(/^x-[\w-]+-id-2$/,H),cfId:yP1(/^x-[\w-]+-cf-id$/,H)}}}catch(F){}}throw K}},yP1=(A,Q)=>{return(Q.find(([B])=>{return B.match(A)})||[void 0,void 0])[1]},Rn4=(A)=>(Q,B)=>async(G)=>{let{operationSchema:Z}=VUQ.getSmithyContext(B),[,Y,J,X,I,W]=Z??[],D=B.endpointV2?.url&&A.urlParser?async()=>A.urlParser(B.endpointV2.url):A.endpoint,K=await A.protocol.serializeRequest(kP1(Y,J,X,I,W),G.input,{...A,...B,endpoint:D});return Q({...G,request:K})},FUQ={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},HUQ={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function _n4(A){return{applyToStack:(Q)=>{Q.add(Rn4(A),HUQ),Q.add(Mn4(A),FUQ),A.protocol.setSerdeContext(A)}}}class Jq{name;namespace;traits;static assign(A,Q){return Object.assign(A,Q)}static[Symbol.hasInstance](A){let Q=this.prototype.isPrototypeOf(A);if(!Q&&typeof A==="object"&&A!==null)return A.symbol===this.symbol;return Q}getName(){return this.namespace+"#"+this.name}}class pnA extends Jq{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=pnA.symbol}var jn4=(A,Q,B,G)=>Jq.assign(new pnA,{name:Q,namespace:A,traits:B,valueSchema:G});class cnA extends Jq{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=cnA.symbol}var Tn4=(A,Q,B,G,Z)=>Jq.assign(new cnA,{name:Q,namespace:A,traits:B,keySchema:G,valueSchema:Z});class lnA extends Jq{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=lnA.symbol}var Pn4=(A,Q,B,G,Z)=>Jq.assign(new lnA,{name:Q,namespace:A,traits:B,input:G,output:Z});class lqA extends Jq{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=lqA.symbol}var Sn4=(A,Q,B,G,Z)=>Jq.assign(new lqA,{name:Q,namespace:A,traits:B,memberNames:G,memberList:Z});class inA extends lqA{static symbol=Symbol.for("@smithy/err");ctor;symbol=inA.symbol}var xn4=(A,Q,B,G,Z,Y)=>Jq.assign(new inA,{name:Q,namespace:A,traits:B,memberNames:G,memberList:Z,ctor:null});function cqA(A){if(typeof A==="object")return A;A=A|0;let Q={},B=0;for(let G of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])if((A>>B++&1)===1)Q[G]=1;return Q}class Ng{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=Ng.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(A,Q){this.ref=A,this.memberName=Q;let B=[],G=A,Z=A;this._isMemberSchema=!1;while(vP1(G))B.push(G[1]),G=G[0],Z=dnA(G),this._isMemberSchema=!0;if(B.length>0){this.memberTraits={};for(let Y=B.length-1;Y>=0;--Y){let J=B[Y];Object.assign(this.memberTraits,cqA(J))}}else this.memberTraits=0;if(Z instanceof Ng){let Y=this.memberTraits;Object.assign(this,Z),this.memberTraits=Object.assign({},Y,Z.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=Q??Z.memberName;return}if(this.schema=dnA(Z),EUQ(this.schema))this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3];else this.name=this.memberName??String(Z),this.traits=0;if(this._isMemberSchema&&!Q)throw Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](A){let Q=this.prototype.isPrototypeOf(A);if(!Q&&typeof A==="object"&&A!==null)return A.symbol===this.symbol;return Q}static of(A){let Q=dnA(A);if(Q instanceof Ng)return Q;if(vP1(Q)){let[B,G]=Q;if(B instanceof Ng)return Object.assign(B.getMergedTraits(),cqA(G)),B;throw Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(A,null,2)}.`)}return new Ng(Q)}getSchema(){let A=this.schema;if(A[0]===0)return A[4];return A}getName(A=!1){let{name:Q}=this;return!A&&Q&&Q.includes("#")?Q.split("#")[1]:Q||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let A=this.getSchema();return typeof A==="number"?A>=64&&A<128:A[0]===1}isMapSchema(){let A=this.getSchema();return typeof A==="number"?A>=128&&A<=255:A[0]===2}isStructSchema(){let A=this.getSchema();return A[0]===3||A[0]===-3}isBlobSchema(){let A=this.getSchema();return A===21||A===42}isTimestampSchema(){let A=this.getSchema();return typeof A==="number"&&A>=4&&A<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:A}=this.getMergedTraits();return!!A||this.getSchema()===42}isIdempotencyToken(){let A=(Z)=>(Z&4)===4||!!Z?.idempotencyToken,{normalizedTraits:Q,traits:B,memberTraits:G}=this;return A(Q)||A(B)||A(G)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return cqA(this.memberTraits)}getOwnTraits(){return cqA(this.traits)}getKeySchema(){let[A,Q]=[this.isDocumentSchema(),this.isMapSchema()];if(!A&&!Q)throw Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let B=this.getSchema(),G=A?15:B[4]??0;return pqA([G,0],"key")}getValueSchema(){let A=this.getSchema(),[Q,B,G]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],Z=typeof A==="number"?63&A:A&&typeof A==="object"&&(B||G)?A[3+A[0]]:Q?15:void 0;if(Z!=null)return pqA([Z,0],B?"value":"member");throw Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(A){let Q=this.getSchema();if(this.isStructSchema()&&Q[4].includes(A)){let B=Q[4].indexOf(A),G=Q[5][B];return pqA(vP1(G)?G:[G,0],A)}if(this.isDocumentSchema())return pqA([15,0],A);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${A}.`)}getMemberSchemas(){let A={};try{for(let[Q,B]of this.structIterator())A[Q]=B}catch(Q){}return A}getEventStreamMember(){if(this.isStructSchema()){for(let[A,Q]of this.structIterator())if(Q.isStreaming()&&Q.isStructSchema())return A}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw Error("@smithy/core/schema - cannot iterate non-struct schema.");let A=this.getSchema();for(let Q=0;Q<A[4].length;++Q)yield[A[4][Q],pqA([A[5][Q],0],A[4][Q])]}}function pqA(A,Q){if(A instanceof Ng)return Object.assign(A,{memberName:Q,_isMemberSchema:!0});return new Ng(A,Q)}var vP1=(A)=>Array.isArray(A)&&A.length===2,EUQ=(A)=>Array.isArray(A)&&A.length>=5;class iqA extends Jq{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=iqA.symbol}var yn4=(A,Q,B,G)=>Jq.assign(new iqA,{name:Q,namespace:A,traits:G,schemaRef:B}),vn4=(A,Q,B,G)=>Jq.assign(new iqA,{name:Q,namespace:A,traits:B,schemaRef:G}),kn4={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128};class qg{namespace;schemas;exceptions;static registries=new Map;constructor(A,Q=new Map,B=new Map){this.namespace=A,this.schemas=Q,this.exceptions=B}static for(A){if(!qg.registries.has(A))qg.registries.set(A,new qg(A));return qg.registries.get(A)}register(A,Q){let B=this.normalizeShapeId(A);qg.for(B.split("#")[0]).schemas.set(B,Q)}getSchema(A){let Q=this.normalizeShapeId(A);if(!this.schemas.has(Q))throw Error(`@smithy/core/schema - schema not found for ${Q}`);return this.schemas.get(Q)}registerError(A,Q){let B=A,G=qg.for(B[1]);G.schemas.set(B[1]+"#"+B[2],B),G.exceptions.set(B,Q)}getErrorCtor(A){let Q=A;return qg.for(Q[1]).exceptions.get(Q)}getBaseException(){for(let A of this.exceptions.keys())if(Array.isArray(A)){let[,Q,B]=A,G=Q+"#"+B;if(G.startsWith("smithy.ts.sdk.synthetic.")&&G.endsWith("ServiceException"))return A}return}find(A){return[...this.schemas.values()].find(A)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(A){if(A.includes("#"))return A;return this.namespace+"#"+A}}bn4.ErrorSchema=inA;bn4.ListSchema=pnA;bn4.MapSchema=cnA;bn4.NormalizedSchema=Ng;bn4.OperationSchema=lnA;bn4.SCHEMA=kn4;bn4.Schema=Jq;bn4.SimpleSchema=iqA;bn4.StructureSchema=lqA;bn4.TypeRegistry=qg;bn4.deref=dnA;bn4.deserializerMiddlewareOption=FUQ;bn4.error=xn4;bn4.getSchemaSerdePlugin=_n4;bn4.isStaticSchema=EUQ;bn4.list=jn4;bn4.map=Tn4;bn4.op=Pn4;bn4.operation=kP1;bn4.serializerMiddlewareOption=HUQ;bn4.sim=yn4;bn4.simAdapter=vn4;bn4.struct=Sn4;bn4.translateTraits=cqA});var NZ=U((h4G,onA)=>{var zUQ,CUQ,$UQ,UUQ,qUQ,NUQ,wUQ,LUQ,OUQ,MUQ,RUQ,_UQ,jUQ,nnA,bP1,TUQ,PUQ,SUQ,WZA,xUQ,yUQ,vUQ,kUQ,bUQ,fUQ,hUQ,gUQ,uUQ,anA,mUQ,dUQ,pUQ;(function(A){var Q=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd)define("tslib",["exports"],function(G){A(B(Q,B(G)))});else if(typeof onA==="object"&&typeof h4G==="object")A(B(Q,B(h4G)));else A(B(Q));function B(G,Z){if(G!==Q)if(typeof Object.create==="function")Object.defineProperty(G,"__esModule",{value:!0});else G.__esModule=!0;return function(Y,J){return G[Y]=Z?Z(Y,J):J}}})(function(A){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,J){Y.__proto__=J}||function(Y,J){for(var X in J)if(Object.prototype.hasOwnProperty.call(J,X))Y[X]=J[X]};zUQ=function(Y,J){if(typeof J!=="function"&&J!==null)throw TypeError("Class extends value "+String(J)+" is not a constructor or null");Q(Y,J);function X(){this.constructor=Y}Y.prototype=J===null?Object.create(J):(X.prototype=J.prototype,new X)},CUQ=Object.assign||function(Y){for(var J,X=1,I=arguments.length;X<I;X++){J=arguments[X];for(var W in J)if(Object.prototype.hasOwnProperty.call(J,W))Y[W]=J[W]}return Y},$UQ=function(Y,J){var X={};for(var I in Y)if(Object.prototype.hasOwnProperty.call(Y,I)&&J.indexOf(I)<0)X[I]=Y[I];if(Y!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var W=0,I=Object.getOwnPropertySymbols(Y);W<I.length;W++)if(J.indexOf(I[W])<0&&Object.prototype.propertyIsEnumerable.call(Y,I[W]))X[I[W]]=Y[I[W]]}return X},UUQ=function(Y,J,X,I){var W=arguments.length,D=W<3?J:I===null?I=Object.getOwnPropertyDescriptor(J,X):I,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")D=Reflect.decorate(Y,J,X,I);else for(var V=Y.length-1;V>=0;V--)if(K=Y[V])D=(W<3?K(D):W>3?K(J,X,D):K(J,X))||D;return W>3&&D&&Object.defineProperty(J,X,D),D},qUQ=function(Y,J){return function(X,I){J(X,I,Y)}},NUQ=function(Y,J,X,I,W,D){function K(j){if(j!==void 0&&typeof j!=="function")throw TypeError("Function expected");return j}var V=I.kind,F=V==="getter"?"get":V==="setter"?"set":"value",H=!J&&Y?I.static?Y:Y.prototype:null,E=J||(H?Object.getOwnPropertyDescriptor(H,I.name):{}),z,C=!1;for(var O=X.length-1;O>=0;O--){var L={};for(var M in I)L[M]=M==="access"?{}:I[M];for(var M in I.access)L.access[M]=I.access[M];L.addInitializer=function(j){if(C)throw TypeError("Cannot add initializers after decoration has completed");D.push(K(j||null))};var _=(0,X[O])(V==="accessor"?{get:E.get,set:E.set}:E[F],L);if(V==="accessor"){if(_===void 0)continue;if(_===null||typeof _!=="object")throw TypeError("Object expected");if(z=K(_.get))E.get=z;if(z=K(_.set))E.set=z;if(z=K(_.init))W.unshift(z)}else if(z=K(_))if(V==="field")W.unshift(z);else E[F]=z}if(H)Object.defineProperty(H,I.name,E);C=!0},wUQ=function(Y,J,X){var I=arguments.length>2;for(var W=0;W<J.length;W++)X=I?J[W].call(Y,X):J[W].call(Y);return I?X:void 0},LUQ=function(Y){return typeof Y==="symbol"?Y:"".concat(Y)},OUQ=function(Y,J,X){if(typeof J==="symbol")J=J.description?"[".concat(J.description,"]"):"";return Object.defineProperty(Y,"name",{configurable:!0,value:X?"".concat(X," ",J):J})},MUQ=function(Y,J){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(Y,J)},RUQ=function(Y,J,X,I){function W(D){return D instanceof X?D:new X(function(K){K(D)})}return new(X||(X=Promise))(function(D,K){function V(E){try{H(I.next(E))}catch(z){K(z)}}function F(E){try{H(I.throw(E))}catch(z){K(z)}}function H(E){E.done?D(E.value):W(E.value).then(V,F)}H((I=I.apply(Y,J||[])).next())})},_UQ=function(Y,J){var X={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},I,W,D,K=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return K.next=V(0),K.throw=V(1),K.return=V(2),typeof Symbol==="function"&&(K[Symbol.iterator]=function(){return this}),K;function V(H){return function(E){return F([H,E])}}function F(H){if(I)throw TypeError("Generator is already executing.");while(K&&(K=0,H[0]&&(X=0)),X)try{if(I=1,W&&(D=H[0]&2?W.return:H[0]?W.throw||((D=W.return)&&D.call(W),0):W.next)&&!(D=D.call(W,H[1])).done)return D;if(W=0,D)H=[H[0]&2,D.value];switch(H[0]){case 0:case 1:D=H;break;case 4:return X.label++,{value:H[1],done:!1};case 5:X.label++,W=H[1],H=[0];continue;case 7:H=X.ops.pop(),X.trys.pop();continue;default:if((D=X.trys,!(D=D.length>0&&D[D.length-1]))&&(H[0]===6||H[0]===2)){X=0;continue}if(H[0]===3&&(!D||H[1]>D[0]&&H[1]<D[3])){X.label=H[1];break}if(H[0]===6&&X.label<D[1]){X.label=D[1],D=H;break}if(D&&X.label<D[2]){X.label=D[2],X.ops.push(H);break}if(D[2])X.ops.pop();X.trys.pop();continue}H=J.call(Y,X)}catch(E){H=[6,E],W=0}finally{I=D=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}},jUQ=function(Y,J){for(var X in Y)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(J,X))anA(J,Y,X)},anA=Object.create?function(Y,J,X,I){if(I===void 0)I=X;var W=Object.getOwnPropertyDescriptor(J,X);if(!W||("get"in W?!J.__esModule:W.writable||W.configurable))W={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Y,I,W)}:function(Y,J,X,I){if(I===void 0)I=X;Y[I]=J[X]},nnA=function(Y){var J=typeof Symbol==="function"&&Symbol.iterator,X=J&&Y[J],I=0;if(X)return X.call(Y);if(Y&&typeof Y.length==="number")return{next:function(){if(Y&&I>=Y.length)Y=void 0;return{value:Y&&Y[I++],done:!Y}}};throw TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")},bP1=function(Y,J){var X=typeof Symbol==="function"&&Y[Symbol.iterator];if(!X)return Y;var I=X.call(Y),W,D=[],K;try{while((J===void 0||J-- >0)&&!(W=I.next()).done)D.push(W.value)}catch(V){K={error:V}}finally{try{if(W&&!W.done&&(X=I.return))X.call(I)}finally{if(K)throw K.error}}return D},TUQ=function(){for(var Y=[],J=0;J<arguments.length;J++)Y=Y.concat(bP1(arguments[J]));return Y},PUQ=function(){for(var Y=0,J=0,X=arguments.length;J<X;J++)Y+=arguments[J].length;for(var I=Array(Y),W=0,J=0;J<X;J++)for(var D=arguments[J],K=0,V=D.length;K<V;K++,W++)I[W]=D[K];return I},SUQ=function(Y,J,X){if(X||arguments.length===2){for(var I=0,W=J.length,D;I<W;I++)if(D||!(I in J)){if(!D)D=Array.prototype.slice.call(J,0,I);D[I]=J[I]}}return Y.concat(D||Array.prototype.slice.call(J))},WZA=function(Y){return this instanceof WZA?(this.v=Y,this):new WZA(Y)},xUQ=function(Y,J,X){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var I=X.apply(Y,J||[]),W,D=[];return W=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),V("next"),V("throw"),V("return",K),W[Symbol.asyncIterator]=function(){return this},W;function K(O){return function(L){return Promise.resolve(L).then(O,z)}}function V(O,L){if(I[O]){if(W[O]=function(M){return new Promise(function(_,j){D.push([O,M,_,j])>1||F(O,M)})},L)W[O]=L(W[O])}}function F(O,L){try{H(I[O](L))}catch(M){C(D[0][3],M)}}function H(O){O.value instanceof WZA?Promise.resolve(O.value.v).then(E,z):C(D[0][2],O)}function E(O){F("next",O)}function z(O){F("throw",O)}function C(O,L){if(O(L),D.shift(),D.length)F(D[0][0],D[0][1])}},yUQ=function(Y){var J,X;return J={},I("next"),I("throw",function(W){throw W}),I("return"),J[Symbol.iterator]=function(){return this},J;function I(W,D){J[W]=Y[W]?function(K){return(X=!X)?{value:WZA(Y[W](K)),done:!1}:D?D(K):K}:D}},vUQ=function(Y){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var J=Y[Symbol.asyncIterator],X;return J?J.call(Y):(Y=typeof nnA==="function"?nnA(Y):Y[Symbol.iterator](),X={},I("next"),I("throw"),I("return"),X[Symbol.asyncIterator]=function(){return this},X);function I(D){X[D]=Y[D]&&function(K){return new Promise(function(V,F){K=Y[D](K),W(V,F,K.done,K.value)})}}function W(D,K,V,F){Promise.resolve(F).then(function(H){D({value:H,done:V})},K)}},kUQ=function(Y,J){if(Object.defineProperty)Object.defineProperty(Y,"raw",{value:J});else Y.raw=J;return Y};var B=Object.create?function(Y,J){Object.defineProperty(Y,"default",{enumerable:!0,value:J})}:function(Y,J){Y.default=J},G=function(Y){return G=Object.getOwnPropertyNames||function(J){var X=[];for(var I in J)if(Object.prototype.hasOwnProperty.call(J,I))X[X.length]=I;return X},G(Y)};bUQ=function(Y){if(Y&&Y.__esModule)return Y;var J={};if(Y!=null){for(var X=G(Y),I=0;I<X.length;I++)if(X[I]!=="default")anA(J,Y,X[I])}return B(J,Y),J},fUQ=function(Y){return Y&&Y.__esModule?Y:{default:Y}},hUQ=function(Y,J,X,I){if(X==="a"&&!I)throw TypeError("Private accessor was defined without a getter");if(typeof J==="function"?Y!==J||!I:!J.has(Y))throw TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?I:X==="a"?I.call(Y):I?I.value:J.get(Y)},gUQ=function(Y,J,X,I,W){if(I==="m")throw TypeError("Private method is not writable");if(I==="a"&&!W)throw TypeError("Private accessor was defined without a setter");if(typeof J==="function"?Y!==J||!W:!J.has(Y))throw TypeError("Cannot write private member to an object whose class did not declare it");return I==="a"?W.call(Y,X):W?W.value=X:J.set(Y,X),X},uUQ=function(Y,J){if(J===null||typeof J!=="object"&&typeof J!=="function")throw TypeError("Cannot use 'in' operator on non-object");return typeof Y==="function"?J===Y:Y.has(J)},mUQ=function(Y,J,X){if(J!==null&&J!==void 0){if(typeof J!=="object"&&typeof J!=="function")throw TypeError("Object expected.");var I,W;if(X){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");I=J[Symbol.asyncDispose]}if(I===void 0){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");if(I=J[Symbol.dispose],X)W=I}if(typeof I!=="function")throw TypeError("Object not disposable.");if(W)I=function(){try{W.call(this)}catch(D){return Promise.reject(D)}};Y.stack.push({value:J,dispose:I,async:X})}else if(X)Y.stack.push({async:!0});return J};var Z=typeof SuppressedError==="function"?SuppressedError:function(Y,J,X){var I=Error(X);return I.name="SuppressedError",I.error=Y,I.suppressed=J,I};dUQ=function(Y){function J(D){Y.error=Y.hasError?new Z(D,Y.error,"An error was suppressed during disposal."):D,Y.hasError=!0}var X,I=0;function W(){while(X=Y.stack.pop())try{if(!X.async&&I===1)return I=0,Y.stack.push(X),Promise.resolve().then(W);if(X.dispose){var D=X.dispose.call(X.value);if(X.async)return I|=2,Promise.resolve(D).then(W,function(K){return J(K),W()})}else I|=1}catch(K){J(K)}if(I===1)return Y.hasError?Promise.reject(Y.error):Promise.resolve();if(Y.hasError)throw Y.error}return W()},pUQ=function(Y,J){if(typeof Y==="string"&&/^\.\.?\//.test(Y))return Y.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(X,I,W,D,K){return I?J?".jsx":".js":W&&(!D||!K)?X:W+D+"."+K.toLowerCase()+"js"});return Y},A("__extends",zUQ),A("__assign",CUQ),A("__rest",$UQ),A("__decorate",UUQ),A("__param",qUQ),A("__esDecorate",NUQ),A("__runInitializers",wUQ),A("__propKey",LUQ),A("__setFunctionName",OUQ),A("__metadata",MUQ),A("__awaiter",RUQ),A("__generator",_UQ),A("__exportStar",jUQ),A("__createBinding",anA),A("__values",nnA),A("__read",bP1),A("__spread",TUQ),A("__spreadArrays",PUQ),A("__spreadArray",SUQ),A("__await",WZA),A("__asyncGenerator",xUQ),A("__asyncDelegator",yUQ),A("__asyncValues",vUQ),A("__makeTemplateObject",kUQ),A("__importStar",bUQ),A("__importDefault",fUQ),A("__classPrivateFieldGet",hUQ),A("__classPrivateFieldSet",gUQ),A("__classPrivateFieldIn",uUQ),A("__addDisposableResource",mUQ),A("__disposeResources",dUQ),A("__rewriteRelativeImportExtension",pUQ)})});var nUQ=U((lUQ)=>{Object.defineProperty(lUQ,"__esModule",{value:!0});lUQ.randomUUID=void 0;var Xa4=NZ(),cUQ=Xa4.__importDefault(qA("crypto"));lUQ.randomUUID=cUQ.default.randomUUID.bind(cUQ.default)});var fP1=U((Wa4)=>{var aUQ=nUQ(),Wz=Array.from({length:256},(A,Q)=>Q.toString(16).padStart(2,"0")),Ia4=()=>{if(aUQ.randomUUID)return aUQ.randomUUID();let A=new Uint8Array(16);return crypto.getRandomValues(A),A[6]=A[6]&15|64,A[8]=A[8]&63|128,Wz[A[0]]+Wz[A[1]]+Wz[A[2]]+Wz[A[3]]+"-"+Wz[A[4]]+Wz[A[5]]+"-"+Wz[A[6]]+Wz[A[7]]+"-"+Wz[A[8]]+Wz[A[9]]+"-"+Wz[A[10]]+Wz[A[11]]+Wz[A[12]]+Wz[A[13]]+Wz[A[14]]+Wz[A[15]]};Wa4.v4=Ia4});var Xq=U((GqQ)=>{var Ka4=fP1(),Va4=(A,Q,B=(G)=>G)=>A,Fa4=(A)=>{switch(A){case"true":return!0;case"false":return!1;default:throw Error(`Unable to parse boolean value "${A}"`)}},Ha4=(A)=>{if(A===null||A===void 0)return;if(typeof A==="number"){if(A===0||A===1)rqA.warn(snA(`Expected boolean, got ${typeof A}: ${A}`));if(A===0)return!1;if(A===1)return!0}if(typeof A==="string"){let Q=A.toLowerCase();if(Q==="false"||Q==="true")rqA.warn(snA(`Expected boolean, got ${typeof A}: ${A}`));if(Q==="false")return!1;if(Q==="true")return!0}if(typeof A==="boolean")return A;throw TypeError(`Expected boolean, got ${typeof A}: ${A}`)},aqA=(A)=>{if(A===null||A===void 0)return;if(typeof A==="string"){let Q=parseFloat(A);if(!Number.isNaN(Q)){if(String(Q)!==String(A))rqA.warn(snA(`Expected number but observed string: ${A}`));return Q}}if(typeof A==="number")return A;throw TypeError(`Expected number, got ${typeof A}: ${A}`)},Ea4=Math.ceil(340282346638528860000000000000000000000),rnA=(A)=>{let Q=aqA(A);if(Q!==void 0&&!Number.isNaN(Q)&&Q!==1/0&&Q!==-1/0){if(Math.abs(Q)>Ea4)throw TypeError(`Expected 32-bit float, got ${A}`)}return Q},oqA=(A)=>{if(A===null||A===void 0)return;if(Number.isInteger(A)&&!Number.isNaN(A))return A;throw TypeError(`Expected integer, got ${typeof A}: ${A}`)},za4=oqA,gP1=(A)=>dP1(A,32),uP1=(A)=>dP1(A,16),mP1=(A)=>dP1(A,8),dP1=(A,Q)=>{let B=oqA(A);if(B!==void 0&&Ca4(B,Q)!==B)throw TypeError(`Expected ${Q}-bit integer, got ${A}`);return B},Ca4=(A,Q)=>{switch(Q){case 32:return Int32Array.of(A)[0];case 16:return Int16Array.of(A)[0];case 8:return Int8Array.of(A)[0]}},$a4=(A,Q)=>{if(A===null||A===void 0){if(Q)throw TypeError(`Expected a non-null value for ${Q}`);throw TypeError("Expected a non-null value")}return A},rUQ=(A)=>{if(A===null||A===void 0)return;if(typeof A==="object"&&!Array.isArray(A))return A;let Q=Array.isArray(A)?"array":typeof A;throw TypeError(`Expected object, got ${Q}: ${A}`)},Ua4=(A)=>{if(A===null||A===void 0)return;if(typeof A==="string")return A;if(["boolean","number","bigint"].includes(typeof A))return rqA.warn(snA(`Expected string, got ${typeof A}: ${A}`)),String(A);throw TypeError(`Expected string, got ${typeof A}: ${A}`)},qa4=(A)=>{if(A===null||A===void 0)return;let Q=rUQ(A),B=Object.entries(Q).filter(([,G])=>G!=null).map(([G])=>G);if(B.length===0)throw TypeError("Unions must have exactly one non-null member. None were found.");if(B.length>1)throw TypeError(`Unions must have exactly one non-null member. Keys ${B} were not null.`);return Q},pP1=(A)=>{if(typeof A=="string")return aqA(VZA(A));return aqA(A)},Na4=pP1,sUQ=(A)=>{if(typeof A=="string")return rnA(VZA(A));return rnA(A)},wa4=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,VZA=(A)=>{let Q=A.match(wa4);if(Q===null||Q[0].length!==A.length)throw TypeError("Expected real number, got implicit NaN");return parseFloat(A)},cP1=(A)=>{if(typeof A=="string")return tUQ(A);return aqA(A)},La4=cP1,Oa4=cP1,Ma4=(A)=>{if(typeof A=="string")return tUQ(A);return rnA(A)},tUQ=(A)=>{switch(A){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw Error(`Unable to parse float value: ${A}`)}},eUQ=(A)=>{if(typeof A==="string")return oqA(VZA(A));return oqA(A)},Ra4=eUQ,_a4=(A)=>{if(typeof A==="string")return gP1(VZA(A));return gP1(A)},DZA=(A)=>{if(typeof A==="string")return uP1(VZA(A));return uP1(A)},AqQ=(A)=>{if(typeof A==="string")return mP1(VZA(A));return mP1(A)},snA=(A)=>{return String(TypeError(A).stack||A).split(`
`).slice(0,5).filter((Q)=>!Q.includes("stackTraceWarning")).join(`
`)},rqA={warn:console.warn},ja4=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],lP1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ta4(A){let Q=A.getUTCFullYear(),B=A.getUTCMonth(),G=A.getUTCDay(),Z=A.getUTCDate(),Y=A.getUTCHours(),J=A.getUTCMinutes(),X=A.getUTCSeconds(),I=Z<10?`0${Z}`:`${Z}`,W=Y<10?`0${Y}`:`${Y}`,D=J<10?`0${J}`:`${J}`,K=X<10?`0${X}`:`${X}`;return`${ja4[G]}, ${I} ${lP1[B]} ${Q} ${W}:${D}:${K} GMT`}var Pa4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Sa4=(A)=>{if(A===null||A===void 0)return;if(typeof A!=="string")throw TypeError("RFC-3339 date-times must be expressed as strings");let Q=Pa4.exec(A);if(!Q)throw TypeError("Invalid RFC-3339 date-time value");let[B,G,Z,Y,J,X,I,W]=Q,D=DZA(KZA(G)),K=Av(Z,"month",1,12),V=Av(Y,"day",1,31);return nqA(D,K,V,{hours:J,minutes:X,seconds:I,fractionalMilliseconds:W})},xa4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ya4=(A)=>{if(A===null||A===void 0)return;if(typeof A!=="string")throw TypeError("RFC-3339 date-times must be expressed as strings");let Q=xa4.exec(A);if(!Q)throw TypeError("Invalid RFC-3339 date-time value");let[B,G,Z,Y,J,X,I,W,D]=Q,K=DZA(KZA(G)),V=Av(Z,"month",1,12),F=Av(Y,"day",1,31),H=nqA(K,V,F,{hours:J,minutes:X,seconds:I,fractionalMilliseconds:W});if(D.toUpperCase()!="Z")H.setTime(H.getTime()-ia4(D));return H},va4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ka4=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ba4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),fa4=(A)=>{if(A===null||A===void 0)return;if(typeof A!=="string")throw TypeError("RFC-7231 date-times must be expressed as strings");let Q=va4.exec(A);if(Q){let[B,G,Z,Y,J,X,I,W]=Q;return nqA(DZA(KZA(Y)),hP1(Z),Av(G,"day",1,31),{hours:J,minutes:X,seconds:I,fractionalMilliseconds:W})}if(Q=ka4.exec(A),Q){let[B,G,Z,Y,J,X,I,W]=Q;return ma4(nqA(ga4(Y),hP1(Z),Av(G,"day",1,31),{hours:J,minutes:X,seconds:I,fractionalMilliseconds:W}))}if(Q=ba4.exec(A),Q){let[B,G,Z,Y,J,X,I,W]=Q;return nqA(DZA(KZA(W)),hP1(G),Av(Z.trimLeft(),"day",1,31),{hours:Y,minutes:J,seconds:X,fractionalMilliseconds:I})}throw TypeError("Invalid RFC-7231 date-time value")},ha4=(A)=>{if(A===null||A===void 0)return;let Q;if(typeof A==="number")Q=A;else if(typeof A==="string")Q=pP1(A);else if(typeof A==="object"&&A.tag===1)Q=A.value;else throw TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(Q)||Q===1/0||Q===-1/0)throw TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(Q*1000))},nqA=(A,Q,B,G)=>{let Z=Q-1;return pa4(A,Z,B),new Date(Date.UTC(A,Z,B,Av(G.hours,"hour",0,23),Av(G.minutes,"minute",0,59),Av(G.seconds,"seconds",0,60),la4(G.fractionalMilliseconds)))},ga4=(A)=>{let Q=new Date().getUTCFullYear(),B=Math.floor(Q/100)*100+DZA(KZA(A));if(B<Q)return B+100;return B},ua4=1576800000000,ma4=(A)=>{if(A.getTime()-new Date().getTime()>ua4)return new Date(Date.UTC(A.getUTCFullYear()-100,A.getUTCMonth(),A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),A.getUTCMilliseconds()));return A},hP1=(A)=>{let Q=lP1.indexOf(A);if(Q<0)throw TypeError(`Invalid month: ${A}`);return Q+1},da4=[31,28,31,30,31,30,31,31,30,31,30,31],pa4=(A,Q,B)=>{let G=da4[Q];if(Q===1&&ca4(A))G=29;if(B>G)throw TypeError(`Invalid day for ${lP1[Q]} in ${A}: ${B}`)},ca4=(A)=>{return A%4===0&&(A%100!==0||A%400===0)},Av=(A,Q,B,G)=>{let Z=AqQ(KZA(A));if(Z<B||Z>G)throw TypeError(`${Q} must be between ${B} and ${G}, inclusive`);return Z},la4=(A)=>{if(A===null||A===void 0)return 0;return sUQ("0."+A)*1000},ia4=(A)=>{let Q=A[0],B=1;if(Q=="+")B=1;else if(Q=="-")B=-1;else throw TypeError(`Offset direction, ${Q}, must be "+" or "-"`);let G=Number(A.substring(1,3)),Z=Number(A.substring(4,6));return B*(G*60+Z)*60*1000},KZA=(A)=>{let Q=0;while(Q<A.length-1&&A.charAt(Q)==="0")Q++;if(Q===0)return A;return A.slice(Q)},k1A=function(Q){return Object.assign(new String(Q),{deserializeJSON(){return JSON.parse(String(Q))},toString(){return String(Q)},toJSON(){return String(Q)}})};k1A.from=(A)=>{if(A&&typeof A==="object"&&(A instanceof k1A||("deserializeJSON"in A)))return A;else if(typeof A==="string"||Object.getPrototypeOf(A)===String.prototype)return k1A(String(A));return k1A(JSON.stringify(A))};k1A.fromObject=k1A.from;function na4(A){if(A.includes(",")||A.includes('"'))A=`"${A.replace(/"/g,"\\\"")}"`;return A}var iP1="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",nP1="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",aP1="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",QqQ="(\\d?\\d)",BqQ="(\\d{4})",aa4=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),oa4=new RegExp(`^${iP1}, ${QqQ} ${nP1} ${BqQ} ${aP1} GMT$`),ra4=new RegExp(`^${iP1}, ${QqQ}-${nP1}-(\\d\\d) ${aP1} GMT$`),sa4=new RegExp(`^${iP1} ${nP1} ( [1-9]|\\d\\d) ${aP1} ${BqQ}$`),ta4=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ea4=(A)=>{if(A==null)return;let Q=NaN;if(typeof A==="number")Q=A;else if(typeof A==="string"){if(!/^-?\d*\.?\d+$/.test(A))throw TypeError("parseEpochTimestamp - numeric string invalid.");Q=Number.parseFloat(A)}else if(typeof A==="object"&&A.tag===1)Q=A.value;if(isNaN(Q)||Math.abs(Q)===1/0)throw TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(Q*1000))},Ao4=(A)=>{if(A==null)return;if(typeof A!=="string")throw TypeError("RFC3339 timestamps must be strings");let Q=aa4.exec(A);if(!Q)throw TypeError(`Invalid RFC3339 timestamp format ${A}`);let[,B,G,Z,Y,J,X,,I,W]=Q;wg(G,1,12),wg(Z,1,31),wg(Y,0,23),wg(J,0,59),wg(X,0,60);let D=new Date(Date.UTC(Number(B),Number(G)-1,Number(Z),Number(Y),Number(J),Number(X),Number(I)?Math.round(parseFloat(`0.${I}`)*1000):0));if(D.setUTCFullYear(Number(B)),W.toUpperCase()!="Z"){let[,K,V,F]=/([+-])(\d\d):(\d\d)/.exec(W)||[void 0,"+",0,0],H=K==="-"?1:-1;D.setTime(D.getTime()+H*(Number(V)*60*60*1000+Number(F)*60*1000))}return D},Qo4=(A)=>{if(A==null)return;if(typeof A!=="string")throw TypeError("RFC7231 timestamps must be strings.");let Q,B,G,Z,Y,J,X,I;if(I=oa4.exec(A))[,Q,B,G,Z,Y,J,X]=I;else if(I=ra4.exec(A))[,Q,B,G,Z,Y,J,X]=I,G=(Number(G)+1900).toString();else if(I=sa4.exec(A))[,B,Q,Z,Y,J,X,G]=I;if(G&&J){let W=Date.UTC(Number(G),ta4.indexOf(B),Number(Q),Number(Z),Number(Y),Number(J),X?Math.round(parseFloat(`0.${X}`)*1000):0);wg(Q,1,31),wg(Z,0,23),wg(Y,0,59),wg(J,0,60);let D=new Date(W);return D.setUTCFullYear(Number(G)),D}throw TypeError(`Invalid RFC7231 date-time value ${A}.`)};function wg(A,Q,B){let G=Number(A);if(G<Q||G>B)throw Error(`Value ${G} out of range [${Q}, ${B}]`)}function Bo4(A,Q,B){if(B<=0||!Number.isInteger(B))throw Error("Invalid number of delimiters ("+B+") for splitEvery.");let G=A.split(Q);if(B===1)return G;let Z=[],Y="";for(let J=0;J<G.length;J++){if(Y==="")Y=G[J];else Y+=Q+G[J];if((J+1)%B===0)Z.push(Y),Y=""}if(Y!=="")Z.push(Y);return Z}var Go4=(A)=>{let Q=A.length,B=[],G=!1,Z=void 0,Y=0;for(let J=0;J<Q;++J){let X=A[J];switch(X){case'"':if(Z!=="\\")G=!G;break;case",":if(!G)B.push(A.slice(Y,J)),Y=J+1;break}Z=X}return B.push(A.slice(Y)),B.map((J)=>{J=J.trim();let X=J.length;if(X<2)return J;if(J[0]==='"'&&J[X-1]==='"')J=J.slice(1,X-1);return J.replace(/\\"/g,'"')})},oUQ=/^-?\d*(\.\d+)?$/;class tnA{string;type;constructor(A,Q){if(this.string=A,this.type=Q,!oUQ.test(A))throw Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](A){if(!A||typeof A!=="object")return!1;let Q=A;return tnA.prototype.isPrototypeOf(A)||Q.type==="bigDecimal"&&oUQ.test(Q.string)}}function Zo4(A){return new tnA(String(A),"bigDecimal")}Object.defineProperty(GqQ,"generateIdempotencyToken",{enumerable:!0,get:function(){return Ka4.v4}});GqQ.LazyJsonString=k1A;GqQ.NumericValue=tnA;GqQ._parseEpochTimestamp=ea4;GqQ._parseRfc3339DateTimeWithOffset=Ao4;GqQ._parseRfc7231DateTime=Qo4;GqQ.copyDocumentWithTransform=Va4;GqQ.dateToUtcString=Ta4;GqQ.expectBoolean=Ha4;GqQ.expectByte=mP1;GqQ.expectFloat32=rnA;GqQ.expectInt=za4;GqQ.expectInt32=gP1;GqQ.expectLong=oqA;GqQ.expectNonNull=$a4;GqQ.expectNumber=aqA;GqQ.expectObject=rUQ;GqQ.expectShort=uP1;GqQ.expectString=Ua4;GqQ.expectUnion=qa4;GqQ.handleFloat=La4;GqQ.limitedParseDouble=cP1;GqQ.limitedParseFloat=Oa4;GqQ.limitedParseFloat32=Ma4;GqQ.logger=rqA;GqQ.nv=Zo4;GqQ.parseBoolean=Fa4;GqQ.parseEpochTimestamp=ha4;GqQ.parseRfc3339DateTime=Sa4;GqQ.parseRfc3339DateTimeWithOffset=ya4;GqQ.parseRfc7231DateTime=fa4;GqQ.quoteHeader=na4;GqQ.splitEvery=Bo4;GqQ.splitHeader=Go4;GqQ.strictParseByte=AqQ;GqQ.strictParseDouble=pP1;GqQ.strictParseFloat=Na4;GqQ.strictParseFloat32=sUQ;GqQ.strictParseInt=Ra4;GqQ.strictParseInt32=_a4;GqQ.strictParseLong=eUQ;GqQ.strictParseShort=DZA});var ZqQ=U((no4)=>{var io4=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";no4.isArrayBuffer=io4});var rP1=U((to4)=>{var oo4=ZqQ(),oP1=qA("buffer"),ro4=(A,Q=0,B=A.byteLength-Q)=>{if(!oo4.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return oP1.Buffer.from(A,Q,B)},so4=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?oP1.Buffer.from(A,Q):oP1.Buffer.from(A)};to4.fromArrayBuffer=ro4;to4.fromString=so4});var XqQ=U((YqQ)=>{Object.defineProperty(YqQ,"__esModule",{value:!0});YqQ.fromBase64=void 0;var Qr4=rP1(),Br4=/^[A-Za-z0-9+/]*={0,2}$/,Gr4=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!Br4.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,Qr4.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};YqQ.fromBase64=Gr4});var DqQ=U((IqQ)=>{Object.defineProperty(IqQ,"__esModule",{value:!0});IqQ.toBase64=void 0;var Zr4=rP1(),Yr4=lG(),Jr4=(A)=>{let Q;if(typeof A==="string")Q=(0,Yr4.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Zr4.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};IqQ.toBase64=Jr4});var sP1=U((sqA)=>{var KqQ=XqQ(),VqQ=DqQ();Object.keys(KqQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(sqA,A))Object.defineProperty(sqA,A,{enumerable:!0,get:function(){return KqQ[A]}})});Object.keys(VqQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(sqA,A))Object.defineProperty(sqA,A,{enumerable:!0,get:function(){return VqQ[A]}})})});var EqQ=U((Xr4)=>{var FqQ=lG();class HqQ{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:A,serializer:Q,deserializer:B,serdeContext:G,defaultContentType:Z}){this.marshaller=A,this.serializer=Q,this.deserializer=B,this.serdeContext=G,this.defaultContentType=Z}async serializeEventStream({eventStream:A,requestSchema:Q,initialRequest:B}){let G=this.marshaller,Z=Q.getEventStreamMember(),Y=Q.getMemberSchema(Z),J=this.serializer,X=this.defaultContentType,I=Symbol("initialRequestMarker"),W={async*[Symbol.asyncIterator](){if(B){let D={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:X}};J.write(Q,B);let K=J.flush();yield{[I]:!0,headers:D,body:K}}for await(let D of A)yield D}};return G.serialize(W,(D)=>{if(D[I])return{headers:D.headers,body:D.body};let K=Object.keys(D).find((C)=>{return C!=="__type"})??"",{additionalHeaders:V,body:F,eventType:H,explicitPayloadContentType:E}=this.writeEventBody(K,Y,D);return{headers:{":event-type":{type:"string",value:H},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:E??X},...V},body:F}})}async deserializeEventStream({response:A,responseSchema:Q,initialResponseContainer:B}){let G=this.marshaller,Z=Q.getEventStreamMember(),J=Q.getMemberSchema(Z).getMemberSchemas(),X=Symbol("initialResponseMarker"),I=G.deserialize(A.body,async(K)=>{let V=Object.keys(K).find((H)=>{return H!=="__type"})??"",F=K[V].body;if(V==="initial-response"){let H=await this.deserializer.read(Q,F);return delete H[Z],{[X]:!0,...H}}else if(V in J){let H=J[V];if(H.isStructSchema()){let E={},z=!1;for(let[C,O]of H.structIterator()){let{eventHeader:L,eventPayload:M}=O.getMergedTraits();if(z=z||Boolean(L||M),M){if(O.isBlobSchema())E[C]=F;else if(O.isStringSchema())E[C]=(this.serdeContext?.utf8Encoder??FqQ.toUtf8)(F);else if(O.isStructSchema())E[C]=await this.deserializer.read(O,F)}else if(L){let _=K[V].headers[C]?.value;if(_!=null)if(O.isNumericSchema())if(_&&typeof _==="object"&&"bytes"in _)E[C]=BigInt(_.toString());else E[C]=Number(_);else E[C]=_}}if(z)return{[V]:E}}return{[V]:await this.deserializer.read(H,F)}}else return{$unknown:K}}),W=I[Symbol.asyncIterator](),D=await W.next();if(D.done)return I;if(D.value?.[X]){if(!Q)throw Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[K,V]of Object.entries(D.value))B[K]=V}return{async*[Symbol.asyncIterator](){if(!D?.value?.[X])yield D.value;while(!0){let{done:K,value:V}=await W.next();if(K)break;yield V}}}}writeEventBody(A,Q,B){let G=this.serializer,Z=A,Y=null,J,X=(()=>{return Q.getSchema()[4].includes(A)})(),I={};if(!X){let[K,V]=B[A];Z=K,G.write(15,V)}else{let K=Q.getMemberSchema(A);if(K.isStructSchema()){for(let[V,F]of K.structIterator()){let{eventHeader:H,eventPayload:E}=F.getMergedTraits();if(E){Y=V;break}else if(H){let z=B[A][V],C="binary";if(F.isNumericSchema())if(-2147483648<=z&&z<=2147483647)C="integer";else C="long";else if(F.isTimestampSchema())C="timestamp";else if(F.isStringSchema())C="string";else if(F.isBooleanSchema())C="boolean";if(z!=null)I[V]={type:C,value:z},delete B[A][V]}}if(Y!==null){let V=K.getMemberSchema(Y);if(V.isBlobSchema())J="application/octet-stream";else if(V.isStringSchema())J="text/plain";G.write(V,B[A][Y])}else G.write(K,B[A])}else throw Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}let W=G.flush();return{body:typeof W==="string"?(this.serdeContext?.utf8Decoder??FqQ.fromUtf8)(W):W,eventType:Z,explicitPayloadContentType:J,additionalHeaders:I}}}Xr4.EventStreamSerde=HqQ});var Iq=U((Dr4)=>{var enA=xP1(),yM=IX(),xM=Xq(),tqA=hqA(),AaA=sP1(),tP1=lG(),b1A=async(A=new Uint8Array,Q)=>{if(A instanceof Uint8Array)return enA.Uint8ArrayBlobAdapter.mutate(A);if(!A)return enA.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let B=Q.streamCollector(A);return enA.Uint8ArrayBlobAdapter.mutate(await B)};function eqA(A){return encodeURIComponent(A).replace(/[!'()*]/g,function(Q){return"%"+Q.charCodeAt(0).toString(16).toUpperCase()})}class FZA{serdeContext;setSerdeContext(A){this.serdeContext=A}}class QaA extends FZA{options;constructor(A){super();this.options=A}getRequestType(){return tqA.HttpRequest}getResponseType(){return tqA.HttpResponse}setSerdeContext(A){if(this.serdeContext=A,this.serializer.setSerdeContext(A),this.deserializer.setSerdeContext(A),this.getPayloadCodec())this.getPayloadCodec().setSerdeContext(A)}updateServiceEndpoint(A,Q){if("url"in Q){if(A.protocol=Q.url.protocol,A.hostname=Q.url.hostname,A.port=Q.url.port?Number(Q.url.port):void 0,A.path=Q.url.pathname,A.fragment=Q.url.hash||void 0,A.username=Q.url.username||void 0,A.password=Q.url.password||void 0,!A.query)A.query={};for(let[B,G]of Q.url.searchParams.entries())A.query[B]=G;return A}else return A.protocol=Q.protocol,A.hostname=Q.hostname,A.port=Q.port?Number(Q.port):void 0,A.path=Q.path,A.query={...Q.query},A}setHostPrefix(A,Q,B){let G=yM.NormalizedSchema.of(Q.input),Z=yM.translateTraits(Q.traits??{});if(Z.endpoint){let Y=Z.endpoint?.[0];if(typeof Y==="string"){let J=[...G.structIterator()].filter(([,X])=>X.getMergedTraits().hostLabel);for(let[X]of J){let I=B[X];if(typeof I!=="string")throw Error(`@smithy/core/schema - ${X} in input must be a string as hostLabel.`);Y=Y.replace(`{${X}}`,I)}A.hostname=Y+A.hostname}}}deserializeMetadata(A){return{httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:A,requestSchema:Q,initialRequest:B}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:A,requestSchema:Q,initialRequest:B})}async deserializeEventStream({response:A,responseSchema:Q,initialResponseContainer:B}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:A,responseSchema:Q,initialResponseContainer:B})}async loadEventStreamCapability(){let{EventStreamSerde:A}=await Promise.resolve().then(() => c(EqQ()));return new A({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(A,Q,B,G,Z){return[]}getEventStreamMarshaller(){let A=this.serdeContext;if(!A.eventStreamMarshaller)throw Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return A.eventStreamMarshaller}}class zqQ extends QaA{async serializeRequest(A,Q,B){let G={...Q??{}},Z=this.serializer,Y={},J={},X=await B.endpoint(),I=yM.NormalizedSchema.of(A?.input),W=I.getSchema(),D=!1,K,V=new tqA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:Y,headers:J,body:void 0});if(X){this.updateServiceEndpoint(V,X),this.setHostPrefix(V,A,G);let F=yM.translateTraits(A.traits);if(F.http){V.method=F.http[0];let[H,E]=F.http[1].split("?");if(V.path=="/")V.path=H;else V.path+=H;let z=new URLSearchParams(E??"");Object.assign(Y,Object.fromEntries(z))}}for(let[F,H]of I.structIterator()){let E=H.getMergedTraits()??{},z=G[F];if(z==null&&!H.isIdempotencyToken())continue;if(E.httpPayload){if(H.isStreaming())if(H.isStructSchema()){if(G[F])K=await this.serializeEventStream({eventStream:G[F],requestSchema:I})}else K=z;else Z.write(H,z),K=Z.flush();delete G[F]}else if(E.httpLabel){Z.write(H,z);let C=Z.flush();if(V.path.includes(`{${F}+}`))V.path=V.path.replace(`{${F}+}`,C.split("/").map(eqA).join("/"));else if(V.path.includes(`{${F}}`))V.path=V.path.replace(`{${F}}`,eqA(C));delete G[F]}else if(E.httpHeader)Z.write(H,z),J[E.httpHeader.toLowerCase()]=String(Z.flush()),delete G[F];else if(typeof E.httpPrefixHeaders==="string"){for(let[C,O]of Object.entries(z)){let L=E.httpPrefixHeaders+C;Z.write([H.getValueSchema(),{httpHeader:L}],O),J[L.toLowerCase()]=Z.flush()}delete G[F]}else if(E.httpQuery||E.httpQueryParams)this.serializeQuery(H,z,Y),delete G[F];else D=!0}if(D&&G)Z.write(W,G),K=Z.flush();return V.headers=J,V.query=Y,V.body=K,V}serializeQuery(A,Q,B){let G=this.serializer,Z=A.getMergedTraits();if(Z.httpQueryParams){for(let[Y,J]of Object.entries(Q))if(!(Y in B)){let X=A.getValueSchema();Object.assign(X.getMergedTraits(),{...Z,httpQuery:Y,httpQueryParams:void 0}),this.serializeQuery(X,J,B)}return}if(A.isListSchema()){let Y=!!A.getMergedTraits().sparse,J=[];for(let X of Q){G.write([A.getValueSchema(),Z],X);let I=G.flush();if(Y||I!==void 0)J.push(I)}B[Z.httpQuery]=J}else G.write([A,Z],Q),B[Z.httpQuery]=G.flush()}async deserializeResponse(A,Q,B){let G=this.deserializer,Z=yM.NormalizedSchema.of(A.output),Y={};if(B.statusCode>=300){let X=await b1A(B.body,Q);if(X.byteLength>0)Object.assign(Y,await G.read(15,X));throw await this.handleError(A,Q,B,Y,this.deserializeMetadata(B)),Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let X in B.headers){let I=B.headers[X];delete B.headers[X],B.headers[X.toLowerCase()]=I}let J=await this.deserializeHttpMessage(Z,Q,B,Y);if(J.length){let X=await b1A(B.body,Q);if(X.byteLength>0){let I=await G.read(Z,X);for(let W of J)Y[W]=I[W]}}else if(J.discardResponseBody)await b1A(B.body,Q);return Y.$metadata=this.deserializeMetadata(B),Y}async deserializeHttpMessage(A,Q,B,G,Z){let Y;if(G instanceof Set)Y=Z;else Y=G;let J=!0,X=this.deserializer,I=yM.NormalizedSchema.of(A),W=[];for(let[D,K]of I.structIterator()){let V=K.getMemberTraits();if(V.httpPayload){if(J=!1,K.isStreaming())if(K.isStructSchema())Y[D]=await this.deserializeEventStream({response:B,responseSchema:I});else Y[D]=enA.sdkStreamMixin(B.body);else if(B.body){let H=await b1A(B.body,Q);if(H.byteLength>0)Y[D]=await X.read(K,H)}}else if(V.httpHeader){let F=String(V.httpHeader).toLowerCase(),H=B.headers[F];if(H!=null)if(K.isListSchema()){let E=K.getValueSchema();E.getMergedTraits().httpHeader=F;let z;if(E.isTimestampSchema()&&E.getSchema()===4)z=xM.splitEvery(H,",",2);else z=xM.splitHeader(H);let C=[];for(let O of z)C.push(await X.read(E,O.trim()));Y[D]=C}else Y[D]=await X.read(K,H)}else if(V.httpPrefixHeaders!==void 0){Y[D]={};for(let[F,H]of Object.entries(B.headers))if(F.startsWith(V.httpPrefixHeaders)){let E=K.getValueSchema();E.getMergedTraits().httpHeader=F,Y[D][F.slice(V.httpPrefixHeaders.length)]=await X.read(E,H)}}else if(V.httpResponseCode)Y[D]=B.statusCode;else W.push(D)}return W.discardResponseBody=J,W}}class CqQ extends QaA{async serializeRequest(A,Q,B){let G=this.serializer,Z={},Y={},J=await B.endpoint(),X=yM.NormalizedSchema.of(A?.input),I=X.getSchema(),W,D=new tqA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:Z,headers:Y,body:void 0});if(J)this.updateServiceEndpoint(D,J),this.setHostPrefix(D,A,Q);let K={...Q};if(Q){let V=X.getEventStreamMember();if(V){if(K[V]){let F={};for(let[H,E]of X.structIterator())if(H!==V&&K[H])G.write(E,K[H]),F[H]=G.flush();W=await this.serializeEventStream({eventStream:K[V],requestSchema:X,initialRequest:F})}}else G.write(I,K),W=G.flush()}return D.headers=Y,D.query=Z,D.body=W,D.method="POST",D}async deserializeResponse(A,Q,B){let G=this.deserializer,Z=yM.NormalizedSchema.of(A.output),Y={};if(B.statusCode>=300){let X=await b1A(B.body,Q);if(X.byteLength>0)Object.assign(Y,await G.read(15,X));throw await this.handleError(A,Q,B,Y,this.deserializeMetadata(B)),Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let X in B.headers){let I=B.headers[X];delete B.headers[X],B.headers[X.toLowerCase()]=I}let J=Z.getEventStreamMember();if(J)Y[J]=await this.deserializeEventStream({response:B,responseSchema:Z,initialResponseContainer:Y});else{let X=await b1A(B.body,Q);if(X.byteLength>0)Object.assign(Y,await G.read(Z,X))}return Y.$metadata=this.deserializeMetadata(B),Y}}var $qQ=(A,Q,B,G,Z,Y)=>{if(Q!=null&&Q[B]!==void 0){let J=G();if(J.length<=0)throw Error("Empty value provided for input HTTP label: "+B+".");A=A.replace(Z,Y?J.split("/").map((X)=>eqA(X)).join("/"):eqA(J))}else throw Error("No value provided for input HTTP label: "+B+".");return A};function Wr4(A,Q){return new eP1(A,Q)}class eP1{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(A,Q){this.input=A,this.context=Q}async build(){let{hostname:A,protocol:Q="https",port:B,path:G}=await this.context.endpoint();this.path=G;for(let Z of this.resolvePathStack)Z(this.path);return new tqA.HttpRequest({protocol:Q,hostname:this.hostname||A,port:B,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(A){return this.hostname=A,this}bp(A){return this.resolvePathStack.push((Q)=>{this.path=`${Q?.endsWith("/")?Q.slice(0,-1):Q||""}`+A}),this}p(A,Q,B,G){return this.resolvePathStack.push((Z)=>{this.path=$qQ(Z,this.input,A,Q,B,G)}),this}h(A){return this.headers=A,this}q(A){return this.query=A,this}b(A){return this.body=A,this}m(A){return this.method=A,this}}function AS1(A,Q){if(Q.timestampFormat.useTrait){if(A.isTimestampSchema()&&(A.getSchema()===5||A.getSchema()===6||A.getSchema()===7))return A.getSchema()}let{httpLabel:B,httpPrefixHeaders:G,httpHeader:Z,httpQuery:Y}=A.getMergedTraits();return(Q.httpBindings?typeof G==="string"||Boolean(Z)?6:Boolean(Y)||Boolean(B)?5:void 0:void 0)??Q.timestampFormat.default}class QS1 extends FZA{settings;constructor(A){super();this.settings=A}read(A,Q){let B=yM.NormalizedSchema.of(A);if(B.isListSchema())return xM.splitHeader(Q).map((G)=>this.read(B.getValueSchema(),G));if(B.isBlobSchema())return(this.serdeContext?.base64Decoder??AaA.fromBase64)(Q);if(B.isTimestampSchema())switch(AS1(B,this.settings)){case 5:return xM._parseRfc3339DateTimeWithOffset(Q);case 6:return xM._parseRfc7231DateTime(Q);case 7:return xM._parseEpochTimestamp(Q);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",Q),new Date(Q)}if(B.isStringSchema()){let G=B.getMergedTraits().mediaType,Z=Q;if(G){if(B.getMergedTraits().httpHeader)Z=this.base64ToUtf8(Z);if(G==="application/json"||G.endsWith("+json"))Z=xM.LazyJsonString.from(Z);return Z}}if(B.isNumericSchema())return Number(Q);if(B.isBigIntegerSchema())return BigInt(Q);if(B.isBigDecimalSchema())return new xM.NumericValue(Q,"bigDecimal");if(B.isBooleanSchema())return String(Q).toLowerCase()==="true";return Q}base64ToUtf8(A){return(this.serdeContext?.utf8Encoder??tP1.toUtf8)((this.serdeContext?.base64Decoder??AaA.fromBase64)(A))}}class UqQ extends FZA{codecDeserializer;stringDeserializer;constructor(A,Q){super();this.codecDeserializer=A,this.stringDeserializer=new QS1(Q)}setSerdeContext(A){this.stringDeserializer.setSerdeContext(A),this.codecDeserializer.setSerdeContext(A),this.serdeContext=A}read(A,Q){let B=yM.NormalizedSchema.of(A),G=B.getMergedTraits(),Z=this.serdeContext?.utf8Encoder??tP1.toUtf8;if(G.httpHeader||G.httpResponseCode)return this.stringDeserializer.read(B,Z(Q));if(G.httpPayload){if(B.isBlobSchema()){let Y=this.serdeContext?.utf8Decoder??tP1.fromUtf8;if(typeof Q==="string")return Y(Q);return Q}else if(B.isStringSchema()){if("byteLength"in Q)return Z(Q);return Q}}return this.codecDeserializer.read(B,Q)}}class BS1 extends FZA{settings;stringBuffer="";constructor(A){super();this.settings=A}write(A,Q){let B=yM.NormalizedSchema.of(A);switch(typeof Q){case"object":if(Q===null){this.stringBuffer="null";return}if(B.isTimestampSchema()){if(!(Q instanceof Date))throw Error(`@smithy/core/protocols - received non-Date value ${Q} when schema expected Date in ${B.getName(!0)}`);switch(AS1(B,this.settings)){case 5:this.stringBuffer=Q.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=xM.dateToUtcString(Q);break;case 7:this.stringBuffer=String(Q.getTime()/1000);break;default:console.warn("Missing timestamp format, using epoch seconds",Q),this.stringBuffer=String(Q.getTime()/1000)}return}if(B.isBlobSchema()&&"byteLength"in Q){this.stringBuffer=(this.serdeContext?.base64Encoder??AaA.toBase64)(Q);return}if(B.isListSchema()&&Array.isArray(Q)){let Y="";for(let J of Q){this.write([B.getValueSchema(),B.getMergedTraits()],J);let X=this.flush(),I=B.getValueSchema().isTimestampSchema()?X:xM.quoteHeader(X);if(Y!=="")Y+=", ";Y+=I}this.stringBuffer=Y;return}this.stringBuffer=JSON.stringify(Q,null,2);break;case"string":let G=B.getMergedTraits().mediaType,Z=Q;if(G){if(G==="application/json"||G.endsWith("+json"))Z=xM.LazyJsonString.from(Z);if(B.getMergedTraits().httpHeader){this.stringBuffer=(this.serdeContext?.base64Encoder??AaA.toBase64)(Z.toString());return}}this.stringBuffer=Q;break;default:if(B.isIdempotencyToken())this.stringBuffer=xM.generateIdempotencyToken();else this.stringBuffer=String(Q)}}flush(){let A=this.stringBuffer;return this.stringBuffer="",A}}class qqQ{codecSerializer;stringSerializer;buffer;constructor(A,Q,B=new BS1(Q)){this.codecSerializer=A,this.stringSerializer=B}setSerdeContext(A){this.codecSerializer.setSerdeContext(A),this.stringSerializer.setSerdeContext(A)}write(A,Q){let B=yM.NormalizedSchema.of(A),G=B.getMergedTraits();if(G.httpHeader||G.httpLabel||G.httpQuery){this.stringSerializer.write(B,Q),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(B,Q)}flush(){if(this.buffer!==void 0){let A=this.buffer;return this.buffer=void 0,A}return this.codecSerializer.flush()}}Dr4.FromStringShapeDeserializer=QS1;Dr4.HttpBindingProtocol=zqQ;Dr4.HttpInterceptingShapeDeserializer=UqQ;Dr4.HttpInterceptingShapeSerializer=qqQ;Dr4.HttpProtocol=QaA;Dr4.RequestBuilder=eP1;Dr4.RpcProtocol=CqQ;Dr4.SerdeContext=FZA;Dr4.ToStringShapeSerializer=BS1;Dr4.collectBody=b1A;Dr4.determineTimestampFormat=AS1;Dr4.extendedEncodeURIComponent=eqA;Dr4.requestBuilder=Wr4;Dr4.resolvedPath=$qQ});var iG=U((yqQ)=>{var BaA=aT1(),NqQ=Iz(),Mr4=IP1(),GS1=hqA(),Rr4=Iq(),_r4=(A)=>A[BaA.SMITHY_CONTEXT_KEY]||(A[BaA.SMITHY_CONTEXT_KEY]={}),jr4=(A,Q)=>{if(!Q||Q.length===0)return A;let B=[];for(let G of Q)for(let Z of A)if(Z.schemeId.split("#")[1]===G)B.push(Z);for(let G of A)if(!B.find(({schemeId:Z})=>Z===G.schemeId))B.push(G);return B};function Tr4(A){let Q=new Map;for(let B of A)Q.set(B.schemeId,B);return Q}var ZS1=(A,Q)=>(B,G)=>async(Z)=>{let Y=A.httpAuthSchemeProvider(await Q.httpAuthSchemeParametersProvider(A,G,Z.input)),J=A.authSchemePreference?await A.authSchemePreference():[],X=jr4(Y,J),I=Tr4(A.httpAuthSchemes),W=NqQ.getSmithyContext(G),D=[];for(let K of X){let V=I.get(K.schemeId);if(!V){D.push(`HttpAuthScheme \`${K.schemeId}\` was not enabled for this service.`);continue}let F=V.identityProvider(await Q.identityProviderConfigProvider(A));if(!F){D.push(`HttpAuthScheme \`${K.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:H={},signingProperties:E={}}=K.propertiesExtractor?.(A,G)||{};K.identityProperties=Object.assign(K.identityProperties||{},H),K.signingProperties=Object.assign(K.signingProperties||{},E),W.selectedHttpAuthScheme={httpAuthOption:K,identity:await F(K.identityProperties),signer:V.signer};break}if(!W.selectedHttpAuthScheme)throw Error(D.join(`
`));return B(Z)},wqQ={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Pr4=(A,{httpAuthSchemeParametersProvider:Q,identityProviderConfigProvider:B})=>({applyToStack:(G)=>{G.addRelativeTo(ZS1(A,{httpAuthSchemeParametersProvider:Q,identityProviderConfigProvider:B}),wqQ)}}),LqQ={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Mr4.serializerMiddlewareOption.name},Sr4=(A,{httpAuthSchemeParametersProvider:Q,identityProviderConfigProvider:B})=>({applyToStack:(G)=>{G.addRelativeTo(ZS1(A,{httpAuthSchemeParametersProvider:Q,identityProviderConfigProvider:B}),LqQ)}}),xr4=(A)=>(Q)=>{throw Q},yr4=(A,Q)=>{},OqQ=(A)=>(Q,B)=>async(G)=>{if(!GS1.HttpRequest.isInstance(G.request))return Q(G);let Y=NqQ.getSmithyContext(B).selectedHttpAuthScheme;if(!Y)throw Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:J={}},identity:X,signer:I}=Y,W=await Q({...G,request:await I.sign(G.request,X,J)}).catch((I.errorHandler||xr4)(J));return(I.successHandler||yr4)(W.response,J),W},MqQ={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},vr4=(A)=>({applyToStack:(Q)=>{Q.addRelativeTo(OqQ(),MqQ)}}),kr4=(A)=>{if(typeof A==="function")return A;let Q=Promise.resolve(A);return()=>Q},br4=async(A,Q,B,G=(Y)=>Y,...Z)=>{let Y=new A(B);return Y=G(Y)??Y,await Q.send(Y,...Z)};function fr4(A,Q,B,G,Z){return async function*(J,X,...I){let W=X,D=J.startingToken??W[B],K=!0,V;while(K){if(W[B]=D,Z)W[Z]=W[Z]??J.pageSize;if(J.client instanceof A)V=await br4(Q,J.client,X,J.withCommand,...I);else throw Error(`Invalid client, expected instance of ${A.name}`);yield V;let F=D;D=hr4(V,G),K=!!(D&&(!J.stopOnSameToken||D!==F))}return}}var hr4=(A,Q)=>{let B=A,G=Q.split(".");for(let Z of G){if(!B||typeof B!=="object")return;B=B[Z]}return B};function gr4(A,Q,B){if(!A.__smithy_context)A.__smithy_context={features:{}};else if(!A.__smithy_context.features)A.__smithy_context.features={};A.__smithy_context.features[Q]=B}class RqQ{authSchemes=new Map;constructor(A){for(let[Q,B]of Object.entries(A))if(B!==void 0)this.authSchemes.set(Q,B)}getIdentityProvider(A){return this.authSchemes.get(A)}}class _qQ{async sign(A,Q,B){if(!B)throw Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!B.name)throw Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!B.in)throw Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!Q.apiKey)throw Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let G=GS1.HttpRequest.clone(A);if(B.in===BaA.HttpApiKeyAuthLocation.QUERY)G.query[B.name]=Q.apiKey;else if(B.in===BaA.HttpApiKeyAuthLocation.HEADER)G.headers[B.name]=B.scheme?`${B.scheme} ${Q.apiKey}`:Q.apiKey;else throw Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+B.in+"`");return G}}class jqQ{async sign(A,Q,B){let G=GS1.HttpRequest.clone(A);if(!Q.token)throw Error("request could not be signed with `token` since the `token` is not defined");return G.headers.Authorization=`Bearer ${Q.token}`,G}}class TqQ{async sign(A,Q,B){return A}}var PqQ=(A)=>function(B){return xqQ(B)&&B.expiration.getTime()-Date.now()<A},SqQ=300000,ur4=PqQ(SqQ),xqQ=(A)=>A.expiration!==void 0,mr4=(A,Q,B)=>{if(A===void 0)return;let G=typeof A!=="function"?async()=>Promise.resolve(A):A,Z,Y,J,X=!1,I=async(W)=>{if(!Y)Y=G(W);try{Z=await Y,J=!0,X=!1}finally{Y=void 0}return Z};if(Q===void 0)return async(W)=>{if(!J||W?.forceRefresh)Z=await I(W);return Z};return async(W)=>{if(!J||W?.forceRefresh)Z=await I(W);if(X)return Z;if(!B(Z))return X=!0,Z;if(Q(Z))return await I(W),Z;return Z}};Object.defineProperty(yqQ,"requestBuilder",{enumerable:!0,get:function(){return Rr4.requestBuilder}});yqQ.DefaultIdentityProviderConfig=RqQ;yqQ.EXPIRATION_MS=SqQ;yqQ.HttpApiKeyAuthSigner=_qQ;yqQ.HttpBearerAuthSigner=jqQ;yqQ.NoAuthSigner=TqQ;yqQ.createIsIdentityExpiredFunction=PqQ;yqQ.createPaginator=fr4;yqQ.doesIdentityRequireRefresh=xqQ;yqQ.getHttpAuthSchemeEndpointRuleSetPlugin=Pr4;yqQ.getHttpAuthSchemePlugin=Sr4;yqQ.getHttpSigningPlugin=vr4;yqQ.getSmithyContext=_r4;yqQ.httpAuthSchemeEndpointRuleSetMiddlewareOptions=wqQ;yqQ.httpAuthSchemeMiddleware=ZS1;yqQ.httpAuthSchemeMiddlewareOptions=LqQ;yqQ.httpSigningMiddleware=OqQ;yqQ.httpSigningMiddlewareOptions=MqQ;yqQ.isIdentityExpired=ur4;yqQ.memoizeIdentityProvider=mr4;yqQ.normalizeProvider=kr4;yqQ.setFeature=gr4});var vqQ=U((Hs4)=>{Hs4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(Hs4.HttpAuthLocation||(Hs4.HttpAuthLocation={}));Hs4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(Hs4.HttpApiKeyAuthLocation||(Hs4.HttpApiKeyAuthLocation={}));Hs4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(Hs4.EndpointURLScheme||(Hs4.EndpointURLScheme={}));Hs4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(Hs4.AlgorithmId||(Hs4.AlgorithmId={}));var Ws4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>Hs4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>Hs4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},Ds4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Ks4=(A)=>{return Ws4(A)},Vs4=(A)=>{return Ds4(A)};Hs4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(Hs4.FieldPosition||(Hs4.FieldPosition={}));var Fs4="__smithy_context";Hs4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(Hs4.IniSectionType||(Hs4.IniSectionType={}));Hs4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(Hs4.RequestHandlerProtocol||(Hs4.RequestHandlerProtocol={}));Hs4.SMITHY_CONTEXT_KEY=Fs4;Hs4.getDefaultClientConfiguration=Ks4;Hs4.resolveDefaultRuntimeConfig=Vs4});var FT=U((fs4)=>{var VS1=vqQ();class kqQ{capacity;data=new Map;parameters=[];constructor({size:A,params:Q}){if(this.capacity=A??50,Q)this.parameters=Q}get(A,Q){let B=this.hash(A);if(B===!1)return Q();if(!this.data.has(B)){if(this.data.size>this.capacity+10){let G=this.data.keys(),Z=0;while(!0){let{value:Y,done:J}=G.next();if(this.data.delete(Y),J||++Z>10)break}}this.data.set(B,Q())}return this.data.get(B)}size(){return this.data.size}hash(A){let Q="",{parameters:B}=this;if(B.length===0)return!1;for(let G of B){let Z=String(A[G]??"");if(Z.includes("|;"))return!1;Q+=Z+"|;"}return Q}}var $s4=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),bqQ=(A)=>$s4.test(A)||A.startsWith("[")&&A.endsWith("]"),Us4=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),HS1=(A,Q=!1)=>{if(!Q)return Us4.test(A);let B=A.split(".");for(let G of B)if(!HS1(G))return!1;return!0},FS1={},QNA="endpoints";function Vi(A){if(typeof A!=="object"||A==null)return A;if("ref"in A)return`$${Vi(A.ref)}`;if("fn"in A)return`${A.fn}(${(A.argv||[]).map(Vi).join(", ")})`;return JSON.stringify(A,null,2)}class oC extends Error{constructor(A){super(A);this.name="EndpointError"}}var qs4=(A,Q)=>A===Q,Ns4=(A)=>{let Q=A.split("."),B=[];for(let G of Q){let Z=G.indexOf("[");if(Z!==-1){if(G.indexOf("]")!==G.length-1)throw new oC(`Path: '${A}' does not end with ']'`);let Y=G.slice(Z+1,-1);if(Number.isNaN(parseInt(Y)))throw new oC(`Invalid array index: '${Y}' in path: '${A}'`);if(Z!==0)B.push(G.slice(0,Z));B.push(Y)}else B.push(G)}return B},fqQ=(A,Q)=>Ns4(Q).reduce((B,G)=>{if(typeof B!=="object")throw new oC(`Index '${G}' in '${Q}' not found in '${JSON.stringify(A)}'`);else if(Array.isArray(B))return B[parseInt(G)];return B[G]},A),ws4=(A)=>A!=null,Ls4=(A)=>!A,KS1={[VS1.EndpointURLScheme.HTTP]:80,[VS1.EndpointURLScheme.HTTPS]:443},Os4=(A)=>{let Q=(()=>{try{if(A instanceof URL)return A;if(typeof A==="object"&&"hostname"in A){let{hostname:V,port:F,protocol:H="",path:E="",query:z={}}=A,C=new URL(`${H}//${V}${F?`:${F}`:""}${E}`);return C.search=Object.entries(z).map(([O,L])=>`${O}=${L}`).join("&"),C}return new URL(A)}catch(V){return null}})();if(!Q)return console.error(`Unable to parse ${JSON.stringify(A)} as a whatwg URL.`),null;let B=Q.href,{host:G,hostname:Z,pathname:Y,protocol:J,search:X}=Q;if(X)return null;let I=J.slice(0,-1);if(!Object.values(VS1.EndpointURLScheme).includes(I))return null;let W=bqQ(Z),D=B.includes(`${G}:${KS1[I]}`)||typeof A==="string"&&A.includes(`${G}:${KS1[I]}`),K=`${G}${D?`:${KS1[I]}`:""}`;return{scheme:I,authority:K,path:Y,normalizedPath:Y.endsWith("/")?Y:`${Y}/`,isIp:W}},Ms4=(A,Q)=>A===Q,Rs4=(A,Q,B,G)=>{if(Q>=B||A.length<B)return null;if(!G)return A.substring(Q,B);return A.substring(A.length-B,A.length-Q)},_s4=(A)=>encodeURIComponent(A).replace(/[!*'()]/g,(Q)=>`%${Q.charCodeAt(0).toString(16).toUpperCase()}`),js4={booleanEquals:qs4,getAttr:fqQ,isSet:ws4,isValidHostLabel:HS1,not:Ls4,parseURL:Os4,stringEquals:Ms4,substring:Rs4,uriEncode:_s4},hqQ=(A,Q)=>{let B=[],G={...Q.endpointParams,...Q.referenceRecord},Z=0;while(Z<A.length){let Y=A.indexOf("{",Z);if(Y===-1){B.push(A.slice(Z));break}B.push(A.slice(Z,Y));let J=A.indexOf("}",Y);if(J===-1){B.push(A.slice(Y));break}if(A[Y+1]==="{"&&A[J+1]==="}")B.push(A.slice(Y+1,J)),Z=J+2;let X=A.substring(Y+1,J);if(X.includes("#")){let[I,W]=X.split("#");B.push(fqQ(G[I],W))}else B.push(G[X]);Z=J+1}return B.join("")},Ts4=({ref:A},Q)=>{return{...Q.endpointParams,...Q.referenceRecord}[A]},GaA=(A,Q,B)=>{if(typeof A==="string")return hqQ(A,B);else if(A.fn)return uqQ.callFunction(A,B);else if(A.ref)return Ts4(A,B);throw new oC(`'${Q}': ${String(A)} is not a string, function or reference.`)},gqQ=({fn:A,argv:Q},B)=>{let G=Q.map((Y)=>["boolean","number"].includes(typeof Y)?Y:uqQ.evaluateExpression(Y,"arg",B)),Z=A.split(".");if(Z[0]in FS1&&Z[1]!=null)return FS1[Z[0]][Z[1]](...G);return js4[A](...G)},uqQ={evaluateExpression:GaA,callFunction:gqQ},Ps4=({assign:A,...Q},B)=>{if(A&&A in B.referenceRecord)throw new oC(`'${A}' is already defined in Reference Record.`);let G=gqQ(Q,B);return B.logger?.debug?.(`${QNA} evaluateCondition: ${Vi(Q)} = ${Vi(G)}`),{result:G===""?!0:!!G,...A!=null&&{toAssign:{name:A,value:G}}}},ES1=(A=[],Q)=>{let B={};for(let G of A){let{result:Z,toAssign:Y}=Ps4(G,{...Q,referenceRecord:{...Q.referenceRecord,...B}});if(!Z)return{result:Z};if(Y)B[Y.name]=Y.value,Q.logger?.debug?.(`${QNA} assign: ${Y.name} := ${Vi(Y.value)}`)}return{result:!0,referenceRecord:B}},Ss4=(A,Q)=>Object.entries(A).reduce((B,[G,Z])=>({...B,[G]:Z.map((Y)=>{let J=GaA(Y,"Header value entry",Q);if(typeof J!=="string")throw new oC(`Header '${G}' value '${J}' is not a string`);return J})}),{}),mqQ=(A,Q)=>Object.entries(A).reduce((B,[G,Z])=>({...B,[G]:pqQ.getEndpointProperty(Z,Q)}),{}),dqQ=(A,Q)=>{if(Array.isArray(A))return A.map((B)=>dqQ(B,Q));switch(typeof A){case"string":return hqQ(A,Q);case"object":if(A===null)throw new oC(`Unexpected endpoint property: ${A}`);return pqQ.getEndpointProperties(A,Q);case"boolean":return A;default:throw new oC(`Unexpected endpoint property type: ${typeof A}`)}},pqQ={getEndpointProperty:dqQ,getEndpointProperties:mqQ},xs4=(A,Q)=>{let B=GaA(A,"Endpoint URL",Q);if(typeof B==="string")try{return new URL(B)}catch(G){throw console.error(`Failed to construct URL with ${B}`,G),G}throw new oC(`Endpoint URL must be a string, got ${typeof B}`)},ys4=(A,Q)=>{let{conditions:B,endpoint:G}=A,{result:Z,referenceRecord:Y}=ES1(B,Q);if(!Z)return;let J={...Q,referenceRecord:{...Q.referenceRecord,...Y}},{url:X,properties:I,headers:W}=G;return Q.logger?.debug?.(`${QNA} Resolving endpoint from template: ${Vi(G)}`),{...W!=null&&{headers:Ss4(W,J)},...I!=null&&{properties:mqQ(I,J)},url:xs4(X,J)}},vs4=(A,Q)=>{let{conditions:B,error:G}=A,{result:Z,referenceRecord:Y}=ES1(B,Q);if(!Z)return;throw new oC(GaA(G,"Error",{...Q,referenceRecord:{...Q.referenceRecord,...Y}}))},cqQ=(A,Q)=>{for(let B of A)if(B.type==="endpoint"){let G=ys4(B,Q);if(G)return G}else if(B.type==="error")vs4(B,Q);else if(B.type==="tree"){let G=lqQ.evaluateTreeRule(B,Q);if(G)return G}else throw new oC(`Unknown endpoint rule: ${B}`);throw new oC("Rules evaluation failed")},ks4=(A,Q)=>{let{conditions:B,rules:G}=A,{result:Z,referenceRecord:Y}=ES1(B,Q);if(!Z)return;return lqQ.evaluateRules(G,{...Q,referenceRecord:{...Q.referenceRecord,...Y}})},lqQ={evaluateRules:cqQ,evaluateTreeRule:ks4},bs4=(A,Q)=>{let{endpointParams:B,logger:G}=Q,{parameters:Z,rules:Y}=A;Q.logger?.debug?.(`${QNA} Initial EndpointParams: ${Vi(B)}`);let J=Object.entries(Z).filter(([,W])=>W.default!=null).map(([W,D])=>[W,D.default]);if(J.length>0)for(let[W,D]of J)B[W]=B[W]??D;let X=Object.entries(Z).filter(([,W])=>W.required).map(([W])=>W);for(let W of X)if(B[W]==null)throw new oC(`Missing required parameter: '${W}'`);let I=cqQ(Y,{endpointParams:B,logger:G,referenceRecord:{}});return Q.logger?.debug?.(`${QNA} Resolved endpoint: ${Vi(I)}`),I};fs4.EndpointCache=kqQ;fs4.EndpointError=oC;fs4.customEndpointFunctions=FS1;fs4.isIpAddress=bqQ;fs4.isValidHostLabel=HS1;fs4.resolveEndpoint=bs4});var iqQ=U((ls4)=>{function cs4(A){let Q={};if(A=A.replace(/^\?/,""),A)for(let B of A.split("&")){let[G,Z=null]=B.split("=");if(G=decodeURIComponent(G),Z)Z=decodeURIComponent(Z);if(!(G in Q))Q[G]=Z;else if(Array.isArray(Q[G]))Q[G].push(Z);else Q[G]=[Q[G],Z]}return Q}ls4.parseQueryString=cs4});var vM=U((as4)=>{var ns4=iqQ(),nqQ=(A)=>{if(typeof A==="string")return nqQ(new URL(A));let{hostname:Q,pathname:B,port:G,protocol:Z,search:Y}=A,J;if(Y)J=ns4.parseQueryString(Y);return{hostname:Q,port:G?parseInt(G):void 0,protocol:Z,path:B,query:J}};as4.parseUrl=nqQ});var Qv=U((ZaA)=>{var HZA=FT(),rs4=vM(),oqQ=(A,Q=!1)=>{if(Q){for(let B of A.split("."))if(!oqQ(B))return!1;return!0}if(!HZA.isValidHostLabel(A))return!1;if(A.length<3||A.length>63)return!1;if(A!==A.toLowerCase())return!1;if(HZA.isIpAddress(A))return!1;return!0},aqQ=":",ss4="/",ts4=(A)=>{let Q=A.split(aqQ);if(Q.length<6)return null;let[B,G,Z,Y,J,...X]=Q;if(B!=="arn"||G===""||Z===""||X.join(aqQ)==="")return null;let I=X.map((W)=>W.split(ss4)).flat();return{partition:G,service:Z,region:Y,accountId:J,resourceId:I}},es4=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],At4="1.1",rqQ={partitions:es4,version:At4},sqQ=rqQ,tqQ="",eqQ=(A)=>{let{partitions:Q}=sqQ;for(let G of Q){let{regions:Z,outputs:Y}=G;for(let[J,X]of Object.entries(Z))if(J===A)return{...Y,...X}}for(let G of Q){let{regionRegex:Z,outputs:Y}=G;if(new RegExp(Z).test(A))return{...Y}}let B=Q.find((G)=>G.id==="aws");if(!B)throw Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...B.outputs}},ANQ=(A,Q="")=>{sqQ=A,tqQ=Q},Qt4=()=>{ANQ(rqQ,"")},Bt4=()=>tqQ,QNQ={isVirtualHostableS3Bucket:oqQ,parseArn:ts4,partition:eqQ};HZA.customEndpointFunctions.aws=QNQ;var Gt4=(A)=>{if(typeof A.endpointProvider!=="function")throw Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:Q}=A;if(Q===void 0)A.endpoint=async()=>{return BNQ(A.endpointProvider({Region:typeof A.region==="function"?await A.region():A.region,UseDualStack:typeof A.useDualstackEndpoint==="function"?await A.useDualstackEndpoint():A.useDualstackEndpoint,UseFIPS:typeof A.useFipsEndpoint==="function"?await A.useFipsEndpoint():A.useFipsEndpoint,Endpoint:void 0},{logger:A.logger}))};return A},BNQ=(A)=>rs4.parseUrl(A.url);Object.defineProperty(ZaA,"EndpointError",{enumerable:!0,get:function(){return HZA.EndpointError}});Object.defineProperty(ZaA,"isIpAddress",{enumerable:!0,get:function(){return HZA.isIpAddress}});Object.defineProperty(ZaA,"resolveEndpoint",{enumerable:!0,get:function(){return HZA.resolveEndpoint}});ZaA.awsEndpointFunctions=QNQ;ZaA.getUserAgentPrefix=Bt4;ZaA.partition=eqQ;ZaA.resolveDefaultAwsRegionalEndpointsConfig=Gt4;ZaA.setPartitionInfo=ANQ;ZaA.toEndpointV1=BNQ;ZaA.useDefaultPartitionInfo=Qt4});var GNQ=U((zt4)=>{zt4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(zt4.HttpAuthLocation||(zt4.HttpAuthLocation={}));zt4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(zt4.HttpApiKeyAuthLocation||(zt4.HttpApiKeyAuthLocation={}));zt4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(zt4.EndpointURLScheme||(zt4.EndpointURLScheme={}));zt4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(zt4.AlgorithmId||(zt4.AlgorithmId={}));var Kt4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>zt4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>zt4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},Vt4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Ft4=(A)=>{return Kt4(A)},Ht4=(A)=>{return Vt4(A)};zt4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(zt4.FieldPosition||(zt4.FieldPosition={}));var Et4="__smithy_context";zt4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(zt4.IniSectionType||(zt4.IniSectionType={}));zt4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(zt4.RequestHandlerProtocol||(zt4.RequestHandlerProtocol={}));zt4.SMITHY_CONTEXT_KEY=Et4;zt4.getDefaultClientConfiguration=Ft4;zt4.resolveDefaultRuntimeConfig=Ht4});var XNQ=U((Mt4)=>{var qt4=GNQ(),Nt4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},wt4=(A)=>{return{httpHandler:A.httpHandler()}};class ZNQ{name;kind;values;constructor({name:A,kind:Q=qt4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class YNQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class YaA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new YaA({...A,headers:{...A.headers}});if(Q.query)Q.query=Lt4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return YaA.clone(this)}}function Lt4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class JNQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function Ot4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}Mt4.Field=ZNQ;Mt4.Fields=YNQ;Mt4.HttpRequest=YaA;Mt4.HttpResponse=JNQ;Mt4.getHttpHandlerExtensionConfiguration=Nt4;Mt4.isValidHostname=Ot4;Mt4.resolveHttpHandlerRuntimeConfig=wt4});var jS1=U((ht4)=>{ht4.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(ht4.HttpAuthLocation||(ht4.HttpAuthLocation={}));ht4.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(ht4.HttpApiKeyAuthLocation||(ht4.HttpApiKeyAuthLocation={}));ht4.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(ht4.EndpointURLScheme||(ht4.EndpointURLScheme={}));ht4.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(ht4.AlgorithmId||(ht4.AlgorithmId={}));var yt4=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>ht4.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>ht4.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},vt4=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},kt4=(A)=>{return yt4(A)},bt4=(A)=>{return vt4(A)};ht4.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(ht4.FieldPosition||(ht4.FieldPosition={}));var ft4="__smithy_context";ht4.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(ht4.IniSectionType||(ht4.IniSectionType={}));ht4.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(ht4.RequestHandlerProtocol||(ht4.RequestHandlerProtocol={}));ht4.SMITHY_CONTEXT_KEY=ft4;ht4.getDefaultClientConfiguration=kt4;ht4.resolveDefaultRuntimeConfig=bt4});var XaA=U((nt4)=>{var dt4=jS1(),pt4=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},ct4=(A)=>{return{httpHandler:A.httpHandler()}};class INQ{name;kind;values;constructor({name:A,kind:Q=dt4.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class WNQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class JaA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new JaA({...A,headers:{...A.headers}});if(Q.query)Q.query=lt4(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return JaA.clone(this)}}function lt4(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class DNQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function it4(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}nt4.Field=INQ;nt4.Fields=WNQ;nt4.HttpRequest=JaA;nt4.HttpResponse=DNQ;nt4.getHttpHandlerExtensionConfiguration=pt4;nt4.isValidHostname=it4;nt4.resolveHttpHandlerRuntimeConfig=ct4});var TD=U((Ze4)=>{class EZA extends Error{name="ProviderError";tryNextLink;constructor(A,Q=!0){let B,G=!0;if(typeof Q==="boolean")B=void 0,G=Q;else if(Q!=null&&typeof Q==="object")B=Q.logger,G=Q.tryNextLink??!0;super(A);this.tryNextLink=G,Object.setPrototypeOf(this,EZA.prototype),B?.debug?.(`@smithy/property-provider ${G?"->":"(!)"} ${A}`)}static from(A,Q=!0){return Object.assign(new this(A.message,Q),A)}}class TS1 extends EZA{name="CredentialsProviderError";constructor(A,Q=!0){super(A,Q);Object.setPrototypeOf(this,TS1.prototype)}}class PS1 extends EZA{name="TokenProviderError";constructor(A,Q=!0){super(A,Q);Object.setPrototypeOf(this,PS1.prototype)}}var Qe4=(...A)=>async()=>{if(A.length===0)throw new EZA("No providers in chain");let Q;for(let B of A)try{return await B()}catch(G){if(Q=G,G?.tryNextLink)continue;throw G}throw Q},Be4=(A)=>()=>Promise.resolve(A),Ge4=(A,Q,B)=>{let G,Z,Y,J=!1,X=async()=>{if(!Z)Z=A();try{G=await Z,Y=!0,J=!1}finally{Z=void 0}return G};if(Q===void 0)return async(I)=>{if(!Y||I?.forceRefresh)G=await X();return G};return async(I)=>{if(!Y||I?.forceRefresh)G=await X();if(J)return G;if(B&&!B(G))return J=!0,G;if(Q(G))return await X(),G;return G}};Ze4.CredentialsProviderError=TS1;Ze4.ProviderError=EZA;Ze4.TokenProviderError=PS1;Ze4.chain=Qe4;Ze4.fromStatic=Be4;Ze4.memoize=Ge4});var Wq=U((Ee4)=>{var SS1={warningEmitted:!1},Ke4=(A)=>{if(A&&!SS1.warningEmitted&&parseInt(A.substring(1,A.indexOf(".")))<18)SS1.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`)};function Ve4(A,Q,B){if(!A.$source)A.$source={};return A.$source[Q]=B,A}function Fe4(A,Q,B){if(!A.__aws_sdk_context)A.__aws_sdk_context={features:{}};else if(!A.__aws_sdk_context.features)A.__aws_sdk_context.features={};A.__aws_sdk_context.features[Q]=B}function He4(A,Q,B){if(!A.$source)A.$source={};return A.$source[Q]=B,A}Ee4.emitWarningIfUnsupportedVersion=Ke4;Ee4.setCredentialFeature=Ve4;Ee4.setFeature=Fe4;Ee4.setTokenFeature=He4;Ee4.state=SS1});var VNQ=U((Le4)=>{var KNQ={},xS1={};for(let A=0;A<256;A++){let Q=A.toString(16).toLowerCase();if(Q.length===1)Q=`0${Q}`;KNQ[A]=Q,xS1[Q]=A}function Ne4(A){if(A.length%2!==0)throw Error("Hex encoded strings must have an even number length");let Q=new Uint8Array(A.length/2);for(let B=0;B<A.length;B+=2){let G=A.slice(B,B+2).toLowerCase();if(G in xS1)Q[B/2]=xS1[G];else throw Error(`Cannot decode unrecognized sequence ${G} as hexadecimal`)}return Q}function we4(A){let Q="";for(let B=0;B<A.byteLength;B++)Q+=KNQ[A[B]];return Q}Le4.fromHex=Ne4;Le4.toHex=we4});var FNQ=U((_e4)=>{var Re4=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";_e4.isArrayBuffer=Re4});var ENQ=U((Se4)=>{var HNQ=(A)=>encodeURIComponent(A).replace(/[!'()*]/g,Te4),Te4=(A)=>`%${A.charCodeAt(0).toString(16).toUpperCase()}`,Pe4=(A)=>A.split("/").map(HNQ).join("/");Se4.escapeUri=HNQ;Se4.escapeUriPath=Pe4});var pS1=U((ce4)=>{var Fi=VNQ(),f1A=lG(),ve4=FNQ(),UNQ=XaA(),zNQ=Iz(),IaA=ENQ(),qNQ="X-Amz-Algorithm",NNQ="X-Amz-Credential",kS1="X-Amz-Date",wNQ="X-Amz-SignedHeaders",LNQ="X-Amz-Expires",bS1="X-Amz-Signature",fS1="X-Amz-Security-Token",ke4="X-Amz-Region-Set",hS1="authorization",gS1=kS1.toLowerCase(),ONQ="date",MNQ=[hS1,gS1,ONQ],RNQ=bS1.toLowerCase(),FaA="x-amz-content-sha256",_NQ=fS1.toLowerCase(),be4="host",jNQ={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},TNQ=/^proxy-/,PNQ=/^sec-/,fe4=[/^proxy-/i,/^sec-/i],WaA="AWS4-HMAC-SHA256",he4="AWS4-ECDSA-P256-SHA256",SNQ="AWS4-HMAC-SHA256-PAYLOAD",xNQ="UNSIGNED-PAYLOAD",yNQ=50,uS1="aws4_request",vNQ=604800,zZA={},DaA=[],KaA=(A,Q,B)=>`${A}/${Q}/${B}/${uS1}`,kNQ=async(A,Q,B,G,Z)=>{let Y=await CNQ(A,Q.secretAccessKey,Q.accessKeyId),J=`${B}:${G}:${Z}:${Fi.toHex(Y)}:${Q.sessionToken}`;if(J in zZA)return zZA[J];DaA.push(J);while(DaA.length>yNQ)delete zZA[DaA.shift()];let X=`AWS4${Q.secretAccessKey}`;for(let I of[B,G,Z,uS1])X=await CNQ(A,X,I);return zZA[J]=X},ge4=()=>{DaA.length=0,Object.keys(zZA).forEach((A)=>{delete zZA[A]})},CNQ=(A,Q,B)=>{let G=new A(Q);return G.update(f1A.toUint8Array(B)),G.digest()},yS1=({headers:A},Q,B)=>{let G={};for(let Z of Object.keys(A).sort()){if(A[Z]==null)continue;let Y=Z.toLowerCase();if(Y in jNQ||Q?.has(Y)||TNQ.test(Y)||PNQ.test(Y)){if(!B||B&&!B.has(Y))continue}G[Y]=A[Z].trim().replace(/\s+/g," ")}return G},VaA=async({headers:A,body:Q},B)=>{for(let G of Object.keys(A))if(G.toLowerCase()===FaA)return A[G];if(Q==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";else if(typeof Q==="string"||ArrayBuffer.isView(Q)||ve4.isArrayBuffer(Q)){let G=new B;return G.update(f1A.toUint8Array(Q)),Fi.toHex(await G.digest())}return xNQ};class bNQ{format(A){let Q=[];for(let Z of Object.keys(A)){let Y=f1A.fromUtf8(Z);Q.push(Uint8Array.from([Y.byteLength]),Y,this.formatHeaderValue(A[Z]))}let B=new Uint8Array(Q.reduce((Z,Y)=>Z+Y.byteLength,0)),G=0;for(let Z of Q)B.set(Z,G),G+=Z.byteLength;return B}formatHeaderValue(A){switch(A.type){case"boolean":return Uint8Array.from([A.value?0:1]);case"byte":return Uint8Array.from([2,A.value]);case"short":let Q=new DataView(new ArrayBuffer(3));return Q.setUint8(0,3),Q.setInt16(1,A.value,!1),new Uint8Array(Q.buffer);case"integer":let B=new DataView(new ArrayBuffer(5));return B.setUint8(0,4),B.setInt32(1,A.value,!1),new Uint8Array(B.buffer);case"long":let G=new Uint8Array(9);return G[0]=5,G.set(A.value.bytes,1),G;case"binary":let Z=new DataView(new ArrayBuffer(3+A.value.byteLength));Z.setUint8(0,6),Z.setUint16(1,A.value.byteLength,!1);let Y=new Uint8Array(Z.buffer);return Y.set(A.value,3),Y;case"string":let J=f1A.fromUtf8(A.value),X=new DataView(new ArrayBuffer(3+J.byteLength));X.setUint8(0,7),X.setUint16(1,J.byteLength,!1);let I=new Uint8Array(X.buffer);return I.set(J,3),I;case"timestamp":let W=new Uint8Array(9);return W[0]=8,W.set(mS1.fromNumber(A.value.valueOf()).bytes,1),W;case"uuid":if(!ue4.test(A.value))throw Error(`Invalid UUID received: ${A.value}`);let D=new Uint8Array(17);return D[0]=9,D.set(Fi.fromHex(A.value.replace(/\-/g,"")),1),D}}}var ue4=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class mS1{bytes;constructor(A){if(this.bytes=A,A.byteLength!==8)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(A){if(A>9223372036854776000||A<-9223372036854776000)throw Error(`${A} is too large (or, if negative, too small) to represent as an Int64`);let Q=new Uint8Array(8);for(let B=7,G=Math.abs(Math.round(A));B>-1&&G>0;B--,G/=256)Q[B]=G;if(A<0)$NQ(Q);return new mS1(Q)}valueOf(){let A=this.bytes.slice(0),Q=A[0]&128;if(Q)$NQ(A);return parseInt(Fi.toHex(A),16)*(Q?-1:1)}toString(){return String(this.valueOf())}}function $NQ(A){for(let Q=0;Q<8;Q++)A[Q]^=255;for(let Q=7;Q>-1;Q--)if(A[Q]++,A[Q]!==0)break}var fNQ=(A,Q)=>{A=A.toLowerCase();for(let B of Object.keys(Q))if(A===B.toLowerCase())return!0;return!1},hNQ=(A,Q={})=>{let{headers:B,query:G={}}=UNQ.HttpRequest.clone(A);for(let Z of Object.keys(B)){let Y=Z.toLowerCase();if(Y.slice(0,6)==="x-amz-"&&!Q.unhoistableHeaders?.has(Y)||Q.hoistableHeaders?.has(Y))G[Z]=B[Z],delete B[Z]}return{...A,headers:B,query:G}},vS1=(A)=>{A=UNQ.HttpRequest.clone(A);for(let Q of Object.keys(A.headers))if(MNQ.indexOf(Q.toLowerCase())>-1)delete A.headers[Q];return A},gNQ=({query:A={}})=>{let Q=[],B={};for(let G of Object.keys(A)){if(G.toLowerCase()===RNQ)continue;let Z=IaA.escapeUri(G);Q.push(Z);let Y=A[G];if(typeof Y==="string")B[Z]=`${Z}=${IaA.escapeUri(Y)}`;else if(Array.isArray(Y))B[Z]=Y.slice(0).reduce((J,X)=>J.concat([`${Z}=${IaA.escapeUri(X)}`]),[]).sort().join("&")}return Q.sort().map((G)=>B[G]).filter((G)=>G).join("&")},me4=(A)=>de4(A).toISOString().replace(/\.\d{3}Z$/,"Z"),de4=(A)=>{if(typeof A==="number")return new Date(A*1000);if(typeof A==="string"){if(Number(A))return new Date(Number(A)*1000);return new Date(A)}return A};class dS1{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:A,credentials:Q,region:B,service:G,sha256:Z,uriEscapePath:Y=!0}){this.service=G,this.sha256=Z,this.uriEscapePath=Y,this.applyChecksum=typeof A==="boolean"?A:!0,this.regionProvider=zNQ.normalizeProvider(B),this.credentialProvider=zNQ.normalizeProvider(Q)}createCanonicalRequest(A,Q,B){let G=Object.keys(Q).sort();return`${A.method}
${this.getCanonicalPath(A)}
${gNQ(A)}
${G.map((Z)=>`${Z}:${Q[Z]}`).join(`
`)}

${G.join(";")}
${B}`}async createStringToSign(A,Q,B,G){let Z=new this.sha256;Z.update(f1A.toUint8Array(B));let Y=await Z.digest();return`${G}
${A}
${Q}
${Fi.toHex(Y)}`}getCanonicalPath({path:A}){if(this.uriEscapePath){let Q=[];for(let Z of A.split("/")){if(Z?.length===0)continue;if(Z===".")continue;if(Z==="..")Q.pop();else Q.push(Z)}let B=`${A?.startsWith("/")?"/":""}${Q.join("/")}${Q.length>0&&A?.endsWith("/")?"/":""}`;return IaA.escapeUri(B).replace(/%2F/g,"/")}return A}validateResolvedCredentials(A){if(typeof A!=="object"||typeof A.accessKeyId!=="string"||typeof A.secretAccessKey!=="string")throw Error("Resolved credential object is not valid")}formatDate(A){let Q=me4(A).replace(/[\-:]/g,"");return{longDate:Q,shortDate:Q.slice(0,8)}}getCanonicalHeaderList(A){return Object.keys(A).sort().join(";")}}class uNQ extends dS1{headerFormatter=new bNQ;constructor({applyChecksum:A,credentials:Q,region:B,service:G,sha256:Z,uriEscapePath:Y=!0}){super({applyChecksum:A,credentials:Q,region:B,service:G,sha256:Z,uriEscapePath:Y})}async presign(A,Q={}){let{signingDate:B=new Date,expiresIn:G=3600,unsignableHeaders:Z,unhoistableHeaders:Y,signableHeaders:J,hoistableHeaders:X,signingRegion:I,signingService:W}=Q,D=await this.credentialProvider();this.validateResolvedCredentials(D);let K=I??await this.regionProvider(),{longDate:V,shortDate:F}=this.formatDate(B);if(G>vNQ)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let H=KaA(F,K,W??this.service),E=hNQ(vS1(A),{unhoistableHeaders:Y,hoistableHeaders:X});if(D.sessionToken)E.query[fS1]=D.sessionToken;E.query[qNQ]=WaA,E.query[NNQ]=`${D.accessKeyId}/${H}`,E.query[kS1]=V,E.query[LNQ]=G.toString(10);let z=yS1(E,Z,J);return E.query[wNQ]=this.getCanonicalHeaderList(z),E.query[bS1]=await this.getSignature(V,H,this.getSigningKey(D,K,F,W),this.createCanonicalRequest(E,z,await VaA(A,this.sha256))),E}async sign(A,Q){if(typeof A==="string")return this.signString(A,Q);else if(A.headers&&A.payload)return this.signEvent(A,Q);else if(A.message)return this.signMessage(A,Q);else return this.signRequest(A,Q)}async signEvent({headers:A,payload:Q},{signingDate:B=new Date,priorSignature:G,signingRegion:Z,signingService:Y}){let J=Z??await this.regionProvider(),{shortDate:X,longDate:I}=this.formatDate(B),W=KaA(X,J,Y??this.service),D=await VaA({headers:{},body:Q},this.sha256),K=new this.sha256;K.update(A);let V=Fi.toHex(await K.digest()),F=[SNQ,I,W,G,V,D].join(`
`);return this.signString(F,{signingDate:B,signingRegion:J,signingService:Y})}async signMessage(A,{signingDate:Q=new Date,signingRegion:B,signingService:G}){return this.signEvent({headers:this.headerFormatter.format(A.message.headers),payload:A.message.body},{signingDate:Q,signingRegion:B,signingService:G,priorSignature:A.priorSignature}).then((Y)=>{return{message:A.message,signature:Y}})}async signString(A,{signingDate:Q=new Date,signingRegion:B,signingService:G}={}){let Z=await this.credentialProvider();this.validateResolvedCredentials(Z);let Y=B??await this.regionProvider(),{shortDate:J}=this.formatDate(Q),X=new this.sha256(await this.getSigningKey(Z,Y,J,G));return X.update(f1A.toUint8Array(A)),Fi.toHex(await X.digest())}async signRequest(A,{signingDate:Q=new Date,signableHeaders:B,unsignableHeaders:G,signingRegion:Z,signingService:Y}={}){let J=await this.credentialProvider();this.validateResolvedCredentials(J);let X=Z??await this.regionProvider(),I=vS1(A),{longDate:W,shortDate:D}=this.formatDate(Q),K=KaA(D,X,Y??this.service);if(I.headers[gS1]=W,J.sessionToken)I.headers[_NQ]=J.sessionToken;let V=await VaA(I,this.sha256);if(!fNQ(FaA,I.headers)&&this.applyChecksum)I.headers[FaA]=V;let F=yS1(I,G,B),H=await this.getSignature(W,K,this.getSigningKey(J,X,D,Y),this.createCanonicalRequest(I,F,V));return I.headers[hS1]=`${WaA} Credential=${J.accessKeyId}/${K}, SignedHeaders=${this.getCanonicalHeaderList(F)}, Signature=${H}`,I}async getSignature(A,Q,B,G){let Z=await this.createStringToSign(A,Q,G,WaA),Y=new this.sha256(await B);return Y.update(f1A.toUint8Array(Z)),Fi.toHex(await Y.digest())}getSigningKey(A,Q,B,G){return kNQ(this.sha256,A,B,Q,G||this.service)}}var pe4={SignatureV4a:null};ce4.ALGORITHM_IDENTIFIER=WaA;ce4.ALGORITHM_IDENTIFIER_V4A=he4;ce4.ALGORITHM_QUERY_PARAM=qNQ;ce4.ALWAYS_UNSIGNABLE_HEADERS=jNQ;ce4.AMZ_DATE_HEADER=gS1;ce4.AMZ_DATE_QUERY_PARAM=kS1;ce4.AUTH_HEADER=hS1;ce4.CREDENTIAL_QUERY_PARAM=NNQ;ce4.DATE_HEADER=ONQ;ce4.EVENT_ALGORITHM_IDENTIFIER=SNQ;ce4.EXPIRES_QUERY_PARAM=LNQ;ce4.GENERATED_HEADERS=MNQ;ce4.HOST_HEADER=be4;ce4.KEY_TYPE_IDENTIFIER=uS1;ce4.MAX_CACHE_SIZE=yNQ;ce4.MAX_PRESIGNED_TTL=vNQ;ce4.PROXY_HEADER_PATTERN=TNQ;ce4.REGION_SET_PARAM=ke4;ce4.SEC_HEADER_PATTERN=PNQ;ce4.SHA256_HEADER=FaA;ce4.SIGNATURE_HEADER=RNQ;ce4.SIGNATURE_QUERY_PARAM=bS1;ce4.SIGNED_HEADERS_QUERY_PARAM=wNQ;ce4.SignatureV4=uNQ;ce4.SignatureV4Base=dS1;ce4.TOKEN_HEADER=_NQ;ce4.TOKEN_QUERY_PARAM=fS1;ce4.UNSIGNABLE_PATTERNS=fe4;ce4.UNSIGNED_PAYLOAD=xNQ;ce4.clearCredentialCache=ge4;ce4.createScope=KaA;ce4.getCanonicalHeaders=yS1;ce4.getCanonicalQuery=gNQ;ce4.getPayloadHash=VaA;ce4.getSigningKey=kNQ;ce4.hasHeader=fNQ;ce4.moveHeadersToQuery=hNQ;ce4.prepareRequest=vS1;ce4.signatureV4aContainer=pe4});var dNQ=U((SA6)=>{var mNQ=typeof TextEncoder=="function"?new TextEncoder:null,PA6=(A)=>{if(typeof A==="string"){if(mNQ)return mNQ.encode(A).byteLength;let Q=A.length;for(let B=Q-1;B>=0;B--){let G=A.charCodeAt(B);if(G>127&&G<=2047)Q++;else if(G>2047&&G<=65535)Q+=2;if(G>=56320&&G<=57343)B--}return Q}else if(typeof A.byteLength==="number")return A.byteLength;else if(typeof A.size==="number")return A.size;throw Error(`Body Length computation failed for ${A}`)};SA6.calculateBodyLength=PA6});var Gx1=U((Q16)=>{var $aA=Xq(),iNQ=lG(),YNA=Iq(),yA6=hqA(),vA6=dNQ(),CZA=IX(),kA6=Iz(),nNQ=sP1(),zaA=0,CaA=1,h1A=2,Hi=3,ZNA=4,HaA=5,aNQ=6,cS1=7,oNQ=20,nS1=21,rNQ=22,bA6=23,oS1=24,g1A=25,u1A=26,Ei=27,rS1=31;function $ZA(A){return typeof Buffer<"u"?Buffer.alloc(A):new Uint8Array(A)}var sS1=Symbol("@smithy/core/cbor::tagSymbol");function tS1(A){return A[sS1]=!0,A}var fA6=typeof TextDecoder<"u",hA6=typeof Buffer<"u",wZ=$ZA(0),Mg=new DataView(wZ.buffer,wZ.byteOffset,wZ.byteLength),pNQ=fA6?new TextDecoder:null,P8=0;function gA6(A){wZ=A,Mg=new DataView(wZ.buffer,wZ.byteOffset,wZ.byteLength)}function Rg(A,Q){if(A>=Q)throw Error("unexpected end of (decode) payload.");let B=(wZ[A]&224)>>5,G=wZ[A]&31;switch(B){case zaA:case CaA:case aNQ:let Z,Y;if(G<24)Z=G,Y=1;else switch(G){case oS1:case g1A:case u1A:case Ei:let J=tNQ[G],X=J+1;if(Y=X,Q-A<X)throw Error(`countLength ${J} greater than remaining buf len.`);let I=A+1;if(J===1)Z=wZ[I];else if(J===2)Z=Mg.getUint16(I);else if(J===4)Z=Mg.getUint32(I);else Z=Mg.getBigUint64(I);break;default:throw Error(`unexpected minor value ${G}.`)}if(B===zaA)return P8=Y,lS1(Z);else if(B===CaA){let J;if(typeof Z==="bigint")J=BigInt(-1)-Z;else J=-1-Z;return P8=Y,lS1(J)}else if(G===2||G===3){let J=JNA(A+Y,Q),X=BigInt(0),I=A+Y+P8;for(let W=I;W<I+J;++W)X=X<<BigInt(8)|BigInt(wZ[W]);return P8=Y+P8+J,G===3?-X-BigInt(1):X}else if(G===4){let J=Rg(A+Y,Q),[X,I]=J,W=I<0?-1:1,D="0".repeat(Math.abs(X)+1)+String(BigInt(W)*BigInt(I)),K,V=I<0?"-":"";if(K=X===0?D:D.slice(0,D.length+X)+"."+D.slice(X),K=K.replace(/^0+/g,""),K==="")K="0";if(K[0]===".")K="0"+K;return K=V+K,P8=Y+P8,$aA.nv(K)}else{let J=Rg(A+Y,Q);return P8=Y+P8,tS1({tag:lS1(Z),value:J})}case Hi:case HaA:case ZNA:case h1A:if(G===rS1)switch(B){case Hi:return pA6(A,Q);case HaA:return aA6(A,Q);case ZNA:return iA6(A,Q);case h1A:return cA6(A,Q)}else switch(B){case Hi:return dA6(A,Q);case HaA:return nA6(A,Q);case ZNA:return lA6(A,Q);case h1A:return eS1(A,Q)}default:return oA6(A,Q)}}function sNQ(A,Q,B){if(hA6&&A.constructor?.name==="Buffer")return A.toString("utf-8",Q,B);if(pNQ)return pNQ.decode(A.subarray(Q,B));return iNQ.toUtf8(A.subarray(Q,B))}function uA6(A){let Q=Number(A);if(Q<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<Q)console.warn(Error(`@smithy/core/cbor - truncating BigInt(${A}) to ${Q} with loss of precision.`));return Q}var tNQ={[oS1]:1,[g1A]:2,[u1A]:4,[Ei]:8};function mA6(A,Q){let B=A>>7,G=(A&124)>>2,Z=(A&3)<<8|Q,Y=B===0?1:-1,J,X;if(G===0)if(Z===0)return 0;else J=Math.pow(2,-14),X=0;else if(G===31)if(Z===0)return Y*(1/0);else return NaN;else J=Math.pow(2,G-15),X=1;return X+=Z/1024,Y*(J*X)}function JNA(A,Q){let B=wZ[A]&31;if(B<24)return P8=1,B;if(B===oS1||B===g1A||B===u1A||B===Ei){let G=tNQ[B];if(P8=G+1,Q-A<P8)throw Error(`countLength ${G} greater than remaining buf len.`);let Z=A+1;if(G===1)return wZ[Z];else if(G===2)return Mg.getUint16(Z);else if(G===4)return Mg.getUint32(Z);return uA6(Mg.getBigUint64(Z))}throw Error(`unexpected minor value ${B}.`)}function dA6(A,Q){let B=JNA(A,Q),G=P8;if(A+=G,Q-A<B)throw Error(`string len ${B} greater than remaining buf len.`);let Z=sNQ(wZ,A,A+B);return P8=G+B,Z}function pA6(A,Q){A+=1;let B=[];for(let G=A;A<Q;){if(wZ[A]===255){let I=$ZA(B.length);return I.set(B,0),P8=A-G+2,sNQ(I,0,I.length)}let Z=(wZ[A]&224)>>5,Y=wZ[A]&31;if(Z!==Hi)throw Error(`unexpected major type ${Z} in indefinite string.`);if(Y===rS1)throw Error("nested indefinite string.");let J=eS1(A,Q);A+=P8;for(let I=0;I<J.length;++I)B.push(J[I])}throw Error("expected break marker.")}function eS1(A,Q){let B=JNA(A,Q),G=P8;if(A+=G,Q-A<B)throw Error(`unstructured byte string len ${B} greater than remaining buf len.`);let Z=wZ.subarray(A,A+B);return P8=G+B,Z}function cA6(A,Q){A+=1;let B=[];for(let G=A;A<Q;){if(wZ[A]===255){let I=$ZA(B.length);return I.set(B,0),P8=A-G+2,I}let Z=(wZ[A]&224)>>5,Y=wZ[A]&31;if(Z!==h1A)throw Error(`unexpected major type ${Z} in indefinite string.`);if(Y===rS1)throw Error("nested indefinite string.");let J=eS1(A,Q);A+=P8;for(let I=0;I<J.length;++I)B.push(J[I])}throw Error("expected break marker.")}function lA6(A,Q){let B=JNA(A,Q),G=P8;A+=G;let Z=A,Y=Array(B);for(let J=0;J<B;++J){let X=Rg(A,Q),I=P8;Y[J]=X,A+=I}return P8=G+(A-Z),Y}function iA6(A,Q){A+=1;let B=[];for(let G=A;A<Q;){if(wZ[A]===255)return P8=A-G+2,B;let Z=Rg(A,Q);A+=P8,B.push(Z)}throw Error("expected break marker.")}function nA6(A,Q){let B=JNA(A,Q),G=P8;A+=G;let Z=A,Y={};for(let J=0;J<B;++J){if(A>=Q)throw Error("unexpected end of map payload.");let X=(wZ[A]&224)>>5;if(X!==Hi)throw Error(`unexpected major type ${X} for map key at index ${A}.`);let I=Rg(A,Q);A+=P8;let W=Rg(A,Q);A+=P8,Y[I]=W}return P8=G+(A-Z),Y}function aA6(A,Q){A+=1;let B=A,G={};for(;A<Q;){if(A>=Q)throw Error("unexpected end of map payload.");if(wZ[A]===255)return P8=A-B+2,G;let Z=(wZ[A]&224)>>5;if(Z!==Hi)throw Error(`unexpected major type ${Z} for map key.`);let Y=Rg(A,Q);A+=P8;let J=Rg(A,Q);A+=P8,G[Y]=J}throw Error("expected break marker.")}function oA6(A,Q){let B=wZ[A]&31;switch(B){case nS1:case oNQ:return P8=1,B===nS1;case rNQ:return P8=1,null;case bA6:return P8=1,null;case g1A:if(Q-A<3)throw Error("incomplete float16 at end of buf.");return P8=3,mA6(wZ[A+1],wZ[A+2]);case u1A:if(Q-A<5)throw Error("incomplete float32 at end of buf.");return P8=5,Mg.getFloat32(A+1);case Ei:if(Q-A<9)throw Error("incomplete float64 at end of buf.");return P8=9,Mg.getFloat64(A+1);default:throw Error(`unexpected minor value ${B}.`)}}function lS1(A){if(typeof A==="number")return A;let Q=Number(A);if(Number.MIN_SAFE_INTEGER<=Q&&Q<=Number.MAX_SAFE_INTEGER)return Q;return A}var cNQ=typeof Buffer<"u",rA6=2048,M6=$ZA(rA6),Og=new DataView(M6.buffer,M6.byteOffset,M6.byteLength),r9=0;function iS1(A){if(M6.byteLength-r9<A)if(r9<16000000)aS1(Math.max(M6.byteLength*4,M6.byteLength+A));else aS1(M6.byteLength+A+16000000)}function lNQ(){let A=$ZA(r9);return A.set(M6.subarray(0,r9),0),r9=0,A}function aS1(A){let Q=M6;if(M6=$ZA(A),Q)if(Q.copy)Q.copy(M6,0,0,Q.byteLength);else M6.set(Q,0);Og=new DataView(M6.buffer,M6.byteOffset,M6.byteLength)}function Lg(A,Q){if(Q<24)M6[r9++]=A<<5|Q;else if(Q<256)M6[r9++]=A<<5|24,M6[r9++]=Q;else if(Q<65536)M6[r9++]=A<<5|g1A,Og.setUint16(r9,Q),r9+=2;else if(Q<4294967296)M6[r9++]=A<<5|u1A,Og.setUint32(r9,Q),r9+=4;else M6[r9++]=A<<5|Ei,Og.setBigUint64(r9,typeof Q==="bigint"?Q:BigInt(Q)),r9+=8}function sA6(A){let Q=[A];while(Q.length){let B=Q.pop();if(iS1(typeof B==="string"?B.length*4:64),typeof B==="string"){if(cNQ)Lg(Hi,Buffer.byteLength(B)),r9+=M6.write(B,r9);else{let G=iNQ.fromUtf8(B);Lg(Hi,G.byteLength),M6.set(G,r9),r9+=G.byteLength}continue}else if(typeof B==="number"){if(Number.isInteger(B)){let G=B>=0,Z=G?zaA:CaA,Y=G?B:-B-1;if(Y<24)M6[r9++]=Z<<5|Y;else if(Y<256)M6[r9++]=Z<<5|24,M6[r9++]=Y;else if(Y<65536)M6[r9++]=Z<<5|g1A,M6[r9++]=Y>>8,M6[r9++]=Y;else if(Y<4294967296)M6[r9++]=Z<<5|u1A,Og.setUint32(r9,Y),r9+=4;else M6[r9++]=Z<<5|Ei,Og.setBigUint64(r9,BigInt(Y)),r9+=8;continue}M6[r9++]=cS1<<5|Ei,Og.setFloat64(r9,B),r9+=8;continue}else if(typeof B==="bigint"){let G=B>=0,Z=G?zaA:CaA,Y=G?B:-B-BigInt(1),J=Number(Y);if(J<24)M6[r9++]=Z<<5|J;else if(J<256)M6[r9++]=Z<<5|24,M6[r9++]=J;else if(J<65536)M6[r9++]=Z<<5|g1A,M6[r9++]=J>>8,M6[r9++]=J&255;else if(J<4294967296)M6[r9++]=Z<<5|u1A,Og.setUint32(r9,J),r9+=4;else if(Y<BigInt("18446744073709551616"))M6[r9++]=Z<<5|Ei,Og.setBigUint64(r9,Y),r9+=8;else{let X=Y.toString(2),I=new Uint8Array(Math.ceil(X.length/8)),W=Y,D=0;while(I.byteLength-++D>=0)I[I.byteLength-D]=Number(W&BigInt(255)),W>>=BigInt(8);if(iS1(I.byteLength*2),M6[r9++]=G?194:195,cNQ)Lg(h1A,Buffer.byteLength(I));else Lg(h1A,I.byteLength);M6.set(I,r9),r9+=I.byteLength}continue}else if(B===null){M6[r9++]=cS1<<5|rNQ;continue}else if(typeof B==="boolean"){M6[r9++]=cS1<<5|(B?nS1:oNQ);continue}else if(typeof B>"u")throw Error("@smithy/core/cbor: client may not serialize undefined value.");else if(Array.isArray(B)){for(let G=B.length-1;G>=0;--G)Q.push(B[G]);Lg(ZNA,B.length);continue}else if(typeof B.byteLength==="number"){iS1(B.length*2),Lg(h1A,B.length),M6.set(B,r9),r9+=B.byteLength;continue}else if(typeof B==="object"){if(B instanceof $aA.NumericValue){let Z=B.string.indexOf("."),Y=Z===-1?0:Z-B.string.length+1,J=BigInt(B.string.replace(".",""));M6[r9++]=196,Q.push(J),Q.push(Y),Lg(ZNA,2);continue}if(B[sS1])if("tag"in B&&"value"in B){Q.push(B.value),Lg(aNQ,B.tag);continue}else throw Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(B));let G=Object.keys(B);for(let Z=G.length-1;Z>=0;--Z){let Y=G[Z];Q.push(B[Y]),Q.push(Y)}Lg(HaA,G.length);continue}throw Error(`data type ${B?.constructor?.name??typeof B} not compatible for encoding.`)}}var UaA={deserialize(A){return gA6(A),Rg(0,A.length)},serialize(A){try{return sA6(A),lNQ()}catch(Q){throw lNQ(),Q}},resizeEncodingBuffer(A){aS1(A)}},eNQ=(A,Q)=>{return YNA.collectBody(A,Q).then(async(B)=>{if(B.length)try{return UaA.deserialize(B)}catch(G){throw Object.defineProperty(G,"$responseBodyText",{value:Q.utf8Encoder(B)}),G}return{}})},EaA=(A)=>{return tS1({tag:1,value:A.getTime()/1000})},tA6=async(A,Q)=>{let B=await eNQ(A,Q);return B.message=B.message??B.Message,B},AwQ=(A,Q)=>{let B=(Z)=>{let Y=Z;if(typeof Y==="number")Y=Y.toString();if(Y.indexOf(",")>=0)Y=Y.split(",")[0];if(Y.indexOf(":")>=0)Y=Y.split(":")[0];if(Y.indexOf("#")>=0)Y=Y.split("#")[1];return Y};if(Q.__type!==void 0)return B(Q.__type);let G=Object.keys(Q).find((Z)=>Z.toLowerCase()==="code");if(G&&Q[G]!==void 0)return B(Q[G])},eA6=(A)=>{if(String(A.headers["smithy-protocol"]).toLowerCase()!=="rpc-v2-cbor")throw Error("Malformed RPCv2 CBOR response, status: "+A.statusCode)},A16=async(A,Q,B,G,Z)=>{let{hostname:Y,protocol:J="https",port:X,path:I}=await A.endpoint(),W={protocol:J,hostname:Y,port:X,method:"POST",path:I.endsWith("/")?I.slice(0,-1)+B:I+B,headers:{...Q}};if(G!==void 0)W.hostname=G;if(Z!==void 0){W.body=Z;try{W.headers["content-length"]=String(vA6.calculateBodyLength(Z))}catch(D){}}return new yA6.HttpRequest(W)};class Ax1 extends YNA.SerdeContext{createSerializer(){let A=new Qx1;return A.setSerdeContext(this.serdeContext),A}createDeserializer(){let A=new Bx1;return A.setSerdeContext(this.serdeContext),A}}class Qx1 extends YNA.SerdeContext{value;write(A,Q){this.value=this.serialize(A,Q)}serialize(A,Q){let B=CZA.NormalizedSchema.of(A);if(Q==null){if(B.isIdempotencyToken())return $aA.generateIdempotencyToken();return Q}if(B.isBlobSchema()){if(typeof Q==="string")return(this.serdeContext?.base64Decoder??nNQ.fromBase64)(Q);return Q}if(B.isTimestampSchema()){if(typeof Q==="number"||typeof Q==="bigint")return EaA(new Date(Number(Q)/1000|0));return EaA(Q)}if(typeof Q==="function"||typeof Q==="object"){let G=Q;if(B.isListSchema()&&Array.isArray(G)){let Y=!!B.getMergedTraits().sparse,J=[],X=0;for(let I of G){let W=this.serialize(B.getValueSchema(),I);if(W!=null||Y)J[X++]=W}return J}if(G instanceof Date)return EaA(G);let Z={};if(B.isMapSchema()){let Y=!!B.getMergedTraits().sparse;for(let J of Object.keys(G)){let X=this.serialize(B.getValueSchema(),G[J]);if(X!=null||Y)Z[J]=X}}else if(B.isStructSchema())for(let[Y,J]of B.structIterator()){let X=this.serialize(J,G[Y]);if(X!=null)Z[Y]=X}else if(B.isDocumentSchema())for(let Y of Object.keys(G))Z[Y]=this.serialize(B.getValueSchema(),G[Y]);return Z}return Q}flush(){let A=UaA.serialize(this.value);return this.value=void 0,A}}class Bx1 extends YNA.SerdeContext{read(A,Q){let B=UaA.deserialize(Q);return this.readValue(A,B)}readValue(A,Q){let B=CZA.NormalizedSchema.of(A);if(B.isTimestampSchema()&&typeof Q==="number")return $aA._parseEpochTimestamp(Q);if(B.isBlobSchema()){if(typeof Q==="string")return(this.serdeContext?.base64Decoder??nNQ.fromBase64)(Q);return Q}if(typeof Q>"u"||typeof Q==="boolean"||typeof Q==="number"||typeof Q==="string"||typeof Q==="bigint"||typeof Q==="symbol")return Q;else if(typeof Q==="function"||typeof Q==="object"){if(Q===null)return null;if("byteLength"in Q)return Q;if(Q instanceof Date)return Q;if(B.isDocumentSchema())return Q;if(B.isListSchema()){let Z=[],Y=B.getValueSchema(),J=!!B.getMergedTraits().sparse;for(let X of Q){let I=this.readValue(Y,X);if(I!=null||J)Z.push(I)}return Z}let G={};if(B.isMapSchema()){let Z=!!B.getMergedTraits().sparse,Y=B.getValueSchema();for(let J of Object.keys(Q)){let X=this.readValue(Y,Q[J]);if(X!=null||Z)G[J]=X}}else if(B.isStructSchema())for(let[Z,Y]of B.structIterator()){let J=this.readValue(Y,Q[Z]);if(J!=null)G[Z]=J}return G}else return Q}}class QwQ extends YNA.RpcProtocol{codec=new Ax1;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:A}){super({defaultNamespace:A})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(Object.assign(G.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),CZA.deref(A.input)==="unit")delete G.body,delete G.headers["content-type"];else{if(!G.body)this.serializer.write(15,{}),G.body=this.serializer.flush();try{G.headers["content-length"]=String(G.body.byteLength)}catch(X){}}let{service:Z,operation:Y}=kA6.getSmithyContext(B),J=`/service/${Z}/operation/${Y}`;if(G.path.endsWith("/"))G.path+=J.slice(1);else G.path+=J;return G}async deserializeResponse(A,Q,B){return super.deserializeResponse(A,Q,B)}async handleError(A,Q,B,G,Z){let Y=AwQ(B,G)??"Unknown",J=this.options.defaultNamespace;if(Y.includes("#"))[J]=Y.split("#");let X={$metadata:Z,$fault:B.statusCode<=500?"client":"server"},I=CZA.TypeRegistry.for(J),W;try{W=I.getSchema(Y)}catch(E){if(G.Message)G.message=G.Message;let z=CZA.TypeRegistry.for("smithy.ts.sdk.synthetic."+J),C=z.getBaseException();if(C){let O=z.getErrorCtor(C);throw Object.assign(new O({name:Y}),X,G)}throw Object.assign(Error(Y),X,G)}let D=CZA.NormalizedSchema.of(W),K=I.getErrorCtor(W),V=G.message??G.Message??"Unknown",F=new K(V),H={};for(let[E,z]of D.structIterator())H[E]=this.deserializer.readValue(z,G[E]);throw Object.assign(F,X,{$fault:D.getMergedTraits().error,message:V},H)}getDefaultContentType(){return"application/cbor"}}Q16.CborCodec=Ax1;Q16.CborShapeDeserializer=Bx1;Q16.CborShapeSerializer=Qx1;Q16.SmithyRpcV2CborProtocol=QwQ;Q16.buildHttpRpcRequest=A16;Q16.cbor=UaA;Q16.checkCborResponse=eA6;Q16.dateToTag=EaA;Q16.loadSmithyRpcV2CborErrorCode=AwQ;Q16.parseCborBody=eNQ;Q16.parseCborErrorBody=tA6;Q16.tag=tS1;Q16.tagSymbol=sS1});var Bv=U((E16)=>{var m1A=(A,Q)=>{let B=[];if(A)B.push(A);if(Q)for(let G of Q)B.push(G);return B},zi=(A,Q)=>{return`${A||"anonymous"}${Q&&Q.length>0?` (a.k.a. ${Q.join(",")})`:""}`},Zx1=()=>{let A=[],Q=[],B=!1,G=new Set,Z=(K)=>K.sort((V,F)=>BwQ[F.step]-BwQ[V.step]||GwQ[F.priority||"normal"]-GwQ[V.priority||"normal"]),Y=(K)=>{let V=!1,F=(H)=>{let E=m1A(H.name,H.aliases);if(E.includes(K)){V=!0;for(let z of E)G.delete(z);return!1}return!0};return A=A.filter(F),Q=Q.filter(F),V},J=(K)=>{let V=!1,F=(H)=>{if(H.middleware===K){V=!0;for(let E of m1A(H.name,H.aliases))G.delete(E);return!1}return!0};return A=A.filter(F),Q=Q.filter(F),V},X=(K)=>{return A.forEach((V)=>{K.add(V.middleware,{...V})}),Q.forEach((V)=>{K.addRelativeTo(V.middleware,{...V})}),K.identifyOnResolve?.(D.identifyOnResolve()),K},I=(K)=>{let V=[];return K.before.forEach((F)=>{if(F.before.length===0&&F.after.length===0)V.push(F);else V.push(...I(F))}),V.push(K),K.after.reverse().forEach((F)=>{if(F.before.length===0&&F.after.length===0)V.push(F);else V.push(...I(F))}),V},W=(K=!1)=>{let V=[],F=[],H={};return A.forEach((z)=>{let C={...z,before:[],after:[]};for(let O of m1A(C.name,C.aliases))H[O]=C;V.push(C)}),Q.forEach((z)=>{let C={...z,before:[],after:[]};for(let O of m1A(C.name,C.aliases))H[O]=C;F.push(C)}),F.forEach((z)=>{if(z.toMiddleware){let C=H[z.toMiddleware];if(C===void 0){if(K)return;throw Error(`${z.toMiddleware} is not found when adding ${zi(z.name,z.aliases)} middleware ${z.relation} ${z.toMiddleware}`)}if(z.relation==="after")C.after.push(z);if(z.relation==="before")C.before.push(z)}}),Z(V).map(I).reduce((z,C)=>{return z.push(...C),z},[])},D={add:(K,V={})=>{let{name:F,override:H,aliases:E}=V,z={step:"initialize",priority:"normal",middleware:K,...V},C=m1A(F,E);if(C.length>0){if(C.some((O)=>G.has(O))){if(!H)throw Error(`Duplicate middleware name '${zi(F,E)}'`);for(let O of C){let L=A.findIndex((_)=>_.name===O||_.aliases?.some((j)=>j===O));if(L===-1)continue;let M=A[L];if(M.step!==z.step||z.priority!==M.priority)throw Error(`"${zi(M.name,M.aliases)}" middleware with ${M.priority} priority in ${M.step} step cannot be overridden by "${zi(F,E)}" middleware with ${z.priority} priority in ${z.step} step.`);A.splice(L,1)}}for(let O of C)G.add(O)}A.push(z)},addRelativeTo:(K,V)=>{let{name:F,override:H,aliases:E}=V,z={middleware:K,...V},C=m1A(F,E);if(C.length>0){if(C.some((O)=>G.has(O))){if(!H)throw Error(`Duplicate middleware name '${zi(F,E)}'`);for(let O of C){let L=Q.findIndex((_)=>_.name===O||_.aliases?.some((j)=>j===O));if(L===-1)continue;let M=Q[L];if(M.toMiddleware!==z.toMiddleware||M.relation!==z.relation)throw Error(`"${zi(M.name,M.aliases)}" middleware ${M.relation} "${M.toMiddleware}" middleware cannot be overridden by "${zi(F,E)}" middleware ${z.relation} "${z.toMiddleware}" middleware.`);Q.splice(L,1)}}for(let O of C)G.add(O)}Q.push(z)},clone:()=>X(Zx1()),use:(K)=>{K.applyToStack(D)},remove:(K)=>{if(typeof K==="string")return Y(K);else return J(K)},removeByTag:(K)=>{let V=!1,F=(H)=>{let{tags:E,name:z,aliases:C}=H;if(E&&E.includes(K)){let O=m1A(z,C);for(let L of O)G.delete(L);return V=!0,!1}return!0};return A=A.filter(F),Q=Q.filter(F),V},concat:(K)=>{let V=X(Zx1());return V.use(K),V.identifyOnResolve(B||V.identifyOnResolve()||(K.identifyOnResolve?.()??!1)),V},applyToStack:X,identify:()=>{return W(!0).map((K)=>{let V=K.step??K.relation+" "+K.toMiddleware;return zi(K.name,K.aliases)+" - "+V})},identifyOnResolve(K){if(typeof K==="boolean")B=K;return B},resolve:(K,V)=>{for(let F of W().map((H)=>H.middleware).reverse())K=F(K,V);if(B)console.log(D.identify());return K}};return D},BwQ={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},GwQ={high:3,normal:2,low:1};E16.constructStack=Zx1});var Kx1=U((qZA)=>{var JwQ=Bv(),Wx1=Iq(),Jx1=jS1(),C16=IX(),ZwQ=Xq();class XwQ{config;middlewareStack=JwQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var Yx1="***SensitiveInformation***";function Xx1(A,Q){if(Q==null)return Q;let B=C16.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return Yx1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return Yx1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return Yx1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=Xx1(J,G[Y]);return Z}return Q}class Dx1{middlewareStack=JwQ.constructStack();schema;static classBuilder(){return new IwQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[Jx1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class IwQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends Dx1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?Xx1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?Xx1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var $16="***SensitiveInformation***",U16=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class UZA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return UZA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===UZA)return UZA.isInstance(A);if(UZA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var WwQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},DwQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=N16(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw WwQ(J,Q)},q16=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{DwQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},N16=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),w16=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},YwQ=!1,L16=(A)=>{if(A&&!YwQ&&parseInt(A.substring(1,A.indexOf(".")))<16)YwQ=!0},O16=(A)=>{let Q=[];for(let B in Jx1.AlgorithmId){let G=Jx1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},M16=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},R16=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},_16=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},KwQ=(A)=>{return Object.assign(O16(A),R16(A))},j16=KwQ,T16=(A)=>{return Object.assign(M16(A),_16(A))},P16=(A)=>Array.isArray(A)?A:[A],VwQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=VwQ(A[B]);return A},S16=(A)=>{return A!=null};class FwQ{trace(){}debug(){}info(){}warn(){}error(){}}function HwQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,v16(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}EwQ(G,null,Y,J)}return G}var x16=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},y16=(A,Q)=>{let B={};for(let G in Q)EwQ(B,A,Q,G);return B},v16=(A,Q,B)=>{return HwQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},EwQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=k16,I=b16,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},k16=(A)=>A!=null,b16=(A)=>A,f16=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},h16=(A)=>A.toISOString().replace(".000Z","Z"),Ix1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(Ix1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=Ix1(A[B])}return Q}return A};Object.defineProperty(qZA,"collectBody",{enumerable:!0,get:function(){return Wx1.collectBody}});Object.defineProperty(qZA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Wx1.extendedEncodeURIComponent}});Object.defineProperty(qZA,"resolvedPath",{enumerable:!0,get:function(){return Wx1.resolvedPath}});qZA.Client=XwQ;qZA.Command=Dx1;qZA.NoOpLogger=FwQ;qZA.SENSITIVE_STRING=$16;qZA.ServiceException=UZA;qZA._json=Ix1;qZA.convertMap=x16;qZA.createAggregatedClient=U16;qZA.decorateServiceException=WwQ;qZA.emitWarningIfUnsupportedVersion=L16;qZA.getArrayIfSingleItem=P16;qZA.getDefaultClientConfiguration=j16;qZA.getDefaultExtensionConfiguration=KwQ;qZA.getValueFromTextNode=VwQ;qZA.isSerializableHeaderValue=S16;qZA.loadConfigsForDefaultMode=w16;qZA.map=HwQ;qZA.resolveDefaultRuntimeConfig=T16;qZA.serializeDateTime=h16;qZA.serializeFloat=f16;qZA.take=y16;qZA.throwDefaultError=DwQ;qZA.withBaseException=q16;Object.keys(ZwQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(qZA,A))Object.defineProperty(qZA,A,{enumerable:!0,get:function(){return ZwQ[A]}})})});var zwQ=U((W06)=>{var I06=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";W06.isArrayBuffer=I06});var Fx1=U((H06)=>{var K06=zwQ(),Vx1=qA("buffer"),V06=(A,Q=0,B=A.byteLength-Q)=>{if(!K06.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return Vx1.Buffer.from(A,Q,B)},F06=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?Vx1.Buffer.from(A,Q):Vx1.Buffer.from(A)};H06.fromArrayBuffer=V06;H06.fromString=F06});var UwQ=U((CwQ)=>{Object.defineProperty(CwQ,"__esModule",{value:!0});CwQ.fromBase64=void 0;var C06=Fx1(),$06=/^[A-Za-z0-9+/]*={0,2}$/,U06=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!$06.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,C06.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};CwQ.fromBase64=U06});var wwQ=U((qwQ)=>{Object.defineProperty(qwQ,"__esModule",{value:!0});qwQ.toBase64=void 0;var q06=Fx1(),N06=lG(),w06=(A)=>{let Q;if(typeof A==="string")Q=(0,N06.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,q06.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};qwQ.toBase64=w06});var Hx1=U((XNA)=>{var LwQ=UwQ(),OwQ=wwQ();Object.keys(LwQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(XNA,A))Object.defineProperty(XNA,A,{enumerable:!0,get:function(){return LwQ[A]}})});Object.keys(OwQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(XNA,A))Object.defineProperty(XNA,A,{enumerable:!0,get:function(){return OwQ[A]}})})});var RwQ=U((N6G,MwQ)=>{(()=>{var A={d:(CA,OA)=>{for(var I1 in OA)A.o(OA,I1)&&!A.o(CA,I1)&&Object.defineProperty(CA,I1,{enumerable:!0,get:OA[I1]})},o:(CA,OA)=>Object.prototype.hasOwnProperty.call(CA,OA),r:(CA)=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(CA,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(CA,"__esModule",{value:!0})}},Q={};A.r(Q),A.d(Q,{XMLBuilder:()=>$1,XMLParser:()=>v1,XMLValidator:()=>l0});let B=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",G=new RegExp("^["+B+"]["+B+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function Z(CA,OA){let I1=[],w1=OA.exec(CA);for(;w1;){let H1=[];H1.startIndex=OA.lastIndex-w1[0].length;let D1=w1.length;for(let t1=0;t1<D1;t1++)H1.push(w1[t1]);I1.push(H1),w1=OA.exec(CA)}return I1}let Y=function(CA){return G.exec(CA)!=null},J={allowBooleanAttributes:!1,unpairedTags:[]};function X(CA,OA){OA=Object.assign({},J,OA);let I1=[],w1=!1,H1=!1;CA[0]==="\uFEFF"&&(CA=CA.substr(1));for(let D1=0;D1<CA.length;D1++)if(CA[D1]==="<"&&CA[D1+1]==="?"){if(D1+=2,D1=W(CA,D1),D1.err)return D1}else{if(CA[D1]!=="<"){if(I(CA[D1]))continue;return C("InvalidChar","char '"+CA[D1]+"' is not expected.",L(CA,D1))}{let t1=D1;if(D1++,CA[D1]==="!"){D1=D(CA,D1);continue}{let Q0=!1;CA[D1]==="/"&&(Q0=!0,D1++);let g0="";for(;D1<CA.length&&CA[D1]!==">"&&CA[D1]!==" "&&CA[D1]!=="\t"&&CA[D1]!==`
`&&CA[D1]!=="\r";D1++)g0+=CA[D1];if(g0=g0.trim(),g0[g0.length-1]==="/"&&(g0=g0.substring(0,g0.length-1),D1--),!Y(g0)){let BB;return BB=g0.trim().length===0?"Invalid space after '<'.":"Tag '"+g0+"' is an invalid name.",C("InvalidTag",BB,L(CA,D1))}let DQ=F(CA,D1);if(DQ===!1)return C("InvalidAttr","Attributes for '"+g0+"' have open quote.",L(CA,D1));let qB=DQ.value;if(D1=DQ.index,qB[qB.length-1]==="/"){let BB=D1-qB.length;qB=qB.substring(0,qB.length-1);let d2=E(qB,OA);if(d2!==!0)return C(d2.err.code,d2.err.msg,L(CA,BB+d2.err.line));w1=!0}else if(Q0){if(!DQ.tagClosed)return C("InvalidTag","Closing tag '"+g0+"' doesn't have proper closing.",L(CA,D1));if(qB.trim().length>0)return C("InvalidTag","Closing tag '"+g0+"' can't have attributes or invalid starting.",L(CA,t1));if(I1.length===0)return C("InvalidTag","Closing tag '"+g0+"' has not been opened.",L(CA,t1));{let BB=I1.pop();if(g0!==BB.tagName){let d2=L(CA,BB.tagStartPos);return C("InvalidTag","Expected closing tag '"+BB.tagName+"' (opened in line "+d2.line+", col "+d2.col+") instead of closing tag '"+g0+"'.",L(CA,t1))}I1.length==0&&(H1=!0)}}else{let BB=E(qB,OA);if(BB!==!0)return C(BB.err.code,BB.err.msg,L(CA,D1-qB.length+BB.err.line));if(H1===!0)return C("InvalidXml","Multiple possible root nodes found.",L(CA,D1));OA.unpairedTags.indexOf(g0)!==-1||I1.push({tagName:g0,tagStartPos:t1}),w1=!0}for(D1++;D1<CA.length;D1++)if(CA[D1]==="<"){if(CA[D1+1]==="!"){D1++,D1=D(CA,D1);continue}if(CA[D1+1]!=="?")break;if(D1=W(CA,++D1),D1.err)return D1}else if(CA[D1]==="&"){let BB=z(CA,D1);if(BB==-1)return C("InvalidChar","char '&' is not expected.",L(CA,D1));D1=BB}else if(H1===!0&&!I(CA[D1]))return C("InvalidXml","Extra text at the end",L(CA,D1));CA[D1]==="<"&&D1--}}}return w1?I1.length==1?C("InvalidTag","Unclosed tag '"+I1[0].tagName+"'.",L(CA,I1[0].tagStartPos)):!(I1.length>0)||C("InvalidXml","Invalid '"+JSON.stringify(I1.map((D1)=>D1.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):C("InvalidXml","Start tag expected.",1)}function I(CA){return CA===" "||CA==="\t"||CA===`
`||CA==="\r"}function W(CA,OA){let I1=OA;for(;OA<CA.length;OA++)if(CA[OA]!="?"&&CA[OA]!=" ");else{let w1=CA.substr(I1,OA-I1);if(OA>5&&w1==="xml")return C("InvalidXml","XML declaration allowed only at the start of the document.",L(CA,OA));if(CA[OA]=="?"&&CA[OA+1]==">"){OA++;break}}return OA}function D(CA,OA){if(CA.length>OA+5&&CA[OA+1]==="-"&&CA[OA+2]==="-"){for(OA+=3;OA<CA.length;OA++)if(CA[OA]==="-"&&CA[OA+1]==="-"&&CA[OA+2]===">"){OA+=2;break}}else if(CA.length>OA+8&&CA[OA+1]==="D"&&CA[OA+2]==="O"&&CA[OA+3]==="C"&&CA[OA+4]==="T"&&CA[OA+5]==="Y"&&CA[OA+6]==="P"&&CA[OA+7]==="E"){let I1=1;for(OA+=8;OA<CA.length;OA++)if(CA[OA]==="<")I1++;else if(CA[OA]===">"&&(I1--,I1===0))break}else if(CA.length>OA+9&&CA[OA+1]==="["&&CA[OA+2]==="C"&&CA[OA+3]==="D"&&CA[OA+4]==="A"&&CA[OA+5]==="T"&&CA[OA+6]==="A"&&CA[OA+7]==="["){for(OA+=8;OA<CA.length;OA++)if(CA[OA]==="]"&&CA[OA+1]==="]"&&CA[OA+2]===">"){OA+=2;break}}return OA}let K='"',V="'";function F(CA,OA){let I1="",w1="",H1=!1;for(;OA<CA.length;OA++){if(CA[OA]===K||CA[OA]===V)w1===""?w1=CA[OA]:w1!==CA[OA]||(w1="");else if(CA[OA]===">"&&w1===""){H1=!0;break}I1+=CA[OA]}return w1===""&&{value:I1,index:OA,tagClosed:H1}}let H=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function E(CA,OA){let I1=Z(CA,H),w1={};for(let H1=0;H1<I1.length;H1++){if(I1[H1][1].length===0)return C("InvalidAttr","Attribute '"+I1[H1][2]+"' has no space in starting.",M(I1[H1]));if(I1[H1][3]!==void 0&&I1[H1][4]===void 0)return C("InvalidAttr","Attribute '"+I1[H1][2]+"' is without value.",M(I1[H1]));if(I1[H1][3]===void 0&&!OA.allowBooleanAttributes)return C("InvalidAttr","boolean attribute '"+I1[H1][2]+"' is not allowed.",M(I1[H1]));let D1=I1[H1][2];if(!O(D1))return C("InvalidAttr","Attribute '"+D1+"' is an invalid name.",M(I1[H1]));if(w1.hasOwnProperty(D1))return C("InvalidAttr","Attribute '"+D1+"' is repeated.",M(I1[H1]));w1[D1]=1}return!0}function z(CA,OA){if(CA[++OA]===";")return-1;if(CA[OA]==="#")return function(w1,H1){let D1=/\d/;for(w1[H1]==="x"&&(H1++,D1=/[\da-fA-F]/);H1<w1.length;H1++){if(w1[H1]===";")return H1;if(!w1[H1].match(D1))break}return-1}(CA,++OA);let I1=0;for(;OA<CA.length;OA++,I1++)if(!(CA[OA].match(/\w/)&&I1<20)){if(CA[OA]===";")break;return-1}return OA}function C(CA,OA,I1){return{err:{code:CA,msg:OA,line:I1.line||I1,col:I1.col}}}function O(CA){return Y(CA)}function L(CA,OA){let I1=CA.substring(0,OA).split(/\r?\n/);return{line:I1.length,col:I1[I1.length-1].length+1}}function M(CA){return CA.startIndex+CA[1].length}let _={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(CA,OA){return OA},attributeValueProcessor:function(CA,OA){return OA},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(CA,OA,I1){return CA},captureMetaData:!1},j;j=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class P{constructor(CA){this.tagname=CA,this.child=[],this[":@"]={}}add(CA,OA){CA==="__proto__"&&(CA="#__proto__"),this.child.push({[CA]:OA})}addChild(CA,OA){CA.tagname==="__proto__"&&(CA.tagname="#__proto__"),CA[":@"]&&Object.keys(CA[":@"]).length>0?this.child.push({[CA.tagname]:CA.child,":@":CA[":@"]}):this.child.push({[CA.tagname]:CA.child}),OA!==void 0&&(this.child[this.child.length-1][j]={startIndex:OA})}static getMetaDataSymbol(){return j}}function y(CA,OA){let I1={};if(CA[OA+3]!=="O"||CA[OA+4]!=="C"||CA[OA+5]!=="T"||CA[OA+6]!=="Y"||CA[OA+7]!=="P"||CA[OA+8]!=="E")throw Error("Invalid Tag instead of DOCTYPE");{OA+=9;let w1=1,H1=!1,D1=!1,t1="";for(;OA<CA.length;OA++)if(CA[OA]!=="<"||D1)if(CA[OA]===">"){if(D1?CA[OA-1]==="-"&&CA[OA-2]==="-"&&(D1=!1,w1--):w1--,w1===0)break}else CA[OA]==="["?H1=!0:t1+=CA[OA];else{if(H1&&b(CA,"!ENTITY",OA)){let Q0,g0;OA+=7,[Q0,g0,OA]=m(CA,OA+1),g0.indexOf("&")===-1&&(I1[Q0]={regx:RegExp(`&${Q0};`,"g"),val:g0})}else if(H1&&b(CA,"!ELEMENT",OA)){OA+=8;let{index:Q0}=t(CA,OA+1);OA=Q0}else if(H1&&b(CA,"!ATTLIST",OA))OA+=8;else if(H1&&b(CA,"!NOTATION",OA)){OA+=9;let{index:Q0}=h(CA,OA+1);OA=Q0}else{if(!b(CA,"!--",OA))throw Error("Invalid DOCTYPE");D1=!0}w1++,t1=""}if(w1!==0)throw Error("Unclosed DOCTYPE")}return{entities:I1,i:OA}}let v=(CA,OA)=>{for(;OA<CA.length&&/\s/.test(CA[OA]);)OA++;return OA};function m(CA,OA){OA=v(CA,OA);let I1="";for(;OA<CA.length&&!/\s/.test(CA[OA])&&CA[OA]!=='"'&&CA[OA]!=="'";)I1+=CA[OA],OA++;if(l(I1),OA=v(CA,OA),CA.substring(OA,OA+6).toUpperCase()==="SYSTEM")throw Error("External entities are not supported");if(CA[OA]==="%")throw Error("Parameter entities are not supported");let w1="";return[OA,w1]=e(CA,OA,"entity"),[I1,w1,--OA]}function h(CA,OA){OA=v(CA,OA);let I1="";for(;OA<CA.length&&!/\s/.test(CA[OA]);)I1+=CA[OA],OA++;l(I1),OA=v(CA,OA);let w1=CA.substring(OA,OA+6).toUpperCase();if(w1!=="SYSTEM"&&w1!=="PUBLIC")throw Error(`Expected SYSTEM or PUBLIC, found "${w1}"`);OA+=w1.length,OA=v(CA,OA);let H1=null,D1=null;if(w1==="PUBLIC")[OA,H1]=e(CA,OA,"publicIdentifier"),CA[OA=v(CA,OA)]!=='"'&&CA[OA]!=="'"||([OA,D1]=e(CA,OA,"systemIdentifier"));else if(w1==="SYSTEM"&&([OA,D1]=e(CA,OA,"systemIdentifier"),!D1))throw Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:I1,publicIdentifier:H1,systemIdentifier:D1,index:--OA}}function e(CA,OA,I1){let w1="",H1=CA[OA];if(H1!=='"'&&H1!=="'")throw Error(`Expected quoted string, found "${H1}"`);for(OA++;OA<CA.length&&CA[OA]!==H1;)w1+=CA[OA],OA++;if(CA[OA]!==H1)throw Error(`Unterminated ${I1} value`);return[++OA,w1]}function t(CA,OA){OA=v(CA,OA);let I1="";for(;OA<CA.length&&!/\s/.test(CA[OA]);)I1+=CA[OA],OA++;if(!l(I1))throw Error(`Invalid element name: "${I1}"`);let w1="";if(CA[OA=v(CA,OA)]==="E"&&b(CA,"MPTY",OA))OA+=4;else if(CA[OA]==="A"&&b(CA,"NY",OA))OA+=2;else{if(CA[OA]!=="(")throw Error(`Invalid Element Expression, found "${CA[OA]}"`);for(OA++;OA<CA.length&&CA[OA]!==")";)w1+=CA[OA],OA++;if(CA[OA]!==")")throw Error("Unterminated content model")}return{elementName:I1,contentModel:w1.trim(),index:OA}}function b(CA,OA,I1){for(let w1=0;w1<OA.length;w1++)if(OA[w1]!==CA[I1+w1+1])return!1;return!0}function l(CA){if(Y(CA))return CA;throw Error(`Invalid entity name ${CA}`)}let QA=/^[-+]?0x[a-fA-F0-9]+$/,WA=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,wA={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},_A=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function hA(CA){return typeof CA=="function"?CA:Array.isArray(CA)?(OA)=>{for(let I1 of CA){if(typeof I1=="string"&&OA===I1)return!0;if(I1 instanceof RegExp&&I1.test(OA))return!0}}:()=>!1}class jA{constructor(CA){this.options=CA,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(OA,I1)=>String.fromCodePoint(Number.parseInt(I1,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(OA,I1)=>String.fromCodePoint(Number.parseInt(I1,16))}},this.addExternalEntities=yA,this.parseXml=$A,this.parseTextData=FA,this.resolveNameSpace=GA,this.buildAttributesMap=EA,this.isItStopNode=XA,this.replaceEntitiesValue=r,this.readStopNodeData=RA,this.saveTextToParentTag=VA,this.addChild=MA,this.ignoreAttributesFn=hA(this.options.ignoreAttributes)}}function yA(CA){let OA=Object.keys(CA);for(let I1=0;I1<OA.length;I1++){let w1=OA[I1];this.lastEntities[w1]={regex:new RegExp("&"+w1+";","g"),val:CA[w1]}}}function FA(CA,OA,I1,w1,H1,D1,t1){if(CA!==void 0&&(this.options.trimValues&&!w1&&(CA=CA.trim()),CA.length>0)){t1||(CA=this.replaceEntitiesValue(CA));let Q0=this.options.tagValueProcessor(OA,CA,I1,H1,D1);return Q0==null?CA:typeof Q0!=typeof CA||Q0!==CA?Q0:this.options.trimValues||CA.trim()===CA?gA(CA,this.options.parseTagValue,this.options.numberParseOptions):CA}}function GA(CA){if(this.options.removeNSPrefix){let OA=CA.split(":"),I1=CA.charAt(0)==="/"?"/":"";if(OA[0]==="xmlns")return"";OA.length===2&&(CA=I1+OA[1])}return CA}let AA=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function EA(CA,OA,I1){if(this.options.ignoreAttributes!==!0&&typeof CA=="string"){let w1=Z(CA,AA),H1=w1.length,D1={};for(let t1=0;t1<H1;t1++){let Q0=this.resolveNameSpace(w1[t1][1]);if(this.ignoreAttributesFn(Q0,OA))continue;let g0=w1[t1][4],DQ=this.options.attributeNamePrefix+Q0;if(Q0.length)if(this.options.transformAttributeName&&(DQ=this.options.transformAttributeName(DQ)),DQ==="__proto__"&&(DQ="#__proto__"),g0!==void 0){this.options.trimValues&&(g0=g0.trim()),g0=this.replaceEntitiesValue(g0);let qB=this.options.attributeValueProcessor(Q0,g0,OA);D1[DQ]=qB==null?g0:typeof qB!=typeof g0||qB!==g0?qB:gA(g0,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(D1[DQ]=!0)}if(!Object.keys(D1).length)return;if(this.options.attributesGroupName){let t1={};return t1[this.options.attributesGroupName]=D1,t1}return D1}}let $A=function(CA){CA=CA.replace(/\r\n?/g,`
`);let OA=new P("!xml"),I1=OA,w1="",H1="";for(let D1=0;D1<CA.length;D1++)if(CA[D1]==="<")if(CA[D1+1]==="/"){let t1=IA(CA,">",D1,"Closing Tag is not closed."),Q0=CA.substring(D1+2,t1).trim();if(this.options.removeNSPrefix){let qB=Q0.indexOf(":");qB!==-1&&(Q0=Q0.substr(qB+1))}this.options.transformTagName&&(Q0=this.options.transformTagName(Q0)),I1&&(w1=this.saveTextToParentTag(w1,I1,H1));let g0=H1.substring(H1.lastIndexOf(".")+1);if(Q0&&this.options.unpairedTags.indexOf(Q0)!==-1)throw Error(`Unpaired tag can not be used as closing tag: </${Q0}>`);let DQ=0;g0&&this.options.unpairedTags.indexOf(g0)!==-1?(DQ=H1.lastIndexOf(".",H1.lastIndexOf(".")-1),this.tagsNodeStack.pop()):DQ=H1.lastIndexOf("."),H1=H1.substring(0,DQ),I1=this.tagsNodeStack.pop(),w1="",D1=t1}else if(CA[D1+1]==="?"){let t1=NA(CA,D1,!1,"?>");if(!t1)throw Error("Pi Tag is not closed.");if(w1=this.saveTextToParentTag(w1,I1,H1),this.options.ignoreDeclaration&&t1.tagName==="?xml"||this.options.ignorePiTags);else{let Q0=new P(t1.tagName);Q0.add(this.options.textNodeName,""),t1.tagName!==t1.tagExp&&t1.attrExpPresent&&(Q0[":@"]=this.buildAttributesMap(t1.tagExp,H1,t1.tagName)),this.addChild(I1,Q0,H1,D1)}D1=t1.closeIndex+1}else if(CA.substr(D1+1,3)==="!--"){let t1=IA(CA,"-->",D1+4,"Comment is not closed.");if(this.options.commentPropName){let Q0=CA.substring(D1+4,t1-2);w1=this.saveTextToParentTag(w1,I1,H1),I1.add(this.options.commentPropName,[{[this.options.textNodeName]:Q0}])}D1=t1}else if(CA.substr(D1+1,2)==="!D"){let t1=y(CA,D1);this.docTypeEntities=t1.entities,D1=t1.i}else if(CA.substr(D1+1,2)==="!["){let t1=IA(CA,"]]>",D1,"CDATA is not closed.")-2,Q0=CA.substring(D1+9,t1);w1=this.saveTextToParentTag(w1,I1,H1);let g0=this.parseTextData(Q0,I1.tagname,H1,!0,!1,!0,!0);g0==null&&(g0=""),this.options.cdataPropName?I1.add(this.options.cdataPropName,[{[this.options.textNodeName]:Q0}]):I1.add(this.options.textNodeName,g0),D1=t1+2}else{let t1=NA(CA,D1,this.options.removeNSPrefix),Q0=t1.tagName,g0=t1.rawTagName,DQ=t1.tagExp,qB=t1.attrExpPresent,BB=t1.closeIndex;this.options.transformTagName&&(Q0=this.options.transformTagName(Q0)),I1&&w1&&I1.tagname!=="!xml"&&(w1=this.saveTextToParentTag(w1,I1,H1,!1));let d2=I1;d2&&this.options.unpairedTags.indexOf(d2.tagname)!==-1&&(I1=this.tagsNodeStack.pop(),H1=H1.substring(0,H1.lastIndexOf("."))),Q0!==OA.tagname&&(H1+=H1?"."+Q0:Q0);let i0=D1;if(this.isItStopNode(this.options.stopNodes,H1,Q0)){let F0="";if(DQ.length>0&&DQ.lastIndexOf("/")===DQ.length-1)Q0[Q0.length-1]==="/"?(Q0=Q0.substr(0,Q0.length-1),H1=H1.substr(0,H1.length-1),DQ=Q0):DQ=DQ.substr(0,DQ.length-1),D1=t1.closeIndex;else if(this.options.unpairedTags.indexOf(Q0)!==-1)D1=t1.closeIndex;else{let yB=this.readStopNodeData(CA,g0,BB+1);if(!yB)throw Error(`Unexpected end of ${g0}`);D1=yB.i,F0=yB.tagContent}let r0=new P(Q0);Q0!==DQ&&qB&&(r0[":@"]=this.buildAttributesMap(DQ,H1,Q0)),F0&&(F0=this.parseTextData(F0,Q0,H1,!0,qB,!0,!0)),H1=H1.substr(0,H1.lastIndexOf(".")),r0.add(this.options.textNodeName,F0),this.addChild(I1,r0,H1,i0)}else{if(DQ.length>0&&DQ.lastIndexOf("/")===DQ.length-1){Q0[Q0.length-1]==="/"?(Q0=Q0.substr(0,Q0.length-1),H1=H1.substr(0,H1.length-1),DQ=Q0):DQ=DQ.substr(0,DQ.length-1),this.options.transformTagName&&(Q0=this.options.transformTagName(Q0));let F0=new P(Q0);Q0!==DQ&&qB&&(F0[":@"]=this.buildAttributesMap(DQ,H1,Q0)),this.addChild(I1,F0,H1,i0),H1=H1.substr(0,H1.lastIndexOf("."))}else{let F0=new P(Q0);this.tagsNodeStack.push(I1),Q0!==DQ&&qB&&(F0[":@"]=this.buildAttributesMap(DQ,H1,Q0)),this.addChild(I1,F0,H1,i0),I1=F0}w1="",D1=BB}}else w1+=CA[D1];return OA.child};function MA(CA,OA,I1,w1){this.options.captureMetaData||(w1=void 0);let H1=this.options.updateTag(OA.tagname,I1,OA[":@"]);H1===!1||(typeof H1=="string"?(OA.tagname=H1,CA.addChild(OA,w1)):CA.addChild(OA,w1))}let r=function(CA){if(this.options.processEntities){for(let OA in this.docTypeEntities){let I1=this.docTypeEntities[OA];CA=CA.replace(I1.regx,I1.val)}for(let OA in this.lastEntities){let I1=this.lastEntities[OA];CA=CA.replace(I1.regex,I1.val)}if(this.options.htmlEntities)for(let OA in this.htmlEntities){let I1=this.htmlEntities[OA];CA=CA.replace(I1.regex,I1.val)}CA=CA.replace(this.ampEntity.regex,this.ampEntity.val)}return CA};function VA(CA,OA,I1,w1){return CA&&(w1===void 0&&(w1=OA.child.length===0),(CA=this.parseTextData(CA,OA.tagname,I1,!1,!!OA[":@"]&&Object.keys(OA[":@"]).length!==0,w1))!==void 0&&CA!==""&&OA.add(this.options.textNodeName,CA),CA=""),CA}function XA(CA,OA,I1){let w1="*."+I1;for(let H1 in CA){let D1=CA[H1];if(w1===D1||OA===D1)return!0}return!1}function IA(CA,OA,I1,w1){let H1=CA.indexOf(OA,I1);if(H1===-1)throw Error(w1);return H1+OA.length-1}function NA(CA,OA,I1,w1=">"){let H1=function(BB,d2,i0=">"){let F0,r0="";for(let yB=d2;yB<BB.length;yB++){let p2=BB[yB];if(F0)p2===F0&&(F0="");else if(p2==='"'||p2==="'")F0=p2;else if(p2===i0[0]){if(!i0[1])return{data:r0,index:yB};if(BB[yB+1]===i0[1])return{data:r0,index:yB}}else p2==="\t"&&(p2=" ");r0+=p2}}(CA,OA+1,w1);if(!H1)return;let{data:D1,index:t1}=H1,Q0=D1.search(/\s/),g0=D1,DQ=!0;Q0!==-1&&(g0=D1.substring(0,Q0),D1=D1.substring(Q0+1).trimStart());let qB=g0;if(I1){let BB=g0.indexOf(":");BB!==-1&&(g0=g0.substr(BB+1),DQ=g0!==H1.data.substr(BB+1))}return{tagName:g0,tagExp:D1,closeIndex:t1,attrExpPresent:DQ,rawTagName:qB}}function RA(CA,OA,I1){let w1=I1,H1=1;for(;I1<CA.length;I1++)if(CA[I1]==="<")if(CA[I1+1]==="/"){let D1=IA(CA,">",I1,`${OA} is not closed`);if(CA.substring(I1+2,D1).trim()===OA&&(H1--,H1===0))return{tagContent:CA.substring(w1,I1),i:D1};I1=D1}else if(CA[I1+1]==="?")I1=IA(CA,"?>",I1+1,"StopNode is not closed.");else if(CA.substr(I1+1,3)==="!--")I1=IA(CA,"-->",I1+3,"StopNode is not closed.");else if(CA.substr(I1+1,2)==="![")I1=IA(CA,"]]>",I1,"StopNode is not closed.")-2;else{let D1=NA(CA,I1,">");D1&&((D1&&D1.tagName)===OA&&D1.tagExp[D1.tagExp.length-1]!=="/"&&H1++,I1=D1.closeIndex)}}function gA(CA,OA,I1){if(OA&&typeof CA=="string"){let w1=CA.trim();return w1==="true"||w1!=="false"&&function(H1,D1={}){if(D1=Object.assign({},wA,D1),!H1||typeof H1!="string")return H1;let t1=H1.trim();if(D1.skipLike!==void 0&&D1.skipLike.test(t1))return H1;if(H1==="0")return 0;if(D1.hex&&QA.test(t1))return function(g0){if(parseInt)return parseInt(g0,16);if(Number.parseInt)return Number.parseInt(g0,16);if(window&&window.parseInt)return window.parseInt(g0,16);throw Error("parseInt, Number.parseInt, window.parseInt are not supported")}(t1);if(t1.search(/.+[eE].+/)!==-1)return function(g0,DQ,qB){if(!qB.eNotation)return g0;let BB=DQ.match(_A);if(BB){let d2=BB[1]||"",i0=BB[3].indexOf("e")===-1?"E":"e",F0=BB[2],r0=d2?g0[F0.length+1]===i0:g0[F0.length]===i0;return F0.length>1&&r0?g0:F0.length!==1||!BB[3].startsWith(`.${i0}`)&&BB[3][0]!==i0?qB.leadingZeros&&!r0?(DQ=(BB[1]||"")+BB[3],Number(DQ)):g0:Number(DQ)}return g0}(H1,t1,D1);{let g0=WA.exec(t1);if(g0){let DQ=g0[1]||"",qB=g0[2],BB=(Q0=g0[3])&&Q0.indexOf(".")!==-1?((Q0=Q0.replace(/0+$/,""))==="."?Q0="0":Q0[0]==="."?Q0="0"+Q0:Q0[Q0.length-1]==="."&&(Q0=Q0.substring(0,Q0.length-1)),Q0):Q0,d2=DQ?H1[qB.length+1]===".":H1[qB.length]===".";if(!D1.leadingZeros&&(qB.length>1||qB.length===1&&!d2))return H1;{let i0=Number(t1),F0=String(i0);if(i0===0||i0===-0)return i0;if(F0.search(/[eE]/)!==-1)return D1.eNotation?i0:H1;if(t1.indexOf(".")!==-1)return F0==="0"||F0===BB||F0===`${DQ}${BB}`?i0:H1;let r0=qB?BB:t1;return qB?r0===F0||DQ+r0===F0?i0:H1:r0===F0||r0===DQ+F0?i0:H1}}return H1}var Q0}(CA,I1)}return CA!==void 0?CA:""}let mA=P.getMetaDataSymbol();function Z1(CA,OA){return F1(CA,OA)}function F1(CA,OA,I1){let w1,H1={};for(let D1=0;D1<CA.length;D1++){let t1=CA[D1],Q0=PA(t1),g0="";if(g0=I1===void 0?Q0:I1+"."+Q0,Q0===OA.textNodeName)w1===void 0?w1=t1[Q0]:w1+=""+t1[Q0];else{if(Q0===void 0)continue;if(t1[Q0]){let DQ=F1(t1[Q0],OA,g0),qB=s1(DQ,OA);t1[mA]!==void 0&&(DQ[mA]=t1[mA]),t1[":@"]?eA(DQ,t1[":@"],g0,OA):Object.keys(DQ).length!==1||DQ[OA.textNodeName]===void 0||OA.alwaysCreateTextNode?Object.keys(DQ).length===0&&(OA.alwaysCreateTextNode?DQ[OA.textNodeName]="":DQ=""):DQ=DQ[OA.textNodeName],H1[Q0]!==void 0&&H1.hasOwnProperty(Q0)?(Array.isArray(H1[Q0])||(H1[Q0]=[H1[Q0]]),H1[Q0].push(DQ)):OA.isArray(Q0,g0,qB)?H1[Q0]=[DQ]:H1[Q0]=DQ}}}return typeof w1=="string"?w1.length>0&&(H1[OA.textNodeName]=w1):w1!==void 0&&(H1[OA.textNodeName]=w1),H1}function PA(CA){let OA=Object.keys(CA);for(let I1=0;I1<OA.length;I1++){let w1=OA[I1];if(w1!==":@")return w1}}function eA(CA,OA,I1,w1){if(OA){let H1=Object.keys(OA),D1=H1.length;for(let t1=0;t1<D1;t1++){let Q0=H1[t1];w1.isArray(Q0,I1+"."+Q0,!0,!0)?CA[Q0]=[OA[Q0]]:CA[Q0]=OA[Q0]}}}function s1(CA,OA){let{textNodeName:I1}=OA,w1=Object.keys(CA).length;return w1===0||!(w1!==1||!CA[I1]&&typeof CA[I1]!="boolean"&&CA[I1]!==0)}class v1{constructor(CA){this.externalEntities={},this.options=function(OA){return Object.assign({},_,OA)}(CA)}parse(CA,OA){if(typeof CA=="string");else{if(!CA.toString)throw Error("XML data is accepted in String or Bytes[] form.");CA=CA.toString()}if(OA){OA===!0&&(OA={});let H1=X(CA,OA);if(H1!==!0)throw Error(`${H1.err.msg}:${H1.err.line}:${H1.err.col}`)}let I1=new jA(this.options);I1.addExternalEntities(this.externalEntities);let w1=I1.parseXml(CA);return this.options.preserveOrder||w1===void 0?w1:Z1(w1,this.options)}addEntity(CA,OA){if(OA.indexOf("&")!==-1)throw Error("Entity value can't have '&'");if(CA.indexOf("&")!==-1||CA.indexOf(";")!==-1)throw Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(OA==="&")throw Error("An entity with value '&' is not permitted");this.externalEntities[CA]=OA}static getMetaDataSymbol(){return P.getMetaDataSymbol()}}function L0(CA,OA){let I1="";return OA.format&&OA.indentBy.length>0&&(I1=`
`),TQ(CA,OA,"",I1)}function TQ(CA,OA,I1,w1){let H1="",D1=!1;for(let t1=0;t1<CA.length;t1++){let Q0=CA[t1],g0=ZQ(Q0);if(g0===void 0)continue;let DQ="";if(DQ=I1.length===0?g0:`${I1}.${g0}`,g0===OA.textNodeName){let i0=Q0[g0];S1(DQ,OA)||(i0=OA.tagValueProcessor(g0,i0),i0=WQ(i0,OA)),D1&&(H1+=w1),H1+=i0,D1=!1;continue}if(g0===OA.cdataPropName){D1&&(H1+=w1),H1+=`<![CDATA[${Q0[g0][0][OA.textNodeName]}]]>`,D1=!1;continue}if(g0===OA.commentPropName){H1+=w1+`<!--${Q0[g0][0][OA.textNodeName]}-->`,D1=!0;continue}if(g0[0]==="?"){let i0=$Q(Q0[":@"],OA),F0=g0==="?xml"?"":w1,r0=Q0[g0][0][OA.textNodeName];r0=r0.length!==0?" "+r0:"",H1+=F0+`<${g0}${r0}${i0}?>`,D1=!0;continue}let qB=w1;qB!==""&&(qB+=OA.indentBy);let BB=w1+`<${g0}${$Q(Q0[":@"],OA)}`,d2=TQ(Q0[g0],OA,DQ,qB);OA.unpairedTags.indexOf(g0)!==-1?OA.suppressUnpairedNode?H1+=BB+">":H1+=BB+"/>":d2&&d2.length!==0||!OA.suppressEmptyNode?d2&&d2.endsWith(">")?H1+=BB+`>${d2}${w1}</${g0}>`:(H1+=BB+">",d2&&w1!==""&&(d2.includes("/>")||d2.includes("</"))?H1+=w1+OA.indentBy+d2+w1:H1+=d2,H1+=`</${g0}>`):H1+=BB+"/>",D1=!0}return H1}function ZQ(CA){let OA=Object.keys(CA);for(let I1=0;I1<OA.length;I1++){let w1=OA[I1];if(CA.hasOwnProperty(w1)&&w1!==":@")return w1}}function $Q(CA,OA){let I1="";if(CA&&!OA.ignoreAttributes)for(let w1 in CA){if(!CA.hasOwnProperty(w1))continue;let H1=OA.attributeValueProcessor(w1,CA[w1]);H1=WQ(H1,OA),H1===!0&&OA.suppressBooleanAttributes?I1+=` ${w1.substr(OA.attributeNamePrefix.length)}`:I1+=` ${w1.substr(OA.attributeNamePrefix.length)}="${H1}"`}return I1}function S1(CA,OA){let I1=(CA=CA.substr(0,CA.length-OA.textNodeName.length-1)).substr(CA.lastIndexOf(".")+1);for(let w1 in OA.stopNodes)if(OA.stopNodes[w1]===CA||OA.stopNodes[w1]==="*."+I1)return!0;return!1}function WQ(CA,OA){if(CA&&CA.length>0&&OA.processEntities)for(let I1=0;I1<OA.entities.length;I1++){let w1=OA.entities[I1];CA=CA.replace(w1.regex,w1.val)}return CA}let J1={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(CA,OA){return OA},attributeValueProcessor:function(CA,OA){return OA},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function $1(CA){this.options=Object.assign({},J1,CA),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=hA(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p0),this.processTextOrObjNode=x1,this.options.format?(this.indentate=_0,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function x1(CA,OA,I1,w1){let H1=this.j2x(CA,I1+1,w1.concat(OA));return CA[this.options.textNodeName]!==void 0&&Object.keys(CA).length===1?this.buildTextValNode(CA[this.options.textNodeName],OA,H1.attrStr,I1):this.buildObjectNode(H1.val,OA,H1.attrStr,I1)}function _0(CA){return this.options.indentBy.repeat(CA)}function p0(CA){return!(!CA.startsWith(this.options.attributeNamePrefix)||CA===this.options.textNodeName)&&CA.substr(this.attrPrefixLen)}$1.prototype.build=function(CA){return this.options.preserveOrder?L0(CA,this.options):(Array.isArray(CA)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(CA={[this.options.arrayNodeName]:CA}),this.j2x(CA,0,[]).val)},$1.prototype.j2x=function(CA,OA,I1){let w1="",H1="",D1=I1.join(".");for(let t1 in CA)if(Object.prototype.hasOwnProperty.call(CA,t1))if(CA[t1]===void 0)this.isAttribute(t1)&&(H1+="");else if(CA[t1]===null)this.isAttribute(t1)||t1===this.options.cdataPropName?H1+="":t1[0]==="?"?H1+=this.indentate(OA)+"<"+t1+"?"+this.tagEndChar:H1+=this.indentate(OA)+"<"+t1+"/"+this.tagEndChar;else if(CA[t1]instanceof Date)H1+=this.buildTextValNode(CA[t1],t1,"",OA);else if(typeof CA[t1]!="object"){let Q0=this.isAttribute(t1);if(Q0&&!this.ignoreAttributesFn(Q0,D1))w1+=this.buildAttrPairStr(Q0,""+CA[t1]);else if(!Q0)if(t1===this.options.textNodeName){let g0=this.options.tagValueProcessor(t1,""+CA[t1]);H1+=this.replaceEntitiesValue(g0)}else H1+=this.buildTextValNode(CA[t1],t1,"",OA)}else if(Array.isArray(CA[t1])){let Q0=CA[t1].length,g0="",DQ="";for(let qB=0;qB<Q0;qB++){let BB=CA[t1][qB];if(BB===void 0);else if(BB===null)t1[0]==="?"?H1+=this.indentate(OA)+"<"+t1+"?"+this.tagEndChar:H1+=this.indentate(OA)+"<"+t1+"/"+this.tagEndChar;else if(typeof BB=="object")if(this.options.oneListGroup){let d2=this.j2x(BB,OA+1,I1.concat(t1));g0+=d2.val,this.options.attributesGroupName&&BB.hasOwnProperty(this.options.attributesGroupName)&&(DQ+=d2.attrStr)}else g0+=this.processTextOrObjNode(BB,t1,OA,I1);else if(this.options.oneListGroup){let d2=this.options.tagValueProcessor(t1,BB);d2=this.replaceEntitiesValue(d2),g0+=d2}else g0+=this.buildTextValNode(BB,t1,"",OA)}this.options.oneListGroup&&(g0=this.buildObjectNode(g0,t1,DQ,OA)),H1+=g0}else if(this.options.attributesGroupName&&t1===this.options.attributesGroupName){let Q0=Object.keys(CA[t1]),g0=Q0.length;for(let DQ=0;DQ<g0;DQ++)w1+=this.buildAttrPairStr(Q0[DQ],""+CA[t1][Q0[DQ]])}else H1+=this.processTextOrObjNode(CA[t1],t1,OA,I1);return{attrStr:w1,val:H1}},$1.prototype.buildAttrPairStr=function(CA,OA){return OA=this.options.attributeValueProcessor(CA,""+OA),OA=this.replaceEntitiesValue(OA),this.options.suppressBooleanAttributes&&OA==="true"?" "+CA:" "+CA+'="'+OA+'"'},$1.prototype.buildObjectNode=function(CA,OA,I1,w1){if(CA==="")return OA[0]==="?"?this.indentate(w1)+"<"+OA+I1+"?"+this.tagEndChar:this.indentate(w1)+"<"+OA+I1+this.closeTag(OA)+this.tagEndChar;{let H1="</"+OA+this.tagEndChar,D1="";return OA[0]==="?"&&(D1="?",H1=""),!I1&&I1!==""||CA.indexOf("<")!==-1?this.options.commentPropName!==!1&&OA===this.options.commentPropName&&D1.length===0?this.indentate(w1)+`<!--${CA}-->`+this.newLine:this.indentate(w1)+"<"+OA+I1+D1+this.tagEndChar+CA+this.indentate(w1)+H1:this.indentate(w1)+"<"+OA+I1+D1+">"+CA+H1}},$1.prototype.closeTag=function(CA){let OA="";return this.options.unpairedTags.indexOf(CA)!==-1?this.options.suppressUnpairedNode||(OA="/"):OA=this.options.suppressEmptyNode?"/":`></${CA}`,OA},$1.prototype.buildTextValNode=function(CA,OA,I1,w1){if(this.options.cdataPropName!==!1&&OA===this.options.cdataPropName)return this.indentate(w1)+`<![CDATA[${CA}]]>`+this.newLine;if(this.options.commentPropName!==!1&&OA===this.options.commentPropName)return this.indentate(w1)+`<!--${CA}-->`+this.newLine;if(OA[0]==="?")return this.indentate(w1)+"<"+OA+I1+"?"+this.tagEndChar;{let H1=this.options.tagValueProcessor(OA,CA);return H1=this.replaceEntitiesValue(H1),H1===""?this.indentate(w1)+"<"+OA+I1+this.closeTag(OA)+this.tagEndChar:this.indentate(w1)+"<"+OA+I1+">"+H1+"</"+OA+this.tagEndChar}},$1.prototype.replaceEntitiesValue=function(CA){if(CA&&CA.length>0&&this.options.processEntities)for(let OA=0;OA<this.options.entities.length;OA++){let I1=this.options.entities[OA];CA=CA.replace(I1.regex,I1.val)}return CA};let l0={validate:X};MwQ.exports=Q})()});var jwQ=U((_wQ)=>{Object.defineProperty(_wQ,"__esModule",{value:!0});_wQ.parseXML=O06;var L06=RwQ(),Ex1=new L06.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(A,Q)=>Q.trim()===""&&Q.includes(`
`)?"":void 0});Ex1.addEntity("#xD","\r");Ex1.addEntity("#10",`
`);function O06(A){return Ex1.parse(A,!0)}});var Cx1=U((TwQ)=>{var R06=jwQ();function _06(A){return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function j06(A){return A.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class zx1{value;constructor(A){this.value=A}toString(){return j06(""+this.value)}}class INA{name;children;attributes={};static of(A,Q,B){let G=new INA(A);if(Q!==void 0)G.addChildNode(new zx1(Q));if(B!==void 0)G.withName(B);return G}constructor(A,Q=[]){this.name=A,this.children=Q}withName(A){return this.name=A,this}addAttribute(A,Q){return this.attributes[A]=Q,this}addChildNode(A){return this.children.push(A),this}removeAttribute(A){return delete this.attributes[A],this}n(A){return this.name=A,this}c(A){return this.children.push(A),this}a(A,Q){if(Q!=null)this.attributes[A]=Q;return this}cc(A,Q,B=Q){if(A[Q]!=null){let G=INA.of(Q,A[Q]).withName(B);this.c(G)}}l(A,Q,B,G){if(A[Q]!=null)G().map((Y)=>{Y.withName(B),this.c(Y)})}lc(A,Q,B,G){if(A[Q]!=null){let Z=G(),Y=new INA(B);Z.map((J)=>{Y.c(J)}),this.c(Y)}}toString(){let A=Boolean(this.children.length),Q=`<${this.name}`,B=this.attributes;for(let G of Object.keys(B)){let Z=B[G];if(Z!=null)Q+=` ${G}="${_06(""+Z)}"`}return Q+=!A?"/>":`>${this.children.map((G)=>G.toString()).join("")}</${this.name}>`}}Object.defineProperty(TwQ,"parseXML",{enumerable:!0,get:function(){return R06.parseXML}});TwQ.XmlNode=INA;TwQ.XmlText=zx1});var vY=U((s06)=>{var Ux1=XaA(),Ci=iG(),PwQ=TD(),S06=Wq(),SwQ=pS1(),xwQ=Gx1(),nG=IX(),_g=Kx1(),NH=Iq(),nV=Xq(),DNA=Hx1(),gwQ=lG(),kM=Cx1(),$x1={warningEmitted:!1},x06=(A)=>{if(A&&!$x1.warningEmitted&&parseInt(A.substring(1,A.indexOf(".")))<18)$x1.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`)};function y06(A,Q,B){if(!A.$source)A.$source={};return A.$source[Q]=B,A}function v06(A,Q,B){if(!A.__aws_sdk_context)A.__aws_sdk_context={features:{}};else if(!A.__aws_sdk_context.features)A.__aws_sdk_context.features={};A.__aws_sdk_context.features[Q]=B}function k06(A,Q,B){if(!A.$source)A.$source={};return A.$source[Q]=B,A}var ywQ=(A)=>Ux1.HttpResponse.isInstance(A)?A.headers?.date??A.headers?.Date:void 0,qx1=(A)=>new Date(Date.now()+A),b06=(A,Q)=>Math.abs(qx1(Q).getTime()-A)>=300000,vwQ=(A,Q)=>{let B=Date.parse(A);if(b06(B,Q))return B-Date.now();return Q},WNA=(A,Q)=>{if(!Q)throw Error(`Property \`${A}\` is not resolved for AWS SDK SigV4Auth`);return Q},Nx1=async(A)=>{let Q=WNA("context",A.context),B=WNA("config",A.config),G=Q.endpointV2?.properties?.authSchemes?.[0],Y=await WNA("signer",B.signer)(G),J=A?.signingRegion,X=A?.signingRegionSet,I=A?.signingName;return{config:B,signer:Y,signingRegion:J,signingRegionSet:X,signingName:I}};class qaA{async sign(A,Q,B){if(!Ux1.HttpRequest.isInstance(A))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let G=await Nx1(B),{config:Z,signer:Y}=G,{signingRegion:J,signingName:X}=G,I=B.context;if(I?.authSchemes?.length??!1){let[D,K]=I.authSchemes;if(D?.name==="sigv4a"&&K?.name==="sigv4")J=K?.signingRegion??J,X=K?.signingName??X}return await Y.sign(A,{signingDate:qx1(Z.systemClockOffset),signingRegion:J,signingService:X})}errorHandler(A){return(Q)=>{let B=Q.ServerTime??ywQ(Q.$response);if(B){let G=WNA("config",A.config),Z=G.systemClockOffset;if(G.systemClockOffset=vwQ(B,G.systemClockOffset),G.systemClockOffset!==Z&&Q.$metadata)Q.$metadata.clockSkewCorrected=!0}throw Q}}successHandler(A,Q){let B=ywQ(A);if(B){let G=WNA("config",Q.config);G.systemClockOffset=vwQ(B,G.systemClockOffset)}}}var f06=qaA;class uwQ extends qaA{async sign(A,Q,B){if(!Ux1.HttpRequest.isInstance(A))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:G,signer:Z,signingRegion:Y,signingRegionSet:J,signingName:X}=await Nx1(B),W=(await G.sigv4aSigningRegionSet?.()??J??[Y]).join(",");return await Z.sign(A,{signingDate:qx1(G.systemClockOffset),signingRegion:W,signingService:X})}}var kwQ=(A)=>typeof A==="string"&&A.length>0?A.split(",").map((Q)=>Q.trim()):[],mwQ=(A)=>`AWS_BEARER_TOKEN_${A.replace(/[\s-]/g,"_").toUpperCase()}`,bwQ="AWS_AUTH_SCHEME_PREFERENCE",fwQ="auth_scheme_preference",h06={environmentVariableSelector:(A,Q)=>{if(Q?.signingName){if(mwQ(Q.signingName)in A)return["httpBearerAuth"]}if(!(bwQ in A))return;return kwQ(A[bwQ])},configFileSelector:(A)=>{if(!(fwQ in A))return;return kwQ(A[fwQ])},default:[]},g06=(A)=>{return A.sigv4aSigningRegionSet=Ci.normalizeProvider(A.sigv4aSigningRegionSet),A},u06={environmentVariableSelector(A){if(A.AWS_SIGV4A_SIGNING_REGION_SET)return A.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map((Q)=>Q.trim());throw new PwQ.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(A){if(A.sigv4a_signing_region_set)return(A.sigv4a_signing_region_set??"").split(",").map((Q)=>Q.trim());throw new PwQ.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0},dwQ=(A)=>{let Q=A.credentials,B=!!A.credentials,G=void 0;Object.defineProperty(A,"credentials",{set(W){if(W&&W!==Q&&W!==G)B=!0;Q=W;let D=d06(A,{credentials:Q,credentialDefaultProvider:A.credentialDefaultProvider}),K=p06(A,D);if(B&&!K.attributed)G=async(V)=>K(V).then((F)=>S06.setCredentialFeature(F,"CREDENTIALS_CODE","e")),G.memoized=K.memoized,G.configBound=K.configBound,G.attributed=!0;else G=K},get(){return G},enumerable:!0,configurable:!0}),A.credentials=Q;let{signingEscapePath:Z=!0,systemClockOffset:Y=A.systemClockOffset||0,sha256:J}=A,X;if(A.signer)X=Ci.normalizeProvider(A.signer);else if(A.regionInfoProvider)X=()=>Ci.normalizeProvider(A.region)().then(async(W)=>[await A.regionInfoProvider(W,{useFipsEndpoint:await A.useFipsEndpoint(),useDualstackEndpoint:await A.useDualstackEndpoint()})||{},W]).then(([W,D])=>{let{signingRegion:K,signingService:V}=W;A.signingRegion=A.signingRegion||K||D,A.signingName=A.signingName||V||A.serviceId;let F={...A,credentials:A.credentials,region:A.signingRegion,service:A.signingName,sha256:J,uriEscapePath:Z};return new(A.signerConstructor||SwQ.SignatureV4)(F)});else X=async(W)=>{W=Object.assign({},{name:"sigv4",signingName:A.signingName||A.defaultSigningName,signingRegion:await Ci.normalizeProvider(A.region)(),properties:{}},W);let{signingRegion:D,signingName:K}=W;A.signingRegion=A.signingRegion||D,A.signingName=A.signingName||K||A.serviceId;let V={...A,credentials:A.credentials,region:A.signingRegion,service:A.signingName,sha256:J,uriEscapePath:Z};return new(A.signerConstructor||SwQ.SignatureV4)(V)};return Object.assign(A,{systemClockOffset:Y,signingEscapePath:Z,signer:X})},m06=dwQ;function d06(A,{credentials:Q,credentialDefaultProvider:B}){let G;if(Q)if(!Q?.memoized)G=Ci.memoizeIdentityProvider(Q,Ci.isIdentityExpired,Ci.doesIdentityRequireRefresh);else G=Q;else if(B)G=Ci.normalizeProvider(B(Object.assign({},A,{parentClientConfig:A})));else G=async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")};return G.memoized=!0,G}function p06(A,Q){if(Q.configBound)return Q;let B=async(G)=>Q({...G,callerClientConfig:A});return B.memoized=Q.memoized,B.configBound=!0,B}class NZA{queryCompat;constructor(A=!1){this.queryCompat=A}resolveRestContentType(A,Q){let B=Q.getMemberSchemas(),G=Object.values(B).find((Z)=>{return!!Z.getMergedTraits().httpPayload});if(G){let Z=G.getMergedTraits().mediaType;if(Z)return Z;else if(G.isStringSchema())return"text/plain";else if(G.isBlobSchema())return"application/octet-stream";else return A}else if(!Q.isUnitSchema()){if(Object.values(B).find((Y)=>{let{httpQuery:J,httpQueryParams:X,httpHeader:I,httpLabel:W,httpPrefixHeaders:D}=Y.getMergedTraits();return!J&&!X&&!I&&!W&&D===void 0}))return A}}async getErrorSchemaOrThrowBaseException(A,Q,B,G,Z,Y){let J=Q,X=A;if(A.includes("#"))[J,X]=A.split("#");let I={$metadata:Z,$fault:B.statusCode<500?"client":"server"},W=nG.TypeRegistry.for(J);try{return{errorSchema:Y?.(W,X)??W.getSchema(A),errorMetadata:I}}catch(D){G.message=G.message??G.Message??"UnknownError";let K=nG.TypeRegistry.for("smithy.ts.sdk.synthetic."+J),V=K.getBaseException();if(V){let F=K.getErrorCtor(V)??Error;throw this.decorateServiceException(Object.assign(new F({name:X}),I),G)}throw this.decorateServiceException(Object.assign(Error(X),I),G)}}decorateServiceException(A,Q={}){if(this.queryCompat){let B=A.Message??Q.Message,G=_g.decorateServiceException(A,Q);if(B)G.Message=B,G.message=B;return G}return _g.decorateServiceException(A,Q)}setQueryCompatError(A,Q){let B=Q.headers?.["x-amzn-query-error"];if(A!==void 0&&B!=null){let[G,Z]=B.split(";"),Y=Object.entries(A),J={Code:G,Type:Z};Object.assign(A,J);for(let[X,I]of Y)J[X]=I;delete J.__type,A.Error=J}}queryCompatOutput(A,Q){if(A.Error)Q.Error=A.Error;if(A.Type)Q.Type=A.Type;if(A.Code)Q.Code=A.Code}}class pwQ extends xwQ.SmithyRpcV2CborProtocol{awsQueryCompatible;mixin;constructor({defaultNamespace:A,awsQueryCompatible:Q}){super({defaultNamespace:A});this.awsQueryCompatible=!!Q,this.mixin=new NZA(this.awsQueryCompatible)}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(this.awsQueryCompatible)G.headers["x-amzn-query-mode"]="true";return G}async handleError(A,Q,B,G,Z){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(G,B);let Y=xwQ.loadSmithyRpcV2CborErrorCode(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=nG.NormalizedSchema.of(J),W=G.message??G.Message??"Unknown",K=new(nG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W),V={};for(let[F,H]of I.structIterator())V[F]=this.deserializer.readValue(H,G[F]);if(this.awsQueryCompatible)this.mixin.queryCompatOutput(G,V);throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}}var c06=(A)=>{if(A==null)return A;if(typeof A==="number"||typeof A==="bigint"){let Q=Error(`Received number ${A} where a string was expected.`);return Q.name="Warning",console.warn(Q),String(A)}if(typeof A==="boolean"){let Q=Error(`Received boolean ${A} where a string was expected.`);return Q.name="Warning",console.warn(Q),String(A)}return A},l06=(A)=>{if(A==null)return A;if(typeof A==="string"){let Q=A.toLowerCase();if(A!==""&&Q!=="false"&&Q!=="true"){let B=Error(`Received string "${A}" where a boolean was expected.`);B.name="Warning",console.warn(B)}return A!==""&&Q!=="false"}return A},i06=(A)=>{if(A==null)return A;if(typeof A==="string"){let Q=Number(A);if(Q.toString()!==A){let B=Error(`Received string "${A}" where a number was expected.`);return B.name="Warning",console.warn(B),A}return Q}return A};class $i{serdeContext;setSerdeContext(A){this.serdeContext=A}}function n06(A,Q,B){if(B?.source){let G=B.source;if(typeof Q==="number"){if(Q>Number.MAX_SAFE_INTEGER||Q<Number.MIN_SAFE_INTEGER||G!==String(Q))if(G.includes("."))return new nV.NumericValue(G,"bigDecimal");else return BigInt(G)}}return Q}var cwQ=(A,Q)=>_g.collectBody(A,Q).then((B)=>(Q?.utf8Encoder??gwQ.toUtf8)(B)),wx1=(A,Q)=>cwQ(A,Q).then((B)=>{if(B.length)try{return JSON.parse(B)}catch(G){if(G?.name==="SyntaxError")Object.defineProperty(G,"$responseBodyText",{value:B});throw G}return{}}),a06=async(A,Q)=>{let B=await wx1(A,Q);return B.message=B.message??B.Message,B},Lx1=(A,Q)=>{let B=(Y,J)=>Object.keys(Y).find((X)=>X.toLowerCase()===J.toLowerCase()),G=(Y)=>{let J=Y;if(typeof J==="number")J=J.toString();if(J.indexOf(",")>=0)J=J.split(",")[0];if(J.indexOf(":")>=0)J=J.split(":")[0];if(J.indexOf("#")>=0)J=J.split("#")[1];return J},Z=B(A.headers,"x-amzn-errortype");if(Z!==void 0)return G(A.headers[Z]);if(Q&&typeof Q==="object"){let Y=B(Q,"code");if(Y&&Q[Y]!==void 0)return G(Q[Y]);if(Q.__type!==void 0)return G(Q.__type)}};class Ox1 extends $i{settings;constructor(A){super();this.settings=A}async read(A,Q){return this._read(A,typeof Q==="string"?JSON.parse(Q,n06):await wx1(Q,this.serdeContext))}readObject(A,Q){return this._read(A,Q)}_read(A,Q){let B=Q!==null&&typeof Q==="object",G=nG.NormalizedSchema.of(A);if(G.isListSchema()&&Array.isArray(Q)){let Y=G.getValueSchema(),J=[],X=!!G.getMergedTraits().sparse;for(let I of Q)if(X||I!=null)J.push(this._read(Y,I));return J}else if(G.isMapSchema()&&B){let Y=G.getValueSchema(),J={},X=!!G.getMergedTraits().sparse;for(let[I,W]of Object.entries(Q))if(X||W!=null)J[I]=this._read(Y,W);return J}else if(G.isStructSchema()&&B){let Y={};for(let[J,X]of G.structIterator()){let I=this.settings.jsonName?X.getMergedTraits().jsonName??J:J,W=this._read(X,Q[I]);if(W!=null)Y[J]=W}return Y}if(G.isBlobSchema()&&typeof Q==="string")return DNA.fromBase64(Q);let Z=G.getMergedTraits().mediaType;if(G.isStringSchema()&&typeof Q==="string"&&Z){if(Z==="application/json"||Z.endsWith("+json"))return nV.LazyJsonString.from(Q)}if(G.isTimestampSchema()&&Q!=null)switch(NH.determineTimestampFormat(G,this.settings)){case 5:return nV.parseRfc3339DateTimeWithOffset(Q);case 6:return nV.parseRfc7231DateTime(Q);case 7:return nV.parseEpochTimestamp(Q);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",Q),new Date(Q)}if(G.isBigIntegerSchema()&&(typeof Q==="number"||typeof Q==="string"))return BigInt(Q);if(G.isBigDecimalSchema()&&Q!=null){if(Q instanceof nV.NumericValue)return Q;let Y=Q;if(Y.type==="bigDecimal"&&"string"in Y)return new nV.NumericValue(Y.string,Y.type);return new nV.NumericValue(String(Q),"bigDecimal")}if(G.isNumericSchema()&&typeof Q==="string")switch(Q){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(G.isDocumentSchema())if(B){let Y=Array.isArray(Q)?[]:{};for(let[J,X]of Object.entries(Q))if(X instanceof nV.NumericValue)Y[J]=X;else Y[J]=this._read(G,X);return Y}else return structuredClone(Q);return Q}}var hwQ=String.fromCharCode(925);class lwQ{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(A,Q)=>{if(Q instanceof nV.NumericValue){let B=`${hwQ+"nv"+this.counter++}_`+Q.string;return this.values.set(`"${B}"`,Q.string),B}if(typeof Q==="bigint"){let B=Q.toString(),G=`${hwQ+"b"+this.counter++}_`+B;return this.values.set(`"${G}"`,B),G}return Q}}replaceInJson(A){if(this.stage===0)throw Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return A;for(let[Q,B]of this.values)A=A.replace(Q,B);return A}}class Mx1 extends $i{settings;buffer;rootSchema;constructor(A){super();this.settings=A}write(A,Q){this.rootSchema=nG.NormalizedSchema.of(A),this.buffer=this._write(this.rootSchema,Q)}writeDiscriminatedDocument(A,Q){if(this.write(A,Q),typeof this.buffer==="object")this.buffer.__type=nG.NormalizedSchema.of(A).getName(!0)}flush(){let{rootSchema:A}=this;if(this.rootSchema=void 0,A?.isStructSchema()||A?.isDocumentSchema()){let Q=new lwQ;return Q.replaceInJson(JSON.stringify(this.buffer,Q.createReplacer(),0))}return this.buffer}_write(A,Q,B){let G=Q!==null&&typeof Q==="object",Z=nG.NormalizedSchema.of(A);if(Z.isListSchema()&&Array.isArray(Q)){let Y=Z.getValueSchema(),J=[],X=!!Z.getMergedTraits().sparse;for(let I of Q)if(X||I!=null)J.push(this._write(Y,I));return J}else if(Z.isMapSchema()&&G){let Y=Z.getValueSchema(),J={},X=!!Z.getMergedTraits().sparse;for(let[I,W]of Object.entries(Q))if(X||W!=null)J[I]=this._write(Y,W);return J}else if(Z.isStructSchema()&&G){let Y={};for(let[J,X]of Z.structIterator()){let I=this.settings.jsonName?X.getMergedTraits().jsonName??J:J,W=this._write(X,Q[J],Z);if(W!==void 0)Y[I]=W}return Y}if(Q===null&&B?.isStructSchema())return;if(Z.isBlobSchema()&&(Q instanceof Uint8Array||typeof Q==="string")||Z.isDocumentSchema()&&Q instanceof Uint8Array){if(Z===this.rootSchema)return Q;return(this.serdeContext?.base64Encoder??DNA.toBase64)(Q)}if((Z.isTimestampSchema()||Z.isDocumentSchema())&&Q instanceof Date)switch(NH.determineTimestampFormat(Z,this.settings)){case 5:return Q.toISOString().replace(".000Z","Z");case 6:return nV.dateToUtcString(Q);case 7:return Q.getTime()/1000;default:return console.warn("Missing timestamp format, using epoch seconds",Q),Q.getTime()/1000}if(Z.isNumericSchema()&&typeof Q==="number"){if(Math.abs(Q)===1/0||isNaN(Q))return String(Q)}if(Z.isStringSchema()){if(typeof Q>"u"&&Z.isIdempotencyToken())return nV.generateIdempotencyToken();let Y=Z.getMergedTraits().mediaType;if(Q!=null&&Y){if(Y==="application/json"||Y.endsWith("+json"))return nV.LazyJsonString.from(Q)}}if(Z.isDocumentSchema())if(G){let Y=Array.isArray(Q)?[]:{};for(let[J,X]of Object.entries(Q))if(X instanceof nV.NumericValue)Y[J]=X;else Y[J]=this._write(Z,X);return Y}else return structuredClone(Q);return Q}}class NaA extends $i{settings;constructor(A){super();this.settings=A}createSerializer(){let A=new Mx1(this.settings);return A.setSerdeContext(this.serdeContext),A}createDeserializer(){let A=new Ox1(this.settings);return A.setSerdeContext(this.serdeContext),A}}class waA extends NH.RpcProtocol{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B}){super({defaultNamespace:A});this.serviceTarget=Q,this.codec=new NaA({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!B,this.mixin=new NZA(this.awsQueryCompatible)}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(!G.path.endsWith("/"))G.path+="/";if(Object.assign(G.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${A.name}`}),this.awsQueryCompatible)G.headers["x-amzn-query-mode"]="true";if(nG.deref(A.input)==="unit"||!G.body)G.body="{}";return G}getPayloadCodec(){return this.codec}async handleError(A,Q,B,G,Z){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(G,B);let Y=Lx1(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=nG.NormalizedSchema.of(J),W=G.message??G.Message??"Unknown",K=new(nG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W),V={};for(let[F,H]of I.structIterator()){let E=H.getMergedTraits().jsonName??F;V[F]=this.codec.createDeserializer().readObject(H,G[E])}if(this.awsQueryCompatible)this.mixin.queryCompatOutput(G,V);throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}}class iwQ extends waA{constructor({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B}){super({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}class nwQ extends waA{constructor({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B}){super({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}class awQ extends NH.HttpBindingProtocol{serializer;deserializer;codec;mixin=new NZA;constructor({defaultNamespace:A}){super({defaultNamespace:A});let Q={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new NaA(Q),this.serializer=new NH.HttpInterceptingShapeSerializer(this.codec.createSerializer(),Q),this.deserializer=new NH.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),Q)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(A){this.codec.setSerdeContext(A),super.setSerdeContext(A)}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B),Z=nG.NormalizedSchema.of(A.input);if(!G.headers["content-type"]){let Y=this.mixin.resolveRestContentType(this.getDefaultContentType(),Z);if(Y)G.headers["content-type"]=Y}if(G.body==null&&G.headers["content-type"]===this.getDefaultContentType())G.body="{}";return G}async deserializeResponse(A,Q,B){let G=await super.deserializeResponse(A,Q,B),Z=nG.NormalizedSchema.of(A.output);for(let[Y,J]of Z.structIterator())if(J.getMemberTraits().httpPayload&&!(Y in G))G[Y]=null;return G}async handleError(A,Q,B,G,Z){let Y=Lx1(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=nG.NormalizedSchema.of(J),W=G.message??G.Message??"Unknown",K=new(nG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W);await this.deserializeHttpMessage(J,Q,B,G);let V={};for(let[F,H]of I.structIterator()){let E=H.getMergedTraits().jsonName??F;V[F]=this.codec.createDeserializer().readObject(H,G[E])}throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}getDefaultContentType(){return"application/json"}}var o06=(A)=>{if(A==null)return;if(typeof A==="object"&&"__type"in A)delete A.__type;return _g.expectUnion(A)};class LaA extends $i{settings;stringDeserializer;constructor(A){super();this.settings=A,this.stringDeserializer=new NH.FromStringShapeDeserializer(A)}setSerdeContext(A){this.serdeContext=A,this.stringDeserializer.setSerdeContext(A)}read(A,Q,B){let G=nG.NormalizedSchema.of(A),Z=G.getMemberSchemas();if(G.isStructSchema()&&G.isMemberSchema()&&!!Object.values(Z).find((I)=>{return!!I.getMemberTraits().eventPayload})){let I={},W=Object.keys(Z)[0];if(Z[W].isBlobSchema())I[W]=Q;else I[W]=this.read(Z[W],Q);return I}let J=(this.serdeContext?.utf8Encoder??gwQ.toUtf8)(Q),X=this.parseXml(J);return this.readSchema(A,B?X[B]:X)}readSchema(A,Q){let B=nG.NormalizedSchema.of(A);if(B.isUnitSchema())return;let G=B.getMergedTraits();if(B.isListSchema()&&!Array.isArray(Q))return this.readSchema(B,[Q]);if(Q==null)return Q;if(typeof Q==="object"){let Z=!!G.sparse,Y=!!G.xmlFlattened;if(B.isListSchema()){let X=B.getValueSchema(),I=[],W=X.getMergedTraits().xmlName??"member",D=Y?Q:(Q[0]??Q)[W],K=Array.isArray(D)?D:[D];for(let V of K)if(V!=null||Z)I.push(this.readSchema(X,V));return I}let J={};if(B.isMapSchema()){let X=B.getKeySchema(),I=B.getValueSchema(),W;if(Y)W=Array.isArray(Q)?Q:[Q];else W=Array.isArray(Q.entry)?Q.entry:[Q.entry];let D=X.getMergedTraits().xmlName??"key",K=I.getMergedTraits().xmlName??"value";for(let V of W){let F=V[D],H=V[K];if(H!=null||Z)J[F]=this.readSchema(I,H)}return J}if(B.isStructSchema()){for(let[X,I]of B.structIterator()){let W=I.getMergedTraits(),D=!W.httpPayload?I.getMemberTraits().xmlName??X:W.xmlName??I.getName();if(Q[D]!=null)J[X]=this.readSchema(I,Q[D])}return J}if(B.isDocumentSchema())return Q;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${B.getName(!0)}`)}if(B.isListSchema())return[];if(B.isMapSchema()||B.isStructSchema())return{};return this.stringDeserializer.read(B,Q)}parseXml(A){if(A.length){let Q;try{Q=kM.parseXML(A)}catch(Y){if(Y&&typeof Y==="object")Object.defineProperty(Y,"$responseBodyText",{value:A});throw Y}let B="#text",G=Object.keys(Q)[0],Z=Q[G];if(Z[B])Z[G]=Z[B],delete Z[B];return _g.getValueFromTextNode(Z)}return{}}}class owQ extends $i{settings;buffer;constructor(A){super();this.settings=A}write(A,Q,B=""){if(this.buffer===void 0)this.buffer="";let G=nG.NormalizedSchema.of(A);if(B&&!B.endsWith("."))B+=".";if(G.isBlobSchema()){if(typeof Q==="string"||Q instanceof Uint8Array)this.writeKey(B),this.writeValue((this.serdeContext?.base64Encoder??DNA.toBase64)(Q))}else if(G.isBooleanSchema()||G.isNumericSchema()||G.isStringSchema()){if(Q!=null)this.writeKey(B),this.writeValue(String(Q));else if(G.isIdempotencyToken())this.writeKey(B),this.writeValue(nV.generateIdempotencyToken())}else if(G.isBigIntegerSchema()){if(Q!=null)this.writeKey(B),this.writeValue(String(Q))}else if(G.isBigDecimalSchema()){if(Q!=null)this.writeKey(B),this.writeValue(Q instanceof nV.NumericValue?Q.string:String(Q))}else if(G.isTimestampSchema()){if(Q instanceof Date)switch(this.writeKey(B),NH.determineTimestampFormat(G,this.settings)){case 5:this.writeValue(Q.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(_g.dateToUtcString(Q));break;case 7:this.writeValue(String(Q.getTime()/1000));break}}else if(G.isDocumentSchema())throw Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${G.getName(!0)}`);else if(G.isListSchema()){if(Array.isArray(Q))if(Q.length===0){if(this.settings.serializeEmptyLists)this.writeKey(B),this.writeValue("")}else{let Z=G.getValueSchema(),Y=this.settings.flattenLists||G.getMergedTraits().xmlFlattened,J=1;for(let X of Q){if(X==null)continue;let I=this.getKey("member",Z.getMergedTraits().xmlName),W=Y?`${B}${J}`:`${B}${I}.${J}`;this.write(Z,X,W),++J}}}else if(G.isMapSchema()){if(Q&&typeof Q==="object"){let Z=G.getKeySchema(),Y=G.getValueSchema(),J=G.getMergedTraits().xmlFlattened,X=1;for(let[I,W]of Object.entries(Q)){if(W==null)continue;let D=this.getKey("key",Z.getMergedTraits().xmlName),K=J?`${B}${X}.${D}`:`${B}entry.${X}.${D}`,V=this.getKey("value",Y.getMergedTraits().xmlName),F=J?`${B}${X}.${V}`:`${B}entry.${X}.${V}`;this.write(Z,I,K),this.write(Y,W,F),++X}}}else if(G.isStructSchema()){if(Q&&typeof Q==="object")for(let[Z,Y]of G.structIterator()){if(Q[Z]==null&&!Y.isIdempotencyToken())continue;let J=this.getKey(Z,Y.getMergedTraits().xmlName),X=`${B}${J}`;this.write(Y,Q[Z],X)}}else if(G.isUnitSchema());else throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${G.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let A=this.buffer;return delete this.buffer,A}getKey(A,Q){let B=Q??A;if(this.settings.capitalizeKeys)return B[0].toUpperCase()+B.slice(1);return B}writeKey(A){if(A.endsWith("."))A=A.slice(0,A.length-1);this.buffer+=`&${NH.extendedEncodeURIComponent(A)}=`}writeValue(A){this.buffer+=NH.extendedEncodeURIComponent(A)}}class Rx1 extends NH.RpcProtocol{options;serializer;deserializer;mixin=new NZA;constructor(A){super({defaultNamespace:A.defaultNamespace});this.options=A;let Q={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:A.xmlNamespace,serviceNamespace:A.defaultNamespace,serializeEmptyLists:!0};this.serializer=new owQ(Q),this.deserializer=new LaA(Q)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(A){this.serializer.setSerdeContext(A),this.deserializer.setSerdeContext(A)}getPayloadCodec(){throw Error("AWSQuery protocol has no payload codec.")}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(!G.path.endsWith("/"))G.path+="/";if(Object.assign(G.headers,{"content-type":"application/x-www-form-urlencoded"}),nG.deref(A.input)==="unit"||!G.body)G.body="";let Z=A.name.split("#")[1]??A.name;if(G.body=`Action=${Z}&Version=${this.options.version}`+G.body,G.body.endsWith("&"))G.body=G.body.slice(-1);return G}async deserializeResponse(A,Q,B){let G=this.deserializer,Z=nG.NormalizedSchema.of(A.output),Y={};if(B.statusCode>=300){let D=await NH.collectBody(B.body,Q);if(D.byteLength>0)Object.assign(Y,await G.read(15,D));await this.handleError(A,Q,B,Y,this.deserializeMetadata(B))}for(let D in B.headers){let K=B.headers[D];delete B.headers[D],B.headers[D.toLowerCase()]=K}let J=A.name.split("#")[1]??A.name,X=Z.isStructSchema()&&this.useNestedResult()?J+"Result":void 0,I=await NH.collectBody(B.body,Q);if(I.byteLength>0)Object.assign(Y,await G.read(Z,I,X));return{$metadata:this.deserializeMetadata(B),...Y}}useNestedResult(){return!0}async handleError(A,Q,B,G,Z){let Y=this.loadQueryErrorCode(B,G)??"Unknown",J=this.loadQueryError(G),X=this.loadQueryErrorMessage(G);J.message=X,J.Error={Type:J.Type,Code:J.Code,Message:X};let{errorSchema:I,errorMetadata:W}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,J,Z,(H,E)=>{try{return H.getSchema(E)}catch(z){return H.find((C)=>nG.NormalizedSchema.of(C).getMergedTraits().awsQueryError?.[0]===E)}}),D=nG.NormalizedSchema.of(I),V=new(nG.TypeRegistry.for(I[1]).getErrorCtor(I)??Error)(X),F={Error:J.Error};for(let[H,E]of D.structIterator()){let z=E.getMergedTraits().xmlName??H,C=J[z]??G[z];F[H]=this.deserializer.readSchema(E,C)}throw this.mixin.decorateServiceException(Object.assign(V,W,{$fault:D.getMergedTraits().error,message:X},F),G)}loadQueryErrorCode(A,Q){let B=(Q.Errors?.[0]?.Error??Q.Errors?.Error??Q.Error)?.Code;if(B!==void 0)return B;if(A.statusCode==404)return"NotFound"}loadQueryError(A){return A.Errors?.[0]?.Error??A.Errors?.Error??A.Error}loadQueryErrorMessage(A){let Q=this.loadQueryError(A);return Q?.message??Q?.Message??A.message??A.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}class rwQ extends Rx1{options;constructor(A){super(A);this.options=A;let Q={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,Q)}useNestedResult(){return!1}}var swQ=(A,Q)=>cwQ(A,Q).then((B)=>{if(B.length){let G;try{G=kM.parseXML(B)}catch(X){if(X&&typeof X==="object")Object.defineProperty(X,"$responseBodyText",{value:B});throw X}let Z="#text",Y=Object.keys(G)[0],J=G[Y];if(J[Z])J[Y]=J[Z],delete J[Z];return _g.getValueFromTextNode(J)}return{}}),r06=async(A,Q)=>{let B=await swQ(A,Q);if(B.Error)B.Error.message=B.Error.message??B.Error.Message;return B},twQ=(A,Q)=>{if(Q?.Error?.Code!==void 0)return Q.Error.Code;if(Q?.Code!==void 0)return Q.Code;if(A.statusCode==404)return"NotFound"};class _x1 extends $i{settings;stringBuffer;byteBuffer;buffer;constructor(A){super();this.settings=A}write(A,Q){let B=nG.NormalizedSchema.of(A);if(B.isStringSchema()&&typeof Q==="string")this.stringBuffer=Q;else if(B.isBlobSchema())this.byteBuffer="byteLength"in Q?Q:(this.serdeContext?.base64Decoder??DNA.fromBase64)(Q);else{this.buffer=this.writeStruct(B,Q,void 0);let G=B.getMergedTraits();if(G.httpPayload&&!G.xmlName)this.buffer.withName(B.getName())}}flush(){if(this.byteBuffer!==void 0){let Q=this.byteBuffer;return delete this.byteBuffer,Q}if(this.stringBuffer!==void 0){let Q=this.stringBuffer;return delete this.stringBuffer,Q}let A=this.buffer;if(this.settings.xmlNamespace){if(!A?.attributes?.xmlns)A.addAttribute("xmlns",this.settings.xmlNamespace)}return delete this.buffer,A.toString()}writeStruct(A,Q,B){let G=A.getMergedTraits(),Z=A.isMemberSchema()&&!G.httpPayload?A.getMemberTraits().xmlName??A.getMemberName():G.xmlName??A.getName();if(!Z||!A.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${A.getName(!0)}.`);let Y=kM.XmlNode.of(Z),[J,X]=this.getXmlnsAttribute(A,B);for(let[I,W]of A.structIterator()){let D=Q[I];if(D!=null||W.isIdempotencyToken()){if(W.getMergedTraits().xmlAttribute){Y.addAttribute(W.getMergedTraits().xmlName??I,this.writeSimple(W,D));continue}if(W.isListSchema())this.writeList(W,D,Y,X);else if(W.isMapSchema())this.writeMap(W,D,Y,X);else if(W.isStructSchema())Y.addChildNode(this.writeStruct(W,D,X));else{let K=kM.XmlNode.of(W.getMergedTraits().xmlName??W.getMemberName());this.writeSimpleInto(W,D,K,X),Y.addChildNode(K)}}}if(X)Y.addAttribute(J,X);return Y}writeList(A,Q,B,G){if(!A.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${A.getName(!0)}`);let Z=A.getMergedTraits(),Y=A.getValueSchema(),J=Y.getMergedTraits(),X=!!J.sparse,I=!!Z.xmlFlattened,[W,D]=this.getXmlnsAttribute(A,G),K=(V,F)=>{if(Y.isListSchema())this.writeList(Y,Array.isArray(F)?F:[F],V,D);else if(Y.isMapSchema())this.writeMap(Y,F,V,D);else if(Y.isStructSchema()){let H=this.writeStruct(Y,F,D);V.addChildNode(H.withName(I?Z.xmlName??A.getMemberName():J.xmlName??"member"))}else{let H=kM.XmlNode.of(I?Z.xmlName??A.getMemberName():J.xmlName??"member");this.writeSimpleInto(Y,F,H,D),V.addChildNode(H)}};if(I){for(let V of Q)if(X||V!=null)K(B,V)}else{let V=kM.XmlNode.of(Z.xmlName??A.getMemberName());if(D)V.addAttribute(W,D);for(let F of Q)if(X||F!=null)K(V,F);B.addChildNode(V)}}writeMap(A,Q,B,G,Z=!1){if(!A.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${A.getName(!0)}`);let Y=A.getMergedTraits(),J=A.getKeySchema(),I=J.getMergedTraits().xmlName??"key",W=A.getValueSchema(),D=W.getMergedTraits(),K=D.xmlName??"value",V=!!D.sparse,F=!!Y.xmlFlattened,[H,E]=this.getXmlnsAttribute(A,G),z=(C,O,L)=>{let M=kM.XmlNode.of(I,O),[_,j]=this.getXmlnsAttribute(J,E);if(j)M.addAttribute(_,j);C.addChildNode(M);let P=kM.XmlNode.of(K);if(W.isListSchema())this.writeList(W,L,P,E);else if(W.isMapSchema())this.writeMap(W,L,P,E,!0);else if(W.isStructSchema())P=this.writeStruct(W,L,E);else this.writeSimpleInto(W,L,P,E);C.addChildNode(P)};if(F){for(let[C,O]of Object.entries(Q))if(V||O!=null){let L=kM.XmlNode.of(Y.xmlName??A.getMemberName());z(L,C,O),B.addChildNode(L)}}else{let C;if(!Z){if(C=kM.XmlNode.of(Y.xmlName??A.getMemberName()),E)C.addAttribute(H,E);B.addChildNode(C)}for(let[O,L]of Object.entries(Q))if(V||L!=null){let M=kM.XmlNode.of("entry");z(M,O,L),(Z?B:C).addChildNode(M)}}}writeSimple(A,Q){if(Q===null)throw Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let B=nG.NormalizedSchema.of(A),G=null;if(Q&&typeof Q==="object")if(B.isBlobSchema())G=(this.serdeContext?.base64Encoder??DNA.toBase64)(Q);else if(B.isTimestampSchema()&&Q instanceof Date)switch(NH.determineTimestampFormat(B,this.settings)){case 5:G=Q.toISOString().replace(".000Z","Z");break;case 6:G=_g.dateToUtcString(Q);break;case 7:G=String(Q.getTime()/1000);break;default:console.warn("Missing timestamp format, using http date",Q),G=_g.dateToUtcString(Q);break}else if(B.isBigDecimalSchema()&&Q){if(Q instanceof nV.NumericValue)return Q.string;return String(Q)}else if(B.isMapSchema()||B.isListSchema())throw Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.");else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${B.getName(!0)}`);if(B.isBooleanSchema()||B.isNumericSchema()||B.isBigIntegerSchema()||B.isBigDecimalSchema())G=String(Q);if(B.isStringSchema())if(Q===void 0&&B.isIdempotencyToken())G=nV.generateIdempotencyToken();else G=String(Q);if(G===null)throw Error(`Unhandled schema-value pair ${B.getName(!0)}=${Q}`);return G}writeSimpleInto(A,Q,B,G){let Z=this.writeSimple(A,Q),Y=nG.NormalizedSchema.of(A),J=new kM.XmlText(Z),[X,I]=this.getXmlnsAttribute(Y,G);if(I)B.addAttribute(X,I);B.addChildNode(J)}getXmlnsAttribute(A,Q){let B=A.getMergedTraits(),[G,Z]=B.xmlNamespace??[];if(Z&&Z!==Q)return[G?`xmlns:${G}`:"xmlns",Z];return[void 0,void 0]}}class jx1 extends $i{settings;constructor(A){super();this.settings=A}createSerializer(){let A=new _x1(this.settings);return A.setSerdeContext(this.serdeContext),A}createDeserializer(){let A=new LaA(this.settings);return A.setSerdeContext(this.serdeContext),A}}class ewQ extends NH.HttpBindingProtocol{codec;serializer;deserializer;mixin=new NZA;constructor(A){super(A);let Q={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:A.xmlNamespace,serviceNamespace:A.defaultNamespace};this.codec=new jx1(Q),this.serializer=new NH.HttpInterceptingShapeSerializer(this.codec.createSerializer(),Q),this.deserializer=new NH.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),Q)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B),Z=nG.NormalizedSchema.of(A.input);if(!G.headers["content-type"]){let Y=this.mixin.resolveRestContentType(this.getDefaultContentType(),Z);if(Y)G.headers["content-type"]=Y}if(G.headers["content-type"]===this.getDefaultContentType()){if(typeof G.body==="string")G.body='<?xml version="1.0" encoding="UTF-8"?>'+G.body}return G}async deserializeResponse(A,Q,B){return super.deserializeResponse(A,Q,B)}async handleError(A,Q,B,G,Z){let Y=twQ(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=nG.NormalizedSchema.of(J),W=G.Error?.message??G.Error?.Message??G.message??G.Message??"Unknown",K=new(nG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W);await this.deserializeHttpMessage(J,Q,B,G);let V={};for(let[F,H]of I.structIterator()){let E=H.getMergedTraits().xmlName??F,z=G.Error?.[E]??G[E];V[F]=this.codec.createDeserializer().readSchema(H,z)}throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}getDefaultContentType(){return"application/xml"}}s06.AWSSDKSigV4Signer=f06;s06.AwsEc2QueryProtocol=rwQ;s06.AwsJson1_0Protocol=iwQ;s06.AwsJson1_1Protocol=nwQ;s06.AwsJsonRpcProtocol=waA;s06.AwsQueryProtocol=Rx1;s06.AwsRestJsonProtocol=awQ;s06.AwsRestXmlProtocol=ewQ;s06.AwsSdkSigV4ASigner=uwQ;s06.AwsSdkSigV4Signer=qaA;s06.AwsSmithyRpcV2CborProtocol=pwQ;s06.JsonCodec=NaA;s06.JsonShapeDeserializer=Ox1;s06.JsonShapeSerializer=Mx1;s06.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS=h06;s06.NODE_SIGV4A_CONFIG_OPTIONS=u06;s06.XmlCodec=jx1;s06.XmlShapeDeserializer=LaA;s06.XmlShapeSerializer=_x1;s06._toBool=l06;s06._toNum=i06;s06._toStr=c06;s06.awsExpectUnion=o06;s06.emitWarningIfUnsupportedVersion=x06;s06.getBearerTokenEnvKey=mwQ;s06.loadRestJsonErrorCode=Lx1;s06.loadRestXmlErrorCode=twQ;s06.parseJsonBody=wx1;s06.parseJsonErrorBody=a06;s06.parseXmlBody=swQ;s06.parseXmlErrorBody=r06;s06.resolveAWSSDKSigV4Config=m06;s06.resolveAwsSdkSigV4AConfig=g06;s06.resolveAwsSdkSigV4Config=dwQ;s06.setCredentialFeature=y06;s06.setFeature=v06;s06.setTokenFeature=k06;s06.state=$x1;s06.validateSigningProperties=Nx1});var Zv=U((oQ6)=>{var fQ6=iG(),hQ6=Qv(),gQ6=XNQ(),Gv=vY(),GLQ=void 0;function uQ6(A){if(A===void 0)return!0;return typeof A==="string"&&A.length<=50}function mQ6(A){let Q=fQ6.normalizeProvider(A.userAgentAppId??GLQ),{customUserAgent:B}=A;return Object.assign(A,{customUserAgent:typeof B==="string"?[[B]]:B,userAgentAppId:async()=>{let G=await Q();if(!uQ6(G)){let Z=A.logger?.constructor?.name==="NoOpLogger"||!A.logger?console:A.logger;if(typeof G!=="string")Z?.warn("userAgentAppId must be a string or undefined.");else if(G.length>50)Z?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return G}})}var dQ6=/\d{12}\.ddb/;async function pQ6(A,Q,B){if(B.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor")Gv.setFeature(A,"PROTOCOL_RPC_V2_CBOR","M");if(typeof Q.retryStrategy==="function"){let Y=await Q.retryStrategy();if(typeof Y.acquireInitialRetryToken==="function")if(Y.constructor?.name?.includes("Adaptive"))Gv.setFeature(A,"RETRY_MODE_ADAPTIVE","F");else Gv.setFeature(A,"RETRY_MODE_STANDARD","E");else Gv.setFeature(A,"RETRY_MODE_LEGACY","D")}if(typeof Q.accountIdEndpointMode==="function"){let Y=A.endpointV2;if(String(Y?.url?.hostname).match(dQ6))Gv.setFeature(A,"ACCOUNT_ID_ENDPOINT","O");switch(await Q.accountIdEndpointMode?.()){case"disabled":Gv.setFeature(A,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Gv.setFeature(A,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Gv.setFeature(A,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let Z=A.__smithy_context?.selectedHttpAuthScheme?.identity;if(Z?.$source){let Y=Z;if(Y.accountId)Gv.setFeature(A,"RESOLVED_ACCOUNT_ID","T");for(let[J,X]of Object.entries(Y.$source??{}))Gv.setFeature(A,J,X)}}var ALQ="user-agent",Tx1="x-amz-user-agent",QLQ=" ",Px1="/",cQ6=/[^!$%&'*+\-.^_`|~\w]/g,lQ6=/[^!$%&'*+\-.^_`|~\w#]/g,BLQ="-",iQ6=1024;function nQ6(A){let Q="";for(let B in A){let G=A[B];if(Q.length+G.length+1<=iQ6){if(Q.length)Q+=","+G;else Q+=G;continue}break}return Q}var ZLQ=(A)=>(Q,B)=>async(G)=>{let{request:Z}=G;if(!gQ6.HttpRequest.isInstance(Z))return Q(G);let{headers:Y}=Z,J=B?.userAgent?.map(OaA)||[],X=(await A.defaultUserAgentProvider()).map(OaA);await pQ6(B,A,G);let I=B;X.push(`m/${nQ6(Object.assign({},B.__smithy_context?.features,I.__aws_sdk_context?.features))}`);let W=A?.customUserAgent?.map(OaA)||[],D=await A.userAgentAppId();if(D)X.push(OaA(["app",`${D}`]));let K=hQ6.getUserAgentPrefix(),V=(K?[K]:[]).concat([...X,...J,...W]).join(QLQ),F=[...X.filter((H)=>H.startsWith("aws-sdk-")),...W].join(QLQ);if(A.runtime!=="browser"){if(F)Y[Tx1]=Y[Tx1]?`${Y[ALQ]} ${F}`:F;Y[ALQ]=V}else Y[Tx1]=V;return Q({...G,request:Z})},OaA=(A)=>{let Q=A[0].split(Px1).map((J)=>J.replace(cQ6,BLQ)).join(Px1),B=A[1]?.replace(lQ6,BLQ),G=Q.indexOf(Px1),Z=Q.substring(0,G),Y=Q.substring(G+1);if(Z==="api")Y=Y.toLowerCase();return[Z,Y,B].filter((J)=>J&&J.length>0).reduce((J,X,I)=>{switch(I){case 0:return X;case 1:return`${J}/${X}`;default:return`${J}#${X}`}},"")},YLQ={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},aQ6=(A)=>({applyToStack:(Q)=>{Q.add(ZLQ(A),YLQ)}});oQ6.DEFAULT_UA_APP_ID=GLQ;oQ6.getUserAgentMiddlewareOptions=YLQ;oQ6.getUserAgentPlugin=aQ6;oQ6.resolveUserAgentConfig=mQ6;oQ6.userAgentMiddleware=ZLQ});var JLQ=U((GB6)=>{var QB6=(A,Q,B)=>{if(!(Q in A))return;if(A[Q]==="true")return!0;if(A[Q]==="false")return!1;throw Error(`Cannot load ${B} "${Q}". Expected "true" or "false", got ${A[Q]}.`)},BB6=(A,Q,B)=>{if(!(Q in A))return;let G=parseInt(A[Q],10);if(Number.isNaN(G))throw TypeError(`Cannot load ${B} '${Q}'. Expected number, got '${A[Q]}'.`);return G};GB6.SelectorType=void 0;(function(A){A.ENV="env",A.CONFIG="shared config entry"})(GB6.SelectorType||(GB6.SelectorType={}));GB6.booleanSelector=QB6;GB6.numberSelector=BB6});var wW=U((LB6)=>{var Ui=JLQ(),MaA=Iz(),JB6=FT(),WLQ="AWS_USE_DUALSTACK_ENDPOINT",DLQ="use_dualstack_endpoint",XB6=!1,IB6={environmentVariableSelector:(A)=>Ui.booleanSelector(A,WLQ,Ui.SelectorType.ENV),configFileSelector:(A)=>Ui.booleanSelector(A,DLQ,Ui.SelectorType.CONFIG),default:!1},KLQ="AWS_USE_FIPS_ENDPOINT",VLQ="use_fips_endpoint",WB6=!1,DB6={environmentVariableSelector:(A)=>Ui.booleanSelector(A,KLQ,Ui.SelectorType.ENV),configFileSelector:(A)=>Ui.booleanSelector(A,VLQ,Ui.SelectorType.CONFIG),default:!1},KB6=(A)=>{let{tls:Q,endpoint:B,urlParser:G,useDualstackEndpoint:Z}=A;return Object.assign(A,{tls:Q??!0,endpoint:MaA.normalizeProvider(typeof B==="string"?G(B):B),isCustomEndpoint:!0,useDualstackEndpoint:MaA.normalizeProvider(Z??!1)})},VB6=async(A)=>{let{tls:Q=!0}=A,B=await A.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(B))throw Error("Invalid region in client config");let Z=await A.useDualstackEndpoint(),Y=await A.useFipsEndpoint(),{hostname:J}=await A.regionInfoProvider(B,{useDualstackEndpoint:Z,useFipsEndpoint:Y})??{};if(!J)throw Error("Cannot resolve hostname from client config");return A.urlParser(`${Q?"https:":"http:"}//${J}`)},FB6=(A)=>{let Q=MaA.normalizeProvider(A.useDualstackEndpoint??!1),{endpoint:B,useFipsEndpoint:G,urlParser:Z,tls:Y}=A;return Object.assign(A,{tls:Y??!0,endpoint:B?MaA.normalizeProvider(typeof B==="string"?Z(B):B):()=>VB6({...A,useDualstackEndpoint:Q,useFipsEndpoint:G}),isCustomEndpoint:!!B,useDualstackEndpoint:Q})},FLQ="AWS_REGION",HLQ="region",HB6={environmentVariableSelector:(A)=>A[FLQ],configFileSelector:(A)=>A[HLQ],default:()=>{throw Error("Region is missing")}},EB6={preferredFile:"credentials"},XLQ=new Set,zB6=(A,Q=JB6.isValidHostLabel)=>{if(!XLQ.has(A)&&!Q(A))if(A==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw Error(`Region not accepted: region="${A}" is not a valid hostname component.`);else XLQ.add(A)},ELQ=(A)=>typeof A==="string"&&(A.startsWith("fips-")||A.endsWith("-fips")),CB6=(A)=>ELQ(A)?["fips-aws-global","aws-fips"].includes(A)?"us-east-1":A.replace(/fips-(dkr-|prod-)?|-fips/,""):A,$B6=(A)=>{let{region:Q,useFipsEndpoint:B}=A;if(!Q)throw Error("Region is missing");return Object.assign(A,{region:async()=>{let G=typeof Q==="function"?await Q():Q,Z=CB6(G);return zB6(Z),Z},useFipsEndpoint:async()=>{let G=typeof Q==="string"?Q:await Q();if(ELQ(G))return!0;return typeof B!=="function"?Promise.resolve(!!B):B()}})},ILQ=(A=[],{useFipsEndpoint:Q,useDualstackEndpoint:B})=>A.find(({tags:G})=>Q===G.includes("fips")&&B===G.includes("dualstack"))?.hostname,UB6=(A,{regionHostname:Q,partitionHostname:B})=>Q?Q:B?B.replace("{region}",A):void 0,qB6=(A,{partitionHash:Q})=>Object.keys(Q||{}).find((B)=>Q[B].regions.includes(A))??"aws",NB6=(A,{signingRegion:Q,regionRegex:B,useFipsEndpoint:G})=>{if(Q)return Q;else if(G){let Z=B.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),Y=A.match(Z);if(Y)return Y[0].slice(1,-1)}},wB6=(A,{useFipsEndpoint:Q=!1,useDualstackEndpoint:B=!1,signingService:G,regionHash:Z,partitionHash:Y})=>{let J=qB6(A,{partitionHash:Y}),X=A in Z?A:Y[J]?.endpoint??A,I={useFipsEndpoint:Q,useDualstackEndpoint:B},W=ILQ(Z[X]?.variants,I),D=ILQ(Y[J]?.variants,I),K=UB6(X,{regionHostname:W,partitionHostname:D});if(K===void 0)throw Error(`Endpoint resolution failed for: ${{resolvedRegion:X,useFipsEndpoint:Q,useDualstackEndpoint:B}}`);let V=NB6(K,{signingRegion:Z[X]?.signingRegion,regionRegex:Y[J].regionRegex,useFipsEndpoint:Q});return{partition:J,signingService:G,hostname:K,...V&&{signingRegion:V},...Z[X]?.signingService&&{signingService:Z[X].signingService}}};LB6.CONFIG_USE_DUALSTACK_ENDPOINT=DLQ;LB6.CONFIG_USE_FIPS_ENDPOINT=VLQ;LB6.DEFAULT_USE_DUALSTACK_ENDPOINT=XB6;LB6.DEFAULT_USE_FIPS_ENDPOINT=WB6;LB6.ENV_USE_DUALSTACK_ENDPOINT=WLQ;LB6.ENV_USE_FIPS_ENDPOINT=KLQ;LB6.NODE_REGION_CONFIG_FILE_OPTIONS=EB6;LB6.NODE_REGION_CONFIG_OPTIONS=HB6;LB6.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=IB6;LB6.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=DB6;LB6.REGION_ENV_NAME=FLQ;LB6.REGION_INI_NAME=HLQ;LB6.getRegionInfo=wB6;LB6.resolveCustomEndpointsConfig=KB6;LB6.resolveEndpointsConfig=FB6;LB6.resolveRegionConfig=$B6});var zLQ=U((lB6)=>{lB6.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(lB6.HttpAuthLocation||(lB6.HttpAuthLocation={}));lB6.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(lB6.HttpApiKeyAuthLocation||(lB6.HttpApiKeyAuthLocation={}));lB6.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(lB6.EndpointURLScheme||(lB6.EndpointURLScheme={}));lB6.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(lB6.AlgorithmId||(lB6.AlgorithmId={}));var uB6=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>lB6.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>lB6.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},mB6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},dB6=(A)=>{return uB6(A)},pB6=(A)=>{return mB6(A)};lB6.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(lB6.FieldPosition||(lB6.FieldPosition={}));var cB6="__smithy_context";lB6.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(lB6.IniSectionType||(lB6.IniSectionType={}));lB6.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(lB6.RequestHandlerProtocol||(lB6.RequestHandlerProtocol={}));lB6.SMITHY_CONTEXT_KEY=cB6;lB6.getDefaultClientConfiguration=dB6;lB6.resolveDefaultRuntimeConfig=pB6});var qLQ=U((A26)=>{var oB6=zLQ(),rB6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},sB6=(A)=>{return{httpHandler:A.httpHandler()}};class CLQ{name;kind;values;constructor({name:A,kind:Q=oB6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class $LQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class RaA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new RaA({...A,headers:{...A.headers}});if(Q.query)Q.query=tB6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return RaA.clone(this)}}function tB6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class ULQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function eB6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}A26.Field=CLQ;A26.Fields=$LQ;A26.HttpRequest=RaA;A26.HttpResponse=ULQ;A26.getHttpHandlerExtensionConfiguration=rB6;A26.isValidHostname=eB6;A26.resolveHttpHandlerRuntimeConfig=sB6});var jg=U((D26)=>{var I26=qLQ(),NLQ="content-length";function wLQ(A){return(Q)=>async(B)=>{let G=B.request;if(I26.HttpRequest.isInstance(G)){let{body:Z,headers:Y}=G;if(Z&&Object.keys(Y).map((J)=>J.toLowerCase()).indexOf(NLQ)===-1)try{let J=A(Z);G.headers={...G.headers,[NLQ]:String(J)}}catch(J){}}return Q({...B,request:G})}}var LLQ={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},W26=(A)=>({applyToStack:(Q)=>{Q.add(wLQ(A.bodyLengthChecker),LLQ)}});D26.contentLengthMiddleware=wLQ;D26.contentLengthMiddlewareOptions=LLQ;D26.getContentLengthPlugin=W26});var gx1=U((OLQ)=>{Object.defineProperty(OLQ,"__esModule",{value:!0});OLQ.getHomeDir=void 0;var H26=qA("os"),E26=qA("path"),hx1={},z26=()=>{if(process&&process.geteuid)return`${process.geteuid()}`;return"DEFAULT"},C26=()=>{let{HOME:A,USERPROFILE:Q,HOMEPATH:B,HOMEDRIVE:G=`C:${E26.sep}`}=process.env;if(A)return A;if(Q)return Q;if(B)return`${G}${B}`;let Z=z26();if(!hx1[Z])hx1[Z]=(0,H26.homedir)();return hx1[Z]};OLQ.getHomeDir=C26});var ux1=U((RLQ)=>{Object.defineProperty(RLQ,"__esModule",{value:!0});RLQ.getSSOTokenFilepath=void 0;var $26=qA("crypto"),U26=qA("path"),q26=gx1(),N26=(A)=>{let B=(0,$26.createHash)("sha1").update(A).digest("hex");return(0,U26.join)((0,q26.getHomeDir)(),".aws","sso","cache",`${B}.json`)};RLQ.getSSOTokenFilepath=N26});var PLQ=U((jLQ)=>{Object.defineProperty(jLQ,"__esModule",{value:!0});jLQ.getSSOTokenFromFile=jLQ.tokenIntercept=void 0;var w26=qA("fs/promises"),L26=ux1();jLQ.tokenIntercept={};var O26=async(A)=>{if(jLQ.tokenIntercept[A])return jLQ.tokenIntercept[A];let Q=(0,L26.getSSOTokenFilepath)(A),B=await(0,w26.readFile)(Q,"utf8");return JSON.parse(B)};jLQ.getSSOTokenFromFile=O26});var SLQ=U((P26)=>{P26.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(P26.HttpAuthLocation||(P26.HttpAuthLocation={}));P26.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(P26.HttpApiKeyAuthLocation||(P26.HttpApiKeyAuthLocation={}));P26.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(P26.EndpointURLScheme||(P26.EndpointURLScheme={}));P26.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(P26.AlgorithmId||(P26.AlgorithmId={}));var M26=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>P26.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>P26.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},R26=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},_26=(A)=>{return M26(A)},j26=(A)=>{return R26(A)};P26.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(P26.FieldPosition||(P26.FieldPosition={}));var T26="__smithy_context";P26.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(P26.IniSectionType||(P26.IniSectionType={}));P26.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(P26.RequestHandlerProtocol||(P26.RequestHandlerProtocol={}));P26.SMITHY_CONTEXT_KEY=T26;P26.getDefaultClientConfiguration=_26;P26.resolveDefaultRuntimeConfig=j26});var vLQ=U((xLQ)=>{Object.defineProperty(xLQ,"__esModule",{value:!0});xLQ.readFile=xLQ.fileIntercept=xLQ.filePromises=void 0;var v26=qA("node:fs/promises");xLQ.filePromises={};xLQ.fileIntercept={};var k26=(A,Q)=>{if(xLQ.fileIntercept[A]!==void 0)return xLQ.fileIntercept[A];if(!xLQ.filePromises[A]||Q?.ignoreCache)xLQ.filePromises[A]=(0,v26.readFile)(A,"utf8");return xLQ.filePromises[A]};xLQ.readFile=k26});var Yv=U((p1A)=>{var FNA=gx1(),kLQ=ux1(),ox1=PLQ(),jaA=qA("path"),TaA=SLQ(),wZA=vLQ(),fLQ="AWS_PROFILE",hLQ="default",b26=(A)=>A.profile||process.env[fLQ]||hLQ,d1A=".",f26=(A)=>Object.entries(A).filter(([Q])=>{let B=Q.indexOf(d1A);if(B===-1)return!1;return Object.values(TaA.IniSectionType).includes(Q.substring(0,B))}).reduce((Q,[B,G])=>{let Z=B.indexOf(d1A),Y=B.substring(0,Z)===TaA.IniSectionType.PROFILE?B.substring(Z+1):B;return Q[Y]=G,Q},{...A.default&&{default:A.default}}),h26="AWS_CONFIG_FILE",gLQ=()=>process.env[h26]||jaA.join(FNA.getHomeDir(),".aws","config"),g26="AWS_SHARED_CREDENTIALS_FILE",u26=()=>process.env[g26]||jaA.join(FNA.getHomeDir(),".aws","credentials"),m26=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,d26=["__proto__","profile __proto__"],rx1=(A)=>{let Q={},B,G;for(let Z of A.split(/\r?\n/)){let Y=Z.split(/(^|\s)[;#]/)[0].trim();if(Y[0]==="["&&Y[Y.length-1]==="]"){B=void 0,G=void 0;let X=Y.substring(1,Y.length-1),I=m26.exec(X);if(I){let[,W,,D]=I;if(Object.values(TaA.IniSectionType).includes(W))B=[W,D].join(d1A)}else B=X;if(d26.includes(X))throw Error(`Found invalid profile name "${X}"`)}else if(B){let X=Y.indexOf("=");if(![0,-1].includes(X)){let[I,W]=[Y.substring(0,X).trim(),Y.substring(X+1).trim()];if(W==="")G=I;else{if(G&&Z.trimStart()===Z)G=void 0;Q[B]=Q[B]||{};let D=G?[G,I].join(d1A):I;Q[B][D]=W}}}}return Q},bLQ=()=>({}),uLQ=async(A={})=>{let{filepath:Q=u26(),configFilepath:B=gLQ()}=A,G=FNA.getHomeDir(),Z="~/",Y=Q;if(Q.startsWith("~/"))Y=jaA.join(G,Q.slice(2));let J=B;if(B.startsWith("~/"))J=jaA.join(G,B.slice(2));let X=await Promise.all([wZA.readFile(J,{ignoreCache:A.ignoreCache}).then(rx1).then(f26).catch(bLQ),wZA.readFile(Y,{ignoreCache:A.ignoreCache}).then(rx1).catch(bLQ)]);return{configFile:X[0],credentialsFile:X[1]}},p26=(A)=>Object.entries(A).filter(([Q])=>Q.startsWith(TaA.IniSectionType.SSO_SESSION+d1A)).reduce((Q,[B,G])=>({...Q,[B.substring(B.indexOf(d1A)+1)]:G}),{}),c26=()=>({}),l26=async(A={})=>wZA.readFile(A.configFilepath??gLQ()).then(rx1).then(p26).catch(c26),i26=(...A)=>{let Q={};for(let B of A)for(let[G,Z]of Object.entries(B))if(Q[G]!==void 0)Object.assign(Q[G],Z);else Q[G]=Z;return Q},n26=async(A)=>{let Q=await uLQ(A);return i26(Q.configFile,Q.credentialsFile)},a26={getFileRecord(){return wZA.fileIntercept},interceptFile(A,Q){wZA.fileIntercept[A]=Promise.resolve(Q)},getTokenRecord(){return ox1.tokenIntercept},interceptToken(A,Q){ox1.tokenIntercept[A]=Q}};Object.defineProperty(p1A,"getSSOTokenFromFile",{enumerable:!0,get:function(){return ox1.getSSOTokenFromFile}});Object.defineProperty(p1A,"readFile",{enumerable:!0,get:function(){return wZA.readFile}});p1A.CONFIG_PREFIX_SEPARATOR=d1A;p1A.DEFAULT_PROFILE=hLQ;p1A.ENV_PROFILE=fLQ;p1A.externalDataInterceptor=a26;p1A.getProfileName=b26;p1A.loadSharedConfigFiles=uLQ;p1A.loadSsoSessionData=l26;p1A.parseKnownFiles=n26;Object.keys(FNA).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(p1A,A))Object.defineProperty(p1A,A,{enumerable:!0,get:function(){return FNA[A]}})});Object.keys(kLQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(p1A,A))Object.defineProperty(p1A,A,{enumerable:!0,get:function(){return kLQ[A]}})})});var Dq=U((I96)=>{var HNA=TD(),mLQ=Yv();function dLQ(A){try{let Q=new Set(Array.from(A.match(/([A-Z_]){3,}/g)??[]));return Q.delete("CONFIG"),Q.delete("CONFIG_PREFIX_SEPARATOR"),Q.delete("ENV"),[...Q].join(", ")}catch(Q){return A}}var G96=(A,Q)=>async()=>{try{let B=A(process.env,Q);if(B===void 0)throw Error();return B}catch(B){throw new HNA.CredentialsProviderError(B.message||`Not found in ENV: ${dLQ(A.toString())}`,{logger:Q?.logger})}},Z96=(A,{preferredFile:Q="config",...B}={})=>async()=>{let G=mLQ.getProfileName(B),{configFile:Z,credentialsFile:Y}=await mLQ.loadSharedConfigFiles(B),J=Y[G]||{},X=Z[G]||{},I=Q==="config"?{...J,...X}:{...X,...J};try{let D=A(I,Q==="config"?Z:Y);if(D===void 0)throw Error();return D}catch(W){throw new HNA.CredentialsProviderError(W.message||`Not found in config files w/ profile [${G}]: ${dLQ(A.toString())}`,{logger:B.logger})}},Y96=(A)=>typeof A==="function",J96=(A)=>Y96(A)?async()=>await A():HNA.fromStatic(A),X96=({environmentVariableSelector:A,configFileSelector:Q,default:B},G={})=>{let{signingName:Z,logger:Y}=G,J={signingName:Z,logger:Y};return HNA.memoize(HNA.chain(G96(A,J),Z96(Q,G),J96(B)))};I96.loadConfig=X96});var aLQ=U((iLQ)=>{Object.defineProperty(iLQ,"__esModule",{value:!0});iLQ.getEndpointUrlConfig=void 0;var pLQ=Yv(),cLQ="AWS_ENDPOINT_URL",lLQ="endpoint_url",D96=(A)=>({environmentVariableSelector:(Q)=>{let B=A.split(" ").map((Y)=>Y.toUpperCase()),G=Q[[cLQ,...B].join("_")];if(G)return G;let Z=Q[cLQ];if(Z)return Z;return},configFileSelector:(Q,B)=>{if(B&&Q.services){let Z=B[["services",Q.services].join(pLQ.CONFIG_PREFIX_SEPARATOR)];if(Z){let Y=A.split(" ").map((X)=>X.toLowerCase()),J=Z[[Y.join("_"),lLQ].join(pLQ.CONFIG_PREFIX_SEPARATOR)];if(J)return J}}let G=Q[lLQ];if(G)return G;return},default:void 0});iLQ.getEndpointUrlConfig=D96});var sLQ=U((oLQ)=>{Object.defineProperty(oLQ,"__esModule",{value:!0});oLQ.getEndpointFromConfig=void 0;var K96=Dq(),V96=aLQ(),F96=async(A)=>(0,K96.loadConfig)((0,V96.getEndpointUrlConfig)(A??""))();oLQ.getEndpointFromConfig=F96});var HT=U((R96)=>{var eLQ=sLQ(),tLQ=vM(),H96=iG(),PaA=Iz(),E96=IP1(),z96=async(A)=>{let Q=A?.Bucket||"";if(typeof A.Bucket==="string")A.Bucket=Q.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"));if(N96(Q)){if(A.ForcePathStyle===!0)throw Error("Path-style addressing cannot be used with ARN buckets")}else if(!q96(Q)||Q.indexOf(".")!==-1&&!String(A.Endpoint).startsWith("http:")||Q.toLowerCase()!==Q||Q.length<3)A.ForcePathStyle=!0;if(A.DisableMultiRegionAccessPoints)A.disableMultiRegionAccessPoints=!0,A.DisableMRAP=!0;return A},C96=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,$96=/(\d+\.){3}\d+/,U96=/\.\./,q96=(A)=>C96.test(A)&&!$96.test(A)&&!U96.test(A),N96=(A)=>{let[Q,B,G,,,Z]=A.split(":"),Y=Q==="arn"&&A.split(":").length>=6,J=Boolean(Y&&B&&G&&Z);if(Y&&!J)throw Error(`Invalid ARN: ${A} was an invalid ARN.`);return J},w96=(A,Q,B)=>{let G=async()=>{let Z=B[A]??B[Q];if(typeof Z==="function")return Z();return Z};if(A==="credentialScope"||Q==="CredentialScope")return async()=>{let Z=typeof B.credentials==="function"?await B.credentials():B.credentials;return Z?.credentialScope??Z?.CredentialScope};if(A==="accountId"||Q==="AccountId")return async()=>{let Z=typeof B.credentials==="function"?await B.credentials():B.credentials;return Z?.accountId??Z?.AccountId};if(A==="endpoint"||Q==="endpoint")return async()=>{if(B.isCustomEndpoint===!1)return;let Z=await G();if(Z&&typeof Z==="object"){if("url"in Z)return Z.url.href;if("hostname"in Z){let{protocol:Y,hostname:J,port:X,path:I}=Z;return`${Y}//${J}${X?":"+X:""}${I}`}}return Z};return G},sx1=(A)=>{if(typeof A==="object"){if("url"in A)return tLQ.parseUrl(A.url);return A}return tLQ.parseUrl(A)},AOQ=async(A,Q,B,G)=>{if(!B.isCustomEndpoint){let J;if(B.serviceConfiguredEndpoint)J=await B.serviceConfiguredEndpoint();else J=await eLQ.getEndpointFromConfig(B.serviceId);if(J)B.endpoint=()=>Promise.resolve(sx1(J)),B.isCustomEndpoint=!0}let Z=await QOQ(A,Q,B);if(typeof B.endpointProvider!=="function")throw Error("config.endpointProvider is not set.");return B.endpointProvider(Z,G)},QOQ=async(A,Q,B)=>{let G={},Z=Q?.getEndpointParameterInstructions?.()||{};for(let[Y,J]of Object.entries(Z))switch(J.type){case"staticContextParams":G[Y]=J.value;break;case"contextParams":G[Y]=A[J.name];break;case"clientContextParams":case"builtInParams":G[Y]=await w96(J.name,Y,B)();break;case"operationContextParams":G[Y]=J.get(A);break;default:throw Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(J))}if(Object.keys(Z).length===0)Object.assign(G,B);if(String(B.serviceId).toLowerCase()==="s3")await z96(G);return G},BOQ=({config:A,instructions:Q})=>{return(B,G)=>async(Z)=>{if(A.isCustomEndpoint)H96.setFeature(G,"ENDPOINT_OVERRIDE","N");let Y=await AOQ(Z.input,{getEndpointParameterInstructions(){return Q}},{...A},G);G.endpointV2=Y,G.authSchemes=Y.properties?.authSchemes;let J=G.authSchemes?.[0];if(J){G.signing_region=J.signingRegion,G.signing_service=J.signingName;let I=PaA.getSmithyContext(G)?.selectedHttpAuthScheme?.httpAuthOption;if(I)I.signingProperties=Object.assign(I.signingProperties||{},{signing_region:J.signingRegion,signingRegion:J.signingRegion,signing_service:J.signingName,signingName:J.signingName,signingRegionSet:J.signingRegionSet},J.properties)}return B({...Z})}},GOQ={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:E96.serializerMiddlewareOption.name},L96=(A,Q)=>({applyToStack:(B)=>{B.addRelativeTo(BOQ({config:A,instructions:Q}),GOQ)}}),O96=(A)=>{let Q=A.tls??!0,{endpoint:B,useDualstackEndpoint:G,useFipsEndpoint:Z}=A,Y=B!=null?async()=>sx1(await PaA.normalizeProvider(B)()):void 0,X=Object.assign(A,{endpoint:Y,tls:Q,isCustomEndpoint:!!B,useDualstackEndpoint:PaA.normalizeProvider(G??!1),useFipsEndpoint:PaA.normalizeProvider(Z??!1)}),I=void 0;return X.serviceConfiguredEndpoint=async()=>{if(A.serviceId&&!I)I=eLQ.getEndpointFromConfig(A.serviceId);return I},X},M96=(A)=>{let{endpoint:Q}=A;if(Q===void 0)A.endpoint=async()=>{throw Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")};return A};R96.endpointMiddleware=BOQ;R96.endpointMiddlewareOptions=GOQ;R96.getEndpointFromInstructions=AOQ;R96.getEndpointPlugin=L96;R96.resolveEndpointConfig=O96;R96.resolveEndpointRequiredConfig=M96;R96.resolveParams=QOQ;R96.toEndpointV1=sx1});var ex1=U((c96)=>{var k96=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],b96=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],f96=["TimeoutError","RequestTimeout","RequestTimeoutException"],h96=[500,502,503,504],g96=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],u96=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],ZOQ=(A)=>A?.$retryable!==void 0,m96=(A)=>k96.includes(A.name),YOQ=(A)=>A.$metadata?.clockSkewCorrected,JOQ=(A)=>{let Q=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);if(!(A&&A instanceof TypeError))return!1;return Q.has(A.message)},d96=(A)=>A.$metadata?.httpStatusCode===429||b96.includes(A.name)||A.$retryable?.throttling==!0,tx1=(A,Q=0)=>ZOQ(A)||YOQ(A)||f96.includes(A.name)||g96.includes(A?.code||"")||u96.includes(A?.code||"")||h96.includes(A.$metadata?.httpStatusCode||0)||JOQ(A)||A.cause!==void 0&&Q<=10&&tx1(A.cause,Q+1),p96=(A)=>{if(A.$metadata?.httpStatusCode!==void 0){let Q=A.$metadata.httpStatusCode;if(500<=Q&&Q<=599&&!tx1(A))return!0;return!1}return!1};c96.isBrowserNetworkError=JOQ;c96.isClockSkewCorrectedError=YOQ;c96.isClockSkewError=m96;c96.isRetryableByTrait=ZOQ;c96.isServerError=p96;c96.isThrottlingError=d96;c96.isTransientError=tx1});var Jv=U((G46)=>{var t96=ex1();G46.RETRY_MODES=void 0;(function(A){A.STANDARD="standard",A.ADAPTIVE="adaptive"})(G46.RETRY_MODES||(G46.RETRY_MODES={}));var Ay1=3,e96=G46.RETRY_MODES.STANDARD;class SaA{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(A){this.beta=A?.beta??0.7,this.minCapacity=A?.minCapacity??1,this.minFillRate=A?.minFillRate??0.5,this.scaleConstant=A?.scaleConstant??0.4,this.smooth=A?.smooth??0.8;let Q=this.getCurrentTimeInSeconds();this.lastThrottleTime=Q,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1000}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(A){if(!this.enabled)return;if(this.refillTokenBucket(),A>this.currentCapacity){let Q=(A-this.currentCapacity)/this.fillRate*1000;await new Promise((B)=>SaA.setTimeoutFn(B,Q))}this.currentCapacity=this.currentCapacity-A}refillTokenBucket(){let A=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=A;return}let Q=(A-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+Q),this.lastTimestamp=A}updateClientSendingRate(A){let Q;if(this.updateMeasuredRate(),t96.isThrottlingError(A)){let G=!this.enabled?this.measuredTxRate:Math.min(this.measuredTxRate,this.fillRate);this.lastMaxRate=G,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),Q=this.cubicThrottle(G),this.enableTokenBucket()}else this.calculateTimeWindow(),Q=this.cubicSuccess(this.getCurrentTimeInSeconds());let B=Math.min(Q,2*this.measuredTxRate);this.updateTokenBucketRate(B)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,0.3333333333333333))}cubicThrottle(A){return this.getPrecise(A*this.beta)}cubicSuccess(A){return this.getPrecise(this.scaleConstant*Math.pow(A-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(A){this.refillTokenBucket(),this.fillRate=Math.max(A,this.minFillRate),this.maxCapacity=Math.max(A,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let A=this.getCurrentTimeInSeconds(),Q=Math.floor(A*2)/2;if(this.requestCount++,Q>this.lastTxRateBucket){let B=this.requestCount/(Q-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(B*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=Q}}getPrecise(A){return parseFloat(A.toFixed(8))}}var ENA=100,By1=20000,IOQ=500,Qy1=500,WOQ=5,DOQ=10,KOQ=1,A46="amz-sdk-invocation-id",Q46="amz-sdk-request",B46=()=>{let A=ENA;return{computeNextBackoffDelay:(G)=>{return Math.floor(Math.min(By1,Math.random()*2**G*A))},setDelayBase:(G)=>{A=G}}},XOQ=({retryDelay:A,retryCount:Q,retryCost:B})=>{return{getRetryCount:()=>Q,getRetryDelay:()=>Math.min(By1,A),getRetryCost:()=>B}};class xaA{maxAttempts;mode=G46.RETRY_MODES.STANDARD;capacity=Qy1;retryBackoffStrategy=B46();maxAttemptsProvider;constructor(A){this.maxAttempts=A,this.maxAttemptsProvider=typeof A==="function"?A:async()=>A}async acquireInitialRetryToken(A){return XOQ({retryDelay:ENA,retryCount:0})}async refreshRetryTokenForRetry(A,Q){let B=await this.getMaxAttempts();if(this.shouldRetry(A,Q,B)){let G=Q.errorType;this.retryBackoffStrategy.setDelayBase(G==="THROTTLING"?IOQ:ENA);let Z=this.retryBackoffStrategy.computeNextBackoffDelay(A.getRetryCount()),Y=Q.retryAfterHint?Math.max(Q.retryAfterHint.getTime()-Date.now()||0,Z):Z,J=this.getCapacityCost(G);return this.capacity-=J,XOQ({retryDelay:Y,retryCount:A.getRetryCount()+1,retryCost:J})}throw Error("No retry token available")}recordSuccess(A){this.capacity=Math.max(Qy1,this.capacity+(A.getRetryCost()??KOQ))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(A){return console.warn(`Max attempts provider could not resolve. Using default of ${Ay1}`),Ay1}}shouldRetry(A,Q,B){return A.getRetryCount()+1<B&&this.capacity>=this.getCapacityCost(Q.errorType)&&this.isRetryableError(Q.errorType)}getCapacityCost(A){return A==="TRANSIENT"?DOQ:WOQ}isRetryableError(A){return A==="THROTTLING"||A==="TRANSIENT"}}class VOQ{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=G46.RETRY_MODES.ADAPTIVE;constructor(A,Q){this.maxAttemptsProvider=A;let{rateLimiter:B}=Q??{};this.rateLimiter=B??new SaA,this.standardRetryStrategy=new xaA(A)}async acquireInitialRetryToken(A){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(A)}async refreshRetryTokenForRetry(A,Q){return this.rateLimiter.updateClientSendingRate(Q),this.standardRetryStrategy.refreshRetryTokenForRetry(A,Q)}recordSuccess(A){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(A)}}class FOQ extends xaA{computeNextBackoffDelay;constructor(A,Q=ENA){super(typeof A==="function"?A:async()=>A);if(typeof Q==="number")this.computeNextBackoffDelay=()=>Q;else this.computeNextBackoffDelay=Q}async refreshRetryTokenForRetry(A,Q){let B=await super.refreshRetryTokenForRetry(A,Q);return B.getRetryDelay=()=>this.computeNextBackoffDelay(B.getRetryCount()),B}}G46.AdaptiveRetryStrategy=VOQ;G46.ConfiguredRetryStrategy=FOQ;G46.DEFAULT_MAX_ATTEMPTS=Ay1;G46.DEFAULT_RETRY_DELAY_BASE=ENA;G46.DEFAULT_RETRY_MODE=e96;G46.DefaultRateLimiter=SaA;G46.INITIAL_RETRY_TOKENS=Qy1;G46.INVOCATION_ID_HEADER=A46;G46.MAXIMUM_RETRY_DELAY=By1;G46.NO_RETRY_INCREMENT=KOQ;G46.REQUEST_HEADER=Q46;G46.RETRY_COST=WOQ;G46.StandardRetryStrategy=xaA;G46.THROTTLING_RETRY_DELAY_BASE=IOQ;G46.TIMEOUT_RETRY_COST=DOQ});var Wy1=U((O46)=>{O46.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(O46.HttpAuthLocation||(O46.HttpAuthLocation={}));O46.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(O46.HttpApiKeyAuthLocation||(O46.HttpApiKeyAuthLocation={}));O46.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(O46.EndpointURLScheme||(O46.EndpointURLScheme={}));O46.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(O46.AlgorithmId||(O46.AlgorithmId={}));var U46=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>O46.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>O46.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},q46=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},N46=(A)=>{return U46(A)},w46=(A)=>{return q46(A)};O46.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(O46.FieldPosition||(O46.FieldPosition={}));var L46="__smithy_context";O46.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(O46.IniSectionType||(O46.IniSectionType={}));O46.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(O46.RequestHandlerProtocol||(O46.RequestHandlerProtocol={}));O46.SMITHY_CONTEXT_KEY=L46;O46.getDefaultClientConfiguration=N46;O46.resolveDefaultRuntimeConfig=w46});var COQ=U((y46)=>{var j46=Wy1(),T46=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},P46=(A)=>{return{httpHandler:A.httpHandler()}};class HOQ{name;kind;values;constructor({name:A,kind:Q=j46.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class EOQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class yaA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new yaA({...A,headers:{...A.headers}});if(Q.query)Q.query=S46(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return yaA.clone(this)}}function S46(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class zOQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function x46(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}y46.Field=HOQ;y46.Fields=EOQ;y46.HttpRequest=yaA;y46.HttpResponse=zOQ;y46.getHttpHandlerExtensionConfiguration=T46;y46.isValidHostname=x46;y46.resolveHttpHandlerRuntimeConfig=P46});var POQ=U((MZA)=>{var qOQ=Bv(),Hy1=Iq(),Ky1=Wy1(),m46=IX(),$OQ=Xq();class NOQ{config;middlewareStack=qOQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var Dy1="***SensitiveInformation***";function Vy1(A,Q){if(Q==null)return Q;let B=m46.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return Dy1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return Dy1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return Dy1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=Vy1(J,G[Y]);return Z}return Q}class Ey1{middlewareStack=qOQ.constructStack();schema;static classBuilder(){return new wOQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[Ky1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class wOQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends Ey1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?Vy1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?Vy1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var d46="***SensitiveInformation***",p46=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class OZA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return OZA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===OZA)return OZA.isInstance(A);if(OZA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var LOQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},OOQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=l46(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw LOQ(J,Q)},c46=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{OOQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},l46=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),i46=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},UOQ=!1,n46=(A)=>{if(A&&!UOQ&&parseInt(A.substring(1,A.indexOf(".")))<16)UOQ=!0},a46=(A)=>{let Q=[];for(let B in Ky1.AlgorithmId){let G=Ky1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},o46=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},r46=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},s46=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},MOQ=(A)=>{return Object.assign(a46(A),r46(A))},t46=MOQ,e46=(A)=>{return Object.assign(o46(A),s46(A))},A66=(A)=>Array.isArray(A)?A:[A],ROQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=ROQ(A[B]);return A},Q66=(A)=>{return A!=null};class _OQ{trace(){}debug(){}info(){}warn(){}error(){}}function jOQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,Z66(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}TOQ(G,null,Y,J)}return G}var B66=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},G66=(A,Q)=>{let B={};for(let G in Q)TOQ(B,A,Q,G);return B},Z66=(A,Q,B)=>{return jOQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},TOQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=Y66,I=J66,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},Y66=(A)=>A!=null,J66=(A)=>A,X66=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},I66=(A)=>A.toISOString().replace(".000Z","Z"),Fy1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(Fy1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=Fy1(A[B])}return Q}return A};Object.defineProperty(MZA,"collectBody",{enumerable:!0,get:function(){return Hy1.collectBody}});Object.defineProperty(MZA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Hy1.extendedEncodeURIComponent}});Object.defineProperty(MZA,"resolvedPath",{enumerable:!0,get:function(){return Hy1.resolvedPath}});MZA.Client=NOQ;MZA.Command=Ey1;MZA.NoOpLogger=_OQ;MZA.SENSITIVE_STRING=d46;MZA.ServiceException=OZA;MZA._json=Fy1;MZA.convertMap=B66;MZA.createAggregatedClient=p46;MZA.decorateServiceException=LOQ;MZA.emitWarningIfUnsupportedVersion=n46;MZA.getArrayIfSingleItem=A66;MZA.getDefaultClientConfiguration=t46;MZA.getDefaultExtensionConfiguration=MOQ;MZA.getValueFromTextNode=ROQ;MZA.isSerializableHeaderValue=Q66;MZA.loadConfigsForDefaultMode=i46;MZA.map=jOQ;MZA.resolveDefaultRuntimeConfig=e46;MZA.serializeDateTime=I66;MZA.serializeFloat=X66;MZA.take=G66;MZA.throwDefaultError=OOQ;MZA.withBaseException=c46;Object.keys($OQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(MZA,A))Object.defineProperty(MZA,A,{enumerable:!0,get:function(){return $OQ[A]}})})});var yOQ=U((SOQ)=>{Object.defineProperty(SOQ,"__esModule",{value:!0});SOQ.isStreamingPayload=void 0;var x66=qA("stream"),y66=(A)=>A?.body instanceof x66.Readable||typeof ReadableStream<"u"&&A?.body instanceof ReadableStream;SOQ.isStreamingPayload=y66});var wH=U((i66)=>{var nX=Jv(),RZA=COQ(),qi=ex1(),kOQ=fP1(),vOQ=Iz(),v66=POQ(),k66=yOQ(),b66=(A,Q)=>{let B=A,G=nX.NO_RETRY_INCREMENT,Z=nX.RETRY_COST,Y=nX.TIMEOUT_RETRY_COST,J=A,X=(K)=>K.name==="TimeoutError"?Y:Z,I=(K)=>X(K)<=J;return Object.freeze({hasRetryTokens:I,retrieveRetryTokens:(K)=>{if(!I(K))throw Error("No retry token available");let V=X(K);return J-=V,V},releaseRetryTokens:(K)=>{J+=K??G,J=Math.min(J,B)}})},bOQ=(A,Q)=>Math.floor(Math.min(nX.MAXIMUM_RETRY_DELAY,Math.random()*2**Q*A)),fOQ=(A)=>{if(!A)return!1;return qi.isRetryableByTrait(A)||qi.isClockSkewError(A)||qi.isThrottlingError(A)||qi.isTransientError(A)},hOQ=(A)=>{if(A instanceof Error)return A;if(A instanceof Object)return Object.assign(Error(),A);if(typeof A==="string")return Error(A);return Error(`AWS SDK error wrapper for ${A}`)};class $y1{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=nX.RETRY_MODES.STANDARD;constructor(A,Q){this.maxAttemptsProvider=A,this.retryDecider=Q?.retryDecider??fOQ,this.delayDecider=Q?.delayDecider??bOQ,this.retryQuota=Q?.retryQuota??b66(nX.INITIAL_RETRY_TOKENS)}shouldRetry(A,Q,B){return Q<B&&this.retryDecider(A)&&this.retryQuota.hasRetryTokens(A)}async getMaxAttempts(){let A;try{A=await this.maxAttemptsProvider()}catch(Q){A=nX.DEFAULT_MAX_ATTEMPTS}return A}async retry(A,Q,B){let G,Z=0,Y=0,J=await this.getMaxAttempts(),{request:X}=Q;if(RZA.HttpRequest.isInstance(X))X.headers[nX.INVOCATION_ID_HEADER]=kOQ.v4();while(!0)try{if(RZA.HttpRequest.isInstance(X))X.headers[nX.REQUEST_HEADER]=`attempt=${Z+1}; max=${J}`;if(B?.beforeRequest)await B.beforeRequest();let{response:I,output:W}=await A(Q);if(B?.afterRequest)B.afterRequest(I);return this.retryQuota.releaseRetryTokens(G),W.$metadata.attempts=Z+1,W.$metadata.totalRetryDelay=Y,{response:I,output:W}}catch(I){let W=hOQ(I);if(Z++,this.shouldRetry(W,Z,J)){G=this.retryQuota.retrieveRetryTokens(W);let D=this.delayDecider(qi.isThrottlingError(W)?nX.THROTTLING_RETRY_DELAY_BASE:nX.DEFAULT_RETRY_DELAY_BASE,Z),K=f66(W.$response),V=Math.max(K||0,D);Y+=V,await new Promise((F)=>setTimeout(F,V));continue}if(!W.$metadata)W.$metadata={};throw W.$metadata.attempts=Z,W.$metadata.totalRetryDelay=Y,W}}}var f66=(A)=>{if(!RZA.HttpResponse.isInstance(A))return;let Q=Object.keys(A.headers).find((Y)=>Y.toLowerCase()==="retry-after");if(!Q)return;let B=A.headers[Q],G=Number(B);if(!Number.isNaN(G))return G*1000;return new Date(B).getTime()-Date.now()};class gOQ extends $y1{rateLimiter;constructor(A,Q){let{rateLimiter:B,...G}=Q??{};super(A,G);this.rateLimiter=B??new nX.DefaultRateLimiter,this.mode=nX.RETRY_MODES.ADAPTIVE}async retry(A,Q){return super.retry(A,Q,{beforeRequest:async()=>{return this.rateLimiter.getSendToken()},afterRequest:(B)=>{this.rateLimiter.updateClientSendingRate(B)}})}}var zy1="AWS_MAX_ATTEMPTS",Cy1="max_attempts",h66={environmentVariableSelector:(A)=>{let Q=A[zy1];if(!Q)return;let B=parseInt(Q);if(Number.isNaN(B))throw Error(`Environment variable ${zy1} mast be a number, got "${Q}"`);return B},configFileSelector:(A)=>{let Q=A[Cy1];if(!Q)return;let B=parseInt(Q);if(Number.isNaN(B))throw Error(`Shared config file entry ${Cy1} mast be a number, got "${Q}"`);return B},default:nX.DEFAULT_MAX_ATTEMPTS},g66=(A)=>{let{retryStrategy:Q,retryMode:B,maxAttempts:G}=A,Z=vOQ.normalizeProvider(G??nX.DEFAULT_MAX_ATTEMPTS);return Object.assign(A,{maxAttempts:Z,retryStrategy:async()=>{if(Q)return Q;if(await vOQ.normalizeProvider(B)()===nX.RETRY_MODES.ADAPTIVE)return new nX.AdaptiveRetryStrategy(Z);return new nX.StandardRetryStrategy(Z)}})},uOQ="AWS_RETRY_MODE",mOQ="retry_mode",u66={environmentVariableSelector:(A)=>A[uOQ],configFileSelector:(A)=>A[mOQ],default:nX.DEFAULT_RETRY_MODE},dOQ=()=>(A)=>async(Q)=>{let{request:B}=Q;if(RZA.HttpRequest.isInstance(B))delete B.headers[nX.INVOCATION_ID_HEADER],delete B.headers[nX.REQUEST_HEADER];return A(Q)},pOQ={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},m66=(A)=>({applyToStack:(Q)=>{Q.addRelativeTo(dOQ(),pOQ)}}),cOQ=(A)=>(Q,B)=>async(G)=>{let Z=await A.retryStrategy(),Y=await A.maxAttempts();if(d66(Z)){Z=Z;let J=await Z.acquireInitialRetryToken(B.partition_id),X=Error(),I=0,W=0,{request:D}=G,K=RZA.HttpRequest.isInstance(D);if(K)D.headers[nX.INVOCATION_ID_HEADER]=kOQ.v4();while(!0)try{if(K)D.headers[nX.REQUEST_HEADER]=`attempt=${I+1}; max=${Y}`;let{response:V,output:F}=await Q(G);return Z.recordSuccess(J),F.$metadata.attempts=I+1,F.$metadata.totalRetryDelay=W,{response:V,output:F}}catch(V){let F=p66(V);if(X=hOQ(V),K&&k66.isStreamingPayload(D))throw(B.logger instanceof v66.NoOpLogger?console:B.logger)?.warn("An error was encountered in a non-retryable streaming request."),X;try{J=await Z.refreshRetryTokenForRetry(J,F)}catch(E){if(!X.$metadata)X.$metadata={};throw X.$metadata.attempts=I+1,X.$metadata.totalRetryDelay=W,X}I=J.getRetryCount();let H=J.getRetryDelay();W+=H,await new Promise((E)=>setTimeout(E,H))}}else{if(Z=Z,Z?.mode)B.userAgent=[...B.userAgent||[],["cfg/retry-mode",Z.mode]];return Z.retry(Q,G)}},d66=(A)=>typeof A.acquireInitialRetryToken<"u"&&typeof A.refreshRetryTokenForRetry<"u"&&typeof A.recordSuccess<"u",p66=(A)=>{let Q={error:A,errorType:c66(A)},B=iOQ(A.$response);if(B)Q.retryAfterHint=B;return Q},c66=(A)=>{if(qi.isThrottlingError(A))return"THROTTLING";if(qi.isTransientError(A))return"TRANSIENT";if(qi.isServerError(A))return"SERVER_ERROR";return"CLIENT_ERROR"},lOQ={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},l66=(A)=>({applyToStack:(Q)=>{Q.add(cOQ(A),lOQ)}}),iOQ=(A)=>{if(!RZA.HttpResponse.isInstance(A))return;let Q=Object.keys(A.headers).find((Y)=>Y.toLowerCase()==="retry-after");if(!Q)return;let B=A.headers[Q],G=Number(B);if(!Number.isNaN(G))return new Date(G*1000);return new Date(B)};i66.AdaptiveRetryStrategy=gOQ;i66.CONFIG_MAX_ATTEMPTS=Cy1;i66.CONFIG_RETRY_MODE=mOQ;i66.ENV_MAX_ATTEMPTS=zy1;i66.ENV_RETRY_MODE=uOQ;i66.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=h66;i66.NODE_RETRY_MODE_CONFIG_OPTIONS=u66;i66.StandardRetryStrategy=$y1;i66.defaultDelayDecider=bOQ;i66.defaultRetryDecider=fOQ;i66.getOmitRetryHeadersPlugin=m66;i66.getRetryAfterHint=iOQ;i66.getRetryPlugin=l66;i66.omitRetryHeadersMiddleware=dOQ;i66.omitRetryHeadersMiddlewareOptions=pOQ;i66.resolveRetryConfig=g66;i66.retryMiddleware=cOQ;i66.retryMiddlewareOptions=lOQ});var My1=U((z36)=>{z36.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(z36.HttpAuthLocation||(z36.HttpAuthLocation={}));z36.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(z36.HttpApiKeyAuthLocation||(z36.HttpApiKeyAuthLocation={}));z36.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(z36.EndpointURLScheme||(z36.EndpointURLScheme={}));z36.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(z36.AlgorithmId||(z36.AlgorithmId={}));var K36=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>z36.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>z36.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},V36=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},F36=(A)=>{return K36(A)},H36=(A)=>{return V36(A)};z36.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(z36.FieldPosition||(z36.FieldPosition={}));var E36="__smithy_context";z36.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(z36.IniSectionType||(z36.IniSectionType={}));z36.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(z36.RequestHandlerProtocol||(z36.RequestHandlerProtocol={}));z36.SMITHY_CONTEXT_KEY=E36;z36.getDefaultClientConfiguration=F36;z36.resolveDefaultRuntimeConfig=H36});var $NA=U((jZA)=>{var oOQ=Bv(),Py1=Iq(),_y1=My1(),q36=IX(),nOQ=Xq();class rOQ{config;middlewareStack=oOQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var Ry1="***SensitiveInformation***";function jy1(A,Q){if(Q==null)return Q;let B=q36.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return Ry1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return Ry1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return Ry1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=jy1(J,G[Y]);return Z}return Q}class Sy1{middlewareStack=oOQ.constructStack();schema;static classBuilder(){return new sOQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[_y1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class sOQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends Sy1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?jy1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?jy1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var N36="***SensitiveInformation***",w36=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class _ZA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return _ZA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===_ZA)return _ZA.isInstance(A);if(_ZA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var tOQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},eOQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=O36(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw tOQ(J,Q)},L36=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{eOQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},O36=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),M36=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},aOQ=!1,R36=(A)=>{if(A&&!aOQ&&parseInt(A.substring(1,A.indexOf(".")))<16)aOQ=!0},_36=(A)=>{let Q=[];for(let B in _y1.AlgorithmId){let G=_y1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},j36=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},T36=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},P36=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},AMQ=(A)=>{return Object.assign(_36(A),T36(A))},S36=AMQ,x36=(A)=>{return Object.assign(j36(A),P36(A))},y36=(A)=>Array.isArray(A)?A:[A],QMQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=QMQ(A[B]);return A},v36=(A)=>{return A!=null};class BMQ{trace(){}debug(){}info(){}warn(){}error(){}}function GMQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,f36(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}ZMQ(G,null,Y,J)}return G}var k36=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},b36=(A,Q)=>{let B={};for(let G in Q)ZMQ(B,A,Q,G);return B},f36=(A,Q,B)=>{return GMQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},ZMQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=h36,I=g36,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},h36=(A)=>A!=null,g36=(A)=>A,u36=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},m36=(A)=>A.toISOString().replace(".000Z","Z"),Ty1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(Ty1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=Ty1(A[B])}return Q}return A};Object.defineProperty(jZA,"collectBody",{enumerable:!0,get:function(){return Py1.collectBody}});Object.defineProperty(jZA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Py1.extendedEncodeURIComponent}});Object.defineProperty(jZA,"resolvedPath",{enumerable:!0,get:function(){return Py1.resolvedPath}});jZA.Client=rOQ;jZA.Command=Sy1;jZA.NoOpLogger=BMQ;jZA.SENSITIVE_STRING=N36;jZA.ServiceException=_ZA;jZA._json=Ty1;jZA.convertMap=k36;jZA.createAggregatedClient=w36;jZA.decorateServiceException=tOQ;jZA.emitWarningIfUnsupportedVersion=R36;jZA.getArrayIfSingleItem=y36;jZA.getDefaultClientConfiguration=S36;jZA.getDefaultExtensionConfiguration=AMQ;jZA.getValueFromTextNode=QMQ;jZA.isSerializableHeaderValue=v36;jZA.loadConfigsForDefaultMode=M36;jZA.map=GMQ;jZA.resolveDefaultRuntimeConfig=x36;jZA.serializeDateTime=m36;jZA.serializeFloat=u36;jZA.take=b36;jZA.throwDefaultError=eOQ;jZA.withBaseException=L36;Object.keys(nOQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(jZA,A))Object.defineProperty(jZA,A,{enumerable:!0,get:function(){return nOQ[A]}})})});var vy1=U((YMQ)=>{Object.defineProperty(YMQ,"__esModule",{value:!0});YMQ.resolveHttpAuthSchemeConfig=YMQ.defaultBedrockHttpAuthSchemeProvider=YMQ.defaultBedrockHttpAuthSchemeParametersProvider=void 0;var K86=vY(),xy1=iG(),yy1=Iz(),V86=async(A,Q,B)=>{return{operation:(0,yy1.getSmithyContext)(Q).operation,region:await(0,yy1.normalizeProvider)(A.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};YMQ.defaultBedrockHttpAuthSchemeParametersProvider=V86;function F86(A){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:A.region},propertiesExtractor:(Q,B)=>({signingProperties:{config:Q,context:B}})}}function H86(A){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:Q,filepath:B,configFilepath:G,ignoreCache:Z},Y)=>({identityProperties:{profile:Q,filepath:B,configFilepath:G,ignoreCache:Z}})}}var E86=(A)=>{let Q=[];switch(A.operation){default:Q.push(F86(A)),Q.push(H86(A))}return Q};YMQ.defaultBedrockHttpAuthSchemeProvider=E86;var z86=(A)=>{let Q=(0,xy1.memoizeIdentityProvider)(A.token,xy1.isIdentityExpired,xy1.doesIdentityRequireRefresh),B=(0,K86.resolveAwsSdkSigV4Config)(A);return Object.assign(B,{authSchemePreference:(0,yy1.normalizeProvider)(A.authSchemePreference??[]),token:Q})};YMQ.resolveHttpAuthSchemeConfig=z86});var XMQ=U((e6G,U86)=>{U86.exports={name:"@aws-sdk/client-bedrock",description:"AWS SDK for JavaScript Bedrock Client for Node.js, Browser and React Native",version:"3.936.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-bedrock","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.936.0","@aws-sdk/credential-provider-node":"3.936.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.936.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/token-providers":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.936.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock"}}});var vaA=U((L86)=>{var q86=Wq(),N86=TD(),IMQ="AWS_ACCESS_KEY_ID",WMQ="AWS_SECRET_ACCESS_KEY",DMQ="AWS_SESSION_TOKEN",KMQ="AWS_CREDENTIAL_EXPIRATION",VMQ="AWS_CREDENTIAL_SCOPE",FMQ="AWS_ACCOUNT_ID",w86=(A)=>async()=>{A?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let Q=process.env[IMQ],B=process.env[WMQ],G=process.env[DMQ],Z=process.env[KMQ],Y=process.env[VMQ],J=process.env[FMQ];if(Q&&B){let X={accessKeyId:Q,secretAccessKey:B,...G&&{sessionToken:G},...Z&&{expiration:new Date(Z)},...Y&&{credentialScope:Y},...J&&{accountId:J}};return q86.setCredentialFeature(X,"CREDENTIALS_ENV_VARS","g"),X}throw new N86.CredentialsProviderError("Unable to find environment variable credentials.",{logger:A?.logger})};L86.ENV_ACCOUNT_ID=FMQ;L86.ENV_CREDENTIAL_SCOPE=VMQ;L86.ENV_EXPIRATION=KMQ;L86.ENV_KEY=IMQ;L86.ENV_SECRET=WMQ;L86.ENV_SESSION=DMQ;L86.fromEnv=w86});var c1A=U((Y56)=>{var Xv=TD(),S86=qA("url"),x86=qA("buffer"),y86=qA("http"),hy1=Dq(),v86=vM();function qNA(A){return new Promise((Q,B)=>{let G=y86.request({method:"GET",...A,hostname:A.hostname?.replace(/^\[(.+)\]$/,"$1")});G.on("error",(Z)=>{B(Object.assign(new Xv.ProviderError("Unable to connect to instance metadata service"),Z)),G.destroy()}),G.on("timeout",()=>{B(new Xv.ProviderError("TimeoutError from instance metadata service")),G.destroy()}),G.on("response",(Z)=>{let{statusCode:Y=400}=Z;if(Y<200||300<=Y)B(Object.assign(new Xv.ProviderError("Error response received from instance metadata service"),{statusCode:Y})),G.destroy();let J=[];Z.on("data",(X)=>{J.push(X)}),Z.on("end",()=>{Q(x86.Buffer.concat(J)),G.destroy()})}),G.end()})}var CMQ=(A)=>Boolean(A)&&typeof A==="object"&&typeof A.AccessKeyId==="string"&&typeof A.SecretAccessKey==="string"&&typeof A.Token==="string"&&typeof A.Expiration==="string",$MQ=(A)=>({accessKeyId:A.AccessKeyId,secretAccessKey:A.SecretAccessKey,sessionToken:A.Token,expiration:new Date(A.Expiration),...A.AccountId&&{accountId:A.AccountId}}),UMQ=1000,qMQ=0,gy1=({maxRetries:A=qMQ,timeout:Q=UMQ})=>({maxRetries:A,timeout:Q}),by1=(A,Q)=>{let B=A();for(let G=0;G<Q;G++)B=B.catch(A);return B},kaA="AWS_CONTAINER_CREDENTIALS_FULL_URI",baA="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",fy1="AWS_CONTAINER_AUTHORIZATION_TOKEN",k86=(A={})=>{let{timeout:Q,maxRetries:B}=gy1(A);return()=>by1(async()=>{let G=await u86({logger:A.logger}),Z=JSON.parse(await b86(Q,G));if(!CMQ(Z))throw new Xv.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:A.logger});return $MQ(Z)},B)},b86=async(A,Q)=>{if(process.env[fy1])Q.headers={...Q.headers,Authorization:process.env[fy1]};return(await qNA({...Q,timeout:A})).toString()},f86="169.254.170.2",h86={localhost:!0,"127.0.0.1":!0},g86={"http:":!0,"https:":!0},u86=async({logger:A})=>{if(process.env[baA])return{hostname:f86,path:process.env[baA]};if(process.env[kaA]){let Q=S86.parse(process.env[kaA]);if(!Q.hostname||!(Q.hostname in h86))throw new Xv.CredentialsProviderError(`${Q.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:A});if(!Q.protocol||!(Q.protocol in g86))throw new Xv.CredentialsProviderError(`${Q.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:A});return{...Q,port:Q.port?parseInt(Q.port,10):void 0}}throw new Xv.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${baA} or ${kaA} environment variable is set`,{tryNextLink:!1,logger:A})};class uy1 extends Xv.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(A,Q=!0){super(A,Q);this.tryNextLink=Q,Object.setPrototypeOf(this,uy1.prototype)}}Y56.Endpoint=void 0;(function(A){A.IPv4="http://169.254.169.254",A.IPv6="http://[fd00:ec2::254]"})(Y56.Endpoint||(Y56.Endpoint={}));var m86="AWS_EC2_METADATA_SERVICE_ENDPOINT",d86="ec2_metadata_service_endpoint",p86={environmentVariableSelector:(A)=>A[m86],configFileSelector:(A)=>A[d86],default:void 0},TZA;(function(A){A.IPv4="IPv4",A.IPv6="IPv6"})(TZA||(TZA={}));var c86="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",l86="ec2_metadata_service_endpoint_mode",i86={environmentVariableSelector:(A)=>A[c86],configFileSelector:(A)=>A[l86],default:TZA.IPv4},NMQ=async()=>v86.parseUrl(await n86()||await a86()),n86=async()=>hy1.loadConfig(p86)(),a86=async()=>{let A=await hy1.loadConfig(i86)();switch(A){case TZA.IPv4:return Y56.Endpoint.IPv4;case TZA.IPv6:return Y56.Endpoint.IPv6;default:throw Error(`Unsupported endpoint mode: ${A}. Select from ${Object.values(TZA)}`)}},o86=300,r86=300,s86="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",HMQ=(A,Q)=>{let B=o86+Math.floor(Math.random()*r86),G=new Date(Date.now()+B*1000);Q.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(G)}.
For more information, please visit: `+s86);let Z=A.originalExpiration??A.expiration;return{...A,...Z?{originalExpiration:Z}:{},expiration:G}},t86=(A,Q={})=>{let B=Q?.logger||console,G;return async()=>{let Z;try{if(Z=await A(),Z.expiration&&Z.expiration.getTime()<Date.now())Z=HMQ(Z,B)}catch(Y){if(G)B.warn("Credential renew failed: ",Y),Z=HMQ(G,B);else throw Y}return G=Z,Z}},wMQ="/latest/meta-data/iam/security-credentials/",e86="/latest/api/token",ky1="AWS_EC2_METADATA_V1_DISABLED",EMQ="ec2_metadata_v1_disabled",zMQ="x-aws-ec2-metadata-token",A56=(A={})=>t86(Q56(A),{logger:A.logger}),Q56=(A={})=>{let Q=!1,{logger:B,profile:G}=A,{timeout:Z,maxRetries:Y}=gy1(A),J=async(X,I)=>{if(Q||I.headers?.[zMQ]==null){let K=!1,V=!1,F=await hy1.loadConfig({environmentVariableSelector:(H)=>{let E=H[ky1];if(V=!!E&&E!=="false",E===void 0)throw new Xv.CredentialsProviderError(`${ky1} not set in env, checking config file next.`,{logger:A.logger});return V},configFileSelector:(H)=>{let E=H[EMQ];return K=!!E&&E!=="false",K},default:!1},{profile:G})();if(A.ec2MetadataV1Disabled||F){let H=[];if(A.ec2MetadataV1Disabled)H.push("credential provider initialization (runtime option ec2MetadataV1Disabled)");if(K)H.push(`config file profile (${EMQ})`);if(V)H.push(`process environment variable (${ky1})`);throw new uy1(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${H.join(", ")}].`)}}let D=(await by1(async()=>{let K;try{K=await G56(I)}catch(V){if(V.statusCode===401)Q=!1;throw V}return K},X)).trim();return by1(async()=>{let K;try{K=await Z56(D,I,A)}catch(V){if(V.statusCode===401)Q=!1;throw V}return K},X)};return async()=>{let X=await NMQ();if(Q)return B?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),J(Y,{...X,timeout:Z});else{let I;try{I=(await B56({...X,timeout:Z})).toString()}catch(W){if(W?.statusCode===400)throw Object.assign(W,{message:"EC2 Metadata token request returned error"});else if(W.message==="TimeoutError"||[403,404,405].includes(W.statusCode))Q=!0;return B?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),J(Y,{...X,timeout:Z})}return J(Y,{...X,headers:{[zMQ]:I},timeout:Z})}}},B56=async(A)=>qNA({...A,path:e86,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),G56=async(A)=>(await qNA({...A,path:wMQ})).toString(),Z56=async(A,Q,B)=>{let G=JSON.parse((await qNA({...Q,path:wMQ+A})).toString());if(!CMQ(G))throw new Xv.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:B.logger});return $MQ(G)};Y56.DEFAULT_MAX_RETRIES=qMQ;Y56.DEFAULT_TIMEOUT=UMQ;Y56.ENV_CMDS_AUTH_TOKEN=fy1;Y56.ENV_CMDS_FULL_URI=kaA;Y56.ENV_CMDS_RELATIVE_URI=baA;Y56.fromContainerMetadata=k86;Y56.fromInstanceMetadata=A56;Y56.getInstanceMetadataEndpoint=NMQ;Y56.httpRequest=qNA;Y56.providerConfigFromInit=gy1});var MMQ=U((LMQ)=>{Object.defineProperty(LMQ,"__esModule",{value:!0});LMQ.checkUrl=void 0;var z56=TD(),C56="169.254.170.2",$56="169.254.170.23",U56="[fd00:ec2::23]",q56=(A,Q)=>{if(A.protocol==="https:")return;if(A.hostname===C56||A.hostname===$56||A.hostname===U56)return;if(A.hostname.includes("[")){if(A.hostname==="[::1]"||A.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(A.hostname==="localhost")return;let B=A.hostname.split("."),G=(Z)=>{let Y=parseInt(Z,10);return 0<=Y&&Y<=255};if(B[0]==="127"&&G(B[1])&&G(B[2])&&G(B[3])&&B.length===4)return}throw new z56.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:Q})};LMQ.checkUrl=q56});var ny1=U((R56)=>{R56.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(R56.HttpAuthLocation||(R56.HttpAuthLocation={}));R56.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(R56.HttpApiKeyAuthLocation||(R56.HttpApiKeyAuthLocation={}));R56.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(R56.EndpointURLScheme||(R56.EndpointURLScheme={}));R56.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(R56.AlgorithmId||(R56.AlgorithmId={}));var N56=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>R56.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>R56.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},w56=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},L56=(A)=>{return N56(A)},O56=(A)=>{return w56(A)};R56.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(R56.FieldPosition||(R56.FieldPosition={}));var M56="__smithy_context";R56.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(R56.IniSectionType||(R56.IniSectionType={}));R56.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(R56.RequestHandlerProtocol||(R56.RequestHandlerProtocol={}));R56.SMITHY_CONTEXT_KEY=M56;R56.getDefaultClientConfiguration=L56;R56.resolveDefaultRuntimeConfig=O56});var TMQ=U((k56)=>{var P56=ny1(),S56=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},x56=(A)=>{return{httpHandler:A.httpHandler()}};class RMQ{name;kind;values;constructor({name:A,kind:Q=P56.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class _MQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class faA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new faA({...A,headers:{...A.headers}});if(Q.query)Q.query=y56(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return faA.clone(this)}}function y56(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class jMQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function v56(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}k56.Field=RMQ;k56.Fields=_MQ;k56.HttpRequest=faA;k56.HttpResponse=jMQ;k56.getHttpHandlerExtensionConfiguration=S56;k56.isValidHostname=v56;k56.resolveHttpHandlerRuntimeConfig=x56});var dMQ=U((SZA)=>{var xMQ=Bv(),ty1=Iq(),oy1=ny1(),p56=IX(),PMQ=Xq();class yMQ{config;middlewareStack=xMQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var ay1="***SensitiveInformation***";function ry1(A,Q){if(Q==null)return Q;let B=p56.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return ay1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return ay1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return ay1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=ry1(J,G[Y]);return Z}return Q}class ey1{middlewareStack=xMQ.constructStack();schema;static classBuilder(){return new vMQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[oy1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class vMQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends ey1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?ry1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?ry1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var c56="***SensitiveInformation***",l56=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class PZA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return PZA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===PZA)return PZA.isInstance(A);if(PZA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var kMQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},bMQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=n56(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw kMQ(J,Q)},i56=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{bMQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},n56=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),a56=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},SMQ=!1,o56=(A)=>{if(A&&!SMQ&&parseInt(A.substring(1,A.indexOf(".")))<16)SMQ=!0},r56=(A)=>{let Q=[];for(let B in oy1.AlgorithmId){let G=oy1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},s56=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},t56=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},e56=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},fMQ=(A)=>{return Object.assign(r56(A),t56(A))},A76=fMQ,Q76=(A)=>{return Object.assign(s56(A),e56(A))},B76=(A)=>Array.isArray(A)?A:[A],hMQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=hMQ(A[B]);return A},G76=(A)=>{return A!=null};class gMQ{trace(){}debug(){}info(){}warn(){}error(){}}function uMQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,J76(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}mMQ(G,null,Y,J)}return G}var Z76=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},Y76=(A,Q)=>{let B={};for(let G in Q)mMQ(B,A,Q,G);return B},J76=(A,Q,B)=>{return uMQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},mMQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=X76,I=I76,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},X76=(A)=>A!=null,I76=(A)=>A,W76=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},D76=(A)=>A.toISOString().replace(".000Z","Z"),sy1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(sy1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=sy1(A[B])}return Q}return A};Object.defineProperty(SZA,"collectBody",{enumerable:!0,get:function(){return ty1.collectBody}});Object.defineProperty(SZA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return ty1.extendedEncodeURIComponent}});Object.defineProperty(SZA,"resolvedPath",{enumerable:!0,get:function(){return ty1.resolvedPath}});SZA.Client=yMQ;SZA.Command=ey1;SZA.NoOpLogger=gMQ;SZA.SENSITIVE_STRING=c56;SZA.ServiceException=PZA;SZA._json=sy1;SZA.convertMap=Z76;SZA.createAggregatedClient=l56;SZA.decorateServiceException=kMQ;SZA.emitWarningIfUnsupportedVersion=o56;SZA.getArrayIfSingleItem=B76;SZA.getDefaultClientConfiguration=A76;SZA.getDefaultExtensionConfiguration=fMQ;SZA.getValueFromTextNode=hMQ;SZA.isSerializableHeaderValue=G76;SZA.loadConfigsForDefaultMode=a56;SZA.map=uMQ;SZA.resolveDefaultRuntimeConfig=Q76;SZA.serializeDateTime=D76;SZA.serializeFloat=W76;SZA.take=Y76;SZA.throwDefaultError=bMQ;SZA.withBaseException=i56;Object.keys(PMQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(SZA,A))Object.defineProperty(SZA,A,{enumerable:!0,get:function(){return PMQ[A]}})})});var cMQ=U((pMQ)=>{Object.defineProperty(pMQ,"__esModule",{value:!0});pMQ.createGetRequest=f76;pMQ.getCredentials=h76;var Av1=TD(),v76=TMQ(),k76=dMQ(),b76=xP1();function f76(A){return new v76.HttpRequest({protocol:A.protocol,hostname:A.hostname,port:Number(A.port),path:A.pathname,query:Array.from(A.searchParams.entries()).reduce((Q,[B,G])=>{return Q[B]=G,Q},{}),fragment:A.hash})}async function h76(A,Q){let G=await(0,b76.sdkStreamMixin)(A.body).transformToString();if(A.statusCode===200){let Z=JSON.parse(G);if(typeof Z.AccessKeyId!=="string"||typeof Z.SecretAccessKey!=="string"||typeof Z.Token!=="string"||typeof Z.Expiration!=="string")throw new Av1.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:Q});return{accessKeyId:Z.AccessKeyId,secretAccessKey:Z.SecretAccessKey,sessionToken:Z.Token,expiration:(0,k76.parseRfc3339DateTime)(Z.Expiration)}}if(A.statusCode>=400&&A.statusCode<500){let Z={};try{Z=JSON.parse(G)}catch(Y){}throw Object.assign(new Av1.CredentialsProviderError(`Server responded with status: ${A.statusCode}`,{logger:Q}),{Code:Z.Code,Message:Z.Message})}throw new Av1.CredentialsProviderError(`Server responded with status: ${A.statusCode}`,{logger:Q})}});var nMQ=U((lMQ)=>{Object.defineProperty(lMQ,"__esModule",{value:!0});lMQ.retryWrapper=void 0;var m76=(A,Q,B)=>{return async()=>{for(let G=0;G<Q;++G)try{return await A()}catch(Z){await new Promise((Y)=>setTimeout(Y,B))}return await A()}};lMQ.retryWrapper=m76});var tMQ=U((rMQ)=>{Object.defineProperty(rMQ,"__esModule",{value:!0});rMQ.fromHttp=void 0;var d76=NZ(),p76=Wq(),c76=dw(),aMQ=TD(),l76=d76.__importDefault(qA("fs/promises")),i76=MMQ(),oMQ=cMQ(),n76=nMQ(),a76="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",o76="http://169.254.170.2",r76="AWS_CONTAINER_CREDENTIALS_FULL_URI",s76="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",t76="AWS_CONTAINER_AUTHORIZATION_TOKEN",e76=(A={})=>{A.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let Q,B=A.awsContainerCredentialsRelativeUri??process.env[a76],G=A.awsContainerCredentialsFullUri??process.env[r76],Z=A.awsContainerAuthorizationToken??process.env[t76],Y=A.awsContainerAuthorizationTokenFile??process.env[s76],J=A.logger?.constructor?.name==="NoOpLogger"||!A.logger?.warn?console.warn:A.logger.warn.bind(A.logger);if(B&&G)J("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),J("awsContainerCredentialsFullUri will take precedence.");if(Z&&Y)J("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),J("awsContainerAuthorizationToken will take precedence.");if(G)Q=G;else if(B)Q=`${o76}${B}`;else throw new aMQ.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:A.logger});let X=new URL(Q);(0,i76.checkUrl)(X,A.logger);let I=c76.NodeHttpHandler.create({requestTimeout:A.timeout??1000,connectionTimeout:A.timeout??1000});return(0,n76.retryWrapper)(async()=>{let W=(0,oMQ.createGetRequest)(X);if(Z)W.headers.Authorization=Z;else if(Y)W.headers.Authorization=(await l76.default.readFile(Y)).toString();try{let D=await I.handle(W);return(0,oMQ.getCredentials)(D.response).then((K)=>(0,p76.setCredentialFeature)(K,"CREDENTIALS_HTTP","z"))}catch(D){throw new aMQ.CredentialsProviderError(String(D),{logger:A.logger})}},A.maxRetries??3,A.timeout??1000)};rMQ.fromHttp=e76});var haA=U((Qv1)=>{Object.defineProperty(Qv1,"__esModule",{value:!0});Qv1.fromHttp=void 0;var AG6=tMQ();Object.defineProperty(Qv1,"fromHttp",{enumerable:!0,get:function(){return AG6.fromHttp}})});var WRQ=U((KG6)=>{var Bv1=XaA(),Ni=iG(),eMQ=TD(),BG6=Wq(),ARQ=pS1(),QRQ=(A)=>Bv1.HttpResponse.isInstance(A)?A.headers?.date??A.headers?.Date:void 0,Gv1=(A)=>new Date(Date.now()+A),GG6=(A,Q)=>Math.abs(Gv1(Q).getTime()-A)>=300000,BRQ=(A,Q)=>{let B=Date.parse(A);if(GG6(B,Q))return B-Date.now();return Q},wNA=(A,Q)=>{if(!Q)throw Error(`Property \`${A}\` is not resolved for AWS SDK SigV4Auth`);return Q},Zv1=async(A)=>{let Q=wNA("context",A.context),B=wNA("config",A.config),G=Q.endpointV2?.properties?.authSchemes?.[0],Y=await wNA("signer",B.signer)(G),J=A?.signingRegion,X=A?.signingRegionSet,I=A?.signingName;return{config:B,signer:Y,signingRegion:J,signingRegionSet:X,signingName:I}};class gaA{async sign(A,Q,B){if(!Bv1.HttpRequest.isInstance(A))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let G=await Zv1(B),{config:Z,signer:Y}=G,{signingRegion:J,signingName:X}=G,I=B.context;if(I?.authSchemes?.length??!1){let[D,K]=I.authSchemes;if(D?.name==="sigv4a"&&K?.name==="sigv4")J=K?.signingRegion??J,X=K?.signingName??X}return await Y.sign(A,{signingDate:Gv1(Z.systemClockOffset),signingRegion:J,signingService:X})}errorHandler(A){return(Q)=>{let B=Q.ServerTime??QRQ(Q.$response);if(B){let G=wNA("config",A.config),Z=G.systemClockOffset;if(G.systemClockOffset=BRQ(B,G.systemClockOffset),G.systemClockOffset!==Z&&Q.$metadata)Q.$metadata.clockSkewCorrected=!0}throw Q}}successHandler(A,Q){let B=QRQ(A);if(B){let G=wNA("config",Q.config);G.systemClockOffset=BRQ(B,G.systemClockOffset)}}}var ZG6=gaA;class JRQ extends gaA{async sign(A,Q,B){if(!Bv1.HttpRequest.isInstance(A))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:G,signer:Z,signingRegion:Y,signingRegionSet:J,signingName:X}=await Zv1(B),W=(await G.sigv4aSigningRegionSet?.()??J??[Y]).join(",");return await Z.sign(A,{signingDate:Gv1(G.systemClockOffset),signingRegion:W,signingService:X})}}var GRQ=(A)=>typeof A==="string"&&A.length>0?A.split(",").map((Q)=>Q.trim()):[],XRQ=(A)=>`AWS_BEARER_TOKEN_${A.replace(/[\s-]/g,"_").toUpperCase()}`,ZRQ="AWS_AUTH_SCHEME_PREFERENCE",YRQ="auth_scheme_preference",YG6={environmentVariableSelector:(A,Q)=>{if(Q?.signingName){if(XRQ(Q.signingName)in A)return["httpBearerAuth"]}if(!(ZRQ in A))return;return GRQ(A[ZRQ])},configFileSelector:(A)=>{if(!(YRQ in A))return;return GRQ(A[YRQ])},default:[]},JG6=(A)=>{return A.sigv4aSigningRegionSet=Ni.normalizeProvider(A.sigv4aSigningRegionSet),A},XG6={environmentVariableSelector(A){if(A.AWS_SIGV4A_SIGNING_REGION_SET)return A.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map((Q)=>Q.trim());throw new eMQ.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(A){if(A.sigv4a_signing_region_set)return(A.sigv4a_signing_region_set??"").split(",").map((Q)=>Q.trim());throw new eMQ.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0},IRQ=(A)=>{let Q=A.credentials,B=!!A.credentials,G=void 0;Object.defineProperty(A,"credentials",{set(W){if(W&&W!==Q&&W!==G)B=!0;Q=W;let D=WG6(A,{credentials:Q,credentialDefaultProvider:A.credentialDefaultProvider}),K=DG6(A,D);if(B&&!K.attributed)G=async(V)=>K(V).then((F)=>BG6.setCredentialFeature(F,"CREDENTIALS_CODE","e")),G.memoized=K.memoized,G.configBound=K.configBound,G.attributed=!0;else G=K},get(){return G},enumerable:!0,configurable:!0}),A.credentials=Q;let{signingEscapePath:Z=!0,systemClockOffset:Y=A.systemClockOffset||0,sha256:J}=A,X;if(A.signer)X=Ni.normalizeProvider(A.signer);else if(A.regionInfoProvider)X=()=>Ni.normalizeProvider(A.region)().then(async(W)=>[await A.regionInfoProvider(W,{useFipsEndpoint:await A.useFipsEndpoint(),useDualstackEndpoint:await A.useDualstackEndpoint()})||{},W]).then(([W,D])=>{let{signingRegion:K,signingService:V}=W;A.signingRegion=A.signingRegion||K||D,A.signingName=A.signingName||V||A.serviceId;let F={...A,credentials:A.credentials,region:A.signingRegion,service:A.signingName,sha256:J,uriEscapePath:Z};return new(A.signerConstructor||ARQ.SignatureV4)(F)});else X=async(W)=>{W=Object.assign({},{name:"sigv4",signingName:A.signingName||A.defaultSigningName,signingRegion:await Ni.normalizeProvider(A.region)(),properties:{}},W);let{signingRegion:D,signingName:K}=W;A.signingRegion=A.signingRegion||D,A.signingName=A.signingName||K||A.serviceId;let V={...A,credentials:A.credentials,region:A.signingRegion,service:A.signingName,sha256:J,uriEscapePath:Z};return new(A.signerConstructor||ARQ.SignatureV4)(V)};return Object.assign(A,{systemClockOffset:Y,signingEscapePath:Z,signer:X})},IG6=IRQ;function WG6(A,{credentials:Q,credentialDefaultProvider:B}){let G;if(Q)if(!Q?.memoized)G=Ni.memoizeIdentityProvider(Q,Ni.isIdentityExpired,Ni.doesIdentityRequireRefresh);else G=Q;else if(B)G=Ni.normalizeProvider(B(Object.assign({},A,{parentClientConfig:A})));else G=async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")};return G.memoized=!0,G}function DG6(A,Q){if(Q.configBound)return Q;let B=async(G)=>Q({...G,callerClientConfig:A});return B.memoized=Q.memoized,B.configBound=!0,B}KG6.AWSSDKSigV4Signer=ZG6;KG6.AwsSdkSigV4ASigner=JRQ;KG6.AwsSdkSigV4Signer=gaA;KG6.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS=YG6;KG6.NODE_SIGV4A_CONFIG_OPTIONS=XG6;KG6.getBearerTokenEnvKey=XRQ;KG6.resolveAWSSDKSigV4Config=IG6;KG6.resolveAwsSdkSigV4AConfig=JG6;KG6.resolveAwsSdkSigV4Config=IRQ;KG6.validateSigningProperties=Zv1});var Kv1=U((_G6)=>{_G6.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(_G6.HttpAuthLocation||(_G6.HttpAuthLocation={}));_G6.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(_G6.HttpApiKeyAuthLocation||(_G6.HttpApiKeyAuthLocation={}));_G6.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(_G6.EndpointURLScheme||(_G6.EndpointURLScheme={}));_G6.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(_G6.AlgorithmId||(_G6.AlgorithmId={}));var wG6=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>_G6.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>_G6.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},LG6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},OG6=(A)=>{return wG6(A)},MG6=(A)=>{return LG6(A)};_G6.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(_G6.FieldPosition||(_G6.FieldPosition={}));var RG6="__smithy_context";_G6.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(_G6.IniSectionType||(_G6.IniSectionType={}));_G6.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(_G6.RequestHandlerProtocol||(_G6.RequestHandlerProtocol={}));_G6.SMITHY_CONTEXT_KEY=RG6;_G6.getDefaultClientConfiguration=OG6;_G6.resolveDefaultRuntimeConfig=MG6});var rC=U((yZA)=>{var VRQ=Bv(),zv1=Iq(),Fv1=Kv1(),SG6=IX(),DRQ=Xq();class FRQ{config;middlewareStack=VRQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var Vv1="***SensitiveInformation***";function Hv1(A,Q){if(Q==null)return Q;let B=SG6.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return Vv1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return Vv1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return Vv1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=Hv1(J,G[Y]);return Z}return Q}class Cv1{middlewareStack=VRQ.constructStack();schema;static classBuilder(){return new HRQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[Fv1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class HRQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends Cv1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?Hv1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?Hv1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var xG6="***SensitiveInformation***",yG6=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class xZA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return xZA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===xZA)return xZA.isInstance(A);if(xZA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var ERQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},zRQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=kG6(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw ERQ(J,Q)},vG6=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{zRQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},kG6=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),bG6=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},KRQ=!1,fG6=(A)=>{if(A&&!KRQ&&parseInt(A.substring(1,A.indexOf(".")))<16)KRQ=!0},hG6=(A)=>{let Q=[];for(let B in Fv1.AlgorithmId){let G=Fv1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},gG6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},uG6=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},mG6=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},CRQ=(A)=>{return Object.assign(hG6(A),uG6(A))},dG6=CRQ,pG6=(A)=>{return Object.assign(gG6(A),mG6(A))},cG6=(A)=>Array.isArray(A)?A:[A],$RQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=$RQ(A[B]);return A},lG6=(A)=>{return A!=null};class URQ{trace(){}debug(){}info(){}warn(){}error(){}}function qRQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,aG6(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}NRQ(G,null,Y,J)}return G}var iG6=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},nG6=(A,Q)=>{let B={};for(let G in Q)NRQ(B,A,Q,G);return B},aG6=(A,Q,B)=>{return qRQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},NRQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=oG6,I=rG6,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},oG6=(A)=>A!=null,rG6=(A)=>A,sG6=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},tG6=(A)=>A.toISOString().replace(".000Z","Z"),Ev1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(Ev1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=Ev1(A[B])}return Q}return A};Object.defineProperty(yZA,"collectBody",{enumerable:!0,get:function(){return zv1.collectBody}});Object.defineProperty(yZA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return zv1.extendedEncodeURIComponent}});Object.defineProperty(yZA,"resolvedPath",{enumerable:!0,get:function(){return zv1.resolvedPath}});yZA.Client=FRQ;yZA.Command=Cv1;yZA.NoOpLogger=URQ;yZA.SENSITIVE_STRING=xG6;yZA.ServiceException=xZA;yZA._json=Ev1;yZA.convertMap=iG6;yZA.createAggregatedClient=yG6;yZA.decorateServiceException=ERQ;yZA.emitWarningIfUnsupportedVersion=fG6;yZA.getArrayIfSingleItem=cG6;yZA.getDefaultClientConfiguration=dG6;yZA.getDefaultExtensionConfiguration=CRQ;yZA.getValueFromTextNode=$RQ;yZA.isSerializableHeaderValue=lG6;yZA.loadConfigsForDefaultMode=bG6;yZA.map=qRQ;yZA.resolveDefaultRuntimeConfig=pG6;yZA.serializeDateTime=tG6;yZA.serializeFloat=sG6;yZA.take=nG6;yZA.throwDefaultError=zRQ;yZA.withBaseException=vG6;Object.keys(DRQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(yZA,A))Object.defineProperty(yZA,A,{enumerable:!0,get:function(){return DRQ[A]}})})});var Uv1=U((wRQ)=>{Object.defineProperty(wRQ,"__esModule",{value:!0});wRQ.resolveHttpAuthSchemeConfig=wRQ.defaultSSOOIDCHttpAuthSchemeProvider=wRQ.defaultSSOOIDCHttpAuthSchemeParametersProvider=void 0;var wZ6=vY(),$v1=Iz(),LZ6=async(A,Q,B)=>{return{operation:(0,$v1.getSmithyContext)(Q).operation,region:await(0,$v1.normalizeProvider)(A.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};wRQ.defaultSSOOIDCHttpAuthSchemeParametersProvider=LZ6;function OZ6(A){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:A.region},propertiesExtractor:(Q,B)=>({signingProperties:{config:Q,context:B}})}}function MZ6(A){return{schemeId:"smithy.api#noAuth"}}var RZ6=(A)=>{let Q=[];switch(A.operation){case"CreateToken":{Q.push(MZ6(A));break}default:Q.push(OZ6(A))}return Q};wRQ.defaultSSOOIDCHttpAuthSchemeProvider=RZ6;var _Z6=(A)=>{let Q=(0,wZ6.resolveAwsSdkSigV4Config)(A);return Object.assign(Q,{authSchemePreference:(0,$v1.normalizeProvider)(A.authSchemePreference??[])})};wRQ.resolveHttpAuthSchemeConfig=_Z6});var uaA=U((z3G,PZ6)=>{PZ6.exports={name:"@aws-sdk/nested-clients",version:"3.936.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.936.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.936.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.936.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var Tg=U((bZ6)=>{var ORQ=qA("os"),qv1=qA("process"),SZ6=Zv(),MRQ={isCrtAvailable:!1},xZ6=()=>{if(MRQ.isCrtAvailable)return["md/crt-avail"];return null},RRQ=({serviceId:A,clientVersion:Q})=>{return async(B)=>{let G=[["aws-sdk-js",Q],["ua","2.1"],[`os/${ORQ.platform()}`,ORQ.release()],["lang/js"],["md/nodejs",`${qv1.versions.node}`]],Z=xZ6();if(Z)G.push(Z);if(A)G.push([`api/${A}`,Q]);if(qv1.env.AWS_EXECUTION_ENV)G.push([`exec-env/${qv1.env.AWS_EXECUTION_ENV}`]);let Y=await B?.userAgentAppId?.();return Y?[...G,[`app/${Y}`]]:[...G]}},yZ6=RRQ,_RQ="AWS_SDK_UA_APP_ID",jRQ="sdk_ua_app_id",vZ6="sdk-ua-app-id",kZ6={environmentVariableSelector:(A)=>A[_RQ],configFileSelector:(A)=>A[jRQ]??A[vZ6],default:SZ6.DEFAULT_UA_APP_ID};bZ6.NODE_APP_ID_CONFIG_OPTIONS=kZ6;bZ6.UA_APP_ID_ENV_NAME=_RQ;bZ6.UA_APP_ID_INI_NAME=jRQ;bZ6.createDefaultUserAgentProvider=RRQ;bZ6.crtAvailability=MRQ;bZ6.defaultUserAgent=yZ6});var TRQ=U((cZ6)=>{var pZ6=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";cZ6.isArrayBuffer=pZ6});var PRQ=U((oZ6)=>{var iZ6=TRQ(),Nv1=qA("buffer"),nZ6=(A,Q=0,B=A.byteLength-Q)=>{if(!iZ6.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return Nv1.Buffer.from(A,Q,B)},aZ6=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?Nv1.Buffer.from(A,Q):Nv1.Buffer.from(A)};oZ6.fromArrayBuffer=nZ6;oZ6.fromString=aZ6});var Pg=U((AY6)=>{var wv1=PRQ(),tZ6=lG(),eZ6=qA("buffer"),SRQ=qA("crypto");class yRQ{algorithmIdentifier;secret;hash;constructor(A,Q){this.algorithmIdentifier=A,this.secret=Q,this.reset()}update(A,Q){this.hash.update(tZ6.toUint8Array(xRQ(A,Q)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?SRQ.createHmac(this.algorithmIdentifier,xRQ(this.secret)):SRQ.createHash(this.algorithmIdentifier)}}function xRQ(A,Q){if(eZ6.Buffer.isBuffer(A))return A;if(typeof A==="string")return wv1.fromString(A,Q);if(ArrayBuffer.isView(A))return wv1.fromArrayBuffer(A.buffer,A.byteOffset,A.byteLength);return wv1.fromArrayBuffer(A)}AY6.Hash=yRQ});var Sg=U((GY6)=>{var Lv1=qA("node:fs"),BY6=(A)=>{if(!A)return 0;if(typeof A==="string")return Buffer.byteLength(A);else if(typeof A.byteLength==="number")return A.byteLength;else if(typeof A.size==="number")return A.size;else if(typeof A.start==="number"&&typeof A.end==="number")return A.end+1-A.start;else if(A instanceof Lv1.ReadStream){if(A.path!=null)return Lv1.lstatSync(A.path).size;else if(typeof A.fd==="number")return Lv1.fstatSync(A.fd).size}throw Error(`Body Length computation failed for ${A}`)};GY6.calculateBodyLength=BY6});var yg=U((VY6)=>{var vRQ=Gx1(),aG=IX(),xg=Kx1(),LH=Iq(),aV=Xq(),ONA=Hx1(),bRQ=lG(),bM=Cx1();class vZA{queryCompat;constructor(A=!1){this.queryCompat=A}resolveRestContentType(A,Q){let B=Q.getMemberSchemas(),G=Object.values(B).find((Z)=>{return!!Z.getMergedTraits().httpPayload});if(G){let Z=G.getMergedTraits().mediaType;if(Z)return Z;else if(G.isStringSchema())return"text/plain";else if(G.isBlobSchema())return"application/octet-stream";else return A}else if(!Q.isUnitSchema()){if(Object.values(B).find((Y)=>{let{httpQuery:J,httpQueryParams:X,httpHeader:I,httpLabel:W,httpPrefixHeaders:D}=Y.getMergedTraits();return!J&&!X&&!I&&!W&&D===void 0}))return A}}async getErrorSchemaOrThrowBaseException(A,Q,B,G,Z,Y){let J=Q,X=A;if(A.includes("#"))[J,X]=A.split("#");let I={$metadata:Z,$fault:B.statusCode<500?"client":"server"},W=aG.TypeRegistry.for(J);try{return{errorSchema:Y?.(W,X)??W.getSchema(A),errorMetadata:I}}catch(D){G.message=G.message??G.Message??"UnknownError";let K=aG.TypeRegistry.for("smithy.ts.sdk.synthetic."+J),V=K.getBaseException();if(V){let F=K.getErrorCtor(V)??Error;throw this.decorateServiceException(Object.assign(new F({name:X}),I),G)}throw this.decorateServiceException(Object.assign(Error(X),I),G)}}decorateServiceException(A,Q={}){if(this.queryCompat){let B=A.Message??Q.Message,G=xg.decorateServiceException(A,Q);if(B)G.Message=B,G.message=B;return G}return xg.decorateServiceException(A,Q)}setQueryCompatError(A,Q){let B=Q.headers?.["x-amzn-query-error"];if(A!==void 0&&B!=null){let[G,Z]=B.split(";"),Y=Object.entries(A),J={Code:G,Type:Z};Object.assign(A,J);for(let[X,I]of Y)J[X]=I;delete J.__type,A.Error=J}}queryCompatOutput(A,Q){if(A.Error)Q.Error=A.Error;if(A.Type)Q.Type=A.Type;if(A.Code)Q.Code=A.Code}}class fRQ extends vRQ.SmithyRpcV2CborProtocol{awsQueryCompatible;mixin;constructor({defaultNamespace:A,awsQueryCompatible:Q}){super({defaultNamespace:A});this.awsQueryCompatible=!!Q,this.mixin=new vZA(this.awsQueryCompatible)}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(this.awsQueryCompatible)G.headers["x-amzn-query-mode"]="true";return G}async handleError(A,Q,B,G,Z){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(G,B);let Y=vRQ.loadSmithyRpcV2CborErrorCode(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=aG.NormalizedSchema.of(J),W=G.message??G.Message??"Unknown",K=new(aG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W),V={};for(let[F,H]of I.structIterator())V[F]=this.deserializer.readValue(H,G[F]);if(this.awsQueryCompatible)this.mixin.queryCompatOutput(G,V);throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}}var YY6=(A)=>{if(A==null)return A;if(typeof A==="number"||typeof A==="bigint"){let Q=Error(`Received number ${A} where a string was expected.`);return Q.name="Warning",console.warn(Q),String(A)}if(typeof A==="boolean"){let Q=Error(`Received boolean ${A} where a string was expected.`);return Q.name="Warning",console.warn(Q),String(A)}return A},JY6=(A)=>{if(A==null)return A;if(typeof A==="string"){let Q=A.toLowerCase();if(A!==""&&Q!=="false"&&Q!=="true"){let B=Error(`Received string "${A}" where a boolean was expected.`);B.name="Warning",console.warn(B)}return A!==""&&Q!=="false"}return A},XY6=(A)=>{if(A==null)return A;if(typeof A==="string"){let Q=Number(A);if(Q.toString()!==A){let B=Error(`Received string "${A}" where a number was expected.`);return B.name="Warning",console.warn(B),A}return Q}return A};class wi{serdeContext;setSerdeContext(A){this.serdeContext=A}}function IY6(A,Q,B){if(B?.source){let G=B.source;if(typeof Q==="number"){if(Q>Number.MAX_SAFE_INTEGER||Q<Number.MIN_SAFE_INTEGER||G!==String(Q))if(G.includes("."))return new aV.NumericValue(G,"bigDecimal");else return BigInt(G)}}return Q}var hRQ=(A,Q)=>xg.collectBody(A,Q).then((B)=>(Q?.utf8Encoder??bRQ.toUtf8)(B)),Ov1=(A,Q)=>hRQ(A,Q).then((B)=>{if(B.length)try{return JSON.parse(B)}catch(G){if(G?.name==="SyntaxError")Object.defineProperty(G,"$responseBodyText",{value:B});throw G}return{}}),WY6=async(A,Q)=>{let B=await Ov1(A,Q);return B.message=B.message??B.Message,B},Mv1=(A,Q)=>{let B=(Y,J)=>Object.keys(Y).find((X)=>X.toLowerCase()===J.toLowerCase()),G=(Y)=>{let J=Y;if(typeof J==="number")J=J.toString();if(J.indexOf(",")>=0)J=J.split(",")[0];if(J.indexOf(":")>=0)J=J.split(":")[0];if(J.indexOf("#")>=0)J=J.split("#")[1];return J},Z=B(A.headers,"x-amzn-errortype");if(Z!==void 0)return G(A.headers[Z]);if(Q&&typeof Q==="object"){let Y=B(Q,"code");if(Y&&Q[Y]!==void 0)return G(Q[Y]);if(Q.__type!==void 0)return G(Q.__type)}};class Rv1 extends wi{settings;constructor(A){super();this.settings=A}async read(A,Q){return this._read(A,typeof Q==="string"?JSON.parse(Q,IY6):await Ov1(Q,this.serdeContext))}readObject(A,Q){return this._read(A,Q)}_read(A,Q){let B=Q!==null&&typeof Q==="object",G=aG.NormalizedSchema.of(A);if(G.isListSchema()&&Array.isArray(Q)){let Y=G.getValueSchema(),J=[],X=!!G.getMergedTraits().sparse;for(let I of Q)if(X||I!=null)J.push(this._read(Y,I));return J}else if(G.isMapSchema()&&B){let Y=G.getValueSchema(),J={},X=!!G.getMergedTraits().sparse;for(let[I,W]of Object.entries(Q))if(X||W!=null)J[I]=this._read(Y,W);return J}else if(G.isStructSchema()&&B){let Y={};for(let[J,X]of G.structIterator()){let I=this.settings.jsonName?X.getMergedTraits().jsonName??J:J,W=this._read(X,Q[I]);if(W!=null)Y[J]=W}return Y}if(G.isBlobSchema()&&typeof Q==="string")return ONA.fromBase64(Q);let Z=G.getMergedTraits().mediaType;if(G.isStringSchema()&&typeof Q==="string"&&Z){if(Z==="application/json"||Z.endsWith("+json"))return aV.LazyJsonString.from(Q)}if(G.isTimestampSchema()&&Q!=null)switch(LH.determineTimestampFormat(G,this.settings)){case 5:return aV.parseRfc3339DateTimeWithOffset(Q);case 6:return aV.parseRfc7231DateTime(Q);case 7:return aV.parseEpochTimestamp(Q);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",Q),new Date(Q)}if(G.isBigIntegerSchema()&&(typeof Q==="number"||typeof Q==="string"))return BigInt(Q);if(G.isBigDecimalSchema()&&Q!=null){if(Q instanceof aV.NumericValue)return Q;let Y=Q;if(Y.type==="bigDecimal"&&"string"in Y)return new aV.NumericValue(Y.string,Y.type);return new aV.NumericValue(String(Q),"bigDecimal")}if(G.isNumericSchema()&&typeof Q==="string")switch(Q){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(G.isDocumentSchema())if(B){let Y=Array.isArray(Q)?[]:{};for(let[J,X]of Object.entries(Q))if(X instanceof aV.NumericValue)Y[J]=X;else Y[J]=this._read(G,X);return Y}else return structuredClone(Q);return Q}}var kRQ=String.fromCharCode(925);class gRQ{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(A,Q)=>{if(Q instanceof aV.NumericValue){let B=`${kRQ+"nv"+this.counter++}_`+Q.string;return this.values.set(`"${B}"`,Q.string),B}if(typeof Q==="bigint"){let B=Q.toString(),G=`${kRQ+"b"+this.counter++}_`+B;return this.values.set(`"${G}"`,B),G}return Q}}replaceInJson(A){if(this.stage===0)throw Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return A;for(let[Q,B]of this.values)A=A.replace(Q,B);return A}}class _v1 extends wi{settings;buffer;rootSchema;constructor(A){super();this.settings=A}write(A,Q){this.rootSchema=aG.NormalizedSchema.of(A),this.buffer=this._write(this.rootSchema,Q)}writeDiscriminatedDocument(A,Q){if(this.write(A,Q),typeof this.buffer==="object")this.buffer.__type=aG.NormalizedSchema.of(A).getName(!0)}flush(){let{rootSchema:A}=this;if(this.rootSchema=void 0,A?.isStructSchema()||A?.isDocumentSchema()){let Q=new gRQ;return Q.replaceInJson(JSON.stringify(this.buffer,Q.createReplacer(),0))}return this.buffer}_write(A,Q,B){let G=Q!==null&&typeof Q==="object",Z=aG.NormalizedSchema.of(A);if(Z.isListSchema()&&Array.isArray(Q)){let Y=Z.getValueSchema(),J=[],X=!!Z.getMergedTraits().sparse;for(let I of Q)if(X||I!=null)J.push(this._write(Y,I));return J}else if(Z.isMapSchema()&&G){let Y=Z.getValueSchema(),J={},X=!!Z.getMergedTraits().sparse;for(let[I,W]of Object.entries(Q))if(X||W!=null)J[I]=this._write(Y,W);return J}else if(Z.isStructSchema()&&G){let Y={};for(let[J,X]of Z.structIterator()){let I=this.settings.jsonName?X.getMergedTraits().jsonName??J:J,W=this._write(X,Q[J],Z);if(W!==void 0)Y[I]=W}return Y}if(Q===null&&B?.isStructSchema())return;if(Z.isBlobSchema()&&(Q instanceof Uint8Array||typeof Q==="string")||Z.isDocumentSchema()&&Q instanceof Uint8Array){if(Z===this.rootSchema)return Q;return(this.serdeContext?.base64Encoder??ONA.toBase64)(Q)}if((Z.isTimestampSchema()||Z.isDocumentSchema())&&Q instanceof Date)switch(LH.determineTimestampFormat(Z,this.settings)){case 5:return Q.toISOString().replace(".000Z","Z");case 6:return aV.dateToUtcString(Q);case 7:return Q.getTime()/1000;default:return console.warn("Missing timestamp format, using epoch seconds",Q),Q.getTime()/1000}if(Z.isNumericSchema()&&typeof Q==="number"){if(Math.abs(Q)===1/0||isNaN(Q))return String(Q)}if(Z.isStringSchema()){if(typeof Q>"u"&&Z.isIdempotencyToken())return aV.generateIdempotencyToken();let Y=Z.getMergedTraits().mediaType;if(Q!=null&&Y){if(Y==="application/json"||Y.endsWith("+json"))return aV.LazyJsonString.from(Q)}}if(Z.isDocumentSchema())if(G){let Y=Array.isArray(Q)?[]:{};for(let[J,X]of Object.entries(Q))if(X instanceof aV.NumericValue)Y[J]=X;else Y[J]=this._write(Z,X);return Y}else return structuredClone(Q);return Q}}class maA extends wi{settings;constructor(A){super();this.settings=A}createSerializer(){let A=new _v1(this.settings);return A.setSerdeContext(this.serdeContext),A}createDeserializer(){let A=new Rv1(this.settings);return A.setSerdeContext(this.serdeContext),A}}class daA extends LH.RpcProtocol{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B}){super({defaultNamespace:A});this.serviceTarget=Q,this.codec=new maA({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!B,this.mixin=new vZA(this.awsQueryCompatible)}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(!G.path.endsWith("/"))G.path+="/";if(Object.assign(G.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${A.name}`}),this.awsQueryCompatible)G.headers["x-amzn-query-mode"]="true";if(aG.deref(A.input)==="unit"||!G.body)G.body="{}";return G}getPayloadCodec(){return this.codec}async handleError(A,Q,B,G,Z){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(G,B);let Y=Mv1(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=aG.NormalizedSchema.of(J),W=G.message??G.Message??"Unknown",K=new(aG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W),V={};for(let[F,H]of I.structIterator()){let E=H.getMergedTraits().jsonName??F;V[F]=this.codec.createDeserializer().readObject(H,G[E])}if(this.awsQueryCompatible)this.mixin.queryCompatOutput(G,V);throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}}class uRQ extends daA{constructor({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B}){super({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}class mRQ extends daA{constructor({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B}){super({defaultNamespace:A,serviceTarget:Q,awsQueryCompatible:B})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}class dRQ extends LH.HttpBindingProtocol{serializer;deserializer;codec;mixin=new vZA;constructor({defaultNamespace:A}){super({defaultNamespace:A});let Q={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new maA(Q),this.serializer=new LH.HttpInterceptingShapeSerializer(this.codec.createSerializer(),Q),this.deserializer=new LH.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),Q)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(A){this.codec.setSerdeContext(A),super.setSerdeContext(A)}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B),Z=aG.NormalizedSchema.of(A.input);if(!G.headers["content-type"]){let Y=this.mixin.resolveRestContentType(this.getDefaultContentType(),Z);if(Y)G.headers["content-type"]=Y}if(G.body==null&&G.headers["content-type"]===this.getDefaultContentType())G.body="{}";return G}async deserializeResponse(A,Q,B){let G=await super.deserializeResponse(A,Q,B),Z=aG.NormalizedSchema.of(A.output);for(let[Y,J]of Z.structIterator())if(J.getMemberTraits().httpPayload&&!(Y in G))G[Y]=null;return G}async handleError(A,Q,B,G,Z){let Y=Mv1(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=aG.NormalizedSchema.of(J),W=G.message??G.Message??"Unknown",K=new(aG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W);await this.deserializeHttpMessage(J,Q,B,G);let V={};for(let[F,H]of I.structIterator()){let E=H.getMergedTraits().jsonName??F;V[F]=this.codec.createDeserializer().readObject(H,G[E])}throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}getDefaultContentType(){return"application/json"}}var DY6=(A)=>{if(A==null)return;if(typeof A==="object"&&"__type"in A)delete A.__type;return xg.expectUnion(A)};class paA extends wi{settings;stringDeserializer;constructor(A){super();this.settings=A,this.stringDeserializer=new LH.FromStringShapeDeserializer(A)}setSerdeContext(A){this.serdeContext=A,this.stringDeserializer.setSerdeContext(A)}read(A,Q,B){let G=aG.NormalizedSchema.of(A),Z=G.getMemberSchemas();if(G.isStructSchema()&&G.isMemberSchema()&&!!Object.values(Z).find((I)=>{return!!I.getMemberTraits().eventPayload})){let I={},W=Object.keys(Z)[0];if(Z[W].isBlobSchema())I[W]=Q;else I[W]=this.read(Z[W],Q);return I}let J=(this.serdeContext?.utf8Encoder??bRQ.toUtf8)(Q),X=this.parseXml(J);return this.readSchema(A,B?X[B]:X)}readSchema(A,Q){let B=aG.NormalizedSchema.of(A);if(B.isUnitSchema())return;let G=B.getMergedTraits();if(B.isListSchema()&&!Array.isArray(Q))return this.readSchema(B,[Q]);if(Q==null)return Q;if(typeof Q==="object"){let Z=!!G.sparse,Y=!!G.xmlFlattened;if(B.isListSchema()){let X=B.getValueSchema(),I=[],W=X.getMergedTraits().xmlName??"member",D=Y?Q:(Q[0]??Q)[W],K=Array.isArray(D)?D:[D];for(let V of K)if(V!=null||Z)I.push(this.readSchema(X,V));return I}let J={};if(B.isMapSchema()){let X=B.getKeySchema(),I=B.getValueSchema(),W;if(Y)W=Array.isArray(Q)?Q:[Q];else W=Array.isArray(Q.entry)?Q.entry:[Q.entry];let D=X.getMergedTraits().xmlName??"key",K=I.getMergedTraits().xmlName??"value";for(let V of W){let F=V[D],H=V[K];if(H!=null||Z)J[F]=this.readSchema(I,H)}return J}if(B.isStructSchema()){for(let[X,I]of B.structIterator()){let W=I.getMergedTraits(),D=!W.httpPayload?I.getMemberTraits().xmlName??X:W.xmlName??I.getName();if(Q[D]!=null)J[X]=this.readSchema(I,Q[D])}return J}if(B.isDocumentSchema())return Q;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${B.getName(!0)}`)}if(B.isListSchema())return[];if(B.isMapSchema()||B.isStructSchema())return{};return this.stringDeserializer.read(B,Q)}parseXml(A){if(A.length){let Q;try{Q=bM.parseXML(A)}catch(Y){if(Y&&typeof Y==="object")Object.defineProperty(Y,"$responseBodyText",{value:A});throw Y}let B="#text",G=Object.keys(Q)[0],Z=Q[G];if(Z[B])Z[G]=Z[B],delete Z[B];return xg.getValueFromTextNode(Z)}return{}}}class pRQ extends wi{settings;buffer;constructor(A){super();this.settings=A}write(A,Q,B=""){if(this.buffer===void 0)this.buffer="";let G=aG.NormalizedSchema.of(A);if(B&&!B.endsWith("."))B+=".";if(G.isBlobSchema()){if(typeof Q==="string"||Q instanceof Uint8Array)this.writeKey(B),this.writeValue((this.serdeContext?.base64Encoder??ONA.toBase64)(Q))}else if(G.isBooleanSchema()||G.isNumericSchema()||G.isStringSchema()){if(Q!=null)this.writeKey(B),this.writeValue(String(Q));else if(G.isIdempotencyToken())this.writeKey(B),this.writeValue(aV.generateIdempotencyToken())}else if(G.isBigIntegerSchema()){if(Q!=null)this.writeKey(B),this.writeValue(String(Q))}else if(G.isBigDecimalSchema()){if(Q!=null)this.writeKey(B),this.writeValue(Q instanceof aV.NumericValue?Q.string:String(Q))}else if(G.isTimestampSchema()){if(Q instanceof Date)switch(this.writeKey(B),LH.determineTimestampFormat(G,this.settings)){case 5:this.writeValue(Q.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(xg.dateToUtcString(Q));break;case 7:this.writeValue(String(Q.getTime()/1000));break}}else if(G.isDocumentSchema())throw Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${G.getName(!0)}`);else if(G.isListSchema()){if(Array.isArray(Q))if(Q.length===0){if(this.settings.serializeEmptyLists)this.writeKey(B),this.writeValue("")}else{let Z=G.getValueSchema(),Y=this.settings.flattenLists||G.getMergedTraits().xmlFlattened,J=1;for(let X of Q){if(X==null)continue;let I=this.getKey("member",Z.getMergedTraits().xmlName),W=Y?`${B}${J}`:`${B}${I}.${J}`;this.write(Z,X,W),++J}}}else if(G.isMapSchema()){if(Q&&typeof Q==="object"){let Z=G.getKeySchema(),Y=G.getValueSchema(),J=G.getMergedTraits().xmlFlattened,X=1;for(let[I,W]of Object.entries(Q)){if(W==null)continue;let D=this.getKey("key",Z.getMergedTraits().xmlName),K=J?`${B}${X}.${D}`:`${B}entry.${X}.${D}`,V=this.getKey("value",Y.getMergedTraits().xmlName),F=J?`${B}${X}.${V}`:`${B}entry.${X}.${V}`;this.write(Z,I,K),this.write(Y,W,F),++X}}}else if(G.isStructSchema()){if(Q&&typeof Q==="object")for(let[Z,Y]of G.structIterator()){if(Q[Z]==null&&!Y.isIdempotencyToken())continue;let J=this.getKey(Z,Y.getMergedTraits().xmlName),X=`${B}${J}`;this.write(Y,Q[Z],X)}}else if(G.isUnitSchema());else throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${G.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let A=this.buffer;return delete this.buffer,A}getKey(A,Q){let B=Q??A;if(this.settings.capitalizeKeys)return B[0].toUpperCase()+B.slice(1);return B}writeKey(A){if(A.endsWith("."))A=A.slice(0,A.length-1);this.buffer+=`&${LH.extendedEncodeURIComponent(A)}=`}writeValue(A){this.buffer+=LH.extendedEncodeURIComponent(A)}}class jv1 extends LH.RpcProtocol{options;serializer;deserializer;mixin=new vZA;constructor(A){super({defaultNamespace:A.defaultNamespace});this.options=A;let Q={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:A.xmlNamespace,serviceNamespace:A.defaultNamespace,serializeEmptyLists:!0};this.serializer=new pRQ(Q),this.deserializer=new paA(Q)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(A){this.serializer.setSerdeContext(A),this.deserializer.setSerdeContext(A)}getPayloadCodec(){throw Error("AWSQuery protocol has no payload codec.")}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B);if(!G.path.endsWith("/"))G.path+="/";if(Object.assign(G.headers,{"content-type":"application/x-www-form-urlencoded"}),aG.deref(A.input)==="unit"||!G.body)G.body="";let Z=A.name.split("#")[1]??A.name;if(G.body=`Action=${Z}&Version=${this.options.version}`+G.body,G.body.endsWith("&"))G.body=G.body.slice(-1);return G}async deserializeResponse(A,Q,B){let G=this.deserializer,Z=aG.NormalizedSchema.of(A.output),Y={};if(B.statusCode>=300){let D=await LH.collectBody(B.body,Q);if(D.byteLength>0)Object.assign(Y,await G.read(15,D));await this.handleError(A,Q,B,Y,this.deserializeMetadata(B))}for(let D in B.headers){let K=B.headers[D];delete B.headers[D],B.headers[D.toLowerCase()]=K}let J=A.name.split("#")[1]??A.name,X=Z.isStructSchema()&&this.useNestedResult()?J+"Result":void 0,I=await LH.collectBody(B.body,Q);if(I.byteLength>0)Object.assign(Y,await G.read(Z,I,X));return{$metadata:this.deserializeMetadata(B),...Y}}useNestedResult(){return!0}async handleError(A,Q,B,G,Z){let Y=this.loadQueryErrorCode(B,G)??"Unknown",J=this.loadQueryError(G),X=this.loadQueryErrorMessage(G);J.message=X,J.Error={Type:J.Type,Code:J.Code,Message:X};let{errorSchema:I,errorMetadata:W}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,J,Z,(H,E)=>{try{return H.getSchema(E)}catch(z){return H.find((C)=>aG.NormalizedSchema.of(C).getMergedTraits().awsQueryError?.[0]===E)}}),D=aG.NormalizedSchema.of(I),V=new(aG.TypeRegistry.for(I[1]).getErrorCtor(I)??Error)(X),F={Error:J.Error};for(let[H,E]of D.structIterator()){let z=E.getMergedTraits().xmlName??H,C=J[z]??G[z];F[H]=this.deserializer.readSchema(E,C)}throw this.mixin.decorateServiceException(Object.assign(V,W,{$fault:D.getMergedTraits().error,message:X},F),G)}loadQueryErrorCode(A,Q){let B=(Q.Errors?.[0]?.Error??Q.Errors?.Error??Q.Error)?.Code;if(B!==void 0)return B;if(A.statusCode==404)return"NotFound"}loadQueryError(A){return A.Errors?.[0]?.Error??A.Errors?.Error??A.Error}loadQueryErrorMessage(A){let Q=this.loadQueryError(A);return Q?.message??Q?.Message??A.message??A.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}class cRQ extends jv1{options;constructor(A){super(A);this.options=A;let Q={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,Q)}useNestedResult(){return!1}}var lRQ=(A,Q)=>hRQ(A,Q).then((B)=>{if(B.length){let G;try{G=bM.parseXML(B)}catch(X){if(X&&typeof X==="object")Object.defineProperty(X,"$responseBodyText",{value:B});throw X}let Z="#text",Y=Object.keys(G)[0],J=G[Y];if(J[Z])J[Y]=J[Z],delete J[Z];return xg.getValueFromTextNode(J)}return{}}),KY6=async(A,Q)=>{let B=await lRQ(A,Q);if(B.Error)B.Error.message=B.Error.message??B.Error.Message;return B},iRQ=(A,Q)=>{if(Q?.Error?.Code!==void 0)return Q.Error.Code;if(Q?.Code!==void 0)return Q.Code;if(A.statusCode==404)return"NotFound"};class Tv1 extends wi{settings;stringBuffer;byteBuffer;buffer;constructor(A){super();this.settings=A}write(A,Q){let B=aG.NormalizedSchema.of(A);if(B.isStringSchema()&&typeof Q==="string")this.stringBuffer=Q;else if(B.isBlobSchema())this.byteBuffer="byteLength"in Q?Q:(this.serdeContext?.base64Decoder??ONA.fromBase64)(Q);else{this.buffer=this.writeStruct(B,Q,void 0);let G=B.getMergedTraits();if(G.httpPayload&&!G.xmlName)this.buffer.withName(B.getName())}}flush(){if(this.byteBuffer!==void 0){let Q=this.byteBuffer;return delete this.byteBuffer,Q}if(this.stringBuffer!==void 0){let Q=this.stringBuffer;return delete this.stringBuffer,Q}let A=this.buffer;if(this.settings.xmlNamespace){if(!A?.attributes?.xmlns)A.addAttribute("xmlns",this.settings.xmlNamespace)}return delete this.buffer,A.toString()}writeStruct(A,Q,B){let G=A.getMergedTraits(),Z=A.isMemberSchema()&&!G.httpPayload?A.getMemberTraits().xmlName??A.getMemberName():G.xmlName??A.getName();if(!Z||!A.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${A.getName(!0)}.`);let Y=bM.XmlNode.of(Z),[J,X]=this.getXmlnsAttribute(A,B);for(let[I,W]of A.structIterator()){let D=Q[I];if(D!=null||W.isIdempotencyToken()){if(W.getMergedTraits().xmlAttribute){Y.addAttribute(W.getMergedTraits().xmlName??I,this.writeSimple(W,D));continue}if(W.isListSchema())this.writeList(W,D,Y,X);else if(W.isMapSchema())this.writeMap(W,D,Y,X);else if(W.isStructSchema())Y.addChildNode(this.writeStruct(W,D,X));else{let K=bM.XmlNode.of(W.getMergedTraits().xmlName??W.getMemberName());this.writeSimpleInto(W,D,K,X),Y.addChildNode(K)}}}if(X)Y.addAttribute(J,X);return Y}writeList(A,Q,B,G){if(!A.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${A.getName(!0)}`);let Z=A.getMergedTraits(),Y=A.getValueSchema(),J=Y.getMergedTraits(),X=!!J.sparse,I=!!Z.xmlFlattened,[W,D]=this.getXmlnsAttribute(A,G),K=(V,F)=>{if(Y.isListSchema())this.writeList(Y,Array.isArray(F)?F:[F],V,D);else if(Y.isMapSchema())this.writeMap(Y,F,V,D);else if(Y.isStructSchema()){let H=this.writeStruct(Y,F,D);V.addChildNode(H.withName(I?Z.xmlName??A.getMemberName():J.xmlName??"member"))}else{let H=bM.XmlNode.of(I?Z.xmlName??A.getMemberName():J.xmlName??"member");this.writeSimpleInto(Y,F,H,D),V.addChildNode(H)}};if(I){for(let V of Q)if(X||V!=null)K(B,V)}else{let V=bM.XmlNode.of(Z.xmlName??A.getMemberName());if(D)V.addAttribute(W,D);for(let F of Q)if(X||F!=null)K(V,F);B.addChildNode(V)}}writeMap(A,Q,B,G,Z=!1){if(!A.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${A.getName(!0)}`);let Y=A.getMergedTraits(),J=A.getKeySchema(),I=J.getMergedTraits().xmlName??"key",W=A.getValueSchema(),D=W.getMergedTraits(),K=D.xmlName??"value",V=!!D.sparse,F=!!Y.xmlFlattened,[H,E]=this.getXmlnsAttribute(A,G),z=(C,O,L)=>{let M=bM.XmlNode.of(I,O),[_,j]=this.getXmlnsAttribute(J,E);if(j)M.addAttribute(_,j);C.addChildNode(M);let P=bM.XmlNode.of(K);if(W.isListSchema())this.writeList(W,L,P,E);else if(W.isMapSchema())this.writeMap(W,L,P,E,!0);else if(W.isStructSchema())P=this.writeStruct(W,L,E);else this.writeSimpleInto(W,L,P,E);C.addChildNode(P)};if(F){for(let[C,O]of Object.entries(Q))if(V||O!=null){let L=bM.XmlNode.of(Y.xmlName??A.getMemberName());z(L,C,O),B.addChildNode(L)}}else{let C;if(!Z){if(C=bM.XmlNode.of(Y.xmlName??A.getMemberName()),E)C.addAttribute(H,E);B.addChildNode(C)}for(let[O,L]of Object.entries(Q))if(V||L!=null){let M=bM.XmlNode.of("entry");z(M,O,L),(Z?B:C).addChildNode(M)}}}writeSimple(A,Q){if(Q===null)throw Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let B=aG.NormalizedSchema.of(A),G=null;if(Q&&typeof Q==="object")if(B.isBlobSchema())G=(this.serdeContext?.base64Encoder??ONA.toBase64)(Q);else if(B.isTimestampSchema()&&Q instanceof Date)switch(LH.determineTimestampFormat(B,this.settings)){case 5:G=Q.toISOString().replace(".000Z","Z");break;case 6:G=xg.dateToUtcString(Q);break;case 7:G=String(Q.getTime()/1000);break;default:console.warn("Missing timestamp format, using http date",Q),G=xg.dateToUtcString(Q);break}else if(B.isBigDecimalSchema()&&Q){if(Q instanceof aV.NumericValue)return Q.string;return String(Q)}else if(B.isMapSchema()||B.isListSchema())throw Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.");else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${B.getName(!0)}`);if(B.isBooleanSchema()||B.isNumericSchema()||B.isBigIntegerSchema()||B.isBigDecimalSchema())G=String(Q);if(B.isStringSchema())if(Q===void 0&&B.isIdempotencyToken())G=aV.generateIdempotencyToken();else G=String(Q);if(G===null)throw Error(`Unhandled schema-value pair ${B.getName(!0)}=${Q}`);return G}writeSimpleInto(A,Q,B,G){let Z=this.writeSimple(A,Q),Y=aG.NormalizedSchema.of(A),J=new bM.XmlText(Z),[X,I]=this.getXmlnsAttribute(Y,G);if(I)B.addAttribute(X,I);B.addChildNode(J)}getXmlnsAttribute(A,Q){let B=A.getMergedTraits(),[G,Z]=B.xmlNamespace??[];if(Z&&Z!==Q)return[G?`xmlns:${G}`:"xmlns",Z];return[void 0,void 0]}}class Pv1 extends wi{settings;constructor(A){super();this.settings=A}createSerializer(){let A=new Tv1(this.settings);return A.setSerdeContext(this.serdeContext),A}createDeserializer(){let A=new paA(this.settings);return A.setSerdeContext(this.serdeContext),A}}class nRQ extends LH.HttpBindingProtocol{codec;serializer;deserializer;mixin=new vZA;constructor(A){super(A);let Q={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:A.xmlNamespace,serviceNamespace:A.defaultNamespace};this.codec=new Pv1(Q),this.serializer=new LH.HttpInterceptingShapeSerializer(this.codec.createSerializer(),Q),this.deserializer=new LH.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),Q)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(A,Q,B){let G=await super.serializeRequest(A,Q,B),Z=aG.NormalizedSchema.of(A.input);if(!G.headers["content-type"]){let Y=this.mixin.resolveRestContentType(this.getDefaultContentType(),Z);if(Y)G.headers["content-type"]=Y}if(G.headers["content-type"]===this.getDefaultContentType()){if(typeof G.body==="string")G.body='<?xml version="1.0" encoding="UTF-8"?>'+G.body}return G}async deserializeResponse(A,Q,B){return super.deserializeResponse(A,Q,B)}async handleError(A,Q,B,G,Z){let Y=iRQ(B,G)??"Unknown",{errorSchema:J,errorMetadata:X}=await this.mixin.getErrorSchemaOrThrowBaseException(Y,this.options.defaultNamespace,B,G,Z),I=aG.NormalizedSchema.of(J),W=G.Error?.message??G.Error?.Message??G.message??G.Message??"Unknown",K=new(aG.TypeRegistry.for(J[1]).getErrorCtor(J)??Error)(W);await this.deserializeHttpMessage(J,Q,B,G);let V={};for(let[F,H]of I.structIterator()){let E=H.getMergedTraits().xmlName??F,z=G.Error?.[E]??G[E];V[F]=this.codec.createDeserializer().readSchema(H,z)}throw this.mixin.decorateServiceException(Object.assign(K,X,{$fault:I.getMergedTraits().error,message:W},V),G)}getDefaultContentType(){return"application/xml"}}VY6.AwsEc2QueryProtocol=cRQ;VY6.AwsJson1_0Protocol=uRQ;VY6.AwsJson1_1Protocol=mRQ;VY6.AwsJsonRpcProtocol=daA;VY6.AwsQueryProtocol=jv1;VY6.AwsRestJsonProtocol=dRQ;VY6.AwsRestXmlProtocol=nRQ;VY6.AwsSmithyRpcV2CborProtocol=fRQ;VY6.JsonCodec=maA;VY6.JsonShapeDeserializer=Rv1;VY6.JsonShapeSerializer=_v1;VY6.XmlCodec=Pv1;VY6.XmlShapeDeserializer=paA;VY6.XmlShapeSerializer=Tv1;VY6._toBool=JY6;VY6._toNum=XY6;VY6._toStr=YY6;VY6.awsExpectUnion=DY6;VY6.loadRestJsonErrorCode=Mv1;VY6.loadRestXmlErrorCode=iRQ;VY6.parseJsonBody=Ov1;VY6.parseJsonErrorBody=WY6;VY6.parseXmlBody=lRQ;VY6.parseXmlErrorBody=KY6});var aRQ=U((hY6)=>{var fY6=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";hY6.isArrayBuffer=fY6});var xv1=U((pY6)=>{var uY6=aRQ(),Sv1=qA("buffer"),mY6=(A,Q=0,B=A.byteLength-Q)=>{if(!uY6.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return Sv1.Buffer.from(A,Q,B)},dY6=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?Sv1.Buffer.from(A,Q):Sv1.Buffer.from(A)};pY6.fromArrayBuffer=mY6;pY6.fromString=dY6});var sRQ=U((oRQ)=>{Object.defineProperty(oRQ,"__esModule",{value:!0});oRQ.fromBase64=void 0;var iY6=xv1(),nY6=/^[A-Za-z0-9+/]*={0,2}$/,aY6=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!nY6.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,iY6.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};oRQ.fromBase64=aY6});var A_Q=U((tRQ)=>{Object.defineProperty(tRQ,"__esModule",{value:!0});tRQ.toBase64=void 0;var oY6=xv1(),rY6=lG(),sY6=(A)=>{let Q;if(typeof A==="string")Q=(0,rY6.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,oY6.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};tRQ.toBase64=sY6});var caA=U((MNA)=>{var Q_Q=sRQ(),B_Q=A_Q();Object.keys(Q_Q).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(MNA,A))Object.defineProperty(MNA,A,{enumerable:!0,get:function(){return Q_Q[A]}})});Object.keys(B_Q).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(MNA,A))Object.defineProperty(MNA,A,{enumerable:!0,get:function(){return B_Q[A]}})})});var U_Q=U((C_Q)=>{Object.defineProperty(C_Q,"__esModule",{value:!0});C_Q.ruleSet=void 0;var F_Q="required",hM="fn",gM="argv",fZA="ref",G_Q=!0,Z_Q="isSet",RNA="booleanEquals",kZA="error",bZA="endpoint",vg="tree",yv1="PartitionResult",vv1="getAttr",Y_Q={[F_Q]:!1,type:"string"},J_Q={[F_Q]:!0,default:!1,type:"boolean"},X_Q={[fZA]:"Endpoint"},H_Q={[hM]:RNA,[gM]:[{[fZA]:"UseFIPS"},!0]},E_Q={[hM]:RNA,[gM]:[{[fZA]:"UseDualStack"},!0]},fM={},I_Q={[hM]:vv1,[gM]:[{[fZA]:yv1},"supportsFIPS"]},z_Q={[fZA]:yv1},W_Q={[hM]:RNA,[gM]:[!0,{[hM]:vv1,[gM]:[z_Q,"supportsDualStack"]}]},D_Q=[H_Q],K_Q=[E_Q],V_Q=[{[fZA]:"Region"}],tY6={version:"1.0",parameters:{Region:Y_Q,UseDualStack:J_Q,UseFIPS:J_Q,Endpoint:Y_Q},rules:[{conditions:[{[hM]:Z_Q,[gM]:[X_Q]}],rules:[{conditions:D_Q,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:kZA},{conditions:K_Q,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:kZA},{endpoint:{url:X_Q,properties:fM,headers:fM},type:bZA}],type:vg},{conditions:[{[hM]:Z_Q,[gM]:V_Q}],rules:[{conditions:[{[hM]:"aws.partition",[gM]:V_Q,assign:yv1}],rules:[{conditions:[H_Q,E_Q],rules:[{conditions:[{[hM]:RNA,[gM]:[G_Q,I_Q]},W_Q],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:fM,headers:fM},type:bZA}],type:vg},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:kZA}],type:vg},{conditions:D_Q,rules:[{conditions:[{[hM]:RNA,[gM]:[I_Q,G_Q]}],rules:[{conditions:[{[hM]:"stringEquals",[gM]:[{[hM]:vv1,[gM]:[z_Q,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:fM,headers:fM},type:bZA},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:fM,headers:fM},type:bZA}],type:vg},{error:"FIPS is enabled but this partition does not support FIPS",type:kZA}],type:vg},{conditions:K_Q,rules:[{conditions:[W_Q],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:fM,headers:fM},type:bZA}],type:vg},{error:"DualStack is enabled but this partition does not support DualStack",type:kZA}],type:vg},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:fM,headers:fM},type:bZA}],type:vg}],type:vg},{error:"Invalid Configuration: Missing Region",type:kZA}]};C_Q.ruleSet=tY6});var w_Q=U((q_Q)=>{Object.defineProperty(q_Q,"__esModule",{value:!0});q_Q.defaultEndpointResolver=void 0;var eY6=Qv(),kv1=FT(),AJ6=U_Q(),QJ6=new kv1.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),BJ6=(A,Q={})=>{return QJ6.get(A,()=>(0,kv1.resolveEndpoint)(AJ6.ruleSet,{endpointParams:A,logger:Q.logger}))};q_Q.defaultEndpointResolver=BJ6;kv1.customEndpointFunctions.aws=eY6.awsEndpointFunctions});var __Q=U((M_Q)=>{Object.defineProperty(M_Q,"__esModule",{value:!0});M_Q.getRuntimeConfig=void 0;var GJ6=vY(),ZJ6=yg(),YJ6=iG(),JJ6=rC(),XJ6=vM(),L_Q=caA(),O_Q=lG(),IJ6=Uv1(),WJ6=w_Q(),DJ6=(A)=>{return{apiVersion:"2019-06-10",base64Decoder:A?.base64Decoder??L_Q.fromBase64,base64Encoder:A?.base64Encoder??L_Q.toBase64,disableHostPrefix:A?.disableHostPrefix??!1,endpointProvider:A?.endpointProvider??WJ6.defaultEndpointResolver,extensions:A?.extensions??[],httpAuthSchemeProvider:A?.httpAuthSchemeProvider??IJ6.defaultSSOOIDCHttpAuthSchemeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Q)=>Q.getIdentityProvider("aws.auth#sigv4"),signer:new GJ6.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(Q)=>Q.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new YJ6.NoAuthSigner}],logger:A?.logger??new JJ6.NoOpLogger,protocol:A?.protocol??new ZJ6.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.ssooidc"}),serviceId:A?.serviceId??"SSO OIDC",urlParser:A?.urlParser??XJ6.parseUrl,utf8Decoder:A?.utf8Decoder??O_Q.fromUtf8,utf8Encoder:A?.utf8Encoder??O_Q.toUtf8}};M_Q.getRuntimeConfig=DJ6});var kg=U((LJ6)=>{var KJ6=wW(),j_Q=Dq(),VJ6=TD(),FJ6="AWS_EXECUTION_ENV",T_Q="AWS_REGION",P_Q="AWS_DEFAULT_REGION",HJ6="AWS_EC2_METADATA_DISABLED",EJ6=["in-region","cross-region","mobile","standard","legacy"],zJ6="/latest/meta-data/placement/region",CJ6="AWS_DEFAULTS_MODE",$J6="defaults_mode",UJ6={environmentVariableSelector:(A)=>{return A[CJ6]},configFileSelector:(A)=>{return A[$J6]},default:"legacy"},qJ6=({region:A=j_Q.loadConfig(KJ6.NODE_REGION_CONFIG_OPTIONS),defaultsMode:Q=j_Q.loadConfig(UJ6)}={})=>VJ6.memoize(async()=>{let B=typeof Q==="function"?await Q():Q;switch(B?.toLowerCase()){case"auto":return NJ6(A);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(B?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw Error(`Invalid parameter for "defaultsMode", expect ${EJ6.join(", ")}, got ${B}`)}}),NJ6=async(A)=>{if(A){let Q=typeof A==="function"?await A():A,B=await wJ6();if(!B)return"standard";if(Q===B)return"in-region";else return"cross-region"}return"standard"},wJ6=async()=>{if(process.env[FJ6]&&(process.env[T_Q]||process.env[P_Q]))return process.env[T_Q]??process.env[P_Q];if(!process.env[HJ6])try{let{getInstanceMetadataEndpoint:A,httpRequest:Q}=await Promise.resolve().then(() => c(c1A())),B=await A();return(await Q({...B,path:zJ6})).toString()}catch(A){}};LJ6.resolveDefaultsModeConfig=qJ6});var f_Q=U((k_Q)=>{Object.defineProperty(k_Q,"__esModule",{value:!0});k_Q.getRuntimeConfig=void 0;var MJ6=NZ(),RJ6=MJ6.__importDefault(uaA()),S_Q=vY(),x_Q=Tg(),laA=wW(),_J6=Pg(),y_Q=wH(),l1A=Dq(),v_Q=dw(),jJ6=Sg(),TJ6=Jv(),PJ6=__Q(),SJ6=rC(),xJ6=kg(),yJ6=rC(),vJ6=(A)=>{(0,yJ6.emitWarningIfUnsupportedVersion)(process.version);let Q=(0,xJ6.resolveDefaultsModeConfig)(A),B=()=>Q().then(SJ6.loadConfigsForDefaultMode),G=(0,PJ6.getRuntimeConfig)(A);(0,S_Q.emitWarningIfUnsupportedVersion)(process.version);let Z={profile:A?.profile,logger:G.logger};return{...G,...A,runtime:"node",defaultsMode:Q,authSchemePreference:A?.authSchemePreference??(0,l1A.loadConfig)(S_Q.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,Z),bodyLengthChecker:A?.bodyLengthChecker??jJ6.calculateBodyLength,defaultUserAgentProvider:A?.defaultUserAgentProvider??(0,x_Q.createDefaultUserAgentProvider)({serviceId:G.serviceId,clientVersion:RJ6.default.version}),maxAttempts:A?.maxAttempts??(0,l1A.loadConfig)(y_Q.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,A),region:A?.region??(0,l1A.loadConfig)(laA.NODE_REGION_CONFIG_OPTIONS,{...laA.NODE_REGION_CONFIG_FILE_OPTIONS,...Z}),requestHandler:v_Q.NodeHttpHandler.create(A?.requestHandler??B),retryMode:A?.retryMode??(0,l1A.loadConfig)({...y_Q.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await B()).retryMode||TJ6.DEFAULT_RETRY_MODE},A),sha256:A?.sha256??_J6.Hash.bind(null,"sha256"),streamCollector:A?.streamCollector??v_Q.streamCollector,useDualstackEndpoint:A?.useDualstackEndpoint??(0,l1A.loadConfig)(laA.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,Z),useFipsEndpoint:A?.useFipsEndpoint??(0,l1A.loadConfig)(laA.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,Z),userAgentAppId:A?.userAgentAppId??(0,l1A.loadConfig)(x_Q.NODE_APP_ID_CONFIG_OPTIONS,Z)}};k_Q.getRuntimeConfig=vJ6});var u_Q=U((g_Q)=>{Object.defineProperty(g_Q,"__esModule",{value:!0});g_Q.warning=void 0;g_Q.stsRegionDefaultResolver=bJ6;var h_Q=wW(),kJ6=Dq();function bJ6(A={}){return(0,kJ6.loadConfig)({...h_Q.NODE_REGION_CONFIG_OPTIONS,async default(){if(!g_Q.warning.silence)console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly.");return"us-east-1"}},{...h_Q.NODE_REGION_CONFIG_FILE_OPTIONS,...A})}g_Q.warning={silence:!1}});var ET=U((Li)=>{var _NA=wW(),m_Q=u_Q(),hJ6=(A)=>{return{setRegion(Q){A.region=Q},region(){return A.region}}},gJ6=(A)=>{return{region:A.region()}};Object.defineProperty(Li,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return _NA.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Li,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return _NA.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Li,"REGION_ENV_NAME",{enumerable:!0,get:function(){return _NA.REGION_ENV_NAME}});Object.defineProperty(Li,"REGION_INI_NAME",{enumerable:!0,get:function(){return _NA.REGION_INI_NAME}});Object.defineProperty(Li,"resolveRegionConfig",{enumerable:!0,get:function(){return _NA.resolveRegionConfig}});Li.getAwsRegionExtensionConfiguration=hJ6;Li.resolveAwsRegionExtensionConfiguration=gJ6;Object.keys(m_Q).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(Li,A))Object.defineProperty(Li,A,{enumerable:!0,get:function(){return m_Q[A]}})})});var naA=U((nJ6)=>{var dJ6=Kv1(),pJ6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},cJ6=(A)=>{return{httpHandler:A.httpHandler()}};class d_Q{name;kind;values;constructor({name:A,kind:Q=dJ6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class p_Q{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class iaA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new iaA({...A,headers:{...A.headers}});if(Q.query)Q.query=lJ6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return iaA.clone(this)}}function lJ6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class c_Q{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function iJ6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}nJ6.Field=d_Q;nJ6.Fields=p_Q;nJ6.HttpRequest=iaA;nJ6.HttpResponse=c_Q;nJ6.getHttpHandlerExtensionConfiguration=pJ6;nJ6.isValidHostname=iJ6;nJ6.resolveHttpHandlerRuntimeConfig=cJ6});var dv1=U((mv1)=>{var l_Q=zg(),QX6=Cg(),BX6=$g(),i_Q=Zv(),GX6=wW(),fv1=iG(),pw=IX(),ZX6=jg(),s_Q=HT(),n_Q=wH(),Oi=rC(),a_Q=Uv1(),YX6=f_Q(),o_Q=ET(),r_Q=naA(),JX6=(A)=>{return Object.assign(A,{useDualstackEndpoint:A.useDualstackEndpoint??!1,useFipsEndpoint:A.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"})},XX6={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},IX6=(A)=>{let{httpAuthSchemes:Q,httpAuthSchemeProvider:B,credentials:G}=A;return{setHttpAuthScheme(Z){let Y=Q.findIndex((J)=>J.schemeId===Z.schemeId);if(Y===-1)Q.push(Z);else Q.splice(Y,1,Z)},httpAuthSchemes(){return Q},setHttpAuthSchemeProvider(Z){B=Z},httpAuthSchemeProvider(){return B},setCredentials(Z){G=Z},credentials(){return G}}},WX6=(A)=>{return{httpAuthSchemes:A.httpAuthSchemes(),httpAuthSchemeProvider:A.httpAuthSchemeProvider(),credentials:A.credentials()}},DX6=(A,Q)=>{let B=Object.assign(o_Q.getAwsRegionExtensionConfiguration(A),Oi.getDefaultExtensionConfiguration(A),r_Q.getHttpHandlerExtensionConfiguration(A),IX6(A));return Q.forEach((G)=>G.configure(B)),Object.assign(A,o_Q.resolveAwsRegionExtensionConfiguration(B),Oi.resolveDefaultRuntimeConfig(B),r_Q.resolveHttpHandlerRuntimeConfig(B),WX6(B))};class hv1 extends Oi.Client{config;constructor(...[A]){let Q=YX6.getRuntimeConfig(A||{});super(Q);this.initConfig=Q;let B=JX6(Q),G=i_Q.resolveUserAgentConfig(B),Z=n_Q.resolveRetryConfig(G),Y=GX6.resolveRegionConfig(Z),J=l_Q.resolveHostHeaderConfig(Y),X=s_Q.resolveEndpointConfig(J),I=a_Q.resolveHttpAuthSchemeConfig(X),W=DX6(I,A?.extensions||[]);this.config=W,this.middlewareStack.use(pw.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(i_Q.getUserAgentPlugin(this.config)),this.middlewareStack.use(n_Q.getRetryPlugin(this.config)),this.middlewareStack.use(ZX6.getContentLengthPlugin(this.config)),this.middlewareStack.use(l_Q.getHostHeaderPlugin(this.config)),this.middlewareStack.use(QX6.getLoggerPlugin(this.config)),this.middlewareStack.use(BX6.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(fv1.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:a_Q.defaultSSOOIDCHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(D)=>new fv1.DefaultIdentityProviderConfig({"aws.auth#sigv4":D.credentials})})),this.middlewareStack.use(fv1.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}var cw=class A extends Oi.ServiceException{constructor(Q){super(Q);Object.setPrototypeOf(this,A.prototype)}},t_Q=class A extends cw{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(Q){super({name:"AccessDeniedException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.reason=Q.reason,this.error_description=Q.error_description}},e_Q=class A extends cw{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(Q){super({name:"AuthorizationPendingException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},AjQ=class A extends cw{name="ExpiredTokenException";$fault="client";error;error_description;constructor(Q){super({name:"ExpiredTokenException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},QjQ=class A extends cw{name="InternalServerException";$fault="server";error;error_description;constructor(Q){super({name:"InternalServerException",$fault:"server",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},BjQ=class A extends cw{name="InvalidClientException";$fault="client";error;error_description;constructor(Q){super({name:"InvalidClientException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},GjQ=class A extends cw{name="InvalidGrantException";$fault="client";error;error_description;constructor(Q){super({name:"InvalidGrantException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},ZjQ=class A extends cw{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(Q){super({name:"InvalidRequestException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.reason=Q.reason,this.error_description=Q.error_description}},YjQ=class A extends cw{name="InvalidScopeException";$fault="client";error;error_description;constructor(Q){super({name:"InvalidScopeException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},JjQ=class A extends cw{name="SlowDownException";$fault="client";error;error_description;constructor(Q){super({name:"SlowDownException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},XjQ=class A extends cw{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(Q){super({name:"UnauthorizedClientException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},IjQ=class A extends cw{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(Q){super({name:"UnsupportedGrantTypeException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error,this.error_description=Q.error_description}},KX6="AccessDeniedException",VX6="AuthorizationPendingException",FX6="AccessToken",HX6="ClientSecret",EX6="CreateToken",zX6="CreateTokenRequest",CX6="CreateTokenResponse",$X6="CodeVerifier",UX6="ExpiredTokenException",qX6="InvalidClientException",NX6="InvalidGrantException",wX6="InvalidRequestException",LX6="InternalServerException",OX6="InvalidScopeException",MX6="IdToken",RX6="RefreshToken",_X6="SlowDownException",jX6="UnauthorizedClientException",TX6="UnsupportedGrantTypeException",PX6="accessToken",Iv="client",SX6="clientId",xX6="clientSecret",yX6="codeVerifier",vX6="code",kX6="deviceCode",vI="error",bX6="expiresIn",zT="error_description",fX6="grantType",hX6="http",CT="httpError",gX6="idToken",WjQ="reason",DjQ="refreshToken",uX6="redirectUri",mX6="scope",dX6="server",KjQ="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",pX6="tokenType",OG="com.amazonaws.ssooidc",cX6=[0,OG,FX6,8,0],lX6=[0,OG,HX6,8,0],iX6=[0,OG,$X6,8,0],nX6=[0,OG,MX6,8,0],VjQ=[0,OG,RX6,8,0],aX6=[-3,OG,KX6,{[vI]:Iv,[CT]:400},[vI,WjQ,zT],[0,0,0]];pw.TypeRegistry.for(OG).registerError(aX6,t_Q);var oX6=[-3,OG,VX6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(oX6,e_Q);var rX6=[3,OG,zX6,0,[SX6,xX6,fX6,kX6,vX6,DjQ,mX6,uX6,yX6],[0,[()=>lX6,0],0,0,0,[()=>VjQ,0],64,0,[()=>iX6,0]]],sX6=[3,OG,CX6,0,[PX6,pX6,bX6,DjQ,gX6],[[()=>cX6,0],0,1,[()=>VjQ,0],[()=>nX6,0]]],tX6=[-3,OG,UX6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(tX6,AjQ);var eX6=[-3,OG,LX6,{[vI]:dX6,[CT]:500},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(eX6,QjQ);var AI6=[-3,OG,qX6,{[vI]:Iv,[CT]:401},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(AI6,BjQ);var QI6=[-3,OG,NX6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(QI6,GjQ);var BI6=[-3,OG,wX6,{[vI]:Iv,[CT]:400},[vI,WjQ,zT],[0,0,0]];pw.TypeRegistry.for(OG).registerError(BI6,ZjQ);var GI6=[-3,OG,OX6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(GI6,YjQ);var ZI6=[-3,OG,_X6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(ZI6,JjQ);var YI6=[-3,OG,jX6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(YI6,XjQ);var JI6=[-3,OG,TX6,{[vI]:Iv,[CT]:400},[vI,zT],[0,0]];pw.TypeRegistry.for(OG).registerError(JI6,IjQ);var XI6=[-3,KjQ,"SSOOIDCServiceException",0,[],[]];pw.TypeRegistry.for(KjQ).registerError(XI6,cw);var II6=[9,OG,EX6,{[hX6]:["POST","/token",200]},()=>rX6,()=>sX6];class gv1 extends Oi.Command.classBuilder().ep(XX6).m(function(A,Q,B,G){return[s_Q.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(II6).build(){}var WI6={CreateTokenCommand:gv1};class uv1 extends hv1{}Oi.createAggregatedClient(WI6,uv1);var DI6={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},KI6={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"};Object.defineProperty(mv1,"$Command",{enumerable:!0,get:function(){return Oi.Command}});Object.defineProperty(mv1,"__Client",{enumerable:!0,get:function(){return Oi.Client}});mv1.AccessDeniedException=t_Q;mv1.AccessDeniedExceptionReason=DI6;mv1.AuthorizationPendingException=e_Q;mv1.CreateTokenCommand=gv1;mv1.ExpiredTokenException=AjQ;mv1.InternalServerException=QjQ;mv1.InvalidClientException=BjQ;mv1.InvalidGrantException=GjQ;mv1.InvalidRequestException=ZjQ;mv1.InvalidRequestExceptionReason=KI6;mv1.InvalidScopeException=YjQ;mv1.SSOOIDC=uv1;mv1.SSOOIDCClient=hv1;mv1.SSOOIDCServiceException=cw;mv1.SlowDownException=JjQ;mv1.UnauthorizedClientException=XjQ;mv1.UnsupportedGrantTypeException=IjQ});var aaA=U((uI6)=>{var TI6=Wq(),PI6=WRQ(),lw=TD(),jNA=Yv(),SI6=qA("fs"),xI6=({logger:A,signingName:Q}={})=>async()=>{if(A?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!Q)throw new lw.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:A});let B=PI6.getBearerTokenEnvKey(Q);if(!(B in process.env))throw new lw.TokenProviderError(`Token not present in '${B}' environment variable`,{logger:A});let G={token:process.env[B]};return TI6.setTokenFeature(G,"BEARER_SERVICE_ENV_VARS","3"),G},yI6=300000,pv1="To refresh this SSO session run 'aws sso login' with the corresponding profile.",vI6=async(A,Q={})=>{let{SSOOIDCClient:B}=await Promise.resolve().then(() => c(dv1())),G=(Y)=>Q.clientConfig?.[Y]??Q.parentClientConfig?.[Y];return new B(Object.assign({},Q.clientConfig??{},{region:A??Q.clientConfig?.region,logger:G("logger"),userAgentAppId:G("userAgentAppId")}))},kI6=async(A,Q,B={})=>{let{CreateTokenCommand:G}=await Promise.resolve().then(() => c(dv1()));return(await vI6(Q,B)).send(new G({clientId:A.clientId,clientSecret:A.clientSecret,refreshToken:A.refreshToken,grantType:"refresh_token"}))},FjQ=(A)=>{if(A.expiration&&A.expiration.getTime()<Date.now())throw new lw.TokenProviderError(`Token is expired. ${pv1}`,!1)},i1A=(A,Q,B=!1)=>{if(typeof Q>"u")throw new lw.TokenProviderError(`Value not present for '${A}' in SSO Token${B?". Cannot refresh":""}. ${pv1}`,!1)},{writeFile:bI6}=SI6.promises,fI6=(A,Q)=>{let B=jNA.getSSOTokenFilepath(A),G=JSON.stringify(Q,null,2);return bI6(B,G)},HjQ=new Date(0),EjQ=(A={})=>async({callerClientConfig:Q}={})=>{let B={...A,parentClientConfig:{...Q,...A.parentClientConfig}};B.logger?.debug("@aws-sdk/token-providers - fromSso");let G=await jNA.parseKnownFiles(B),Z=jNA.getProfileName({profile:B.profile??Q?.profile}),Y=G[Z];if(!Y)throw new lw.TokenProviderError(`Profile '${Z}' could not be found in shared credentials file.`,!1);else if(!Y.sso_session)throw new lw.TokenProviderError(`Profile '${Z}' is missing required property 'sso_session'.`);let J=Y.sso_session,I=(await jNA.loadSsoSessionData(B))[J];if(!I)throw new lw.TokenProviderError(`Sso session '${J}' could not be found in shared credentials file.`,!1);for(let H of["sso_start_url","sso_region"])if(!I[H])throw new lw.TokenProviderError(`Sso session '${J}' is missing required property '${H}'.`,!1);I.sso_start_url;let W=I.sso_region,D;try{D=await jNA.getSSOTokenFromFile(J)}catch(H){throw new lw.TokenProviderError(`The SSO session token associated with profile=${Z} was not found or is invalid. ${pv1}`,!1)}i1A("accessToken",D.accessToken),i1A("expiresAt",D.expiresAt);let{accessToken:K,expiresAt:V}=D,F={token:K,expiration:new Date(V)};if(F.expiration.getTime()-Date.now()>yI6)return F;if(Date.now()-HjQ.getTime()<30000)return FjQ(F),F;i1A("clientId",D.clientId,!0),i1A("clientSecret",D.clientSecret,!0),i1A("refreshToken",D.refreshToken,!0);try{HjQ.setTime(Date.now());let H=await kI6(D,W,B);i1A("accessToken",H.accessToken),i1A("expiresIn",H.expiresIn);let E=new Date(Date.now()+H.expiresIn*1000);try{await fI6(J,{...D,accessToken:H.accessToken,expiresAt:E.toISOString(),refreshToken:H.refreshToken})}catch(z){}return{token:H.accessToken,expiration:E}}catch(H){return FjQ(F),F}},hI6=({token:A,logger:Q})=>async()=>{if(Q?.debug("@aws-sdk/token-providers - fromStatic"),!A||!A.token)throw new lw.TokenProviderError("Please pass a valid token to fromStatic",!1);return A},gI6=(A={})=>lw.memoize(lw.chain(EjQ(A),async()=>{throw new lw.TokenProviderError("Could not load token from any providers",!1)}),(Q)=>Q.expiration!==void 0&&Q.expiration.getTime()-Date.now()<300000,(Q)=>Q.expiration!==void 0);uI6.fromEnvSigningName=xI6;uI6.fromSso=EjQ;uI6.fromStatic=hI6;uI6.nodeProvider=gI6});var rv1=U((rI6)=>{rI6.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(rI6.HttpAuthLocation||(rI6.HttpAuthLocation={}));rI6.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(rI6.HttpApiKeyAuthLocation||(rI6.HttpApiKeyAuthLocation={}));rI6.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(rI6.EndpointURLScheme||(rI6.EndpointURLScheme={}));rI6.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(rI6.AlgorithmId||(rI6.AlgorithmId={}));var lI6=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>rI6.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>rI6.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},iI6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},nI6=(A)=>{return lI6(A)},aI6=(A)=>{return iI6(A)};rI6.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(rI6.FieldPosition||(rI6.FieldPosition={}));var oI6="__smithy_context";rI6.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(rI6.IniSectionType||(rI6.IniSectionType={}));rI6.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(rI6.RequestHandlerProtocol||(rI6.RequestHandlerProtocol={}));rI6.SMITHY_CONTEXT_KEY=oI6;rI6.getDefaultClientConfiguration=nI6;rI6.resolveDefaultRuntimeConfig=aI6});var PNA=U((gZA)=>{var $jQ=Bv(),Qk1=Iq(),tv1=rv1(),AW6=IX(),zjQ=Xq();class UjQ{config;middlewareStack=$jQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var sv1="***SensitiveInformation***";function ev1(A,Q){if(Q==null)return Q;let B=AW6.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return sv1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return sv1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return sv1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=ev1(J,G[Y]);return Z}return Q}class Bk1{middlewareStack=$jQ.constructStack();schema;static classBuilder(){return new qjQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[tv1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class qjQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends Bk1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?ev1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?ev1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var QW6="***SensitiveInformation***",BW6=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class hZA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return hZA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===hZA)return hZA.isInstance(A);if(hZA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var NjQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},wjQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=ZW6(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw NjQ(J,Q)},GW6=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{wjQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},ZW6=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),YW6=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},CjQ=!1,JW6=(A)=>{if(A&&!CjQ&&parseInt(A.substring(1,A.indexOf(".")))<16)CjQ=!0},XW6=(A)=>{let Q=[];for(let B in tv1.AlgorithmId){let G=tv1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},IW6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},WW6=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},DW6=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},LjQ=(A)=>{return Object.assign(XW6(A),WW6(A))},KW6=LjQ,VW6=(A)=>{return Object.assign(IW6(A),DW6(A))},FW6=(A)=>Array.isArray(A)?A:[A],OjQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=OjQ(A[B]);return A},HW6=(A)=>{return A!=null};class MjQ{trace(){}debug(){}info(){}warn(){}error(){}}function RjQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,CW6(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}_jQ(G,null,Y,J)}return G}var EW6=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},zW6=(A,Q)=>{let B={};for(let G in Q)_jQ(B,A,Q,G);return B},CW6=(A,Q,B)=>{return RjQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},_jQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=$W6,I=UW6,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},$W6=(A)=>A!=null,UW6=(A)=>A,qW6=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},NW6=(A)=>A.toISOString().replace(".000Z","Z"),Ak1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(Ak1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=Ak1(A[B])}return Q}return A};Object.defineProperty(gZA,"collectBody",{enumerable:!0,get:function(){return Qk1.collectBody}});Object.defineProperty(gZA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Qk1.extendedEncodeURIComponent}});Object.defineProperty(gZA,"resolvedPath",{enumerable:!0,get:function(){return Qk1.resolvedPath}});gZA.Client=UjQ;gZA.Command=Bk1;gZA.NoOpLogger=MjQ;gZA.SENSITIVE_STRING=QW6;gZA.ServiceException=hZA;gZA._json=Ak1;gZA.convertMap=EW6;gZA.createAggregatedClient=BW6;gZA.decorateServiceException=NjQ;gZA.emitWarningIfUnsupportedVersion=JW6;gZA.getArrayIfSingleItem=FW6;gZA.getDefaultClientConfiguration=KW6;gZA.getDefaultExtensionConfiguration=LjQ;gZA.getValueFromTextNode=OjQ;gZA.isSerializableHeaderValue=HW6;gZA.loadConfigsForDefaultMode=YW6;gZA.map=RjQ;gZA.resolveDefaultRuntimeConfig=VW6;gZA.serializeDateTime=NW6;gZA.serializeFloat=qW6;gZA.take=zW6;gZA.throwDefaultError=wjQ;gZA.withBaseException=GW6;Object.keys(zjQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(gZA,A))Object.defineProperty(gZA,A,{enumerable:!0,get:function(){return zjQ[A]}})})});var Zk1=U((jjQ)=>{Object.defineProperty(jjQ,"__esModule",{value:!0});jjQ.resolveHttpAuthSchemeConfig=jjQ.defaultSSOHttpAuthSchemeProvider=jjQ.defaultSSOHttpAuthSchemeParametersProvider=void 0;var lW6=vY(),Gk1=Iz(),iW6=async(A,Q,B)=>{return{operation:(0,Gk1.getSmithyContext)(Q).operation,region:await(0,Gk1.normalizeProvider)(A.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};jjQ.defaultSSOHttpAuthSchemeParametersProvider=iW6;function nW6(A){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:A.region},propertiesExtractor:(Q,B)=>({signingProperties:{config:Q,context:B}})}}function oaA(A){return{schemeId:"smithy.api#noAuth"}}var aW6=(A)=>{let Q=[];switch(A.operation){case"GetRoleCredentials":{Q.push(oaA(A));break}case"ListAccountRoles":{Q.push(oaA(A));break}case"ListAccounts":{Q.push(oaA(A));break}case"Logout":{Q.push(oaA(A));break}default:Q.push(nW6(A))}return Q};jjQ.defaultSSOHttpAuthSchemeProvider=aW6;var oW6=(A)=>{let Q=(0,lW6.resolveAwsSdkSigV4Config)(A);return Object.assign(Q,{authSchemePreference:(0,Gk1.normalizeProvider)(A.authSchemePreference??[])})};jjQ.resolveHttpAuthSchemeConfig=oW6});var PjQ=U((d3G,tW6)=>{tW6.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.936.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.936.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.936.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.936.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var SjQ=U((AD6)=>{var eW6=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";AD6.isArrayBuffer=eW6});var Jk1=U((YD6)=>{var BD6=SjQ(),Yk1=qA("buffer"),GD6=(A,Q=0,B=A.byteLength-Q)=>{if(!BD6.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return Yk1.Buffer.from(A,Q,B)},ZD6=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?Yk1.Buffer.from(A,Q):Yk1.Buffer.from(A)};YD6.fromArrayBuffer=GD6;YD6.fromString=ZD6});var vjQ=U((xjQ)=>{Object.defineProperty(xjQ,"__esModule",{value:!0});xjQ.fromBase64=void 0;var ID6=Jk1(),WD6=/^[A-Za-z0-9+/]*={0,2}$/,DD6=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!WD6.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,ID6.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};xjQ.fromBase64=DD6});var fjQ=U((kjQ)=>{Object.defineProperty(kjQ,"__esModule",{value:!0});kjQ.toBase64=void 0;var KD6=Jk1(),VD6=lG(),FD6=(A)=>{let Q;if(typeof A==="string")Q=(0,VD6.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,KD6.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};kjQ.toBase64=FD6});var ujQ=U((SNA)=>{var hjQ=vjQ(),gjQ=fjQ();Object.keys(hjQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(SNA,A))Object.defineProperty(SNA,A,{enumerable:!0,get:function(){return hjQ[A]}})});Object.keys(gjQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(SNA,A))Object.defineProperty(SNA,A,{enumerable:!0,get:function(){return gjQ[A]}})})});var GTQ=U((QTQ)=>{Object.defineProperty(QTQ,"__esModule",{value:!0});QTQ.ruleSet=void 0;var sjQ="required",mM="fn",dM="argv",dZA="ref",mjQ=!0,djQ="isSet",xNA="booleanEquals",uZA="error",mZA="endpoint",bg="tree",Xk1="PartitionResult",Ik1="getAttr",pjQ={[sjQ]:!1,type:"string"},cjQ={[sjQ]:!0,default:!1,type:"boolean"},ljQ={[dZA]:"Endpoint"},tjQ={[mM]:xNA,[dM]:[{[dZA]:"UseFIPS"},!0]},ejQ={[mM]:xNA,[dM]:[{[dZA]:"UseDualStack"},!0]},uM={},ijQ={[mM]:Ik1,[dM]:[{[dZA]:Xk1},"supportsFIPS"]},ATQ={[dZA]:Xk1},njQ={[mM]:xNA,[dM]:[!0,{[mM]:Ik1,[dM]:[ATQ,"supportsDualStack"]}]},ajQ=[tjQ],ojQ=[ejQ],rjQ=[{[dZA]:"Region"}],HD6={version:"1.0",parameters:{Region:pjQ,UseDualStack:cjQ,UseFIPS:cjQ,Endpoint:pjQ},rules:[{conditions:[{[mM]:djQ,[dM]:[ljQ]}],rules:[{conditions:ajQ,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:uZA},{conditions:ojQ,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:uZA},{endpoint:{url:ljQ,properties:uM,headers:uM},type:mZA}],type:bg},{conditions:[{[mM]:djQ,[dM]:rjQ}],rules:[{conditions:[{[mM]:"aws.partition",[dM]:rjQ,assign:Xk1}],rules:[{conditions:[tjQ,ejQ],rules:[{conditions:[{[mM]:xNA,[dM]:[mjQ,ijQ]},njQ],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:uM,headers:uM},type:mZA}],type:bg},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:uZA}],type:bg},{conditions:ajQ,rules:[{conditions:[{[mM]:xNA,[dM]:[ijQ,mjQ]}],rules:[{conditions:[{[mM]:"stringEquals",[dM]:[{[mM]:Ik1,[dM]:[ATQ,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:uM,headers:uM},type:mZA},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:uM,headers:uM},type:mZA}],type:bg},{error:"FIPS is enabled but this partition does not support FIPS",type:uZA}],type:bg},{conditions:ojQ,rules:[{conditions:[njQ],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:uM,headers:uM},type:mZA}],type:bg},{error:"DualStack is enabled but this partition does not support DualStack",type:uZA}],type:bg},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:uM,headers:uM},type:mZA}],type:bg}],type:bg},{error:"Invalid Configuration: Missing Region",type:uZA}]};QTQ.ruleSet=HD6});var JTQ=U((ZTQ)=>{Object.defineProperty(ZTQ,"__esModule",{value:!0});ZTQ.defaultEndpointResolver=void 0;var ED6=Qv(),Wk1=FT(),zD6=GTQ(),CD6=new Wk1.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),$D6=(A,Q={})=>{return CD6.get(A,()=>(0,Wk1.resolveEndpoint)(zD6.ruleSet,{endpointParams:A,logger:Q.logger}))};ZTQ.defaultEndpointResolver=$D6;Wk1.customEndpointFunctions.aws=ED6.awsEndpointFunctions});var KTQ=U((WTQ)=>{Object.defineProperty(WTQ,"__esModule",{value:!0});WTQ.getRuntimeConfig=void 0;var UD6=vY(),qD6=yg(),ND6=iG(),wD6=PNA(),LD6=vM(),XTQ=ujQ(),ITQ=lG(),OD6=Zk1(),MD6=JTQ(),RD6=(A)=>{return{apiVersion:"2019-06-10",base64Decoder:A?.base64Decoder??XTQ.fromBase64,base64Encoder:A?.base64Encoder??XTQ.toBase64,disableHostPrefix:A?.disableHostPrefix??!1,endpointProvider:A?.endpointProvider??MD6.defaultEndpointResolver,extensions:A?.extensions??[],httpAuthSchemeProvider:A?.httpAuthSchemeProvider??OD6.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Q)=>Q.getIdentityProvider("aws.auth#sigv4"),signer:new UD6.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(Q)=>Q.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ND6.NoAuthSigner}],logger:A?.logger??new wD6.NoOpLogger,protocol:A?.protocol??new qD6.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.sso"}),serviceId:A?.serviceId??"SSO",urlParser:A?.urlParser??LD6.parseUrl,utf8Decoder:A?.utf8Decoder??ITQ.fromUtf8,utf8Encoder:A?.utf8Encoder??ITQ.toUtf8}};WTQ.getRuntimeConfig=RD6});var $TQ=U((zTQ)=>{Object.defineProperty(zTQ,"__esModule",{value:!0});zTQ.getRuntimeConfig=void 0;var _D6=NZ(),jD6=_D6.__importDefault(PjQ()),VTQ=vY(),FTQ=Tg(),raA=wW(),TD6=Pg(),HTQ=wH(),n1A=Dq(),ETQ=dw(),PD6=Sg(),SD6=Jv(),xD6=KTQ(),yD6=PNA(),vD6=kg(),kD6=PNA(),bD6=(A)=>{(0,kD6.emitWarningIfUnsupportedVersion)(process.version);let Q=(0,vD6.resolveDefaultsModeConfig)(A),B=()=>Q().then(yD6.loadConfigsForDefaultMode),G=(0,xD6.getRuntimeConfig)(A);(0,VTQ.emitWarningIfUnsupportedVersion)(process.version);let Z={profile:A?.profile,logger:G.logger};return{...G,...A,runtime:"node",defaultsMode:Q,authSchemePreference:A?.authSchemePreference??(0,n1A.loadConfig)(VTQ.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,Z),bodyLengthChecker:A?.bodyLengthChecker??PD6.calculateBodyLength,defaultUserAgentProvider:A?.defaultUserAgentProvider??(0,FTQ.createDefaultUserAgentProvider)({serviceId:G.serviceId,clientVersion:jD6.default.version}),maxAttempts:A?.maxAttempts??(0,n1A.loadConfig)(HTQ.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,A),region:A?.region??(0,n1A.loadConfig)(raA.NODE_REGION_CONFIG_OPTIONS,{...raA.NODE_REGION_CONFIG_FILE_OPTIONS,...Z}),requestHandler:ETQ.NodeHttpHandler.create(A?.requestHandler??B),retryMode:A?.retryMode??(0,n1A.loadConfig)({...HTQ.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await B()).retryMode||SD6.DEFAULT_RETRY_MODE},A),sha256:A?.sha256??TD6.Hash.bind(null,"sha256"),streamCollector:A?.streamCollector??ETQ.streamCollector,useDualstackEndpoint:A?.useDualstackEndpoint??(0,n1A.loadConfig)(raA.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,Z),useFipsEndpoint:A?.useFipsEndpoint??(0,n1A.loadConfig)(raA.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,Z),userAgentAppId:A?.userAgentAppId??(0,n1A.loadConfig)(FTQ.NODE_APP_ID_CONFIG_OPTIONS,Z)}};zTQ.getRuntimeConfig=bD6});var wTQ=U((dD6)=>{var fD6=rv1(),hD6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},gD6=(A)=>{return{httpHandler:A.httpHandler()}};class UTQ{name;kind;values;constructor({name:A,kind:Q=fD6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class qTQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class saA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new saA({...A,headers:{...A.headers}});if(Q.query)Q.query=uD6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return saA.clone(this)}}function uD6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class NTQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function mD6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}dD6.Field=UTQ;dD6.Fields=qTQ;dD6.HttpRequest=saA;dD6.HttpResponse=NTQ;dD6.getHttpHandlerExtensionConfiguration=hD6;dD6.isValidHostname=mD6;dD6.resolveHttpHandlerRuntimeConfig=gD6});var gTQ=U((Fk1)=>{var LTQ=zg(),rD6=Cg(),sD6=$g(),OTQ=Zv(),tD6=wW(),yNA=iG(),pZA=IX(),eD6=jg(),vNA=HT(),MTQ=wH(),$T=PNA(),RTQ=Zk1(),AK6=$TQ(),_TQ=ET(),jTQ=wTQ(),QK6=(A)=>{return Object.assign(A,{useDualstackEndpoint:A.useDualstackEndpoint??!1,useFipsEndpoint:A.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"})},taA={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},BK6=(A)=>{let{httpAuthSchemes:Q,httpAuthSchemeProvider:B,credentials:G}=A;return{setHttpAuthScheme(Z){let Y=Q.findIndex((J)=>J.schemeId===Z.schemeId);if(Y===-1)Q.push(Z);else Q.splice(Y,1,Z)},httpAuthSchemes(){return Q},setHttpAuthSchemeProvider(Z){B=Z},httpAuthSchemeProvider(){return B},setCredentials(Z){G=Z},credentials(){return G}}},GK6=(A)=>{return{httpAuthSchemes:A.httpAuthSchemes(),httpAuthSchemeProvider:A.httpAuthSchemeProvider(),credentials:A.credentials()}},ZK6=(A,Q)=>{let B=Object.assign(_TQ.getAwsRegionExtensionConfiguration(A),$T.getDefaultExtensionConfiguration(A),jTQ.getHttpHandlerExtensionConfiguration(A),BK6(A));return Q.forEach((G)=>G.configure(B)),Object.assign(A,_TQ.resolveAwsRegionExtensionConfiguration(B),$T.resolveDefaultRuntimeConfig(B),jTQ.resolveHttpHandlerRuntimeConfig(B),GK6(B))};class kNA extends $T.Client{config;constructor(...[A]){let Q=AK6.getRuntimeConfig(A||{});super(Q);this.initConfig=Q;let B=QK6(Q),G=OTQ.resolveUserAgentConfig(B),Z=MTQ.resolveRetryConfig(G),Y=tD6.resolveRegionConfig(Z),J=LTQ.resolveHostHeaderConfig(Y),X=vNA.resolveEndpointConfig(J),I=RTQ.resolveHttpAuthSchemeConfig(X),W=ZK6(I,A?.extensions||[]);this.config=W,this.middlewareStack.use(pZA.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(OTQ.getUserAgentPlugin(this.config)),this.middlewareStack.use(MTQ.getRetryPlugin(this.config)),this.middlewareStack.use(eD6.getContentLengthPlugin(this.config)),this.middlewareStack.use(LTQ.getHostHeaderPlugin(this.config)),this.middlewareStack.use(rD6.getLoggerPlugin(this.config)),this.middlewareStack.use(sD6.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(yNA.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:RTQ.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(D)=>new yNA.DefaultIdentityProviderConfig({"aws.auth#sigv4":D.credentials})})),this.middlewareStack.use(yNA.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}var cZA=class A extends $T.ServiceException{constructor(Q){super(Q);Object.setPrototypeOf(this,A.prototype)}},TTQ=class A extends cZA{name="InvalidRequestException";$fault="client";constructor(Q){super({name:"InvalidRequestException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},PTQ=class A extends cZA{name="ResourceNotFoundException";$fault="client";constructor(Q){super({name:"ResourceNotFoundException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},STQ=class A extends cZA{name="TooManyRequestsException";$fault="client";constructor(Q){super({name:"TooManyRequestsException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},xTQ=class A extends cZA{name="UnauthorizedException";$fault="client";constructor(Q){super({name:"UnauthorizedException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},YK6="AccountInfo",JK6="AccountListType",XK6="AccessTokenType",IK6="GetRoleCredentials",WK6="GetRoleCredentialsRequest",DK6="GetRoleCredentialsResponse",KK6="InvalidRequestException",VK6="Logout",FK6="ListAccounts",HK6="ListAccountsRequest",EK6="ListAccountRolesRequest",zK6="ListAccountRolesResponse",CK6="ListAccountsResponse",$K6="ListAccountRoles",UK6="LogoutRequest",qK6="RoleCredentials",NK6="RoleInfo",wK6="RoleListType",LK6="ResourceNotFoundException",OK6="SecretAccessKeyType",MK6="SessionTokenType",RK6="TooManyRequestsException",_K6="UnauthorizedException",eaA="accountId",jK6="accessKeyId",TK6="accountList",PK6="accountName",AoA="accessToken",yTQ="account_id",QoA="client",BoA="error",SK6="emailAddress",xK6="expiration",GoA="http",ZoA="httpError",YoA="httpHeader",a1A="httpQuery",JoA="message",vTQ="maxResults",kTQ="max_result",XoA="nextToken",bTQ="next_token",yK6="roleCredentials",vK6="roleList",fTQ="roleName",kK6="role_name",hTQ="smithy.ts.sdk.synthetic.com.amazonaws.sso",bK6="secretAccessKey",fK6="sessionToken",IoA="x-amz-sso_bearer_token",tZ="com.amazonaws.sso",WoA=[0,tZ,XK6,8,0],hK6=[0,tZ,OK6,8,0],gK6=[0,tZ,MK6,8,0],uK6=[3,tZ,YK6,0,[eaA,PK6,SK6],[0,0,0]],mK6=[3,tZ,WK6,0,[fTQ,eaA,AoA],[[0,{[a1A]:kK6}],[0,{[a1A]:yTQ}],[()=>WoA,{[YoA]:IoA}]]],dK6=[3,tZ,DK6,0,[yK6],[[()=>rK6,0]]],pK6=[-3,tZ,KK6,{[BoA]:QoA,[ZoA]:400},[JoA],[0]];pZA.TypeRegistry.for(tZ).registerError(pK6,TTQ);var cK6=[3,tZ,EK6,0,[XoA,vTQ,AoA,eaA],[[0,{[a1A]:bTQ}],[1,{[a1A]:kTQ}],[()=>WoA,{[YoA]:IoA}],[0,{[a1A]:yTQ}]]],lK6=[3,tZ,zK6,0,[XoA,vK6],[0,()=>GV6]],iK6=[3,tZ,HK6,0,[XoA,vTQ,AoA],[[0,{[a1A]:bTQ}],[1,{[a1A]:kTQ}],[()=>WoA,{[YoA]:IoA}]]],nK6=[3,tZ,CK6,0,[XoA,TK6],[0,()=>BV6]],aK6=[3,tZ,UK6,0,[AoA],[[()=>WoA,{[YoA]:IoA}]]],oK6=[-3,tZ,LK6,{[BoA]:QoA,[ZoA]:404},[JoA],[0]];pZA.TypeRegistry.for(tZ).registerError(oK6,PTQ);var rK6=[3,tZ,qK6,0,[jK6,bK6,fK6,xK6],[0,[()=>hK6,0],[()=>gK6,0],1]],sK6=[3,tZ,NK6,0,[fTQ,eaA],[0,0]],tK6=[-3,tZ,RK6,{[BoA]:QoA,[ZoA]:429},[JoA],[0]];pZA.TypeRegistry.for(tZ).registerError(tK6,STQ);var eK6=[-3,tZ,_K6,{[BoA]:QoA,[ZoA]:401},[JoA],[0]];pZA.TypeRegistry.for(tZ).registerError(eK6,xTQ);var AV6="unit",QV6=[-3,hTQ,"SSOServiceException",0,[],[]];pZA.TypeRegistry.for(hTQ).registerError(QV6,cZA);var BV6=[1,tZ,JK6,0,()=>uK6],GV6=[1,tZ,wK6,0,()=>sK6],ZV6=[9,tZ,IK6,{[GoA]:["GET","/federation/credentials",200]},()=>mK6,()=>dK6],YV6=[9,tZ,$K6,{[GoA]:["GET","/assignment/roles",200]},()=>cK6,()=>lK6],JV6=[9,tZ,FK6,{[GoA]:["GET","/assignment/accounts",200]},()=>iK6,()=>nK6],XV6=[9,tZ,VK6,{[GoA]:["POST","/logout",200]},()=>aK6,()=>AV6];class Dk1 extends $T.Command.classBuilder().ep(taA).m(function(A,Q,B,G){return[vNA.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(ZV6).build(){}class DoA extends $T.Command.classBuilder().ep(taA).m(function(A,Q,B,G){return[vNA.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(YV6).build(){}class KoA extends $T.Command.classBuilder().ep(taA).m(function(A,Q,B,G){return[vNA.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(JV6).build(){}class Kk1 extends $T.Command.classBuilder().ep(taA).m(function(A,Q,B,G){return[vNA.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(XV6).build(){}var IV6={GetRoleCredentialsCommand:Dk1,ListAccountRolesCommand:DoA,ListAccountsCommand:KoA,LogoutCommand:Kk1};class Vk1 extends kNA{}$T.createAggregatedClient(IV6,Vk1);var WV6=yNA.createPaginator(kNA,DoA,"nextToken","nextToken","maxResults"),DV6=yNA.createPaginator(kNA,KoA,"nextToken","nextToken","maxResults");Object.defineProperty(Fk1,"$Command",{enumerable:!0,get:function(){return $T.Command}});Object.defineProperty(Fk1,"__Client",{enumerable:!0,get:function(){return $T.Client}});Fk1.GetRoleCredentialsCommand=Dk1;Fk1.InvalidRequestException=TTQ;Fk1.ListAccountRolesCommand=DoA;Fk1.ListAccountsCommand=KoA;Fk1.LogoutCommand=Kk1;Fk1.ResourceNotFoundException=PTQ;Fk1.SSO=Vk1;Fk1.SSOClient=kNA;Fk1.SSOServiceException=cZA;Fk1.TooManyRequestsException=STQ;Fk1.UnauthorizedException=xTQ;Fk1.paginateListAccountRoles=WV6;Fk1.paginateListAccounts=DV6});var mTQ=U((Hk1)=>{var uTQ=gTQ();Object.defineProperty(Hk1,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return uTQ.GetRoleCredentialsCommand}});Object.defineProperty(Hk1,"SSOClient",{enumerable:!0,get:function(){return uTQ.SSOClient}})});var FoA=U((RV6)=>{var UT=TD(),VoA=Yv(),dTQ=Wq(),OV6=aaA(),cTQ=(A)=>A&&(typeof A.sso_start_url==="string"||typeof A.sso_account_id==="string"||typeof A.sso_session==="string"||typeof A.sso_region==="string"||typeof A.sso_role_name==="string"),bNA=!1,pTQ=async({ssoStartUrl:A,ssoSession:Q,ssoAccountId:B,ssoRegion:G,ssoRoleName:Z,ssoClient:Y,clientConfig:J,parentClientConfig:X,profile:I,filepath:W,configFilepath:D,ignoreCache:K,logger:V})=>{let F,H="To refresh this SSO session run aws sso login with the corresponding profile.";if(Q)try{let h=await OV6.fromSso({profile:I,filepath:W,configFilepath:D,ignoreCache:K})();F={accessToken:h.token,expiresAt:new Date(h.expiration).toISOString()}}catch(h){throw new UT.CredentialsProviderError(h.message,{tryNextLink:bNA,logger:V})}else try{F=await VoA.getSSOTokenFromFile(A)}catch(h){throw new UT.CredentialsProviderError("The SSO session associated with this profile is invalid. To refresh this SSO session run aws sso login with the corresponding profile.",{tryNextLink:bNA,logger:V})}if(new Date(F.expiresAt).getTime()-Date.now()<=0)throw new UT.CredentialsProviderError("The SSO session associated with this profile has expired. To refresh this SSO session run aws sso login with the corresponding profile.",{tryNextLink:bNA,logger:V});let{accessToken:E}=F,{SSOClient:z,GetRoleCredentialsCommand:C}=await Promise.resolve().then(function(){return mTQ()}),O=Y||new z(Object.assign({},J??{},{logger:J?.logger??X?.logger,region:J?.region??G,userAgentAppId:J?.userAgentAppId??X?.userAgentAppId})),L;try{L=await O.send(new C({accountId:B,roleName:Z,accessToken:E}))}catch(h){throw new UT.CredentialsProviderError(h,{tryNextLink:bNA,logger:V})}let{roleCredentials:{accessKeyId:M,secretAccessKey:_,sessionToken:j,expiration:P,credentialScope:y,accountId:v}={}}=L;if(!M||!_||!j||!P)throw new UT.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:bNA,logger:V});let m={accessKeyId:M,secretAccessKey:_,sessionToken:j,expiration:new Date(P),...y&&{credentialScope:y},...v&&{accountId:v}};if(Q)dTQ.setCredentialFeature(m,"CREDENTIALS_SSO","s");else dTQ.setCredentialFeature(m,"CREDENTIALS_SSO_LEGACY","u");return m},lTQ=(A,Q)=>{let{sso_start_url:B,sso_account_id:G,sso_region:Z,sso_role_name:Y}=A;if(!B||!G||!Z||!Y)throw new UT.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(A).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:Q});return A},MV6=(A={})=>async({callerClientConfig:Q}={})=>{A.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:B,ssoAccountId:G,ssoRegion:Z,ssoRoleName:Y,ssoSession:J}=A,{ssoClient:X}=A,I=VoA.getProfileName({profile:A.profile??Q?.profile});if(!B&&!G&&!Z&&!Y&&!J){let D=(await VoA.parseKnownFiles(A))[I];if(!D)throw new UT.CredentialsProviderError(`Profile ${I} was not found.`,{logger:A.logger});if(!cTQ(D))throw new UT.CredentialsProviderError(`Profile ${I} is not configured with SSO credentials.`,{logger:A.logger});if(D?.sso_session){let C=(await VoA.loadSsoSessionData(A))[D.sso_session],O=` configurations in profile ${I} and sso-session ${D.sso_session}`;if(Z&&Z!==C.sso_region)throw new UT.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:A.logger});if(B&&B!==C.sso_start_url)throw new UT.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:A.logger});D.sso_region=C.sso_region,D.sso_start_url=C.sso_start_url}let{sso_start_url:K,sso_account_id:V,sso_region:F,sso_role_name:H,sso_session:E}=lTQ(D,A.logger);return pTQ({ssoStartUrl:K,ssoSession:E,ssoAccountId:V,ssoRegion:F,ssoRoleName:H,ssoClient:X,clientConfig:A.clientConfig,parentClientConfig:A.parentClientConfig,profile:I,filepath:A.filepath,configFilepath:A.configFilepath,ignoreCache:A.ignoreCache,logger:A.logger})}else if(!B||!G||!Z||!Y)throw new UT.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:A.logger});else return pTQ({ssoStartUrl:B,ssoSession:J,ssoAccountId:G,ssoRegion:Z,ssoRoleName:Y,ssoClient:X,clientConfig:A.clientConfig,parentClientConfig:A.parentClientConfig,profile:I,filepath:A.filepath,configFilepath:A.configFilepath,ignoreCache:A.ignoreCache,logger:A.logger})};RV6.fromSSO=MV6;RV6.isSsoProfile=cTQ;RV6.validateSsoProfile=lTQ});var iTQ=U((kV6)=>{kV6.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(kV6.HttpAuthLocation||(kV6.HttpAuthLocation={}));kV6.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(kV6.HttpApiKeyAuthLocation||(kV6.HttpApiKeyAuthLocation={}));kV6.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(kV6.EndpointURLScheme||(kV6.EndpointURLScheme={}));kV6.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(kV6.AlgorithmId||(kV6.AlgorithmId={}));var PV6=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>kV6.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>kV6.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},SV6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},xV6=(A)=>{return PV6(A)},yV6=(A)=>{return SV6(A)};kV6.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(kV6.FieldPosition||(kV6.FieldPosition={}));var vV6="__smithy_context";kV6.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(kV6.IniSectionType||(kV6.IniSectionType={}));kV6.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(kV6.RequestHandlerProtocol||(kV6.RequestHandlerProtocol={}));kV6.SMITHY_CONTEXT_KEY=vV6;kV6.getDefaultClientConfiguration=xV6;kV6.resolveDefaultRuntimeConfig=yV6});var rTQ=U((cV6)=>{var gV6=iTQ(),uV6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},mV6=(A)=>{return{httpHandler:A.httpHandler()}};class nTQ{name;kind;values;constructor({name:A,kind:Q=gV6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class aTQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class HoA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new HoA({...A,headers:{...A.headers}});if(Q.query)Q.query=dV6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return HoA.clone(this)}}function dV6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class oTQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function pV6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}cV6.Field=nTQ;cV6.Fields=aTQ;cV6.HttpRequest=HoA;cV6.HttpResponse=oTQ;cV6.getHttpHandlerExtensionConfiguration=uV6;cV6.isValidHostname=pV6;cV6.resolveHttpHandlerRuntimeConfig=mV6});var wk1=U((sTQ)=>{Object.defineProperty(sTQ,"__esModule",{value:!0});sTQ.resolveHttpAuthSchemeConfig=sTQ.defaultSigninHttpAuthSchemeProvider=sTQ.defaultSigninHttpAuthSchemeParametersProvider=void 0;var tV6=vY(),Nk1=Iz(),eV6=async(A,Q,B)=>{return{operation:(0,Nk1.getSmithyContext)(Q).operation,region:await(0,Nk1.normalizeProvider)(A.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};sTQ.defaultSigninHttpAuthSchemeParametersProvider=eV6;function AF6(A){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:A.region},propertiesExtractor:(Q,B)=>({signingProperties:{config:Q,context:B}})}}function QF6(A){return{schemeId:"smithy.api#noAuth"}}var BF6=(A)=>{let Q=[];switch(A.operation){case"CreateOAuth2Token":{Q.push(QF6(A));break}default:Q.push(AF6(A))}return Q};sTQ.defaultSigninHttpAuthSchemeProvider=BF6;var GF6=(A)=>{let Q=(0,tV6.resolveAwsSdkSigV4Config)(A);return Object.assign(Q,{authSchemePreference:(0,Nk1.normalizeProvider)(A.authSchemePreference??[])})};sTQ.resolveHttpAuthSchemeConfig=GF6});var DPQ=U((IPQ)=>{Object.defineProperty(IPQ,"__esModule",{value:!0});IPQ.ruleSet=void 0;var XPQ="required",Kz="fn",Vz="argv",fg="ref",eTQ=!0,APQ="isSet",o1A="booleanEquals",lZA="error",Mi="endpoint",qT="tree",CoA="PartitionResult",Lk1="stringEquals",QPQ={[XPQ]:!0,default:!1,type:"boolean"},BPQ={[XPQ]:!1,type:"string"},GPQ={[fg]:"Endpoint"},Ok1={[Kz]:o1A,[Vz]:[{[fg]:"UseFIPS"},!0]},Mk1={[Kz]:o1A,[Vz]:[{[fg]:"UseDualStack"},!0]},Dz={},Rk1={[Kz]:"getAttr",[Vz]:[{[fg]:CoA},"name"]},EoA={[Kz]:o1A,[Vz]:[{[fg]:"UseFIPS"},!1]},zoA={[Kz]:o1A,[Vz]:[{[fg]:"UseDualStack"},!1]},ZPQ={[Kz]:"getAttr",[Vz]:[{[fg]:CoA},"supportsFIPS"]},YPQ={[Kz]:o1A,[Vz]:[!0,{[Kz]:"getAttr",[Vz]:[{[fg]:CoA},"supportsDualStack"]}]},JPQ=[{[fg]:"Region"}],JF6={version:"1.0",parameters:{UseDualStack:QPQ,UseFIPS:QPQ,Endpoint:BPQ,Region:BPQ},rules:[{conditions:[{[Kz]:APQ,[Vz]:[GPQ]}],rules:[{conditions:[Ok1],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:lZA},{rules:[{conditions:[Mk1],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:lZA},{endpoint:{url:GPQ,properties:Dz,headers:Dz},type:Mi}],type:qT}],type:qT},{rules:[{conditions:[{[Kz]:APQ,[Vz]:JPQ}],rules:[{conditions:[{[Kz]:"aws.partition",[Vz]:JPQ,assign:CoA}],rules:[{conditions:[{[Kz]:Lk1,[Vz]:[Rk1,"aws"]},EoA,zoA],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:Dz,headers:Dz},type:Mi},{conditions:[{[Kz]:Lk1,[Vz]:[Rk1,"aws-cn"]},EoA,zoA],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:Dz,headers:Dz},type:Mi},{conditions:[{[Kz]:Lk1,[Vz]:[Rk1,"aws-us-gov"]},EoA,zoA],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:Dz,headers:Dz},type:Mi},{conditions:[Ok1,Mk1],rules:[{conditions:[{[Kz]:o1A,[Vz]:[eTQ,ZPQ]},YPQ],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dz,headers:Dz},type:Mi}],type:qT},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:lZA}],type:qT},{conditions:[Ok1,zoA],rules:[{conditions:[{[Kz]:o1A,[Vz]:[ZPQ,eTQ]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Dz,headers:Dz},type:Mi}],type:qT},{error:"FIPS is enabled but this partition does not support FIPS",type:lZA}],type:qT},{conditions:[EoA,Mk1],rules:[{conditions:[YPQ],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dz,headers:Dz},type:Mi}],type:qT},{error:"DualStack is enabled but this partition does not support DualStack",type:lZA}],type:qT},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:Dz,headers:Dz},type:Mi}],type:qT}],type:qT},{error:"Invalid Configuration: Missing Region",type:lZA}],type:qT}]};IPQ.ruleSet=JF6});var FPQ=U((KPQ)=>{Object.defineProperty(KPQ,"__esModule",{value:!0});KPQ.defaultEndpointResolver=void 0;var XF6=Qv(),_k1=FT(),IF6=DPQ(),WF6=new _k1.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),DF6=(A,Q={})=>{return WF6.get(A,()=>(0,_k1.resolveEndpoint)(IF6.ruleSet,{endpointParams:A,logger:Q.logger}))};KPQ.defaultEndpointResolver=DF6;_k1.customEndpointFunctions.aws=XF6.awsEndpointFunctions});var $PQ=U((zPQ)=>{Object.defineProperty(zPQ,"__esModule",{value:!0});zPQ.getRuntimeConfig=void 0;var KF6=vY(),VF6=yg(),FF6=iG(),HF6=rC(),EF6=vM(),HPQ=caA(),EPQ=lG(),zF6=wk1(),CF6=FPQ(),$F6=(A)=>{return{apiVersion:"2023-01-01",base64Decoder:A?.base64Decoder??HPQ.fromBase64,base64Encoder:A?.base64Encoder??HPQ.toBase64,disableHostPrefix:A?.disableHostPrefix??!1,endpointProvider:A?.endpointProvider??CF6.defaultEndpointResolver,extensions:A?.extensions??[],httpAuthSchemeProvider:A?.httpAuthSchemeProvider??zF6.defaultSigninHttpAuthSchemeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Q)=>Q.getIdentityProvider("aws.auth#sigv4"),signer:new KF6.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(Q)=>Q.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new FF6.NoAuthSigner}],logger:A?.logger??new HF6.NoOpLogger,protocol:A?.protocol??new VF6.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.signin"}),serviceId:A?.serviceId??"Signin",urlParser:A?.urlParser??EF6.parseUrl,utf8Decoder:A?.utf8Decoder??EPQ.fromUtf8,utf8Encoder:A?.utf8Encoder??EPQ.toUtf8}};zPQ.getRuntimeConfig=$F6});var MPQ=U((LPQ)=>{Object.defineProperty(LPQ,"__esModule",{value:!0});LPQ.getRuntimeConfig=void 0;var UF6=NZ(),qF6=UF6.__importDefault(uaA()),UPQ=vY(),qPQ=Tg(),$oA=wW(),NF6=Pg(),NPQ=wH(),r1A=Dq(),wPQ=dw(),wF6=Sg(),LF6=Jv(),OF6=$PQ(),MF6=rC(),RF6=kg(),_F6=rC(),jF6=(A)=>{(0,_F6.emitWarningIfUnsupportedVersion)(process.version);let Q=(0,RF6.resolveDefaultsModeConfig)(A),B=()=>Q().then(MF6.loadConfigsForDefaultMode),G=(0,OF6.getRuntimeConfig)(A);(0,UPQ.emitWarningIfUnsupportedVersion)(process.version);let Z={profile:A?.profile,logger:G.logger};return{...G,...A,runtime:"node",defaultsMode:Q,authSchemePreference:A?.authSchemePreference??(0,r1A.loadConfig)(UPQ.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,Z),bodyLengthChecker:A?.bodyLengthChecker??wF6.calculateBodyLength,defaultUserAgentProvider:A?.defaultUserAgentProvider??(0,qPQ.createDefaultUserAgentProvider)({serviceId:G.serviceId,clientVersion:qF6.default.version}),maxAttempts:A?.maxAttempts??(0,r1A.loadConfig)(NPQ.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,A),region:A?.region??(0,r1A.loadConfig)($oA.NODE_REGION_CONFIG_OPTIONS,{...$oA.NODE_REGION_CONFIG_FILE_OPTIONS,...Z}),requestHandler:wPQ.NodeHttpHandler.create(A?.requestHandler??B),retryMode:A?.retryMode??(0,r1A.loadConfig)({...NPQ.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await B()).retryMode||LF6.DEFAULT_RETRY_MODE},A),sha256:A?.sha256??NF6.Hash.bind(null,"sha256"),streamCollector:A?.streamCollector??wPQ.streamCollector,useDualstackEndpoint:A?.useDualstackEndpoint??(0,r1A.loadConfig)($oA.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,Z),useFipsEndpoint:A?.useFipsEndpoint??(0,r1A.loadConfig)($oA.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,Z),userAgentAppId:A?.userAgentAppId??(0,r1A.loadConfig)(qPQ.NODE_APP_ID_CONFIG_OPTIONS,Z)}};LPQ.getRuntimeConfig=jF6});var rPQ=U((vk1)=>{var RPQ=zg(),TF6=Cg(),PF6=$g(),_PQ=Zv(),SF6=wW(),jk1=iG(),iZA=IX(),xF6=jg(),pPQ=HT(),jPQ=wH(),Ri=rC(),TPQ=wk1(),yF6=MPQ(),PPQ=ET(),SPQ=naA(),vF6=(A)=>{return Object.assign(A,{useDualstackEndpoint:A.useDualstackEndpoint??!1,useFipsEndpoint:A.useFipsEndpoint??!1,defaultSigningName:"signin"})},kF6={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},bF6=(A)=>{let{httpAuthSchemes:Q,httpAuthSchemeProvider:B,credentials:G}=A;return{setHttpAuthScheme(Z){let Y=Q.findIndex((J)=>J.schemeId===Z.schemeId);if(Y===-1)Q.push(Z);else Q.splice(Y,1,Z)},httpAuthSchemes(){return Q},setHttpAuthSchemeProvider(Z){B=Z},httpAuthSchemeProvider(){return B},setCredentials(Z){G=Z},credentials(){return G}}},fF6=(A)=>{return{httpAuthSchemes:A.httpAuthSchemes(),httpAuthSchemeProvider:A.httpAuthSchemeProvider(),credentials:A.credentials()}},hF6=(A,Q)=>{let B=Object.assign(PPQ.getAwsRegionExtensionConfiguration(A),Ri.getDefaultExtensionConfiguration(A),SPQ.getHttpHandlerExtensionConfiguration(A),bF6(A));return Q.forEach((G)=>G.configure(B)),Object.assign(A,PPQ.resolveAwsRegionExtensionConfiguration(B),Ri.resolveDefaultRuntimeConfig(B),SPQ.resolveHttpHandlerRuntimeConfig(B),fF6(B))};class Tk1 extends Ri.Client{config;constructor(...[A]){let Q=yF6.getRuntimeConfig(A||{});super(Q);this.initConfig=Q;let B=vF6(Q),G=_PQ.resolveUserAgentConfig(B),Z=jPQ.resolveRetryConfig(G),Y=SF6.resolveRegionConfig(Z),J=RPQ.resolveHostHeaderConfig(Y),X=pPQ.resolveEndpointConfig(J),I=TPQ.resolveHttpAuthSchemeConfig(X),W=hF6(I,A?.extensions||[]);this.config=W,this.middlewareStack.use(iZA.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(_PQ.getUserAgentPlugin(this.config)),this.middlewareStack.use(jPQ.getRetryPlugin(this.config)),this.middlewareStack.use(xF6.getContentLengthPlugin(this.config)),this.middlewareStack.use(RPQ.getHostHeaderPlugin(this.config)),this.middlewareStack.use(TF6.getLoggerPlugin(this.config)),this.middlewareStack.use(PF6.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(jk1.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:TPQ.defaultSigninHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(D)=>new jk1.DefaultIdentityProviderConfig({"aws.auth#sigv4":D.credentials})})),this.middlewareStack.use(jk1.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}var nZA=class A extends Ri.ServiceException{constructor(Q){super(Q);Object.setPrototypeOf(this,A.prototype)}},cPQ=class A extends nZA{name="AccessDeniedException";$fault="client";error;constructor(Q){super({name:"AccessDeniedException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error}},lPQ=class A extends nZA{name="InternalServerException";$fault="server";error;constructor(Q){super({name:"InternalServerException",$fault:"server",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error}},iPQ=class A extends nZA{name="TooManyRequestsError";$fault="client";error;constructor(Q){super({name:"TooManyRequestsError",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error}},nPQ=class A extends nZA{name="ValidationException";$fault="client";error;constructor(Q){super({name:"ValidationException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.error=Q.error}},gF6="AccessDeniedException",uF6="AccessToken",mF6="CreateOAuth2Token",dF6="CreateOAuth2TokenRequest",pF6="CreateOAuth2TokenRequestBody",cF6="CreateOAuth2TokenResponseBody",lF6="CreateOAuth2TokenResponse",iF6="InternalServerException",nF6="RefreshToken",aF6="TooManyRequestsError",oF6="ValidationException",xPQ="accessKeyId",yPQ="accessToken",Pk1="client",vPQ="clientId",kPQ="codeVerifier",rF6="code",_i="error",bPQ="expiresIn",fPQ="grantType",sF6="http",Sk1="httpError",hPQ="idToken",iw="jsonName",qoA="message",UoA="refreshToken",gPQ="redirectUri",tF6="server",uPQ="secretAccessKey",mPQ="sessionToken",aPQ="smithy.ts.sdk.synthetic.com.amazonaws.signin",eF6="tokenInput",AH6="tokenOutput",dPQ="tokenType",sC="com.amazonaws.signin",oPQ=[0,sC,nF6,8,0],QH6=[-3,sC,gF6,{[_i]:Pk1},[_i,qoA],[0,0]];iZA.TypeRegistry.for(sC).registerError(QH6,cPQ);var BH6=[3,sC,uF6,8,[xPQ,uPQ,mPQ],[[0,{[iw]:xPQ}],[0,{[iw]:uPQ}],[0,{[iw]:mPQ}]]],GH6=[3,sC,dF6,0,[eF6],[[()=>ZH6,16]]],ZH6=[3,sC,pF6,0,[vPQ,fPQ,rF6,gPQ,kPQ,UoA],[[0,{[iw]:vPQ}],[0,{[iw]:fPQ}],0,[0,{[iw]:gPQ}],[0,{[iw]:kPQ}],[()=>oPQ,{[iw]:UoA}]]],YH6=[3,sC,lF6,0,[AH6],[[()=>JH6,16]]],JH6=[3,sC,cF6,0,[yPQ,dPQ,bPQ,UoA,hPQ],[[()=>BH6,{[iw]:yPQ}],[0,{[iw]:dPQ}],[1,{[iw]:bPQ}],[()=>oPQ,{[iw]:UoA}],[0,{[iw]:hPQ}]]],XH6=[-3,sC,iF6,{[_i]:tF6,[Sk1]:500},[_i,qoA],[0,0]];iZA.TypeRegistry.for(sC).registerError(XH6,lPQ);var IH6=[-3,sC,aF6,{[_i]:Pk1,[Sk1]:429},[_i,qoA],[0,0]];iZA.TypeRegistry.for(sC).registerError(IH6,iPQ);var WH6=[-3,sC,oF6,{[_i]:Pk1,[Sk1]:400},[_i,qoA],[0,0]];iZA.TypeRegistry.for(sC).registerError(WH6,nPQ);var DH6=[-3,aPQ,"SigninServiceException",0,[],[]];iZA.TypeRegistry.for(aPQ).registerError(DH6,nZA);var KH6=[9,sC,mF6,{[sF6]:["POST","/v1/token",200]},()=>GH6,()=>YH6];class xk1 extends Ri.Command.classBuilder().ep(kF6).m(function(A,Q,B,G){return[pPQ.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(KH6).build(){}var VH6={CreateOAuth2TokenCommand:xk1};class yk1 extends Tk1{}Ri.createAggregatedClient(VH6,yk1);var FH6={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"};Object.defineProperty(vk1,"$Command",{enumerable:!0,get:function(){return Ri.Command}});Object.defineProperty(vk1,"__Client",{enumerable:!0,get:function(){return Ri.Client}});vk1.AccessDeniedException=cPQ;vk1.CreateOAuth2TokenCommand=xk1;vk1.InternalServerException=lPQ;vk1.OAuth2ErrorCode=FH6;vk1.Signin=yk1;vk1.SigninClient=Tk1;vk1.SigninServiceException=nZA;vk1.TooManyRequestsError=iPQ;vk1.ValidationException=nPQ});var gk1=U((_H6)=>{var LH6=Wq(),ji=TD(),fk1=Yv(),OH6=rTQ(),NoA=qA("node:crypto"),kk1=qA("node:fs"),MH6=qA("node:os"),bk1=qA("node:path");class hk1{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300000;constructor(A,Q,B){this.profileData=A,this.init=Q,this.callerClientConfig=B}async loadCredentials(){let A=await this.loadToken();if(!A)throw new ji.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let Q=A.accessToken,B=Date.now();if(new Date(Q.expiresAt).getTime()-B<=hk1.REFRESH_THRESHOLD)return this.refresh(A);return{accessKeyId:Q.accessKeyId,secretAccessKey:Q.secretAccessKey,sessionToken:Q.sessionToken,accountId:Q.accountId,expiration:new Date(Q.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(A){let{SigninClient:Q,CreateOAuth2TokenCommand:B}=await Promise.resolve().then(() => c(rPQ())),{logger:G,userAgentAppId:Z}=this.callerClientConfig??{},J=((D)=>{return D?.metadata?.handlerProtocol==="h2"})(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,X=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,I=new Q({credentials:{accessKeyId:"",secretAccessKey:""},region:X,requestHandler:J,logger:G,userAgentAppId:Z,...this.init?.clientConfig});this.createDPoPInterceptor(I.middlewareStack);let W={tokenInput:{clientId:A.clientId,refreshToken:A.refreshToken,grantType:"refresh_token"}};try{let D=await I.send(new B(W)),{accessKeyId:K,secretAccessKey:V,sessionToken:F}=D.tokenOutput?.accessToken??{},{refreshToken:H,expiresIn:E}=D.tokenOutput??{};if(!K||!V||!F||!H)throw new ji.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let z=(E??900)*1000,C=new Date(Date.now()+z),O={...A,accessToken:{...A.accessToken,accessKeyId:K,secretAccessKey:V,sessionToken:F,expiresAt:C.toISOString()},refreshToken:H};await this.saveToken(O);let L=O.accessToken;return{accessKeyId:L.accessKeyId,secretAccessKey:L.secretAccessKey,sessionToken:L.sessionToken,accountId:L.accountId,expiration:C}}catch(D){if(D.name==="AccessDeniedException"){let K=D.error,V;switch(K){case"TOKEN_EXPIRED":V="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":V="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":V="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:V=`Failed to refresh token: ${String(D)}. Please re-authenticate using \`aws login\``}throw new ji.CredentialsProviderError(V,{logger:this.logger,tryNextLink:!1})}throw new ji.CredentialsProviderError(`Failed to refresh token: ${String(D)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let A=this.getTokenFilePath();try{let Q;try{Q=await fk1.readFile(A,{ignoreCache:this.init?.ignoreCache})}catch{Q=await kk1.promises.readFile(A,"utf8")}let B=JSON.parse(Q),G=["accessToken","clientId","refreshToken","dpopKey"].filter((Z)=>!B[Z]);if(!B.accessToken?.accountId)G.push("accountId");if(G.length>0)throw new ji.CredentialsProviderError(`Token validation failed, missing fields: ${G.join(", ")}`,{logger:this.logger,tryNextLink:!1});return B}catch(Q){throw new ji.CredentialsProviderError(`Failed to load token from ${A}: ${String(Q)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(A){let Q=this.getTokenFilePath(),B=bk1.dirname(Q);try{await kk1.promises.mkdir(B,{recursive:!0})}catch(G){}await kk1.promises.writeFile(Q,JSON.stringify(A,null,2),"utf8")}getTokenFilePath(){let A=process.env.AWS_LOGIN_CACHE_DIRECTORY??bk1.join(MH6.homedir(),".aws","login","cache"),Q=Buffer.from(this.loginSession,"utf8"),B=NoA.createHash("sha256").update(Q).digest("hex");return bk1.join(A,`${B}.json`)}derToRawSignature(A){let Q=2;if(A[Q]!==2)throw Error("Invalid DER signature");Q++;let B=A[Q++],G=A.subarray(Q,Q+B);if(Q+=B,A[Q]!==2)throw Error("Invalid DER signature");Q++;let Z=A[Q++],Y=A.subarray(Q,Q+Z);G=G[0]===0?G.subarray(1):G,Y=Y[0]===0?Y.subarray(1):Y;let J=Buffer.concat([Buffer.alloc(32-G.length),G]),X=Buffer.concat([Buffer.alloc(32-Y.length),Y]);return Buffer.concat([J,X])}createDPoPInterceptor(A){A.add((Q)=>async(B)=>{if(OH6.HttpRequest.isInstance(B.request)){let G=B.request,Z=`${G.protocol}//${G.hostname}${G.port?`:${G.port}`:""}${G.path}`,Y=await this.generateDpop(G.method,Z);G.headers={...G.headers,DPoP:Y}}return Q(B)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(A="POST",Q){let B=await this.loadToken();try{let G=NoA.createPrivateKey({key:B.dpopKey,format:"pem",type:"sec1"}),Y=NoA.createPublicKey(G).export({format:"der",type:"spki"}),J=-1;for(let C=0;C<Y.length;C++)if(Y[C]===4){J=C;break}let X=Y.slice(J+1,J+33),I=Y.slice(J+33,J+65),W={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:X.toString("base64url"),y:I.toString("base64url")}},D={jti:crypto.randomUUID(),htm:A,htu:Q,iat:Math.floor(Date.now()/1000)},K=Buffer.from(JSON.stringify(W)).toString("base64url"),V=Buffer.from(JSON.stringify(D)).toString("base64url"),F=`${K}.${V}`,H=NoA.sign("sha256",Buffer.from(F),G),z=this.derToRawSignature(H).toString("base64url");return`${F}.${z}`}catch(G){throw new ji.CredentialsProviderError(`Failed to generate Dpop proof: ${G instanceof Error?G.message:String(G)}`,{logger:this.logger,tryNextLink:!1})}}}var RH6=(A)=>async({callerClientConfig:Q}={})=>{A?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let B=await fk1.parseKnownFiles(A||{}),G=fk1.getProfileName({profile:A?.profile??Q?.profile}),Z=B[G];if(!Z?.login_session)throw new ji.CredentialsProviderError(`Profile ${G} does not contain login_session.`,{tryNextLink:!0,logger:A?.logger});let J=await new hk1(Z,A,Q).loadCredentials();return LH6.setCredentialFeature(J,"CREDENTIALS_LOGIN","AD")};_H6.fromLoginCredentials=RH6});var mk1=U((sPQ)=>{Object.defineProperty(sPQ,"__esModule",{value:!0});sPQ.resolveHttpAuthSchemeConfig=sPQ.resolveStsAuthConfig=sPQ.defaultSTSHttpAuthSchemeProvider=sPQ.defaultSTSHttpAuthSchemeParametersProvider=void 0;var TH6=vY(),uk1=Iz(),PH6=dk1(),SH6=async(A,Q,B)=>{return{operation:(0,uk1.getSmithyContext)(Q).operation,region:await(0,uk1.normalizeProvider)(A.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};sPQ.defaultSTSHttpAuthSchemeParametersProvider=SH6;function xH6(A){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:A.region},propertiesExtractor:(Q,B)=>({signingProperties:{config:Q,context:B}})}}function yH6(A){return{schemeId:"smithy.api#noAuth"}}var vH6=(A)=>{let Q=[];switch(A.operation){case"AssumeRoleWithWebIdentity":{Q.push(yH6(A));break}default:Q.push(xH6(A))}return Q};sPQ.defaultSTSHttpAuthSchemeProvider=vH6;var kH6=(A)=>Object.assign(A,{stsClientCtor:PH6.STSClient});sPQ.resolveStsAuthConfig=kH6;var bH6=(A)=>{let Q=sPQ.resolveStsAuthConfig(A),B=(0,TH6.resolveAwsSdkSigV4Config)(Q);return Object.assign(B,{authSchemePreference:(0,uk1.normalizeProvider)(A.authSchemePreference??[])})};sPQ.resolveHttpAuthSchemeConfig=bH6});var pk1=U((ASQ)=>{Object.defineProperty(ASQ,"__esModule",{value:!0});ASQ.commonParams=ASQ.resolveClientEndpointParameters=void 0;var gH6=(A)=>{return Object.assign(A,{useDualstackEndpoint:A.useDualstackEndpoint??!1,useFipsEndpoint:A.useFipsEndpoint??!1,useGlobalEndpoint:A.useGlobalEndpoint??!1,defaultSigningName:"sts"})};ASQ.resolveClientEndpointParameters=gH6;ASQ.commonParams={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var MSQ=U((LSQ)=>{Object.defineProperty(LSQ,"__esModule",{value:!0});LSQ.ruleSet=void 0;var FSQ="required",g3="type",g7="fn",u7="argv",Pi="ref",BSQ=!1,ck1=!0,Ti="booleanEquals",OH="stringEquals",HSQ="sigv4",ESQ="sts",zSQ="us-east-1",WX="endpoint",GSQ="https://sts.{Region}.{PartitionResult#dnsSuffix}",Wv="tree",aZA="error",ik1="getAttr",ZSQ={[FSQ]:!1,[g3]:"string"},lk1={[FSQ]:!0,default:!1,[g3]:"boolean"},CSQ={[Pi]:"Endpoint"},YSQ={[g7]:"isSet",[u7]:[{[Pi]:"Region"}]},MH={[Pi]:"Region"},JSQ={[g7]:"aws.partition",[u7]:[MH],assign:"PartitionResult"},$SQ={[Pi]:"UseFIPS"},USQ={[Pi]:"UseDualStack"},Fz={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:HSQ,signingName:ESQ,signingRegion:zSQ}]},headers:{}},nw={},XSQ={conditions:[{[g7]:OH,[u7]:[MH,"aws-global"]}],[WX]:Fz,[g3]:WX},qSQ={[g7]:Ti,[u7]:[$SQ,!0]},NSQ={[g7]:Ti,[u7]:[USQ,!0]},ISQ={[g7]:ik1,[u7]:[{[Pi]:"PartitionResult"},"supportsFIPS"]},wSQ={[Pi]:"PartitionResult"},WSQ={[g7]:Ti,[u7]:[!0,{[g7]:ik1,[u7]:[wSQ,"supportsDualStack"]}]},DSQ=[{[g7]:"isSet",[u7]:[CSQ]}],KSQ=[qSQ],VSQ=[NSQ],mH6={version:"1.0",parameters:{Region:ZSQ,UseDualStack:lk1,UseFIPS:lk1,Endpoint:ZSQ,UseGlobalEndpoint:lk1},rules:[{conditions:[{[g7]:Ti,[u7]:[{[Pi]:"UseGlobalEndpoint"},ck1]},{[g7]:"not",[u7]:DSQ},YSQ,JSQ,{[g7]:Ti,[u7]:[$SQ,BSQ]},{[g7]:Ti,[u7]:[USQ,BSQ]}],rules:[{conditions:[{[g7]:OH,[u7]:[MH,"ap-northeast-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"ap-south-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"ap-southeast-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"ap-southeast-2"]}],endpoint:Fz,[g3]:WX},XSQ,{conditions:[{[g7]:OH,[u7]:[MH,"ca-central-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"eu-central-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"eu-north-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"eu-west-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"eu-west-2"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"eu-west-3"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"sa-east-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,zSQ]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"us-east-2"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"us-west-1"]}],endpoint:Fz,[g3]:WX},{conditions:[{[g7]:OH,[u7]:[MH,"us-west-2"]}],endpoint:Fz,[g3]:WX},{endpoint:{url:GSQ,properties:{authSchemes:[{name:HSQ,signingName:ESQ,signingRegion:"{Region}"}]},headers:nw},[g3]:WX}],[g3]:Wv},{conditions:DSQ,rules:[{conditions:KSQ,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[g3]:aZA},{conditions:VSQ,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[g3]:aZA},{endpoint:{url:CSQ,properties:nw,headers:nw},[g3]:WX}],[g3]:Wv},{conditions:[YSQ],rules:[{conditions:[JSQ],rules:[{conditions:[qSQ,NSQ],rules:[{conditions:[{[g7]:Ti,[u7]:[ck1,ISQ]},WSQ],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:nw,headers:nw},[g3]:WX}],[g3]:Wv},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[g3]:aZA}],[g3]:Wv},{conditions:KSQ,rules:[{conditions:[{[g7]:Ti,[u7]:[ISQ,ck1]}],rules:[{conditions:[{[g7]:OH,[u7]:[{[g7]:ik1,[u7]:[wSQ,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:nw,headers:nw},[g3]:WX},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:nw,headers:nw},[g3]:WX}],[g3]:Wv},{error:"FIPS is enabled but this partition does not support FIPS",[g3]:aZA}],[g3]:Wv},{conditions:VSQ,rules:[{conditions:[WSQ],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:nw,headers:nw},[g3]:WX}],[g3]:Wv},{error:"DualStack is enabled but this partition does not support DualStack",[g3]:aZA}],[g3]:Wv},XSQ,{endpoint:{url:GSQ,properties:nw,headers:nw},[g3]:WX}],[g3]:Wv}],[g3]:Wv},{error:"Invalid Configuration: Missing Region",[g3]:aZA}]};LSQ.ruleSet=mH6});var jSQ=U((RSQ)=>{Object.defineProperty(RSQ,"__esModule",{value:!0});RSQ.defaultEndpointResolver=void 0;var dH6=Qv(),nk1=FT(),pH6=MSQ(),cH6=new nk1.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),lH6=(A,Q={})=>{return cH6.get(A,()=>(0,nk1.resolveEndpoint)(pH6.ruleSet,{endpointParams:A,logger:Q.logger}))};RSQ.defaultEndpointResolver=lH6;nk1.customEndpointFunctions.aws=dH6.awsEndpointFunctions});var ySQ=U((SSQ)=>{Object.defineProperty(SSQ,"__esModule",{value:!0});SSQ.getRuntimeConfig=void 0;var iH6=vY(),nH6=yg(),aH6=iG(),oH6=rC(),rH6=vM(),TSQ=caA(),PSQ=lG(),sH6=mk1(),tH6=jSQ(),eH6=(A)=>{return{apiVersion:"2011-06-15",base64Decoder:A?.base64Decoder??TSQ.fromBase64,base64Encoder:A?.base64Encoder??TSQ.toBase64,disableHostPrefix:A?.disableHostPrefix??!1,endpointProvider:A?.endpointProvider??tH6.defaultEndpointResolver,extensions:A?.extensions??[],httpAuthSchemeProvider:A?.httpAuthSchemeProvider??sH6.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Q)=>Q.getIdentityProvider("aws.auth#sigv4"),signer:new iH6.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(Q)=>Q.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new aH6.NoAuthSigner}],logger:A?.logger??new oH6.NoOpLogger,protocol:A?.protocol??new nH6.AwsQueryProtocol({defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15"}),serviceId:A?.serviceId??"STS",urlParser:A?.urlParser??rH6.parseUrl,utf8Decoder:A?.utf8Decoder??PSQ.fromUtf8,utf8Encoder:A?.utf8Encoder??PSQ.toUtf8}};SSQ.getRuntimeConfig=eH6});var gSQ=U((fSQ)=>{Object.defineProperty(fSQ,"__esModule",{value:!0});fSQ.getRuntimeConfig=void 0;var AE6=NZ(),QE6=AE6.__importDefault(uaA()),ak1=vY(),vSQ=Tg(),woA=wW(),BE6=iG(),GE6=Pg(),kSQ=wH(),s1A=Dq(),bSQ=dw(),ZE6=Sg(),YE6=Jv(),JE6=ySQ(),XE6=rC(),IE6=kg(),WE6=rC(),DE6=(A)=>{(0,WE6.emitWarningIfUnsupportedVersion)(process.version);let Q=(0,IE6.resolveDefaultsModeConfig)(A),B=()=>Q().then(XE6.loadConfigsForDefaultMode),G=(0,JE6.getRuntimeConfig)(A);(0,ak1.emitWarningIfUnsupportedVersion)(process.version);let Z={profile:A?.profile,logger:G.logger};return{...G,...A,runtime:"node",defaultsMode:Q,authSchemePreference:A?.authSchemePreference??(0,s1A.loadConfig)(ak1.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,Z),bodyLengthChecker:A?.bodyLengthChecker??ZE6.calculateBodyLength,defaultUserAgentProvider:A?.defaultUserAgentProvider??(0,vSQ.createDefaultUserAgentProvider)({serviceId:G.serviceId,clientVersion:QE6.default.version}),httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Y)=>Y.getIdentityProvider("aws.auth#sigv4")||(async(J)=>await A.credentialDefaultProvider(J?.__config||{})()),signer:new ak1.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(Y)=>Y.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new BE6.NoAuthSigner}],maxAttempts:A?.maxAttempts??(0,s1A.loadConfig)(kSQ.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,A),region:A?.region??(0,s1A.loadConfig)(woA.NODE_REGION_CONFIG_OPTIONS,{...woA.NODE_REGION_CONFIG_FILE_OPTIONS,...Z}),requestHandler:bSQ.NodeHttpHandler.create(A?.requestHandler??B),retryMode:A?.retryMode??(0,s1A.loadConfig)({...kSQ.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await B()).retryMode||YE6.DEFAULT_RETRY_MODE},A),sha256:A?.sha256??GE6.Hash.bind(null,"sha256"),streamCollector:A?.streamCollector??bSQ.streamCollector,useDualstackEndpoint:A?.useDualstackEndpoint??(0,s1A.loadConfig)(woA.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,Z),useFipsEndpoint:A?.useFipsEndpoint??(0,s1A.loadConfig)(woA.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,Z),userAgentAppId:A?.userAgentAppId??(0,s1A.loadConfig)(vSQ.NODE_APP_ID_CONFIG_OPTIONS,Z)}};fSQ.getRuntimeConfig=DE6});var dSQ=U((uSQ)=>{Object.defineProperty(uSQ,"__esModule",{value:!0});uSQ.resolveHttpAuthRuntimeConfig=uSQ.getHttpAuthExtensionConfiguration=void 0;var KE6=(A)=>{let{httpAuthSchemes:Q,httpAuthSchemeProvider:B,credentials:G}=A;return{setHttpAuthScheme(Z){let Y=Q.findIndex((J)=>J.schemeId===Z.schemeId);if(Y===-1)Q.push(Z);else Q.splice(Y,1,Z)},httpAuthSchemes(){return Q},setHttpAuthSchemeProvider(Z){B=Z},httpAuthSchemeProvider(){return B},setCredentials(Z){G=Z},credentials(){return G}}};uSQ.getHttpAuthExtensionConfiguration=KE6;var VE6=(A)=>{return{httpAuthSchemes:A.httpAuthSchemes(),httpAuthSchemeProvider:A.httpAuthSchemeProvider(),credentials:A.credentials()}};uSQ.resolveHttpAuthRuntimeConfig=VE6});var oSQ=U((nSQ)=>{Object.defineProperty(nSQ,"__esModule",{value:!0});nSQ.resolveRuntimeExtensions=void 0;var pSQ=ET(),cSQ=naA(),lSQ=rC(),iSQ=dSQ(),HE6=(A,Q)=>{let B=Object.assign((0,pSQ.getAwsRegionExtensionConfiguration)(A),(0,lSQ.getDefaultExtensionConfiguration)(A),(0,cSQ.getHttpHandlerExtensionConfiguration)(A),(0,iSQ.getHttpAuthExtensionConfiguration)(A));return Q.forEach((G)=>G.configure(B)),Object.assign(A,(0,pSQ.resolveAwsRegionExtensionConfiguration)(B),(0,lSQ.resolveDefaultRuntimeConfig)(B),(0,cSQ.resolveHttpHandlerRuntimeConfig)(B),(0,iSQ.resolveHttpAuthRuntimeConfig)(B))};nSQ.resolveRuntimeExtensions=HE6});var dk1=U((rk1)=>{Object.defineProperty(rk1,"__esModule",{value:!0});rk1.STSClient=rk1.__Client=void 0;var rSQ=zg(),EE6=Cg(),zE6=$g(),sSQ=Zv(),CE6=wW(),ok1=iG(),$E6=IX(),UE6=jg(),qE6=HT(),tSQ=wH(),AxQ=rC();Object.defineProperty(rk1,"__Client",{enumerable:!0,get:function(){return AxQ.Client}});var eSQ=mk1(),NE6=pk1(),wE6=gSQ(),LE6=oSQ();class QxQ extends AxQ.Client{config;constructor(...[A]){let Q=(0,wE6.getRuntimeConfig)(A||{});super(Q);this.initConfig=Q;let B=(0,NE6.resolveClientEndpointParameters)(Q),G=(0,sSQ.resolveUserAgentConfig)(B),Z=(0,tSQ.resolveRetryConfig)(G),Y=(0,CE6.resolveRegionConfig)(Z),J=(0,rSQ.resolveHostHeaderConfig)(Y),X=(0,qE6.resolveEndpointConfig)(J),I=(0,eSQ.resolveHttpAuthSchemeConfig)(X),W=(0,LE6.resolveRuntimeExtensions)(I,A?.extensions||[]);this.config=W,this.middlewareStack.use((0,$E6.getSchemaSerdePlugin)(this.config)),this.middlewareStack.use((0,sSQ.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,tSQ.getRetryPlugin)(this.config)),this.middlewareStack.use((0,UE6.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,rSQ.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,EE6.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,zE6.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,ok1.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:eSQ.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(D)=>new ok1.DefaultIdentityProviderConfig({"aws.auth#sigv4":D.credentials})})),this.middlewareStack.use((0,ok1.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}}rk1.STSClient=QxQ});var RoA=U((LoA)=>{var hNA=dk1(),gNA=rC(),GxQ=HT(),ZxQ=pk1(),Si=IX(),sk1=Wq(),OE6=ET(),hg=class A extends gNA.ServiceException{constructor(Q){super(Q);Object.setPrototypeOf(this,A.prototype)}},YxQ=class A extends hg{name="ExpiredTokenException";$fault="client";constructor(Q){super({name:"ExpiredTokenException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},JxQ=class A extends hg{name="MalformedPolicyDocumentException";$fault="client";constructor(Q){super({name:"MalformedPolicyDocumentException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},XxQ=class A extends hg{name="PackedPolicyTooLargeException";$fault="client";constructor(Q){super({name:"PackedPolicyTooLargeException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},IxQ=class A extends hg{name="RegionDisabledException";$fault="client";constructor(Q){super({name:"RegionDisabledException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},WxQ=class A extends hg{name="IDPRejectedClaimException";$fault="client";constructor(Q){super({name:"IDPRejectedClaimException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},DxQ=class A extends hg{name="InvalidIdentityTokenException";$fault="client";constructor(Q){super({name:"InvalidIdentityTokenException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},KxQ=class A extends hg{name="IDPCommunicationErrorException";$fault="client";constructor(Q){super({name:"IDPCommunicationErrorException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},ME6="Arn",RE6="AccessKeyId",_E6="AssumeRole",jE6="AssumedRoleId",TE6="AssumeRoleRequest",PE6="AssumeRoleResponse",tk1="AssumedRoleUser",SE6="AssumeRoleWithWebIdentity",xE6="AssumeRoleWithWebIdentityRequest",yE6="AssumeRoleWithWebIdentityResponse",vE6="Audience",ek1="Credentials",kE6="ContextAssertion",VxQ="DurationSeconds",bE6="Expiration",fE6="ExternalId",hE6="ExpiredTokenException",gE6="IDPCommunicationErrorException",uE6="IDPRejectedClaimException",mE6="InvalidIdentityTokenException",dE6="Key",pE6="MalformedPolicyDocumentException",FxQ="Policy",HxQ="PolicyArns",cE6="ProviderArn",lE6="ProvidedContexts",iE6="ProvidedContextsListType",nE6="ProvidedContext",aE6="PolicyDescriptorType",oE6="ProviderId",ExQ="PackedPolicySize",rE6="PackedPolicyTooLargeException",sE6="Provider",zxQ="RoleArn",tE6="RegionDisabledException",CxQ="RoleSessionName",eE6="SecretAccessKey",Az6="SubjectFromWebIdentityToken",Ab1="SourceIdentity",Qz6="SerialNumber",Bz6="SessionToken",Gz6="Tags",Zz6="TokenCode",Yz6="TransitiveTagKeys",Jz6="Tag",Xz6="Value",Iz6="WebIdentityToken",Wz6="arn",Dz6="accessKeySecretType",t1A="awsQueryError",e1A="client",Kz6="clientTokenType",A0A="error",Q0A="httpError",B0A="message",Vz6="policyDescriptorListType",$xQ="smithy.ts.sdk.synthetic.com.amazonaws.sts",Fz6="tagListType",MG="com.amazonaws.sts",Hz6=[0,MG,Dz6,8,0],Ez6=[0,MG,Kz6,8,0],UxQ=[3,MG,tk1,0,[jE6,ME6],[0,0]],zz6=[3,MG,TE6,0,[zxQ,CxQ,HxQ,FxQ,VxQ,Gz6,Yz6,fE6,Qz6,Zz6,Ab1,lE6],[0,0,()=>NxQ,0,1,()=>xz6,64,0,0,0,0,()=>Sz6]],Cz6=[3,MG,PE6,0,[ek1,tk1,ExQ,Ab1],[[()=>qxQ,0],()=>UxQ,1,0]],$z6=[3,MG,xE6,0,[zxQ,CxQ,Iz6,oE6,HxQ,FxQ,VxQ],[0,0,[()=>Ez6,0],0,()=>NxQ,0,1]],Uz6=[3,MG,yE6,0,[ek1,Az6,tk1,ExQ,sE6,vE6,Ab1],[[()=>qxQ,0],0,()=>UxQ,1,0,0,0]],qxQ=[3,MG,ek1,0,[RE6,eE6,Bz6,bE6],[0,[()=>Hz6,0],0,4]],qz6=[-3,MG,hE6,{[A0A]:e1A,[Q0A]:400,[t1A]:["ExpiredTokenException",400]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(qz6,YxQ);var Nz6=[-3,MG,gE6,{[A0A]:e1A,[Q0A]:400,[t1A]:["IDPCommunicationError",400]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(Nz6,KxQ);var wz6=[-3,MG,uE6,{[A0A]:e1A,[Q0A]:403,[t1A]:["IDPRejectedClaim",403]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(wz6,WxQ);var Lz6=[-3,MG,mE6,{[A0A]:e1A,[Q0A]:400,[t1A]:["InvalidIdentityToken",400]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(Lz6,DxQ);var Oz6=[-3,MG,pE6,{[A0A]:e1A,[Q0A]:400,[t1A]:["MalformedPolicyDocument",400]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(Oz6,JxQ);var Mz6=[-3,MG,rE6,{[A0A]:e1A,[Q0A]:400,[t1A]:["PackedPolicyTooLarge",400]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(Mz6,XxQ);var Rz6=[3,MG,aE6,0,[Wz6],[0]],_z6=[3,MG,nE6,0,[cE6,kE6],[0,0]],jz6=[-3,MG,tE6,{[A0A]:e1A,[Q0A]:403,[t1A]:["RegionDisabledException",403]},[B0A],[0]];Si.TypeRegistry.for(MG).registerError(jz6,IxQ);var Tz6=[3,MG,Jz6,0,[dE6,Xz6],[0,0]],Pz6=[-3,$xQ,"STSServiceException",0,[],[]];Si.TypeRegistry.for($xQ).registerError(Pz6,hg);var NxQ=[1,MG,Vz6,0,()=>Rz6],Sz6=[1,MG,iE6,0,()=>_z6],xz6=[1,MG,Fz6,0,()=>Tz6],yz6=[9,MG,_E6,0,()=>zz6,()=>Cz6],vz6=[9,MG,SE6,0,()=>$z6,()=>Uz6];class OoA extends gNA.Command.classBuilder().ep(ZxQ.commonParams).m(function(A,Q,B,G){return[GxQ.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(yz6).build(){}class MoA extends gNA.Command.classBuilder().ep(ZxQ.commonParams).m(function(A,Q,B,G){return[GxQ.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(vz6).build(){}var kz6={AssumeRoleCommand:OoA,AssumeRoleWithWebIdentityCommand:MoA};class Qb1 extends hNA.STSClient{}gNA.createAggregatedClient(kz6,Qb1);var wxQ=(A)=>{if(typeof A?.Arn==="string"){let Q=A.Arn.split(":");if(Q.length>4&&Q[4]!=="")return Q[4]}return},LxQ=async(A,Q,B,G={})=>{let Z=typeof A==="function"?await A():A,Y=typeof Q==="function"?await Q():Q,J=await OE6.stsRegionDefaultResolver(G)();return B?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${Z} (credential provider clientConfig)`,`${Y} (contextual client)`,`${J} (STS default: AWS_REGION, profile region, or us-east-1)`),Z??Y??J},bz6=(A,Q)=>{let B,G;return async(Z,Y)=>{if(G=Z,!B){let{logger:D=A?.parentClientConfig?.logger,profile:K=A?.parentClientConfig?.profile,region:V,requestHandler:F=A?.parentClientConfig?.requestHandler,credentialProviderLogger:H,userAgentAppId:E=A?.parentClientConfig?.userAgentAppId}=A,z=await LxQ(V,A?.parentClientConfig?.region,H,{logger:D,profile:K}),C=!OxQ(F);B=new Q({...A,userAgentAppId:E,profile:K,credentialDefaultProvider:()=>async()=>G,region:z,requestHandler:C?F:void 0,logger:D})}let{Credentials:J,AssumedRoleUser:X}=await B.send(new OoA(Y));if(!J||!J.AccessKeyId||!J.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${Y.RoleArn}`);let I=wxQ(X),W={accessKeyId:J.AccessKeyId,secretAccessKey:J.SecretAccessKey,sessionToken:J.SessionToken,expiration:J.Expiration,...J.CredentialScope&&{credentialScope:J.CredentialScope},...I&&{accountId:I}};return sk1.setCredentialFeature(W,"CREDENTIALS_STS_ASSUME_ROLE","i"),W}},fz6=(A,Q)=>{let B;return async(G)=>{if(!B){let{logger:I=A?.parentClientConfig?.logger,profile:W=A?.parentClientConfig?.profile,region:D,requestHandler:K=A?.parentClientConfig?.requestHandler,credentialProviderLogger:V,userAgentAppId:F=A?.parentClientConfig?.userAgentAppId}=A,H=await LxQ(D,A?.parentClientConfig?.region,V,{logger:I,profile:W}),E=!OxQ(K);B=new Q({...A,userAgentAppId:F,profile:W,region:H,requestHandler:E?K:void 0,logger:I})}let{Credentials:Z,AssumedRoleUser:Y}=await B.send(new MoA(G));if(!Z||!Z.AccessKeyId||!Z.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${G.RoleArn}`);let J=wxQ(Y),X={accessKeyId:Z.AccessKeyId,secretAccessKey:Z.SecretAccessKey,sessionToken:Z.SessionToken,expiration:Z.Expiration,...Z.CredentialScope&&{credentialScope:Z.CredentialScope},...J&&{accountId:J}};if(J)sk1.setCredentialFeature(X,"RESOLVED_ACCOUNT_ID","T");return sk1.setCredentialFeature(X,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),X}},OxQ=(A)=>{return A?.metadata?.handlerProtocol==="h2"},MxQ=(A,Q)=>{if(!Q)return A;else return class extends A{constructor(G){super(G);for(let Z of Q)this.middlewareStack.use(Z)}}},RxQ=(A={},Q)=>bz6(A,MxQ(hNA.STSClient,Q)),_xQ=(A={},Q)=>fz6(A,MxQ(hNA.STSClient,Q)),hz6=(A)=>(Q)=>A({roleAssumer:RxQ(Q),roleAssumerWithWebIdentity:_xQ(Q),...Q});Object.defineProperty(LoA,"$Command",{enumerable:!0,get:function(){return gNA.Command}});LoA.AssumeRoleCommand=OoA;LoA.AssumeRoleWithWebIdentityCommand=MoA;LoA.ExpiredTokenException=YxQ;LoA.IDPCommunicationErrorException=KxQ;LoA.IDPRejectedClaimException=WxQ;LoA.InvalidIdentityTokenException=DxQ;LoA.MalformedPolicyDocumentException=JxQ;LoA.PackedPolicyTooLargeException=XxQ;LoA.RegionDisabledException=IxQ;LoA.STS=Qb1;LoA.STSServiceException=hg;LoA.decorateDefaultCredentialProvider=hz6;LoA.getDefaultRoleAssumer=RxQ;LoA.getDefaultRoleAssumerWithWebIdentity=_xQ;Object.keys(hNA).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(LoA,A))Object.defineProperty(LoA,A,{enumerable:!0,get:function(){return hNA[A]}})})});var _oA=U((YC6)=>{var Gb1=Yv(),Bb1=TD(),ez6=qA("child_process"),AC6=qA("util"),QC6=Wq(),BC6=(A,Q,B)=>{if(Q.Version!==1)throw Error(`Profile ${A} credential_process did not return Version 1.`);if(Q.AccessKeyId===void 0||Q.SecretAccessKey===void 0)throw Error(`Profile ${A} credential_process returned invalid credentials.`);if(Q.Expiration){let Y=new Date;if(new Date(Q.Expiration)<Y)throw Error(`Profile ${A} credential_process returned expired credentials.`)}let G=Q.AccountId;if(!G&&B?.[A]?.aws_account_id)G=B[A].aws_account_id;let Z={accessKeyId:Q.AccessKeyId,secretAccessKey:Q.SecretAccessKey,...Q.SessionToken&&{sessionToken:Q.SessionToken},...Q.Expiration&&{expiration:new Date(Q.Expiration)},...Q.CredentialScope&&{credentialScope:Q.CredentialScope},...G&&{accountId:G}};return QC6.setCredentialFeature(Z,"CREDENTIALS_PROCESS","w"),Z},GC6=async(A,Q,B)=>{let G=Q[A];if(Q[A]){let Z=G.credential_process;if(Z!==void 0){let Y=AC6.promisify(Gb1.externalDataInterceptor?.getTokenRecord?.().exec??ez6.exec);try{let{stdout:J}=await Y(Z),X;try{X=JSON.parse(J.trim())}catch{throw Error(`Profile ${A} credential_process returned invalid JSON.`)}return BC6(A,X,Q)}catch(J){throw new Bb1.CredentialsProviderError(J.message,{logger:B})}}else throw new Bb1.CredentialsProviderError(`Profile ${A} did not contain credential_process.`,{logger:B})}else throw new Bb1.CredentialsProviderError(`Profile ${A} could not be found in shared credentials file.`,{logger:B})},ZC6=(A={})=>async({callerClientConfig:Q}={})=>{A.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let B=await Gb1.parseKnownFiles(A);return GC6(Gb1.getProfileName({profile:A.profile??Q?.profile}),B,A.logger)};YC6.fromProcess=ZC6});var Zb1=U((Dv)=>{var XC6=Dv&&Dv.__createBinding||(Object.create?function(A,Q,B,G){if(G===void 0)G=B;var Z=Object.getOwnPropertyDescriptor(Q,B);if(!Z||("get"in Z?!Q.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Q[B]}};Object.defineProperty(A,G,Z)}:function(A,Q,B,G){if(G===void 0)G=B;A[G]=Q[B]}),IC6=Dv&&Dv.__setModuleDefault||(Object.create?function(A,Q){Object.defineProperty(A,"default",{enumerable:!0,value:Q})}:function(A,Q){A.default=Q}),WC6=Dv&&Dv.__importStar||function(){var A=function(Q){return A=Object.getOwnPropertyNames||function(B){var G=[];for(var Z in B)if(Object.prototype.hasOwnProperty.call(B,Z))G[G.length]=Z;return G},A(Q)};return function(Q){if(Q&&Q.__esModule)return Q;var B={};if(Q!=null){for(var G=A(Q),Z=0;Z<G.length;Z++)if(G[Z]!=="default")XC6(B,Q,G[Z])}return IC6(B,Q),B}}();Object.defineProperty(Dv,"__esModule",{value:!0});Dv.fromWebToken=void 0;var DC6=(A)=>async(Q)=>{A.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:B,roleSessionName:G,webIdentityToken:Z,providerId:Y,policyArns:J,policy:X,durationSeconds:I}=A,{roleAssumerWithWebIdentity:W}=A;if(!W){let{getDefaultRoleAssumerWithWebIdentity:D}=await Promise.resolve().then(()=>WC6(RoA()));W=D({...A.clientConfig,credentialProviderLogger:A.logger,parentClientConfig:{...Q?.callerClientConfig,...A.parentClientConfig}},A.clientPlugins)}return W({RoleArn:B,RoleSessionName:G??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:Z,ProviderId:Y,PolicyArns:J,Policy:X,DurationSeconds:I})};Dv.fromWebToken=DC6});var SxQ=U((TxQ)=>{Object.defineProperty(TxQ,"__esModule",{value:!0});TxQ.fromTokenFile=void 0;var KC6=Wq(),VC6=TD(),FC6=Yv(),HC6=qA("fs"),EC6=Zb1(),jxQ="AWS_WEB_IDENTITY_TOKEN_FILE",zC6="AWS_ROLE_ARN",CC6="AWS_ROLE_SESSION_NAME",$C6=(A={})=>async(Q)=>{A.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let B=A?.webIdentityTokenFile??process.env[jxQ],G=A?.roleArn??process.env[zC6],Z=A?.roleSessionName??process.env[CC6];if(!B||!G)throw new VC6.CredentialsProviderError("Web identity configuration not specified",{logger:A.logger});let Y=await(0,EC6.fromWebToken)({...A,webIdentityToken:FC6.externalDataInterceptor?.getTokenRecord?.()[B]??(0,HC6.readFileSync)(B,{encoding:"ascii"}),roleArn:G,roleSessionName:Z})(Q);if(B===process.env[jxQ])(0,KC6.setCredentialFeature)(Y,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h");return Y};TxQ.fromTokenFile=$C6});var mNA=U((uNA)=>{var xxQ=SxQ(),yxQ=Zb1();Object.keys(xxQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(uNA,A))Object.defineProperty(uNA,A,{enumerable:!0,get:function(){return xxQ[A]}})});Object.keys(yxQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(uNA,A))Object.defineProperty(uNA,A,{enumerable:!0,get:function(){return yxQ[A]}})})});var Xb1=U((vC6)=>{var Jb1=Yv(),dNA=TD(),gg=Wq(),UC6=gk1(),qC6=(A,Q,B)=>{let G={EcsContainer:async(Z)=>{let{fromHttp:Y}=await Promise.resolve().then(() => c(haA())),{fromContainerMetadata:J}=await Promise.resolve().then(() => c(c1A()));return B?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>dNA.chain(Y(Z??{}),J(Z))().then(Yb1)},Ec2InstanceMetadata:async(Z)=>{B?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:Y}=await Promise.resolve().then(() => c(c1A()));return async()=>Y(Z)().then(Yb1)},Environment:async(Z)=>{B?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:Y}=await Promise.resolve().then(() => c(vaA()));return async()=>Y(Z)().then(Yb1)}};if(A in G)return G[A];else throw new dNA.CredentialsProviderError(`Unsupported credential source in profile ${Q}. Got ${A}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:B})},Yb1=(A)=>gg.setCredentialFeature(A,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),NC6=(A,{profile:Q="default",logger:B}={})=>{return Boolean(A)&&typeof A==="object"&&typeof A.role_arn==="string"&&["undefined","string"].indexOf(typeof A.role_session_name)>-1&&["undefined","string"].indexOf(typeof A.external_id)>-1&&["undefined","string"].indexOf(typeof A.mfa_serial)>-1&&(wC6(A,{profile:Q,logger:B})||LC6(A,{profile:Q,logger:B}))},wC6=(A,{profile:Q,logger:B})=>{let G=typeof A.source_profile==="string"&&typeof A.credential_source>"u";if(G)B?.debug?.(`    ${Q} isAssumeRoleWithSourceProfile source_profile=${A.source_profile}`);return G},LC6=(A,{profile:Q,logger:B})=>{let G=typeof A.credential_source==="string"&&typeof A.source_profile>"u";if(G)B?.debug?.(`    ${Q} isCredentialSourceProfile credential_source=${A.credential_source}`);return G},OC6=async(A,Q,B,G={},Z)=>{B.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let Y=Q[A],{source_profile:J,region:X}=Y;if(!B.roleAssumer){let{getDefaultRoleAssumer:W}=await Promise.resolve().then(() => c(RoA()));B.roleAssumer=W({...B.clientConfig,credentialProviderLogger:B.logger,parentClientConfig:{...B?.parentClientConfig,region:X??B?.parentClientConfig?.region}},B.clientPlugins)}if(J&&J in G)throw new dNA.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${Jb1.getProfileName(B)}. Profiles visited: `+Object.keys(G).join(", "),{logger:B.logger});B.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${J?`source_profile=[${J}]`:`profile=[${A}]`}`);let I=J?Z(J,Q,B,{...G,[J]:!0},vxQ(Q[J]??{})):(await qC6(Y.credential_source,A,B.logger)(B))();if(vxQ(Y))return I.then((W)=>gg.setCredentialFeature(W,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));else{let W={RoleArn:Y.role_arn,RoleSessionName:Y.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:Y.external_id,DurationSeconds:parseInt(Y.duration_seconds||"3600",10)},{mfa_serial:D}=Y;if(D){if(!B.mfaCodeProvider)throw new dNA.CredentialsProviderError(`Profile ${A} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:B.logger,tryNextLink:!1});W.SerialNumber=D,W.TokenCode=await B.mfaCodeProvider(D)}let K=await I;return B.roleAssumer(K,W).then((V)=>gg.setCredentialFeature(V,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},vxQ=(A)=>{return!A.role_arn&&!!A.credential_source},MC6=(A)=>{return Boolean(A&&A.login_session)},RC6=async(A,Q)=>{let B=await UC6.fromLoginCredentials({...Q,profile:A})();return gg.setCredentialFeature(B,"CREDENTIALS_PROFILE_LOGIN","AC")},_C6=(A)=>Boolean(A)&&typeof A==="object"&&typeof A.credential_process==="string",jC6=async(A,Q)=>Promise.resolve().then(() => c(_oA())).then(({fromProcess:B})=>B({...A,profile:Q})().then((G)=>gg.setCredentialFeature(G,"CREDENTIALS_PROFILE_PROCESS","v"))),TC6=async(A,Q,B={})=>{let{fromSSO:G}=await Promise.resolve().then(() => c(FoA()));return G({profile:A,logger:B.logger,parentClientConfig:B.parentClientConfig,clientConfig:B.clientConfig})().then((Z)=>{if(Q.sso_session)return gg.setCredentialFeature(Z,"CREDENTIALS_PROFILE_SSO","r");else return gg.setCredentialFeature(Z,"CREDENTIALS_PROFILE_SSO_LEGACY","t")})},PC6=(A)=>A&&(typeof A.sso_start_url==="string"||typeof A.sso_account_id==="string"||typeof A.sso_session==="string"||typeof A.sso_region==="string"||typeof A.sso_role_name==="string"),kxQ=(A)=>Boolean(A)&&typeof A==="object"&&typeof A.aws_access_key_id==="string"&&typeof A.aws_secret_access_key==="string"&&["undefined","string"].indexOf(typeof A.aws_session_token)>-1&&["undefined","string"].indexOf(typeof A.aws_account_id)>-1,bxQ=async(A,Q)=>{Q?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let B={accessKeyId:A.aws_access_key_id,secretAccessKey:A.aws_secret_access_key,sessionToken:A.aws_session_token,...A.aws_credential_scope&&{credentialScope:A.aws_credential_scope},...A.aws_account_id&&{accountId:A.aws_account_id}};return gg.setCredentialFeature(B,"CREDENTIALS_PROFILE","n")},SC6=(A)=>Boolean(A)&&typeof A==="object"&&typeof A.web_identity_token_file==="string"&&typeof A.role_arn==="string"&&["undefined","string"].indexOf(typeof A.role_session_name)>-1,xC6=async(A,Q)=>Promise.resolve().then(() => c(mNA())).then(({fromTokenFile:B})=>B({webIdentityTokenFile:A.web_identity_token_file,roleArn:A.role_arn,roleSessionName:A.role_session_name,roleAssumerWithWebIdentity:Q.roleAssumerWithWebIdentity,logger:Q.logger,parentClientConfig:Q.parentClientConfig})().then((G)=>gg.setCredentialFeature(G,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),fxQ=async(A,Q,B,G={},Z=!1)=>{let Y=Q[A];if(Object.keys(G).length>0&&kxQ(Y))return bxQ(Y,B);if(Z||NC6(Y,{profile:A,logger:B.logger}))return OC6(A,Q,B,G,fxQ);if(kxQ(Y))return bxQ(Y,B);if(SC6(Y))return xC6(Y,B);if(_C6(Y))return jC6(B,A);if(PC6(Y))return await TC6(A,Y,B);if(MC6(Y))return RC6(A,B);throw new dNA.CredentialsProviderError(`Could not resolve credentials using profile: [${A}] in configuration/credentials file(s).`,{logger:B.logger})},yC6=(A={})=>async({callerClientConfig:Q}={})=>{let B={...A,parentClientConfig:{...Q,...A.parentClientConfig}};B.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let G=await Jb1.parseKnownFiles(B);return fxQ(Jb1.getProfileName({profile:A.profile??Q?.profile}),G,B)};vC6.fromIni=yC6});var G0A=U((dC6)=>{var Ib1=vaA(),pNA=TD(),bC6=Yv(),hxQ="AWS_EC2_METADATA_DISABLED",fC6=async(A)=>{let{ENV_CMDS_FULL_URI:Q,ENV_CMDS_RELATIVE_URI:B,fromContainerMetadata:G,fromInstanceMetadata:Z}=await Promise.resolve().then(() => c(c1A()));if(process.env[B]||process.env[Q]){A.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:Y}=await Promise.resolve().then(() => c(haA()));return pNA.chain(Y(A),G(A))}if(process.env[hxQ]&&process.env[hxQ]!=="false")return async()=>{throw new pNA.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:A.logger})};return A.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),Z(A)};function hC6(A,Q){let B=gC6(A),G,Z,Y,J=async(X)=>{if(X?.forceRefresh)return await B(X);if(Y?.expiration){if(Y?.expiration?.getTime()<Date.now())Y=void 0}if(G)await G;else if(!Y||Q?.(Y))if(Y){if(!Z)Z=B(X).then((I)=>{Y=I,Z=void 0})}else return G=B(X).then((I)=>{Y=I,G=void 0}),J(X);return Y};return J}var gC6=(A)=>async(Q)=>{let B;for(let G of A)try{return await G(Q)}catch(Z){if(B=Z,Z?.tryNextLink)continue;throw Z}throw B},gxQ=!1,uC6=(A={})=>hC6([async()=>{if(A.profile??process.env[bC6.ENV_PROFILE]){if(process.env[Ib1.ENV_KEY]&&process.env[Ib1.ENV_SECRET]){if(!gxQ)(A.logger?.warn&&A.logger?.constructor?.name!=="NoOpLogger"?A.logger.warn.bind(A.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),gxQ=!0}throw new pNA.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:A.logger,tryNextLink:!0})}return A.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Ib1.fromEnv(A)()},async(Q)=>{A.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:B,ssoAccountId:G,ssoRegion:Z,ssoRoleName:Y,ssoSession:J}=A;if(!B&&!G&&!Z&&!Y&&!J)throw new pNA.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:A.logger});let{fromSSO:X}=await Promise.resolve().then(() => c(FoA()));return X(A)(Q)},async(Q)=>{A.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:B}=await Promise.resolve().then(() => c(Xb1()));return B(A)(Q)},async(Q)=>{A.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:B}=await Promise.resolve().then(() => c(_oA()));return B(A)(Q)},async(Q)=>{A.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:B}=await Promise.resolve().then(() => c(mNA()));return B(A)(Q)},async()=>{return A.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await fC6(A))()},async()=>{throw new pNA.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:A.logger})}],uxQ),mC6=(A)=>A?.expiration!==void 0,uxQ=(A)=>A?.expiration!==void 0&&A.expiration.getTime()-Date.now()<300000;dC6.credentialsTreatedAsExpired=uxQ;dC6.credentialsWillNeedRefresh=mC6;dC6.defaultProvider=uC6});var mxQ=U((nC6)=>{var iC6=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";nC6.isArrayBuffer=iC6});var Db1=U((tC6)=>{var oC6=mxQ(),Wb1=qA("buffer"),rC6=(A,Q=0,B=A.byteLength-Q)=>{if(!oC6.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return Wb1.Buffer.from(A,Q,B)},sC6=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?Wb1.Buffer.from(A,Q):Wb1.Buffer.from(A)};tC6.fromArrayBuffer=rC6;tC6.fromString=sC6});var cxQ=U((dxQ)=>{Object.defineProperty(dxQ,"__esModule",{value:!0});dxQ.fromBase64=void 0;var Q$6=Db1(),B$6=/^[A-Za-z0-9+/]*={0,2}$/,G$6=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!B$6.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,Q$6.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};dxQ.fromBase64=G$6});var nxQ=U((lxQ)=>{Object.defineProperty(lxQ,"__esModule",{value:!0});lxQ.toBase64=void 0;var Z$6=Db1(),Y$6=lG(),J$6=(A)=>{let Q;if(typeof A==="string")Q=(0,Y$6.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Z$6.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};lxQ.toBase64=J$6});var rxQ=U((cNA)=>{var axQ=cxQ(),oxQ=nxQ();Object.keys(axQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(cNA,A))Object.defineProperty(cNA,A,{enumerable:!0,get:function(){return axQ[A]}})});Object.keys(oxQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(cNA,A))Object.defineProperty(cNA,A,{enumerable:!0,get:function(){return oxQ[A]}})})});var VyQ=U((DyQ)=>{Object.defineProperty(DyQ,"__esModule",{value:!0});DyQ.ruleSet=void 0;var XyQ="required",Vv="fn",Fv="argv",rZA="ref",sxQ=!0,txQ="isSet",iNA="booleanEquals",oZA="error",lNA="endpoint",tC="tree",Kb1="PartitionResult",exQ={[XyQ]:!1,type:"string"},AyQ={[XyQ]:!0,default:!1,type:"boolean"},QyQ={[rZA]:"Endpoint"},IyQ={[Vv]:iNA,[Fv]:[{[rZA]:"UseFIPS"},!0]},WyQ={[Vv]:iNA,[Fv]:[{[rZA]:"UseDualStack"},!0]},Kv={},ByQ={[Vv]:"getAttr",[Fv]:[{[rZA]:Kb1},"supportsFIPS"]},GyQ={[Vv]:iNA,[Fv]:[!0,{[Vv]:"getAttr",[Fv]:[{[rZA]:Kb1},"supportsDualStack"]}]},ZyQ=[IyQ],YyQ=[WyQ],JyQ=[{[rZA]:"Region"}],X$6={version:"1.0",parameters:{Region:exQ,UseDualStack:AyQ,UseFIPS:AyQ,Endpoint:exQ},rules:[{conditions:[{[Vv]:txQ,[Fv]:[QyQ]}],rules:[{conditions:ZyQ,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:oZA},{rules:[{conditions:YyQ,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:oZA},{endpoint:{url:QyQ,properties:Kv,headers:Kv},type:lNA}],type:tC}],type:tC},{rules:[{conditions:[{[Vv]:txQ,[Fv]:JyQ}],rules:[{conditions:[{[Vv]:"aws.partition",[Fv]:JyQ,assign:Kb1}],rules:[{conditions:[IyQ,WyQ],rules:[{conditions:[{[Vv]:iNA,[Fv]:[sxQ,ByQ]},GyQ],rules:[{rules:[{endpoint:{url:"https://bedrock-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Kv,headers:Kv},type:lNA}],type:tC}],type:tC},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:oZA}],type:tC},{conditions:ZyQ,rules:[{conditions:[{[Vv]:iNA,[Fv]:[ByQ,sxQ]}],rules:[{rules:[{endpoint:{url:"https://bedrock-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Kv,headers:Kv},type:lNA}],type:tC}],type:tC},{error:"FIPS is enabled but this partition does not support FIPS",type:oZA}],type:tC},{conditions:YyQ,rules:[{conditions:[GyQ],rules:[{rules:[{endpoint:{url:"https://bedrock.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Kv,headers:Kv},type:lNA}],type:tC}],type:tC},{error:"DualStack is enabled but this partition does not support DualStack",type:oZA}],type:tC},{rules:[{endpoint:{url:"https://bedrock.{Region}.{PartitionResult#dnsSuffix}",properties:Kv,headers:Kv},type:lNA}],type:tC}],type:tC}],type:tC},{error:"Invalid Configuration: Missing Region",type:oZA}],type:tC}]};DyQ.ruleSet=X$6});var EyQ=U((FyQ)=>{Object.defineProperty(FyQ,"__esModule",{value:!0});FyQ.defaultEndpointResolver=void 0;var I$6=Qv(),Vb1=FT(),W$6=VyQ(),D$6=new Vb1.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),K$6=(A,Q={})=>{return D$6.get(A,()=>(0,Vb1.resolveEndpoint)(W$6.ruleSet,{endpointParams:A,logger:Q.logger}))};FyQ.defaultEndpointResolver=K$6;Vb1.customEndpointFunctions.aws=I$6.awsEndpointFunctions});var qyQ=U(($yQ)=>{Object.defineProperty($yQ,"__esModule",{value:!0});$yQ.getRuntimeConfig=void 0;var V$6=vY(),F$6=yg(),H$6=iG(),E$6=$NA(),z$6=vM(),zyQ=rxQ(),CyQ=lG(),C$6=vy1(),$$6=EyQ(),U$6=(A)=>{return{apiVersion:"2023-04-20",base64Decoder:A?.base64Decoder??zyQ.fromBase64,base64Encoder:A?.base64Encoder??zyQ.toBase64,disableHostPrefix:A?.disableHostPrefix??!1,endpointProvider:A?.endpointProvider??$$6.defaultEndpointResolver,extensions:A?.extensions??[],httpAuthSchemeProvider:A?.httpAuthSchemeProvider??C$6.defaultBedrockHttpAuthSchemeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Q)=>Q.getIdentityProvider("aws.auth#sigv4"),signer:new V$6.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:(Q)=>Q.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new H$6.HttpBearerAuthSigner}],logger:A?.logger??new E$6.NoOpLogger,protocol:A?.protocol??new F$6.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.bedrock"}),serviceId:A?.serviceId??"Bedrock",urlParser:A?.urlParser??z$6.parseUrl,utf8Decoder:A?.utf8Decoder??CyQ.fromUtf8,utf8Encoder:A?.utf8Encoder??CyQ.toUtf8}};$yQ.getRuntimeConfig=U$6});var _yQ=U((MyQ)=>{Object.defineProperty(MyQ,"__esModule",{value:!0});MyQ.getRuntimeConfig=void 0;var q$6=NZ(),N$6=q$6.__importDefault(XMQ()),Fb1=vY(),w$6=G0A(),NyQ=aaA(),wyQ=Tg(),joA=wW(),L$6=iG(),O$6=Pg(),LyQ=wH(),Z0A=Dq(),OyQ=dw(),M$6=Sg(),R$6=Jv(),_$6=qyQ(),j$6=$NA(),T$6=kg(),P$6=$NA(),S$6=(A)=>{(0,P$6.emitWarningIfUnsupportedVersion)(process.version);let Q=(0,T$6.resolveDefaultsModeConfig)(A),B=()=>Q().then(j$6.loadConfigsForDefaultMode),G=(0,_$6.getRuntimeConfig)(A);(0,Fb1.emitWarningIfUnsupportedVersion)(process.version);let Z={profile:A?.profile,logger:G.logger,signingName:"bedrock"};return{...G,...A,runtime:"node",defaultsMode:Q,authSchemePreference:A?.authSchemePreference??(0,Z0A.loadConfig)(Fb1.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,Z),bodyLengthChecker:A?.bodyLengthChecker??M$6.calculateBodyLength,credentialDefaultProvider:A?.credentialDefaultProvider??w$6.defaultProvider,defaultUserAgentProvider:A?.defaultUserAgentProvider??(0,wyQ.createDefaultUserAgentProvider)({serviceId:G.serviceId,clientVersion:N$6.default.version}),httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Y)=>Y.getIdentityProvider("aws.auth#sigv4"),signer:new Fb1.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:(Y)=>Y.getIdentityProvider("smithy.api#httpBearerAuth")||(async(J)=>{try{return await(0,NyQ.fromEnvSigningName)({signingName:"bedrock"})()}catch(X){return await(0,NyQ.nodeProvider)(J)(J)}}),signer:new L$6.HttpBearerAuthSigner}],maxAttempts:A?.maxAttempts??(0,Z0A.loadConfig)(LyQ.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,A),region:A?.region??(0,Z0A.loadConfig)(joA.NODE_REGION_CONFIG_OPTIONS,{...joA.NODE_REGION_CONFIG_FILE_OPTIONS,...Z}),requestHandler:OyQ.NodeHttpHandler.create(A?.requestHandler??B),retryMode:A?.retryMode??(0,Z0A.loadConfig)({...LyQ.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await B()).retryMode||R$6.DEFAULT_RETRY_MODE},A),sha256:A?.sha256??O$6.Hash.bind(null,"sha256"),streamCollector:A?.streamCollector??OyQ.streamCollector,useDualstackEndpoint:A?.useDualstackEndpoint??(0,Z0A.loadConfig)(joA.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,Z),useFipsEndpoint:A?.useFipsEndpoint??(0,Z0A.loadConfig)(joA.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,Z),userAgentAppId:A?.userAgentAppId??(0,Z0A.loadConfig)(wyQ.NODE_APP_ID_CONFIG_OPTIONS,Z)}};MyQ.getRuntimeConfig=S$6});var SyQ=U((f$6)=>{var x$6=My1(),y$6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},v$6=(A)=>{return{httpHandler:A.httpHandler()}};class jyQ{name;kind;values;constructor({name:A,kind:Q=x$6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class TyQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class ToA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new ToA({...A,headers:{...A.headers}});if(Q.query)Q.query=k$6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return ToA.clone(this)}}function k$6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class PyQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function b$6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}f$6.Field=jyQ;f$6.Fields=TyQ;f$6.HttpRequest=ToA;f$6.HttpResponse=PyQ;f$6.getHttpHandlerExtensionConfiguration=y$6;f$6.isValidHostname=b$6;f$6.resolveHttpHandlerRuntimeConfig=v$6});var obQ=U((ch1)=>{var xyQ=zg(),l$6=Cg(),i$6=$g(),yyQ=Zv(),n$6=wW(),PD=iG(),pM=IX(),a$6=jg(),IB=HT(),vyQ=wH(),iQ=$NA(),kyQ=vy1(),o$6=_yQ(),byQ=ET(),fyQ=SyQ(),r$6=(A)=>{return Object.assign(A,{useDualstackEndpoint:A.useDualstackEndpoint??!1,useFipsEndpoint:A.useFipsEndpoint??!1,defaultSigningName:"bedrock"})},HB={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},s$6=(A)=>{let{httpAuthSchemes:Q,httpAuthSchemeProvider:B,credentials:G,token:Z}=A;return{setHttpAuthScheme(Y){let J=Q.findIndex((X)=>X.schemeId===Y.schemeId);if(J===-1)Q.push(Y);else Q.splice(J,1,Y)},httpAuthSchemes(){return Q},setHttpAuthSchemeProvider(Y){B=Y},httpAuthSchemeProvider(){return B},setCredentials(Y){G=Y},credentials(){return G},setToken(Y){Z=Y},token(){return Z}}},t$6=(A)=>{return{httpAuthSchemes:A.httpAuthSchemes(),httpAuthSchemeProvider:A.httpAuthSchemeProvider(),credentials:A.credentials(),token:A.token()}},e$6=(A,Q)=>{let B=Object.assign(byQ.getAwsRegionExtensionConfiguration(A),iQ.getDefaultExtensionConfiguration(A),fyQ.getHttpHandlerExtensionConfiguration(A),s$6(A));return Q.forEach((G)=>G.configure(B)),Object.assign(A,byQ.resolveAwsRegionExtensionConfiguration(B),iQ.resolveDefaultRuntimeConfig(B),fyQ.resolveHttpHandlerRuntimeConfig(B),t$6(B))};class xD extends iQ.Client{config;constructor(...[A]){let Q=o$6.getRuntimeConfig(A||{});super(Q);this.initConfig=Q;let B=r$6(Q),G=yyQ.resolveUserAgentConfig(B),Z=vyQ.resolveRetryConfig(G),Y=n$6.resolveRegionConfig(Z),J=xyQ.resolveHostHeaderConfig(Y),X=IB.resolveEndpointConfig(J),I=kyQ.resolveHttpAuthSchemeConfig(X),W=e$6(I,A?.extensions||[]);this.config=W,this.middlewareStack.use(pM.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(yyQ.getUserAgentPlugin(this.config)),this.middlewareStack.use(vyQ.getRetryPlugin(this.config)),this.middlewareStack.use(a$6.getContentLengthPlugin(this.config)),this.middlewareStack.use(xyQ.getHostHeaderPlugin(this.config)),this.middlewareStack.use(l$6.getLoggerPlugin(this.config)),this.middlewareStack.use(i$6.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(PD.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:kyQ.defaultBedrockHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(D)=>new PD.DefaultIdentityProviderConfig({"aws.auth#sigv4":D.credentials,"smithy.api#httpBearerAuth":D.token})})),this.middlewareStack.use(PD.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}var cM=class A extends iQ.ServiceException{constructor(Q){super(Q);Object.setPrototypeOf(this,A.prototype)}},YvQ=class A extends cM{name="AccessDeniedException";$fault="client";constructor(Q){super({name:"AccessDeniedException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},JvQ=class A extends cM{name="InternalServerException";$fault="server";constructor(Q){super({name:"InternalServerException",$fault:"server",...Q});Object.setPrototypeOf(this,A.prototype)}},XvQ=class A extends cM{name="ResourceNotFoundException";$fault="client";constructor(Q){super({name:"ResourceNotFoundException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},IvQ=class A extends cM{name="ThrottlingException";$fault="client";constructor(Q){super({name:"ThrottlingException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},WvQ=class A extends cM{name="ValidationException";$fault="client";constructor(Q){super({name:"ValidationException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},DvQ=class A extends cM{name="ConflictException";$fault="client";constructor(Q){super({name:"ConflictException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},KvQ=class A extends cM{name="ServiceQuotaExceededException";$fault="client";constructor(Q){super({name:"ServiceQuotaExceededException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},VvQ=class A extends cM{name="TooManyTagsException";$fault="client";resourceName;constructor(Q){super({name:"TooManyTagsException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.resourceName=Q.resourceName}},FvQ=class A extends cM{name="ResourceInUseException";$fault="client";constructor(Q){super({name:"ResourceInUseException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},HvQ=class A extends cM{name="ServiceUnavailableException";$fault="server";constructor(Q){super({name:"ServiceUnavailableException",$fault:"server",...Q});Object.setPrototypeOf(this,A.prototype)}},AU6="AgreementAvailability",QU6="AccessDeniedException",BU6="AutomatedEvaluationConfig",GU6="AutomatedEvaluationCustomMetrics",ZU6="AutomatedEvaluationCustomMetricConfig",YU6="AutomatedEvaluationCustomMetricSource",JU6="AutomatedReasoningCheckDifferenceScenarioList",XU6="AutomatedReasoningCheckFinding",IU6="AutomatedReasoningCheckFindingList",WU6="AutomatedReasoningCheckImpossibleFinding",DU6="AutomatedReasoningCheckInvalidFinding",KU6="AutomatedReasoningCheckInputTextReference",VU6="AutomatedReasoningCheckInputTextReferenceList",FU6="AutomatedReasoningCheckLogicWarning",HU6="AutomatedReasoningCheckNoTranslationsFinding",EU6="AutomatedReasoningCheckRule",zU6="AutomatedReasoningCheckRuleList",CU6="AutomatedReasoningCheckScenario",$U6="AutomatedReasoningCheckSatisfiableFinding",UU6="AutomatedReasoningCheckTranslation",qU6="AutomatedReasoningCheckTranslationAmbiguousFinding",NU6="AutomatedReasoningCheckTooComplexFinding",wU6="AutomatedReasoningCheckTranslationList",LU6="AutomatedReasoningCheckTranslationOption",OU6="AutomatedReasoningCheckTranslationOptionList",MU6="AutomatedReasoningCheckValidFinding",RU6="AutomatedReasoningLogicStatement",_U6="AutomatedReasoningLogicStatementContent",jU6="AutomatedReasoningLogicStatementList",TU6="AutomatedReasoningNaturalLanguageStatementContent",PU6="AutomatedReasoningPolicyAnnotation",SU6="AutomatedReasoningPolicyAnnotationFeedbackNaturalLanguage",xU6="AutomatedReasoningPolicyAnnotationIngestContent",yU6="AutomatedReasoningPolicyAnnotationList",vU6="AutomatedReasoningPolicyAddRuleAnnotation",kU6="AutomatedReasoningPolicyAddRuleFromNaturalLanguageAnnotation",bU6="AutomatedReasoningPolicyAddRuleMutation",fU6="AutomatedReasoningPolicyAnnotationRuleNaturalLanguage",hU6="AutomatedReasoningPolicyAddTypeAnnotation",gU6="AutomatedReasoningPolicyAddTypeMutation",uU6="AutomatedReasoningPolicyAddTypeValue",mU6="AutomatedReasoningPolicyAddVariableAnnotation",dU6="AutomatedReasoningPolicyAddVariableMutation",pU6="AutomatedReasoningPolicyBuildDocumentBlob",cU6="AutomatedReasoningPolicyBuildDocumentDescription",lU6="AutomatedReasoningPolicyBuildDocumentName",iU6="AutomatedReasoningPolicyBuildLog",nU6="AutomatedReasoningPolicyBuildLogEntry",aU6="AutomatedReasoningPolicyBuildLogEntryList",oU6="AutomatedReasoningPolicyBuildResultAssets",rU6="AutomatedReasoningPolicyBuildStep",sU6="AutomatedReasoningPolicyBuildStepContext",tU6="AutomatedReasoningPolicyBuildStepList",eU6="AutomatedReasoningPolicyBuildStepMessage",Aq6="AutomatedReasoningPolicyBuildStepMessageList",Qq6="AutomatedReasoningPolicyBuildWorkflowDocument",Bq6="AutomatedReasoningPolicyBuildWorkflowDocumentList",Gq6="AutomatedReasoningPolicyBuildWorkflowRepairContent",Zq6="AutomatedReasoningPolicyBuildWorkflowSource",Yq6="AutomatedReasoningPolicyBuildWorkflowSummary",Jq6="AutomatedReasoningPolicyBuildWorkflowSummaries",Xq6="AutomatedReasoningPolicyDescription",Iq6="AutomatedReasoningPolicyDefinitionElement",Wq6="AutomatedReasoningPolicyDefinitionQualityReport",Dq6="AutomatedReasoningPolicyDefinitionRule",Kq6="AutomatedReasoningPolicyDeleteRuleAnnotation",Vq6="AutomatedReasoningPolicyDefinitionRuleAlternateExpression",Fq6="AutomatedReasoningPolicyDefinitionRuleExpression",Hq6="AutomatedReasoningPolicyDefinitionRuleList",Eq6="AutomatedReasoningPolicyDeleteRuleMutation",zq6="AutomatedReasoningPolicyDisjointRuleSet",Cq6="AutomatedReasoningPolicyDisjointRuleSetList",$q6="AutomatedReasoningPolicyDefinitionType",Uq6="AutomatedReasoningPolicyDeleteTypeAnnotation",qq6="AutomatedReasoningPolicyDefinitionTypeDescription",Nq6="AutomatedReasoningPolicyDefinitionTypeList",wq6="AutomatedReasoningPolicyDeleteTypeMutation",Lq6="AutomatedReasoningPolicyDefinitionTypeName",Oq6="AutomatedReasoningPolicyDefinitionTypeNameList",Mq6="AutomatedReasoningPolicyDefinitionTypeValue",Rq6="AutomatedReasoningPolicyDefinitionTypeValueDescription",_q6="AutomatedReasoningPolicyDefinitionTypeValueList",jq6="AutomatedReasoningPolicyDefinitionTypeValuePair",Tq6="AutomatedReasoningPolicyDefinitionTypeValuePairList",Pq6="AutomatedReasoningPolicyDeleteTypeValue",Sq6="AutomatedReasoningPolicyDefinitionVariable",xq6="AutomatedReasoningPolicyDeleteVariableAnnotation",yq6="AutomatedReasoningPolicyDefinitionVariableDescription",vq6="AutomatedReasoningPolicyDefinitionVariableList",kq6="AutomatedReasoningPolicyDeleteVariableMutation",bq6="AutomatedReasoningPolicyDefinitionVariableName",fq6="AutomatedReasoningPolicyDefinitionVariableNameList",hq6="AutomatedReasoningPolicyDefinition",gq6="AutomatedReasoningPolicyGeneratedTestCase",uq6="AutomatedReasoningPolicyGeneratedTestCaseList",mq6="AutomatedReasoningPolicyGeneratedTestCases",dq6="AutomatedReasoningPolicyIngestContentAnnotation",pq6="AutomatedReasoningPolicyMutation",cq6="AutomatedReasoningPolicyName",lq6="AutomatedReasoningPolicyPlanning",iq6="AutomatedReasoningPolicyScenario",nq6="AutomatedReasoningPolicyScenarioAlternateExpression",aq6="AutomatedReasoningPolicyScenarioExpression",oq6="AutomatedReasoningPolicySummary",rq6="AutomatedReasoningPolicySummaries",sq6="AutomatedReasoningPolicyTestCase",tq6="AutomatedReasoningPolicyTestCaseList",eq6="AutomatedReasoningPolicyTestGuardContent",AN6="AutomatedReasoningPolicyTestList",QN6="AutomatedReasoningPolicyTestQueryContent",BN6="AutomatedReasoningPolicyTestResult",GN6="AutomatedReasoningPolicyTypeValueAnnotation",ZN6="AutomatedReasoningPolicyTypeValueAnnotationList",YN6="AutomatedReasoningPolicyUpdateFromRuleFeedbackAnnotation",JN6="AutomatedReasoningPolicyUpdateFromScenarioFeedbackAnnotation",XN6="AutomatedReasoningPolicyUpdateRuleAnnotation",IN6="AutomatedReasoningPolicyUpdateRuleMutation",WN6="AutomatedReasoningPolicyUpdateTypeAnnotation",DN6="AutomatedReasoningPolicyUpdateTypeMutation",KN6="AutomatedReasoningPolicyUpdateTypeValue",VN6="AutomatedReasoningPolicyUpdateVariableAnnotation",FN6="AutomatedReasoningPolicyUpdateVariableMutation",HN6="AutomatedReasoningPolicyWorkflowTypeContent",EN6="ByteContentBlob",zN6="ByteContentDoc",CN6="BatchDeleteEvaluationJob",$N6="BatchDeleteEvaluationJobError",UN6="BatchDeleteEvaluationJobErrors",qN6="BatchDeleteEvaluationJobItem",NN6="BatchDeleteEvaluationJobItems",wN6="BatchDeleteEvaluationJobRequest",LN6="BatchDeleteEvaluationJobResponse",ON6="BedrockEvaluatorModel",MN6="BedrockEvaluatorModels",RN6="CreateAutomatedReasoningPolicy",_N6="CancelAutomatedReasoningPolicyBuildWorkflow",jN6="CancelAutomatedReasoningPolicyBuildWorkflowRequest",TN6="CancelAutomatedReasoningPolicyBuildWorkflowResponse",PN6="CreateAutomatedReasoningPolicyRequest",SN6="CreateAutomatedReasoningPolicyResponse",xN6="CreateAutomatedReasoningPolicyTestCase",yN6="CreateAutomatedReasoningPolicyTestCaseRequest",vN6="CreateAutomatedReasoningPolicyTestCaseResponse",kN6="CreateAutomatedReasoningPolicyVersion",bN6="CreateAutomatedReasoningPolicyVersionRequest",fN6="CreateAutomatedReasoningPolicyVersionResponse",hN6="CustomizationConfig",gN6="CreateCustomModel",uN6="CreateCustomModelDeployment",mN6="CreateCustomModelDeploymentRequest",dN6="CreateCustomModelDeploymentResponse",pN6="CreateCustomModelRequest",cN6="CreateCustomModelResponse",lN6="ConflictException",iN6="CreateEvaluationJob",nN6="CreateEvaluationJobRequest",aN6="CreateEvaluationJobResponse",oN6="CreateFoundationModelAgreement",rN6="CreateFoundationModelAgreementRequest",sN6="CreateFoundationModelAgreementResponse",tN6="CreateGuardrail",eN6="CreateGuardrailRequest",Aw6="CreateGuardrailResponse",Qw6="CreateGuardrailVersion",Bw6="CreateGuardrailVersionRequest",Gw6="CreateGuardrailVersionResponse",Zw6="CreateInferenceProfile",Yw6="CreateInferenceProfileRequest",Jw6="CreateInferenceProfileResponse",Xw6="CustomMetricBedrockEvaluatorModel",Iw6="CustomMetricBedrockEvaluatorModels",Ww6="CreateModelCopyJob",Dw6="CreateModelCopyJobRequest",Kw6="CreateModelCopyJobResponse",Vw6="CreateModelCustomizationJobRequest",Fw6="CreateModelCustomizationJobResponse",Hw6="CreateModelCustomizationJob",Ew6="CustomMetricDefinition",zw6="CustomModelDeploymentSummary",Cw6="CustomModelDeploymentSummaryList",$w6="CustomMetricEvaluatorModelConfig",Uw6="CreateModelImportJob",qw6="CreateModelImportJobRequest",Nw6="CreateModelImportJobResponse",ww6="CreateModelInvocationJobRequest",Lw6="CreateModelInvocationJobResponse",Ow6="CreateModelInvocationJob",Mw6="CreateMarketplaceModelEndpoint",Rw6="CreateMarketplaceModelEndpointRequest",_w6="CreateMarketplaceModelEndpointResponse",jw6="CustomModelSummary",Tw6="CustomModelSummaryList",Pw6="CustomModelUnits",Sw6="CreateProvisionedModelThroughput",xw6="CreateProvisionedModelThroughputRequest",yw6="CreateProvisionedModelThroughputResponse",vw6="CreatePromptRouter",kw6="CreatePromptRouterRequest",bw6="CreatePromptRouterResponse",fw6="CloudWatchConfig",hw6="DeleteAutomatedReasoningPolicy",gw6="DeleteAutomatedReasoningPolicyBuildWorkflow",uw6="DeleteAutomatedReasoningPolicyBuildWorkflowRequest",mw6="DeleteAutomatedReasoningPolicyBuildWorkflowResponse",dw6="DeleteAutomatedReasoningPolicyRequest",pw6="DeleteAutomatedReasoningPolicyResponse",cw6="DeleteAutomatedReasoningPolicyTestCase",lw6="DeleteAutomatedReasoningPolicyTestCaseRequest",iw6="DeleteAutomatedReasoningPolicyTestCaseResponse",nw6="DistillationConfig",aw6="DeleteCustomModel",ow6="DeleteCustomModelDeployment",rw6="DeleteCustomModelDeploymentRequest",sw6="DeleteCustomModelDeploymentResponse",tw6="DeleteCustomModelRequest",ew6="DeleteCustomModelResponse",AL6="DeleteFoundationModelAgreement",QL6="DeleteFoundationModelAgreementRequest",BL6="DeleteFoundationModelAgreementResponse",GL6="DeleteGuardrail",ZL6="DeleteGuardrailRequest",YL6="DeleteGuardrailResponse",JL6="DeleteImportedModel",XL6="DeleteImportedModelRequest",IL6="DeleteImportedModelResponse",WL6="DeleteInferenceProfile",DL6="DeleteInferenceProfileRequest",KL6="DeleteInferenceProfileResponse",VL6="DeleteModelInvocationLoggingConfiguration",FL6="DeleteModelInvocationLoggingConfigurationRequest",HL6="DeleteModelInvocationLoggingConfigurationResponse",EL6="DeleteMarketplaceModelEndpoint",zL6="DeleteMarketplaceModelEndpointRequest",CL6="DeleteMarketplaceModelEndpointResponse",$L6="DeregisterMarketplaceModelEndpointRequest",UL6="DeregisterMarketplaceModelEndpointResponse",qL6="DeregisterMarketplaceModelEndpoint",NL6="DataProcessingDetails",wL6="DeleteProvisionedModelThroughput",LL6="DeleteProvisionedModelThroughputRequest",OL6="DeleteProvisionedModelThroughputResponse",ML6="DimensionalPriceRate",RL6="DeletePromptRouterRequest",_L6="DeletePromptRouterResponse",jL6="DeletePromptRouter",TL6="ExportAutomatedReasoningPolicyVersion",PL6="ExportAutomatedReasoningPolicyVersionRequest",SL6="ExportAutomatedReasoningPolicyVersionResponse",xL6="EvaluationBedrockModel",yL6="EndpointConfig",vL6="EvaluationConfig",kL6="EvaluationDataset",bL6="EvaluationDatasetLocation",fL6="EvaluationDatasetMetricConfig",hL6="EvaluationDatasetMetricConfigs",gL6="EvaluationDatasetName",uL6="EvaluationInferenceConfig",mL6="EvaluationInferenceConfigSummary",dL6="EvaluationJobDescription",pL6="EvaluationJobIdentifier",cL6="EvaluationJobIdentifiers",lL6="EvaluationModelConfigs",iL6="EvaluationModelConfigSummary",nL6="EvaluationModelConfig",aL6="EvaluatorModelConfig",oL6="EvaluationMetricDescription",rL6="EvaluationModelInferenceParams",sL6="EvaluationMetricName",tL6="EvaluationMetricNames",eL6="EvaluationOutputDataConfig",AO6="EvaluationPrecomputedInferenceSource",QO6="EvaluationPrecomputedRetrieveAndGenerateSourceConfig",BO6="EvaluationPrecomputedRetrieveSourceConfig",GO6="EvaluationPrecomputedRagSourceConfig",ZO6="EvaluationRagConfigSummary",YO6="EvaluationSummary",JO6="ExternalSourcesGenerationConfiguration",XO6="ExternalSourcesRetrieveAndGenerateConfiguration",IO6="EvaluationSummaries",WO6="ExternalSource",DO6="ExternalSources",KO6="FilterAttribute",VO6="FieldForReranking",FO6="FieldsForReranking",HO6="FoundationModelDetails",EO6="FoundationModelLifecycle",zO6="FoundationModelSummary",CO6="FoundationModelSummaryList",$O6="GuardrailAutomatedReasoningPolicy",UO6="GetAutomatedReasoningPolicyAnnotations",qO6="GetAutomatedReasoningPolicyAnnotationsRequest",NO6="GetAutomatedReasoningPolicyAnnotationsResponse",wO6="GetAutomatedReasoningPolicyBuildWorkflow",LO6="GetAutomatedReasoningPolicyBuildWorkflowRequest",OO6="GetAutomatedReasoningPolicyBuildWorkflowResultAssets",MO6="GetAutomatedReasoningPolicyBuildWorkflowResultAssetsRequest",RO6="GetAutomatedReasoningPolicyBuildWorkflowResultAssetsResponse",_O6="GetAutomatedReasoningPolicyBuildWorkflowResponse",jO6="GuardrailAutomatedReasoningPolicyConfig",TO6="GetAutomatedReasoningPolicyNextScenario",PO6="GetAutomatedReasoningPolicyNextScenarioRequest",SO6="GetAutomatedReasoningPolicyNextScenarioResponse",xO6="GetAutomatedReasoningPolicyRequest",yO6="GetAutomatedReasoningPolicyResponse",vO6="GetAutomatedReasoningPolicyTestCase",kO6="GetAutomatedReasoningPolicyTestCaseRequest",bO6="GetAutomatedReasoningPolicyTestCaseResponse",fO6="GetAutomatedReasoningPolicyTestResult",hO6="GetAutomatedReasoningPolicyTestResultRequest",gO6="GetAutomatedReasoningPolicyTestResultResponse",uO6="GetAutomatedReasoningPolicy",mO6="GuardrailBlockedMessaging",dO6="GenerationConfiguration",pO6="GuardrailContentFilter",cO6="GuardrailContentFilterAction",lO6="GuardrailContentFilterConfig",iO6="GuardrailContentFiltersConfig",nO6="GuardrailContentFiltersTier",aO6="GuardrailContentFiltersTierConfig",oO6="GuardrailContentFiltersTierName",rO6="GuardrailContentFilters",sO6="GuardrailContextualGroundingAction",tO6="GuardrailContextualGroundingFilter",eO6="GuardrailContextualGroundingFilterConfig",AM6="GuardrailContextualGroundingFiltersConfig",QM6="GuardrailContextualGroundingFilters",BM6="GuardrailContextualGroundingPolicy",GM6="GuardrailContextualGroundingPolicyConfig",ZM6="GetCustomModel",YM6="GetCustomModelDeployment",JM6="GetCustomModelDeploymentRequest",XM6="GetCustomModelDeploymentResponse",IM6="GetCustomModelRequest",WM6="GetCustomModelResponse",DM6="GuardrailContentPolicy",KM6="GuardrailContentPolicyConfig",VM6="GuardrailCrossRegionConfig",FM6="GuardrailCrossRegionDetails",HM6="GuardrailConfiguration",EM6="GuardrailDescription",zM6="GetEvaluationJob",CM6="GetEvaluationJobRequest",$M6="GetEvaluationJobResponse",UM6="GetFoundationModel",qM6="GetFoundationModelAvailability",NM6="GetFoundationModelAvailabilityRequest",wM6="GetFoundationModelAvailabilityResponse",LM6="GetFoundationModelRequest",OM6="GetFoundationModelResponse",MM6="GuardrailFailureRecommendation",RM6="GuardrailFailureRecommendations",_M6="GetGuardrail",jM6="GetGuardrailRequest",TM6="GetGuardrailResponse",PM6="GetImportedModel",SM6="GetImportedModelRequest",xM6="GetImportedModelResponse",yM6="GetInferenceProfile",vM6="GetInferenceProfileRequest",kM6="GetInferenceProfileResponse",bM6="GuardrailModality",fM6="GetModelCopyJob",hM6="GetModelCopyJobRequest",gM6="GetModelCopyJobResponse",uM6="GetModelCustomizationJobRequest",mM6="GetModelCustomizationJobResponse",dM6="GetModelCustomizationJob",pM6="GetModelImportJob",cM6="GetModelImportJobRequest",lM6="GetModelImportJobResponse",iM6="GetModelInvocationJobRequest",nM6="GetModelInvocationJobResponse",aM6="GetModelInvocationJob",oM6="GetModelInvocationLoggingConfiguration",rM6="GetModelInvocationLoggingConfigurationRequest",sM6="GetModelInvocationLoggingConfigurationResponse",tM6="GetMarketplaceModelEndpoint",eM6="GetMarketplaceModelEndpointRequest",AR6="GetMarketplaceModelEndpointResponse",QR6="GuardrailManagedWords",BR6="GuardrailManagedWordsConfig",GR6="GuardrailManagedWordLists",ZR6="GuardrailManagedWordListsConfig",YR6="GuardrailModalities",JR6="GuardrailName",XR6="GuardrailPiiEntity",IR6="GuardrailPiiEntityConfig",WR6="GuardrailPiiEntitiesConfig",DR6="GuardrailPiiEntities",KR6="GetProvisionedModelThroughput",VR6="GetProvisionedModelThroughputRequest",FR6="GetProvisionedModelThroughputResponse",HR6="GetPromptRouter",ER6="GetPromptRouterRequest",zR6="GetPromptRouterResponse",CR6="GuardrailRegex",$R6="GuardrailRegexConfig",UR6="GuardrailRegexesConfig",qR6="GuardrailRegexes",NR6="GuardrailSummary",wR6="GuardrailSensitiveInformationPolicy",LR6="GuardrailSensitiveInformationPolicyConfig",OR6="GuardrailStatusReason",MR6="GuardrailStatusReasons",RR6="GuardrailSummaries",_R6="GuardrailTopic",jR6="GuardrailTopicAction",TR6="GuardrailTopicConfig",PR6="GuardrailTopicsConfig",SR6="GuardrailTopicDefinition",xR6="GuardrailTopicExample",yR6="GuardrailTopicExamples",vR6="GuardrailTopicName",kR6="GuardrailTopicPolicy",bR6="GuardrailTopicPolicyConfig",fR6="GuardrailTopicsTier",hR6="GuardrailTopicsTierConfig",gR6="GuardrailTopicsTierName",uR6="GuardrailTopics",mR6="GetUseCaseForModelAccess",dR6="GetUseCaseForModelAccessRequest",pR6="GetUseCaseForModelAccessResponse",cR6="GuardrailWord",lR6="GuardrailWordAction",iR6="GuardrailWordConfig",nR6="GuardrailWordsConfig",aR6="GuardrailWordPolicy",oR6="GuardrailWordPolicyConfig",rR6="GuardrailWords",sR6="HumanEvaluationConfig",tR6="HumanEvaluationCustomMetric",eR6="HumanEvaluationCustomMetrics",A_6="HumanTaskInstructions",Q_6="HumanWorkflowConfig",B_6="Identifier",G_6="ImplicitFilterConfiguration",Z_6="InvocationLogsConfig",Y_6="InvocationLogSource",J_6="ImportedModelSummary",X_6="ImportedModelSummaryList",I_6="InferenceProfileDescription",W_6="InferenceProfileModel",D_6="InferenceProfileModelSource",K_6="InferenceProfileModels",V_6="InferenceProfileSummary",F_6="InferenceProfileSummaries",H_6="InternalServerException",E_6="KnowledgeBaseConfig",z_6="KnowledgeBaseRetrieveAndGenerateConfiguration",C_6="KnowledgeBaseRetrievalConfiguration",$_6="KnowledgeBaseVectorSearchConfiguration",U_6="KbInferenceConfig",q_6="ListAutomatedReasoningPolicies",N_6="ListAutomatedReasoningPolicyBuildWorkflows",w_6="ListAutomatedReasoningPolicyBuildWorkflowsRequest",L_6="ListAutomatedReasoningPolicyBuildWorkflowsResponse",O_6="ListAutomatedReasoningPoliciesRequest",M_6="ListAutomatedReasoningPoliciesResponse",R_6="ListAutomatedReasoningPolicyTestCases",__6="ListAutomatedReasoningPolicyTestCasesRequest",j_6="ListAutomatedReasoningPolicyTestCasesResponse",T_6="ListAutomatedReasoningPolicyTestResults",P_6="ListAutomatedReasoningPolicyTestResultsRequest",S_6="ListAutomatedReasoningPolicyTestResultsResponse",x_6="LoggingConfig",y_6="ListCustomModels",v_6="ListCustomModelDeployments",k_6="ListCustomModelDeploymentsRequest",b_6="ListCustomModelDeploymentsResponse",f_6="ListCustomModelsRequest",h_6="ListCustomModelsResponse",g_6="ListEvaluationJobs",u_6="ListEvaluationJobsRequest",m_6="ListEvaluationJobsResponse",d_6="ListFoundationModels",p_6="ListFoundationModelAgreementOffers",c_6="ListFoundationModelAgreementOffersRequest",l_6="ListFoundationModelAgreementOffersResponse",i_6="ListFoundationModelsRequest",n_6="ListFoundationModelsResponse",a_6="ListGuardrails",o_6="ListGuardrailsRequest",r_6="ListGuardrailsResponse",s_6="ListImportedModels",t_6="ListImportedModelsRequest",e_6="ListImportedModelsResponse",Aj6="ListInferenceProfiles",Qj6="ListInferenceProfilesRequest",Bj6="ListInferenceProfilesResponse",Gj6="ListModelCopyJobs",Zj6="ListModelCopyJobsRequest",Yj6="ListModelCopyJobsResponse",Jj6="ListModelCustomizationJobsRequest",Xj6="ListModelCustomizationJobsResponse",Ij6="ListModelCustomizationJobs",Wj6="ListModelImportJobs",Dj6="ListModelImportJobsRequest",Kj6="ListModelImportJobsResponse",Vj6="ListModelInvocationJobsRequest",Fj6="ListModelInvocationJobsResponse",Hj6="ListModelInvocationJobs",Ej6="ListMarketplaceModelEndpoints",zj6="ListMarketplaceModelEndpointsRequest",Cj6="ListMarketplaceModelEndpointsResponse",$j6="ListProvisionedModelThroughputs",Uj6="ListProvisionedModelThroughputsRequest",qj6="ListProvisionedModelThroughputsResponse",Nj6="ListPromptRouters",wj6="ListPromptRoutersRequest",Lj6="ListPromptRoutersResponse",Oj6="LegalTerm",Mj6="ListTagsForResource",Rj6="ListTagsForResourceRequest",_j6="ListTagsForResourceResponse",jj6="Message",Tj6="MetadataAttributeSchema",Pj6="MetadataAttributeSchemaList",Sj6="MetadataConfigurationForReranking",xj6="ModelCopyJobSummary",yj6="ModelCustomizationJobSummary",vj6="ModelCopyJobSummaries",kj6="ModelCustomizationJobSummaries",bj6="ModelDataSource",fj6="ModelInvocationJobInputDataConfig",hj6="ModelInvocationJobOutputDataConfig",gj6="ModelImportJobSummary",uj6="ModelInvocationJobS3InputDataConfig",mj6="ModelInvocationJobS3OutputDataConfig",dj6="ModelInvocationJobSummary",pj6="ModelImportJobSummaries",cj6="ModelInvocationJobSummaries",lj6="MarketplaceModelEndpoint",ij6="MarketplaceModelEndpointSummary",nj6="MarketplaceModelEndpointSummaries",aj6="MetricName",oj6="Offer",rj6="OrchestrationConfiguration",sj6="OutputDataConfig",tj6="Offers",ej6="PerformanceConfiguration",AT6="PutModelInvocationLoggingConfiguration",QT6="PutModelInvocationLoggingConfigurationRequest",BT6="PutModelInvocationLoggingConfigurationResponse",GT6="ProvisionedModelSummary",ZT6="ProvisionedModelSummaries",YT6="PromptRouterDescription",JT6="PromptRouterSummary",XT6="PromptRouterSummaries",IT6="PromptRouterTargetModel",WT6="PromptRouterTargetModels",DT6="PricingTerm",KT6="PromptTemplate",VT6="PutUseCaseForModelAccess",FT6="PutUseCaseForModelAccessRequest",HT6="PutUseCaseForModelAccessResponse",ET6="QueryTransformationConfiguration",zT6="RetrieveAndGenerateConfiguration",CT6="RAGConfig",$T6="RetrieveConfig",UT6="RagConfigs",qT6="RateCard",NT6="RoutingCriteria",wT6="RetrievalFilter",LT6="RetrievalFilterList",OT6="ResourceInUseException",MT6="RequestMetadataBaseFilters",RT6="RequestMetadataFilters",_T6="RequestMetadataFiltersList",jT6="RequestMetadataMap",TT6="RegisterMarketplaceModelEndpoint",PT6="RegisterMarketplaceModelEndpointRequest",ST6="RegisterMarketplaceModelEndpointResponse",xT6="RerankingMetadataSelectiveModeConfiguration",yT6="ResourceNotFoundException",vT6="RatingScale",kT6="RatingScaleItem",bT6="RatingScaleItemValue",fT6="StartAutomatedReasoningPolicyBuildWorkflow",hT6="StartAutomatedReasoningPolicyBuildWorkflowRequest",gT6="StartAutomatedReasoningPolicyBuildWorkflowResponse",uT6="StartAutomatedReasoningPolicyTestWorkflow",mT6="StartAutomatedReasoningPolicyTestWorkflowRequest",dT6="StartAutomatedReasoningPolicyTestWorkflowResponse",pT6="S3Config",cT6="StatusDetails",lT6="S3DataSource",iT6="StopEvaluationJob",nT6="StopEvaluationJobRequest",aT6="StopEvaluationJobResponse",oT6="StopModelCustomizationJob",rT6="StopModelCustomizationJobRequest",sT6="StopModelCustomizationJobResponse",tT6="SageMakerEndpoint",eT6="StopModelInvocationJob",AP6="StopModelInvocationJobRequest",QP6="StopModelInvocationJobResponse",BP6="S3ObjectDoc",GP6="ServiceQuotaExceededException",ZP6="SupportTerm",YP6="ServiceUnavailableException",JP6="Tag",XP6="TermDetails",IP6="TrainingDataConfig",WP6="TrainingDetails",DP6="ThrottlingException",KP6="TextInferenceConfig",VP6="TagList",FP6="TrainingMetrics",HP6="TeacherModelConfig",EP6="TooManyTagsException",zP6="TextPromptTemplate",CP6="TagResource",$P6="TagResourceRequest",UP6="TagResourceResponse",qP6="UpdateAutomatedReasoningPolicy",NP6="UpdateAutomatedReasoningPolicyAnnotations",wP6="UpdateAutomatedReasoningPolicyAnnotationsRequest",LP6="UpdateAutomatedReasoningPolicyAnnotationsResponse",OP6="UpdateAutomatedReasoningPolicyRequest",MP6="UpdateAutomatedReasoningPolicyResponse",RP6="UpdateAutomatedReasoningPolicyTestCase",_P6="UpdateAutomatedReasoningPolicyTestCaseRequest",jP6="UpdateAutomatedReasoningPolicyTestCaseResponse",TP6="UpdateGuardrail",PP6="UpdateGuardrailRequest",SP6="UpdateGuardrailResponse",xP6="UpdateMarketplaceModelEndpoint",yP6="UpdateMarketplaceModelEndpointRequest",vP6="UpdateMarketplaceModelEndpointResponse",kP6="UpdateProvisionedModelThroughput",bP6="UpdateProvisionedModelThroughputRequest",fP6="UpdateProvisionedModelThroughputResponse",hP6="UntagResource",gP6="UntagResourceRequest",uP6="UntagResourceResponse",mP6="Validator",dP6="VpcConfig",pP6="ValidationDetails",cP6="ValidationDataConfig",lP6="ValidationException",iP6="ValidatorMetric",nP6="ValidationMetrics",aP6="VectorSearchBedrockRerankingConfiguration",oP6="VectorSearchBedrockRerankingModelConfiguration",rP6="VectorSearchRerankingConfiguration",sP6="ValidityTerm",tP6="Validators",eP6="annotation",AS6="agreementAvailability",EvQ="andAll",QS6="agreementDuration",zvQ="alternateExpression",BS6="acceptEula",Hb1="additionalModelRequestFields",CvQ="addRule",GS6="addRuleFromNaturalLanguage",ZS6="automatedReasoningPolicy",YS6="automatedReasoningPolicyBuildWorkflowSummaries",$vQ="automatedReasoningPolicyConfig",JS6="automatedReasoningPolicySummaries",XS6="authorizationStatus",UvQ="annotationSetHash",Eb1="applicationType",hyQ="applicationTypeEquals",IS6="aggregatedTestFindingsResult",WS6="addTypeValue",qvQ="addType",gyQ="assetType",NvQ="addVariable",eZA="action",zb1="annotations",DS6="arn",KS6="automated",VS6="byteContent",uyQ="byCustomizationType",wvQ="bedrockEvaluatorModels",Cb1="blockedInputMessaging",myQ="byInferenceType",FS6="bedrockKnowledgeBaseIdentifiers",HS6="buildLog",ES6="bedrockModel",foA="baseModelArn",dyQ="baseModelArnEquals",zS6="baseModelIdentifier",CS6="bedrockModelIdentifiers",$S6="baseModelName",US6="bucketName",$b1="blockedOutputsMessaging",pyQ="byOutputModality",cyQ="byProvider",qS6="bedrockRerankingConfiguration",NS6="buildSteps",wS6="buildWorkflowAssets",Ez="buildWorkflowId",Ub1="buildWorkflowType",yi="client",sV="createdAt",lyQ="createdAfter",iyQ="createdBefore",qb1="customizationConfig",Nb1="commitmentDuration",LvQ="customerEncryptionKeyId",OvQ="commitmentExpirationTime",LS6="copyFrom",OS6="claimsFalseScenario",MS6="contextualGroundingPolicy",MvQ="contextualGroundingPolicyConfig",RvQ="customMetrics",RS6="customModelArn",_S6="customMetricConfig",jS6="customMetricDefinition",wb1="customModelDeploymentArn",_vQ="customModelDeploymentIdentifier",TS6="customModelDeploymentName",PS6="customMetricsEvaluatorModelIdentifiers",SS6="customModelKmsKeyId",jvQ="customModelName",xS6="customModelTags",yS6="customModelUnits",vS6="customModelUnitsPerModelCopy",kS6="customModelUnitsVersion",bS6="contentPolicy",TvQ="contentPolicyConfig",PvQ="contradictingRules",SvQ="crossRegionConfig",xvQ="crossRegionDetails",aX="clientRequestToken",fS6="conflictingRules",yvQ="customizationsSupported",oNA="confidenceThreshold",Kq="creationTimeAfter",Vq="creationTimeBefore",vvQ="claimsTrueScenario",hS6="contentType",RH="creationTime",rNA="customizationType",gS6="cloudWatchConfig",kvQ="claims",uS6="confidence",mS6="code",dS6="context",pS6="content",$7="description",cS6="distillationConfig",bvQ="documentContentType",fvQ="documentDescription",hoA="definitionHash",lS6="datasetLocation",hvQ="desiredModelArn",gvQ="datasetMetricConfigs",iS6="desiredModelId",uvQ="desiredModelUnits",mvQ="documentName",nS6="dataProcessingDetails",aS6="desiredProvisionedModelName",dvQ="deleteRule",oS6="disjointRuleSets",rS6="differenceScenarios",pvQ="deleteType",sS6="deleteTypeValue",cvQ="deleteVariable",tS6="data",eS6="dataset",Lb1="definition",Ax6="dimension",Qx6="document",Bx6="documents",Ev="error",AYA="endpointArn",goA="expectedAggregatedFindingsResult",Gx6="entitlementAvailability",lvQ="evaluationConfig",Ob1="endpointConfig",Zx6="embeddingDataDeliveryEnabled",Yx6="endpointIdentifier",Jx6="evaluationJobs",Xx6="errorMessage",ivQ="evaluatorModelConfig",Ix6="evaluatorModelIdentifiers",Wx6="endpointName",Dx6="expectedResult",Kx6="executionRole",Vx6="endpointStatus",Fx6="externalSourcesConfiguration",Hx6="endpointStatusMessage",QYA="endTime",Ex6="evaluationTaskTypes",zx6="entries",nvQ="enabled",Mb1="equals",Cx6="errors",uoA="expression",avQ="examples",ovQ="feedback",rvQ="filtersConfig",svQ="formData",$x6="flowDefinitionArn",Rb1="fallbackModel",tvQ="foundationModelArn",nyQ="foundationModelArnEquals",vi="failureMessage",Ux6="failureMessages",qx6="fieldName",Nx6="failureRecommendations",wx6="fieldsToExclude",Lx6="fieldsToInclude",Ox6="floatValue",evQ="filters",Mx6="filter",ayQ="force",Rx6="guardrails",_b1="guardrailArn",moA="guardContent",AkQ="generationConfiguration",QkQ="guardrailConfiguration",sNA="guardrailId",sZA="guardrailIdentifier",_x6="guardrailProfileArn",jx6="guardrailProfileIdentifier",Tx6="guardrailProfileId",Px6="greaterThan",BkQ="generatedTestCases",Sx6="greaterThanOrEquals",nNA="guardrailVersion",xx6="human",zv="httpError",yx6="httpHeader",jb1="hyperParameters",yQ="httpQuery",vx6="humanWorkflowConfig",EB="http",doA="id",lM="inputAction",GkQ="inferenceConfig",kx6="inferenceConfigSummary",bx6="ingestContent",Tb1="inputDataConfig",fx6="imageDataDeliveryEnabled",iM="inputEnabled",hx6="implicitFilterConfiguration",gx6="initialInstanceCount",ux6="invocationJobSummaries",mx6="invocationLogsConfig",dx6="invocationLogSource",poA="inputModalities",ZkQ="importedModelArn",px6="importedModelKmsKeyArn",cx6="importedModelKmsKeyId",Pb1="importedModelName",lx6="importedModelTags",oyQ="isOwned",ix6="inferenceParams",Sb1="inferenceProfileArn",YkQ="inferenceProfileIdentifier",JkQ="inferenceProfileId",xb1="inferenceProfileName",nx6="inferenceProfileSummaries",XkQ="instructSupported",ax6="inferenceSourceIdentifier",IkQ="inputStrength",ox6="instanceType",WkQ="inferenceTypesSupported",rx6="idempotencyToken",sx6="identifier",tx6="impossible",DkQ="instructions",ex6="in",Ay6="invalid",tV="jobArn",KkQ="jobDescription",VkQ="jobExpirationTime",ug="jobIdentifier",Qy6="jobIdentifiers",Hq="jobName",By6="jobStatus",Gy6="jobSummaries",yb1="jobTags",FkQ="jobType",vb1="key",Zy6="knowledgeBaseConfiguration",Yy6="knowledgeBaseConfig",HkQ="knowledgeBaseId",Jy6="knowledgeBaseRetrievalConfiguration",Xy6="kmsEncryptionKey",EkQ="kbInferenceConfig",zkQ="kmsKeyArn",kb1="kmsKeyId",Iy6="keyPrefix",Wy6="logic",CkQ="loggingConfig",Dy6="listContains",Ky6="largeDataDeliveryS3Config",Vy6="logGroupName",nM="lastModifiedTime",Fy6="legalTerm",Hy6="lessThanOrEquals",Ey6="lessThan",tNA="lastUpdatedAt",zy6="lastUpdatedAnnotationSetHash",Cy6="lastUpdatedDefinitionHash",coA="logicWarning",$y6="latency",Eq="message",eV="modelArn",PoA="modelArnEquals",Uy6="metadataAttributes",$kQ="modelArchitecture",qy6="modelConfiguration",Ny6="modelCopyJobSummaries",wy6="modelCustomizationJobSummaries",Ly6="modelConfigSummary",Oy6="metadataConfiguration",My6="modelDetails",UkQ="modelDeploymentName",bb1="modelDataSource",Ry6="modelDeploymentSummaries",ki="modelIdentifier",_y6="modelImportJobSummaries",aw="modelId",jy6="modelIdentifiers",fb1="modelKmsKeyArn",Ty6="modelKmsKeyId",qkQ="modelLifecycle",loA="marketplaceModelEndpoint",Py6="marketplaceModelEndpoints",J0A="modelName",Sy6="metricNames",t5="maxResults",xy6="maxResponseLengthForInference",yy6="modelSource",vy6="modelSourceConfig",ky6="modelSourceEquals",eNA="modelSourceIdentifier",SoA="modelStatus",hb1="modelSummaries",by6="messageType",fy6="maxTokens",hy6="modelTags",gb1="modelUnits",gy6="managedWordLists",uy6="managedWordListsConfig",my6="messages",BYA="models",dy6="mutation",oG="name",Hz="nameContains",ub1="notEquals",py6="notIn",NkQ="naturalLanguage",wkQ="newName",cy6="numberOfResults",ly6="numberOfRerankedResults",M4="nextToken",iy6="noTranslations",ny6="newValue",ay6="options",aM="outputAction",oy6="ownerAccountId",LkQ="orAll",ry6="orchestrationConfiguration",bi="outputDataConfig",oM="outputEnabled",sy6="offerId",ioA="outputModalities",ty6="outputModelArn",ey6="outputModelKmsKeyArn",Av6="outputModelName",Qv6="outputModelNameContains",OkQ="outputStrength",Bv6="overrideSearchType",MkQ="offerToken",ryQ="offerType",Gv6="offers",RkQ="premises",u3="policyArn",Zv6="performanceConfig",AwA="policyDefinition",Yv6="policyDefinitionRule",Jv6="policyDefinitionType",Xv6="policyDefinitionVariable",Iv6="priorElement",Wv6="piiEntitiesConfig",Dv6="piiEntities",_kQ="policyId",Kv6="precomputedInferenceSource",Vv6="precomputedInferenceSourceIdentifiers",mb1="provisionedModelArn",db1="provisionedModelId",pb1="provisionedModelName",Fv6="provisionedModelSummaries",jkQ="providerName",QwA="promptRouterArn",Hv6="policyRepairAssets",cb1="promptRouterName",Ev6="promptRouterSummaries",zv6="precomputedRagSourceConfig",Cv6="precomputedRagSourceIdentifiers",TkQ="promptTemplate",$v6="policyVersionArn",PkQ="pattern",Uv6="planning",SkQ="policies",qv6="price",noA="queryContent",Nv6="qualityReport",wv6="queryTransformationConfiguration",xkQ="rule",wT="roleArn",Lv6="retrieveAndGenerateConfig",Ov6="retrieveAndGenerateSourceConfig",lb1="resourceARN",Mv6="regionAvailability",Rv6="ruleCount",_v6="ragConfigSummary",jv6="rateCard",Tv6="ragConfigs",Pv6="regexesConfig",Sv6="rerankingConfiguration",xv6="retrievalConfiguration",yv6="retrieveConfig",ib1="routingCriteria",ykQ="ruleId",vv6="ragIdentifiers",nb1="ruleIds",kv6="ratingMethod",bv6="requestMetadataFilters",fv6="resourceName",hv6="refundPolicyDescription",gv6="responseQualityDifference",uv6="ratingScale",mv6="retrieveSourceConfig",vkQ="ragSourceIdentifier",kkQ="responseStreamingSupported",dv6="regexes",bkQ="rules",BG="status",syQ="sourceAccountEquals",fkQ="sourceAccountId",oV="sortBy",hkQ="s3BucketOwner",pv6="s3Config",cv6="sourceContent",lv6="stringContains",gkQ="statusDetails",iv6="s3DataSource",nv6="scenarioExpression",av6="s3EncryptionKeyId",Fq="statusEquals",ov6="securityGroupIds",rv6="subnetIds",sv6="s3InputDataConfig",tv6="s3InputFormat",ev6="sensitiveInformationPolicy",ukQ="sensitiveInformationPolicyConfig",Ak6="s3Location",mkQ="statusMessage",ab1="sourceModelArn",tyQ="sourceModelArnEquals",Qk6="selectiveModeConfiguration",dkQ="sourceModelName",Bk6="sageMaker",Gk6="selectionMode",rV="sortOrder",Zk6="s3OutputDataConfig",Yk6="supportingRules",Jk6="statusReasons",Xk6="stopSequences",Ik6="sourceType",eyQ="submitTimeAfter",AvQ="submitTimeBefore",pkQ="submitTime",Wk6="supportTerm",mg="s3Uri",Dk6="stringValue",Kk6="startsWith",Vk6="satisfiable",Fk6="scenario",ckQ="server",lkQ="smithy.ts.sdk.synthetic.com.amazonaws.bedrock",Hk6="sources",Ek6="statements",aoA="translation",zk6="translationAmbiguous",Ck6="typeCount",X0A="testCaseId",$k6="testCaseIds",ikQ="testCase",Uk6="testCases",nkQ="tierConfig",qk6="topicsConfig",Nk6="tooComplex",wk6="termDetails",ob1="trainingDataConfig",Lk6="textDataDeliveryEnabled",rb1="timeoutDurationInHours",Ok6="trainingDetails",Mk6="typeEquals",Rk6="testFindings",_k6="textInferenceConfig",jk6="tagKeys",Tk6="trainingLoss",akQ="trainingMetrics",okQ="targetModelArn",Pk6="teacherModelConfig",Sk6="teacherModelIdentifier",rkQ="targetModelKmsKeyArn",sb1="targetModelName",xk6="targetModelNameContains",tb1="targetModelTags",yk6="typeName",ooA="tierName",vk6="topicPolicy",skQ="topicPolicyConfig",kk6="textPromptTemplate",bk6="topP",fk6="testResult",hk6="testRunResult",gk6="testRunStatus",uk6="testResults",mk6="taskType",LT="tags",eb1="text",dk6="temperature",tkQ="threshold",ekQ="tier",pk6="topics",ck6="translations",kY="type",lk6="types",ik6="unit",LW="updatedAt",nk6="usageBasedPricingTerm",ak6="untranslatedClaims",ok6="updateFromRulesFeedback",rk6="updateFromScenarioFeedback",sk6="untranslatedPremises",tk6="usePromptResponse",AbQ="updateRule",ek6="unusedTypes",Ab6="unusedTypeValues",Qb6="updateTypeValue",QbQ="updateType",Bb6="unusedVariables",BbQ="updateVariable",Gb6="url",Zb6="uri",Af1="values",Yb6="variableCount",I0A="vpcConfig",Jb6="validationDetails",Qf1="validationDataConfig",Xb6="videoDataDeliveryEnabled",Ib6="validationLoss",GbQ="validationMetrics",Wb6="valueName",Db6="vectorSearchConfiguration",Kb6="validityTerm",W0A="value",Vb6="validators",Fb6="valid",ZbQ="variable",YbQ="variables",Cv="version",Hb6="vpc",Eb6="words",zb6="workflowContent",Cb6="wordsConfig",$b6="wordPolicy",JbQ="wordPolicyConfig",Ub6="x-amz-client-token",BA="com.amazonaws.bedrock",qb6=[0,BA,_U6,8,0],XbQ=[0,BA,TU6,8,0],IbQ=[0,BA,SU6,8,0],Nb6=[0,BA,xU6,8,0],wb6=[0,BA,fU6,8,0],Lb6=[0,BA,pU6,8,21],WbQ=[0,BA,cU6,8,0],DbQ=[0,BA,lU6,8,0],Ob6=[0,BA,Vq6,8,0],Bf1=[0,BA,Fq6,8,0],Gf1=[0,BA,qq6,8,0],Hv=[0,BA,Lq6,8,0],Zf1=[0,BA,Rq6,8,0],Yf1=[0,BA,yq6,8,0],Y0A=[0,BA,bq6,8,0],GYA=[0,BA,Xq6,8,0],fi=[0,BA,cq6,8,0],Mb6=[0,BA,nq6,8,0],KbQ=[0,BA,aq6,8,0],roA=[0,BA,eq6,8,0],soA=[0,BA,QN6,8,0],Rb6=[0,BA,EN6,8,21],_b6=[0,BA,gL6,8,0],VbQ=[0,BA,dL6,8,0],BwA=[0,BA,pL6,8,0],jb6=[0,BA,oL6,8,0],FbQ=[0,BA,sL6,8,0],Tb6=[0,BA,rL6,8,0],tZA=[0,BA,mO6,8,0],xoA=[0,BA,cO6,8,0],HbQ=[0,BA,oO6,8,0],EbQ=[0,BA,sO6,8,0],GwA=[0,BA,EM6,8,0],Pb6=[0,BA,MM6,8,0],Sb6=[0,BA,bM6,8,0],toA=[0,BA,JR6,8,0],xb6=[0,BA,OR6,8,0],yoA=[0,BA,jR6,8,0],zbQ=[0,BA,SR6,8,0],yb6=[0,BA,xR6,8,0],CbQ=[0,BA,vR6,8,0],$bQ=[0,BA,gR6,8,0],xi=[0,BA,lR6,8,0],vb6=[0,BA,A_6,8,0],kb6=[0,BA,B_6,8,0],Jf1=[0,BA,I_6,8,0],UbQ=[0,BA,jj6,8,0],bb6=[0,BA,aj6,8,0],Xf1=[0,BA,YT6,8,0],fb6=[0,BA,zP6,8,0],hb6=[-3,BA,QU6,{[Ev]:yi,[zv]:403},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(hb6,YvQ);var gb6=[3,BA,AU6,0,[BG,Xx6],[0,0]],ub6=[3,BA,BU6,0,[gvQ,ivQ,_S6],[[()=>mbQ,0],()=>mc6,[()=>mb6,0]]],mb6=[3,BA,ZU6,0,[RvQ,ivQ],[[()=>$p6,0],()=>yh6]],db6=[3,BA,WU6,0,[aoA,PvQ,coA],[[()=>ZwA,0],()=>Ff1,[()=>eoA,0]]],pb6=[3,BA,KU6,0,[eb1],[[()=>XbQ,0]]],cb6=[3,BA,DU6,0,[aoA,PvQ,coA],[[()=>ZwA,0],()=>Ff1,[()=>eoA,0]]],eoA=[3,BA,FU6,0,[kY,RkQ,kvQ],[0,[()=>aNA,0],[()=>aNA,0]]],lb6=[3,BA,HU6,0,[],[]],ib6=[3,BA,EU6,0,[doA,$v6],[0,0]],nb6=[3,BA,$U6,0,[aoA,vvQ,OS6,coA],[[()=>ZwA,0],[()=>voA,0],[()=>voA,0],[()=>eoA,0]]],voA=[3,BA,CU6,0,[Ek6],[[()=>aNA,0]]],ab6=[3,BA,NU6,0,[],[]],ZwA=[3,BA,UU6,0,[RkQ,kvQ,sk6,ak6,uS6],[[()=>aNA,0],[()=>aNA,0],[()=>QvQ,0],[()=>QvQ,0],1]],ob6=[3,BA,qU6,0,[ay6,rS6],[[()=>wp6,0],[()=>Up6,0]]],rb6=[3,BA,LU6,0,[ck6],[[()=>Np6,0]]],sb6=[3,BA,MU6,0,[aoA,vvQ,Yk6,coA],[[()=>ZwA,0],[()=>voA,0],()=>Ff1,[()=>eoA,0]]],tb6=[3,BA,RU6,0,[Wy6,NkQ],[[()=>qb6,0],[()=>XbQ,0]]],eb6=[3,BA,vU6,0,[uoA],[[()=>Bf1,0]]],Af6=[3,BA,kU6,0,[NkQ],[[()=>wb6,0]]],Qf6=[3,BA,bU6,0,[xkQ],[[()=>ArA,0]]],Bf6=[3,BA,hU6,0,[oG,$7,Af1],[[()=>Hv,0],[()=>Gf1,0],[()=>gbQ,0]]],Gf6=[3,BA,gU6,0,[kY],[[()=>QrA,0]]],Zf6=[3,BA,uU6,0,[W0A,$7],[0,[()=>Zf1,0]]],Yf6=[3,BA,mU6,0,[oG,kY,$7],[[()=>Y0A,0],[()=>Hv,0],[()=>Yf1,0]]],Jf6=[3,BA,dU6,0,[ZbQ],[[()=>BrA,0]]],Xf6=[3,BA,iU6,0,[zx6],[[()=>Lp6,0]]],If6=[3,BA,nU6,0,[eP6,BG,NS6],[[()=>lbQ,0],0,[()=>Op6,0]]],Wf6=[3,BA,rU6,0,[dS6,Iv6,my6],[[()=>yc6,0],[()=>vc6,0],()=>Mp6]],Df6=[3,BA,eU6,0,[Eq,by6],[0,0]],Kf6=[3,BA,Qq6,0,[Qx6,bvQ,mvQ,fvQ],[[()=>Lb6,0],0,[()=>DbQ,0],[()=>WbQ,0]]],Vf6=[3,BA,Gq6,0,[zb1],[[()=>Hf1,0]]],Ff6=[3,BA,Zq6,0,[AwA,zb6],[[()=>YwA,0],[()=>fc6,0]]],Hf6=[3,BA,Yq6,0,[u3,Ez,BG,Ub1,sV,LW],[0,0,0,0,5,5]],YwA=[3,BA,hq6,0,[Cv,lk6,bkQ,YbQ],[0,[()=>Tp6,0],[()=>jp6,0],[()=>xp6,0]]],Ef6=[3,BA,Wq6,0,[Ck6,Yb6,Rv6,ek6,Ab6,Bb6,fS6,oS6],[1,1,1,[()=>Pp6,0],[()=>Sp6,0],[()=>ubQ,0],64,[()=>yp6,0]]],ArA=[3,BA,Dq6,0,[doA,uoA,zvQ],[0,[()=>Bf1,0],[()=>Ob6,0]]],QrA=[3,BA,$q6,0,[oG,$7,Af1],[[()=>Hv,0],[()=>Gf1,0],[()=>gbQ,0]]],zf6=[3,BA,Mq6,0,[W0A,$7],[0,[()=>Zf1,0]]],Cf6=[3,BA,jq6,0,[yk6,Wb6],[[()=>Hv,0],0]],BrA=[3,BA,Sq6,0,[oG,kY,$7],[[()=>Y0A,0],[()=>Hv,0],[()=>Yf1,0]]],$f6=[3,BA,Kq6,0,[ykQ],[0]],Uf6=[3,BA,Eq6,0,[doA],[0]],qf6=[3,BA,Uq6,0,[oG],[[()=>Hv,0]]],Nf6=[3,BA,wq6,0,[oG],[[()=>Hv,0]]],wf6=[3,BA,Pq6,0,[W0A],[0]],Lf6=[3,BA,xq6,0,[oG],[[()=>Y0A,0]]],Of6=[3,BA,kq6,0,[oG],[[()=>Y0A,0]]],Mf6=[3,BA,zq6,0,[YbQ,bkQ],[[()=>ubQ,0],64]],Rf6=[3,BA,gq6,0,[noA,moA,goA],[[()=>soA,0],[()=>roA,0],0]],_f6=[3,BA,mq6,0,[BkQ],[[()=>vp6,0]]],jf6=[3,BA,dq6,0,[pS6],[[()=>Nb6,0]]],Tf6=[3,BA,lq6,0,[],[]],Pf6=[3,BA,iq6,0,[uoA,zvQ,nb1,Dx6],[[()=>KbQ,0],[()=>Mb6,0],64,0]],Sf6=[3,BA,oq6,0,[u3,oG,$7,Cv,_kQ,sV,LW],[0,[()=>fi,0],[()=>GYA,0],0,0,5,5]],If1=[3,BA,sq6,0,[X0A,moA,noA,goA,sV,LW,oNA],[0,[()=>roA,0],[()=>soA,0],0,5,5,1]],qbQ=[3,BA,BN6,0,[ikQ,u3,gk6,Rk6,hk6,IS6,LW],[[()=>If1,0],0,0,[()=>qp6,0],0,0,5]],xf6=[3,BA,YN6,0,[nb1,ovQ],[64,[()=>IbQ,0]]],yf6=[3,BA,JN6,0,[nb1,nv6,ovQ],[64,[()=>KbQ,0],[()=>IbQ,0]]],vf6=[3,BA,XN6,0,[ykQ,uoA],[0,[()=>Bf1,0]]],kf6=[3,BA,IN6,0,[xkQ],[[()=>ArA,0]]],bf6=[3,BA,WN6,0,[oG,wkQ,$7,Af1],[[()=>Hv,0],[()=>Hv,0],[()=>Gf1,0],[()=>hp6,0]]],ff6=[3,BA,DN6,0,[kY],[[()=>QrA,0]]],hf6=[3,BA,KN6,0,[W0A,ny6,$7],[0,0,[()=>Zf1,0]]],gf6=[3,BA,VN6,0,[oG,wkQ,$7],[[()=>Y0A,0],[()=>Y0A,0],[()=>Yf1,0]]],uf6=[3,BA,FN6,0,[ZbQ],[[()=>BrA,0]]],mf6=[3,BA,$N6,0,[ug,mS6,Eq],[[()=>BwA,0],0,0]],df6=[3,BA,qN6,0,[ug,By6],[[()=>BwA,0],0]],pf6=[3,BA,wN6,0,[Qy6],[[()=>lp6,0]]],cf6=[3,BA,LN6,0,[Cx6,Jx6],[[()=>gp6,0],[()=>up6,0]]],lf6=[3,BA,ON6,0,[ki],[0]],if6=[3,BA,zN6,0,[sx6,hS6,tS6],[[()=>kb6,0],0,[()=>Rb6,0]]],nf6=[3,BA,jN6,0,[u3,Ez],[[0,1],[0,1]]],af6=[3,BA,TN6,0,[],[]],of6=[3,BA,fw6,0,[Vy6,wT,Ky6],[0,0,()=>bbQ]],rf6=[-3,BA,lN6,{[Ev]:yi,[zv]:400},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(rf6,DvQ);var sf6=[3,BA,PN6,0,[oG,$7,aX,AwA,kb1,LT],[[()=>fi,0],[()=>GYA,0],[0,4],[()=>YwA,0],0,()=>SD]],tf6=[3,BA,SN6,0,[u3,Cv,oG,$7,hoA,sV,LW],[0,0,[()=>fi,0],[()=>GYA,0],0,5,5]],ef6=[3,BA,yN6,0,[u3,moA,noA,goA,aX,oNA],[[0,1],[()=>roA,0],[()=>soA,0],0,[0,4],1]],Ah6=[3,BA,vN6,0,[u3,X0A],[0,0]],Qh6=[3,BA,bN6,0,[u3,aX,Cy6,LT],[[0,1],[0,4],0,()=>SD]],Bh6=[3,BA,fN6,0,[u3,Cv,oG,$7,hoA,sV],[0,0,[()=>fi,0],[()=>GYA,0],0,5]],Gh6=[3,BA,mN6,0,[UkQ,eV,$7,LT,aX],[0,0,0,()=>SD,[0,4]]],Zh6=[3,BA,dN6,0,[wb1],[0]],Yh6=[3,BA,pN6,0,[J0A,vy6,fb1,wT,hy6,aX],[0,()=>YrA,0,0,()=>SD,[0,4]]],Jh6=[3,BA,cN6,0,[eV],[0]],Xh6=[3,BA,nN6,0,[Hq,KkQ,aX,wT,LvQ,yb1,Eb1,lvQ,GkQ,bi],[0,[()=>VbQ,0],[0,4],0,0,()=>SD,0,[()=>ibQ,0],[()=>nbQ,0],()=>NbQ]],Ih6=[3,BA,aN6,0,[tV],[0]],Wh6=[3,BA,rN6,0,[MkQ,aw],[0,0]],Dh6=[3,BA,sN6,0,[aw],[0]],Kh6=[3,BA,eN6,0,[oG,$7,skQ,TvQ,JbQ,ukQ,MvQ,$vQ,SvQ,Cb1,$b1,kb1,LT,aX],[[()=>toA,0],[()=>GwA,0],[()=>PbQ,0],[()=>MbQ,0],[()=>SbQ,0],()=>TbQ,[()=>RbQ,0],()=>LbQ,()=>_bQ,[()=>tZA,0],[()=>tZA,0],0,()=>SD,[0,4]]],Vh6=[3,BA,Aw6,0,[sNA,_b1,Cv,sV],[0,0,0,5]],Fh6=[3,BA,Bw6,0,[sZA,$7,aX],[[0,1],[()=>GwA,0],[0,4]]],Hh6=[3,BA,Gw6,0,[sNA,Cv],[0,0]],Eh6=[3,BA,Yw6,0,[xb1,$7,aX,yy6,LT],[0,[()=>Jf1,0],[0,4],()=>dc6,()=>SD]],zh6=[3,BA,Jw6,0,[Sb1,BG],[0,0]],Ch6=[3,BA,Rw6,0,[eNA,Ob1,BS6,Wx6,aX,LT],[0,()=>Cf1,2,0,[0,4],()=>SD]],$h6=[3,BA,_w6,0,[loA],[()=>GrA]],Uh6=[3,BA,Dw6,0,[ab1,sb1,Ty6,tb1,aX],[0,0,0,()=>SD,[0,4]]],qh6=[3,BA,Kw6,0,[tV],[0]],Nh6=[3,BA,Vw6,0,[Hq,jvQ,wT,aX,zS6,rNA,SS6,yb1,xS6,ob1,Qf1,bi,jb1,I0A,qb1],[0,0,0,[0,4],0,0,0,()=>SD,()=>SD,[()=>Kf1,0],()=>Vf1,()=>Wf1,128,()=>hi,()=>zf1]],wh6=[3,BA,Fw6,0,[tV],[0]],Lh6=[3,BA,qw6,0,[Hq,Pb1,wT,bb1,yb1,lx6,aX,I0A,cx6],[0,0,0,()=>YrA,()=>SD,()=>SD,0,()=>hi,0]],Oh6=[3,BA,Nw6,0,[tV],[0]],Mh6=[3,BA,ww6,0,[Hq,wT,aX,aw,Tb1,bi,I0A,rb1,LT],[0,0,[0,4],0,()=>$f1,()=>Uf1,()=>hi,1,()=>SD]],Rh6=[3,BA,Lw6,0,[tV],[0]],_h6=[3,BA,kw6,0,[aX,cb1,BYA,$7,ib1,Rb1,LT],[[0,4],0,()=>Ef1,[()=>Xf1,0],()=>Df1,()=>ZrA,()=>SD]],jh6=[3,BA,bw6,0,[QwA],[0]],Th6=[3,BA,xw6,0,[aX,gb1,pb1,aw,Nb1,LT],[[0,4],1,0,0,0,()=>SD]],Ph6=[3,BA,yw6,0,[mb1],[0]],Sh6=[3,BA,Xw6,0,[ki],[0]],xh6=[3,BA,Ew6,8,[oG,DkQ,uv6],[[()=>bb6,0],0,()=>jc6]],yh6=[3,BA,$w6,0,[wvQ],[()=>dp6]],vh6=[3,BA,zw6,0,[wb1,TS6,eV,sV,BG,tNA,vi],[0,0,0,5,0,5,0]],kh6=[3,BA,jw6,0,[eV,J0A,RH,foA,$S6,rNA,oy6,SoA],[0,0,5,0,0,0,0,0]],bh6=[3,BA,Pw6,0,[vS6,kS6],[1,0]],fh6=[3,BA,NL6,0,[BG,RH,nM],[0,5,5]],hh6=[3,BA,uw6,0,[u3,Ez,tNA],[[0,1],[0,1],[5,{[yQ]:LW}]]],gh6=[3,BA,mw6,0,[],[]],uh6=[3,BA,dw6,0,[u3,ayQ],[[0,1],[2,{[yQ]:ayQ}]]],mh6=[3,BA,pw6,0,[],[]],dh6=[3,BA,lw6,0,[u3,X0A,tNA],[[0,1],[0,1],[5,{[yQ]:LW}]]],ph6=[3,BA,iw6,0,[],[]],ch6=[3,BA,rw6,0,[_vQ],[[0,1]]],lh6=[3,BA,sw6,0,[],[]],ih6=[3,BA,tw6,0,[ki],[[0,1]]],nh6=[3,BA,ew6,0,[],[]],ah6=[3,BA,QL6,0,[aw],[0]],oh6=[3,BA,BL6,0,[],[]],rh6=[3,BA,ZL6,0,[sZA,nNA],[[0,1],[0,{[yQ]:nNA}]]],sh6=[3,BA,YL6,0,[],[]],th6=[3,BA,XL6,0,[ki],[[0,1]]],eh6=[3,BA,IL6,0,[],[]],Ag6=[3,BA,DL6,0,[YkQ],[[0,1]]],Qg6=[3,BA,KL6,0,[],[]],Bg6=[3,BA,zL6,0,[AYA],[[0,1]]],Gg6=[3,BA,CL6,0,[],[]],Zg6=[3,BA,FL6,0,[],[]],Yg6=[3,BA,HL6,0,[],[]],Jg6=[3,BA,RL6,0,[QwA],[[0,1]]],Xg6=[3,BA,_L6,0,[],[]],Ig6=[3,BA,LL6,0,[db1],[[0,1]]],Wg6=[3,BA,OL6,0,[],[]],Dg6=[3,BA,$L6,0,[AYA],[[0,1]]],Kg6=[3,BA,UL6,0,[],[]],Vg6=[3,BA,ML6,0,[Ax6,qv6,$7,ik6],[0,0,0,0]],Fg6=[3,BA,nw6,0,[Pk6],[()=>pd6]],Hg6=[3,BA,xL6,0,[ki,ix6,Zv6],[0,[()=>Tb6,0],()=>Xd6]],Eg6=[3,BA,kL6,0,[oG,lS6],[[()=>_b6,0],()=>hc6]],zg6=[3,BA,fL6,0,[mk6,eS6,Sy6],[0,[()=>Eg6,0],[()=>ip6,0]]],Cg6=[3,BA,mL6,0,[Ly6,_v6],[()=>$g6,()=>wg6]],$g6=[3,BA,iL6,0,[CS6,Vv6],[64,64]],NbQ=[3,BA,eL6,0,[mg],[0]],Ug6=[3,BA,AO6,0,[ax6],[0]],qg6=[3,BA,QO6,0,[vkQ],[0]],Ng6=[3,BA,BO6,0,[vkQ],[0]],wg6=[3,BA,ZO6,0,[FS6,Cv6],[64,64]],Lg6=[3,BA,YO6,0,[tV,Hq,BG,RH,FkQ,Ex6,jy6,vv6,Ix6,PS6,kx6,Eb1],[0,0,0,5,0,64,64,64,64,64,()=>Cg6,0]],Og6=[3,BA,PL6,0,[u3],[[0,1]]],Mg6=[3,BA,SL6,0,[AwA],[[()=>YwA,16]]],Rg6=[3,BA,WO6,0,[Ik6,Ak6,VS6],[0,()=>Md6,[()=>if6,0]]],_g6=[3,BA,JO6,0,[TkQ,QkQ,EkQ,Hb1],[[()=>kbQ,0],()=>ObQ,()=>xbQ,143]],jg6=[3,BA,XO6,0,[eV,Hk6,AkQ],[0,[()=>op6,0],[()=>_g6,0]]],Tg6=[3,BA,VO6,0,[qx6],[0]],NT=[3,BA,KO6,0,[vb1,W0A],[0,15]],Pg6=[3,BA,HO6,0,[eV,aw,J0A,jkQ,poA,ioA,kkQ,yvQ,WkQ,qkQ],[0,0,0,0,64,64,2,64,64,()=>wbQ]],wbQ=[3,BA,EO6,0,[BG],[0]],Sg6=[3,BA,zO6,0,[eV,aw,J0A,jkQ,poA,ioA,kkQ,yvQ,WkQ,qkQ],[0,0,0,0,64,64,2,64,64,()=>wbQ]],xg6=[3,BA,dO6,0,[TkQ,QkQ,EkQ,Hb1],[[()=>kbQ,0],()=>ObQ,()=>xbQ,143]],yg6=[3,BA,qO6,0,[u3,Ez],[[0,1],[0,1]]],vg6=[3,BA,NO6,0,[u3,oG,Ez,zb1,UvQ,LW],[0,[()=>fi,0],0,[()=>Hf1,0],0,5]],kg6=[3,BA,LO6,0,[u3,Ez],[[0,1],[0,1]]],bg6=[3,BA,_O6,0,[u3,Ez,BG,Ub1,mvQ,bvQ,fvQ,sV,LW],[0,0,0,0,[()=>DbQ,0],0,[()=>WbQ,0],5,5]],fg6=[3,BA,MO6,0,[u3,Ez,gyQ],[[0,1],[0,1],[0,{[yQ]:gyQ}]]],hg6=[3,BA,RO6,0,[u3,Ez,wS6],[0,0,[()=>xc6,0]]],gg6=[3,BA,PO6,0,[u3,Ez],[[0,1],[0,1]]],ug6=[3,BA,SO6,0,[u3,Fk6],[0,[()=>Pf6,0]]],mg6=[3,BA,xO6,0,[u3],[[0,1]]],dg6=[3,BA,yO6,0,[u3,oG,Cv,_kQ,$7,hoA,zkQ,sV,LW],[0,[()=>fi,0],0,0,[()=>GYA,0],0,0,5,5]],pg6=[3,BA,kO6,0,[u3,X0A],[[0,1],[0,1]]],cg6=[3,BA,bO6,0,[u3,ikQ],[0,[()=>If1,0]]],lg6=[3,BA,hO6,0,[u3,Ez,X0A],[[0,1],[0,1],[0,1]]],ig6=[3,BA,gO6,0,[fk6],[[()=>qbQ,0]]],ng6=[3,BA,JM6,0,[_vQ],[[0,1]]],ag6=[3,BA,XM6,0,[wb1,UkQ,eV,sV,BG,$7,vi,tNA],[0,0,0,5,0,0,0,5]],og6=[3,BA,IM6,0,[ki],[[0,1]]],rg6=[3,BA,WM6,0,[eV,J0A,Hq,tV,foA,rNA,fb1,jb1,ob1,Qf1,bi,akQ,GbQ,RH,qb1,SoA,vi],[0,0,0,0,0,0,0,128,[()=>Kf1,0],()=>Vf1,()=>Wf1,()=>hbQ,()=>cbQ,5,()=>zf1,0,0]],sg6=[3,BA,CM6,0,[ug],[[()=>BwA,1]]],tg6=[3,BA,$M6,0,[Hq,BG,tV,KkQ,wT,LvQ,FkQ,Eb1,lvQ,GkQ,bi,RH,nM,Ux6],[0,0,0,[()=>VbQ,0],0,0,0,0,[()=>ibQ,0],[()=>nbQ,0],()=>NbQ,5,5,64]],eg6=[3,BA,NM6,0,[aw],[[0,1]]],Au6=[3,BA,wM6,0,[aw,AS6,XS6,Gx6,Mv6],[0,()=>gb6,0,0,0]],Qu6=[3,BA,LM6,0,[ki],[[0,1]]],Bu6=[3,BA,OM6,0,[My6],[()=>Pg6]],Gu6=[3,BA,jM6,0,[sZA,nNA],[[0,1],[0,{[yQ]:nNA}]]],Zu6=[3,BA,TM6,0,[oG,$7,sNA,_b1,Cv,BG,vk6,bS6,$b6,ev6,MS6,ZS6,xvQ,sV,LW,Jk6,Nx6,Cb1,$b1,zkQ],[[()=>toA,0],[()=>GwA,0],0,0,0,0,[()=>iu6,0],[()=>xu6,0],[()=>su6,0],()=>du6,[()=>ku6,0],()=>_u6,()=>jbQ,5,5,[()=>Ic6,0],[()=>Qc6,0],[()=>tZA,0],[()=>tZA,0],0]],Yu6=[3,BA,SM6,0,[ki],[[0,1]]],Ju6=[3,BA,xM6,0,[eV,J0A,Hq,tV,bb1,RH,$kQ,fb1,XkQ,yS6],[0,0,0,0,()=>YrA,5,0,0,2,()=>bh6]],Xu6=[3,BA,vM6,0,[YkQ],[[0,1]]],Iu6=[3,BA,kM6,0,[xb1,$7,sV,LW,Sb1,BYA,JkQ,BG,kY],[0,[()=>Jf1,0],5,5,0,()=>pbQ,0,0,0]],Wu6=[3,BA,eM6,0,[AYA],[[0,1]]],Du6=[3,BA,AR6,0,[loA],[()=>GrA]],Ku6=[3,BA,hM6,0,[tV],[[0,1]]],Vu6=[3,BA,gM6,0,[tV,BG,RH,okQ,sb1,fkQ,ab1,rkQ,tb1,vi,dkQ],[0,0,5,0,0,0,0,0,()=>SD,0,0]],Fu6=[3,BA,uM6,0,[ug],[[0,1]]],Hu6=[3,BA,mM6,0,[tV,Hq,Av6,ty6,aX,wT,BG,gkQ,vi,RH,nM,QYA,foA,jb1,ob1,Qf1,bi,rNA,ey6,akQ,GbQ,I0A,qb1],[0,0,0,0,0,0,0,()=>fbQ,0,5,5,5,0,128,[()=>Kf1,0],()=>Vf1,()=>Wf1,0,0,()=>hbQ,()=>cbQ,()=>hi,()=>zf1]],Eu6=[3,BA,cM6,0,[ug],[[0,1]]],zu6=[3,BA,lM6,0,[tV,Hq,Pb1,ZkQ,wT,bb1,BG,vi,RH,nM,QYA,I0A,px6],[0,0,0,0,0,()=>YrA,0,0,5,5,5,()=>hi,0]],Cu6=[3,BA,iM6,0,[ug],[[0,1]]],$u6=[3,BA,nM6,0,[tV,Hq,aw,aX,wT,BG,Eq,pkQ,nM,QYA,Tb1,bi,I0A,rb1,VkQ],[0,0,0,0,0,0,[()=>UbQ,0],5,5,5,()=>$f1,()=>Uf1,()=>hi,1,5]],Uu6=[3,BA,rM6,0,[],[]],qu6=[3,BA,sM6,0,[CkQ],[()=>vbQ]],Nu6=[3,BA,ER6,0,[QwA],[[0,1]]],wu6=[3,BA,zR6,0,[cb1,ib1,$7,sV,LW,QwA,BYA,Rb1,BG,kY],[0,()=>Df1,[()=>Xf1,0],5,5,0,()=>Ef1,()=>ZrA,0,0]],Lu6=[3,BA,VR6,0,[db1],[[0,1]]],Ou6=[3,BA,FR6,0,[gb1,uvQ,pb1,mb1,eV,hvQ,tvQ,BG,RH,nM,vi,Nb1,OvQ],[1,1,0,0,0,0,0,0,5,5,0,0,5]],Mu6=[3,BA,dR6,0,[],[]],Ru6=[3,BA,pR6,0,[svQ],[21]],_u6=[3,BA,$O6,0,[SkQ,oNA],[64,1]],LbQ=[3,BA,jO6,0,[SkQ,oNA],[64,1]],ObQ=[3,BA,HM6,0,[sNA,nNA],[0,0]],ju6=[3,BA,pO6,0,[kY,IkQ,OkQ,poA,ioA,lM,aM,iM,oM],[0,0,0,[()=>koA,0],[()=>koA,0],[()=>xoA,0],[()=>xoA,0],2,2]],Tu6=[3,BA,lO6,0,[kY,IkQ,OkQ,poA,ioA,lM,aM,iM,oM],[0,0,0,[()=>koA,0],[()=>koA,0],[()=>xoA,0],[()=>xoA,0],2,2]],Pu6=[3,BA,nO6,0,[ooA],[[()=>HbQ,0]]],Su6=[3,BA,aO6,0,[ooA],[[()=>HbQ,0]]],xu6=[3,BA,DM6,0,[evQ,ekQ],[[()=>sp6,0],[()=>Pu6,0]]],MbQ=[3,BA,KM6,0,[rvQ,nkQ],[[()=>tp6,0],[()=>Su6,0]]],yu6=[3,BA,tO6,0,[kY,tkQ,eZA,nvQ],[0,1,[()=>EbQ,0],2]],vu6=[3,BA,eO6,0,[kY,tkQ,eZA,nvQ],[0,1,[()=>EbQ,0],2]],ku6=[3,BA,BM6,0,[evQ],[[()=>ep6,0]]],RbQ=[3,BA,GM6,0,[rvQ],[[()=>Ac6,0]]],_bQ=[3,BA,VM6,0,[jx6],[0]],jbQ=[3,BA,FM6,0,[Tx6,_x6],[0,0]],bu6=[3,BA,QR6,0,[kY,lM,aM,iM,oM],[0,[()=>xi,0],[()=>xi,0],2,2]],fu6=[3,BA,BR6,0,[kY,lM,aM,iM,oM],[0,[()=>xi,0],[()=>xi,0],2,2]],hu6=[3,BA,XR6,0,[kY,eZA,lM,aM,iM,oM],[0,0,0,0,2,2]],gu6=[3,BA,IR6,0,[kY,eZA,lM,aM,iM,oM],[0,0,0,0,2,2]],uu6=[3,BA,CR6,0,[oG,$7,PkQ,eZA,lM,aM,iM,oM],[0,0,0,0,0,0,2,2]],mu6=[3,BA,$R6,0,[oG,$7,PkQ,eZA,lM,aM,iM,oM],[0,0,0,0,0,0,2,2]],du6=[3,BA,wR6,0,[Dv6,dv6],[()=>Zc6,()=>Jc6]],TbQ=[3,BA,LR6,0,[Wv6,Pv6],[()=>Yc6,()=>Xc6]],pu6=[3,BA,NR6,0,[doA,DS6,BG,oG,$7,Cv,sV,LW,xvQ],[0,0,0,[()=>toA,0],[()=>GwA,0],0,5,5,()=>jbQ]],cu6=[3,BA,_R6,0,[oG,Lb1,avQ,kY,lM,aM,iM,oM],[[()=>CbQ,0],[()=>zbQ,0],[()=>dbQ,0],0,[()=>yoA,0],[()=>yoA,0],2,2]],lu6=[3,BA,TR6,0,[oG,Lb1,avQ,kY,lM,aM,iM,oM],[[()=>CbQ,0],[()=>zbQ,0],[()=>dbQ,0],0,[()=>yoA,0],[()=>yoA,0],2,2]],iu6=[3,BA,kR6,0,[pk6,ekQ],[[()=>Dc6,0],[()=>nu6,0]]],PbQ=[3,BA,bR6,0,[qk6,nkQ],[[()=>Kc6,0],[()=>au6,0]]],nu6=[3,BA,fR6,0,[ooA],[[()=>$bQ,0]]],au6=[3,BA,hR6,0,[ooA],[[()=>$bQ,0]]],ou6=[3,BA,cR6,0,[eb1,lM,aM,iM,oM],[0,[()=>xi,0],[()=>xi,0],2,2]],ru6=[3,BA,iR6,0,[eb1,lM,aM,iM,oM],[0,[()=>xi,0],[()=>xi,0],2,2]],su6=[3,BA,aR6,0,[Eb6,gy6],[[()=>Vc6,0],[()=>Bc6,0]]],SbQ=[3,BA,oR6,0,[Cb6,uy6],[[()=>Fc6,0],[()=>Gc6,0]]],tu6=[3,BA,sR6,0,[vx6,RvQ,gvQ],[[()=>Am6,0],[()=>Hc6,0],[()=>mbQ,0]]],eu6=[3,BA,tR6,0,[oG,$7,kv6],[[()=>FbQ,0],[()=>jb6,0],0]],Am6=[3,BA,Q_6,0,[$x6,DkQ],[0,[()=>vb6,0]]],Qm6=[3,BA,G_6,0,[Uy6,eV],[[()=>$c6,0],0]],Bm6=[3,BA,J_6,0,[eV,J0A,RH,XkQ,$kQ],[0,0,5,2,0]],Gm6=[3,BA,W_6,0,[eV],[0]],Zm6=[3,BA,V_6,0,[xb1,$7,sV,LW,Sb1,BYA,JkQ,BG,kY],[0,[()=>Jf1,0],5,5,0,()=>pbQ,0,0,0]],Ym6=[-3,BA,H_6,{[Ev]:ckQ,[zv]:500},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(Ym6,JvQ);var Jm6=[3,BA,Z_6,0,[tk6,dx6,bv6],[2,()=>pc6,[()=>nc6,0]]],xbQ=[3,BA,U_6,0,[_k6],[()=>ld6]],ybQ=[3,BA,C_6,0,[Db6],[[()=>Im6,0]]],Xm6=[3,BA,z_6,0,[HkQ,eV,xv6,AkQ,ry6],[0,0,[()=>ybQ,0],[()=>xg6,0],()=>Jd6]],Im6=[3,BA,$_6,0,[cy6,Bv6,Mx6,hx6,Sv6],[1,0,[()=>abQ,0],[()=>Qm6,0],[()=>zp6,0]]],Wm6=[3,BA,Oj6,0,[Gb6],[0]],Dm6=[3,BA,O_6,0,[u3,M4,t5],[[0,{[yQ]:u3}],[0,{[yQ]:M4}],[1,{[yQ]:t5}]]],Km6=[3,BA,M_6,0,[JS6,M4],[[()=>kp6,0],0]],Vm6=[3,BA,w_6,0,[u3,M4,t5],[[0,1],[0,{[yQ]:M4}],[1,{[yQ]:t5}]]],Fm6=[3,BA,L_6,0,[YS6,M4],[()=>_p6,0]],Hm6=[3,BA,__6,0,[u3,M4,t5],[[0,1],[0,{[yQ]:M4}],[1,{[yQ]:t5}]]],Em6=[3,BA,j_6,0,[Uk6,M4],[[()=>bp6,0],0]],zm6=[3,BA,P_6,0,[u3,Ez,M4,t5],[[0,1],[0,1],[0,{[yQ]:M4}],[1,{[yQ]:t5}]]],Cm6=[3,BA,S_6,0,[uk6,M4],[[()=>fp6,0],0]],$m6=[3,BA,k_6,0,[iyQ,lyQ,Hz,t5,M4,oV,rV,Fq,PoA],[[5,{[yQ]:iyQ}],[5,{[yQ]:lyQ}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}],[0,{[yQ]:Fq}],[0,{[yQ]:PoA}]]],Um6=[3,BA,b_6,0,[M4,Ry6],[0,()=>pp6]],qm6=[3,BA,f_6,0,[Vq,Kq,Hz,dyQ,nyQ,t5,M4,oV,rV,oyQ,SoA],[[5,{[yQ]:Vq}],[5,{[yQ]:Kq}],[0,{[yQ]:Hz}],[0,{[yQ]:dyQ}],[0,{[yQ]:nyQ}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}],[2,{[yQ]:oyQ}],[0,{[yQ]:SoA}]]],Nm6=[3,BA,h_6,0,[M4,hb1],[0,()=>cp6]],wm6=[3,BA,u_6,0,[Kq,Vq,Fq,hyQ,Hz,t5,M4,oV,rV],[[5,{[yQ]:Kq}],[5,{[yQ]:Vq}],[0,{[yQ]:Fq}],[0,{[yQ]:hyQ}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],Lm6=[3,BA,m_6,0,[M4,Gy6],[0,()=>ap6]],Om6=[3,BA,c_6,0,[aw,ryQ],[[0,1],[0,{[yQ]:ryQ}]]],Mm6=[3,BA,l_6,0,[aw,Gv6],[0,()=>Lc6]],Rm6=[3,BA,i_6,0,[cyQ,uyQ,pyQ,myQ],[[0,{[yQ]:cyQ}],[0,{[yQ]:uyQ}],[0,{[yQ]:pyQ}],[0,{[yQ]:myQ}]]],_m6=[3,BA,n_6,0,[hb1],[()=>rp6]],jm6=[3,BA,o_6,0,[sZA,t5,M4],[[0,{[yQ]:sZA}],[1,{[yQ]:t5}],[0,{[yQ]:M4}]]],Tm6=[3,BA,r_6,0,[Rx6,M4],[[()=>Wc6,0],0]],Pm6=[3,BA,t_6,0,[Vq,Kq,Hz,t5,M4,oV,rV],[[5,{[yQ]:Vq}],[5,{[yQ]:Kq}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],Sm6=[3,BA,e_6,0,[M4,hb1],[0,()=>Ec6]],xm6=[3,BA,Qj6,0,[t5,M4,Mk6],[[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:kY}]]],ym6=[3,BA,Bj6,0,[nx6,M4],[[()=>zc6,0],0]],vm6=[3,BA,zj6,0,[t5,M4,ky6],[[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:eNA}]]],km6=[3,BA,Cj6,0,[Py6,M4],[()=>Cc6,0]],bm6=[3,BA,Zj6,0,[Kq,Vq,Fq,syQ,tyQ,xk6,t5,M4,oV,rV],[[5,{[yQ]:Kq}],[5,{[yQ]:Vq}],[0,{[yQ]:Fq}],[0,{[yQ]:syQ}],[0,{[yQ]:tyQ}],[0,{[yQ]:Qv6}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],fm6=[3,BA,Yj6,0,[M4,Ny6],[0,()=>Uc6]],hm6=[3,BA,Jj6,0,[Kq,Vq,Fq,Hz,t5,M4,oV,rV],[[5,{[yQ]:Kq}],[5,{[yQ]:Vq}],[0,{[yQ]:Fq}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],gm6=[3,BA,Xj6,0,[M4,wy6],[0,()=>qc6]],um6=[3,BA,Dj6,0,[Kq,Vq,Fq,Hz,t5,M4,oV,rV],[[5,{[yQ]:Kq}],[5,{[yQ]:Vq}],[0,{[yQ]:Fq}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],mm6=[3,BA,Kj6,0,[M4,_y6],[0,()=>Nc6]],dm6=[3,BA,Vj6,0,[eyQ,AvQ,Fq,Hz,t5,M4,oV,rV],[[5,{[yQ]:eyQ}],[5,{[yQ]:AvQ}],[0,{[yQ]:Fq}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],pm6=[3,BA,Fj6,0,[M4,ux6],[0,[()=>wc6,0]]],cm6=[3,BA,wj6,0,[t5,M4,kY],[[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:kY}]]],lm6=[3,BA,Lj6,0,[Ev6,M4],[[()=>Oc6,0],0]],im6=[3,BA,Uj6,0,[Kq,Vq,Fq,PoA,Hz,t5,M4,oV,rV],[[5,{[yQ]:Kq}],[5,{[yQ]:Vq}],[0,{[yQ]:Fq}],[0,{[yQ]:PoA}],[0,{[yQ]:Hz}],[1,{[yQ]:t5}],[0,{[yQ]:M4}],[0,{[yQ]:oV}],[0,{[yQ]:rV}]]],nm6=[3,BA,qj6,0,[M4,Fv6],[0,()=>Mc6]],am6=[3,BA,Rj6,0,[lb1],[0]],om6=[3,BA,_j6,0,[LT],[()=>SD]],vbQ=[3,BA,x_6,0,[gS6,pv6,Lk6,fx6,Zx6,Xb6],[()=>of6,()=>bbQ,2,2,2,2]],GrA=[3,BA,lj6,0,[AYA,eNA,BG,mkQ,sV,LW,Ob1,Vx6,Hx6],[0,0,0,0,5,5,()=>Cf1,0,0]],rm6=[3,BA,ij6,0,[AYA,eNA,BG,mkQ,sV,LW],[0,0,0,0,5,5]],sm6=[3,BA,Tj6,8,[vb1,kY,$7],[0,0,0]],tm6=[3,BA,Sj6,0,[Gk6,Qk6],[0,[()=>ac6,0]]],em6=[3,BA,xj6,0,[tV,BG,RH,okQ,sb1,fkQ,ab1,rkQ,tb1,vi,dkQ],[0,0,5,0,0,0,0,0,()=>SD,0,0]],Ad6=[3,BA,yj6,0,[tV,foA,Hq,BG,gkQ,nM,RH,QYA,RS6,jvQ,rNA],[0,0,0,0,()=>fbQ,5,5,5,0,0,0]],Qd6=[3,BA,gj6,0,[tV,Hq,BG,nM,RH,QYA,ZkQ,Pb1],[0,0,0,5,5,5,0,0]],Bd6=[3,BA,uj6,0,[tv6,mg,hkQ],[0,0,0]],Gd6=[3,BA,mj6,0,[mg,av6,hkQ],[0,0,0]],Zd6=[3,BA,dj6,0,[tV,Hq,aw,aX,wT,BG,Eq,pkQ,nM,QYA,Tb1,bi,I0A,rb1,VkQ],[0,0,0,0,0,0,[()=>UbQ,0],5,5,5,()=>$f1,()=>Uf1,()=>hi,1,5]],Yd6=[3,BA,oj6,0,[sy6,MkQ,wk6],[0,0,()=>cd6]],Jd6=[3,BA,rj6,0,[wv6],[()=>Ed6]],Wf1=[3,BA,sj6,0,[mg],[0]],Xd6=[3,BA,ej6,0,[$y6],[0]],Id6=[3,BA,DT6,0,[jv6],[()=>_c6]],Wd6=[3,BA,JT6,0,[cb1,ib1,$7,sV,LW,QwA,BYA,Rb1,BG,kY],[0,()=>Df1,[()=>Xf1,0],5,5,0,()=>Ef1,()=>ZrA,0,0]],ZrA=[3,BA,IT6,0,[eV],[0]],kbQ=[3,BA,KT6,0,[kk6],[[()=>fb6,0]]],Dd6=[3,BA,GT6,0,[pb1,mb1,eV,hvQ,tvQ,gb1,uvQ,BG,Nb1,OvQ,RH,nM],[0,0,0,0,0,1,1,0,0,5,5,5]],Kd6=[3,BA,QT6,0,[CkQ],[()=>vbQ]],Vd6=[3,BA,BT6,0,[],[]],Fd6=[3,BA,FT6,0,[svQ],[21]],Hd6=[3,BA,HT6,0,[],[]],Ed6=[3,BA,ET6,0,[kY],[0]],zd6=[3,BA,kT6,0,[Lb1,W0A],[0,()=>ic6]],Cd6=[3,BA,PT6,0,[Yx6,eNA],[[0,1],0]],$d6=[3,BA,ST6,0,[loA],[()=>GrA]],Ud6=[3,BA,MT6,0,[Mb1,ub1],[[()=>boA,0],[()=>boA,0]]],qd6=[-3,BA,OT6,{[Ev]:yi,[zv]:400},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(qd6,FvQ);var Nd6=[-3,BA,yT6,{[Ev]:yi,[zv]:404},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(Nd6,XvQ);var wd6=[3,BA,zT6,0,[kY,Zy6,Fx6],[0,[()=>Xm6,0],[()=>jg6,0]]],Ld6=[3,BA,$T6,0,[HkQ,Jy6],[0,[()=>ybQ,0]]],Df1=[3,BA,NT6,0,[gv6],[1]],bbQ=[3,BA,pT6,0,[US6,Iy6],[0,0]],Od6=[3,BA,lT6,0,[mg],[0]],Md6=[3,BA,BP6,0,[Zb6],[0]],Rd6=[3,BA,tT6,0,[gx6,ox6,Kx6,Xy6,Hb6],[1,0,0,0,()=>hi]],_d6=[-3,BA,GP6,{[Ev]:yi,[zv]:400},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(_d6,KvQ);var jd6=[-3,BA,YP6,{[Ev]:ckQ,[zv]:503},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(jd6,HvQ);var Td6=[3,BA,hT6,0,[u3,Ub1,aX,cv6],[[0,1],[0,1],[0,{[yx6]:Ub6,[rx6]:1}],[()=>Ff6,16]]],Pd6=[3,BA,gT6,0,[u3,Ez],[0,0]],Sd6=[3,BA,mT6,0,[u3,Ez,$k6,aX],[[0,1],[0,1],64,[0,4]]],xd6=[3,BA,dT6,0,[u3],[0]],fbQ=[3,BA,cT6,0,[Jb6,nS6,Ok6],[()=>Wp6,()=>fh6,()=>ad6]],yd6=[3,BA,nT6,0,[ug],[[()=>BwA,1]]],vd6=[3,BA,aT6,0,[],[]],kd6=[3,BA,rT6,0,[ug],[[0,1]]],bd6=[3,BA,sT6,0,[],[]],fd6=[3,BA,AP6,0,[ug],[[0,1]]],hd6=[3,BA,QP6,0,[],[]],gd6=[3,BA,ZP6,0,[hv6],[0]],ud6=[3,BA,JP6,0,[vb1,W0A],[0,0]],md6=[3,BA,$P6,0,[lb1,LT],[0,()=>SD]],dd6=[3,BA,UP6,0,[],[]],pd6=[3,BA,HP6,0,[Sk6,xy6],[0,1]],cd6=[3,BA,XP6,0,[nk6,Fy6,Wk6,Kb6],[()=>Id6,()=>Wm6,()=>gd6,()=>Fp6]],ld6=[3,BA,KP6,0,[dk6,bk6,fy6,Xk6],[1,1,1,64]],id6=[-3,BA,DP6,{[Ev]:yi,[zv]:429},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(id6,IvQ);var nd6=[-3,BA,EP6,{[Ev]:yi,[zv]:400},[Eq,fv6],[0,0]];pM.TypeRegistry.for(BA).registerError(nd6,VvQ);var Kf1=[3,BA,IP6,0,[mg,mx6],[0,[()=>Jm6,0]]],ad6=[3,BA,WP6,0,[BG,RH,nM],[0,5,5]],hbQ=[3,BA,FP6,0,[Tk6],[1]],od6=[3,BA,gP6,0,[lb1,jk6],[0,64]],rd6=[3,BA,uP6,0,[],[]],sd6=[3,BA,wP6,0,[u3,Ez,zb1,zy6],[[0,1],[0,1],[()=>Hf1,0],0]],td6=[3,BA,LP6,0,[u3,Ez,UvQ,LW],[0,0,0,5]],ed6=[3,BA,OP6,0,[u3,AwA,oG,$7],[[0,1],[()=>YwA,0],[()=>fi,0],[()=>GYA,0]]],Ap6=[3,BA,MP6,0,[u3,oG,hoA,LW],[0,[()=>fi,0],0,5]],Qp6=[3,BA,_P6,0,[u3,X0A,moA,noA,tNA,goA,oNA,aX],[[0,1],[0,1],[()=>roA,0],[()=>soA,0],5,0,1,[0,4]]],Bp6=[3,BA,jP6,0,[u3,X0A],[0,0]],Gp6=[3,BA,PP6,0,[sZA,oG,$7,skQ,TvQ,JbQ,ukQ,MvQ,$vQ,SvQ,Cb1,$b1,kb1],[[0,1],[()=>toA,0],[()=>GwA,0],[()=>PbQ,0],[()=>MbQ,0],[()=>SbQ,0],()=>TbQ,[()=>RbQ,0],()=>LbQ,()=>_bQ,[()=>tZA,0],[()=>tZA,0],0]],Zp6=[3,BA,SP6,0,[sNA,_b1,Cv,LW],[0,0,0,5]],Yp6=[3,BA,yP6,0,[AYA,Ob1,aX],[[0,1],()=>Cf1,[0,4]]],Jp6=[3,BA,vP6,0,[loA],[()=>GrA]],Xp6=[3,BA,bP6,0,[db1,aS6,iS6],[[0,1],0,0]],Ip6=[3,BA,fP6,0,[],[]],Vf1=[3,BA,cP6,0,[Vb6],[()=>Tc6]],Wp6=[3,BA,pP6,0,[BG,RH,nM],[0,5,5]],Dp6=[-3,BA,lP6,{[Ev]:yi,[zv]:400},[Eq],[0]];pM.TypeRegistry.for(BA).registerError(Dp6,WvQ);var Kp6=[3,BA,mP6,0,[mg],[0]],Vp6=[3,BA,iP6,0,[Ib6],[1]],Fp6=[3,BA,sP6,0,[QS6],[0]],Hp6=[3,BA,aP6,0,[qy6,ly6,Oy6],[()=>Ep6,1,[()=>tm6,0]]],Ep6=[3,BA,oP6,0,[eV,Hb1],[0,143]],zp6=[3,BA,rP6,0,[kY,qS6],[0,[()=>Hp6,0]]],hi=[3,BA,dP6,0,[rv6,ov6],[64,64]],Cp6=[-3,lkQ,"BedrockServiceException",0,[],[]];pM.TypeRegistry.for(lkQ).registerError(Cp6,cM);var $p6=[1,BA,GU6,0,[()=>Pc6,0]],Up6=[1,BA,JU6,0,[()=>voA,0]],qp6=[1,BA,IU6,0,[()=>Sc6,0]],QvQ=[1,BA,VU6,0,[()=>pb6,0]],Ff1=[1,BA,zU6,0,()=>ib6],Np6=[1,BA,wU6,0,[()=>ZwA,0]],wp6=[1,BA,OU6,0,[()=>rb6,0]],aNA=[1,BA,jU6,0,[()=>tb6,0]],Hf1=[1,BA,yU6,0,[()=>lbQ,0]],Lp6=[1,BA,aU6,0,[()=>If6,0]],Op6=[1,BA,tU6,0,[()=>Wf6,0]],Mp6=[1,BA,Aq6,0,()=>Df6],Rp6=[1,BA,Bq6,0,[()=>Kf6,0]],_p6=[1,BA,Jq6,0,()=>Hf6],jp6=[1,BA,Hq6,0,[()=>ArA,0]],Tp6=[1,BA,Nq6,0,[()=>QrA,0]],Pp6=[1,BA,Oq6,0,[()=>Hv,0]],gbQ=[1,BA,_q6,0,[()=>zf6,0]],Sp6=[1,BA,Tq6,0,[()=>Cf6,0]],xp6=[1,BA,vq6,0,[()=>BrA,0]],ubQ=[1,BA,fq6,0,[()=>Y0A,0]],yp6=[1,BA,Cq6,0,[()=>Mf6,0]],vp6=[1,BA,uq6,0,[()=>Rf6,0]],kp6=[1,BA,rq6,0,[()=>Sf6,0]],bp6=[1,BA,tq6,0,[()=>If1,0]],fp6=[1,BA,AN6,0,[()=>qbQ,0]],hp6=[1,BA,ZN6,0,[()=>bc6,0]],gp6=[1,BA,UN6,0,[()=>mf6,0]],up6=[1,BA,NN6,0,[()=>df6,0]],mp6=[1,BA,MN6,0,()=>lf6],dp6=[1,BA,Iw6,0,()=>Sh6],pp6=[1,BA,Cw6,0,()=>vh6],cp6=[1,BA,Tw6,0,()=>kh6],mbQ=[1,BA,hL6,0,[()=>zg6,0]],lp6=[1,BA,cL6,0,[()=>BwA,0]],ip6=[1,BA,tL6,0,[()=>FbQ,0]],np6=[1,BA,lL6,0,[()=>gc6,0]],ap6=[1,BA,IO6,0,()=>Lg6],op6=[1,BA,DO6,0,[()=>Rg6,0]],BvQ=[1,BA,FO6,8,()=>Tg6],rp6=[1,BA,CO6,0,()=>Sg6],sp6=[1,BA,rO6,0,[()=>ju6,0]],tp6=[1,BA,iO6,0,[()=>Tu6,0]],ep6=[1,BA,QM6,0,[()=>yu6,0]],Ac6=[1,BA,AM6,0,[()=>vu6,0]],Qc6=[1,BA,RM6,0,[()=>Pb6,0]],Bc6=[1,BA,GR6,0,[()=>bu6,0]],Gc6=[1,BA,ZR6,0,[()=>fu6,0]],koA=[1,BA,YR6,0,[()=>Sb6,0]],Zc6=[1,BA,DR6,0,()=>hu6],Yc6=[1,BA,WR6,0,()=>gu6],Jc6=[1,BA,qR6,0,()=>uu6],Xc6=[1,BA,UR6,0,()=>mu6],Ic6=[1,BA,MR6,0,[()=>xb6,0]],Wc6=[1,BA,RR6,0,[()=>pu6,0]],dbQ=[1,BA,yR6,0,[()=>yb6,0]],Dc6=[1,BA,uR6,0,[()=>cu6,0]],Kc6=[1,BA,PR6,0,[()=>lu6,0]],Vc6=[1,BA,rR6,0,[()=>ou6,0]],Fc6=[1,BA,nR6,0,[()=>ru6,0]],Hc6=[1,BA,eR6,0,[()=>eu6,0]],Ec6=[1,BA,X_6,0,()=>Bm6],pbQ=[1,BA,K_6,0,()=>Gm6],zc6=[1,BA,F_6,0,[()=>Zm6,0]],Cc6=[1,BA,nj6,0,()=>rm6],$c6=[1,BA,Pj6,0,[()=>sm6,0]],Uc6=[1,BA,vj6,0,()=>em6],qc6=[1,BA,kj6,0,()=>Ad6],Nc6=[1,BA,pj6,0,()=>Qd6],wc6=[1,BA,cj6,0,[()=>Zd6,0]],Lc6=[1,BA,tj6,0,()=>Yd6],Oc6=[1,BA,XT6,0,[()=>Wd6,0]],Ef1=[1,BA,WT6,0,()=>ZrA],Mc6=[1,BA,ZT6,0,()=>Dd6],Rc6=[1,BA,UT6,0,[()=>lc6,0]],_c6=[1,BA,qT6,0,()=>Vg6],jc6=[1,BA,vT6,0,()=>zd6],GvQ=[1,BA,_T6,0,[()=>Ud6,0]],ZvQ=[1,BA,LT6,0,[()=>abQ,0]],SD=[1,BA,VP6,0,()=>ud6],cbQ=[1,BA,nP6,0,()=>Vp6],Tc6=[1,BA,tP6,0,()=>Kp6],boA=[2,BA,jT6,8,0,0],Pc6=[3,BA,YU6,0,[jS6],[[()=>xh6,0]]],Sc6=[3,BA,XU6,0,[Fb6,Ay6,Vk6,tx6,zk6,Nk6,iy6],[[()=>sb6,0],[()=>cb6,0],[()=>nb6,0],[()=>db6,0],[()=>ob6,0],()=>ab6,()=>lb6]],lbQ=[3,BA,PU6,0,[qvQ,QbQ,pvQ,NvQ,BbQ,cvQ,CvQ,AbQ,dvQ,GS6,ok6,rk6,bx6],[[()=>Bf6,0],[()=>bf6,0],[()=>qf6,0],[()=>Yf6,0],[()=>gf6,0],[()=>Lf6,0],[()=>eb6,0],[()=>vf6,0],()=>$f6,[()=>Af6,0],[()=>xf6,0],[()=>yf6,0],[()=>jf6,0]]],xc6=[3,BA,oU6,0,[AwA,Nv6,HS6,BkQ],[[()=>YwA,0],[()=>Ef6,0],[()=>Xf6,0],[()=>_f6,0]]],yc6=[3,BA,sU6,0,[Uv6,dy6],[()=>Tf6,[()=>kc6,0]]],vc6=[3,BA,Iq6,0,[Xv6,Jv6,Yv6],[[()=>BrA,0],[()=>QrA,0],[()=>ArA,0]]],kc6=[3,BA,pq6,0,[qvQ,QbQ,pvQ,NvQ,BbQ,cvQ,CvQ,AbQ,dvQ],[[()=>Gf6,0],[()=>ff6,0],[()=>Nf6,0],[()=>Jf6,0],[()=>uf6,0],[()=>Of6,0],[()=>Qf6,0],[()=>kf6,0],()=>Uf6]],bc6=[3,BA,GN6,0,[WS6,Qb6,sS6],[[()=>Zf6,0],[()=>hf6,0],()=>wf6]],fc6=[3,BA,HN6,0,[Bx6,Hv6],[[()=>Rp6,0],[()=>Vf6,0]]],zf1=[3,BA,hN6,0,[cS6],[()=>Fg6]],Cf1=[3,BA,yL6,0,[Bk6],[()=>Rd6]],ibQ=[3,BA,vL6,0,[KS6,xx6],[[()=>ub6,0],[()=>tu6,0]]],hc6=[3,BA,bL6,0,[mg],[0]],nbQ=[3,BA,uL6,0,[BYA,Tv6],[[()=>np6,0],[()=>Rc6,0]]],gc6=[3,BA,nL6,0,[ES6,Kv6],[[()=>Hg6,0],()=>Ug6]],uc6=[3,BA,GO6,0,[mv6,Ov6],[()=>Ng6,()=>qg6]],mc6=[3,BA,aL6,0,[wvQ],[()=>mp6]],dc6=[3,BA,D_6,0,[LS6],[0]],pc6=[3,BA,Y_6,0,[mg],[0]],cc6=[3,BA,E_6,0,[yv6,Lv6],[[()=>Ld6,0],[()=>wd6,0]]],YrA=[3,BA,bj6,0,[iv6],[()=>Od6]],$f1=[3,BA,fj6,0,[sv6],[()=>Bd6]],Uf1=[3,BA,hj6,0,[Zk6],[()=>Gd6]],lc6=[3,BA,CT6,0,[Yy6,zv6],[[()=>cc6,0],()=>uc6]],ic6=[3,BA,bT6,0,[Dk6,Ox6],[0,1]],nc6=[3,BA,RT6,0,[Mb1,ub1,EvQ,LkQ],[[()=>boA,0],[()=>boA,0],[()=>GvQ,0],[()=>GvQ,0]]],ac6=[3,BA,xT6,0,[Lx6,wx6],[[()=>BvQ,0],[()=>BvQ,0]]],abQ=[3,BA,wT6,8,[Mb1,ub1,Px6,Sx6,Ey6,Hy6,ex6,py6,Kk6,Dy6,lv6,EvQ,LkQ],[()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,()=>NT,[()=>ZvQ,0],[()=>ZvQ,0]]],oc6=[9,BA,CN6,{[EB]:["POST","/evaluation-jobs/batch-delete",202]},()=>pf6,()=>cf6],rc6=[9,BA,_N6,{[EB]:["POST","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/cancel",202]},()=>nf6,()=>af6],sc6=[9,BA,RN6,{[EB]:["POST","/automated-reasoning-policies",200]},()=>sf6,()=>tf6],tc6=[9,BA,xN6,{[EB]:["POST","/automated-reasoning-policies/{policyArn}/test-cases",200]},()=>ef6,()=>Ah6],ec6=[9,BA,kN6,{[EB]:["POST","/automated-reasoning-policies/{policyArn}/versions",200]},()=>Qh6,()=>Bh6],Al6=[9,BA,gN6,{[EB]:["POST","/custom-models/create-custom-model",202]},()=>Yh6,()=>Jh6],Ql6=[9,BA,uN6,{[EB]:["POST","/model-customization/custom-model-deployments",202]},()=>Gh6,()=>Zh6],Bl6=[9,BA,iN6,{[EB]:["POST","/evaluation-jobs",202]},()=>Xh6,()=>Ih6],Gl6=[9,BA,oN6,{[EB]:["POST","/create-foundation-model-agreement",202]},()=>Wh6,()=>Dh6],Zl6=[9,BA,tN6,{[EB]:["POST","/guardrails",202]},()=>Kh6,()=>Vh6],Yl6=[9,BA,Qw6,{[EB]:["POST","/guardrails/{guardrailIdentifier}",202]},()=>Fh6,()=>Hh6],Jl6=[9,BA,Zw6,{[EB]:["POST","/inference-profiles",201]},()=>Eh6,()=>zh6],Xl6=[9,BA,Mw6,{[EB]:["POST","/marketplace-model/endpoints",200]},()=>Ch6,()=>$h6],Il6=[9,BA,Ww6,{[EB]:["POST","/model-copy-jobs",201]},()=>Uh6,()=>qh6],Wl6=[9,BA,Hw6,{[EB]:["POST","/model-customization-jobs",201]},()=>Nh6,()=>wh6],Dl6=[9,BA,Uw6,{[EB]:["POST","/model-import-jobs",201]},()=>Lh6,()=>Oh6],Kl6=[9,BA,Ow6,{[EB]:["POST","/model-invocation-job",200]},()=>Mh6,()=>Rh6],Vl6=[9,BA,vw6,{[EB]:["POST","/prompt-routers",200]},()=>_h6,()=>jh6],Fl6=[9,BA,Sw6,{[EB]:["POST","/provisioned-model-throughput",201]},()=>Th6,()=>Ph6],Hl6=[9,BA,hw6,{[EB]:["DELETE","/automated-reasoning-policies/{policyArn}",202]},()=>uh6,()=>mh6],El6=[9,BA,gw6,{[EB]:["DELETE","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}",202]},()=>hh6,()=>gh6],zl6=[9,BA,cw6,{[EB]:["DELETE","/automated-reasoning-policies/{policyArn}/test-cases/{testCaseId}",202]},()=>dh6,()=>ph6],Cl6=[9,BA,aw6,{[EB]:["DELETE","/custom-models/{modelIdentifier}",200]},()=>ih6,()=>nh6],$l6=[9,BA,ow6,{[EB]:["DELETE","/model-customization/custom-model-deployments/{customModelDeploymentIdentifier}",200]},()=>ch6,()=>lh6],Ul6=[9,BA,AL6,{[EB]:["POST","/delete-foundation-model-agreement",202]},()=>ah6,()=>oh6],ql6=[9,BA,GL6,{[EB]:["DELETE","/guardrails/{guardrailIdentifier}",202]},()=>rh6,()=>sh6],Nl6=[9,BA,JL6,{[EB]:["DELETE","/imported-models/{modelIdentifier}",200]},()=>th6,()=>eh6],wl6=[9,BA,WL6,{[EB]:["DELETE","/inference-profiles/{inferenceProfileIdentifier}",200]},()=>Ag6,()=>Qg6],Ll6=[9,BA,EL6,{[EB]:["DELETE","/marketplace-model/endpoints/{endpointArn}",200]},()=>Bg6,()=>Gg6],Ol6=[9,BA,VL6,{[EB]:["DELETE","/logging/modelinvocations",200]},()=>Zg6,()=>Yg6],Ml6=[9,BA,jL6,{[EB]:["DELETE","/prompt-routers/{promptRouterArn}",200]},()=>Jg6,()=>Xg6],Rl6=[9,BA,wL6,{[EB]:["DELETE","/provisioned-model-throughput/{provisionedModelId}",200]},()=>Ig6,()=>Wg6],_l6=[9,BA,qL6,{[EB]:["DELETE","/marketplace-model/endpoints/{endpointArn}/registration",200]},()=>Dg6,()=>Kg6],jl6=[9,BA,TL6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/export",200]},()=>Og6,()=>Mg6],Tl6=[9,BA,uO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}",200]},()=>mg6,()=>dg6],Pl6=[9,BA,UO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/annotations",200]},()=>yg6,()=>vg6],Sl6=[9,BA,wO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}",200]},()=>kg6,()=>bg6],xl6=[9,BA,OO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/result-assets",200]},()=>fg6,()=>hg6],yl6=[9,BA,TO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/scenarios",200]},()=>gg6,()=>ug6],vl6=[9,BA,vO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/test-cases/{testCaseId}",200]},()=>pg6,()=>cg6],kl6=[9,BA,fO6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/test-cases/{testCaseId}/test-results",200]},()=>lg6,()=>ig6],bl6=[9,BA,ZM6,{[EB]:["GET","/custom-models/{modelIdentifier}",200]},()=>og6,()=>rg6],fl6=[9,BA,YM6,{[EB]:["GET","/model-customization/custom-model-deployments/{customModelDeploymentIdentifier}",200]},()=>ng6,()=>ag6],hl6=[9,BA,zM6,{[EB]:["GET","/evaluation-jobs/{jobIdentifier}",200]},()=>sg6,()=>tg6],gl6=[9,BA,UM6,{[EB]:["GET","/foundation-models/{modelIdentifier}",200]},()=>Qu6,()=>Bu6],ul6=[9,BA,qM6,{[EB]:["GET","/foundation-model-availability/{modelId}",200]},()=>eg6,()=>Au6],ml6=[9,BA,_M6,{[EB]:["GET","/guardrails/{guardrailIdentifier}",200]},()=>Gu6,()=>Zu6],dl6=[9,BA,PM6,{[EB]:["GET","/imported-models/{modelIdentifier}",200]},()=>Yu6,()=>Ju6],pl6=[9,BA,yM6,{[EB]:["GET","/inference-profiles/{inferenceProfileIdentifier}",200]},()=>Xu6,()=>Iu6],cl6=[9,BA,tM6,{[EB]:["GET","/marketplace-model/endpoints/{endpointArn}",200]},()=>Wu6,()=>Du6],ll6=[9,BA,fM6,{[EB]:["GET","/model-copy-jobs/{jobArn}",200]},()=>Ku6,()=>Vu6],il6=[9,BA,dM6,{[EB]:["GET","/model-customization-jobs/{jobIdentifier}",200]},()=>Fu6,()=>Hu6],nl6=[9,BA,pM6,{[EB]:["GET","/model-import-jobs/{jobIdentifier}",200]},()=>Eu6,()=>zu6],al6=[9,BA,aM6,{[EB]:["GET","/model-invocation-job/{jobIdentifier}",200]},()=>Cu6,()=>$u6],ol6=[9,BA,oM6,{[EB]:["GET","/logging/modelinvocations",200]},()=>Uu6,()=>qu6],rl6=[9,BA,HR6,{[EB]:["GET","/prompt-routers/{promptRouterArn}",200]},()=>Nu6,()=>wu6],sl6=[9,BA,KR6,{[EB]:["GET","/provisioned-model-throughput/{provisionedModelId}",200]},()=>Lu6,()=>Ou6],tl6=[9,BA,mR6,{[EB]:["GET","/use-case-for-model-access",200]},()=>Mu6,()=>Ru6],el6=[9,BA,q_6,{[EB]:["GET","/automated-reasoning-policies",200]},()=>Dm6,()=>Km6],Ai6=[9,BA,N_6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows",200]},()=>Vm6,()=>Fm6],Qi6=[9,BA,R_6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/test-cases",200]},()=>Hm6,()=>Em6],Bi6=[9,BA,T_6,{[EB]:["GET","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/test-results",200]},()=>zm6,()=>Cm6],Gi6=[9,BA,v_6,{[EB]:["GET","/model-customization/custom-model-deployments",200]},()=>$m6,()=>Um6],Zi6=[9,BA,y_6,{[EB]:["GET","/custom-models",200]},()=>qm6,()=>Nm6],Yi6=[9,BA,g_6,{[EB]:["GET","/evaluation-jobs",200]},()=>wm6,()=>Lm6],Ji6=[9,BA,p_6,{[EB]:["GET","/list-foundation-model-agreement-offers/{modelId}",200]},()=>Om6,()=>Mm6],Xi6=[9,BA,d_6,{[EB]:["GET","/foundation-models",200]},()=>Rm6,()=>_m6],Ii6=[9,BA,a_6,{[EB]:["GET","/guardrails",200]},()=>jm6,()=>Tm6],Wi6=[9,BA,s_6,{[EB]:["GET","/imported-models",200]},()=>Pm6,()=>Sm6],Di6=[9,BA,Aj6,{[EB]:["GET","/inference-profiles",200]},()=>xm6,()=>ym6],Ki6=[9,BA,Ej6,{[EB]:["GET","/marketplace-model/endpoints",200]},()=>vm6,()=>km6],Vi6=[9,BA,Gj6,{[EB]:["GET","/model-copy-jobs",200]},()=>bm6,()=>fm6],Fi6=[9,BA,Ij6,{[EB]:["GET","/model-customization-jobs",200]},()=>hm6,()=>gm6],Hi6=[9,BA,Wj6,{[EB]:["GET","/model-import-jobs",200]},()=>um6,()=>mm6],Ei6=[9,BA,Hj6,{[EB]:["GET","/model-invocation-jobs",200]},()=>dm6,()=>pm6],zi6=[9,BA,Nj6,{[EB]:["GET","/prompt-routers",200]},()=>cm6,()=>lm6],Ci6=[9,BA,$j6,{[EB]:["GET","/provisioned-model-throughputs",200]},()=>im6,()=>nm6],$i6=[9,BA,Mj6,{[EB]:["POST","/listTagsForResource",200]},()=>am6,()=>om6],Ui6=[9,BA,AT6,{[EB]:["PUT","/logging/modelinvocations",200]},()=>Kd6,()=>Vd6],qi6=[9,BA,VT6,{[EB]:["POST","/use-case-for-model-access",201]},()=>Fd6,()=>Hd6],Ni6=[9,BA,TT6,{[EB]:["POST","/marketplace-model/endpoints/{endpointIdentifier}/registration",200]},()=>Cd6,()=>$d6],wi6=[9,BA,fT6,{[EB]:["POST","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowType}/start",200]},()=>Td6,()=>Pd6],Li6=[9,BA,uT6,{[EB]:["POST","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/test-workflows",200]},()=>Sd6,()=>xd6],Oi6=[9,BA,iT6,{[EB]:["POST","/evaluation-job/{jobIdentifier}/stop",200]},()=>yd6,()=>vd6],Mi6=[9,BA,oT6,{[EB]:["POST","/model-customization-jobs/{jobIdentifier}/stop",200]},()=>kd6,()=>bd6],Ri6=[9,BA,eT6,{[EB]:["POST","/model-invocation-job/{jobIdentifier}/stop",200]},()=>fd6,()=>hd6],_i6=[9,BA,CP6,{[EB]:["POST","/tagResource",200]},()=>md6,()=>dd6],ji6=[9,BA,hP6,{[EB]:["POST","/untagResource",200]},()=>od6,()=>rd6],Ti6=[9,BA,qP6,{[EB]:["PATCH","/automated-reasoning-policies/{policyArn}",200]},()=>ed6,()=>Ap6],Pi6=[9,BA,NP6,{[EB]:["PATCH","/automated-reasoning-policies/{policyArn}/build-workflows/{buildWorkflowId}/annotations",200]},()=>sd6,()=>td6],Si6=[9,BA,RP6,{[EB]:["PATCH","/automated-reasoning-policies/{policyArn}/test-cases/{testCaseId}",200]},()=>Qp6,()=>Bp6],xi6=[9,BA,TP6,{[EB]:["PUT","/guardrails/{guardrailIdentifier}",202]},()=>Gp6,()=>Zp6],yi6=[9,BA,xP6,{[EB]:["PATCH","/marketplace-model/endpoints/{endpointArn}",200]},()=>Yp6,()=>Jp6],vi6=[9,BA,kP6,{[EB]:["PATCH","/provisioned-model-throughput/{provisionedModelId}",200]},()=>Xp6,()=>Ip6];class qf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","BatchDeleteEvaluationJob",{}).n("BedrockClient","BatchDeleteEvaluationJobCommand").sc(oc6).build(){}class Nf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CancelAutomatedReasoningPolicyBuildWorkflow",{}).n("BedrockClient","CancelAutomatedReasoningPolicyBuildWorkflowCommand").sc(rc6).build(){}class wf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateAutomatedReasoningPolicy",{}).n("BedrockClient","CreateAutomatedReasoningPolicyCommand").sc(sc6).build(){}class Lf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateAutomatedReasoningPolicyTestCase",{}).n("BedrockClient","CreateAutomatedReasoningPolicyTestCaseCommand").sc(tc6).build(){}class Of1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateAutomatedReasoningPolicyVersion",{}).n("BedrockClient","CreateAutomatedReasoningPolicyVersionCommand").sc(ec6).build(){}class Mf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateCustomModel",{}).n("BedrockClient","CreateCustomModelCommand").sc(Al6).build(){}class Rf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateCustomModelDeployment",{}).n("BedrockClient","CreateCustomModelDeploymentCommand").sc(Ql6).build(){}class _f1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateEvaluationJob",{}).n("BedrockClient","CreateEvaluationJobCommand").sc(Bl6).build(){}class jf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateFoundationModelAgreement",{}).n("BedrockClient","CreateFoundationModelAgreementCommand").sc(Gl6).build(){}class Tf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateGuardrail",{}).n("BedrockClient","CreateGuardrailCommand").sc(Zl6).build(){}class Pf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateGuardrailVersion",{}).n("BedrockClient","CreateGuardrailVersionCommand").sc(Yl6).build(){}class Sf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateInferenceProfile",{}).n("BedrockClient","CreateInferenceProfileCommand").sc(Jl6).build(){}class xf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateMarketplaceModelEndpoint",{}).n("BedrockClient","CreateMarketplaceModelEndpointCommand").sc(Xl6).build(){}class yf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateModelCopyJob",{}).n("BedrockClient","CreateModelCopyJobCommand").sc(Il6).build(){}class vf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateModelCustomizationJob",{}).n("BedrockClient","CreateModelCustomizationJobCommand").sc(Wl6).build(){}class kf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateModelImportJob",{}).n("BedrockClient","CreateModelImportJobCommand").sc(Dl6).build(){}class bf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateModelInvocationJob",{}).n("BedrockClient","CreateModelInvocationJobCommand").sc(Kl6).build(){}class ff1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreatePromptRouter",{}).n("BedrockClient","CreatePromptRouterCommand").sc(Vl6).build(){}class hf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","CreateProvisionedModelThroughput",{}).n("BedrockClient","CreateProvisionedModelThroughputCommand").sc(Fl6).build(){}class gf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteAutomatedReasoningPolicyBuildWorkflow",{}).n("BedrockClient","DeleteAutomatedReasoningPolicyBuildWorkflowCommand").sc(El6).build(){}class uf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteAutomatedReasoningPolicy",{}).n("BedrockClient","DeleteAutomatedReasoningPolicyCommand").sc(Hl6).build(){}class mf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteAutomatedReasoningPolicyTestCase",{}).n("BedrockClient","DeleteAutomatedReasoningPolicyTestCaseCommand").sc(zl6).build(){}class df1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteCustomModel",{}).n("BedrockClient","DeleteCustomModelCommand").sc(Cl6).build(){}class pf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteCustomModelDeployment",{}).n("BedrockClient","DeleteCustomModelDeploymentCommand").sc($l6).build(){}class cf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteFoundationModelAgreement",{}).n("BedrockClient","DeleteFoundationModelAgreementCommand").sc(Ul6).build(){}class lf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteGuardrail",{}).n("BedrockClient","DeleteGuardrailCommand").sc(ql6).build(){}class if1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteImportedModel",{}).n("BedrockClient","DeleteImportedModelCommand").sc(Nl6).build(){}class nf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteInferenceProfile",{}).n("BedrockClient","DeleteInferenceProfileCommand").sc(wl6).build(){}class af1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteMarketplaceModelEndpoint",{}).n("BedrockClient","DeleteMarketplaceModelEndpointCommand").sc(Ll6).build(){}class of1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteModelInvocationLoggingConfiguration",{}).n("BedrockClient","DeleteModelInvocationLoggingConfigurationCommand").sc(Ol6).build(){}class rf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeletePromptRouter",{}).n("BedrockClient","DeletePromptRouterCommand").sc(Ml6).build(){}class sf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeleteProvisionedModelThroughput",{}).n("BedrockClient","DeleteProvisionedModelThroughputCommand").sc(Rl6).build(){}class tf1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","DeregisterMarketplaceModelEndpoint",{}).n("BedrockClient","DeregisterMarketplaceModelEndpointCommand").sc(_l6).build(){}class ef1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ExportAutomatedReasoningPolicyVersion",{}).n("BedrockClient","ExportAutomatedReasoningPolicyVersionCommand").sc(jl6).build(){}class Ah1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicyAnnotations",{}).n("BedrockClient","GetAutomatedReasoningPolicyAnnotationsCommand").sc(Pl6).build(){}class Qh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicyBuildWorkflow",{}).n("BedrockClient","GetAutomatedReasoningPolicyBuildWorkflowCommand").sc(Sl6).build(){}class Bh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicyBuildWorkflowResultAssets",{}).n("BedrockClient","GetAutomatedReasoningPolicyBuildWorkflowResultAssetsCommand").sc(xl6).build(){}class Gh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicy",{}).n("BedrockClient","GetAutomatedReasoningPolicyCommand").sc(Tl6).build(){}class Zh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicyNextScenario",{}).n("BedrockClient","GetAutomatedReasoningPolicyNextScenarioCommand").sc(yl6).build(){}class Yh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicyTestCase",{}).n("BedrockClient","GetAutomatedReasoningPolicyTestCaseCommand").sc(vl6).build(){}class Jh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetAutomatedReasoningPolicyTestResult",{}).n("BedrockClient","GetAutomatedReasoningPolicyTestResultCommand").sc(kl6).build(){}class Xh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetCustomModel",{}).n("BedrockClient","GetCustomModelCommand").sc(bl6).build(){}class Ih1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetCustomModelDeployment",{}).n("BedrockClient","GetCustomModelDeploymentCommand").sc(fl6).build(){}class Wh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetEvaluationJob",{}).n("BedrockClient","GetEvaluationJobCommand").sc(hl6).build(){}class Dh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetFoundationModelAvailability",{}).n("BedrockClient","GetFoundationModelAvailabilityCommand").sc(ul6).build(){}class Kh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetFoundationModel",{}).n("BedrockClient","GetFoundationModelCommand").sc(gl6).build(){}class Vh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetGuardrail",{}).n("BedrockClient","GetGuardrailCommand").sc(ml6).build(){}class Fh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetImportedModel",{}).n("BedrockClient","GetImportedModelCommand").sc(dl6).build(){}class Hh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetInferenceProfile",{}).n("BedrockClient","GetInferenceProfileCommand").sc(pl6).build(){}class Eh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetMarketplaceModelEndpoint",{}).n("BedrockClient","GetMarketplaceModelEndpointCommand").sc(cl6).build(){}class zh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetModelCopyJob",{}).n("BedrockClient","GetModelCopyJobCommand").sc(ll6).build(){}class Ch1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetModelCustomizationJob",{}).n("BedrockClient","GetModelCustomizationJobCommand").sc(il6).build(){}class $h1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetModelImportJob",{}).n("BedrockClient","GetModelImportJobCommand").sc(nl6).build(){}class Uh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetModelInvocationJob",{}).n("BedrockClient","GetModelInvocationJobCommand").sc(al6).build(){}class qh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetModelInvocationLoggingConfiguration",{}).n("BedrockClient","GetModelInvocationLoggingConfigurationCommand").sc(ol6).build(){}class Nh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetPromptRouter",{}).n("BedrockClient","GetPromptRouterCommand").sc(rl6).build(){}class wh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetProvisionedModelThroughput",{}).n("BedrockClient","GetProvisionedModelThroughputCommand").sc(sl6).build(){}class Lh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","GetUseCaseForModelAccess",{}).n("BedrockClient","GetUseCaseForModelAccessCommand").sc(tl6).build(){}class JrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListAutomatedReasoningPolicies",{}).n("BedrockClient","ListAutomatedReasoningPoliciesCommand").sc(el6).build(){}class XrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListAutomatedReasoningPolicyBuildWorkflows",{}).n("BedrockClient","ListAutomatedReasoningPolicyBuildWorkflowsCommand").sc(Ai6).build(){}class IrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListAutomatedReasoningPolicyTestCases",{}).n("BedrockClient","ListAutomatedReasoningPolicyTestCasesCommand").sc(Qi6).build(){}class WrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListAutomatedReasoningPolicyTestResults",{}).n("BedrockClient","ListAutomatedReasoningPolicyTestResultsCommand").sc(Bi6).build(){}class DrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListCustomModelDeployments",{}).n("BedrockClient","ListCustomModelDeploymentsCommand").sc(Gi6).build(){}class KrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListCustomModels",{}).n("BedrockClient","ListCustomModelsCommand").sc(Zi6).build(){}class VrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListEvaluationJobs",{}).n("BedrockClient","ListEvaluationJobsCommand").sc(Yi6).build(){}class Oh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListFoundationModelAgreementOffers",{}).n("BedrockClient","ListFoundationModelAgreementOffersCommand").sc(Ji6).build(){}class Mh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListFoundationModels",{}).n("BedrockClient","ListFoundationModelsCommand").sc(Xi6).build(){}class FrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListGuardrails",{}).n("BedrockClient","ListGuardrailsCommand").sc(Ii6).build(){}class HrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListImportedModels",{}).n("BedrockClient","ListImportedModelsCommand").sc(Wi6).build(){}class ErA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListInferenceProfiles",{}).n("BedrockClient","ListInferenceProfilesCommand").sc(Di6).build(){}class zrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListMarketplaceModelEndpoints",{}).n("BedrockClient","ListMarketplaceModelEndpointsCommand").sc(Ki6).build(){}class CrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListModelCopyJobs",{}).n("BedrockClient","ListModelCopyJobsCommand").sc(Vi6).build(){}class $rA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListModelCustomizationJobs",{}).n("BedrockClient","ListModelCustomizationJobsCommand").sc(Fi6).build(){}class UrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListModelImportJobs",{}).n("BedrockClient","ListModelImportJobsCommand").sc(Hi6).build(){}class qrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListModelInvocationJobs",{}).n("BedrockClient","ListModelInvocationJobsCommand").sc(Ei6).build(){}class NrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListPromptRouters",{}).n("BedrockClient","ListPromptRoutersCommand").sc(zi6).build(){}class wrA extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListProvisionedModelThroughputs",{}).n("BedrockClient","ListProvisionedModelThroughputsCommand").sc(Ci6).build(){}class Rh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","ListTagsForResource",{}).n("BedrockClient","ListTagsForResourceCommand").sc($i6).build(){}class _h1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","PutModelInvocationLoggingConfiguration",{}).n("BedrockClient","PutModelInvocationLoggingConfigurationCommand").sc(Ui6).build(){}class jh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","PutUseCaseForModelAccess",{}).n("BedrockClient","PutUseCaseForModelAccessCommand").sc(qi6).build(){}class Th1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","RegisterMarketplaceModelEndpoint",{}).n("BedrockClient","RegisterMarketplaceModelEndpointCommand").sc(Ni6).build(){}class Ph1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","StartAutomatedReasoningPolicyBuildWorkflow",{}).n("BedrockClient","StartAutomatedReasoningPolicyBuildWorkflowCommand").sc(wi6).build(){}class Sh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","StartAutomatedReasoningPolicyTestWorkflow",{}).n("BedrockClient","StartAutomatedReasoningPolicyTestWorkflowCommand").sc(Li6).build(){}class xh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","StopEvaluationJob",{}).n("BedrockClient","StopEvaluationJobCommand").sc(Oi6).build(){}class yh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","StopModelCustomizationJob",{}).n("BedrockClient","StopModelCustomizationJobCommand").sc(Mi6).build(){}class vh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","StopModelInvocationJob",{}).n("BedrockClient","StopModelInvocationJobCommand").sc(Ri6).build(){}class kh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","TagResource",{}).n("BedrockClient","TagResourceCommand").sc(_i6).build(){}class bh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UntagResource",{}).n("BedrockClient","UntagResourceCommand").sc(ji6).build(){}class fh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UpdateAutomatedReasoningPolicyAnnotations",{}).n("BedrockClient","UpdateAutomatedReasoningPolicyAnnotationsCommand").sc(Pi6).build(){}class hh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UpdateAutomatedReasoningPolicy",{}).n("BedrockClient","UpdateAutomatedReasoningPolicyCommand").sc(Ti6).build(){}class gh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UpdateAutomatedReasoningPolicyTestCase",{}).n("BedrockClient","UpdateAutomatedReasoningPolicyTestCaseCommand").sc(Si6).build(){}class uh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UpdateGuardrail",{}).n("BedrockClient","UpdateGuardrailCommand").sc(xi6).build(){}class mh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UpdateMarketplaceModelEndpoint",{}).n("BedrockClient","UpdateMarketplaceModelEndpointCommand").sc(yi6).build(){}class dh1 extends iQ.Command.classBuilder().ep(HB).m(function(A,Q,B,G){return[IB.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockControlPlaneService","UpdateProvisionedModelThroughput",{}).n("BedrockClient","UpdateProvisionedModelThroughputCommand").sc(vi6).build(){}var ki6={BatchDeleteEvaluationJobCommand:qf1,CancelAutomatedReasoningPolicyBuildWorkflowCommand:Nf1,CreateAutomatedReasoningPolicyCommand:wf1,CreateAutomatedReasoningPolicyTestCaseCommand:Lf1,CreateAutomatedReasoningPolicyVersionCommand:Of1,CreateCustomModelCommand:Mf1,CreateCustomModelDeploymentCommand:Rf1,CreateEvaluationJobCommand:_f1,CreateFoundationModelAgreementCommand:jf1,CreateGuardrailCommand:Tf1,CreateGuardrailVersionCommand:Pf1,CreateInferenceProfileCommand:Sf1,CreateMarketplaceModelEndpointCommand:xf1,CreateModelCopyJobCommand:yf1,CreateModelCustomizationJobCommand:vf1,CreateModelImportJobCommand:kf1,CreateModelInvocationJobCommand:bf1,CreatePromptRouterCommand:ff1,CreateProvisionedModelThroughputCommand:hf1,DeleteAutomatedReasoningPolicyCommand:uf1,DeleteAutomatedReasoningPolicyBuildWorkflowCommand:gf1,DeleteAutomatedReasoningPolicyTestCaseCommand:mf1,DeleteCustomModelCommand:df1,DeleteCustomModelDeploymentCommand:pf1,DeleteFoundationModelAgreementCommand:cf1,DeleteGuardrailCommand:lf1,DeleteImportedModelCommand:if1,DeleteInferenceProfileCommand:nf1,DeleteMarketplaceModelEndpointCommand:af1,DeleteModelInvocationLoggingConfigurationCommand:of1,DeletePromptRouterCommand:rf1,DeleteProvisionedModelThroughputCommand:sf1,DeregisterMarketplaceModelEndpointCommand:tf1,ExportAutomatedReasoningPolicyVersionCommand:ef1,GetAutomatedReasoningPolicyCommand:Gh1,GetAutomatedReasoningPolicyAnnotationsCommand:Ah1,GetAutomatedReasoningPolicyBuildWorkflowCommand:Qh1,GetAutomatedReasoningPolicyBuildWorkflowResultAssetsCommand:Bh1,GetAutomatedReasoningPolicyNextScenarioCommand:Zh1,GetAutomatedReasoningPolicyTestCaseCommand:Yh1,GetAutomatedReasoningPolicyTestResultCommand:Jh1,GetCustomModelCommand:Xh1,GetCustomModelDeploymentCommand:Ih1,GetEvaluationJobCommand:Wh1,GetFoundationModelCommand:Kh1,GetFoundationModelAvailabilityCommand:Dh1,GetGuardrailCommand:Vh1,GetImportedModelCommand:Fh1,GetInferenceProfileCommand:Hh1,GetMarketplaceModelEndpointCommand:Eh1,GetModelCopyJobCommand:zh1,GetModelCustomizationJobCommand:Ch1,GetModelImportJobCommand:$h1,GetModelInvocationJobCommand:Uh1,GetModelInvocationLoggingConfigurationCommand:qh1,GetPromptRouterCommand:Nh1,GetProvisionedModelThroughputCommand:wh1,GetUseCaseForModelAccessCommand:Lh1,ListAutomatedReasoningPoliciesCommand:JrA,ListAutomatedReasoningPolicyBuildWorkflowsCommand:XrA,ListAutomatedReasoningPolicyTestCasesCommand:IrA,ListAutomatedReasoningPolicyTestResultsCommand:WrA,ListCustomModelDeploymentsCommand:DrA,ListCustomModelsCommand:KrA,ListEvaluationJobsCommand:VrA,ListFoundationModelAgreementOffersCommand:Oh1,ListFoundationModelsCommand:Mh1,ListGuardrailsCommand:FrA,ListImportedModelsCommand:HrA,ListInferenceProfilesCommand:ErA,ListMarketplaceModelEndpointsCommand:zrA,ListModelCopyJobsCommand:CrA,ListModelCustomizationJobsCommand:$rA,ListModelImportJobsCommand:UrA,ListModelInvocationJobsCommand:qrA,ListPromptRoutersCommand:NrA,ListProvisionedModelThroughputsCommand:wrA,ListTagsForResourceCommand:Rh1,PutModelInvocationLoggingConfigurationCommand:_h1,PutUseCaseForModelAccessCommand:jh1,RegisterMarketplaceModelEndpointCommand:Th1,StartAutomatedReasoningPolicyBuildWorkflowCommand:Ph1,StartAutomatedReasoningPolicyTestWorkflowCommand:Sh1,StopEvaluationJobCommand:xh1,StopModelCustomizationJobCommand:yh1,StopModelInvocationJobCommand:vh1,TagResourceCommand:kh1,UntagResourceCommand:bh1,UpdateAutomatedReasoningPolicyCommand:hh1,UpdateAutomatedReasoningPolicyAnnotationsCommand:fh1,UpdateAutomatedReasoningPolicyTestCaseCommand:gh1,UpdateGuardrailCommand:uh1,UpdateMarketplaceModelEndpointCommand:mh1,UpdateProvisionedModelThroughputCommand:dh1};class ph1 extends xD{}iQ.createAggregatedClient(ki6,ph1);var bi6=PD.createPaginator(xD,JrA,"nextToken","nextToken","maxResults"),fi6=PD.createPaginator(xD,XrA,"nextToken","nextToken","maxResults"),hi6=PD.createPaginator(xD,IrA,"nextToken","nextToken","maxResults"),gi6=PD.createPaginator(xD,WrA,"nextToken","nextToken","maxResults"),ui6=PD.createPaginator(xD,DrA,"nextToken","nextToken","maxResults"),mi6=PD.createPaginator(xD,KrA,"nextToken","nextToken","maxResults"),di6=PD.createPaginator(xD,VrA,"nextToken","nextToken","maxResults"),pi6=PD.createPaginator(xD,FrA,"nextToken","nextToken","maxResults"),ci6=PD.createPaginator(xD,HrA,"nextToken","nextToken","maxResults"),li6=PD.createPaginator(xD,ErA,"nextToken","nextToken","maxResults"),ii6=PD.createPaginator(xD,zrA,"nextToken","nextToken","maxResults"),ni6=PD.createPaginator(xD,CrA,"nextToken","nextToken","maxResults"),ai6=PD.createPaginator(xD,$rA,"nextToken","nextToken","maxResults"),oi6=PD.createPaginator(xD,UrA,"nextToken","nextToken","maxResults"),ri6=PD.createPaginator(xD,qrA,"nextToken","nextToken","maxResults"),si6=PD.createPaginator(xD,NrA,"nextToken","nextToken","maxResults"),ti6=PD.createPaginator(xD,wrA,"nextToken","nextToken","maxResults"),ei6={AVAILABLE:"AVAILABLE",ERROR:"ERROR",NOT_AVAILABLE:"NOT_AVAILABLE",PENDING:"PENDING"},An6={IMPOSSIBLE:"IMPOSSIBLE",INVALID:"INVALID",NO_TRANSLATION:"NO_TRANSLATION",SATISFIABLE:"SATISFIABLE",TOO_COMPLEX:"TOO_COMPLEX",TRANSLATION_AMBIGUOUS:"TRANSLATION_AMBIGUOUS",VALID:"VALID"},Qn6={IMPORT_POLICY:"IMPORT_POLICY",INGEST_CONTENT:"INGEST_CONTENT",REFINE_POLICY:"REFINE_POLICY"},Bn6={PDF:"pdf",TEXT:"txt"},Gn6={BUILDING:"BUILDING",CANCELLED:"CANCELLED",CANCEL_REQUESTED:"CANCEL_REQUESTED",COMPLETED:"COMPLETED",FAILED:"FAILED",PREPROCESSING:"PREPROCESSING",SCHEDULED:"SCHEDULED",TESTING:"TESTING"},Zn6={BUILD_LOG:"BUILD_LOG",GENERATED_TEST_CASES:"GENERATED_TEST_CASES",POLICY_DEFINITION:"POLICY_DEFINITION",QUALITY_REPORT:"QUALITY_REPORT"},Yn6={ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"},Jn6={APPLIED:"APPLIED",FAILED:"FAILED"},Xn6={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"},In6={FAILED:"FAILED",PASSED:"PASSED"},Wn6={COMPLETED:"COMPLETED",FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",NOT_STARTED:"NOT_STARTED",SCHEDULED:"SCHEDULED"},Dn6={INCOMPATIBLE_ENDPOINT:"INCOMPATIBLE_ENDPOINT",REGISTERED:"REGISTERED"},Kn6={ACTIVE:"Active",CREATING:"Creating",FAILED:"Failed"},Vn6={CREATION_TIME:"CreationTime"},Fn6={ASCENDING:"Ascending",DESCENDING:"Descending"},Hn6={CONTINUED_PRE_TRAINING:"CONTINUED_PRE_TRAINING",DISTILLATION:"DISTILLATION",FINE_TUNING:"FINE_TUNING",IMPORTED:"IMPORTED"},En6={ACTIVE:"Active",CREATING:"Creating",FAILED:"Failed"},zn6={COMPLETED:"Completed",DELETING:"Deleting",FAILED:"Failed",IN_PROGRESS:"InProgress",STOPPED:"Stopped",STOPPING:"Stopping"},Cn6={MODEL_EVALUATION:"ModelEvaluation",RAG_EVALUATION:"RagEvaluation"},$n6={CLASSIFICATION:"Classification",CUSTOM:"Custom",GENERATION:"Generation",QUESTION_AND_ANSWER:"QuestionAndAnswer",SUMMARIZATION:"Summarization"},Un6={OPTIMIZED:"optimized",STANDARD:"standard"},qn6={BYTE_CONTENT:"BYTE_CONTENT",S3:"S3"},Nn6={QUERY_DECOMPOSITION:"QUERY_DECOMPOSITION"},wn6={BOOLEAN:"BOOLEAN",NUMBER:"NUMBER",STRING:"STRING",STRING_LIST:"STRING_LIST"},Ln6={HYBRID:"HYBRID",SEMANTIC:"SEMANTIC"},On6={ALL:"ALL",SELECTIVE:"SELECTIVE"},Mn6={BEDROCK_RERANKING_MODEL:"BEDROCK_RERANKING_MODEL"},Rn6={EXTERNAL_SOURCES:"EXTERNAL_SOURCES",KNOWLEDGE_BASE:"KNOWLEDGE_BASE"},_n6={AUTOMATED:"Automated",HUMAN:"Human"},jn6={CREATION_TIME:"CreationTime"},Tn6={BLOCK:"BLOCK",NONE:"NONE"},Pn6={IMAGE:"IMAGE",TEXT:"TEXT"},Sn6={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},xn6={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},yn6={CLASSIC:"CLASSIC",STANDARD:"STANDARD"},vn6={BLOCK:"BLOCK",NONE:"NONE"},kn6={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},bn6={ANONYMIZE:"ANONYMIZE",BLOCK:"BLOCK",NONE:"NONE"},fn6={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},hn6={CLASSIC:"CLASSIC",STANDARD:"STANDARD"},gn6={BLOCK:"BLOCK",NONE:"NONE"},un6={DENY:"DENY"},mn6={BLOCK:"BLOCK",NONE:"NONE"},dn6={PROFANITY:"PROFANITY"},pn6={CREATING:"CREATING",DELETING:"DELETING",FAILED:"FAILED",READY:"READY",UPDATING:"UPDATING",VERSIONING:"VERSIONING"},cn6={ACTIVE:"ACTIVE"},ln6={APPLICATION:"APPLICATION",SYSTEM_DEFINED:"SYSTEM_DEFINED"},in6={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},nn6={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},an6={JSONL:"JSONL"},on6={COMPLETED:"Completed",EXPIRED:"Expired",FAILED:"Failed",IN_PROGRESS:"InProgress",PARTIALLY_COMPLETED:"PartiallyCompleted",SCHEDULED:"Scheduled",STOPPED:"Stopped",STOPPING:"Stopping",SUBMITTED:"Submitted",VALIDATING:"Validating"},rn6={CONTINUED_PRE_TRAINING:"CONTINUED_PRE_TRAINING",DISTILLATION:"DISTILLATION",FINE_TUNING:"FINE_TUNING"},sn6={ON_DEMAND:"ON_DEMAND",PROVISIONED:"PROVISIONED"},tn6={EMBEDDING:"EMBEDDING",IMAGE:"IMAGE",TEXT:"TEXT"},en6={ACTIVE:"ACTIVE",LEGACY:"LEGACY"},Aa6={AVAILABLE:"AVAILABLE"},Qa6={CUSTOM:"custom",DEFAULT:"default"},Ba6={ONE_MONTH:"OneMonth",SIX_MONTHS:"SixMonths"},Ga6={CREATING:"Creating",FAILED:"Failed",IN_SERVICE:"InService",UPDATING:"Updating"},Za6={CREATION_TIME:"CreationTime"},Ya6={AUTHORIZED:"AUTHORIZED",NOT_AUTHORIZED:"NOT_AUTHORIZED"},Ja6={AVAILABLE:"AVAILABLE",NOT_AVAILABLE:"NOT_AVAILABLE"},Xa6={AVAILABLE:"AVAILABLE",NOT_AVAILABLE:"NOT_AVAILABLE"},Ia6={ALL:"ALL",PUBLIC:"PUBLIC"},Wa6={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress",STOPPED:"Stopped",STOPPING:"Stopping"},Da6={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress",NOT_STARTED:"NotStarted",STOPPED:"Stopped",STOPPING:"Stopping"},Ka6={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress",STOPPED:"Stopped",STOPPING:"Stopping"};Object.defineProperty(ch1,"$Command",{enumerable:!0,get:function(){return iQ.Command}});Object.defineProperty(ch1,"__Client",{enumerable:!0,get:function(){return iQ.Client}});ch1.AccessDeniedException=YvQ;ch1.AgreementStatus=ei6;ch1.ApplicationType=Cn6;ch1.AttributeType=wn6;ch1.AuthorizationStatus=Ya6;ch1.AutomatedReasoningCheckLogicWarningType=Xn6;ch1.AutomatedReasoningCheckResult=An6;ch1.AutomatedReasoningPolicyAnnotationStatus=Jn6;ch1.AutomatedReasoningPolicyBuildDocumentContentType=Bn6;ch1.AutomatedReasoningPolicyBuildMessageType=Yn6;ch1.AutomatedReasoningPolicyBuildResultAssetType=Zn6;ch1.AutomatedReasoningPolicyBuildWorkflowStatus=Gn6;ch1.AutomatedReasoningPolicyBuildWorkflowType=Qn6;ch1.AutomatedReasoningPolicyTestRunResult=In6;ch1.AutomatedReasoningPolicyTestRunStatus=Wn6;ch1.BatchDeleteEvaluationJobCommand=qf1;ch1.Bedrock=ph1;ch1.BedrockClient=xD;ch1.BedrockServiceException=cM;ch1.CancelAutomatedReasoningPolicyBuildWorkflowCommand=Nf1;ch1.CommitmentDuration=Ba6;ch1.ConflictException=DvQ;ch1.CreateAutomatedReasoningPolicyCommand=wf1;ch1.CreateAutomatedReasoningPolicyTestCaseCommand=Lf1;ch1.CreateAutomatedReasoningPolicyVersionCommand=Of1;ch1.CreateCustomModelCommand=Mf1;ch1.CreateCustomModelDeploymentCommand=Rf1;ch1.CreateEvaluationJobCommand=_f1;ch1.CreateFoundationModelAgreementCommand=jf1;ch1.CreateGuardrailCommand=Tf1;ch1.CreateGuardrailVersionCommand=Pf1;ch1.CreateInferenceProfileCommand=Sf1;ch1.CreateMarketplaceModelEndpointCommand=xf1;ch1.CreateModelCopyJobCommand=yf1;ch1.CreateModelCustomizationJobCommand=vf1;ch1.CreateModelImportJobCommand=kf1;ch1.CreateModelInvocationJobCommand=bf1;ch1.CreatePromptRouterCommand=ff1;ch1.CreateProvisionedModelThroughputCommand=hf1;ch1.CustomModelDeploymentStatus=Kn6;ch1.CustomizationType=Hn6;ch1.DeleteAutomatedReasoningPolicyBuildWorkflowCommand=gf1;ch1.DeleteAutomatedReasoningPolicyCommand=uf1;ch1.DeleteAutomatedReasoningPolicyTestCaseCommand=mf1;ch1.DeleteCustomModelCommand=df1;ch1.DeleteCustomModelDeploymentCommand=pf1;ch1.DeleteFoundationModelAgreementCommand=cf1;ch1.DeleteGuardrailCommand=lf1;ch1.DeleteImportedModelCommand=if1;ch1.DeleteInferenceProfileCommand=nf1;ch1.DeleteMarketplaceModelEndpointCommand=af1;ch1.DeleteModelInvocationLoggingConfigurationCommand=of1;ch1.DeletePromptRouterCommand=rf1;ch1.DeleteProvisionedModelThroughputCommand=sf1;ch1.DeregisterMarketplaceModelEndpointCommand=tf1;ch1.EntitlementAvailability=Ja6;ch1.EvaluationJobStatus=zn6;ch1.EvaluationJobType=_n6;ch1.EvaluationTaskType=$n6;ch1.ExportAutomatedReasoningPolicyVersionCommand=ef1;ch1.ExternalSourceType=qn6;ch1.FineTuningJobStatus=Ka6;ch1.FoundationModelLifecycleStatus=en6;ch1.GetAutomatedReasoningPolicyAnnotationsCommand=Ah1;ch1.GetAutomatedReasoningPolicyBuildWorkflowCommand=Qh1;ch1.GetAutomatedReasoningPolicyBuildWorkflowResultAssetsCommand=Bh1;ch1.GetAutomatedReasoningPolicyCommand=Gh1;ch1.GetAutomatedReasoningPolicyNextScenarioCommand=Zh1;ch1.GetAutomatedReasoningPolicyTestCaseCommand=Yh1;ch1.GetAutomatedReasoningPolicyTestResultCommand=Jh1;ch1.GetCustomModelCommand=Xh1;ch1.GetCustomModelDeploymentCommand=Ih1;ch1.GetEvaluationJobCommand=Wh1;ch1.GetFoundationModelAvailabilityCommand=Dh1;ch1.GetFoundationModelCommand=Kh1;ch1.GetGuardrailCommand=Vh1;ch1.GetImportedModelCommand=Fh1;ch1.GetInferenceProfileCommand=Hh1;ch1.GetMarketplaceModelEndpointCommand=Eh1;ch1.GetModelCopyJobCommand=zh1;ch1.GetModelCustomizationJobCommand=Ch1;ch1.GetModelImportJobCommand=$h1;ch1.GetModelInvocationJobCommand=Uh1;ch1.GetModelInvocationLoggingConfigurationCommand=qh1;ch1.GetPromptRouterCommand=Nh1;ch1.GetProvisionedModelThroughputCommand=wh1;ch1.GetUseCaseForModelAccessCommand=Lh1;ch1.GuardrailContentFilterAction=Tn6;ch1.GuardrailContentFilterType=xn6;ch1.GuardrailContentFiltersTierName=yn6;ch1.GuardrailContextualGroundingAction=vn6;ch1.GuardrailContextualGroundingFilterType=kn6;ch1.GuardrailFilterStrength=Sn6;ch1.GuardrailManagedWordsType=dn6;ch1.GuardrailModality=Pn6;ch1.GuardrailPiiEntityType=fn6;ch1.GuardrailSensitiveInformationAction=bn6;ch1.GuardrailStatus=pn6;ch1.GuardrailTopicAction=gn6;ch1.GuardrailTopicType=un6;ch1.GuardrailTopicsTierName=hn6;ch1.GuardrailWordAction=mn6;ch1.InferenceProfileStatus=cn6;ch1.InferenceProfileType=ln6;ch1.InferenceType=sn6;ch1.InternalServerException=JvQ;ch1.JobStatusDetails=Da6;ch1.ListAutomatedReasoningPoliciesCommand=JrA;ch1.ListAutomatedReasoningPolicyBuildWorkflowsCommand=XrA;ch1.ListAutomatedReasoningPolicyTestCasesCommand=IrA;ch1.ListAutomatedReasoningPolicyTestResultsCommand=WrA;ch1.ListCustomModelDeploymentsCommand=DrA;ch1.ListCustomModelsCommand=KrA;ch1.ListEvaluationJobsCommand=VrA;ch1.ListFoundationModelAgreementOffersCommand=Oh1;ch1.ListFoundationModelsCommand=Mh1;ch1.ListGuardrailsCommand=FrA;ch1.ListImportedModelsCommand=HrA;ch1.ListInferenceProfilesCommand=ErA;ch1.ListMarketplaceModelEndpointsCommand=zrA;ch1.ListModelCopyJobsCommand=CrA;ch1.ListModelCustomizationJobsCommand=$rA;ch1.ListModelImportJobsCommand=UrA;ch1.ListModelInvocationJobsCommand=qrA;ch1.ListPromptRoutersCommand=NrA;ch1.ListProvisionedModelThroughputsCommand=wrA;ch1.ListTagsForResourceCommand=Rh1;ch1.ModelCopyJobStatus=in6;ch1.ModelCustomization=rn6;ch1.ModelCustomizationJobStatus=Wa6;ch1.ModelImportJobStatus=nn6;ch1.ModelInvocationJobStatus=on6;ch1.ModelModality=tn6;ch1.ModelStatus=En6;ch1.OfferType=Ia6;ch1.PerformanceConfigLatency=Un6;ch1.PromptRouterStatus=Aa6;ch1.PromptRouterType=Qa6;ch1.ProvisionedModelStatus=Ga6;ch1.PutModelInvocationLoggingConfigurationCommand=_h1;ch1.PutUseCaseForModelAccessCommand=jh1;ch1.QueryTransformationType=Nn6;ch1.RegionAvailability=Xa6;ch1.RegisterMarketplaceModelEndpointCommand=Th1;ch1.RerankingMetadataSelectionMode=On6;ch1.ResourceInUseException=FvQ;ch1.ResourceNotFoundException=XvQ;ch1.RetrieveAndGenerateType=Rn6;ch1.S3InputFormat=an6;ch1.SearchType=Ln6;ch1.ServiceQuotaExceededException=KvQ;ch1.ServiceUnavailableException=HvQ;ch1.SortByProvisionedModels=Za6;ch1.SortJobsBy=jn6;ch1.SortModelsBy=Vn6;ch1.SortOrder=Fn6;ch1.StartAutomatedReasoningPolicyBuildWorkflowCommand=Ph1;ch1.StartAutomatedReasoningPolicyTestWorkflowCommand=Sh1;ch1.Status=Dn6;ch1.StopEvaluationJobCommand=xh1;ch1.StopModelCustomizationJobCommand=yh1;ch1.StopModelInvocationJobCommand=vh1;ch1.TagResourceCommand=kh1;ch1.ThrottlingException=IvQ;ch1.TooManyTagsException=VvQ;ch1.UntagResourceCommand=bh1;ch1.UpdateAutomatedReasoningPolicyAnnotationsCommand=fh1;ch1.UpdateAutomatedReasoningPolicyCommand=hh1;ch1.UpdateAutomatedReasoningPolicyTestCaseCommand=gh1;ch1.UpdateGuardrailCommand=uh1;ch1.UpdateMarketplaceModelEndpointCommand=mh1;ch1.UpdateProvisionedModelThroughputCommand=dh1;ch1.ValidationException=WvQ;ch1.VectorSearchRerankingConfigurationType=Mn6;ch1.paginateListAutomatedReasoningPolicies=bi6;ch1.paginateListAutomatedReasoningPolicyBuildWorkflows=fi6;ch1.paginateListAutomatedReasoningPolicyTestCases=hi6;ch1.paginateListAutomatedReasoningPolicyTestResults=gi6;ch1.paginateListCustomModelDeployments=ui6;ch1.paginateListCustomModels=mi6;ch1.paginateListEvaluationJobs=di6;ch1.paginateListGuardrails=pi6;ch1.paginateListImportedModels=ci6;ch1.paginateListInferenceProfiles=li6;ch1.paginateListMarketplaceModelEndpoints=ii6;ch1.paginateListModelCopyJobs=ni6;ch1.paginateListModelCustomizationJobs=ai6;ch1.paginateListModelImportJobs=oi6;ch1.paginateListModelInvocationJobs=ri6;ch1.paginateListPromptRouters=si6;ch1.paginateListProvisionedModelThroughputs=ti6});var rbQ=U((is6)=>{is6.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(is6.HttpAuthLocation||(is6.HttpAuthLocation={}));is6.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(is6.HttpApiKeyAuthLocation||(is6.HttpApiKeyAuthLocation={}));is6.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(is6.EndpointURLScheme||(is6.EndpointURLScheme={}));is6.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(is6.AlgorithmId||(is6.AlgorithmId={}));var ms6=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>is6.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>is6.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},ds6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},ps6=(A)=>{return ms6(A)},cs6=(A)=>{return ds6(A)};is6.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(is6.FieldPosition||(is6.FieldPosition={}));var ls6="__smithy_context";is6.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(is6.IniSectionType||(is6.IniSectionType={}));is6.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(is6.RequestHandlerProtocol||(is6.RequestHandlerProtocol={}));is6.SMITHY_CONTEXT_KEY=ls6;is6.getDefaultClientConfiguration=ps6;is6.resolveDefaultRuntimeConfig=cs6});var AfQ=U((Qt6)=>{var rs6=rbQ(),ss6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},ts6=(A)=>{return{httpHandler:A.httpHandler()}};class sbQ{name;kind;values;constructor({name:A,kind:Q=rs6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class tbQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class LrA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new LrA({...A,headers:{...A.headers}});if(Q.query)Q.query=es6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return LrA.clone(this)}}function es6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class ebQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function At6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}Qt6.Field=sbQ;Qt6.Fields=tbQ;Qt6.HttpRequest=LrA;Qt6.HttpResponse=ebQ;Qt6.getHttpHandlerExtensionConfiguration=ss6;Qt6.isValidHostname=At6;Qt6.resolveHttpHandlerRuntimeConfig=ts6});var JfQ=U((Kt6)=>{var QfQ=AfQ();function Wt6(A){let{signer:Q,signer:B}=A,G=Object.assign(A,{eventSigner:Q,messageSigner:B}),Z=G.eventStreamPayloadHandlerProvider(G);return Object.assign(G,{eventStreamPayloadHandler:Z})}var BfQ=(A)=>(Q,B)=>async(G)=>{let{request:Z}=G;if(!QfQ.HttpRequest.isInstance(Z))return Q(G);return A.eventStreamPayloadHandler.handle(Q,G,B)},GfQ={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},ZfQ=(A)=>async(Q)=>{let{request:B}=Q;if(!QfQ.HttpRequest.isInstance(B))return A(Q);return B.headers={...B.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},A({...Q,request:B})},YfQ={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},Dt6=(A)=>({applyToStack:(Q)=>{Q.addRelativeTo(BfQ(A),GfQ),Q.add(ZfQ,YfQ)}});Kt6.eventStreamHandlingMiddleware=BfQ;Kt6.eventStreamHandlingMiddlewareOptions=GfQ;Kt6.eventStreamHeaderMiddleware=ZfQ;Kt6.eventStreamHeaderMiddlewareOptions=YfQ;Kt6.getEventStreamPlugin=Dt6;Kt6.resolveEventStreamConfig=Wt6});var WfQ=U((d8G,IfQ)=>{var{defineProperty:OrA,getOwnPropertyDescriptor:$t6,getOwnPropertyNames:Ut6}=Object,qt6=Object.prototype.hasOwnProperty,Nt6=(A,Q)=>OrA(A,"name",{value:Q,configurable:!0}),wt6=(A,Q)=>{for(var B in Q)OrA(A,B,{get:Q[B],enumerable:!0})},Lt6=(A,Q,B,G)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let Z of Ut6(Q))if(!qt6.call(A,Z)&&Z!==B)OrA(A,Z,{get:()=>Q[Z],enumerable:!(G=$t6(Q,Z))||G.enumerable})}return A},Ot6=(A)=>Lt6(OrA({},"__esModule",{value:!0}),A),XfQ={};wt6(XfQ,{isArrayBuffer:()=>Mt6});IfQ.exports=Ot6(XfQ);var Mt6=Nt6((A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]","isArrayBuffer")});var D0A=U((p8G,VfQ)=>{var{defineProperty:MrA,getOwnPropertyDescriptor:Rt6,getOwnPropertyNames:_t6}=Object,jt6=Object.prototype.hasOwnProperty,DfQ=(A,Q)=>MrA(A,"name",{value:Q,configurable:!0}),Tt6=(A,Q)=>{for(var B in Q)MrA(A,B,{get:Q[B],enumerable:!0})},Pt6=(A,Q,B,G)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let Z of _t6(Q))if(!jt6.call(A,Z)&&Z!==B)MrA(A,Z,{get:()=>Q[Z],enumerable:!(G=Rt6(Q,Z))||G.enumerable})}return A},St6=(A)=>Pt6(MrA({},"__esModule",{value:!0}),A),KfQ={};Tt6(KfQ,{fromArrayBuffer:()=>yt6,fromString:()=>vt6});VfQ.exports=St6(KfQ);var xt6=WfQ(),sh1=qA("buffer"),yt6=DfQ((A,Q=0,B=A.byteLength-Q)=>{if(!(0,xt6.isArrayBuffer)(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return sh1.Buffer.from(A,Q,B)},"fromArrayBuffer"),vt6=DfQ((A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?sh1.Buffer.from(A,Q):sh1.Buffer.from(A)},"fromString")});var CfQ=U((c8G,zfQ)=>{var{defineProperty:RrA,getOwnPropertyDescriptor:kt6,getOwnPropertyNames:bt6}=Object,ft6=Object.prototype.hasOwnProperty,th1=(A,Q)=>RrA(A,"name",{value:Q,configurable:!0}),ht6=(A,Q)=>{for(var B in Q)RrA(A,B,{get:Q[B],enumerable:!0})},gt6=(A,Q,B,G)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let Z of bt6(Q))if(!ft6.call(A,Z)&&Z!==B)RrA(A,Z,{get:()=>Q[Z],enumerable:!(G=kt6(Q,Z))||G.enumerable})}return A},ut6=(A)=>gt6(RrA({},"__esModule",{value:!0}),A),FfQ={};ht6(FfQ,{fromUtf8:()=>EfQ,toUint8Array:()=>mt6,toUtf8:()=>dt6});zfQ.exports=ut6(FfQ);var HfQ=D0A(),EfQ=th1((A)=>{let Q=(0,HfQ.fromString)(A,"utf8");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),mt6=th1((A)=>{if(typeof A==="string")return EfQ(A);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(A)},"toUint8Array"),dt6=th1((A)=>{if(typeof A==="string")return A;if(typeof A!=="object"||typeof A.byteOffset!=="number"||typeof A.byteLength!=="number")throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,HfQ.fromArrayBuffer)(A.buffer,A.byteOffset,A.byteLength).toString("utf8")},"toUtf8")});var qfQ=U(($fQ)=>{Object.defineProperty($fQ,"__esModule",{value:!0});$fQ.convertToBuffer=void 0;var pt6=CfQ(),ct6=typeof Buffer<"u"&&Buffer.from?function(A){return Buffer.from(A,"utf8")}:pt6.fromUtf8;function lt6(A){if(A instanceof Uint8Array)return A;if(typeof A==="string")return ct6(A);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(A)}$fQ.convertToBuffer=lt6});var LfQ=U((NfQ)=>{Object.defineProperty(NfQ,"__esModule",{value:!0});NfQ.isEmptyData=void 0;function it6(A){if(typeof A==="string")return A.length===0;return A.byteLength===0}NfQ.isEmptyData=it6});var RfQ=U((OfQ)=>{Object.defineProperty(OfQ,"__esModule",{value:!0});OfQ.numToUint8=void 0;function nt6(A){return new Uint8Array([(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255])}OfQ.numToUint8=nt6});var TfQ=U((_fQ)=>{Object.defineProperty(_fQ,"__esModule",{value:!0});_fQ.uint32ArrayFrom=void 0;function at6(A){if(!Uint32Array.from){var Q=new Uint32Array(A.length),B=0;while(B<A.length)Q[B]=A[B],B+=1;return Q}return Uint32Array.from(A)}_fQ.uint32ArrayFrom=at6});var eh1=U((ZYA)=>{Object.defineProperty(ZYA,"__esModule",{value:!0});ZYA.uint32ArrayFrom=ZYA.numToUint8=ZYA.isEmptyData=ZYA.convertToBuffer=void 0;var ot6=qfQ();Object.defineProperty(ZYA,"convertToBuffer",{enumerable:!0,get:function(){return ot6.convertToBuffer}});var rt6=LfQ();Object.defineProperty(ZYA,"isEmptyData",{enumerable:!0,get:function(){return rt6.isEmptyData}});var st6=RfQ();Object.defineProperty(ZYA,"numToUint8",{enumerable:!0,get:function(){return st6.numToUint8}});var tt6=TfQ();Object.defineProperty(ZYA,"uint32ArrayFrom",{enumerable:!0,get:function(){return tt6.uint32ArrayFrom}})});var vfQ=U((xfQ)=>{Object.defineProperty(xfQ,"__esModule",{value:!0});xfQ.AwsCrc32=void 0;var PfQ=NZ(),Ag1=eh1(),SfQ=Qg1(),Ae6=function(){function A(){this.crc32=new SfQ.Crc32}return A.prototype.update=function(Q){if((0,Ag1.isEmptyData)(Q))return;this.crc32.update((0,Ag1.convertToBuffer)(Q))},A.prototype.digest=function(){return PfQ.__awaiter(this,void 0,void 0,function(){return PfQ.__generator(this,function(Q){return[2,(0,Ag1.numToUint8)(this.crc32.digest())]})})},A.prototype.reset=function(){this.crc32=new SfQ.Crc32},A}();xfQ.AwsCrc32=Ae6});var Qg1=U((Bg1)=>{Object.defineProperty(Bg1,"__esModule",{value:!0});Bg1.AwsCrc32=Bg1.Crc32=Bg1.crc32=void 0;var Qe6=NZ(),Be6=eh1();function Ge6(A){return new kfQ().update(A).digest()}Bg1.crc32=Ge6;var kfQ=function(){function A(){this.checksum=4294967295}return A.prototype.update=function(Q){var B,G;try{for(var Z=Qe6.__values(Q),Y=Z.next();!Y.done;Y=Z.next()){var J=Y.value;this.checksum=this.checksum>>>8^Ye6[(this.checksum^J)&255]}}catch(X){B={error:X}}finally{try{if(Y&&!Y.done&&(G=Z.return))G.call(Z)}finally{if(B)throw B.error}}return this},A.prototype.digest=function(){return(this.checksum^4294967295)>>>0},A}();Bg1.Crc32=kfQ;var Ze6=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Ye6=(0,Be6.uint32ArrayFrom)(Ze6),Je6=vfQ();Object.defineProperty(Bg1,"AwsCrc32",{enumerable:!0,get:function(){return Je6.AwsCrc32}})});var ffQ=U((Ve6)=>{var bfQ={},Gg1={};for(let A=0;A<256;A++){let Q=A.toString(16).toLowerCase();if(Q.length===1)Q=`0${Q}`;bfQ[A]=Q,Gg1[Q]=A}function De6(A){if(A.length%2!==0)throw Error("Hex encoded strings must have an even number length");let Q=new Uint8Array(A.length/2);for(let B=0;B<A.length;B+=2){let G=A.slice(B,B+2).toLowerCase();if(G in Gg1)Q[B/2]=Gg1[G];else throw Error(`Cannot decode unrecognized sequence ${G} as hexadecimal`)}return Q}function Ke6(A){let Q="";for(let B=0;B<A.byteLength;B++)Q+=bfQ[A[B]];return Q}Ve6.fromHex=De6;Ve6.toHex=Ke6});var XwA=U((Re6)=>{var ufQ=Qg1(),K0A=ffQ();class YYA{bytes;constructor(A){if(this.bytes=A,A.byteLength!==8)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(A){if(A>9223372036854776000||A<-9223372036854776000)throw Error(`${A} is too large (or, if negative, too small) to represent as an Int64`);let Q=new Uint8Array(8);for(let B=7,G=Math.abs(Math.round(A));B>-1&&G>0;B--,G/=256)Q[B]=G;if(A<0)hfQ(Q);return new YYA(Q)}valueOf(){let A=this.bytes.slice(0),Q=A[0]&128;if(Q)hfQ(A);return parseInt(K0A.toHex(A),16)*(Q?-1:1)}toString(){return String(this.valueOf())}}function hfQ(A){for(let Q=0;Q<8;Q++)A[Q]^=255;for(let Q=7;Q>-1;Q--)if(A[Q]++,A[Q]!==0)break}class Zg1{toUtf8;fromUtf8;constructor(A,Q){this.toUtf8=A,this.fromUtf8=Q}format(A){let Q=[];for(let Z of Object.keys(A)){let Y=this.fromUtf8(Z);Q.push(Uint8Array.from([Y.byteLength]),Y,this.formatHeaderValue(A[Z]))}let B=new Uint8Array(Q.reduce((Z,Y)=>Z+Y.byteLength,0)),G=0;for(let Z of Q)B.set(Z,G),G+=Z.byteLength;return B}formatHeaderValue(A){switch(A.type){case"boolean":return Uint8Array.from([A.value?0:1]);case"byte":return Uint8Array.from([2,A.value]);case"short":let Q=new DataView(new ArrayBuffer(3));return Q.setUint8(0,3),Q.setInt16(1,A.value,!1),new Uint8Array(Q.buffer);case"integer":let B=new DataView(new ArrayBuffer(5));return B.setUint8(0,4),B.setInt32(1,A.value,!1),new Uint8Array(B.buffer);case"long":let G=new Uint8Array(9);return G[0]=5,G.set(A.value.bytes,1),G;case"binary":let Z=new DataView(new ArrayBuffer(3+A.value.byteLength));Z.setUint8(0,6),Z.setUint16(1,A.value.byteLength,!1);let Y=new Uint8Array(Z.buffer);return Y.set(A.value,3),Y;case"string":let J=this.fromUtf8(A.value),X=new DataView(new ArrayBuffer(3+J.byteLength));X.setUint8(0,7),X.setUint16(1,J.byteLength,!1);let I=new Uint8Array(X.buffer);return I.set(J,3),I;case"timestamp":let W=new Uint8Array(9);return W[0]=8,W.set(YYA.fromNumber(A.value.valueOf()).bytes,1),W;case"uuid":if(!Le6.test(A.value))throw Error(`Invalid UUID received: ${A.value}`);let D=new Uint8Array(17);return D[0]=9,D.set(K0A.fromHex(A.value.replace(/\-/g,"")),1),D}}parse(A){let Q={},B=0;while(B<A.byteLength){let G=A.getUint8(B++),Z=this.toUtf8(new Uint8Array(A.buffer,A.byteOffset+B,G));switch(B+=G,A.getUint8(B++)){case 0:Q[Z]={type:gfQ,value:!0};break;case 1:Q[Z]={type:gfQ,value:!1};break;case 2:Q[Z]={type:Ee6,value:A.getInt8(B++)};break;case 3:Q[Z]={type:ze6,value:A.getInt16(B,!1)},B+=2;break;case 4:Q[Z]={type:Ce6,value:A.getInt32(B,!1)},B+=4;break;case 5:Q[Z]={type:$e6,value:new YYA(new Uint8Array(A.buffer,A.byteOffset+B,8))},B+=8;break;case 6:let Y=A.getUint16(B,!1);B+=2,Q[Z]={type:Ue6,value:new Uint8Array(A.buffer,A.byteOffset+B,Y)},B+=Y;break;case 7:let J=A.getUint16(B,!1);B+=2,Q[Z]={type:qe6,value:this.toUtf8(new Uint8Array(A.buffer,A.byteOffset+B,J))},B+=J;break;case 8:Q[Z]={type:Ne6,value:new Date(new YYA(new Uint8Array(A.buffer,A.byteOffset+B,8)).valueOf())},B+=8;break;case 9:let X=new Uint8Array(A.buffer,A.byteOffset+B,16);B+=16,Q[Z]={type:we6,value:`${K0A.toHex(X.subarray(0,4))}-${K0A.toHex(X.subarray(4,6))}-${K0A.toHex(X.subarray(6,8))}-${K0A.toHex(X.subarray(8,10))}-${K0A.toHex(X.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return Q}}var gfQ="boolean",Ee6="byte",ze6="short",Ce6="integer",$e6="long",Ue6="binary",qe6="string",Ne6="timestamp",we6="uuid",Le6=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,mfQ=4,gi=mfQ*2,V0A=4,Oe6=gi+V0A*2;function Me6({byteLength:A,byteOffset:Q,buffer:B}){if(A<Oe6)throw Error("Provided message too short to accommodate event stream message overhead");let G=new DataView(B,Q,A),Z=G.getUint32(0,!1);if(A!==Z)throw Error("Reported message length does not match received message length");let Y=G.getUint32(mfQ,!1),J=G.getUint32(gi,!1),X=G.getUint32(A-V0A,!1),I=new ufQ.Crc32().update(new Uint8Array(B,Q,gi));if(J!==I.digest())throw Error(`The prelude checksum specified in the message (${J}) does not match the calculated CRC32 checksum (${I.digest()})`);if(I.update(new Uint8Array(B,Q+gi,A-(gi+V0A))),X!==I.digest())throw Error(`The message checksum (${I.digest()}) did not match the expected value of ${X}`);return{headers:new DataView(B,Q+gi+V0A,Y),body:new Uint8Array(B,Q+gi+V0A+Y,Z-Y-(gi+V0A+V0A))}}class dfQ{headerMarshaller;messageBuffer;isEndOfStream;constructor(A,Q){this.headerMarshaller=new Zg1(A,Q),this.messageBuffer=[],this.isEndOfStream=!1}feed(A){this.messageBuffer.push(this.decode(A))}endOfStream(){this.isEndOfStream=!0}getMessage(){let A=this.messageBuffer.pop(),Q=this.isEndOfStream;return{getMessage(){return A},isEndOfStream(){return Q}}}getAvailableMessages(){let A=this.messageBuffer;this.messageBuffer=[];let Q=this.isEndOfStream;return{getMessages(){return A},isEndOfStream(){return Q}}}encode({headers:A,body:Q}){let B=this.headerMarshaller.format(A),G=B.byteLength+Q.byteLength+16,Z=new Uint8Array(G),Y=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),J=new ufQ.Crc32;return Y.setUint32(0,G,!1),Y.setUint32(4,B.byteLength,!1),Y.setUint32(8,J.update(Z.subarray(0,8)).digest(),!1),Z.set(B,12),Z.set(Q,B.byteLength+12),Y.setUint32(G-4,J.update(Z.subarray(8,G-4)).digest(),!1),Z}decode(A){let{headers:Q,body:B}=Me6(A);return{headers:this.headerMarshaller.parse(Q),body:B}}formatHeaders(A){return this.headerMarshaller.format(A)}}class pfQ{options;constructor(A){this.options=A}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let A of this.options.inputStream)yield this.options.decoder.decode(A)}}class cfQ{options;constructor(A){this.options=A}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let A of this.options.messageStream)yield this.options.encoder.encode(A);if(this.options.includeEndFrame)yield new Uint8Array(0)}}class lfQ{options;constructor(A){this.options=A}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let A of this.options.messageStream){let Q=await this.options.deserializer(A);if(Q===void 0)continue;yield Q}}}class ifQ{options;constructor(A){this.options=A}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let A of this.options.inputStream)yield this.options.serializer(A)}}Re6.EventStreamCodec=dfQ;Re6.HeaderMarshaller=Zg1;Re6.Int64=YYA;Re6.MessageDecoderStream=pfQ;Re6.MessageEncoderStream=cfQ;Re6.SmithyMessageDecoderStream=lfQ;Re6.SmithyMessageEncoderStream=ifQ});var afQ=U((be6)=>{var nfQ={},Yg1={};for(let A=0;A<256;A++){let Q=A.toString(16).toLowerCase();if(Q.length===1)Q=`0${Q}`;nfQ[A]=Q,Yg1[Q]=A}function ve6(A){if(A.length%2!==0)throw Error("Hex encoded strings must have an even number length");let Q=new Uint8Array(A.length/2);for(let B=0;B<A.length;B+=2){let G=A.slice(B,B+2).toLowerCase();if(G in Yg1)Q[B/2]=Yg1[G];else throw Error(`Cannot decode unrecognized sequence ${G} as hexadecimal`)}return Q}function ke6(A){let Q="";for(let B=0;B<A.byteLength;B++)Q+=nfQ[A[B]];return Q}be6.fromHex=ve6;be6.toHex=ke6});var ofQ=U((ce6)=>{ce6.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(ce6.HttpAuthLocation||(ce6.HttpAuthLocation={}));ce6.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(ce6.HttpApiKeyAuthLocation||(ce6.HttpApiKeyAuthLocation={}));ce6.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(ce6.EndpointURLScheme||(ce6.EndpointURLScheme={}));ce6.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(ce6.AlgorithmId||(ce6.AlgorithmId={}));var ge6=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>ce6.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>ce6.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},ue6=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},me6=(A)=>{return ge6(A)},de6=(A)=>{return ue6(A)};ce6.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(ce6.FieldPosition||(ce6.FieldPosition={}));var pe6="__smithy_context";ce6.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(ce6.IniSectionType||(ce6.IniSectionType={}));ce6.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(ce6.RequestHandlerProtocol||(ce6.RequestHandlerProtocol={}));ce6.SMITHY_CONTEXT_KEY=pe6;ce6.getDefaultClientConfiguration=me6;ce6.resolveDefaultRuntimeConfig=de6});var Vg1=U((ee6)=>{var ae6=ofQ(),oe6=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},re6=(A)=>{return{httpHandler:A.httpHandler()}};class rfQ{name;kind;values;constructor({name:A,kind:Q=ae6.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class sfQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class _rA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new _rA({...A,headers:{...A.headers}});if(Q.query)Q.query=se6(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return _rA.clone(this)}}function se6(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class tfQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function te6(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}ee6.Field=rfQ;ee6.Fields=sfQ;ee6.HttpRequest=_rA;ee6.HttpResponse=tfQ;ee6.getHttpHandlerExtensionConfiguration=oe6;ee6.isValidHostname=te6;ee6.resolveHttpHandlerRuntimeConfig=re6});var AhQ=U((WA3)=>{var efQ=(A)=>encodeURIComponent(A).replace(/[!'()*]/g,XA3),XA3=(A)=>`%${A.charCodeAt(0).toString(16).toUpperCase()}`,IA3=(A)=>A.split("/").map(efQ).join("/");WA3.escapeUri=efQ;WA3.escapeUriPath=IA3});var QhQ=U((FA3)=>{var Fg1=AhQ();function VA3(A){let Q=[];for(let B of Object.keys(A).sort()){let G=A[B];if(B=Fg1.escapeUri(B),Array.isArray(G))for(let Z=0,Y=G.length;Z<Y;Z++)Q.push(`${B}=${Fg1.escapeUri(G[Z])}`);else{let Z=B;if(G||typeof G==="string")Z+=`=${Fg1.escapeUri(G)}`;Q.push(Z)}}return Q.join("&")}FA3.buildQueryString=VA3});var BhQ=U((CA3)=>{var EA3=QhQ();function zA3(A){let{port:Q,query:B}=A,{protocol:G,path:Z,hostname:Y}=A;if(G&&G.slice(-1)!==":")G+=":";if(Q)Y+=`:${Q}`;if(Z&&Z.charAt(0)!=="/")Z=`/${Z}`;let J=B?EA3.buildQueryString(B):"";if(J&&J[0]!=="?")J=`?${J}`;let X="";if(A.username!=null||A.password!=null){let W=A.username??"",D=A.password??"";X=`${W}:${D}@`}let I="";if(A.fragment)I=`#${A.fragment}`;return`${G}//${X}${Y}${Z}${J}${I}`}CA3.formatUrl=zA3});var GhQ=U((wA3)=>{var WwA=XwA();function UA3(A){let Q=0,B=0,G=null,Z=null,Y=(X)=>{if(typeof X!=="number")throw Error("Attempted to allocate an event message where size was not a number: "+X);Q=X,B=4,G=new Uint8Array(X),new DataView(G.buffer).setUint32(0,X,!1)},J=async function*(){let X=A[Symbol.asyncIterator]();while(!0){let{value:I,done:W}=await X.next();if(W){if(!Q)return;else if(Q===B)yield G;else throw Error("Truncated event message received.");return}let D=I.length,K=0;while(K<D){if(!G){let F=D-K;if(!Z)Z=new Uint8Array(4);let H=Math.min(4-B,F);if(Z.set(I.slice(K,K+H),B),B+=H,K+=H,B<4)break;Y(new DataView(Z.buffer).getUint32(0,!1)),Z=null}let V=Math.min(Q-B,D-K);if(G.set(I.slice(K,K+V),B),B+=V,K+=V,Q&&Q===B)yield G,G=null,Q=0,B=0}}};return{[Symbol.asyncIterator]:J}}function qA3(A,Q){return async function(B){let{value:G}=B.headers[":message-type"];if(G==="error"){let Z=Error(B.headers[":error-message"].value||"UnknownError");throw Z.name=B.headers[":error-code"].value,Z}else if(G==="exception"){let Z=B.headers[":exception-type"].value,Y={[Z]:B},J=await A(Y);if(J.$unknown){let X=Error(Q(B.body));throw X.name=Z,X}throw J[Z]}else if(G==="event"){let Z={[B.headers[":event-type"].value]:B},Y=await A(Z);if(Y.$unknown)return;return Y}else throw Error(`Unrecognizable event type: ${B.headers[":event-type"].value}`)}}class Hg1{eventStreamCodec;utfEncoder;constructor({utf8Encoder:A,utf8Decoder:Q}){this.eventStreamCodec=new WwA.EventStreamCodec(A,Q),this.utfEncoder=A}deserialize(A,Q){let B=UA3(A);return new WwA.SmithyMessageDecoderStream({messageStream:new WwA.MessageDecoderStream({inputStream:B,decoder:this.eventStreamCodec}),deserializer:qA3(Q,this.utfEncoder)})}serialize(A,Q){return new WwA.MessageEncoderStream({messageStream:new WwA.SmithyMessageEncoderStream({inputStream:A,serializer:Q}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}var NA3=(A)=>new Hg1(A);wA3.EventStreamMarshaller=Hg1;wA3.eventStreamSerdeProvider=NA3});var JhQ=U((jA3)=>{var MA3=GhQ(),ZhQ=(A)=>({[Symbol.asyncIterator]:async function*(){let Q=A.getReader();try{while(!0){let{done:B,value:G}=await Q.read();if(B)return;yield G}}finally{Q.releaseLock()}}}),YhQ=(A)=>{let Q=A[Symbol.asyncIterator]();return new ReadableStream({async pull(B){let{done:G,value:Z}=await Q.next();if(G)return B.close();B.enqueue(Z)}})};class Eg1{universalMarshaller;constructor({utf8Encoder:A,utf8Decoder:Q}){this.universalMarshaller=new MA3.EventStreamMarshaller({utf8Decoder:Q,utf8Encoder:A})}deserialize(A,Q){let B=RA3(A)?ZhQ(A):A;return this.universalMarshaller.deserialize(B,Q)}serialize(A,Q){let B=this.universalMarshaller.serialize(A,Q);return typeof ReadableStream==="function"?YhQ(B):B}}var RA3=(A)=>typeof ReadableStream==="function"&&A instanceof ReadableStream,_A3=(A)=>new Eg1(A);jA3.EventStreamMarshaller=Eg1;jA3.eventStreamSerdeProvider=_A3;jA3.iterableToReadableStream=YhQ;jA3.readableStreamtoIterable=ZhQ});var IhQ=U((kA3)=>{var XhQ=(A)=>encodeURIComponent(A).replace(/[!'()*]/g,yA3),yA3=(A)=>`%${A.charCodeAt(0).toString(16).toUpperCase()}`,vA3=(A)=>A.split("/").map(XhQ).join("/");kA3.escapeUri=XhQ;kA3.escapeUriPath=vA3});var WhQ=U((gA3)=>{var zg1=IhQ();function hA3(A){let Q=[];for(let B of Object.keys(A).sort()){let G=A[B];if(B=zg1.escapeUri(B),Array.isArray(G))for(let Z=0,Y=G.length;Z<Y;Z++)Q.push(`${B}=${zg1.escapeUri(G[Z])}`);else{let Z=B;if(G||typeof G==="string")Z+=`=${zg1.escapeUri(G)}`;Q.push(Z)}}return Q.join("&")}gA3.buildQueryString=hA3});var DhQ=U((dA3)=>{var mA3=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";dA3.isArrayBuffer=mA3});var $g1=U((nA3)=>{var cA3=DhQ(),Cg1=qA("buffer"),lA3=(A,Q=0,B=A.byteLength-Q)=>{if(!cA3.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return Cg1.Buffer.from(A,Q,B)},iA3=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?Cg1.Buffer.from(A,Q):Cg1.Buffer.from(A)};nA3.fromArrayBuffer=lA3;nA3.fromString=iA3});var FhQ=U((KhQ)=>{Object.defineProperty(KhQ,"__esModule",{value:!0});KhQ.fromBase64=void 0;var rA3=$g1(),sA3=/^[A-Za-z0-9+/]*={0,2}$/,tA3=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!sA3.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,rA3.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};KhQ.fromBase64=tA3});var zhQ=U((HhQ)=>{Object.defineProperty(HhQ,"__esModule",{value:!0});HhQ.toBase64=void 0;var eA3=$g1(),A13=lG(),Q13=(A)=>{let Q;if(typeof A==="string")Q=(0,A13.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,eA3.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};HhQ.toBase64=Q13});var UhQ=U((DwA)=>{var ChQ=FhQ(),$hQ=zhQ();Object.keys(ChQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(DwA,A))Object.defineProperty(DwA,A,{enumerable:!0,get:function(){return ChQ[A]}})});Object.keys($hQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(DwA,A))Object.defineProperty(DwA,A,{enumerable:!0,get:function(){return $hQ[A]}})})});var whQ=U((W13)=>{var qhQ=Vg1(),B13=WhQ(),G13=UhQ();function NhQ(A,Q){return new Request(A,Q)}function Z13(A=0){return new Promise((Q,B)=>{if(A)setTimeout(()=>{let G=Error(`Request did not complete within ${A} ms`);G.name="TimeoutError",B(G)},A)})}var jrA={supported:void 0};class Ug1{config;configProvider;static create(A){if(typeof A?.handle==="function")return A;return new Ug1(A)}constructor(A){if(typeof A==="function")this.configProvider=A().then((Q)=>Q||{});else this.config=A??{},this.configProvider=Promise.resolve(this.config);if(jrA.supported===void 0)jrA.supported=Boolean(typeof Request<"u"&&"keepalive"in NhQ("https://[::1]"))}destroy(){}async handle(A,{abortSignal:Q,requestTimeout:B}={}){if(!this.config)this.config=await this.configProvider;let G=B??this.config.requestTimeout,Z=this.config.keepAlive===!0,Y=this.config.credentials;if(Q?.aborted){let C=Error("Request aborted");return C.name="AbortError",Promise.reject(C)}let J=A.path,X=B13.buildQueryString(A.query||{});if(X)J+=`?${X}`;if(A.fragment)J+=`#${A.fragment}`;let I="";if(A.username!=null||A.password!=null){let C=A.username??"",O=A.password??"";I=`${C}:${O}@`}let{port:W,method:D}=A,K=`${A.protocol}//${I}${A.hostname}${W?`:${W}`:""}${J}`,V=D==="GET"||D==="HEAD"?void 0:A.body,F={body:V,headers:new Headers(A.headers),method:D,credentials:Y};if(this.config?.cache)F.cache=this.config.cache;if(V)F.duplex="half";if(typeof AbortController<"u")F.signal=Q;if(jrA.supported)F.keepalive=Z;if(typeof this.config.requestInit==="function")Object.assign(F,this.config.requestInit(A));let H=()=>{},E=NhQ(K,F),z=[fetch(E).then((C)=>{let O=C.headers,L={};for(let _ of O.entries())L[_[0]]=_[1];if(C.body==null)return C.blob().then((_)=>({response:new qhQ.HttpResponse({headers:L,reason:C.statusText,statusCode:C.status,body:_})}));return{response:new qhQ.HttpResponse({headers:L,reason:C.statusText,statusCode:C.status,body:C.body})}}),Z13(G)];if(Q)z.push(new Promise((C,O)=>{let L=()=>{let M=Error("Request aborted");M.name="AbortError",O(M)};if(typeof Q.addEventListener==="function"){let M=Q;M.addEventListener("abort",L,{once:!0}),H=()=>M.removeEventListener("abort",L)}else Q.onabort=L}));return Promise.race(z).finally(H)}updateHttpClientConfig(A,Q){this.config=void 0,this.configProvider=this.configProvider.then((B)=>{return B[A]=Q,B})}httpHandlerConfigs(){return this.config??{}}}var Y13=async(A)=>{if(typeof Blob==="function"&&A instanceof Blob||A.constructor?.name==="Blob"){if(Blob.prototype.arrayBuffer!==void 0)return new Uint8Array(await A.arrayBuffer());return J13(A)}return X13(A)};async function J13(A){let Q=await I13(A),B=G13.fromBase64(Q);return new Uint8Array(B)}async function X13(A){let Q=[],B=A.getReader(),G=!1,Z=0;while(!G){let{done:X,value:I}=await B.read();if(I)Q.push(I),Z+=I.length;G=X}let Y=new Uint8Array(Z),J=0;for(let X of Q)Y.set(X,J),J+=X.length;return Y}function I13(A){return new Promise((Q,B)=>{let G=new FileReader;G.onloadend=()=>{if(G.readyState!==2)return B(Error("Reader aborted too early"));let Z=G.result??"",Y=Z.indexOf(","),J=Y>-1?Y+1:Z.length;Q(Z.substring(J))},G.onabort=()=>B(Error("Read aborted")),G.onerror=()=>B(G.error),G.readAsDataURL(A)})}W13.FetchHttpHandler=Ug1;W13.keepAliveSupport=jrA;W13.streamCollector=Y13});var jhQ=U((T13)=>{var F13=XwA(),H13=afQ(),qg1=Vg1(),E13=BhQ(),OhQ=JhQ(),LhQ=whQ(),z13=(A,Q,B,G)=>{let Z=A,Y={start(){},async transform(J,X){try{let I=new Date(Date.now()+await G()),W={":date":{type:"timestamp",value:I}},D=await Q.sign({message:{body:J,headers:W},priorSignature:Z},{signingDate:I});Z=D.signature;let K=B.encode({headers:{...W,":chunk-signature":{type:"binary",value:H13.fromHex(D.signature)}},body:J});X.enqueue(K)}catch(I){X.error(I)}}};return new TransformStream({...Y})};class MhQ{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(A){this.messageSigner=A.messageSigner,this.eventStreamCodec=new F13.EventStreamCodec(A.utf8Encoder,A.utf8Decoder),this.systemClockOffsetProvider=async()=>A.systemClockOffset??0}async handle(A,Q,B={}){let G=Q.request,{body:Z,headers:Y,query:J}=G;if(!(Z instanceof ReadableStream))throw Error("Eventstream payload must be a ReadableStream.");let X=new TransformStream;G.body=X.readable;let I;try{I=await A(Q)}catch(F){throw G.body.cancel(),F}let D=((Y.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||J&&J["X-Amz-Signature"]||"",K=z13(D,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return Z.pipeThrough(K).pipeThrough(X),I}}var C13=(A)=>new MhQ(A),$13=()=>(A)=>async(Q)=>{let B={...Q.input},G=await A(Q),Z=G.output;if(B.SessionId&&Z.SessionId==null)Z.SessionId=B.SessionId;return G},U13={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},q13=(A,Q)=>(B)=>(G)=>{let{request:Z}=G;if(qg1.HttpRequest.isInstance(Z)&&A.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){Z.protocol="wss:",Z.method="GET",Z.path=`${Z.path}-websocket`;let{headers:Y}=Z;delete Y["content-type"],delete Y["x-amz-content-sha256"];for(let J of Object.keys(Y))if(J.indexOf(Q.headerPrefix)===0){let X=J.replace(Q.headerPrefix,"");Z.query[X]=Y[J]}if(Y["x-amz-user-agent"])Z.query["user-agent"]=Y["x-amz-user-agent"];Z.headers={host:Y.host??Z.hostname}}return B(G)},N13={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},w13=(A,Q)=>({applyToStack:(B)=>{B.addRelativeTo(q13(A,Q),N13),B.add($13(),U13)}}),RhQ=(A)=>A.protocol==="ws:"||A.protocol==="wss:";class _hQ{signer;constructor(A){this.signer=A.signer}presign(A,Q={}){return this.signer.presign(A,Q)}async sign(A,Q){if(qg1.HttpRequest.isInstance(A)&&RhQ(A))return{...await this.signer.presign({...A,body:""},{...Q,expiresIn:60,unsignableHeaders:new Set(Object.keys(A.headers).filter((G)=>G!=="host"))}),body:A.body};else return this.signer.sign(A,Q)}}var L13=(A)=>{let{signer:Q}=A;return Object.assign(A,{signer:async(B)=>{let G=await Q(B);if(O13(G))return new _hQ({signer:G});throw Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},O13=(A)=>!!A,M13=2000;class Ng1{metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(A,Q=new LhQ.FetchHttpHandler){if(typeof A?.handle==="function")return A;return new Ng1(A,Q)}constructor(A,Q=new LhQ.FetchHttpHandler){if(this.httpHandler=Q,typeof A==="function")this.config={},this.configPromise=A().then((B)=>this.config=B??{});else this.config=A??{},this.configPromise=Promise.resolve(this.config)}destroy(){for(let[A,Q]of Object.entries(this.sockets)){for(let B of Q)B.close(1000,"Socket closed through destroy() call");delete this.sockets[A]}}async handle(A){if(!RhQ(A))return this.httpHandler.handle(A);let Q=E13.formatUrl(A),B=new WebSocket(Q);if(!this.sockets[Q])this.sockets[Q]=[];this.sockets[Q].push(B),B.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:G=M13}=this.config;await this.waitForReady(B,G);let{body:Z}=A,Y=R13(Z),J=this.connect(B,Y),X=_13(J);return{response:new qg1.HttpResponse({statusCode:200,body:X})}}updateHttpClientConfig(A,Q){this.configPromise=this.configPromise.then((B)=>{return B[A]=Q,B})}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(A){this.sockets[A]=(this.sockets[A]??[]).filter((Q)=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(Q.readyState))}waitForReady(A,Q){return new Promise((B,G)=>{let Z=setTimeout(()=>{this.removeNotUsableSockets(A.url),G({$metadata:{httpStatusCode:500}})},Q);A.onopen=()=>{clearTimeout(Z),B()}})}connect(A,Q){let B=void 0,G=!1,Z=()=>{},Y=()=>{};A.onmessage=(I)=>{Y({done:!1,value:new Uint8Array(I.data)})},A.onerror=(I)=>{G=!0,A.close(),Z(I)},A.onclose=()=>{if(this.removeNotUsableSockets(A.url),G)return;if(B)Z(B);else Y({done:!0,value:void 0})};let J={[Symbol.asyncIterator]:()=>({next:()=>{return new Promise((I,W)=>{Y=I,Z=W})}})};return(async()=>{try{for await(let I of Q)A.send(I)}catch(I){B=I}finally{A.close(1000)}})(),J}}var R13=(A)=>{if(A[Symbol.asyncIterator])return A;if(j13(A))return OhQ.readableStreamtoIterable(A);return{[Symbol.asyncIterator]:async function*(){yield A}}},_13=(A)=>typeof ReadableStream==="function"?OhQ.iterableToReadableStream(A):A,j13=(A)=>typeof ReadableStream==="function"&&A instanceof ReadableStream;T13.WebSocketFetchHandler=Ng1;T13.eventStreamPayloadHandlerProvider=C13;T13.getWebSocketPlugin=w13;T13.resolveWebSocketConfig=L13});var ThQ=U((k13)=>{var v13=(A)=>Object.assign(A,{eventStreamMarshaller:A.eventStreamSerdeProvider(A)});k13.resolveEventStreamSerdeConfig=v13});var jg1=U((d13)=>{d13.HttpAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(d13.HttpAuthLocation||(d13.HttpAuthLocation={}));d13.HttpApiKeyAuthLocation=void 0;(function(A){A.HEADER="header",A.QUERY="query"})(d13.HttpApiKeyAuthLocation||(d13.HttpApiKeyAuthLocation={}));d13.EndpointURLScheme=void 0;(function(A){A.HTTP="http",A.HTTPS="https"})(d13.EndpointURLScheme||(d13.EndpointURLScheme={}));d13.AlgorithmId=void 0;(function(A){A.MD5="md5",A.CRC32="crc32",A.CRC32C="crc32c",A.SHA1="sha1",A.SHA256="sha256"})(d13.AlgorithmId||(d13.AlgorithmId={}));var f13=(A)=>{let Q=[];if(A.sha256!==void 0)Q.push({algorithmId:()=>d13.AlgorithmId.SHA256,checksumConstructor:()=>A.sha256});if(A.md5!=null)Q.push({algorithmId:()=>d13.AlgorithmId.MD5,checksumConstructor:()=>A.md5});return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},h13=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},g13=(A)=>{return f13(A)},u13=(A)=>{return h13(A)};d13.FieldPosition=void 0;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(d13.FieldPosition||(d13.FieldPosition={}));var m13="__smithy_context";d13.IniSectionType=void 0;(function(A){A.PROFILE="profile",A.SSO_SESSION="sso-session",A.SERVICES="services"})(d13.IniSectionType||(d13.IniSectionType={}));d13.RequestHandlerProtocol=void 0;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(d13.RequestHandlerProtocol||(d13.RequestHandlerProtocol={}));d13.SMITHY_CONTEXT_KEY=m13;d13.getDefaultClientConfiguration=g13;d13.resolveDefaultRuntimeConfig=u13});var VwA=U((XYA)=>{var xhQ=Bv(),yg1=Iq(),Pg1=jg1(),i13=IX(),PhQ=Xq();class yhQ{config;middlewareStack=xhQ.constructStack();initConfig;handlers;constructor(A){this.config=A}send(A,Q,B){let G=typeof Q!=="function"?Q:void 0,Z=typeof Q==="function"?Q:B,Y=G===void 0&&this.config.cacheMiddleware===!0,J;if(Y){if(!this.handlers)this.handlers=new WeakMap;let X=this.handlers;if(X.has(A.constructor))J=X.get(A.constructor);else J=A.resolveMiddleware(this.middlewareStack,this.config,G),X.set(A.constructor,J)}else delete this.handlers,J=A.resolveMiddleware(this.middlewareStack,this.config,G);if(Z)J(A).then((X)=>Z(null,X.output),(X)=>Z(X)).catch(()=>{});else return J(A).then((X)=>X.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var Tg1="***SensitiveInformation***";function Sg1(A,Q){if(Q==null)return Q;let B=i13.NormalizedSchema.of(A);if(B.getMergedTraits().sensitive)return Tg1;if(B.isListSchema()){if(!!B.getValueSchema().getMergedTraits().sensitive)return Tg1}else if(B.isMapSchema()){if(!!B.getKeySchema().getMergedTraits().sensitive||!!B.getValueSchema().getMergedTraits().sensitive)return Tg1}else if(B.isStructSchema()&&typeof Q==="object"){let G=Q,Z={};for(let[Y,J]of B.structIterator())if(G[Y]!=null)Z[Y]=Sg1(J,G[Y]);return Z}return Q}class vg1{middlewareStack=xhQ.constructStack();schema;static classBuilder(){return new vhQ}resolveMiddlewareWithContext(A,Q,B,{middlewareFn:G,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,smithyContext:I,additionalContext:W,CommandCtor:D}){for(let E of G.bind(this)(D,A,Q,B))this.middlewareStack.use(E);let K=A.concat(this.middlewareStack),{logger:V}=Q,F={logger:V,clientName:Z,commandName:Y,inputFilterSensitiveLog:J,outputFilterSensitiveLog:X,[Pg1.SMITHY_CONTEXT_KEY]:{commandInstance:this,...I},...W},{requestHandler:H}=Q;return K.resolve((E)=>H.handle(E.request,B||{}),F)}}class vhQ{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(A){this._init=A}ep(A){return this._ep=A,this}m(A){return this._middlewareFn=A,this}s(A,Q,B={}){return this._smithyContext={service:A,operation:Q,...B},this}c(A={}){return this._additionalContext=A,this}n(A,Q){return this._clientName=A,this._commandName=Q,this}f(A=(B)=>B,Q=(B)=>B){return this._inputFilterSensitiveLog=A,this._outputFilterSensitiveLog=Q,this}ser(A){return this._serializer=A,this}de(A){return this._deserializer=A,this}sc(A){return this._operationSchema=A,this._smithyContext.operationSchema=A,this}build(){let A=this,Q;return Q=class extends vg1{input;static getEndpointParameterInstructions(){return A._ep}constructor(...[B]){super();this.input=B??{},A._init(this),this.schema=A._operationSchema}resolveMiddleware(B,G,Z){let Y=A._operationSchema,J=Y?.[4]??Y?.input,X=Y?.[5]??Y?.output;return this.resolveMiddlewareWithContext(B,G,Z,{CommandCtor:Q,middlewareFn:A._middlewareFn,clientName:A._clientName,commandName:A._commandName,inputFilterSensitiveLog:A._inputFilterSensitiveLog??(Y?Sg1.bind(null,J):(I)=>I),outputFilterSensitiveLog:A._outputFilterSensitiveLog??(Y?Sg1.bind(null,X):(I)=>I),smithyContext:A._smithyContext,additionalContext:A._additionalContext})}serialize=A._serializer;deserialize=A._deserializer}}}var n13="***SensitiveInformation***",a13=(A,Q)=>{for(let B of Object.keys(A)){let G=A[B],Z=async function(J,X,I){let W=new G(J);if(typeof X==="function")this.send(W,X);else if(typeof I==="function"){if(typeof X!=="object")throw Error(`Expected http options but got ${typeof X}`);this.send(W,X||{},I)}else return this.send(W,X)},Y=(B[0].toLowerCase()+B.slice(1)).replace(/Command$/,"");Q.prototype[Y]=Z}};class JYA extends Error{$fault;$response;$retryable;$metadata;constructor(A){super(A.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=A.name,this.$fault=A.$fault,this.$metadata=A.$metadata}static isInstance(A){if(!A)return!1;let Q=A;return JYA.prototype.isPrototypeOf(Q)||Boolean(Q.$fault)&&Boolean(Q.$metadata)&&(Q.$fault==="client"||Q.$fault==="server")}static[Symbol.hasInstance](A){if(!A)return!1;let Q=A;if(this===JYA)return JYA.isInstance(A);if(JYA.isInstance(A)){if(Q.name&&this.name)return this.prototype.isPrototypeOf(A)||Q.name===this.name;return this.prototype.isPrototypeOf(A)}return!1}}var khQ=(A,Q={})=>{Object.entries(Q).filter(([,G])=>G!==void 0).forEach(([G,Z])=>{if(A[G]==null||A[G]==="")A[G]=Z});let B=A.message||A.Message||"UnknownError";return A.message=B,delete A.Message,A},bhQ=({output:A,parsedBody:Q,exceptionCtor:B,errorCode:G})=>{let Z=r13(A),Y=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new B({name:Q?.code||Q?.Code||G||Y||"UnknownError",$fault:"client",$metadata:Z});throw khQ(J,Q)},o13=(A)=>{return({output:Q,parsedBody:B,errorCode:G})=>{bhQ({output:Q,parsedBody:B,exceptionCtor:A,errorCode:G})}},r13=(A)=>({httpStatusCode:A.statusCode,requestId:A.headers["x-amzn-requestid"]??A.headers["x-amzn-request-id"]??A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),s13=(A)=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},ShQ=!1,t13=(A)=>{if(A&&!ShQ&&parseInt(A.substring(1,A.indexOf(".")))<16)ShQ=!0},e13=(A)=>{let Q=[];for(let B in Pg1.AlgorithmId){let G=Pg1.AlgorithmId[B];if(A[G]===void 0)continue;Q.push({algorithmId:()=>G,checksumConstructor:()=>A[G]})}return{addChecksumAlgorithm(B){Q.push(B)},checksumAlgorithms(){return Q}}},A03=(A)=>{let Q={};return A.checksumAlgorithms().forEach((B)=>{Q[B.algorithmId()]=B.checksumConstructor()}),Q},Q03=(A)=>{return{setRetryStrategy(Q){A.retryStrategy=Q},retryStrategy(){return A.retryStrategy}}},B03=(A)=>{let Q={};return Q.retryStrategy=A.retryStrategy(),Q},fhQ=(A)=>{return Object.assign(e13(A),Q03(A))},G03=fhQ,Z03=(A)=>{return Object.assign(A03(A),B03(A))},Y03=(A)=>Array.isArray(A)?A:[A],hhQ=(A)=>{for(let B in A)if(A.hasOwnProperty(B)&&A[B]["#text"]!==void 0)A[B]=A[B]["#text"];else if(typeof A[B]==="object"&&A[B]!==null)A[B]=hhQ(A[B]);return A},J03=(A)=>{return A!=null};class ghQ{trace(){}debug(){}info(){}warn(){}error(){}}function uhQ(A,Q,B){let G,Z,Y;if(typeof Q>"u"&&typeof B>"u")G={},Y=A;else if(G=A,typeof Q==="function")return Z=Q,Y=B,W03(G,Z,Y);else Y=Q;for(let J of Object.keys(Y)){if(!Array.isArray(Y[J])){G[J]=Y[J];continue}mhQ(G,null,Y,J)}return G}var X03=(A)=>{let Q={};for(let[B,G]of Object.entries(A||{}))Q[B]=[,G];return Q},I03=(A,Q)=>{let B={};for(let G in Q)mhQ(B,A,Q,G);return B},W03=(A,Q,B)=>{return uhQ(A,Object.entries(B).reduce((G,[Z,Y])=>{if(Array.isArray(Y))G[Z]=Y;else if(typeof Y==="function")G[Z]=[Q,Y()];else G[Z]=[Q,Y];return G},{}))},mhQ=(A,Q,B,G)=>{if(Q!==null){let J=B[G];if(typeof J==="function")J=[,J];let[X=D03,I=K03,W=G]=J;if(typeof X==="function"&&X(Q[W])||typeof X!=="function"&&!!X)A[G]=I(Q[W]);return}let[Z,Y]=B[G];if(typeof Y==="function"){let J,X=Z===void 0&&(J=Y())!=null,I=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)A[G]=J;else if(I)A[G]=Y()}else{let J=Z===void 0&&Y!=null,X=typeof Z==="function"&&!!Z(Y)||typeof Z!=="function"&&!!Z;if(J||X)A[G]=Y}},D03=(A)=>A!=null,K03=(A)=>A,V03=(A)=>{if(A!==A)return"NaN";switch(A){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return A}},F03=(A)=>A.toISOString().replace(".000Z","Z"),xg1=(A)=>{if(A==null)return{};if(Array.isArray(A))return A.filter((Q)=>Q!=null).map(xg1);if(typeof A==="object"){let Q={};for(let B of Object.keys(A)){if(A[B]==null)continue;Q[B]=xg1(A[B])}return Q}return A};Object.defineProperty(XYA,"collectBody",{enumerable:!0,get:function(){return yg1.collectBody}});Object.defineProperty(XYA,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return yg1.extendedEncodeURIComponent}});Object.defineProperty(XYA,"resolvedPath",{enumerable:!0,get:function(){return yg1.resolvedPath}});XYA.Client=yhQ;XYA.Command=vg1;XYA.NoOpLogger=ghQ;XYA.SENSITIVE_STRING=n13;XYA.ServiceException=JYA;XYA._json=xg1;XYA.convertMap=X03;XYA.createAggregatedClient=a13;XYA.decorateServiceException=khQ;XYA.emitWarningIfUnsupportedVersion=t13;XYA.getArrayIfSingleItem=Y03;XYA.getDefaultClientConfiguration=G03;XYA.getDefaultExtensionConfiguration=fhQ;XYA.getValueFromTextNode=hhQ;XYA.isSerializableHeaderValue=J03;XYA.loadConfigsForDefaultMode=s13;XYA.map=uhQ;XYA.resolveDefaultRuntimeConfig=Z03;XYA.serializeDateTime=F03;XYA.serializeFloat=V03;XYA.take=I03;XYA.throwDefaultError=bhQ;XYA.withBaseException=o13;Object.keys(PhQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(XYA,A))Object.defineProperty(XYA,A,{enumerable:!0,get:function(){return PhQ[A]}})})});var fg1=U((dhQ)=>{Object.defineProperty(dhQ,"__esModule",{value:!0});dhQ.resolveHttpAuthSchemeConfig=dhQ.defaultBedrockRuntimeHttpAuthSchemeProvider=dhQ.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var f03=vY(),kg1=iG(),bg1=Iz(),h03=async(A,Q,B)=>{return{operation:(0,bg1.getSmithyContext)(Q).operation,region:await(0,bg1.normalizeProvider)(A.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};dhQ.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=h03;function g03(A){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:A.region},propertiesExtractor:(Q,B)=>({signingProperties:{config:Q,context:B}})}}function u03(A){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:Q,filepath:B,configFilepath:G,ignoreCache:Z},Y)=>({identityProperties:{profile:Q,filepath:B,configFilepath:G,ignoreCache:Z}})}}var m03=(A)=>{let Q=[];switch(A.operation){default:Q.push(g03(A)),Q.push(u03(A))}return Q};dhQ.defaultBedrockRuntimeHttpAuthSchemeProvider=m03;var d03=(A)=>{let Q=(0,kg1.memoizeIdentityProvider)(A.token,kg1.isIdentityExpired,kg1.doesIdentityRequireRefresh),B=(0,f03.resolveAwsSdkSigV4Config)(A);return Object.assign(B,{authSchemePreference:(0,bg1.normalizeProvider)(A.authSchemePreference??[]),token:Q})};dhQ.resolveHttpAuthSchemeConfig=d03});var chQ=U((M5G,l03)=>{l03.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.936.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.936.0","@aws-sdk/credential-provider-node":"3.936.0","@aws-sdk/eventstream-handler-node":"3.936.0","@aws-sdk/middleware-eventstream":"3.936.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.936.0","@aws-sdk/middleware-websocket":"3.936.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/token-providers":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.936.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/eventstream-serde-browser":"^4.2.5","@smithy/eventstream-serde-config-resolver":"^4.3.5","@smithy/eventstream-serde-node":"^4.2.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-stream":"^4.5.6","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var nhQ=U((o03)=>{var i03=XwA(),TrA=qA("stream");class lhQ extends TrA.Transform{priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(A){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...A});this.priorSignature=A.priorSignature,this.eventStreamCodec=A.eventStreamCodec,this.messageSigner=A.messageSigner,this.systemClockOffsetProvider=A.systemClockOffsetProvider}async _transform(A,Q,B){try{let G=new Date(Date.now()+await this.systemClockOffsetProvider()),Z={":date":{type:"timestamp",value:G}},Y=await this.messageSigner.sign({message:{body:A,headers:Z},priorSignature:this.priorSignature},{signingDate:G});this.priorSignature=Y.signature;let J=this.eventStreamCodec.encode({headers:{...Z,":chunk-signature":{type:"binary",value:n03(Y.signature)}},body:A});return this.push(J),B()}catch(G){B(G)}}}function n03(A){let Q=Buffer.from(A,"hex");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength/Uint8Array.BYTES_PER_ELEMENT)}class ihQ{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(A){this.messageSigner=A.messageSigner,this.eventStreamCodec=new i03.EventStreamCodec(A.utf8Encoder,A.utf8Decoder),this.systemClockOffsetProvider=async()=>A.systemClockOffset??0}async handle(A,Q,B={}){let G=Q.request,{body:Z,query:Y}=G;if(!(Z instanceof TrA.Readable))throw Error("Eventstream payload must be a Readable stream.");let J=Z;G.body=new TrA.PassThrough({objectMode:!0});let I=G.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??Y?.["X-Amz-Signature"]??"",W=new lhQ({priorSignature:I,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});TrA.pipeline(J,W,G.body,(K)=>{if(K)throw K});let D;try{D=await A(Q)}catch(K){throw G.body.end(),K}return D}}var a03=(A)=>new ihQ(A);o03.eventStreamPayloadHandlerProvider=a03});var ahQ=U((AQ3)=>{var FwA=XwA();function s03(A){let Q=0,B=0,G=null,Z=null,Y=(X)=>{if(typeof X!=="number")throw Error("Attempted to allocate an event message where size was not a number: "+X);Q=X,B=4,G=new Uint8Array(X),new DataView(G.buffer).setUint32(0,X,!1)},J=async function*(){let X=A[Symbol.asyncIterator]();while(!0){let{value:I,done:W}=await X.next();if(W){if(!Q)return;else if(Q===B)yield G;else throw Error("Truncated event message received.");return}let D=I.length,K=0;while(K<D){if(!G){let F=D-K;if(!Z)Z=new Uint8Array(4);let H=Math.min(4-B,F);if(Z.set(I.slice(K,K+H),B),B+=H,K+=H,B<4)break;Y(new DataView(Z.buffer).getUint32(0,!1)),Z=null}let V=Math.min(Q-B,D-K);if(G.set(I.slice(K,K+V),B),B+=V,K+=V,Q&&Q===B)yield G,G=null,Q=0,B=0}}};return{[Symbol.asyncIterator]:J}}function t03(A,Q){return async function(B){let{value:G}=B.headers[":message-type"];if(G==="error"){let Z=Error(B.headers[":error-message"].value||"UnknownError");throw Z.name=B.headers[":error-code"].value,Z}else if(G==="exception"){let Z=B.headers[":exception-type"].value,Y={[Z]:B},J=await A(Y);if(J.$unknown){let X=Error(Q(B.body));throw X.name=Z,X}throw J[Z]}else if(G==="event"){let Z={[B.headers[":event-type"].value]:B},Y=await A(Z);if(Y.$unknown)return;return Y}else throw Error(`Unrecognizable event type: ${B.headers[":event-type"].value}`)}}class hg1{eventStreamCodec;utfEncoder;constructor({utf8Encoder:A,utf8Decoder:Q}){this.eventStreamCodec=new FwA.EventStreamCodec(A,Q),this.utfEncoder=A}deserialize(A,Q){let B=s03(A);return new FwA.SmithyMessageDecoderStream({messageStream:new FwA.MessageDecoderStream({inputStream:B,decoder:this.eventStreamCodec}),deserializer:t03(Q,this.utfEncoder)})}serialize(A,Q){return new FwA.MessageEncoderStream({messageStream:new FwA.SmithyMessageEncoderStream({inputStream:A,serializer:Q}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}var e03=(A)=>new hg1(A);AQ3.EventStreamMarshaller=hg1;AQ3.eventStreamSerdeProvider=e03});var ohQ=U((XQ3)=>{var GQ3=ahQ(),ZQ3=qA("stream");async function*YQ3(A){let Q=!1,B=!1,G=[];A.on("error",(Z)=>{if(!Q)Q=!0;if(Z)throw Z}),A.on("data",(Z)=>{G.push(Z)}),A.on("end",()=>{Q=!0});while(!B){let Z=await new Promise((Y)=>setTimeout(()=>Y(G.shift()),0));if(Z)yield Z;B=Q&&G.length===0}}class gg1{universalMarshaller;constructor({utf8Encoder:A,utf8Decoder:Q}){this.universalMarshaller=new GQ3.EventStreamMarshaller({utf8Decoder:Q,utf8Encoder:A})}deserialize(A,Q){let B=typeof A[Symbol.asyncIterator]==="function"?A:YQ3(A);return this.universalMarshaller.deserialize(B,Q)}serialize(A,Q){return ZQ3.Readable.from(this.universalMarshaller.serialize(A,Q))}}var JQ3=(A)=>new gg1(A);XQ3.EventStreamMarshaller=gg1;XQ3.eventStreamSerdeProvider=JQ3});var rhQ=U((KQ3)=>{var DQ3=(A)=>typeof ArrayBuffer==="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]";KQ3.isArrayBuffer=DQ3});var mg1=U((zQ3)=>{var FQ3=rhQ(),ug1=qA("buffer"),HQ3=(A,Q=0,B=A.byteLength-Q)=>{if(!FQ3.isArrayBuffer(A))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof A} (${A})`);return ug1.Buffer.from(A,Q,B)},EQ3=(A,Q)=>{if(typeof A!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof A} (${A})`);return Q?ug1.Buffer.from(A,Q):ug1.Buffer.from(A)};zQ3.fromArrayBuffer=HQ3;zQ3.fromString=EQ3});var ehQ=U((shQ)=>{Object.defineProperty(shQ,"__esModule",{value:!0});shQ.fromBase64=void 0;var UQ3=mg1(),qQ3=/^[A-Za-z0-9+/]*={0,2}$/,NQ3=(A)=>{if(A.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!qQ3.exec(A))throw TypeError("Invalid base64 string.");let Q=(0,UQ3.fromString)(A,"base64");return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)};shQ.fromBase64=NQ3});var BgQ=U((AgQ)=>{Object.defineProperty(AgQ,"__esModule",{value:!0});AgQ.toBase64=void 0;var wQ3=mg1(),LQ3=lG(),OQ3=(A)=>{let Q;if(typeof A==="string")Q=(0,LQ3.fromUtf8)(A);else Q=A;if(typeof Q!=="object"||typeof Q.byteOffset!=="number"||typeof Q.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,wQ3.fromArrayBuffer)(Q.buffer,Q.byteOffset,Q.byteLength).toString("base64")};AgQ.toBase64=OQ3});var YgQ=U((HwA)=>{var GgQ=ehQ(),ZgQ=BgQ();Object.keys(GgQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(HwA,A))Object.defineProperty(HwA,A,{enumerable:!0,get:function(){return GgQ[A]}})});Object.keys(ZgQ).forEach(function(A){if(A!=="default"&&!Object.prototype.hasOwnProperty.call(HwA,A))Object.defineProperty(HwA,A,{enumerable:!0,get:function(){return ZgQ[A]}})})});var NgQ=U((UgQ)=>{Object.defineProperty(UgQ,"__esModule",{value:!0});UgQ.ruleSet=void 0;var zgQ="required",Uv="fn",qv="argv",WYA="ref",JgQ=!0,XgQ="isSet",zwA="booleanEquals",IYA="error",EwA="endpoint",eC="tree",dg1="PartitionResult",IgQ={[zgQ]:!1,type:"string"},WgQ={[zgQ]:!0,default:!1,type:"boolean"},DgQ={[WYA]:"Endpoint"},CgQ={[Uv]:zwA,[qv]:[{[WYA]:"UseFIPS"},!0]},$gQ={[Uv]:zwA,[qv]:[{[WYA]:"UseDualStack"},!0]},$v={},KgQ={[Uv]:"getAttr",[qv]:[{[WYA]:dg1},"supportsFIPS"]},VgQ={[Uv]:zwA,[qv]:[!0,{[Uv]:"getAttr",[qv]:[{[WYA]:dg1},"supportsDualStack"]}]},FgQ=[CgQ],HgQ=[$gQ],EgQ=[{[WYA]:"Region"}],MQ3={version:"1.0",parameters:{Region:IgQ,UseDualStack:WgQ,UseFIPS:WgQ,Endpoint:IgQ},rules:[{conditions:[{[Uv]:XgQ,[qv]:[DgQ]}],rules:[{conditions:FgQ,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:IYA},{rules:[{conditions:HgQ,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:IYA},{endpoint:{url:DgQ,properties:$v,headers:$v},type:EwA}],type:eC}],type:eC},{rules:[{conditions:[{[Uv]:XgQ,[qv]:EgQ}],rules:[{conditions:[{[Uv]:"aws.partition",[qv]:EgQ,assign:dg1}],rules:[{conditions:[CgQ,$gQ],rules:[{conditions:[{[Uv]:zwA,[qv]:[JgQ,KgQ]},VgQ],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:$v,headers:$v},type:EwA}],type:eC}],type:eC},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:IYA}],type:eC},{conditions:FgQ,rules:[{conditions:[{[Uv]:zwA,[qv]:[KgQ,JgQ]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:$v,headers:$v},type:EwA}],type:eC}],type:eC},{error:"FIPS is enabled but this partition does not support FIPS",type:IYA}],type:eC},{conditions:HgQ,rules:[{conditions:[VgQ],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:$v,headers:$v},type:EwA}],type:eC}],type:eC},{error:"DualStack is enabled but this partition does not support DualStack",type:IYA}],type:eC},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:$v,headers:$v},type:EwA}],type:eC}],type:eC}],type:eC},{error:"Invalid Configuration: Missing Region",type:IYA}],type:eC}]};UgQ.ruleSet=MQ3});var OgQ=U((wgQ)=>{Object.defineProperty(wgQ,"__esModule",{value:!0});wgQ.defaultEndpointResolver=void 0;var RQ3=Qv(),pg1=FT(),_Q3=NgQ(),jQ3=new pg1.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),TQ3=(A,Q={})=>{return jQ3.get(A,()=>(0,pg1.resolveEndpoint)(_Q3.ruleSet,{endpointParams:A,logger:Q.logger}))};wgQ.defaultEndpointResolver=TQ3;pg1.customEndpointFunctions.aws=RQ3.awsEndpointFunctions});var TgQ=U((_gQ)=>{Object.defineProperty(_gQ,"__esModule",{value:!0});_gQ.getRuntimeConfig=void 0;var PQ3=vY(),SQ3=yg(),xQ3=iG(),yQ3=VwA(),vQ3=vM(),MgQ=YgQ(),RgQ=lG(),kQ3=fg1(),bQ3=OgQ(),fQ3=(A)=>{return{apiVersion:"2023-09-30",base64Decoder:A?.base64Decoder??MgQ.fromBase64,base64Encoder:A?.base64Encoder??MgQ.toBase64,disableHostPrefix:A?.disableHostPrefix??!1,endpointProvider:A?.endpointProvider??bQ3.defaultEndpointResolver,extensions:A?.extensions??[],httpAuthSchemeProvider:A?.httpAuthSchemeProvider??kQ3.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Q)=>Q.getIdentityProvider("aws.auth#sigv4"),signer:new PQ3.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:(Q)=>Q.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new xQ3.HttpBearerAuthSigner}],logger:A?.logger??new yQ3.NoOpLogger,protocol:A?.protocol??new SQ3.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.bedrockruntime"}),serviceId:A?.serviceId??"Bedrock Runtime",urlParser:A?.urlParser??vQ3.parseUrl,utf8Decoder:A?.utf8Decoder??RgQ.fromUtf8,utf8Encoder:A?.utf8Encoder??RgQ.toUtf8}};_gQ.getRuntimeConfig=fQ3});var bgQ=U((vgQ)=>{Object.defineProperty(vgQ,"__esModule",{value:!0});vgQ.getRuntimeConfig=void 0;var hQ3=NZ(),gQ3=hQ3.__importDefault(chQ()),cg1=vY(),uQ3=G0A(),mQ3=nhQ(),PgQ=aaA(),SgQ=Tg(),PrA=wW(),dQ3=iG(),pQ3=ohQ(),cQ3=Pg(),xgQ=wH(),F0A=Dq(),ygQ=dw(),lQ3=Sg(),iQ3=Jv(),nQ3=TgQ(),aQ3=VwA(),oQ3=kg(),rQ3=VwA(),sQ3=(A)=>{(0,rQ3.emitWarningIfUnsupportedVersion)(process.version);let Q=(0,oQ3.resolveDefaultsModeConfig)(A),B=()=>Q().then(aQ3.loadConfigsForDefaultMode),G=(0,nQ3.getRuntimeConfig)(A);(0,cg1.emitWarningIfUnsupportedVersion)(process.version);let Z={profile:A?.profile,logger:G.logger,signingName:"bedrock"};return{...G,...A,runtime:"node",defaultsMode:Q,authSchemePreference:A?.authSchemePreference??(0,F0A.loadConfig)(cg1.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,Z),bodyLengthChecker:A?.bodyLengthChecker??lQ3.calculateBodyLength,credentialDefaultProvider:A?.credentialDefaultProvider??uQ3.defaultProvider,defaultUserAgentProvider:A?.defaultUserAgentProvider??(0,SgQ.createDefaultUserAgentProvider)({serviceId:G.serviceId,clientVersion:gQ3.default.version}),eventStreamPayloadHandlerProvider:A?.eventStreamPayloadHandlerProvider??mQ3.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:A?.eventStreamSerdeProvider??pQ3.eventStreamSerdeProvider,httpAuthSchemes:A?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(Y)=>Y.getIdentityProvider("aws.auth#sigv4"),signer:new cg1.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:(Y)=>Y.getIdentityProvider("smithy.api#httpBearerAuth")||(async(J)=>{try{return await(0,PgQ.fromEnvSigningName)({signingName:"bedrock"})()}catch(X){return await(0,PgQ.nodeProvider)(J)(J)}}),signer:new dQ3.HttpBearerAuthSigner}],maxAttempts:A?.maxAttempts??(0,F0A.loadConfig)(xgQ.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,A),region:A?.region??(0,F0A.loadConfig)(PrA.NODE_REGION_CONFIG_OPTIONS,{...PrA.NODE_REGION_CONFIG_FILE_OPTIONS,...Z}),requestHandler:ygQ.NodeHttp2Handler.create(A?.requestHandler??(async()=>({...await B(),disableConcurrentStreams:!0}))),retryMode:A?.retryMode??(0,F0A.loadConfig)({...xgQ.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await B()).retryMode||iQ3.DEFAULT_RETRY_MODE},A),sha256:A?.sha256??cQ3.Hash.bind(null,"sha256"),streamCollector:A?.streamCollector??ygQ.streamCollector,useDualstackEndpoint:A?.useDualstackEndpoint??(0,F0A.loadConfig)(PrA.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,Z),useFipsEndpoint:A?.useFipsEndpoint??(0,F0A.loadConfig)(PrA.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,Z),userAgentAppId:A?.userAgentAppId??(0,F0A.loadConfig)(SgQ.NODE_APP_ID_CONFIG_OPTIONS,Z)}};vgQ.getRuntimeConfig=sQ3});var ugQ=U((GB3)=>{var tQ3=jg1(),eQ3=(A)=>{return{setHttpHandler(Q){A.httpHandler=Q},httpHandler(){return A.httpHandler},updateHttpClientConfig(Q,B){A.httpHandler?.updateHttpClientConfig(Q,B)},httpHandlerConfigs(){return A.httpHandler.httpHandlerConfigs()}}},AB3=(A)=>{return{httpHandler:A.httpHandler()}};class fgQ{name;kind;values;constructor({name:A,kind:Q=tQ3.FieldPosition.HEADER,values:B=[]}){this.name=A,this.kind=Q,this.values=B}add(A){this.values.push(A)}set(A){this.values=A}remove(A){this.values=this.values.filter((Q)=>Q!==A)}toString(){return this.values.map((A)=>A.includes(",")||A.includes(" ")?`"${A}"`:A).join(", ")}get(){return this.values}}class hgQ{entries={};encoding;constructor({fields:A=[],encoding:Q="utf-8"}){A.forEach(this.setField.bind(this)),this.encoding=Q}setField(A){this.entries[A.name.toLowerCase()]=A}getField(A){return this.entries[A.toLowerCase()]}removeField(A){delete this.entries[A.toLowerCase()]}getByType(A){return Object.values(this.entries).filter((Q)=>Q.kind===A)}}class SrA{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(A){this.method=A.method||"GET",this.hostname=A.hostname||"localhost",this.port=A.port,this.query=A.query||{},this.headers=A.headers||{},this.body=A.body,this.protocol=A.protocol?A.protocol.slice(-1)!==":"?`${A.protocol}:`:A.protocol:"https:",this.path=A.path?A.path.charAt(0)!=="/"?`/${A.path}`:A.path:"/",this.username=A.username,this.password=A.password,this.fragment=A.fragment}static clone(A){let Q=new SrA({...A,headers:{...A.headers}});if(Q.query)Q.query=QB3(Q.query);return Q}static isInstance(A){if(!A)return!1;let Q=A;return"method"in Q&&"protocol"in Q&&"hostname"in Q&&"path"in Q&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){return SrA.clone(this)}}function QB3(A){return Object.keys(A).reduce((Q,B)=>{let G=A[B];return{...Q,[B]:Array.isArray(G)?[...G]:G}},{})}class ggQ{statusCode;reason;headers;body;constructor(A){this.statusCode=A.statusCode,this.reason=A.reason,this.headers=A.headers||{},this.body=A.body}static isInstance(A){if(!A)return!1;let Q=A;return typeof Q.statusCode==="number"&&typeof Q.headers==="object"}}function BB3(A){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(A)}GB3.Field=fgQ;GB3.Fields=hgQ;GB3.HttpRequest=SrA;GB3.HttpResponse=ggQ;GB3.getHttpHandlerExtensionConfiguration=eQ3;GB3.isValidHostname=BB3;GB3.resolveHttpHandlerRuntimeConfig=AB3});var JsA=U((yu1)=>{var AuQ=JfQ(),mgQ=zg(),KB3=Cg(),VB3=$g(),dgQ=Zv(),QuQ=jhQ(),FB3=wW(),xrA=iG(),zq=IX(),HB3=ThQ(),EB3=jg(),OT=HT(),pgQ=wH(),_H=VwA(),cgQ=fg1(),zB3=bgQ(),lgQ=ET(),igQ=ugQ(),CB3=(A)=>{return Object.assign(A,{useDualstackEndpoint:A.useDualstackEndpoint??!1,useFipsEndpoint:A.useFipsEndpoint??!1,defaultSigningName:"bedrock"})},Nv={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},$B3=(A)=>{let{httpAuthSchemes:Q,httpAuthSchemeProvider:B,credentials:G,token:Z}=A;return{setHttpAuthScheme(Y){let J=Q.findIndex((X)=>X.schemeId===Y.schemeId);if(J===-1)Q.push(Y);else Q.splice(J,1,Y)},httpAuthSchemes(){return Q},setHttpAuthSchemeProvider(Y){B=Y},httpAuthSchemeProvider(){return B},setCredentials(Y){G=Y},credentials(){return G},setToken(Y){Z=Y},token(){return Z}}},UB3=(A)=>{return{httpAuthSchemes:A.httpAuthSchemes(),httpAuthSchemeProvider:A.httpAuthSchemeProvider(),credentials:A.credentials(),token:A.token()}},qB3=(A,Q)=>{let B=Object.assign(lgQ.getAwsRegionExtensionConfiguration(A),_H.getDefaultExtensionConfiguration(A),igQ.getHttpHandlerExtensionConfiguration(A),$B3(A));return Q.forEach((G)=>G.configure(B)),Object.assign(A,lgQ.resolveAwsRegionExtensionConfiguration(B),_H.resolveDefaultRuntimeConfig(B),igQ.resolveHttpHandlerRuntimeConfig(B),UB3(B))};class vrA extends _H.Client{config;constructor(...[A]){let Q=zB3.getRuntimeConfig(A||{});super(Q);this.initConfig=Q;let B=CB3(Q),G=dgQ.resolveUserAgentConfig(B),Z=pgQ.resolveRetryConfig(G),Y=FB3.resolveRegionConfig(Z),J=mgQ.resolveHostHeaderConfig(Y),X=OT.resolveEndpointConfig(J),I=HB3.resolveEventStreamSerdeConfig(X),W=cgQ.resolveHttpAuthSchemeConfig(I),D=AuQ.resolveEventStreamConfig(W),K=QuQ.resolveWebSocketConfig(D),V=qB3(K,A?.extensions||[]);this.config=V,this.middlewareStack.use(zq.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(dgQ.getUserAgentPlugin(this.config)),this.middlewareStack.use(pgQ.getRetryPlugin(this.config)),this.middlewareStack.use(EB3.getContentLengthPlugin(this.config)),this.middlewareStack.use(mgQ.getHostHeaderPlugin(this.config)),this.middlewareStack.use(KB3.getLoggerPlugin(this.config)),this.middlewareStack.use(VB3.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(xrA.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:cgQ.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(F)=>new xrA.DefaultIdentityProviderConfig({"aws.auth#sigv4":F.credentials,"smithy.api#httpBearerAuth":F.token})})),this.middlewareStack.use(xrA.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}var Cq=class A extends _H.ServiceException{constructor(Q){super(Q);Object.setPrototypeOf(this,A.prototype)}},BuQ=class A extends Cq{name="AccessDeniedException";$fault="client";constructor(Q){super({name:"AccessDeniedException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},GuQ=class A extends Cq{name="InternalServerException";$fault="server";constructor(Q){super({name:"InternalServerException",$fault:"server",...Q});Object.setPrototypeOf(this,A.prototype)}},ZuQ=class A extends Cq{name="ThrottlingException";$fault="client";constructor(Q){super({name:"ThrottlingException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},YuQ=class A extends Cq{name="ValidationException";$fault="client";constructor(Q){super({name:"ValidationException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},JuQ=class A extends Cq{name="ConflictException";$fault="client";constructor(Q){super({name:"ConflictException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},XuQ=class A extends Cq{name="ResourceNotFoundException";$fault="client";constructor(Q){super({name:"ResourceNotFoundException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},IuQ=class A extends Cq{name="ServiceQuotaExceededException";$fault="client";constructor(Q){super({name:"ServiceQuotaExceededException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},WuQ=class A extends Cq{name="ServiceUnavailableException";$fault="server";constructor(Q){super({name:"ServiceUnavailableException",$fault:"server",...Q});Object.setPrototypeOf(this,A.prototype)}},DuQ=class A extends Cq{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(Q){super({name:"ModelErrorException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.originalStatusCode=Q.originalStatusCode,this.resourceName=Q.resourceName}},KuQ=class A extends Cq{name="ModelNotReadyException";$fault="client";$retryable={};constructor(Q){super({name:"ModelNotReadyException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},VuQ=class A extends Cq{name="ModelTimeoutException";$fault="client";constructor(Q){super({name:"ModelTimeoutException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype)}},FuQ=class A extends Cq{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(Q){super({name:"ModelStreamErrorException",$fault:"client",...Q});Object.setPrototypeOf(this,A.prototype),this.originalStatusCode=Q.originalStatusCode,this.originalMessage=Q.originalMessage}},NB3="Accept",wB3="AccessDeniedException",LB3="ApplyGuardrail",OB3="ApplyGuardrailRequest",MB3="ApplyGuardrailResponse",RB3="AsyncInvokeMessage",_B3="AsyncInvokeOutputDataConfig",jB3="AsyncInvokeSummary",TB3="AsyncInvokeS3OutputDataConfig",PB3="AsyncInvokeSummaries",SB3="AnyToolChoice",xB3="AutoToolChoice",yB3="Body",vB3="BidirectionalInputPayloadPart",kB3="BidirectionalOutputPayloadPart",bB3="Citation",fB3="ContentBlocks",hB3="ContentBlockDelta",gB3="ContentBlockDeltaEvent",uB3="ContentBlockStart",mB3="ContentBlockStartEvent",dB3="ContentBlockStopEvent",pB3="ContentBlock",cB3="CitationsConfig",lB3="CitationsContentBlock",iB3="CitationsDelta",nB3="ConflictException",aB3="CitationGeneratedContent",oB3="CitationGeneratedContentList",rB3="CitationLocation",sB3="ConverseMetrics",tB3="ConverseOutput",eB3="CachePointBlock",A23="ConverseRequest",Q23="ConverseResponse",B23="ConverseStream",G23="CitationSourceContent",Z23="CitationSourceContentDelta",Y23="CitationSourceContentList",J23="CitationSourceContentListDelta",X23="ConverseStreamMetrics",I23="ConverseStreamMetadataEvent",W23="ConverseStreamOutput",D23="ConverseStreamRequest",K23="ConverseStreamResponse",V23="ConverseStreamTrace",F23="ConverseTrace",H23="CountTokensInput",E23="ConverseTokensRequest",z23="CountTokensRequest",C23="CountTokensResponse",ig1="Content-Type",$23="CountTokens",U23="Citations",q23="Converse",N23="DocumentBlock",w23="DocumentContentBlocks",L23="DocumentContentBlock",O23="DocumentCharLocation",M23="DocumentChunkLocation",R23="DocumentPageLocation",_23="DocumentSource",j23="GuardrailAssessment",T23="GetAsyncInvoke",P23="GetAsyncInvokeRequest",S23="GetAsyncInvokeResponse",x23="GuardrailAssessmentList",y23="GuardrailAssessmentListMap",v23="GuardrailAssessmentMap",k23="GuardrailAutomatedReasoningDifferenceScenarioList",b23="GuardrailAutomatedReasoningFinding",f23="GuardrailAutomatedReasoningFindingList",h23="GuardrailAutomatedReasoningImpossibleFinding",g23="GuardrailAutomatedReasoningInvalidFinding",u23="GuardrailAutomatedReasoningInputTextReference",m23="GuardrailAutomatedReasoningInputTextReferenceList",d23="GuardrailAutomatedReasoningLogicWarning",p23="GuardrailAutomatedReasoningNoTranslationsFinding",c23="GuardrailAutomatedReasoningPolicyAssessment",l23="GuardrailAutomatedReasoningRule",i23="GuardrailAutomatedReasoningRuleList",n23="GuardrailAutomatedReasoningScenario",a23="GuardrailAutomatedReasoningSatisfiableFinding",o23="GuardrailAutomatedReasoningStatementList",r23="GuardrailAutomatedReasoningStatementLogicContent",s23="GuardrailAutomatedReasoningStatementNaturalLanguageContent",t23="GuardrailAutomatedReasoningStatement",e23="GuardrailAutomatedReasoningTranslation",A93="GuardrailAutomatedReasoningTranslationAmbiguousFinding",Q93="GuardrailAutomatedReasoningTooComplexFinding",B93="GuardrailAutomatedReasoningTranslationList",G93="GuardrailAutomatedReasoningTranslationOption",Z93="GuardrailAutomatedReasoningTranslationOptionList",Y93="GuardrailAutomatedReasoningValidFinding",J93="GuardrailConfiguration",X93="GuardrailContentBlock",I93="GuardrailContentBlockList",W93="GuardrailConverseContentBlock",D93="GuardrailContentFilter",K93="GuardrailContentFilterList",V93="GuardrailContextualGroundingFilter",F93="GuardrailContextualGroundingFilters",H93="GuardrailContextualGroundingPolicyAssessment",E93="GuardrailConverseImageBlock",z93="GuardrailConverseImageSource",C93="GuardrailContentPolicyAssessment",$93="GuardrailConverseTextBlock",U93="GuardrailCustomWord",q93="GuardrailCustomWordList",N93="GuardrailCoverage",w93="GuardrailImageBlock",L93="GuardrailImageCoverage",O93="GuardrailInvocationMetrics",M93="GuardrailImageSource",R93="GuardrailManagedWord",_93="GuardrailManagedWordList",j93="GuardrailOutputContent",T93="GuardrailOutputContentList",P93="GuardrailPiiEntityFilter",S93="GuardrailPiiEntityFilterList",x93="GuardrailRegexFilter",y93="GuardrailRegexFilterList",v93="GuardrailStreamConfiguration",k93="GuardrailSensitiveInformationPolicyAssessment",b93="GuardrailTopic",f93="GuardrailTraceAssessment",h93="GuardrailTextBlock",g93="GuardrailTextCharactersCoverage",u93="GuardrailTopicList",m93="GuardrailTopicPolicyAssessment",d93="GuardrailUsage",p93="GuardrailWordPolicyAssessment",c93="ImageBlock",l93="InferenceConfiguration",i93="InvokeModel",n93="InvokeModelRequest",a93="InvokeModelResponse",o93="InvokeModelTokensRequest",r93="InvokeModelWithBidirectionalStream",s93="InvokeModelWithBidirectionalStreamInput",t93="InvokeModelWithBidirectionalStreamOutput",e93="InvokeModelWithBidirectionalStreamRequest",A43="InvokeModelWithBidirectionalStreamResponse",Q43="InvokeModelWithResponseStream",B43="InvokeModelWithResponseStreamRequest",G43="InvokeModelWithResponseStreamResponse",Z43="ImageSource",Y43="InternalServerException",J43="ListAsyncInvokes",X43="ListAsyncInvokesRequest",I43="ListAsyncInvokesResponse",W43="Message",D43="ModelErrorException",K43="ModelInputPayload",V43="ModelNotReadyException",F43="MessageStartEvent",H43="ModelStreamErrorException",E43="MessageStopEvent",z43="ModelTimeoutException",C43="Messages",$43="PartBody",U43="PerformanceConfiguration",q43="PayloadPart",N43="PromptRouterTrace",w43="PromptVariableMap",L43="PromptVariableValues",O43="ReasoningContentBlock",M43="ReasoningContentBlockDelta",R43="RequestMetadata",_43="ResourceNotFoundException",j43="ResponseStream",T43="ReasoningTextBlock",P43="StartAsyncInvoke",S43="StartAsyncInvokeRequest",x43="StartAsyncInvokeResponse",y43="SystemContentBlocks",v43="SystemContentBlock",k43="S3Location",b43="ServiceQuotaExceededException",f43="SearchResultBlock",h43="SearchResultContentBlock",g43="SearchResultContentBlocks",u43="SearchResultLocation",m43="ServiceTier",d43="SpecificToolChoice",p43="SystemTool",c43="ServiceUnavailableException",l43="Tag",i43="ToolConfiguration",n43="ToolChoice",a43="ThrottlingException",o43="ToolInputSchema",r43="TagList",s43="ToolResultBlock",t43="ToolResultBlocksDelta",e43="ToolResultBlockDelta",A63="ToolResultBlockStart",Q63="ToolResultContentBlocks",B63="ToolResultContentBlock",G63="ToolSpecification",Z63="TokenUsage",Y63="ToolUseBlock",J63="ToolUseBlockDelta",X63="ToolUseBlockStart",I63="Tools",W63="Tool",D63="VideoBlock",K63="ValidationException",V63="VideoSource",F63="WebLocation",H63="X-Amzn-Bedrock-Accept",E63="X-Amzn-Bedrock-Content-Type",HuQ="X-Amzn-Bedrock-GuardrailIdentifier",EuQ="X-Amzn-Bedrock-GuardrailVersion",krA="X-Amzn-Bedrock-PerformanceConfig-Latency",brA="X-Amzn-Bedrock-Service-Tier",zuQ="X-Amzn-Bedrock-Trace",ui="action",z63="asyncInvokeSummaries",ng1="additionalModelRequestFields",CuQ="additionalModelResponseFieldPaths",$uQ="additionalModelResponseFields",UuQ="actionReason",C63="automatedReasoningPolicy",$63="automatedReasoningPolicyUnits",U63="automatedReasoningPolicies",quQ="accept",q63="any",N63="assessments",w63="auto",mi="bytes",NuQ="bucketOwner",E0A="body",wv="client",L63="contentBlockDelta",ag1="contentBlockIndex",O63="contentBlockStart",M63="contentBlockStop",R63="citationsContent",_63="claimsFalseScenario",j63="contextualGroundingPolicy",T63="contextualGroundingPolicyUnits",P63="contentPolicy",S63="contentPolicyImageUnits",x63="contentPolicyUnits",og1="cachePoint",wuQ="contradictingRules",y63="cacheReadInputTokens",rg1="clientRequestToken",frA="contentType",LuQ="claimsTrueScenario",v63="customWords",k63="cacheWriteInputTokens",sg1="chunk",tg1="citations",b63="citation",OuQ="claims",DYA="content",f63="context",MuQ="confidence",h63="converse",g63="delta",u63="documentChar",m63="documentChunk",eg1="documentIndex",d63="documentPage",p63="differenceScenarios",z0A="detected",c63="description",l63="domain",RuQ="document",rM="error",_uQ="endTime",i63="enabled",hrA="end",$wA="format",juQ="failureMessage",n63="filterStrength",a63="findings",TuQ="filters",PuQ="guardrail",SuQ="guardrailCoverage",xuQ="guardrailConfig",yuQ="guardContent",UwA="guardrailIdentifier",o63="guardrailProcessingLatency",qwA="guardrailVersion",vuQ="guarded",Lv="http",sM="httpError",yD="httpHeader",H0A="httpQuery",Au1="input",grA="invocationArn",r63="inputAssessment",kuQ="inferenceConfig",s63="invocationMetrics",t63="invokedModelId",e63="invokeModel",A33="inputSchema",Qu1="internalServerException",buQ="inputTokens",Q33="identifier",B33="images",urA="image",G33="impossible",Z33="invalid",fuQ="json",Y33="key",J33="kmsKeyId",huQ="location",guQ="latencyMs",uuQ="lastModifiedTime",mrA="logicWarning",X33="latency",I33="logic",ow="message",muQ="modelArn",C0A="modelId",W33="modelInput",D33="modelOutput",ngQ="maxResults",K33="messageStart",Bu1="modelStreamErrorException",V33="messageStop",F33="maxTokens",duQ="modelTimeoutException",H33="managedWordLists",drA="match",Gu1="messages",puQ="metrics",E33="metadata",di="name",z33="naturalLanguage",lg1="nextToken",C33="noTranslations",$33="outputs",U33="outputAssessments",Zu1="outputDataConfig",q33="originalMessage",N33="outputScope",cuQ="originalStatusCode",w33="outputTokens",L33="options",O33="output",luQ="premises",prA="performanceConfig",crA="performanceConfigLatency",M33="piiEntities",iuQ="promptRouter",nuQ="promptVariables",R33="policyVersionArn",auQ="qualifiers",_33="regex",ouQ="reasoningContent",ruQ="redactedContent",suQ="requestMetadata",j33="resourceName",T33="reasoningText",P33="regexes",tuQ="role",dg="source",agQ="sortBy",euQ="sourceContent",ogQ="statusEquals",S33="sensitiveInformationPolicy",x33="sensitiveInformationPolicyFreeUnits",y33="sensitiveInformationPolicyUnits",Yu1="s3Location",rgQ="sortOrder",v33="s3OutputDataConfig",k33="streamProcessingMode",AmQ="stopReason",b33="searchResultIndex",f33="searchResultLocation",QmQ="searchResult",h33="supportingRules",g33="stopSequences",BmQ="submitTime",sgQ="submitTimeAfter",tgQ="submitTimeBefore",pi="serviceTier",u33="systemTool",m33="s3Uri",Ju1="serviceUnavailableException",d33="satisfiable",p33="score",GmQ="server",ZmQ="signature",YmQ="smithy.ts.sdk.synthetic.com.amazonaws.bedrockruntime",lrA="status",NwA="start",c33="statements",l33="stream",irA="streaming",Xu1="system",tM="type",i33="translationAmbiguous",Iu1="toolConfig",n33="textCharacters",a33="toolChoice",o33="tooComplex",Wu1="throttlingException",r33="topicPolicy",s33="topicPolicyUnits",t33="topP",Du1="toolResult",e33="toolSpec",A83="totalTokens",Ku1="toolUse",nrA="toolUseId",Q83="tags",vD="text",B83="temperature",G83="threshold",Vu1="title",JmQ="total",Z83="tools",Y83="tool",J83="topics",KYA="trace",arA="translation",X83="translations",orA="usage",I83="untranslatedClaims",W83="untranslatedPremises",D83="uri",K83="url",V83="value",Fu1="validationException",F83="valid",XmQ="video",H83="web",E83="wordPolicy",z83="wordPolicyUnits",j1="com.amazonaws.bedrockruntime",ImQ=[0,j1,RB3,8,0],rrA=[0,j1,yB3,8,21],C83=[0,j1,r23,8,0],WmQ=[0,j1,s23,8,0],$83=[0,j1,K43,8,15],Hu1=[0,j1,$43,8,21],U83=[-3,j1,wB3,{[rM]:wv,[sM]:403},[ow],[0]];zq.TypeRegistry.for(j1).registerError(U83,BuQ);var q83=[3,j1,SB3,0,[],[]],N83=[3,j1,OB3,0,[UwA,qwA,dg,DYA,N33],[[0,1],[0,1],0,[()=>w73,0],0]],w83=[3,j1,MB3,0,[orA,ui,UuQ,$33,N63,SuQ],[()=>EmQ,0,0,()=>_73,[()=>LmQ,0],()=>FmQ]],L83=[3,j1,TB3,0,[m33,J33,NuQ],[0,0,0]],O83=[3,j1,jB3,0,[grA,muQ,rg1,lrA,juQ,BmQ,uuQ,_uQ,Zu1],[0,0,0,0,[()=>ImQ,0],5,5,5,()=>wu1]],M83=[3,j1,xB3,0,[],[]],R83=[3,j1,vB3,8,[mi],[[()=>Hu1,0]]],_83=[3,j1,kB3,8,[mi],[[()=>Hu1,0]]],Eu1=[3,j1,eB3,0,[tM],[0]],j83=[3,j1,bB3,0,[Vu1,dg,euQ,huQ],[0,0,()=>H73,()=>RmQ]],DmQ=[3,j1,cB3,0,[i63],[2]],T83=[3,j1,lB3,0,[DYA,tg1],[()=>V73,()=>F73]],P83=[3,j1,iB3,0,[Vu1,dg,euQ,huQ],[0,0,()=>E73,()=>RmQ]],S83=[3,j1,Z23,0,[vD],[0]],x83=[-3,j1,nB3,{[rM]:wv,[sM]:400},[ow],[0]];zq.TypeRegistry.for(j1).registerError(x83,JuQ);var y83=[3,j1,gB3,0,[g63,ag1],[[()=>m73,0],1]],v83=[3,j1,mB3,0,[NwA,ag1],[()=>d73,1]],k83=[3,j1,dB3,0,[ag1],[1]],b83=[3,j1,sB3,0,[guQ],[1]],f83=[3,j1,A23,0,[C0A,Gu1,Xu1,kuQ,Iu1,xuQ,ng1,nuQ,CuQ,suQ,prA,pi],[[0,1],[()=>qu1,0],[()=>Nu1,0],()=>CmQ,()=>$u1,()=>K53,15,[()=>OmQ,0],64,[()=>MmQ,0],()=>AsA,()=>QsA]],h83=[3,j1,Q23,0,[O33,AmQ,orA,puQ,$uQ,KYA,prA,pi],[[()=>p73,0],0,()=>NmQ,()=>b83,15,[()=>l83,0],()=>AsA,()=>QsA]],g83=[3,j1,I23,0,[orA,puQ,KYA,prA,pi],[()=>NmQ,()=>u83,[()=>p83,0],()=>AsA,()=>QsA]],u83=[3,j1,X23,0,[guQ],[1]],m83=[3,j1,D23,0,[C0A,Gu1,Xu1,kuQ,Iu1,xuQ,ng1,nuQ,CuQ,suQ,prA,pi],[[0,1],[()=>qu1,0],[()=>Nu1,0],()=>CmQ,()=>$u1,()=>_53,15,[()=>OmQ,0],64,[()=>MmQ,0],()=>AsA,()=>QsA]],d83=[3,j1,K23,0,[l33],[[()=>c73,16]]],p83=[3,j1,V23,0,[PuQ,iuQ],[[()=>HmQ,0],()=>UmQ]],c83=[3,j1,E23,0,[Gu1,Xu1,Iu1,ng1],[[()=>qu1,0],[()=>Nu1,0],()=>$u1,15]],l83=[3,j1,F23,0,[PuQ,iuQ],[[()=>HmQ,0],()=>UmQ]],i83=[3,j1,z23,0,[C0A,Au1],[[0,1],[()=>l73,0]]],n83=[3,j1,C23,0,[buQ],[1]],KmQ=[3,j1,N23,0,[$wA,di,dg,f63,tg1],[0,0,()=>n73,0,()=>DmQ]],a83=[3,j1,O23,0,[eg1,NwA,hrA],[1,1,1]],o83=[3,j1,M23,0,[eg1,NwA,hrA],[1,1,1]],r83=[3,j1,R23,0,[eg1,NwA,hrA],[1,1,1]],s83=[3,j1,P23,0,[grA],[[0,1]]],t83=[3,j1,S23,0,[grA,muQ,rg1,lrA,juQ,BmQ,uuQ,_uQ,Zu1],[0,0,0,0,[()=>ImQ,0],5,5,5,()=>wu1]],VmQ=[3,j1,j23,0,[r33,P63,E83,S33,j63,C63,s63],[()=>S53,()=>F53,()=>x53,()=>R53,()=>E53,[()=>G53,0],()=>N53]],e83=[3,j1,h23,0,[arA,wuQ,mrA],[[()=>wwA,0],()=>Uu1,[()=>srA,0]]],A53=[3,j1,u23,0,[vD],[[()=>WmQ,0]]],Q53=[3,j1,g23,0,[arA,wuQ,mrA],[[()=>wwA,0],()=>Uu1,[()=>srA,0]]],srA=[3,j1,d23,0,[tM,luQ,OuQ],[0,[()=>CwA,0],[()=>CwA,0]]],B53=[3,j1,p23,0,[],[]],G53=[3,j1,c23,0,[a63],[[()=>U73,0]]],Z53=[3,j1,l23,0,[Q33,R33],[0,0]],Y53=[3,j1,a23,0,[arA,LuQ,_63,mrA],[[()=>wwA,0],[()=>yrA,0],[()=>yrA,0],[()=>srA,0]]],yrA=[3,j1,n23,0,[c33],[[()=>CwA,0]]],J53=[3,j1,t23,0,[I33,z33],[[()=>C83,0],[()=>WmQ,0]]],X53=[3,j1,Q93,0,[],[]],wwA=[3,j1,e23,0,[luQ,OuQ,W83,I83,MuQ],[[()=>CwA,0],[()=>CwA,0],[()=>egQ,0],[()=>egQ,0],1]],I53=[3,j1,A93,0,[L33,p63],[[()=>N73,0],[()=>$73,0]]],W53=[3,j1,G93,0,[X83],[[()=>q73,0]]],D53=[3,j1,Y93,0,[arA,LuQ,h33,mrA],[[()=>wwA,0],[()=>yrA,0],()=>Uu1,[()=>srA,0]]],K53=[3,j1,J93,0,[UwA,qwA,KYA],[0,0,0]],V53=[3,j1,D93,0,[tM,MuQ,n63,ui,z0A],[0,0,0,0,2]],F53=[3,j1,C93,0,[TuQ],[()=>L73]],H53=[3,j1,V93,0,[tM,G83,p33,ui,z0A],[0,1,1,0,2]],E53=[3,j1,H93,0,[TuQ],[()=>O73]],z53=[3,j1,E93,8,[$wA,dg],[0,[()=>r73,0]]],C53=[3,j1,$93,0,[vD,auQ],[0,64]],FmQ=[3,j1,N93,0,[n33,B33],[()=>T53,()=>q53]],$53=[3,j1,U93,0,[drA,ui,z0A],[0,0,2]],U53=[3,j1,w93,8,[$wA,dg],[0,[()=>s73,0]]],q53=[3,j1,L93,0,[vuQ,JmQ],[1,1]],N53=[3,j1,O93,0,[o63,orA,SuQ],[1,()=>EmQ,()=>FmQ]],w53=[3,j1,R93,0,[drA,tM,ui,z0A],[0,0,0,2]],L53=[3,j1,j93,0,[vD],[0]],O53=[3,j1,P93,0,[drA,tM,ui,z0A],[0,0,0,2]],M53=[3,j1,x93,0,[di,drA,_33,ui,z0A],[0,0,0,0,2]],R53=[3,j1,k93,0,[M33,P33],[()=>j73,()=>T73]],_53=[3,j1,v93,0,[UwA,qwA,KYA,k33],[0,0,0,0]],j53=[3,j1,h93,0,[vD,auQ],[0,64]],T53=[3,j1,g93,0,[vuQ,JmQ],[1,1]],P53=[3,j1,b93,0,[di,tM,ui,z0A],[0,0,0,2]],S53=[3,j1,m93,0,[J83],[()=>P73]],HmQ=[3,j1,f93,0,[D33,r63,U33,UuQ],[64,[()=>f73,0],[()=>b73,0],0]],EmQ=[3,j1,d93,0,[s33,x63,z83,y33,x33,T63,S63,$63,U63],[1,1,1,1,1,1,1,1,1]],x53=[3,j1,p93,0,[v63,H33],[()=>M73,()=>R73]],zmQ=[3,j1,c93,0,[$wA,dg],[0,()=>t73]],CmQ=[3,j1,l93,0,[F33,B83,t33,g33],[1,1,1,64]],trA=[-3,j1,Y43,{[rM]:GmQ,[sM]:500},[ow],[0]];zq.TypeRegistry.for(j1).registerError(trA,GuQ);var y53=[3,j1,n93,0,[E0A,frA,quQ,C0A,KYA,UwA,qwA,crA,pi],[[()=>rrA,16],[0,{[yD]:ig1}],[0,{[yD]:NB3}],[0,1],[0,{[yD]:zuQ}],[0,{[yD]:HuQ}],[0,{[yD]:EuQ}],[0,{[yD]:krA}],[0,{[yD]:brA}]]],v53=[3,j1,a93,0,[E0A,frA,crA,pi],[[()=>rrA,16],[0,{[yD]:ig1}],[0,{[yD]:krA}],[0,{[yD]:brA}]]],k53=[3,j1,o93,0,[E0A],[[()=>rrA,0]]],b53=[3,j1,e93,0,[C0A,E0A],[[0,1],[()=>e73,16]]],f53=[3,j1,A43,0,[E0A],[[()=>AG3,16]]],h53=[3,j1,B43,0,[E0A,frA,quQ,C0A,KYA,UwA,qwA,crA,pi],[[()=>rrA,16],[0,{[yD]:ig1}],[0,{[yD]:H63}],[0,1],[0,{[yD]:zuQ}],[0,{[yD]:HuQ}],[0,{[yD]:EuQ}],[0,{[yD]:krA}],[0,{[yD]:brA}]]],g53=[3,j1,G43,0,[E0A,frA,crA,pi],[[()=>ZG3,16],[0,{[yD]:E63}],[0,{[yD]:krA}],[0,{[yD]:brA}]]],u53=[3,j1,X43,0,[sgQ,tgQ,ogQ,ngQ,lg1,agQ,rgQ],[[5,{[H0A]:sgQ}],[5,{[H0A]:tgQ}],[0,{[H0A]:ogQ}],[1,{[H0A]:ngQ}],[0,{[H0A]:lg1}],[0,{[H0A]:agQ}],[0,{[H0A]:rgQ}]]],m53=[3,j1,I43,0,[lg1,z63],[0,[()=>K73,0]]],$mQ=[3,j1,W43,0,[tuQ,DYA],[0,[()=>z73,0]]],d53=[3,j1,F43,0,[tuQ],[0]],p53=[3,j1,E43,0,[AmQ,$uQ],[0,15]],c53=[-3,j1,D43,{[rM]:wv,[sM]:424},[ow,cuQ,j33],[0,1,0]];zq.TypeRegistry.for(j1).registerError(c53,DuQ);var l53=[-3,j1,V43,{[rM]:wv,[sM]:429},[ow],[0]];zq.TypeRegistry.for(j1).registerError(l53,KuQ);var erA=[-3,j1,H43,{[rM]:wv,[sM]:424},[ow,cuQ,q33],[0,1,0]];zq.TypeRegistry.for(j1).registerError(erA,FuQ);var zu1=[-3,j1,z43,{[rM]:wv,[sM]:408},[ow],[0]];zq.TypeRegistry.for(j1).registerError(zu1,VuQ);var i53=[3,j1,q43,8,[mi],[[()=>Hu1,0]]],AsA=[3,j1,U43,0,[X33],[0]],UmQ=[3,j1,N43,0,[t63],[0]],n53=[3,j1,T43,8,[vD,ZmQ],[0,0]],a53=[-3,j1,_43,{[rM]:wv,[sM]:404},[ow],[0]];zq.TypeRegistry.for(j1).registerError(a53,XuQ);var Cu1=[3,j1,k43,0,[D83,NuQ],[0,0]],qmQ=[3,j1,f43,0,[dg,Vu1,DYA,tg1],[0,0,()=>S73,()=>DmQ]],o53=[3,j1,h43,0,[vD],[0]],r53=[3,j1,u43,0,[b33,NwA,hrA],[1,1,1]],s53=[-3,j1,b43,{[rM]:wv,[sM]:400},[ow],[0]];zq.TypeRegistry.for(j1).registerError(s53,IuQ);var QsA=[3,j1,m43,0,[tM],[0]],BsA=[-3,j1,c43,{[rM]:GmQ,[sM]:503},[ow],[0]];zq.TypeRegistry.for(j1).registerError(BsA,WuQ);var t53=[3,j1,d43,0,[di],[0]],e53=[3,j1,S43,0,[rg1,C0A,W33,Zu1,Q83],[[0,4],0,[()=>$83,0],()=>wu1,()=>x73]],A73=[3,j1,x43,0,[grA],[0]],Q73=[3,j1,p43,0,[di],[0]],B73=[3,j1,l43,0,[Y33,V83],[0,0]],GsA=[-3,j1,a43,{[rM]:wv,[sM]:429},[ow],[0]];zq.TypeRegistry.for(j1).registerError(GsA,ZuQ);var NmQ=[3,j1,Z63,0,[buQ,w33,A83,y63,k63],[1,1,1,1,1]],$u1=[3,j1,i43,0,[Z83,a33],[()=>k73,()=>XG3]],G73=[3,j1,s43,0,[nrA,DYA,lrA,tM],[0,()=>v73,0,0]],Z73=[3,j1,A63,0,[nrA,tM,lrA],[0,0,0]],Y73=[3,j1,G63,0,[di,c63,A33],[0,0,()=>IG3]],J73=[3,j1,Y63,0,[nrA,di,Au1,tM],[0,0,15,0]],X73=[3,j1,J63,0,[Au1],[0]],I73=[3,j1,X63,0,[nrA,di,tM],[0,0,0]],ZsA=[-3,j1,K63,{[rM]:wv,[sM]:400},[ow],[0]];zq.TypeRegistry.for(j1).registerError(ZsA,YuQ);var wmQ=[3,j1,D63,0,[$wA,dg],[0,()=>KG3]],W73=[3,j1,F63,0,[K83,l63],[0,0]],D73=[-3,YmQ,"BedrockRuntimeServiceException",0,[],[]];zq.TypeRegistry.for(YmQ).registerError(D73,Cq);var K73=[1,j1,PB3,0,[()=>O83,0]],V73=[1,j1,oB3,0,()=>h73],F73=[1,j1,U23,0,()=>j83],H73=[1,j1,Y23,0,()=>g73],E73=[1,j1,J23,0,()=>S83],z73=[1,j1,fB3,0,[()=>u73,0]],C73=[1,j1,w23,0,()=>i73],LmQ=[1,j1,x23,0,[()=>VmQ,0]],$73=[1,j1,k23,0,[()=>yrA,0]],U73=[1,j1,f23,0,[()=>a73,0]],egQ=[1,j1,m23,0,[()=>A53,0]],Uu1=[1,j1,i23,0,()=>Z53],CwA=[1,j1,o23,0,[()=>J53,0]],q73=[1,j1,B93,0,[()=>wwA,0]],N73=[1,j1,Z93,0,[()=>W53,0]],w73=[1,j1,I93,0,[()=>o73,0]],L73=[1,j1,K93,0,()=>V53],O73=[1,j1,F93,0,()=>H53],M73=[1,j1,q93,0,()=>$53],R73=[1,j1,_93,0,()=>w53],_73=[1,j1,T93,0,()=>L53],j73=[1,j1,S93,0,()=>O53],T73=[1,j1,y93,0,()=>M53],P73=[1,j1,u93,0,()=>P53],qu1=[1,j1,C43,0,[()=>$mQ,0]],S73=[1,j1,g43,0,()=>o53],Nu1=[1,j1,y43,0,[()=>YG3,0]],x73=[1,j1,r43,0,()=>B73],y73=[1,j1,t43,0,()=>WG3],v73=[1,j1,Q63,0,()=>DG3],k73=[1,j1,I63,0,()=>JG3],b73=[2,j1,y23,0,[0,0],[()=>LmQ,0]],f73=[2,j1,v23,0,[0,0],[()=>VmQ,0]],OmQ=[2,j1,w43,8,0,()=>QG3],MmQ=[2,j1,R43,8,0,0],wu1=[3,j1,_B3,0,[v33],[()=>L83]],h73=[3,j1,aB3,0,[vD],[0]],RmQ=[3,j1,rB3,0,[H83,u63,d63,m63,f33],[()=>W73,()=>a83,()=>r83,()=>o83,()=>r53]],g73=[3,j1,G23,0,[vD],[0]],u73=[3,j1,pB3,0,[vD,urA,RuQ,XmQ,Ku1,Du1,yuQ,og1,ouQ,R63,QmQ],[0,()=>zmQ,()=>KmQ,()=>wmQ,()=>J73,()=>G73,[()=>_mQ,0],()=>Eu1,[()=>BG3,0],()=>T83,()=>qmQ]],m73=[3,j1,hB3,0,[vD,Ku1,Du1,ouQ,b63],[0,()=>X73,()=>y73,[()=>GG3,0],()=>P83]],d73=[3,j1,uB3,0,[Ku1,Du1],[()=>I73,()=>Z73]],p73=[3,j1,tB3,0,[ow],[[()=>$mQ,0]]],c73=[3,j1,W23,{[irA]:1},[K33,O63,L63,M63,V33,E33,Qu1,Bu1,Fu1,Wu1,Ju1],[()=>d53,()=>v83,[()=>y83,0],()=>k83,()=>p53,[()=>g83,0],[()=>trA,0],[()=>erA,0],[()=>ZsA,0],[()=>GsA,0],[()=>BsA,0]]],l73=[3,j1,H23,0,[e63,h63],[[()=>k53,0],[()=>c83,0]]],i73=[3,j1,L23,0,[vD],[0]],n73=[3,j1,_23,0,[mi,Yu1,vD,DYA],[21,()=>Cu1,0,()=>C73]],a73=[3,j1,b23,0,[F83,Z33,d33,G33,i33,o33,C33],[[()=>D53,0],[()=>Q53,0],[()=>Y53,0],[()=>e83,0],[()=>I53,0],()=>X53,()=>B53]],o73=[3,j1,X93,0,[vD,urA],[()=>j53,[()=>U53,0]]],_mQ=[3,j1,W93,0,[vD,urA],[()=>C53,[()=>z53,0]]],r73=[3,j1,z93,8,[mi],[21]],s73=[3,j1,M93,8,[mi],[21]],t73=[3,j1,Z43,0,[mi,Yu1],[21,()=>Cu1]],e73=[3,j1,s93,{[irA]:1},[sg1],[[()=>R83,0]]],AG3=[3,j1,t93,{[irA]:1},[sg1,Qu1,Bu1,Fu1,Wu1,duQ,Ju1],[[()=>_83,0],[()=>trA,0],[()=>erA,0],[()=>ZsA,0],[()=>GsA,0],[()=>zu1,0],[()=>BsA,0]]],QG3=[3,j1,L43,0,[vD],[0]],BG3=[3,j1,O43,8,[T33,ruQ],[[()=>n53,0],21]],GG3=[3,j1,M43,8,[vD,ruQ,ZmQ],[0,21,0]],ZG3=[3,j1,j43,{[irA]:1},[sg1,Qu1,Bu1,Fu1,Wu1,duQ,Ju1],[[()=>i53,0],[()=>trA,0],[()=>erA,0],[()=>ZsA,0],[()=>GsA,0],[()=>zu1,0],[()=>BsA,0]]],YG3=[3,j1,v43,0,[vD,yuQ,og1],[0,[()=>_mQ,0],()=>Eu1]],JG3=[3,j1,W63,0,[e33,u33,og1],[()=>Y73,()=>Q73,()=>Eu1]],XG3=[3,j1,n43,0,[w63,q63,Y83],[()=>M83,()=>q83,()=>t53]],IG3=[3,j1,o43,0,[fuQ],[15]],WG3=[3,j1,e43,0,[vD],[0]],DG3=[3,j1,B63,0,[fuQ,vD,urA,RuQ,XmQ,QmQ],[15,0,()=>zmQ,()=>KmQ,()=>wmQ,()=>qmQ]],KG3=[3,j1,V63,0,[mi,Yu1],[21,()=>Cu1]],VG3=[9,j1,LB3,{[Lv]:["POST","/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply",200]},()=>N83,()=>w83],FG3=[9,j1,q23,{[Lv]:["POST","/model/{modelId}/converse",200]},()=>f83,()=>h83],HG3=[9,j1,B23,{[Lv]:["POST","/model/{modelId}/converse-stream",200]},()=>m83,()=>d83],EG3=[9,j1,$23,{[Lv]:["POST","/model/{modelId}/count-tokens",200]},()=>i83,()=>n83],zG3=[9,j1,T23,{[Lv]:["GET","/async-invoke/{invocationArn}",200]},()=>s83,()=>t83],CG3=[9,j1,i93,{[Lv]:["POST","/model/{modelId}/invoke",200]},()=>y53,()=>v53],$G3=[9,j1,r93,{[Lv]:["POST","/model/{modelId}/invoke-with-bidirectional-stream",200]},()=>b53,()=>f53],UG3=[9,j1,Q43,{[Lv]:["POST","/model/{modelId}/invoke-with-response-stream",200]},()=>h53,()=>g53],qG3=[9,j1,J43,{[Lv]:["GET","/async-invoke",200]},()=>u53,()=>m53],NG3=[9,j1,P43,{[Lv]:["POST","/async-invoke",200]},()=>e53,()=>A73];class Lu1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").sc(VG3).build(){}class Ou1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").sc(FG3).build(){}class Mu1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").sc(HG3).build(){}class Ru1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","CountTokens",{}).n("BedrockRuntimeClient","CountTokensCommand").sc(EG3).build(){}class _u1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").sc(zG3).build(){}class ju1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").sc(CG3).build(){}class Tu1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions()),AuQ.getEventStreamPlugin(B),QuQ.getWebSocketPlugin(B,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").sc($G3).build(){}class Pu1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").sc(UG3).build(){}class YsA extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").sc(qG3).build(){}class Su1 extends _H.Command.classBuilder().ep(Nv).m(function(A,Q,B,G){return[OT.getEndpointPlugin(B,A.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").sc(NG3).build(){}var wG3={ApplyGuardrailCommand:Lu1,ConverseCommand:Ou1,ConverseStreamCommand:Mu1,CountTokensCommand:Ru1,GetAsyncInvokeCommand:_u1,InvokeModelCommand:ju1,InvokeModelWithBidirectionalStreamCommand:Tu1,InvokeModelWithResponseStreamCommand:Pu1,ListAsyncInvokesCommand:YsA,StartAsyncInvokeCommand:Su1};class xu1 extends vrA{}_H.createAggregatedClient(wG3,xu1);var LG3=xrA.createPaginator(vrA,YsA,"nextToken","nextToken","maxResults"),OG3={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},MG3={SUBMISSION_TIME:"SubmissionTime"},RG3={ASCENDING:"Ascending",DESCENDING:"Descending"},_G3={JPEG:"jpeg",PNG:"png"},jG3={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},TG3={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},PG3={INPUT:"INPUT",OUTPUT:"OUTPUT"},SG3={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},xG3={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"},yG3={BLOCKED:"BLOCKED",NONE:"NONE"},vG3={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},kG3={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},bG3={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},fG3={BLOCKED:"BLOCKED",NONE:"NONE"},hG3={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},gG3={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},uG3={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},mG3={BLOCKED:"BLOCKED",NONE:"NONE"},dG3={DENY:"DENY"},pG3={BLOCKED:"BLOCKED",NONE:"NONE"},cG3={PROFANITY:"PROFANITY"},lG3={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},iG3={DEFAULT:"default"},nG3={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"},aG3={JPEG:"jpeg",PNG:"png"},oG3={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},rG3={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"},sG3={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"},tG3={ERROR:"error",SUCCESS:"success"},eG3={SERVER_TOOL_USE:"server_tool_use"},AZ3={ASSISTANT:"assistant",USER:"user"},QZ3={OPTIMIZED:"optimized",STANDARD:"standard"},BZ3={DEFAULT:"default",FLEX:"flex",PRIORITY:"priority"},GZ3={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MAX_TOKENS:"max_tokens",MODEL_CONTEXT_WINDOW_EXCEEDED:"model_context_window_exceeded",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},ZZ3={ASYNC:"async",SYNC:"sync"},YZ3={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"};Object.defineProperty(yu1,"$Command",{enumerable:!0,get:function(){return _H.Command}});Object.defineProperty(yu1,"__Client",{enumerable:!0,get:function(){return _H.Client}});yu1.AccessDeniedException=BuQ;yu1.ApplyGuardrailCommand=Lu1;yu1.AsyncInvokeStatus=OG3;yu1.BedrockRuntime=xu1;yu1.BedrockRuntimeClient=vrA;yu1.BedrockRuntimeServiceException=Cq;yu1.CachePointType=iG3;yu1.ConflictException=JuQ;yu1.ConversationRole=AZ3;yu1.ConverseCommand=Ou1;yu1.ConverseStreamCommand=Mu1;yu1.CountTokensCommand=Ru1;yu1.DocumentFormat=nG3;yu1.GetAsyncInvokeCommand=_u1;yu1.GuardrailAction=SG3;yu1.GuardrailAutomatedReasoningLogicWarningType=xG3;yu1.GuardrailContentFilterConfidence=vG3;yu1.GuardrailContentFilterStrength=kG3;yu1.GuardrailContentFilterType=bG3;yu1.GuardrailContentPolicyAction=yG3;yu1.GuardrailContentQualifier=jG3;yu1.GuardrailContentSource=PG3;yu1.GuardrailContextualGroundingFilterType=hG3;yu1.GuardrailContextualGroundingPolicyAction=fG3;yu1.GuardrailConverseContentQualifier=oG3;yu1.GuardrailConverseImageFormat=aG3;yu1.GuardrailImageFormat=_G3;yu1.GuardrailManagedWordType=cG3;yu1.GuardrailOutputScope=TG3;yu1.GuardrailPiiEntityType=uG3;yu1.GuardrailSensitiveInformationPolicyAction=gG3;yu1.GuardrailStreamProcessingMode=ZZ3;yu1.GuardrailTopicPolicyAction=mG3;yu1.GuardrailTopicType=dG3;yu1.GuardrailTrace=lG3;yu1.GuardrailWordPolicyAction=pG3;yu1.ImageFormat=rG3;yu1.InternalServerException=GuQ;yu1.InvokeModelCommand=ju1;yu1.InvokeModelWithBidirectionalStreamCommand=Tu1;yu1.InvokeModelWithResponseStreamCommand=Pu1;yu1.ListAsyncInvokesCommand=YsA;yu1.ModelErrorException=DuQ;yu1.ModelNotReadyException=KuQ;yu1.ModelStreamErrorException=FuQ;yu1.ModelTimeoutException=VuQ;yu1.PerformanceConfigLatency=QZ3;yu1.ResourceNotFoundException=XuQ;yu1.ServiceQuotaExceededException=IuQ;yu1.ServiceTierType=BZ3;yu1.ServiceUnavailableException=WuQ;yu1.SortAsyncInvocationBy=MG3;yu1.SortOrder=RG3;yu1.StartAsyncInvokeCommand=Su1;yu1.StopReason=GZ3;yu1.ThrottlingException=ZuQ;yu1.ToolResultStatus=tG3;yu1.ToolUseType=eG3;yu1.Trace=YZ3;yu1.ValidationException=YuQ;yu1.VideoFormat=sG3;yu1.paginateListAsyncInvokes=LG3});var PmQ=U(($q)=>{var HY3=$q&&$q.__createBinding||(Object.create?function(A,Q,B,G){if(G===void 0)G=B;var Z=Object.getOwnPropertyDescriptor(Q,B);if(!Z||("get"in Z?!Q.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Q[B]}};Object.defineProperty(A,G,Z)}:function(A,Q,B,G){if(G===void 0)G=B;A[G]=Q[B]}),EY3=$q&&$q.__setModuleDefault||(Object.create?function(A,Q){Object.defineProperty(A,"default",{enumerable:!0,value:Q})}:function(A,Q){A.default=Q}),jmQ=$q&&$q.__importStar||function(A){if(A&&A.__esModule)return A;var Q={};if(A!=null){for(var B in A)if(B!=="default"&&Object.prototype.hasOwnProperty.call(A,B))HY3(Q,A,B)}return EY3(Q,A),Q};Object.defineProperty($q,"__esModule",{value:!0});$q.req=$q.json=$q.toBuffer=void 0;var zY3=jmQ(qA("http")),CY3=jmQ(qA("https"));async function TmQ(A){let Q=0,B=[];for await(let G of A)Q+=G.length,B.push(G);return Buffer.concat(B,Q)}$q.toBuffer=TmQ;async function $Y3(A){let B=(await TmQ(A)).toString("utf8");try{return JSON.parse(B)}catch(G){let Z=G;throw Z.message+=` (input: ${B})`,Z}}$q.json=$Y3;function UY3(A,Q={}){let G=((typeof A==="string"?A:A.href).startsWith("https:")?CY3:zY3).request(A,Q),Z=new Promise((Y,J)=>{G.once("response",Y).once("error",J).end()});return G.then=Z.then.bind(Z),G}$q.req=UY3});var vu1=U((rw)=>{var xmQ=rw&&rw.__createBinding||(Object.create?function(A,Q,B,G){if(G===void 0)G=B;var Z=Object.getOwnPropertyDescriptor(Q,B);if(!Z||("get"in Z?!Q.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Q[B]}};Object.defineProperty(A,G,Z)}:function(A,Q,B,G){if(G===void 0)G=B;A[G]=Q[B]}),qY3=rw&&rw.__setModuleDefault||(Object.create?function(A,Q){Object.defineProperty(A,"default",{enumerable:!0,value:Q})}:function(A,Q){A.default=Q}),ymQ=rw&&rw.__importStar||function(A){if(A&&A.__esModule)return A;var Q={};if(A!=null){for(var B in A)if(B!=="default"&&Object.prototype.hasOwnProperty.call(A,B))xmQ(Q,A,B)}return qY3(Q,A),Q},NY3=rw&&rw.__exportStar||function(A,Q){for(var B in A)if(B!=="default"&&!Object.prototype.hasOwnProperty.call(Q,B))xmQ(Q,A,B)};Object.defineProperty(rw,"__esModule",{value:!0});rw.Agent=void 0;var wY3=ymQ(qA("net")),SmQ=ymQ(qA("http")),LY3=qA("https");NY3(PmQ(),rw);var Ov=Symbol("AgentBaseInternalState");class vmQ extends SmQ.Agent{constructor(A){super(A);this[Ov]={}}isSecureEndpoint(A){if(A){if(typeof A.secureEndpoint==="boolean")return A.secureEndpoint;if(typeof A.protocol==="string")return A.protocol==="https:"}let{stack:Q}=Error();if(typeof Q!=="string")return!1;return Q.split(`
`).some((B)=>B.indexOf("(https.js:")!==-1||B.indexOf("node:https:")!==-1)}incrementSockets(A){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;if(!this.sockets[A])this.sockets[A]=[];let Q=new wY3.Socket({writable:!1});return this.sockets[A].push(Q),this.totalSocketCount++,Q}decrementSockets(A,Q){if(!this.sockets[A]||Q===null)return;let B=this.sockets[A],G=B.indexOf(Q);if(G!==-1){if(B.splice(G,1),this.totalSocketCount--,B.length===0)delete this.sockets[A]}}getName(A){if(typeof A.secureEndpoint==="boolean"?A.secureEndpoint:this.isSecureEndpoint(A))return LY3.Agent.prototype.getName.call(this,A);return super.getName(A)}createSocket(A,Q,B){let G={...Q,secureEndpoint:this.isSecureEndpoint(Q)},Z=this.getName(G),Y=this.incrementSockets(Z);Promise.resolve().then(()=>this.connect(A,G)).then((J)=>{if(this.decrementSockets(Z,Y),J instanceof SmQ.Agent)try{return J.addRequest(A,G)}catch(X){return B(X)}this[Ov].currentSocket=J,super.createSocket(A,Q,B)},(J)=>{this.decrementSockets(Z,Y),B(J)})}createConnection(){let A=this[Ov].currentSocket;if(this[Ov].currentSocket=void 0,!A)throw Error("No socket was returned in the `connect()` function");return A}get defaultPort(){return this[Ov].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(A){if(this[Ov])this[Ov].defaultPort=A}get protocol(){return this[Ov].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(A){if(this[Ov])this[Ov].protocol=A}}rw.Agent=vmQ});var kmQ=U((VYA)=>{var OY3=VYA&&VYA.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(VYA,"__esModule",{value:!0});VYA.parseProxyResponse=void 0;var MY3=OY3(SAA()),XsA=(0,MY3.default)("https-proxy-agent:parse-proxy-response");function RY3(A){return new Promise((Q,B)=>{let G=0,Z=[];function Y(){let D=A.read();if(D)W(D);else A.once("readable",Y)}function J(){A.removeListener("end",X),A.removeListener("error",I),A.removeListener("readable",Y)}function X(){J(),XsA("onend"),B(Error("Proxy connection ended before receiving CONNECT response"))}function I(D){J(),XsA("onerror %o",D),B(D)}function W(D){Z.push(D),G+=D.length;let K=Buffer.concat(Z,G),V=K.indexOf(`\r
\r