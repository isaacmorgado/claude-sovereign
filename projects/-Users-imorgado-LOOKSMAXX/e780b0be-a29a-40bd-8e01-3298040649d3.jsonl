{"type":"queue-operation","operation":"dequeue","timestamp":"2025-12-26T17:08:27.857Z","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3"}
{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":"Analyze the side profile landmark detection on https://beta.faceiqlabs.com and compare it with https://www.faceiqlabs.com. The key landmarks to check are porion (ear canal), tragus (ear cartilage), and gonion (jaw angle). Verify they are positioned correctly near the ear area, not at the eyebrow. Confirm 1-1 parity between both sites.\n"},"uuid":"b171a9f0-2b5e-411f-b63c-310b7aa76c98","timestamp":"2025-12-26T17:08:27.861Z"}
{"parentUuid":"b171a9f0-2b5e-411f-b63c-310b7aa76c98","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01FVQYktHfHYsRwkX1DvEpJg","type":"message","role":"assistant","content":[{"type":"text","text":"I'll analyze the side profile landmark detection on both FaceIQ sites. Let me fetch and compare them."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":26553,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26553,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CWVfdR1JWjhbM1kfjVfgt","type":"assistant","uuid":"7aa81fca-77e8-4323-9816-67102731c538","timestamp":"2025-12-26T17:08:32.986Z"}
{"parentUuid":"7aa81fca-77e8-4323-9816-67102731c538","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01FVQYktHfHYsRwkX1DvEpJg","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BnWd9sujh7WP8RGwNSno1F","name":"WebFetch","input":{"url":"https://beta.faceiqlabs.com","prompt":"Find any JavaScript code, documentation, or UI elements related to side profile landmark detection. Look for: 1) porion (ear canal landmark), 2) tragus (ear cartilage), 3) gonion (jaw angle). Find coordinates, landmark indices, or positioning logic for these ear-related landmarks. Also look for any MediaPipe or face detection configuration."}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":26553,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26553,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CWVfdR1JWjhbM1kfjVfgt","type":"assistant","uuid":"dfc1dd64-51ca-4b6c-aab7-64ca37172dbd","timestamp":"2025-12-26T17:08:35.755Z"}
{"parentUuid":"dfc1dd64-51ca-4b6c-aab7-64ca37172dbd","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01FVQYktHfHYsRwkX1DvEpJg","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_012GYypZNJZ2sxrfCfk8rebt","name":"WebFetch","input":{"url":"https://www.faceiqlabs.com","prompt":"Find any JavaScript code, documentation, or UI elements related to side profile landmark detection. Look for: 1) porion (ear canal landmark), 2) tragus (ear cartilage), 3) gonion (jaw angle). Find coordinates, landmark indices, or positioning logic for these ear-related landmarks. Also look for any MediaPipe or face detection configuration."}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":26553,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26553,"ephemeral_1h_input_tokens":0},"output_tokens":317,"service_tier":"standard"}},"requestId":"req_011CWVfdR1JWjhbM1kfjVfgt","type":"assistant","uuid":"b29071e6-616e-43ce-83c8-71c2dc832bc6","timestamp":"2025-12-26T17:08:36.171Z"}
{"parentUuid":"b29071e6-616e-43ce-83c8-71c2dc832bc6","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_012GYypZNJZ2sxrfCfk8rebt","type":"tool_result","content":"# Analysis Results\n\nBased on the provided webpage content, **no JavaScript code, documentation, or UI elements related to side profile landmark detection were found**.\n\nThe page contains:\n- Facebook tracking pixels\n- Tailwind CSS configuration\n- A referral code handling script\n- Marketing content describing FaceIQ Labs' facial analysis service\n\n**Specific findings:**\n\nThe content mentions \"Side Profile Score\" and \"side profile photos\" as features, but includes no technical implementation details. There are no explicit references to:\n- Porion, tragus, or gonion landmarks\n- MediaPipe configuration\n- Landmark indices or coordinates\n- Ear-related landmark positioning logic\n\nThe actual analysis engine code appears to be hosted on a separate platform (`https://beta.faceiqlabs.com/`) rather than embedded in this landing page."}]},"uuid":"d505cf86-3155-4996-94e3-df9e68ad2dd7","timestamp":"2025-12-26T17:08:39.208Z","toolUseResult":{"bytes":73566,"code":200,"codeText":"OK","result":"# Analysis Results\n\nBased on the provided webpage content, **no JavaScript code, documentation, or UI elements related to side profile landmark detection were found**.\n\nThe page contains:\n- Facebook tracking pixels\n- Tailwind CSS configuration\n- A referral code handling script\n- Marketing content describing FaceIQ Labs' facial analysis service\n\n**Specific findings:**\n\nThe content mentions \"Side Profile Score\" and \"side profile photos\" as features, but includes no technical implementation details. There are no explicit references to:\n- Porion, tragus, or gonion landmarks\n- MediaPipe configuration\n- Landmark indices or coordinates\n- Ear-related landmark positioning logic\n\nThe actual analysis engine code appears to be hosted on a separate platform (`https://beta.faceiqlabs.com/`) rather than embedded in this landing page.","durationMs":3028,"url":"https://www.faceiqlabs.com"}}
{"parentUuid":"d505cf86-3155-4996-94e3-df9e68ad2dd7","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BnWd9sujh7WP8RGwNSno1F","type":"tool_result","content":"# Analysis of FaceIQ Labs Web Content\n\nBased on the provided page source code, I found **no JavaScript code, documentation, or UI elements related to side profile landmark detection** (porion, tragus, or gonion).\n\n## Key Findings:\n\nThe content consists primarily of:\n- **Next.js framework scaffolding** and build chunk references\n- **Meta tags** for SEO (title: \"FaceIQ Labs - Advanced Facial Analysis\")\n- **Facebook Pixel tracking** code\n- **Generic page structure** with no visible facial landmark configuration\n\n## What's Missing:\n\nThere is **no evidence of**:\n- MediaPipe face detection configuration\n- Landmark coordinate systems or indices\n- Ear-related anatomical reference points\n- Side profile analysis implementation\n- Facial geometry processing logic\n\nThe page appears to be a login/authentication route without exposed facial analysis code in this particular view. Any facial landmark detection logic would likely be in separate JavaScript bundles (referenced but not included in the source provided) or server-side implementations."}]},"uuid":"8de9cb73-f6a5-4795-85a3-6311235baf5f","timestamp":"2025-12-26T17:08:39.789Z","toolUseResult":{"bytes":12907,"code":200,"codeText":"OK","result":"# Analysis of FaceIQ Labs Web Content\n\nBased on the provided page source code, I found **no JavaScript code, documentation, or UI elements related to side profile landmark detection** (porion, tragus, or gonion).\n\n## Key Findings:\n\nThe content consists primarily of:\n- **Next.js framework scaffolding** and build chunk references\n- **Meta tags** for SEO (title: \"FaceIQ Labs - Advanced Facial Analysis\")\n- **Facebook Pixel tracking** code\n- **Generic page structure** with no visible facial landmark configuration\n\n## What's Missing:\n\nThere is **no evidence of**:\n- MediaPipe face detection configuration\n- Landmark coordinate systems or indices\n- Ear-related anatomical reference points\n- Side profile analysis implementation\n- Facial geometry processing logic\n\nThe page appears to be a login/authentication route without exposed facial analysis code in this particular view. Any facial landmark detection logic would likely be in separate JavaScript bundles (referenced but not included in the source provided) or server-side implementations.","durationMs":3610,"url":"https://beta.faceiqlabs.com"}}
{"parentUuid":"8de9cb73-f6a5-4795-85a3-6311235baf5f","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01E3arPgZggs7FCDcpqruaiQ","type":"message","role":"assistant","content":[{"type":"text","text":"The landing pages don't expose the landmark detection code directly. Let me search for specific JavaScript bundles and API endpoints that might contain the detection logic."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":205,"cache_creation_input_tokens":576,"cache_read_input_tokens":26553,"cache_creation":{"ephemeral_5m_input_tokens":576,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfeHqUsXsrHE4ysbyEn","type":"assistant","uuid":"b754c351-9196-4eb8-a7d8-cd8e95272de2","timestamp":"2025-12-26T17:08:46.249Z"}
{"parentUuid":"b754c351-9196-4eb8-a7d8-cd8e95272de2","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01E3arPgZggs7FCDcpqruaiQ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DydfW5Ucanfx85z15jPWbN","name":"WebFetch","input":{"url":"https://beta.faceiqlabs.com/analysis","prompt":"Look for JavaScript code, canvas rendering, or any code related to facial landmarks. Find references to porion, tragus, gonion, ear landmarks, MediaPipe indices, or landmark arrays. Look for any script tags or bundled JavaScript containing face detection logic."}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":205,"cache_creation_input_tokens":576,"cache_read_input_tokens":26553,"cache_creation":{"ephemeral_5m_input_tokens":576,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfeHqUsXsrHE4ysbyEn","type":"assistant","uuid":"b57bb0d3-d586-430b-ae19-31bac3fc5e9d","timestamp":"2025-12-26T17:08:48.356Z"}
{"parentUuid":"b57bb0d3-d586-430b-ae19-31bac3fc5e9d","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01E3arPgZggs7FCDcpqruaiQ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Vt41U5EcuNpKAE9ncX6ph2","name":"WebFetch","input":{"url":"https://www.faceiqlabs.com/app","prompt":"Look for JavaScript code related to facial landmark detection, side profile analysis, ear landmarks (porion, tragus, gonion), MediaPipe configuration, or landmark positioning code."}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":205,"cache_creation_input_tokens":576,"cache_read_input_tokens":26553,"cache_creation":{"ephemeral_5m_input_tokens":576,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfeHqUsXsrHE4ysbyEn","type":"assistant","uuid":"c317a46f-a39d-43e3-b202-36c733f5ab78","timestamp":"2025-12-26T17:08:49.259Z"}
{"parentUuid":"c317a46f-a39d-43e3-b202-36c733f5ab78","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Request failed with status code 404","is_error":true,"tool_use_id":"toolu_01Vt41U5EcuNpKAE9ncX6ph2"}]},"uuid":"c1714eaf-d391-4215-8ae9-269d37a18a63","timestamp":"2025-12-26T17:08:49.340Z","toolUseResult":"Error: Request failed with status code 404"}
{"parentUuid":"c1714eaf-d391-4215-8ae9-269d37a18a63","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Request failed with status code 404","is_error":true,"tool_use_id":"toolu_01DydfW5Ucanfx85z15jPWbN"}]},"uuid":"b325022c-3a5c-47fb-912d-4174f4b0ba1f","timestamp":"2025-12-26T17:08:49.377Z","toolUseResult":"Error: Request failed with status code 404"}
{"parentUuid":"b325022c-3a5c-47fb-912d-4174f4b0ba1f","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01CzG7KXirb8wFj6WrMsvDZK","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01SpTXE2i8npRH3c7cVy8dCD","name":"WebFetch","input":{"url":"https://beta.faceiqlabs.com/dashboard","prompt":"Find any JavaScript code or references to facial landmarks, side profile detection, porion, tragus, gonion, ear landmarks, or MediaPipe face mesh indices."}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":37,"cache_creation_input_tokens":507,"cache_read_input_tokens":27129,"cache_creation":{"ephemeral_5m_input_tokens":507,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard"}},"requestId":"req_011CWVfezg8rbYhBwDso2uub","type":"assistant","uuid":"bd763c6f-ba01-4c36-b006-bec5acbcb814","timestamp":"2025-12-26T17:08:54.729Z"}
{"parentUuid":"bd763c6f-ba01-4c36-b006-bec5acbcb814","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01CzG7KXirb8wFj6WrMsvDZK","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014Dpt1UuLJ1PXj811SxCQ21","name":"WebFetch","input":{"url":"https://www.faceiqlabs.com/dashboard","prompt":"Find any JavaScript code or references to facial landmarks, side profile detection, porion, tragus, gonion, ear landmarks, or MediaPipe face mesh indices."}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":37,"cache_creation_input_tokens":507,"cache_read_input_tokens":27129,"cache_creation":{"ephemeral_5m_input_tokens":507,"ephemeral_1h_input_tokens":0},"output_tokens":209,"service_tier":"standard"}},"requestId":"req_011CWVfezg8rbYhBwDso2uub","type":"assistant","uuid":"466a6caa-4e73-40e7-9bef-c028b67561ca","timestamp":"2025-12-26T17:08:55.391Z"}
{"parentUuid":"466a6caa-4e73-40e7-9bef-c028b67561ca","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Request failed with status code 404","is_error":true,"tool_use_id":"toolu_014Dpt1UuLJ1PXj811SxCQ21"}]},"uuid":"35d64c33-7c6d-45e6-81cc-20810dbd93e6","timestamp":"2025-12-26T17:08:55.571Z","toolUseResult":"Error: Request failed with status code 404"}
{"parentUuid":"35d64c33-7c6d-45e6-81cc-20810dbd93e6","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01SpTXE2i8npRH3c7cVy8dCD","type":"tool_result","content":"# Analysis of FaceIQ Labs Page Content\n\nBased on my review of the provided web page content, **I found no JavaScript code or references to facial landmarks, side profile detection, porion, tragus, gonion, ear landmarks, or MediaPipe face mesh indices.**\n\nThe content consists primarily of:\n- React/Next.js framework metadata and component references\n- Facebook Pixel tracking implementation\n- Standard HTML metadata (title, description, Open Graph tags)\n- CSS and font stylesheet links\n- No visible facial analysis logic or landmark detection code\n\nThe page title indicates this is \"FaceIQ Labs - Advanced Facial Analysis,\" but the actual implementation code for facial analysis features is not present in the provided HTML content. Any such functionality would likely be loaded dynamically through JavaScript bundles or API calls not shown in this source."}]},"uuid":"e82b7d2d-b752-4065-984c-8b236550ccdd","timestamp":"2025-12-26T17:08:57.966Z","toolUseResult":{"bytes":12907,"code":200,"codeText":"OK","result":"# Analysis of FaceIQ Labs Page Content\n\nBased on my review of the provided web page content, **I found no JavaScript code or references to facial landmarks, side profile detection, porion, tragus, gonion, ear landmarks, or MediaPipe face mesh indices.**\n\nThe content consists primarily of:\n- React/Next.js framework metadata and component references\n- Facebook Pixel tracking implementation\n- Standard HTML metadata (title, description, Open Graph tags)\n- CSS and font stylesheet links\n- No visible facial analysis logic or landmark detection code\n\nThe page title indicates this is \"FaceIQ Labs - Advanced Facial Analysis,\" but the actual implementation code for facial analysis features is not present in the provided HTML content. Any such functionality would likely be loaded dynamically through JavaScript bundles or API calls not shown in this source.","durationMs":2559,"url":"https://beta.faceiqlabs.com/dashboard"}}
{"parentUuid":"e82b7d2d-b752-4065-984c-8b236550ccdd","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01LYpnCLpQPK4Qd9rLxwMEuQ","type":"message","role":"assistant","content":[{"type":"text","text":"Let me check the local LOOKSMAXX codebase to understand how side profile landmarks are currently implemented, and then search for any FaceIQ reference materials that might have been analyzed."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":37,"cache_creation_input_tokens":556,"cache_read_input_tokens":27636,"cache_creation":{"ephemeral_5m_input_tokens":556,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWVffdTxMToS5UBg4PWQv","type":"assistant","uuid":"bf3c7d71-7327-4a1b-a86c-dadcf8be97da","timestamp":"2025-12-26T17:09:03.435Z"}
{"parentUuid":"bf3c7d71-7327-4a1b-a86c-dadcf8be97da","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01LYpnCLpQPK4Qd9rLxwMEuQ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01CzqmcCbx2MvchHExvi5RVk","name":"Glob","input":{"pattern":"**/FACEIQ*/**/*.{ts,js,json,md}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":37,"cache_creation_input_tokens":556,"cache_read_input_tokens":27636,"cache_creation":{"ephemeral_5m_input_tokens":556,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWVffdTxMToS5UBg4PWQv","type":"assistant","uuid":"ee5f43a6-92e5-4af0-8b0b-dcc30007ce79","timestamp":"2025-12-26T17:09:04.364Z"}
{"parentUuid":"ee5f43a6-92e5-4af0-8b0b-dcc30007ce79","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","message":{"model":"claude-opus-4-5-20251101","id":"msg_01LYpnCLpQPK4Qd9rLxwMEuQ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_018q14vwHoC9RGHM3a3bHV4y","name":"Grep","input":{"pattern":"porion|tragus|gonion","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":37,"cache_creation_input_tokens":556,"cache_read_input_tokens":27636,"cache_creation":{"ephemeral_5m_input_tokens":556,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWVffdTxMToS5UBg4PWQv","type":"assistant","uuid":"d561a911-d491-40cd-be36-6557ae3b2a84","timestamp":"2025-12-26T17:09:05.208Z"}
{"parentUuid":"d561a911-d491-40cd-be36-6557ae3b2a84","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_018q14vwHoC9RGHM3a3bHV4y","type":"tool_result","content":"Found 118 files\nverify_side_landmarks.py\nlooksmaxx-api/app/services/detection.py\nlooksmaxx-app/src/lib/recommendations/hardmaxxing.ts\nlooksmaxx-app/src/lib/data/metric-configs.ts\nlooksmaxx-app/src/lib/bezier-curves.ts\nlooksmaxx-app/src/lib/scoring/types.ts\nlooksmaxx-app/src/components/results/visualization/FaceMorphing.tsx\nlooksmaxx-app/src/contexts/ResultsContext.tsx\nlooksmaxx-app/src/lib/results/analysis.ts\nlooksmax_engine.py\nvision_engine.py\nlandmark_map.json\nharmony_data.json\nlooksmaxx-app/src/lib/sideProfileDetection.ts\nlooksmaxx-app/src/lib/looksmax-scoring.ts\nlooksmaxx-app/src/lib/scoring/analyzer.ts\nlooksmaxx-app/src/lib/results/transformations.ts\nlooksmaxx-app/MATH_AUDIT_REPORT.md\nlooksmaxx-app/TECHNICAL_SPECS.md\nlooksmaxx-app/scripts/test-scoring.ts\nlooksmaxx-app/scripts/test-male-analysis.ts\nlooksmaxx-app/scripts/test-female-analysis.ts\nlooksmaxx-app/scripts/test-all-ethnicities.ts\nlooksmaxx-app/test-full-simulation.ts\nlooksmaxx-app/changes.md\nlooksmaxx-app/docs/TAXONOMY.md\nlooksmaxx-app/docs/METRICS_RESEARCH.md\nlooksmaxx-app/src/lib/landmarks.ts\nlooksmaxx-app/src/lib/mediapipeDetection.ts\nlooksmaxx-app/src/lib/taxonomy.ts\nlooksmaxx-app/src/lib/landmarkImages.ts\nlooksmaxx-app/src/hooks/useAutoDetection.ts\nlooksmaxx-app/src/components/LandmarkAnalysisTool.tsx\nlooksmaxx-app/src/components/SideProfileManualTool.tsx\nlooksmaxx-app/src/app/api/test-scoring/route.ts\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/harmony_data_raw.txt\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/harmony_data.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_7.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_6.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_5.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_4.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_3.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_2.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_1.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_0.js\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md.resolved\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md.resolved.0\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md\nFACEIQPAID/LOGIC/landmark_detection_analysis.md\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/comprehensive_library.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/fully_decoded_content_library.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/facial_scoring_rules.ts\nFACEIQPAID/LOGIC/harmony_data.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/FACEIQ_Decoded_Library.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/Faceiqlabs-4.99.html\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/final_content_library.json\nFACEIQPAID/LOGIC/final_content_library.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_library_raw.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/scraped_content.json\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.3\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.2\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.1\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.0\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.resolved\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.resolved.2\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.resolved.1\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/console_logs.txt\nFACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/yourplanandpotential.html\nFACEIQPAID/EXTRACTED/yourplanandpotential.html\nFACEIQPAID/EXTRACTED/faceiqsideview.html\nFACEIQPAID/EXTRACTED/faceiqfrontview.html\nFACEIQPAID/EXTRACTED/faceiqoverview.html\nFACEIQPAID/EXTRACTED/Analysis Report - FaceIQ Labs.html\nFACEIQPAID/EXTRACTED/Female:White.htc\nFACEIQPAID/EXTRACTED/Female:Pacific Islander.htc\nFACEIQPAID/EXTRACTED/Female:Native American.htc\nFACEIQPAID/EXTRACTED/Female:Middle Eastern.htc\nFACEIQPAID/EXTRACTED/Female:Hispanic.htc\nFACEIQPAID/EXTRACTED/Female:African.htc\nFACEIQPAID/EXTRACTED/Female:South Asian.htc\nFACEIQPAID/EXTRACTED/Female:East Asian.htc\nFACEIQPAID/EXTRACTED/Male:White.htc\nFACEIQPAID/EXTRACTED/Male:Pacific Islander.htc\nFACEIQPAID/EXTRACTED/Male:Native American.htc\nFACEIQPAID/EXTRACTED/Male:Middle Eastern.htc\nFACEIQPAID/EXTRACTED/Male:Hispanic.htc\nFACEIQPAID/EXTRACTED/BlackAfrican.htc\nFACEIQPAID/EXTRACTED/Male:SouthAsian.htc\nFACEIQPAID/EXTRACTED/Male:EastAsian.htc\nverify_engine.py\nFACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER-CLEAN.har\nFACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER-RESPONSES.json\nFACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER.har\nFACEIQPAID/EXTRACTED/site-capture-beta.faceiqlabs.com-1766244328972.json\nFACEIQPAID/EXTRACTED/FACEIQALL-HTML.html\nFACEIQPAID/EXTRACTED/Analysis Report - YOURPLAN+POTENTIAL.html\nFACEIQPAID/EXTRACTED/FACEIQ-SUPPORT.html\nFACEIQPAID/EXTRACTED/FACEIQ-OPTIONS.html\nFACEIQPAID/EXTRACTED/FACEIQ-YOURPLAN&POTENTIAL.html\nFACEIQPAID/EXTRACTED/FACEIQ-SIDERATIOS.html\nFACEIQPAID/EXTRACTED/FACEIQ-FRONT RATIOS.html\nFACEIQPAID/EXTRACTED/FACEIQ-OVERVIEW.html\nFACEIQPAID/EXTRACTED/FACEIQ-SUPPORT.har\nFACEIQPAID/EXTRACTED/FACEIQ-OPTIONS.har\nFACEIQPAID/EXTRACTED/FACEIQ-SIDERATIOS.har\nFACEIQPAID/EXTRACTED/FACEIQ-FRONTRATIOS.har\nFACEIQPAID/EXTRACTED/FACEIQOVERVIEW.har\nlooksmaxx-app/src/lib/recommendations/nonSurgical.ts\nlooksmaxx-app/src/lib/serverSideDetection.ts\nlooksmaxx-app/src/app/api/side-landmarks/route.ts\nlooksmaxx-app/public/landmark-mapper.html\nFACEIQPAID/EXTRACTED/landmarkers.js\nlooksmaxx-app/public/landmarks-3d-2.json\nside_profile_analyzer.py\nFACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/2c8518350cefc6a6.js"}]},"uuid":"7ce1d74a-fdbb-49ff-ae09-670efb18831a","timestamp":"2025-12-26T17:09:05.901Z","toolUseResult":{"mode":"files_with_matches","filenames":["verify_side_landmarks.py","looksmaxx-api/app/services/detection.py","looksmaxx-app/src/lib/recommendations/hardmaxxing.ts","looksmaxx-app/src/lib/data/metric-configs.ts","looksmaxx-app/src/lib/bezier-curves.ts","looksmaxx-app/src/lib/scoring/types.ts","looksmaxx-app/src/components/results/visualization/FaceMorphing.tsx","looksmaxx-app/src/contexts/ResultsContext.tsx","looksmaxx-app/src/lib/results/analysis.ts","looksmax_engine.py","vision_engine.py","landmark_map.json","harmony_data.json","looksmaxx-app/src/lib/sideProfileDetection.ts","looksmaxx-app/src/lib/looksmax-scoring.ts","looksmaxx-app/src/lib/scoring/analyzer.ts","looksmaxx-app/src/lib/results/transformations.ts","looksmaxx-app/MATH_AUDIT_REPORT.md","looksmaxx-app/TECHNICAL_SPECS.md","looksmaxx-app/scripts/test-scoring.ts","looksmaxx-app/scripts/test-male-analysis.ts","looksmaxx-app/scripts/test-female-analysis.ts","looksmaxx-app/scripts/test-all-ethnicities.ts","looksmaxx-app/test-full-simulation.ts","looksmaxx-app/changes.md","looksmaxx-app/docs/TAXONOMY.md","looksmaxx-app/docs/METRICS_RESEARCH.md","looksmaxx-app/src/lib/landmarks.ts","looksmaxx-app/src/lib/mediapipeDetection.ts","looksmaxx-app/src/lib/taxonomy.ts","looksmaxx-app/src/lib/landmarkImages.ts","looksmaxx-app/src/hooks/useAutoDetection.ts","looksmaxx-app/src/components/LandmarkAnalysisTool.tsx","looksmaxx-app/src/components/SideProfileManualTool.tsx","looksmaxx-app/src/app/api/test-scoring/route.ts","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/harmony_data_raw.txt","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/harmony_data.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_7.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_6.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_5.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_4.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_3.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_2.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_1.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_0.js","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md.resolved","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md.resolved.0","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md","FACEIQPAID/LOGIC/landmark_detection_analysis.md","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/comprehensive_library.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/fully_decoded_content_library.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/facial_scoring_rules.ts","FACEIQPAID/LOGIC/harmony_data.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/FACEIQ_Decoded_Library.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/Faceiqlabs-4.99.html","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/final_content_library.json","FACEIQPAID/LOGIC/final_content_library.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_library_raw.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/scraped_content.json","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.3","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.2","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.1","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.resolved.0","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.resolved","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.resolved.2","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.resolved.1","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/console_logs.txt","FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/yourplanandpotential.html","FACEIQPAID/EXTRACTED/yourplanandpotential.html","FACEIQPAID/EXTRACTED/faceiqsideview.html","FACEIQPAID/EXTRACTED/faceiqfrontview.html","FACEIQPAID/EXTRACTED/faceiqoverview.html","FACEIQPAID/EXTRACTED/Analysis Report - FaceIQ Labs.html","FACEIQPAID/EXTRACTED/Female:White.htc","FACEIQPAID/EXTRACTED/Female:Pacific Islander.htc","FACEIQPAID/EXTRACTED/Female:Native American.htc","FACEIQPAID/EXTRACTED/Female:Middle Eastern.htc","FACEIQPAID/EXTRACTED/Female:Hispanic.htc","FACEIQPAID/EXTRACTED/Female:African.htc","FACEIQPAID/EXTRACTED/Female:South Asian.htc","FACEIQPAID/EXTRACTED/Female:East Asian.htc","FACEIQPAID/EXTRACTED/Male:White.htc","FACEIQPAID/EXTRACTED/Male:Pacific Islander.htc","FACEIQPAID/EXTRACTED/Male:Native American.htc","FACEIQPAID/EXTRACTED/Male:Middle Eastern.htc","FACEIQPAID/EXTRACTED/Male:Hispanic.htc","FACEIQPAID/EXTRACTED/BlackAfrican.htc","FACEIQPAID/EXTRACTED/Male:SouthAsian.htc","FACEIQPAID/EXTRACTED/Male:EastAsian.htc","verify_engine.py","FACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER-CLEAN.har","FACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER-RESPONSES.json","FACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER.har","FACEIQPAID/EXTRACTED/site-capture-beta.faceiqlabs.com-1766244328972.json","FACEIQPAID/EXTRACTED/FACEIQALL-HTML.html","FACEIQPAID/EXTRACTED/Analysis Report - YOURPLAN+POTENTIAL.html","FACEIQPAID/EXTRACTED/FACEIQ-SUPPORT.html","FACEIQPAID/EXTRACTED/FACEIQ-OPTIONS.html","FACEIQPAID/EXTRACTED/FACEIQ-YOURPLAN&POTENTIAL.html","FACEIQPAID/EXTRACTED/FACEIQ-SIDERATIOS.html","FACEIQPAID/EXTRACTED/FACEIQ-FRONT RATIOS.html","FACEIQPAID/EXTRACTED/FACEIQ-OVERVIEW.html","FACEIQPAID/EXTRACTED/FACEIQ-SUPPORT.har","FACEIQPAID/EXTRACTED/FACEIQ-OPTIONS.har","FACEIQPAID/EXTRACTED/FACEIQ-SIDERATIOS.har","FACEIQPAID/EXTRACTED/FACEIQ-FRONTRATIOS.har","FACEIQPAID/EXTRACTED/FACEIQOVERVIEW.har","looksmaxx-app/src/lib/recommendations/nonSurgical.ts","looksmaxx-app/src/lib/serverSideDetection.ts","looksmaxx-app/src/app/api/side-landmarks/route.ts","looksmaxx-app/public/landmark-mapper.html","FACEIQPAID/EXTRACTED/landmarkers.js","looksmaxx-app/public/landmarks-3d-2.json","side_profile_analyzer.py","FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/2c8518350cefc6a6.js"],"numFiles":118}}
{"parentUuid":"7ce1d74a-fdbb-49ff-ae09-670efb18831a","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01CzqmcCbx2MvchHExvi5RVk","type":"tool_result","content":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/clarity.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/fbevents.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/e97114e890eb3a79.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/053ca3e7db98a078.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/66e0cf3e7f0d0300.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/90fc99427b3839c5.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/turbopack-c09d4eca915564fc.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/d4bb361c21ae9ef7.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/d96012bcfc98706a.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/d80b3790a119a285.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/629e30dad51fe025.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/a6dad97d9634a72d.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/c39f5221ff08c3e2.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/01bdaae293bf94c7.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/fa54eec765d26739.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/dd5fe41cfb22f27d.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/2c8518350cefc6a6.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/b96cf00fe8be8125.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/edb80f7470d41c32.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/dba48f755ab185cb.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/72b6e4a245580a73.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/e9b6f0b4f225cf29.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/80f3e40e8b9fbb18.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/vision_wasm_internal.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/landmarkers.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/site-capture-beta.faceiqlabs.com-1766244328972.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER-RESPONSES.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/task.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/deobfuscated_scoring.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/deobfuscated_scoring.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_extraction_report.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_extraction_report.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/scraped_content.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/id_mappings.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/treatment_metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/implementation_plan.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_library_raw.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/final_content_library.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/final_content_library.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/english_strings.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/english_map.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/FACEIQ_Decoded_Library.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/traffic_extracted_map.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/harmony_data.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/facial_scoring_rules.ts\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/fully_decoded_content_library.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/derived_key.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/comprehensive_library.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/logic_report.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_report.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_0.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_1.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_2.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_3.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_4.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_5.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/landmark_detection_analysis.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/reverse_engineering_manifest.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/reverse_engineering_manifest.md.metadata.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_0.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_1.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_2.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_3.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_4.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_5.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_6.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_7.js\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/implementation_plan.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/harmony_data.json\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/task.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/walkthrough.md\n/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/walkthrough.md.metadata.json"}]},"uuid":"ecb3b1ad-2d1d-4af0-8664-be21098ec093","timestamp":"2025-12-26T17:09:06.040Z","toolUseResult":{"filenames":["/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/clarity.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/fbevents.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/e97114e890eb3a79.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/053ca3e7db98a078.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/66e0cf3e7f0d0300.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/90fc99427b3839c5.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/turbopack-c09d4eca915564fc.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/d4bb361c21ae9ef7.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/d96012bcfc98706a.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/d80b3790a119a285.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/629e30dad51fe025.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/a6dad97d9634a72d.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/c39f5221ff08c3e2.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/01bdaae293bf94c7.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/fa54eec765d26739.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/dd5fe41cfb22f27d.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/2c8518350cefc6a6.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/b96cf00fe8be8125.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/edb80f7470d41c32.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/dba48f755ab185cb.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/72b6e4a245580a73.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/e9b6f0b4f225cf29.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/80f3e40e8b9fbb18.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FaceIQ Labs - Advanced Facial Analysis_files/vision_wasm_internal.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/landmarkers.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/site-capture-beta.faceiqlabs.com-1766244328972.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/FACEIQ-RACE&GENDER-RESPONSES.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/task.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_analysis.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/faceiq_spec.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/deobfuscated_scoring.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/deobfuscated_scoring.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_extraction_report.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_extraction_report.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/scraped_content.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/id_mappings.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/treatment_metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/implementation_plan.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/content_library_raw.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/final_content_library.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/final_content_library.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/english_strings.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/english_map.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/FACEIQ_Decoded_Library.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/traffic_extracted_map.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/harmony_data.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/facial_scoring_rules.ts","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/fully_decoded_content_library.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/derived_key.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/comprehensive_library.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/logic_report.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/logic_report.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_0.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_1.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_2.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_3.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_4.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/extracted_5.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/landmark_detection_analysis.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/landmark_detection_analysis.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/reverse_engineering_manifest.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/reverse_engineering_manifest.md.metadata.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_0.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_1.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_2.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_3.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_4.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_5.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_6.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/large_extracted_7.js","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/implementation_plan.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/harmony_data.json","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/task.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/walkthrough.md","/Users/imorgado/LOOKSMAXX/FACEIQPAID/b4ddc3c6-8702-4c39-8400-b68071bf91d6/walkthrough.md.metadata.json"],"durationMs":689,"numFiles":78,"truncated":false}}
{"parentUuid":"ecb3b1ad-2d1d-4af0-8664-be21098ec093","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_017zqszn8dWoPTwnzi9f8cyP","type":"message","role":"assistant","content":[{"type":"text","text":"I found landmark detection analysis files. Let me read the key files to understand FaceIQ's landmark positioning and compare with LOOKSMAXX."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2949,"cache_creation_input_tokens":4234,"cache_read_input_tokens":28192,"cache_creation":{"ephemeral_5m_input_tokens":4234,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfgDvtCcX4kasaMFBcB","type":"assistant","uuid":"4434d3d9-b1e7-4363-9c19-816d50811847","timestamp":"2025-12-26T17:09:11.683Z"}
{"parentUuid":"4434d3d9-b1e7-4363-9c19-816d50811847","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_017zqszn8dWoPTwnzi9f8cyP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01FvAjnZYoY4ukMvBQ2mtPFH","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/landmark_detection_analysis.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2949,"cache_creation_input_tokens":4234,"cache_read_input_tokens":28192,"cache_creation":{"ephemeral_5m_input_tokens":4234,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfgDvtCcX4kasaMFBcB","type":"assistant","uuid":"224d4e84-67fe-483d-93b5-851ef64388fc","timestamp":"2025-12-26T17:09:12.087Z"}
{"parentUuid":"224d4e84-67fe-483d-93b5-851ef64388fc","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_017zqszn8dWoPTwnzi9f8cyP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01FxbKpBDE4jtfCGFP9NGDLk","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/landmarkers.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2949,"cache_creation_input_tokens":4234,"cache_read_input_tokens":28192,"cache_creation":{"ephemeral_5m_input_tokens":4234,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfgDvtCcX4kasaMFBcB","type":"assistant","uuid":"276ed0c3-8ab5-4b80-849d-f15429ccae28","timestamp":"2025-12-26T17:09:12.519Z"}
{"parentUuid":"276ed0c3-8ab5-4b80-849d-f15429ccae28","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_017zqszn8dWoPTwnzi9f8cyP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DnpkHmBfvUZDe6MyW5oR7p","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/sideProfileDetection.ts"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2949,"cache_creation_input_tokens":4234,"cache_read_input_tokens":28192,"cache_creation":{"ephemeral_5m_input_tokens":4234,"ephemeral_1h_input_tokens":0},"output_tokens":243,"service_tier":"standard"}},"requestId":"req_011CWVfgDvtCcX4kasaMFBcB","type":"assistant","uuid":"d90cebfe-92fa-4d7b-8766-412ce2517180","timestamp":"2025-12-26T17:09:13.041Z"}
{"parentUuid":"d90cebfe-92fa-4d7b-8766-412ce2517180","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01FvAjnZYoY4ukMvBQ2mtPFH","type":"tool_result","content":"     1# Landmark Detection & Side Profile Analysis\n     2\n     3## Executive Summary\n     4The application utilizes **Google's MediaPipe Face Landmarker**, dynamically loaded via the `optimizationguide-pa.googleapis.com` API. Detection is performed in real-time within the browser using WebAssembly (WASM) and SIMD acceleration. It does **not** use static or prepositioned landmarks; it continually scans the video feed for face geometry.\n     5\n     6## 1. Technical Architecture\n     7\n     8### 1.1 Detection Engine\n     9- **Library**: MediaPipe Face Landmarker (Web / TFJS).\n    10- **Delivery Method**: Dynamic Remote Procedure Call (RPC).\n    11- **Evidence**:\n    12    - Traffic captures reveal `POST` requests to `https://optimizationguide-pa.googleapis.com/v1:GetModels`.\n    13    - Console logs in traffic data contain: `{\"level\":\"LOG\",\"message\":\"MediaPipe Face Landmarker initialized successfully\"}`.\n    14    - Presence of Brotli-compressed WASM binaries in the traffic stream.\n    15\n    16### 1.2 \"Prepositioned\" vs. \"Detecting\"\n    17The user asked: *\"Are they prepositioned to specific x/y coordinates immediately or is it detecting?\"*\n    18\n    19**Answer: It is Detecting.**\n    20The application runs a continuous inference loop. The \"Mesh\" you see appearing on the face is the result of the `FaceLandmarker.detect()` function running on every video frame. It is not a static overlay; it adjusts to head movement, yaw, and pitch in real-time.\n    21\n    22## 2. Side Profile Logic\n    23\n    24### 2.1 3D Landmark Space\n    25MediaPipe Face Mesh provides **478 3D landmarks** (x, y, z). The `z` coordinate represents depth relative to the center of the head. This allows the application to calculate side-profile metrics even if the user is slightly turned, or to validate that the user is in a true \"Profile View\".\n    26\n    27### 2.2 Profile Detection Strategy\n    28To analyze the \"Side of the Face\", the application likely employs the following logic (based on standard implementation patterns for this library):\n    29\n    301.  **Pose Validation (Yaw Check)**:\n    31    - The app calculates the Head Yaw (rotation left/right).\n    32    - It waits for the Yaw to reach a threshold (e.g., > 45 or < -45) to consider the face as being in \"Profile View\".\n    33    - **Landmarks used for Pose**: Nose Tip (1) vs Ear Tragus (234/454).\n    34\n    352.  **Key Profile Ratios**:\n    36    Once in profile view, the app calculates specific geometric relationships. Based on the \"Flaws\" found in the library (e.g., \"Recession relative to Frankfort Plane\", \"Nasofacial Angle\"), the following landmarks are mathematically involved:\n    37\n    38    | Feature | Standard MediaPipe Indices |\n    39    | :--- | :--- |\n    40    | **Glabella** (Forehead/Brow) | 10 or 151 |\n    41    | **Nasion** (Bridge of Nose) | 6 or 168 |\n    42    | **Pronasale** (Nose Tip) | 1 |\n    43    | **Subnasale** (Base of Nose) | 2 |\n    44    | **Pogonion** (Chin Tip) | 152 |\n    45    | **Gonion** (Jaw Angle) | 132 or 58 (Left), 361 or 288 (Right) |\n    46    | **Tragus** (Ear) | 234 (Left), 454 (Right) |\n    47\n    48### 2.3 Frankfort Plane Calculation\n    49The usage of \"Recession relative to Frankfort plane\" in the extracted logic proves the system calculates this specific anatomical reference line.\n    50- **Frankfort Plane**: Line connecting the Porion (Ear canal/Tragus area) to the Orbitale (Bottom of eye socket).\n    51- **Computation**: Vector from Landmark 234 (Ear) to Landmark 33 (Eye bottom). Vertical lines dropped from the Glabella or Nasion against this plane determine \"Recession\".\n    52\n    53## 3. Data Flow\n    54\n    551.  **Initialization**: Browser fetches WASM binary + Model Config from Google Optimization Guide.\n    562.  **Inference**: `FaceLandmarker.detect(videoFrame)` returns 478 landmarks.\n    573.  **Measurement**: Application JavaScript (likely `j1.js`) calculates Euclidean distances and angles between specific indices (e.g., `Distance(Glabella, Pogonion)`).\n    584.  **Scoring**: These raw values are passed to the Bezier Scoring engine (documented in `deobfuscated_scoring.js`) to produce the \"0-100\" scores.\n    59\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"0d21d468-b5c1-4172-9fae-e100a81853a6","timestamp":"2025-12-26T17:09:13.052Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/landmark_detection_analysis.md","content":"# Landmark Detection & Side Profile Analysis\n\n## Executive Summary\nThe application utilizes **Google's MediaPipe Face Landmarker**, dynamically loaded via the `optimizationguide-pa.googleapis.com` API. Detection is performed in real-time within the browser using WebAssembly (WASM) and SIMD acceleration. It does **not** use static or prepositioned landmarks; it continually scans the video feed for face geometry.\n\n## 1. Technical Architecture\n\n### 1.1 Detection Engine\n- **Library**: MediaPipe Face Landmarker (Web / TFJS).\n- **Delivery Method**: Dynamic Remote Procedure Call (RPC).\n- **Evidence**:\n    - Traffic captures reveal `POST` requests to `https://optimizationguide-pa.googleapis.com/v1:GetModels`.\n    - Console logs in traffic data contain: `{\"level\":\"LOG\",\"message\":\"MediaPipe Face Landmarker initialized successfully\"}`.\n    - Presence of Brotli-compressed WASM binaries in the traffic stream.\n\n### 1.2 \"Prepositioned\" vs. \"Detecting\"\nThe user asked: *\"Are they prepositioned to specific x/y coordinates immediately or is it detecting?\"*\n\n**Answer: It is Detecting.**\nThe application runs a continuous inference loop. The \"Mesh\" you see appearing on the face is the result of the `FaceLandmarker.detect()` function running on every video frame. It is not a static overlay; it adjusts to head movement, yaw, and pitch in real-time.\n\n## 2. Side Profile Logic\n\n### 2.1 3D Landmark Space\nMediaPipe Face Mesh provides **478 3D landmarks** (x, y, z). The `z` coordinate represents depth relative to the center of the head. This allows the application to calculate side-profile metrics even if the user is slightly turned, or to validate that the user is in a true \"Profile View\".\n\n### 2.2 Profile Detection Strategy\nTo analyze the \"Side of the Face\", the application likely employs the following logic (based on standard implementation patterns for this library):\n\n1.  **Pose Validation (Yaw Check)**:\n    - The app calculates the Head Yaw (rotation left/right).\n    - It waits for the Yaw to reach a threshold (e.g., > 45 or < -45) to consider the face as being in \"Profile View\".\n    - **Landmarks used for Pose**: Nose Tip (1) vs Ear Tragus (234/454).\n\n2.  **Key Profile Ratios**:\n    Once in profile view, the app calculates specific geometric relationships. Based on the \"Flaws\" found in the library (e.g., \"Recession relative to Frankfort Plane\", \"Nasofacial Angle\"), the following landmarks are mathematically involved:\n\n    | Feature | Standard MediaPipe Indices |\n    | :--- | :--- |\n    | **Glabella** (Forehead/Brow) | 10 or 151 |\n    | **Nasion** (Bridge of Nose) | 6 or 168 |\n    | **Pronasale** (Nose Tip) | 1 |\n    | **Subnasale** (Base of Nose) | 2 |\n    | **Pogonion** (Chin Tip) | 152 |\n    | **Gonion** (Jaw Angle) | 132 or 58 (Left), 361 or 288 (Right) |\n    | **Tragus** (Ear) | 234 (Left), 454 (Right) |\n\n### 2.3 Frankfort Plane Calculation\nThe usage of \"Recession relative to Frankfort plane\" in the extracted logic proves the system calculates this specific anatomical reference line.\n- **Frankfort Plane**: Line connecting the Porion (Ear canal/Tragus area) to the Orbitale (Bottom of eye socket).\n- **Computation**: Vector from Landmark 234 (Ear) to Landmark 33 (Eye bottom). Vertical lines dropped from the Glabella or Nasion against this plane determine \"Recession\".\n\n## 3. Data Flow\n\n1.  **Initialization**: Browser fetches WASM binary + Model Config from Google Optimization Guide.\n2.  **Inference**: `FaceLandmarker.detect(videoFrame)` returns 478 landmarks.\n3.  **Measurement**: Application JavaScript (likely `j1.js`) calculates Euclidean distances and angles between specific indices (e.g., `Distance(Glabella, Pogonion)`).\n4.  **Scoring**: These raw values are passed to the Bezier Scoring engine (documented in `deobfuscated_scoring.js`) to produce the \"0-100\" scores.\n","numLines":59,"startLine":1,"totalLines":59}}}
{"parentUuid":"0d21d468-b5c1-4172-9fae-e100a81853a6","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DnpkHmBfvUZDe6MyW5oR7p","type":"tool_result","content":"     1/**\n     2 * Side Profile Detection using Image Processing\n     3 *\n     4 * Since MediaPipe doesn't work well with side profiles, this module uses\n     5 * edge detection and contour analysis to find the profile silhouette\n     6 * and estimate landmark positions.\n     7 *\n     8 * Performance optimizations:\n     9 * - Image downsampling before edge detection (reduces computation 4-9x)\n    10 */\n    11\n    12import { SIDE_PROFILE_LANDMARKS } from './landmarks';\n    13\n    14// Maximum dimension for edge detection processing\n    15const MAX_PROCESSING_SIZE = 480;\n    16\n    17interface Point {\n    18  x: number;\n    19  y: number;\n    20}\n    21\n    22interface ProfileContour {\n    23  points: Point[];\n    24  boundingBox: { x: number; y: number; width: number; height: number };\n    25  orientation: 'left' | 'right'; // Which direction the face is pointing\n    26}\n    27\n    28interface SideProfileResult {\n    29  landmarks: Array<{ id: string; x: number; y: number }>;\n    30  confidence: number;\n    31  contour: Point[];\n    32  orientation: 'left' | 'right';\n    33}\n    34\n    35/**\n    36 * Detect side profile landmarks from an image\n    37 */\n    38export async function detectSideProfile(\n    39  imageUrl: string\n    40): Promise<SideProfileResult | null> {\n    41  try {\n    42    const img = await loadImage(imageUrl);\n    43    const canvas = document.createElement('canvas');\n    44    const ctx = canvas.getContext('2d');\n    45    if (!ctx) return null;\n    46\n    47    // Downsample large images for faster edge detection\n    48    const { width, height } = downsampleDimensions(img.width, img.height, MAX_PROCESSING_SIZE);\n    49    canvas.width = width;\n    50    canvas.height = height;\n    51    ctx.imageSmoothingEnabled = true;\n    52    ctx.imageSmoothingQuality = 'high';\n    53    ctx.drawImage(img, 0, 0, width, height);\n    54\n    55    // Get image data (landmarks use normalized 0-1 coordinates, so no rescaling needed)\n    56    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    57\n    58    // Step 1: Convert to grayscale\n    59    const grayscale = toGrayscale(imageData);\n    60\n    61    // Step 2: Apply Gaussian blur to reduce noise\n    62    const blurred = gaussianBlur(grayscale, canvas.width, canvas.height);\n    63\n    64    // Step 3: Edge detection (Sobel operator)\n    65    const edges = sobelEdgeDetection(blurred, canvas.width, canvas.height);\n    66\n    67    // Step 4: Find the profile contour\n    68    const contour = extractProfileContour(edges, canvas.width, canvas.height);\n    69\n    70    if (!contour || contour.points.length < 10) {\n    71      console.log('[SideProfile] Could not extract sufficient contour points');\n    72      return null;\n    73    }\n    74\n    75    // Step 5: Analyze contour to find key anchor points\n    76    const anchors = findAnchorPoints(contour);\n    77\n    78    // Step 6: Map anchors to our 28 landmarks\n    79    const landmarks = mapToLandmarks(anchors, contour);\n    80\n    81    return {\n    82      landmarks,\n    83      confidence: 0.7, // Lower confidence than MediaPipe frontal\n    84      contour: contour.points,\n    85      orientation: contour.orientation,\n    86    };\n    87  } catch (error) {\n    88    console.error('[SideProfile] Detection error:', error);\n    89    return null;\n    90  }\n    91}\n    92\n    93/**\n    94 * Load an image from URL\n    95 */\n    96function loadImage(url: string): Promise<HTMLImageElement> {\n    97  return new Promise((resolve, reject) => {\n    98    const img = new Image();\n    99    img.crossOrigin = 'anonymous';\n   100    img.onload = () => resolve(img);\n   101    img.onerror = reject;\n   102    img.src = url;\n   103  });\n   104}\n   105\n   106/**\n   107 * Calculate downsampled dimensions while maintaining aspect ratio\n   108 */\n   109function downsampleDimensions(\n   110  width: number,\n   111  height: number,\n   112  maxSize: number\n   113): { width: number; height: number } {\n   114  const maxDim = Math.max(width, height);\n   115  if (maxDim <= maxSize) {\n   116    return { width, height };\n   117  }\n   118\n   119  const scale = maxSize / maxDim;\n   120  return {\n   121    width: Math.round(width * scale),\n   122    height: Math.round(height * scale),\n   123  };\n   124}\n   125\n   126/**\n   127 * Convert image data to grayscale array\n   128 */\n   129function toGrayscale(imageData: ImageData): Uint8Array {\n   130  const data = imageData.data;\n   131  const gray = new Uint8Array(data.length / 4);\n   132\n   133  for (let i = 0; i < gray.length; i++) {\n   134    const idx = i * 4;\n   135    // Luminosity method for grayscale\n   136    gray[i] = Math.round(0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2]);\n   137  }\n   138\n   139  return gray;\n   140}\n   141\n   142/**\n   143 * Apply 3x3 Gaussian blur\n   144 */\n   145function gaussianBlur(gray: Uint8Array, width: number, height: number): Uint8Array {\n   146  const kernel = [\n   147    1/16, 2/16, 1/16,\n   148    2/16, 4/16, 2/16,\n   149    1/16, 2/16, 1/16\n   150  ];\n   151\n   152  const result = new Uint8Array(gray.length);\n   153\n   154  for (let y = 1; y < height - 1; y++) {\n   155    for (let x = 1; x < width - 1; x++) {\n   156      let sum = 0;\n   157      let k = 0;\n   158      for (let ky = -1; ky <= 1; ky++) {\n   159        for (let kx = -1; kx <= 1; kx++) {\n   160          sum += gray[(y + ky) * width + (x + kx)] * kernel[k++];\n   161        }\n   162      }\n   163      result[y * width + x] = sum;\n   164    }\n   165  }\n   166\n   167  return result;\n   168}\n   169\n   170/**\n   171 * Sobel edge detection\n   172 */\n   173function sobelEdgeDetection(gray: Uint8Array, width: number, height: number): Uint8Array {\n   174  const sobelX = [-1, 0, 1, -2, 0, 2, -1, 0, 1];\n   175  const sobelY = [-1, -2, -1, 0, 0, 0, 1, 2, 1];\n   176\n   177  const edges = new Uint8Array(gray.length);\n   178\n   179  for (let y = 1; y < height - 1; y++) {\n   180    for (let x = 1; x < width - 1; x++) {\n   181      let gx = 0, gy = 0;\n   182      let k = 0;\n   183\n   184      for (let ky = -1; ky <= 1; ky++) {\n   185        for (let kx = -1; kx <= 1; kx++) {\n   186          const pixel = gray[(y + ky) * width + (x + kx)];\n   187          gx += pixel * sobelX[k];\n   188          gy += pixel * sobelY[k];\n   189          k++;\n   190        }\n   191      }\n   192\n   193      // Magnitude\n   194      edges[y * width + x] = Math.min(255, Math.sqrt(gx * gx + gy * gy));\n   195    }\n   196  }\n   197\n   198  return edges;\n   199}\n   200\n   201/**\n   202 * Extract the profile contour from edge image\n   203 * Looks for the strongest vertical edge on each side\n   204 */\n   205function extractProfileContour(\n   206  edges: Uint8Array,\n   207  width: number,\n   208  height: number\n   209): ProfileContour | null {\n   210  // Determine if face is on left or right side of image\n   211  let leftEdgeSum = 0;\n   212  let rightEdgeSum = 0;\n   213\n   214  const midX = width / 2;\n   215\n   216  for (let y = 0; y < height; y++) {\n   217    for (let x = 0; x < width; x++) {\n   218      const val = edges[y * width + x];\n   219      if (x < midX) {\n   220        leftEdgeSum += val;\n   221      } else {\n   222        rightEdgeSum += val;\n   223      }\n   224    }\n   225  }\n   226\n   227  // Face is likely on the side with more edge activity\n   228  const faceOnLeft = leftEdgeSum > rightEdgeSum;\n   229  const orientation: 'left' | 'right' = faceOnLeft ? 'left' : 'right'; // profile edge direction\n   230\n   231  // Find the profile edge - scan from the face side inward\n   232  const contourPoints: Point[] = [];\n   233  const threshold = 30; // Edge threshold\n   234\n   235  // Scan each row to find the profile edge\n   236  for (let y = Math.floor(height * 0.1); y < Math.floor(height * 0.95); y++) {\n   237    let edgeX = -1;\n   238    let maxEdge = threshold;\n   239\n   240    if (faceOnLeft) {\n   241      // Scan from left, find rightmost strong edge in left half\n   242      for (let x = 0; x < midX; x++) {\n   243        if (edges[y * width + x] > maxEdge) {\n   244          maxEdge = edges[y * width + x];\n   245          edgeX = x;\n   246        }\n   247      }\n   248    } else {\n   249      // Scan from right, find leftmost strong edge in right half\n   250      for (let x = width - 1; x >= midX; x--) {\n   251        if (edges[y * width + x] > maxEdge) {\n   252          maxEdge = edges[y * width + x];\n   253          edgeX = x;\n   254        }\n   255      }\n   256    }\n   257\n   258    if (edgeX !== -1) {\n   259      contourPoints.push({ x: edgeX / width, y: y / height });\n   260    }\n   261  }\n   262\n   263  if (contourPoints.length < 10) return null;\n   264\n   265  // Smooth the contour using moving average\n   266  const smoothedPoints = smoothContour(contourPoints, 5);\n   267\n   268  // Calculate bounding box\n   269  let minX = 1, minY = 1, maxX = 0, maxY = 0;\n   270  smoothedPoints.forEach(p => {\n   271    minX = Math.min(minX, p.x);\n   272    minY = Math.min(minY, p.y);\n   273    maxX = Math.max(maxX, p.x);\n   274    maxY = Math.max(maxY, p.y);\n   275  });\n   276\n   277  return {\n   278    points: smoothedPoints,\n   279    boundingBox: { x: minX, y: minY, width: maxX - minX, height: maxY - minY },\n   280    orientation,\n   281  };\n   282}\n   283\n   284/**\n   285 * Smooth contour points using moving average\n   286 */\n   287function smoothContour(points: Point[], windowSize: number): Point[] {\n   288  const smoothed: Point[] = [];\n   289  const half = Math.floor(windowSize / 2);\n   290\n   291  for (let i = 0; i < points.length; i++) {\n   292    let sumX = 0, sumY = 0, count = 0;\n   293\n   294    for (let j = -half; j <= half; j++) {\n   295      const idx = i + j;\n   296      if (idx >= 0 && idx < points.length) {\n   297        sumX += points[idx].x;\n   298        sumY += points[idx].y;\n   299        count++;\n   300      }\n   301    }\n   302\n   303    smoothed.push({ x: sumX / count, y: sumY / count });\n   304  }\n   305\n   306  return smoothed;\n   307}\n   308\n   309interface AnchorPoints {\n   310  vertex: Point;      // Top of head\n   311  forehead: Point;    // Forehead profile\n   312  glabella: Point;    // Between brows\n   313  nasion: Point;      // Nasal root\n   314  noseTip: Point;     // Pronasale\n   315  subnasale: Point;   // Base of nose\n   316  upperLip: Point;    // Labrale superius\n   317  lowerLip: Point;    // Labrale inferius\n   318  chin: Point;        // Pogonion\n   319  menton: Point;      // Bottom of chin\n   320  neckPoint: Point;   // Neck\n   321  jawAngle: Point;    // Gonion\n   322}\n   323\n   324/**\n   325 * Find anchor points along the profile contour\n   326 */\n   327function findAnchorPoints(\n   328  contour: ProfileContour\n   329): AnchorPoints {\n   330  const points = contour.points;\n   331\n   332  // Helper to find point at approximate Y position\n   333  const findPointAtY = (targetY: number): Point => {\n   334    let closest = points[0];\n   335    let minDist = Math.abs(points[0].y - targetY);\n   336\n   337    for (const p of points) {\n   338      const dist = Math.abs(p.y - targetY);\n   339      if (dist < minDist) {\n   340        minDist = dist;\n   341        closest = p;\n   342      }\n   343    }\n   344    return closest;\n   345  };\n   346\n   347  // Helper to find the most protruding point in a Y range\n   348  const findProtrudingPoint = (yStart: number, yEnd: number, direction: 'left' | 'right'): Point => {\n   349    let best = points[0];\n   350\n   351    for (const p of points) {\n   352      if (p.y >= yStart && p.y <= yEnd) {\n   353        if (direction === 'left' && p.x < best.x) best = p;\n   354        if (direction === 'right' && p.x > best.x) best = p;\n   355      }\n   356    }\n   357    return best;\n   358  };\n   359\n   360  // Find key inflection points based on profile geometry\n   361  const isLeftFacing = contour.orientation === 'left';\n   362  const protrusion = isLeftFacing ? 'left' : 'right';\n   363\n   364  // Divide face into regions based on typical proportions\n   365  const vertex = findPointAtY(0.05);\n   366  const forehead = findPointAtY(0.15);\n   367  const glabella = findPointAtY(0.28);\n   368  const nasion = findPointAtY(0.32);\n   369\n   370  // Nose tip is usually the most protruding point between y=0.35 and y=0.55\n   371  const noseTip = findProtrudingPoint(0.35, 0.55, protrusion);\n   372\n   373  const subnasale = findPointAtY(0.58);\n   374  const upperLip = findPointAtY(0.62);\n   375  const lowerLip = findPointAtY(0.68);\n   376\n   377  // Chin (pogonion) is often protruding\n   378  const chin = findProtrudingPoint(0.75, 0.85, protrusion);\n   379\n   380  const menton = findPointAtY(0.88);\n   381  const neckPoint = findPointAtY(0.95);\n   382\n   383  // Jaw angle - find where contour curves from vertical to horizontal\n   384  // This is typically around y=0.7-0.8, and set back from the chin\n   385  const jawAngle = findPointAtY(0.75);\n   386\n   387  return {\n   388    vertex,\n   389    forehead,\n   390    glabella,\n   391    nasion,\n   392    noseTip,\n   393    subnasale,\n   394    upperLip,\n   395    lowerLip,\n   396    chin,\n   397    menton,\n   398    neckPoint,\n   399    jawAngle,\n   400  };\n   401}\n   402\n   403/**\n   404 * Map anchor points to our 28 side profile landmarks\n   405 */\n   406function mapToLandmarks(\n   407  anchors: AnchorPoints,\n   408  contour: ProfileContour\n   409): Array<{ id: string; x: number; y: number }> {\n   410  const isLeft = contour.orientation === 'left';\n   411\n   412  // Helper to interpolate between two points\n   413  const lerp = (p1: Point, p2: Point, t: number): Point => ({\n   414    x: p1.x + (p2.x - p1.x) * t,\n   415    y: p1.y + (p2.y - p1.y) * t,\n   416  });\n   417\n   418  // Helper to offset a point horizontally (for ear/back of head estimation)\n   419  const offsetX = (p: Point, offset: number): Point => ({\n   420    x: p.x + (isLeft ? offset : -offset),\n   421    y: p.y,\n   422  });\n   423\n   424  // Map each of our 28 landmarks\n   425  // Standard cephalometric order: vertex, occiput, pronasale, neckPoint, porion, orbitale,\n   426  // tragus, intertragicNotch, cornealApex, cheekbone, trichion, glabella, nasion,\n   427  // rhinion, supratip, infratip, columella, subnasale, subalare, labraleSuperius,\n   428  // cheilion, labraleInferius, sublabiale, pogonion, menton, cervicalPoint, gonionTop, gonionBottom\n   429\n   430  const landmarkPositions: Record<string, Point> = {\n   431    // 1. vertex - top of head\n   432    vertex: anchors.vertex,\n   433\n   434    // 2. occiput - back of head (estimate based on vertex, offset back)\n   435    occiput: offsetX(anchors.vertex, 0.15),\n   436\n   437    // 3. pronasale - nose tip\n   438    pronasale: anchors.noseTip,\n   439\n   440    // 4. neckPoint - lower neck\n   441    neckPoint: anchors.neckPoint,\n   442\n   443    // 5. porion - ear canal (estimate based on jaw angle, offset back)\n   444    porion: offsetX({ x: anchors.jawAngle.x, y: anchors.nasion.y }, 0.08),\n   445\n   446    // 6. orbitale - lowest orbital rim (between glabella and nasion level)\n   447    orbitale: { x: lerp(anchors.glabella, anchors.nasion, 0.5).x, y: anchors.nasion.y - 0.02 },\n   448\n   449    // 7. tragus - ear cartilage\n   450    tragus: offsetX({ x: anchors.jawAngle.x, y: lerp(anchors.nasion, anchors.jawAngle, 0.3).y }, 0.06),\n   451\n   452    // 8. intertragicNotch - notch in ear\n   453    intertragicNotch: offsetX({ x: anchors.jawAngle.x, y: lerp(anchors.nasion, anchors.jawAngle, 0.5).y }, 0.07),\n   454\n   455    // 9. cornealApex - forward point of cornea\n   456    cornealApex: { x: anchors.glabella.x + (isLeft ? -0.02 : 0.02), y: anchors.glabella.y + 0.02 },\n   457\n   458    // 10. cheekbone - zygomatic prominence\n   459    cheekbone: lerp(anchors.nasion, anchors.jawAngle, 0.4),\n   460\n   461    // 11. trichion - hairline\n   462    trichion: anchors.forehead,\n   463\n   464    // 12. glabella - between brows\n   465    glabella: anchors.glabella,\n   466\n   467    // 13. nasion - nasal root\n   468    nasion: anchors.nasion,\n   469\n   470    // 14. rhinion - mid-dorsum of nose\n   471    rhinion: lerp(anchors.nasion, anchors.noseTip, 0.4),\n   472\n   473    // 15. supratip - above nose tip\n   474    supratip: lerp(anchors.nasion, anchors.noseTip, 0.75),\n   475\n   476    // 16. infratip - below nose tip\n   477    infratip: lerp(anchors.noseTip, anchors.subnasale, 0.3),\n   478\n   479    // 17. columella - nasal septum\n   480    columella: lerp(anchors.noseTip, anchors.subnasale, 0.5),\n   481\n   482    // 18. subnasale - base of nose\n   483    subnasale: anchors.subnasale,\n   484\n   485    // 19. subalare - nostril wing\n   486    subalare: { x: anchors.subnasale.x + (isLeft ? -0.02 : 0.02), y: anchors.subnasale.y - 0.01 },\n   487\n   488    // 20. labraleSuperius - upper lip\n   489    labraleSuperius: anchors.upperLip,\n   490\n   491    // 21. cheilion - mouth corner\n   492    cheilion: { x: lerp(anchors.upperLip, anchors.jawAngle, 0.3).x, y: lerp(anchors.upperLip, anchors.lowerLip, 0.5).y },\n   493\n   494    // 22. labraleInferius - lower lip\n   495    labraleInferius: anchors.lowerLip,\n   496\n   497    // 23. sublabiale - below lower lip\n   498    sublabiale: lerp(anchors.lowerLip, anchors.chin, 0.3),\n   499\n   500    // 24. pogonion - chin prominence\n   501    pogonion: anchors.chin,\n   502\n   503    // 25. menton - bottom of chin\n   504    menton: anchors.menton,\n   505\n   506    // 26. cervicalPoint - high neck point\n   507    cervicalPoint: lerp(anchors.menton, anchors.neckPoint, 0.5),\n   508\n   509    // 27. gonionTop - upper jaw angle\n   510    gonionTop: { x: anchors.jawAngle.x, y: anchors.jawAngle.y - 0.03 },\n   511\n   512    // 28. gonionBottom - lower jaw angle\n   513    gonionBottom: anchors.jawAngle,\n   514  };\n   515\n   516  // Convert to array matching SIDE_PROFILE_LANDMARKS order\n   517  return SIDE_PROFILE_LANDMARKS.map(lm => {\n   518    const pos = landmarkPositions[lm.id] || { x: 0.5, y: 0.5 };\n   519    return {\n   520      id: lm.id,\n   521      x: Math.max(0, Math.min(1, pos.x)),\n   522      y: Math.max(0, Math.min(1, pos.y)),\n   523    };\n   524  });\n   525}\n   526\n   527/**\n   528 * Debug: Draw the detected contour on a canvas\n   529 */\n   530export function debugDrawContour(\n   531  canvas: HTMLCanvasElement,\n   532  contour: Point[],\n   533  landmarks: Array<{ id: string; x: number; y: number }>\n   534): void {\n   535  const ctx = canvas.getContext('2d');\n   536  if (!ctx) return;\n   537\n   538  const width = canvas.width;\n   539  const height = canvas.height;\n   540\n   541  // Draw contour\n   542  ctx.strokeStyle = '#00ff00';\n   543  ctx.lineWidth = 2;\n   544  ctx.beginPath();\n   545  contour.forEach((p, i) => {\n   546    const x = p.x * width;\n   547    const y = p.y * height;\n   548    if (i === 0) ctx.moveTo(x, y);\n   549    else ctx.lineTo(x, y);\n   550  });\n   551  ctx.stroke();\n   552\n   553  // Draw landmarks\n   554  landmarks.forEach(lm => {\n   555    ctx.fillStyle = '#ff0000';\n   556    ctx.beginPath();\n   557    ctx.arc(lm.x * width, lm.y * height, 4, 0, Math.PI * 2);\n   558    ctx.fill();\n   559\n   560    ctx.fillStyle = '#ffffff';\n   561    ctx.font = '10px sans-serif';\n   562    ctx.fillText(lm.id, lm.x * width + 6, lm.y * height);\n   563  });\n   564}\n   565\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"c58877da-e395-4617-bbe9-468e0ea0a0df","timestamp":"2025-12-26T17:09:13.053Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/sideProfileDetection.ts","content":"/**\n * Side Profile Detection using Image Processing\n *\n * Since MediaPipe doesn't work well with side profiles, this module uses\n * edge detection and contour analysis to find the profile silhouette\n * and estimate landmark positions.\n *\n * Performance optimizations:\n * - Image downsampling before edge detection (reduces computation 4-9x)\n */\n\nimport { SIDE_PROFILE_LANDMARKS } from './landmarks';\n\n// Maximum dimension for edge detection processing\nconst MAX_PROCESSING_SIZE = 480;\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\ninterface ProfileContour {\n  points: Point[];\n  boundingBox: { x: number; y: number; width: number; height: number };\n  orientation: 'left' | 'right'; // Which direction the face is pointing\n}\n\ninterface SideProfileResult {\n  landmarks: Array<{ id: string; x: number; y: number }>;\n  confidence: number;\n  contour: Point[];\n  orientation: 'left' | 'right';\n}\n\n/**\n * Detect side profile landmarks from an image\n */\nexport async function detectSideProfile(\n  imageUrl: string\n): Promise<SideProfileResult | null> {\n  try {\n    const img = await loadImage(imageUrl);\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return null;\n\n    // Downsample large images for faster edge detection\n    const { width, height } = downsampleDimensions(img.width, img.height, MAX_PROCESSING_SIZE);\n    canvas.width = width;\n    canvas.height = height;\n    ctx.imageSmoothingEnabled = true;\n    ctx.imageSmoothingQuality = 'high';\n    ctx.drawImage(img, 0, 0, width, height);\n\n    // Get image data (landmarks use normalized 0-1 coordinates, so no rescaling needed)\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    // Step 1: Convert to grayscale\n    const grayscale = toGrayscale(imageData);\n\n    // Step 2: Apply Gaussian blur to reduce noise\n    const blurred = gaussianBlur(grayscale, canvas.width, canvas.height);\n\n    // Step 3: Edge detection (Sobel operator)\n    const edges = sobelEdgeDetection(blurred, canvas.width, canvas.height);\n\n    // Step 4: Find the profile contour\n    const contour = extractProfileContour(edges, canvas.width, canvas.height);\n\n    if (!contour || contour.points.length < 10) {\n      console.log('[SideProfile] Could not extract sufficient contour points');\n      return null;\n    }\n\n    // Step 5: Analyze contour to find key anchor points\n    const anchors = findAnchorPoints(contour);\n\n    // Step 6: Map anchors to our 28 landmarks\n    const landmarks = mapToLandmarks(anchors, contour);\n\n    return {\n      landmarks,\n      confidence: 0.7, // Lower confidence than MediaPipe frontal\n      contour: contour.points,\n      orientation: contour.orientation,\n    };\n  } catch (error) {\n    console.error('[SideProfile] Detection error:', error);\n    return null;\n  }\n}\n\n/**\n * Load an image from URL\n */\nfunction loadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n\n/**\n * Calculate downsampled dimensions while maintaining aspect ratio\n */\nfunction downsampleDimensions(\n  width: number,\n  height: number,\n  maxSize: number\n): { width: number; height: number } {\n  const maxDim = Math.max(width, height);\n  if (maxDim <= maxSize) {\n    return { width, height };\n  }\n\n  const scale = maxSize / maxDim;\n  return {\n    width: Math.round(width * scale),\n    height: Math.round(height * scale),\n  };\n}\n\n/**\n * Convert image data to grayscale array\n */\nfunction toGrayscale(imageData: ImageData): Uint8Array {\n  const data = imageData.data;\n  const gray = new Uint8Array(data.length / 4);\n\n  for (let i = 0; i < gray.length; i++) {\n    const idx = i * 4;\n    // Luminosity method for grayscale\n    gray[i] = Math.round(0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2]);\n  }\n\n  return gray;\n}\n\n/**\n * Apply 3x3 Gaussian blur\n */\nfunction gaussianBlur(gray: Uint8Array, width: number, height: number): Uint8Array {\n  const kernel = [\n    1/16, 2/16, 1/16,\n    2/16, 4/16, 2/16,\n    1/16, 2/16, 1/16\n  ];\n\n  const result = new Uint8Array(gray.length);\n\n  for (let y = 1; y < height - 1; y++) {\n    for (let x = 1; x < width - 1; x++) {\n      let sum = 0;\n      let k = 0;\n      for (let ky = -1; ky <= 1; ky++) {\n        for (let kx = -1; kx <= 1; kx++) {\n          sum += gray[(y + ky) * width + (x + kx)] * kernel[k++];\n        }\n      }\n      result[y * width + x] = sum;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Sobel edge detection\n */\nfunction sobelEdgeDetection(gray: Uint8Array, width: number, height: number): Uint8Array {\n  const sobelX = [-1, 0, 1, -2, 0, 2, -1, 0, 1];\n  const sobelY = [-1, -2, -1, 0, 0, 0, 1, 2, 1];\n\n  const edges = new Uint8Array(gray.length);\n\n  for (let y = 1; y < height - 1; y++) {\n    for (let x = 1; x < width - 1; x++) {\n      let gx = 0, gy = 0;\n      let k = 0;\n\n      for (let ky = -1; ky <= 1; ky++) {\n        for (let kx = -1; kx <= 1; kx++) {\n          const pixel = gray[(y + ky) * width + (x + kx)];\n          gx += pixel * sobelX[k];\n          gy += pixel * sobelY[k];\n          k++;\n        }\n      }\n\n      // Magnitude\n      edges[y * width + x] = Math.min(255, Math.sqrt(gx * gx + gy * gy));\n    }\n  }\n\n  return edges;\n}\n\n/**\n * Extract the profile contour from edge image\n * Looks for the strongest vertical edge on each side\n */\nfunction extractProfileContour(\n  edges: Uint8Array,\n  width: number,\n  height: number\n): ProfileContour | null {\n  // Determine if face is on left or right side of image\n  let leftEdgeSum = 0;\n  let rightEdgeSum = 0;\n\n  const midX = width / 2;\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const val = edges[y * width + x];\n      if (x < midX) {\n        leftEdgeSum += val;\n      } else {\n        rightEdgeSum += val;\n      }\n    }\n  }\n\n  // Face is likely on the side with more edge activity\n  const faceOnLeft = leftEdgeSum > rightEdgeSum;\n  const orientation: 'left' | 'right' = faceOnLeft ? 'left' : 'right'; // profile edge direction\n\n  // Find the profile edge - scan from the face side inward\n  const contourPoints: Point[] = [];\n  const threshold = 30; // Edge threshold\n\n  // Scan each row to find the profile edge\n  for (let y = Math.floor(height * 0.1); y < Math.floor(height * 0.95); y++) {\n    let edgeX = -1;\n    let maxEdge = threshold;\n\n    if (faceOnLeft) {\n      // Scan from left, find rightmost strong edge in left half\n      for (let x = 0; x < midX; x++) {\n        if (edges[y * width + x] > maxEdge) {\n          maxEdge = edges[y * width + x];\n          edgeX = x;\n        }\n      }\n    } else {\n      // Scan from right, find leftmost strong edge in right half\n      for (let x = width - 1; x >= midX; x--) {\n        if (edges[y * width + x] > maxEdge) {\n          maxEdge = edges[y * width + x];\n          edgeX = x;\n        }\n      }\n    }\n\n    if (edgeX !== -1) {\n      contourPoints.push({ x: edgeX / width, y: y / height });\n    }\n  }\n\n  if (contourPoints.length < 10) return null;\n\n  // Smooth the contour using moving average\n  const smoothedPoints = smoothContour(contourPoints, 5);\n\n  // Calculate bounding box\n  let minX = 1, minY = 1, maxX = 0, maxY = 0;\n  smoothedPoints.forEach(p => {\n    minX = Math.min(minX, p.x);\n    minY = Math.min(minY, p.y);\n    maxX = Math.max(maxX, p.x);\n    maxY = Math.max(maxY, p.y);\n  });\n\n  return {\n    points: smoothedPoints,\n    boundingBox: { x: minX, y: minY, width: maxX - minX, height: maxY - minY },\n    orientation,\n  };\n}\n\n/**\n * Smooth contour points using moving average\n */\nfunction smoothContour(points: Point[], windowSize: number): Point[] {\n  const smoothed: Point[] = [];\n  const half = Math.floor(windowSize / 2);\n\n  for (let i = 0; i < points.length; i++) {\n    let sumX = 0, sumY = 0, count = 0;\n\n    for (let j = -half; j <= half; j++) {\n      const idx = i + j;\n      if (idx >= 0 && idx < points.length) {\n        sumX += points[idx].x;\n        sumY += points[idx].y;\n        count++;\n      }\n    }\n\n    smoothed.push({ x: sumX / count, y: sumY / count });\n  }\n\n  return smoothed;\n}\n\ninterface AnchorPoints {\n  vertex: Point;      // Top of head\n  forehead: Point;    // Forehead profile\n  glabella: Point;    // Between brows\n  nasion: Point;      // Nasal root\n  noseTip: Point;     // Pronasale\n  subnasale: Point;   // Base of nose\n  upperLip: Point;    // Labrale superius\n  lowerLip: Point;    // Labrale inferius\n  chin: Point;        // Pogonion\n  menton: Point;      // Bottom of chin\n  neckPoint: Point;   // Neck\n  jawAngle: Point;    // Gonion\n}\n\n/**\n * Find anchor points along the profile contour\n */\nfunction findAnchorPoints(\n  contour: ProfileContour\n): AnchorPoints {\n  const points = contour.points;\n\n  // Helper to find point at approximate Y position\n  const findPointAtY = (targetY: number): Point => {\n    let closest = points[0];\n    let minDist = Math.abs(points[0].y - targetY);\n\n    for (const p of points) {\n      const dist = Math.abs(p.y - targetY);\n      if (dist < minDist) {\n        minDist = dist;\n        closest = p;\n      }\n    }\n    return closest;\n  };\n\n  // Helper to find the most protruding point in a Y range\n  const findProtrudingPoint = (yStart: number, yEnd: number, direction: 'left' | 'right'): Point => {\n    let best = points[0];\n\n    for (const p of points) {\n      if (p.y >= yStart && p.y <= yEnd) {\n        if (direction === 'left' && p.x < best.x) best = p;\n        if (direction === 'right' && p.x > best.x) best = p;\n      }\n    }\n    return best;\n  };\n\n  // Find key inflection points based on profile geometry\n  const isLeftFacing = contour.orientation === 'left';\n  const protrusion = isLeftFacing ? 'left' : 'right';\n\n  // Divide face into regions based on typical proportions\n  const vertex = findPointAtY(0.05);\n  const forehead = findPointAtY(0.15);\n  const glabella = findPointAtY(0.28);\n  const nasion = findPointAtY(0.32);\n\n  // Nose tip is usually the most protruding point between y=0.35 and y=0.55\n  const noseTip = findProtrudingPoint(0.35, 0.55, protrusion);\n\n  const subnasale = findPointAtY(0.58);\n  const upperLip = findPointAtY(0.62);\n  const lowerLip = findPointAtY(0.68);\n\n  // Chin (pogonion) is often protruding\n  const chin = findProtrudingPoint(0.75, 0.85, protrusion);\n\n  const menton = findPointAtY(0.88);\n  const neckPoint = findPointAtY(0.95);\n\n  // Jaw angle - find where contour curves from vertical to horizontal\n  // This is typically around y=0.7-0.8, and set back from the chin\n  const jawAngle = findPointAtY(0.75);\n\n  return {\n    vertex,\n    forehead,\n    glabella,\n    nasion,\n    noseTip,\n    subnasale,\n    upperLip,\n    lowerLip,\n    chin,\n    menton,\n    neckPoint,\n    jawAngle,\n  };\n}\n\n/**\n * Map anchor points to our 28 side profile landmarks\n */\nfunction mapToLandmarks(\n  anchors: AnchorPoints,\n  contour: ProfileContour\n): Array<{ id: string; x: number; y: number }> {\n  const isLeft = contour.orientation === 'left';\n\n  // Helper to interpolate between two points\n  const lerp = (p1: Point, p2: Point, t: number): Point => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t,\n  });\n\n  // Helper to offset a point horizontally (for ear/back of head estimation)\n  const offsetX = (p: Point, offset: number): Point => ({\n    x: p.x + (isLeft ? offset : -offset),\n    y: p.y,\n  });\n\n  // Map each of our 28 landmarks\n  // Standard cephalometric order: vertex, occiput, pronasale, neckPoint, porion, orbitale,\n  // tragus, intertragicNotch, cornealApex, cheekbone, trichion, glabella, nasion,\n  // rhinion, supratip, infratip, columella, subnasale, subalare, labraleSuperius,\n  // cheilion, labraleInferius, sublabiale, pogonion, menton, cervicalPoint, gonionTop, gonionBottom\n\n  const landmarkPositions: Record<string, Point> = {\n    // 1. vertex - top of head\n    vertex: anchors.vertex,\n\n    // 2. occiput - back of head (estimate based on vertex, offset back)\n    occiput: offsetX(anchors.vertex, 0.15),\n\n    // 3. pronasale - nose tip\n    pronasale: anchors.noseTip,\n\n    // 4. neckPoint - lower neck\n    neckPoint: anchors.neckPoint,\n\n    // 5. porion - ear canal (estimate based on jaw angle, offset back)\n    porion: offsetX({ x: anchors.jawAngle.x, y: anchors.nasion.y }, 0.08),\n\n    // 6. orbitale - lowest orbital rim (between glabella and nasion level)\n    orbitale: { x: lerp(anchors.glabella, anchors.nasion, 0.5).x, y: anchors.nasion.y - 0.02 },\n\n    // 7. tragus - ear cartilage\n    tragus: offsetX({ x: anchors.jawAngle.x, y: lerp(anchors.nasion, anchors.jawAngle, 0.3).y }, 0.06),\n\n    // 8. intertragicNotch - notch in ear\n    intertragicNotch: offsetX({ x: anchors.jawAngle.x, y: lerp(anchors.nasion, anchors.jawAngle, 0.5).y }, 0.07),\n\n    // 9. cornealApex - forward point of cornea\n    cornealApex: { x: anchors.glabella.x + (isLeft ? -0.02 : 0.02), y: anchors.glabella.y + 0.02 },\n\n    // 10. cheekbone - zygomatic prominence\n    cheekbone: lerp(anchors.nasion, anchors.jawAngle, 0.4),\n\n    // 11. trichion - hairline\n    trichion: anchors.forehead,\n\n    // 12. glabella - between brows\n    glabella: anchors.glabella,\n\n    // 13. nasion - nasal root\n    nasion: anchors.nasion,\n\n    // 14. rhinion - mid-dorsum of nose\n    rhinion: lerp(anchors.nasion, anchors.noseTip, 0.4),\n\n    // 15. supratip - above nose tip\n    supratip: lerp(anchors.nasion, anchors.noseTip, 0.75),\n\n    // 16. infratip - below nose tip\n    infratip: lerp(anchors.noseTip, anchors.subnasale, 0.3),\n\n    // 17. columella - nasal septum\n    columella: lerp(anchors.noseTip, anchors.subnasale, 0.5),\n\n    // 18. subnasale - base of nose\n    subnasale: anchors.subnasale,\n\n    // 19. subalare - nostril wing\n    subalare: { x: anchors.subnasale.x + (isLeft ? -0.02 : 0.02), y: anchors.subnasale.y - 0.01 },\n\n    // 20. labraleSuperius - upper lip\n    labraleSuperius: anchors.upperLip,\n\n    // 21. cheilion - mouth corner\n    cheilion: { x: lerp(anchors.upperLip, anchors.jawAngle, 0.3).x, y: lerp(anchors.upperLip, anchors.lowerLip, 0.5).y },\n\n    // 22. labraleInferius - lower lip\n    labraleInferius: anchors.lowerLip,\n\n    // 23. sublabiale - below lower lip\n    sublabiale: lerp(anchors.lowerLip, anchors.chin, 0.3),\n\n    // 24. pogonion - chin prominence\n    pogonion: anchors.chin,\n\n    // 25. menton - bottom of chin\n    menton: anchors.menton,\n\n    // 26. cervicalPoint - high neck point\n    cervicalPoint: lerp(anchors.menton, anchors.neckPoint, 0.5),\n\n    // 27. gonionTop - upper jaw angle\n    gonionTop: { x: anchors.jawAngle.x, y: anchors.jawAngle.y - 0.03 },\n\n    // 28. gonionBottom - lower jaw angle\n    gonionBottom: anchors.jawAngle,\n  };\n\n  // Convert to array matching SIDE_PROFILE_LANDMARKS order\n  return SIDE_PROFILE_LANDMARKS.map(lm => {\n    const pos = landmarkPositions[lm.id] || { x: 0.5, y: 0.5 };\n    return {\n      id: lm.id,\n      x: Math.max(0, Math.min(1, pos.x)),\n      y: Math.max(0, Math.min(1, pos.y)),\n    };\n  });\n}\n\n/**\n * Debug: Draw the detected contour on a canvas\n */\nexport function debugDrawContour(\n  canvas: HTMLCanvasElement,\n  contour: Point[],\n  landmarks: Array<{ id: string; x: number; y: number }>\n): void {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n\n  const width = canvas.width;\n  const height = canvas.height;\n\n  // Draw contour\n  ctx.strokeStyle = '#00ff00';\n  ctx.lineWidth = 2;\n  ctx.beginPath();\n  contour.forEach((p, i) => {\n    const x = p.x * width;\n    const y = p.y * height;\n    if (i === 0) ctx.moveTo(x, y);\n    else ctx.lineTo(x, y);\n  });\n  ctx.stroke();\n\n  // Draw landmarks\n  landmarks.forEach(lm => {\n    ctx.fillStyle = '#ff0000';\n    ctx.beginPath();\n    ctx.arc(lm.x * width, lm.y * height, 4, 0, Math.PI * 2);\n    ctx.fill();\n\n    ctx.fillStyle = '#ffffff';\n    ctx.font = '10px sans-serif';\n    ctx.fillText(lm.id, lm.x * width + 6, lm.y * height);\n  });\n}\n","numLines":565,"startLine":1,"totalLines":565}}}
{"parentUuid":"c58877da-e395-4617-bbe9-468e0ea0a0df","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01FxbKpBDE4jtfCGFP9NGDLk","type":"tool_result","content":"     1(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push([\"object\"==typeof document?document.currentScript:void 0,664659,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-down\",[[\"path\",{d:\"m6 9 6 6 6-6\",key:\"qrunsl\"}]]);e.s([\"ChevronDown\",()=>t],664659)},655900,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-up\",[[\"path\",{d:\"m18 15-6-6-6 6\",key:\"153udz\"}]]);e.s([\"ChevronUp\",()=>t],655900)},952571,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"info\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"path\",{d:\"M12 16v-4\",key:\"1dtifu\"}],[\"path\",{d:\"M12 8h.01\",key:\"e9boi3\"}]]);e.s([\"Info\",()=>t],952571)},910510,e=>{\"use strict\";var t=e.i(271645);function i(e,a=!0){let o=(0,t.useRef)(!1),r=(0,t.useRef)([]);(0,t.useEffect)(()=>{if(!a||o.current||0===e.length)return;o.current=!0;let t=()=>{let t=Array.from(new Set([...e.map(e=>e.referenceImage).filter(e=>e&&e.length>0),...e.map(e=>`/images/landmarks/infographic/${e.key}.webp`).filter(e=>e&&e.length>0)]));t.forEach(e=>{let t=document.createElement(\"link\");t.rel=\"preload\",t.as=\"image\",t.href=e,t.fetchPriority=\"high\",document.head.appendChild(t),r.current.push(t)}),Promise.all(t.map(e=>new Promise(t=>{if(!e)return void t();let i=new Image;\"fetchPriority\"in i&&(i.fetchPriority=\"high\"),i.onload=()=>t(),i.onerror=()=>t(),i.src=e})))};return\"complete\"===document.readyState?setTimeout(t,0):window.addEventListener(\"load\",t,{once:!0}),()=>{r.current.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),r.current=[]}},[e,a])}e.s([\"usePreloadLandmarkImages\",()=>i])},320910,e=>{\"use strict\";let t=null,i=null,a=null,o=null,r=!1,n=[\"Created TensorFlow Lite XNNPACK delegate for CPU\",\"INFO: Created TensorFlow Lite XNNPACK delegate\",\"TensorFlow Lite\",\"XNNPACK\",\"INFO:\"];function l(e){return(...t)=>{let i;i=Array.isArray(t)?t.join(\" \"):String(t),n.some(e=>i.includes(e))||e.apply(console,t)}}let s=e=>{let t=null,i=-1;for(let a of e){let e=1e9,o=1e9,r=-1e9,n=-1e9;for(let t of a)e=Math.min(e,t.x),o=Math.min(o,t.y),r=Math.max(r,t.x),n=Math.max(n,t.y);let l=(r-e)*(n-o);l>i&&(i=l,t=a)}return t},h=null,d=null,c=async()=>h||d||(d=(async()=>{try{let n;r||(t=console.error,i=console.info,a=console.log,o=console.warn,console.error=l(t),console.info=l(i),console.log=l(a),console.warn=l(o),r=!0);let{FaceLandmarker:s,FilesetResolver:d}=await e.A(826368);for(let e of[\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\",\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm/\"])try{let t=await d.forVisionTasks(e),i=await s.createFromOptions(t,{baseOptions:{modelAssetPath:\"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task\",delegate:\"CPU\"},runningMode:\"IMAGE\",numFaces:3,outputFaceBlendshapes:!1,outputFacialTransformationMatrixes:!1});return h=i,console.log(\"MediaPipe Face Landmarker initialized successfully\"),i}catch(t){n=t,console.error(\"MediaPipe init failed for\",e,t)}throw n||Error(\"MediaPipe initialization failed\")}catch(e){throw console.error(\"Failed to initialize MediaPipe:\",e),d=null,e}})());async function f(e){try{let t,i,a,o=await c();if(e instanceof HTMLImageElement)(t=document.createElement(\"canvas\")).width=e.naturalWidth||e.width,t.height=e.naturalHeight||e.height,t.getContext(\"2d\").drawImage(e,0,0);else throw Error(\"Invalid image input. Must be an HTMLImageElement\");try{i=o.detect(t),a=i?.faceLandmarks||[]}catch(e){console.warn(\"MediaPipe detection had a minor issue, but continuing:\",e.message);try{await new Promise(e=>setTimeout(e,100)),i=o.detect(t),a=i?.faceLandmarks||[]}catch(e){console.warn(\"Face detection failed after retry:\",e.message),a=[]}}if(!a.length)throw Error(\"No face detected in the image\");let r=s(a);if(!r)throw Error(\"No face detected in the image\");return{standardizedImage:((e,t)=>{var i;let a,o,r,n,l=e.width,s=e.height,h=t.map(e=>({x:e.x*l,y:e.y*s})),d=h[33],c=h[263],f={x:(d.x+c.x)/2,y:(d.y+c.y)/2},p=Math.atan2(c.y-d.y,c.x-d.x),m=f.x,u=f.y,g=e=>{let t=Math.sin(-p),i=Math.cos(-p),a=e.x-m,o=e.y-u;return{x:m+a*i-o*t,y:u+a*t+o*i}},w=g(h[152]||f),y=g(h[10]||f),k=g(f),b=Math.max(8,w.y-y.y);if(!(b>0&&isFinite(b))){let e=h[152]||f;b=Math.hypot(e.x-f.x,e.y-f.y)/.55}let x=Math.min(Math.max(32,(b*=1.12)/.65),2*Math.max(l,s)),T=k.y-.5*x,F=(i=m-x/2,(a=document.createElement(\"canvas\")).width=e.width,a.height=e.height,(o=a.getContext(\"2d\")).fillStyle=\"white\",o.fillRect(0,0,a.width,a.height),o.save(),o.translate(m,u),o.rotate(-p),o.translate(-m,-u),o.drawImage(e,0,0),o.restore(),(r=document.createElement(\"canvas\")).width=Math.max(1,Math.round(x)),r.height=Math.max(1,Math.round(x)),(n=r.getContext(\"2d\")).fillStyle=\"white\",n.fillRect(0,0,r.width,r.height),n.drawImage(a,Math.round(i),Math.round(T),Math.round(x),Math.round(x),0,0,r.width,r.height),r),L=document.createElement(\"canvas\");L.width=1024,L.height=1024;let E=L.getContext(\"2d\");return E.imageSmoothingQuality=\"high\",E.fillStyle=\"white\",E.fillRect(0,0,1024,1024),E.drawImage(F,0,0,F.width,F.height,0,0,1024,1024),L})(t,r)}}catch(e){throw console.error(\"Face standardization failed:\",e),e}}let p={hairline:10,leftEyePupil:468,rightEyePupil:473,noseLeft:48,noseRight:278,lowerLip:17,chinBottom:152,leftEyeMedialCanthus:133,leftEyeLateralCanthus:33,leftEyeUpperEyelid:470,leftEyeLowerEyelid:472,leftEyelidHoodEnd:247,leftBrowHead:107,leftBrowInnerCorner:55,leftBrowArch:52,leftBrowPeak:105,leftBrowTail:70,leftUpperEyelidCrease:470,rightEyeMedialCanthus:362,rightEyeLateralCanthus:263,rightEyeUpperEyelid:475,rightEyeLowerEyelid:374,rightEyelidHoodEnd:467,rightBrowHead:336,rightBrowInnerCorner:285,rightBrowArch:282,rightBrowPeak:334,rightBrowTail:276,rightUpperEyelidCrease:475,nasalBase:290,noseBottom:2,leftNoseBridge:174,rightNoseBridge:399,cupidsBow:267,innerCupidsBow:0,mouthMiddle:14,mouthLeft:61,mouthRight:306,chinLeft:176,chinRight:400,leftCheek:234,rightCheek:454,leftTemple:54,rightTemple:284,leftOuterEar:127,rightOuterEar:356,leftTopGonion:58,leftBottomGonion:172,rightTopGonion:288,rightBottomGonion:397,neckLeft:172,neckRight:397},m={hairline:{yOffset:-.06},leftEyePupil:{xOffset:.0015,yOffset:-.005},rightEyePupil:{xOffset:-.0015,yOffset:-.005},noseLeft:{xOffset:.0025},noseRight:{xOffset:-.0025},leftTemple:{yOffset:-.01},rightTemple:{yOffset:-.01},leftOuterEar:{xOffset:-.04},rightOuterEar:{xOffset:.04},neckLeft:{xOffset:0,yOffset:.05},neckRight:{xOffset:0,yOffset:.05},leftUpperEyelidCrease:{yOffset:-.015},rightUpperEyelidCrease:{yOffset:-.015}};async function u(){try{await c()}catch(e){console.warn(\"MediaPipe preload failed:\",e)}}async function g(e,t,i){try{let a,o,r,n,l=await c(),h=document.createElement(\"canvas\");h.width=e.naturalWidth||e.width,h.height=e.naturalHeight||e.height,h.getContext(\"2d\").drawImage(e,0,0);let d=l.detect(h),f=d?.faceLandmarks||[];if(!f.length)return null;let u=s(f);if(!u)return null;let g=h.width,w=h.height,y=g/w;y>t/i?(a=t,o=t/y,r=0,n=(i-o)/2):(o=i,a=i*y,r=(t-a)/2,n=0);let k={};for(let[e,t]of Object.entries(p))if(u[t]){let i=u[t],l=i.x*a+r,s=i.y*o+n,h=m[e];h&&(h.xOffset&&(l+=a*h.xOffset),h.yOffset&&(s+=o*h.yOffset)),k[e]={x:l,y:s}}return k}catch(e){return console.error(\"Face landmark detection error:\",e),null}}e.s([\"detectFrontLandmarks\",()=>g,\"preloadMediaPipe\",()=>u,\"standardizeFaceImage\",()=>f],320910)},837647,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"undo-2\",[[\"path\",{d:\"M9 14 4 9l5-5\",key:\"102s5s\"}],[\"path\",{d:\"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11\",key:\"f3b9sd\"}]]);e.s([\"Undo2\",()=>t],837647)},373375,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-left\",[[\"path\",{d:\"m15 18-6-6 6-6\",key:\"1wnfg3\"}]]);e.s([\"ChevronLeft\",()=>t],373375)},463059,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-right\",[[\"path\",{d:\"m9 18 6-6-6-6\",key:\"mthhwq\"}]]);e.s([\"ChevronRight\",()=>t],463059)},767850,293060,e=>{\"use strict\";let t={hairline:{description:\"The hairline represents the junction between the scalp and forehead skin. Located at the highest point of the forehead where hair growth begins.\",name:\"Hairline\",scientificName:\"Trichion (frontal view)\",path:\"landmarksFront/hairline\",howToFind:\"Identify the highest point of the frontal hairline in the middle of the forehead.\"},leftTemple:{description:\"The left temporal region landmark, located at the side of the forehead above the eyebrow.\",name:\"Left Temple\",scientificName:\"Left Temporal Point\",path:\"landmarksFront/leftTemple\",howToFind:\"Mark the widest point of the hairline on the left side, halfway between the hairline and eyebrow.\"},rightTemple:{description:\"The right temporal region landmark, located at the side of the forehead above the eyebrow.\",name:\"Right Temple\",scientificName:\"Right Temporal Point\",path:\"landmarksFront/rightTemple\",howToFind:\"Mark the widest point of the hairline on the right side, halfway between the hairline and eyebrow.\"},leftOuterEar:{description:\"The outermost point of the left ear attachment to the head.\",name:\"Left Outer Ear\",scientificName:\"Left Auricular Lateral Point\",path:\"landmarksFront/leftOuterEar\",howToFind:\"Locate the most protruded point of the left ear on the side of the head.\"},rightOuterEar:{description:\"The outermost point of the right ear attachment to the head.\",name:\"Right Outer Ear\",scientificName:\"Right Auricular Lateral Point\",path:\"landmarksFront/rightOuterEar\",howToFind:\"Locate the most protruded point of the right ear on the side of the head.\"},leftBrowHead:{description:\"The starting point of the left eyebrow, closest to the nose.\",name:\"Left Brow Head\",scientificName:\"Left Supercilium Medialis\",path:\"landmarksFront/leftBrowHead\",howToFind:\"Locate the innermost and highest point of the left eyebrow, at the edge where brow hairs end.\"},leftBrowInnerCorner:{description:\"The inner corner point of the left eyebrow area.\",name:\"Left Brow Inner Corner\",scientificName:\"Left Supercilium Medial Corner\",path:\"landmarksFront/leftBrowInnerCorner\",howToFind:\"Locate the lowest point at the inner edge of the left eyebrow, where brow hairs end.\"},leftBrowArch:{description:\"The highest point of the left eyebrow arch.\",name:\"Left Brow Arch\",scientificName:\"Left Supercilium Superior\",path:\"landmarksFront/leftBrowArch\",howToFind:\"Find the highest point along the lower side of the left eyebrow, where the brow reaches its peak.\"},leftBrowPeak:{description:\"The peak point of the left eyebrow, often the most prominent part of the arch.\",name:\"Left Brow Peak\",scientificName:\"Left Supercilium Apex\",path:\"landmarksFront/leftBrowPeak\",howToFind:\"Identify the most elevated point along the top of the left eyebrow, which may be slightly to the right or left of the arch.\"},rightBrowHead:{description:\"The starting point of the right eyebrow, closest to the nose.\",name:\"Right Brow Head\",scientificName:\"Right Supercilium Medialis\",path:\"landmarksFront/rightBrowHead\",howToFind:\"Locate the innermost and highest point of the right eyebrow, at the edge where brow hairs end.\"},rightBrowInnerCorner:{description:\"The inner corner point of the right eyebrow area.\",name:\"Right Brow Inner Corner\",scientificName:\"Right Supercilium Medial Corner\",path:\"landmarksFront/rightBrowInnerCorner\",howToFind:\"Locate the lowest point at the inner edge of the right eyebrow, where brow hairs end.\"},rightBrowArch:{description:\"The highest point of the right eyebrow arch.\",name:\"Right Brow Arch\",scientificName:\"Right Supercilium Superior\",path:\"landmarksFront/rightBrowArch\",howToFind:\"Find the highest point along the lower side of the right eyebrow, where the brow reaches its peak.\"},rightBrowPeak:{description:\"The peak point of the right eyebrow, often the most prominent part of the arch.\",name:\"Right Brow Peak\",scientificName:\"Right Supercilium Apex\",path:\"landmarksFront/rightBrowPeak\",howToFind:\"Identify the most elevated point along the top of the right eyebrow, which may be slightly to the right or left of the arch.\"},leftBrowTail:{description:\"The outer endpoint of the left eyebrow, closest to the cheekbone.\",name:\"Left Brow Tail\",scientificName:\"Left Supercilium Lateralis\",path:\"landmarksFront/leftBrowTail\",howToFind:\"Locate the outermost point of the left eyebrow where the brow hairs taper off toward the temple.\"},rightBrowTail:{description:\"The outer endpoint of the right eyebrow, closest to the cheekbone.\",name:\"Right Brow Tail\",scientificName:\"Right Supercilium Lateralis\",path:\"landmarksFront/rightBrowTail\",howToFind:\"Locate the outermost point of the right eyebrow where the brow hairs taper off toward the temple.\"},leftEyeMedialCanthus:{description:\"The inner corner of the left eye where the upper and lower eyelids meet.\",name:\"Left Medial Canthus\",scientificName:\"Left Canthus Medialis\",path:\"landmarksFront/leftEyeMedialCanthus\",howToFind:\"Locate the inner corner of the left eye.\"},leftEyeLateralCanthus:{description:\"The outer corner of the left eye where the upper and lower eyelids meet.\",name:\"Left Lateral Canthus\",scientificName:\"Left Canthus Lateralis\",path:\"landmarksFront/leftEyeLateralCanthus\",howToFind:\"Locate the outer corner of the left eye where the eyelids meet.\"},leftEyePupil:{description:\"The center of the left eye's pupil.\",name:\"Left Pupil\",scientificName:\"Left Pupilla\",path:\"landmarksFront/leftEyePupil\",howToFind:\"Mark the center of the left eye's pupil.\"},leftEyeUpperEyelid:{description:\"The highest point of the left upper eyelid.\",name:\"Left Upper Eyelid\",scientificName:\"Left Palpebra Superior\",path:\"landmarksFront/leftEyeUpperEyelid\",howToFind:\"Identify the highest point of the left upper eyelid, above the iris.\"},leftEyeLowerEyelid:{description:\"The lowest point of the left lower eyelid.\",name:\"Left Lower Eyelid\",scientificName:\"Left Palpebra Inferior\",path:\"landmarksFront/leftEyeLowerEyelid\",howToFind:\"Identify the lowest point of the left lower eyelid, below the iris.\"},leftEyelidHoodEnd:{description:\"The lateral end of the left upper eyelid fold where hooding is assessed.\",name:\"Left Eyelid Hood End\",scientificName:\"Left Sulcus Palpebralis Lateralis\",path:\"landmarksFront/leftEyelidHoodEnd\",howToFind:\"Locate the outer end of the left upper eyelid fold, just outside the outer corner of the eye.\"},leftUpperEyelidCrease:{description:\"The crease line of the left upper eyelid where the eyelid folds when the eye is open.\",name:\"Left Upper Eyelid Crease\",scientificName:\"Left Pretarsal Skin Crease\",path:\"landmarksFront/leftUpperEyelidCrease\",howToFind:\"Locate the horizontal fold line on the left upper eyelid, visible when the eye is open, above the lash line. This may be directly in-line with the upper eyelid point if there is no visible upper eyelid exposure\"},rightEyeMedialCanthus:{description:\"The inner corner of the right eye where the upper and lower eyelids meet.\",name:\"Right Medial Canthus\",scientificName:\"Right Canthus Medialis\",path:\"landmarksFront/rightEyeMedialCanthus\",howToFind:\"Locate the inner corner of the right eye.\"},rightEyeLateralCanthus:{description:\"The outer corner of the right eye where the upper and lower eyelids meet.\",name:\"Right Lateral Canthus\",scientificName:\"Right Canthus Lateralis\",path:\"landmarksFront/rightEyeLateralCanthus\",howToFind:\"Locate the outer corner of the right eye where the eyelids meet.\"},rightEyePupil:{description:\"The center of the right eye's pupil.\",name:\"Right Pupil\",scientificName:\"Right Pupilla\",path:\"landmarksFront/rightEyePupil\",howToFind:\"Mark the center of the right eye's pupil.\"},rightEyeUpperEyelid:{description:\"The highest point of the right upper eyelid.\",name:\"Right Upper Eyelid\",scientificName:\"Right Palpebra Superior\",path:\"landmarksFront/rightEyeUpperEyelid\",howToFind:\"Identify the highest point of the right upper eyelid, above the iris.\"},rightEyeLowerEyelid:{description:\"The lowest point of the right lower eyelid.\",name:\"Right Lower Eyelid\",scientificName:\"Right Palpebra Inferior\",path:\"landmarksFront/rightEyeLowerEyelid\",howToFind:\"Identify the lowest point of the right lower eyelid, below the iris.\"},rightEyelidHoodEnd:{description:\"The lateral end of the right upper eyelid fold where hooding is assessed.\",name:\"Right Eyelid Hood End\",scientificName:\"Right Sulcus Palpebralis Lateralis\",path:\"landmarksFront/rightEyelidHoodEnd\",howToFind:\"Locate the outer end of the right upper eyelid fold, just outside the outer corner of the eye.\"},rightUpperEyelidCrease:{description:\"The crease line of the right upper eyelid where the eyelid folds when the eye is open.\",name:\"Right Upper Eyelid Crease\",scientificName:\"Right Pretarsal Skin Crease\",path:\"landmarksFront/rightUpperEyelidCrease\",howToFind:\"Locate the horizontal fold line on the right upper eyelid, visible when the eye is open, above the lash line. This may be directly in-line with the upper eyelid point if there is no visible upper eyelid exposure\"},noseLeft:{description:\"The left side of the nose at its widest point.\",name:\"Left Nose Side\",scientificName:\"Left Ala Nasi\",path:\"landmarksFront/noseLeft\",howToFind:\"Mark the leftmost point of the nose at the widest part of the nostrils.\"},noseRight:{description:\"The right side of the nose at its widest point.\",name:\"Right Nose Side\",scientificName:\"Right Ala Nasi\",path:\"landmarksFront/noseRight\",howToFind:\"Mark the rightmost point of the nose at the widest part of the nostrils.\"},leftNoseBridge:{description:\"The left edge of the nasal bridge.\",name:\"Left Nose Bridge\",scientificName:\"Left Dorsum Nasi\",path:\"landmarksFront/leftNoseBridge\",howToFind:\"Locate the left edge of the nose bridge, where it transitions from the nasal bone to the facial skin, typically around the middle of the nose.\"},rightNoseBridge:{description:\"The right edge of the nasal bridge.\",name:\"Right Nose Bridge\",scientificName:\"Right Dorsum Nasi\",path:\"landmarksFront/rightNoseBridge\",howToFind:\"Locate the right edge of the nose bridge, where it transitions from the nasal bone to the facial skin, typically around the middle of the nose.\"},nasalBase:{description:\"The base of the nose.\",name:\"Nasal Base\",scientificName:\"Nasal Base\",path:\"landmarksFront/nasalBase\",howToFind:\"Locate the base of the nose where the lower nostril ends, typically to the right of the nose tip.\"},noseBottom:{description:\"The bottom point of the nose between the nostrils.\",name:\"Nose Bottom\",scientificName:\"Subnasale\",path:\"landmarksFront/noseBottom\",howToFind:\"Locate the lowest point of the nose tip around the middle of the nose.\"},leftCheek:{description:\"The most prominent point of the left cheekbone.\",name:\"Left Cheekbone\",scientificName:\"Left Zygion\",path:\"landmarksFront/leftCheek\",howToFind:\"Locate the most laterally prominent point of the left cheekbone, typically the widest part of the midface.\"},rightCheek:{description:\"The most prominent point of the right cheekbone.\",name:\"Right Cheekbone\",scientificName:\"Right Zygion\",path:\"landmarksFront/rightCheek\",howToFind:\"Locate the most laterally prominent point of the right cheekbone, typically the widest part of the midface.\"},mouthLeft:{description:\"The left corner of the mouth where the lips meet.\",name:\"Left Mouth Corner\",scientificName:\"Left Cheilion\",path:\"landmarksFront/mouthLeft\",howToFind:\"Mark the leftmost corner of the mouth, where the lip border ends.\"},mouthRight:{description:\"The right corner of the mouth where the lips meet.\",name:\"Right Mouth Corner\",scientificName:\"Right Cheilion\",path:\"landmarksFront/mouthRight\",howToFind:\"Mark the rightmost corner of the mouth, where the lip border ends.\"},cupidsBow:{description:\"The center peak of the upper lip, forming the characteristic 'cupid's bow' shape.\",name:\"Cupid's Bow\",scientificName:\"Labrale Superius\",path:\"landmarksFront/cupidsBow\",howToFind:\"Locate the highest point of the upper lip, typically to the right or left of center.\"},innerCupidsBow:{description:\"The inner dip of the cupid's bow at the center of the upper lip vermilion border.\",name:\"Inner Cupid's Bow\",scientificName:\"Cupid's Bow\",path:\"landmarksFront/innerCupidsBow\",howToFind:\"Mark the central dip between the two peaks of the cupid's bow, at the vermilion border of the upper lip.\"},mouthMiddle:{description:\"The center point of the mouth.\",name:\"Mouth Middle\",scientificName:\"Mouth Middle\",path:\"landmarksFront/mouthMiddle\",howToFind:\"Locate the center point of the mouth, where the upper and lower lips meet.\"},lowerLip:{description:\"The center point of the lower lip at its fullest part.\",name:\"Lower Lip Center\",scientificName:\"Labrale Inferius\",path:\"landmarksFront/lowerLip\",howToFind:\"Mark the center of the lower lip at the most prominent or fullest part.\"},leftTopGonion:{description:\"The upper angle point of the left jaw.\",name:\"Left Upper Jaw Angle\",scientificName:\"Left Gonion Superior\",path:\"landmarksFront/leftTopGonion\",howToFind:\"Locate the upper part of the left jaw angle where it begins to curve, typically the most prominent point near mouth level.\"},rightTopGonion:{description:\"The upper angle point of the right jaw.\",name:\"Right Upper Jaw Angle\",scientificName:\"Right Gonion Superior\",path:\"landmarksFront/rightTopGonion\",howToFind:\"Locate the upper part of the right jaw angle where it begins to curve, typically the most prominent point near mouth level.\"},leftBottomGonion:{description:\"The lower angle point of the left jaw.\",name:\"Left Lower Jaw Angle\",scientificName:\"Left Gonion Inferior\",path:\"landmarksFront/leftBottomGonion\",howToFind:\"Locate the lower part of the left jaw angle below the upper angle, where the jaw curves toward the chin.\"},rightBottomGonion:{description:\"The lower angle point of the right jaw.\",name:\"Right Lower Jaw Angle\",scientificName:\"Right Gonion Inferior\",path:\"landmarksFront/rightBottomGonion\",howToFind:\"Locate the lower part of the right jaw angle below the upper angle, where the jaw curves toward the chin.\"},chinLeft:{description:\"The left side point of the chin.\",name:\"Left Chin\",scientificName:\"Left Mentum Lateralis\",path:\"landmarksFront/chinLeft\",howToFind:\"Mark the left side of the chin, where the chin begins to curve and form an angle.\"},chinRight:{description:\"The right side point of the chin.\",name:\"Right Chin\",scientificName:\"Right Mentum Lateralis\",path:\"landmarksFront/chinRight\",howToFind:\"Mark the right side of the chin, where the chin begins to curve and form an angle.\"},chinBottom:{description:\"The lowest point of the chin.\",name:\"Chin Bottom\",scientificName:\"Menton\",path:\"landmarksFront/chinBottom\",howToFind:\"Locate the lowest point of the chin between the left and right chin points.\"},neckLeft:{description:\"The left side of the neck at the jawline.\",name:\"Left Neck Point\",scientificName:\"Left Cervical Lateralis\",path:\"landmarksFront/neckLeft\",howToFind:\"Mark the widest point of the left side of the neck, typically right below the jawline.\"},neckRight:{description:\"The right side of the neck at the jawline.\",name:\"Right Neck Point\",scientificName:\"Right Cervical Lateralis\",path:\"landmarksFront/neckRight\",howToFind:\"Mark the widest point of the right side of the neck, typically right below the jawline.\"}},i={vertex:{description:\"Highest point on the head in profile.\",name:\"Top of Head\",scientificName:\"Vertex\",path:\"landmarksSide/vertex\",howToFind:\"Mark the highest point of the head's curve, typically around the middle of the upper head.\"},occiput:{description:\"Back-of-head prominence.\",name:\"Occiput\",scientificName:\"External Occipital Region\",path:\"landmarksSide/occiput\",howToFind:\"Mark the most prominent point on the back of the head's curve, typically above the ear.\"},pronasale:{description:\"Most forward point of the nose tip.\",name:\"Nose Tip\",scientificName:\"Pronasale\",path:\"landmarksSide/pronasale\",howToFind:\"Mark the farthest projecting point of the nose tip.\"},neckPoint:{description:\"Lower neck inflection on the front border.\",name:\"Neck Point\",scientificName:\"Anterior Cervical Landmark\",path:\"landmarksSide/neckPoint\",howToFind:\"Follow the neck contour down to the Adam's apple and mark a point above the collar region.\"},porion:{description:\"The upper margin of the ear canal opening, used for Frankfort horizontal plane.\",name:\"Porion\",scientificName:\"Porion (soft tissue)\",path:\"landmarksSide/porion\",howToFind:\"Mark the uppermost point of the ear canal opening, right above the tragus (the small flap in front of the ear canal).\"},orbitale:{description:\"Lowest point on the orbital rim.\",name:\"Orbitale\",scientificName:\"Orbitale\",path:\"landmarksSide/orbitale\",howToFind:\"Trace the undereye contour and mark the most prominent part of the orbital rim.\"},eyelidEnd:{description:\"The lateral end point of the visible eyelid in profile view.\",name:\"Eyelid End\",scientificName:\"Lateral Eyelid\",path:\"landmarksSide/eyelidEnd\",howToFind:\"From the side profile, mark the outermost visible point of the eyelid.\"},lowerEyelid:{description:\"The lower eyelid margin as seen from the side profile.\",name:\"Lower Eyelid\",scientificName:\"Left Palpebra Inferior\",path:\"landmarksSide/lowerEyelid\",howToFind:\"From the side profile, locate the lower edge of the lower eyelid, typically the most prominent point of the lower lid margin.\"},tragus:{description:\"Cartilage nub in front of the ear canal.\",name:\"Tragus\",scientificName:\"Tragion (soft tissue)\",path:\"landmarksSide/tragus\",howToFind:\"Mark the back part of the small flap in front of the ear canal.\"},intertragicNotch:{description:\"The notch between the tragus and antitragus cartilages, marking the deepest depression in the anterior ear margin.\",name:\"Intertragic Notch\",scientificName:\"Incisura Intertragica\",path:\"landmarksSide/intertragicNotch\",howToFind:\"Locate the small groove between the tragus (small flap in front of the ear canal) and the antitragus (small bump opposite to it). This is where the jawline construction begins.\"},gonionTop:{description:\"Upper angle point of the jaw from side profile.\",name:\"Upper Jaw Angle\",scientificName:\"Gonion Superior\",path:\"landmarksSide/gonionTop\",howToFind:\"Locate the upper part of the jaw angle where the ramus (back part of the jaw) forms an angle with the mandible (lower part of the jaw).\"},gonionBottom:{description:\"Lower angle point of the jaw from side profile.\",name:\"Lower Jaw Angle\",scientificName:\"Gonion Inferior\",path:\"landmarksSide/gonionBottom\",howToFind:\"Locate the lower part of the jaw angle that sits below the upper jaw angle, where the jaw begins to curve towards the chin.\"},menton:{description:\"Lowest point on the soft-tissue chin.\",name:\"Chin Bottom\",scientificName:\"Menton (soft tissue)\",path:\"landmarksSide/menton\",howToFind:\"Trace the chin contour downward and mark its lowest point. This should form an angle with the upper and lower jaw points, outlining the jawline shape.\"},trichion:{description:\"Forehead hairline point.\",name:\"Hairline (Profile)\",scientificName:\"Trichion\",path:\"landmarksSide/trichion\",howToFind:\"Mark the highest point of the hairline, where the forehead ends.\"},forehead:{description:\"The most prominent point of the forehead between the hairline and brow ridge, where the forehead may begin to curve towards the hairline.\",name:\"Forehead\",scientificName:\"Frontalis\",path:\"landmarksSide/forehead\",howToFind:\"From the side profile, locate the most forward-projecting point of the forehead, typically between the hairline and the brow ridge.\"},glabella:{description:\"Mid-forehead point between brows.\",name:\"Glabella\",scientificName:\"Glabella\",path:\"landmarksSide/glabella\",howToFind:\"Locate the most prominent point of the brow ridge between the eyebrows, above the indented part of the upper nose bridge.\"},nasion:{description:\"Nasal root depression.\",name:\"Nasal Bridge Root\",scientificName:\"Nasion\",path:\"landmarksSide/nasion\",howToFind:\"Mark the small dip between the brow ridge and nose bridge, typically around eye level.\"},rhinion:{description:\"Dorsal point of the nose.\",name:\"Rhinion\",scientificName:\"Rhinion\",path:\"landmarksSide/rhinion\",howToFind:\"Mark the dorsal point of the nose, typically the most prominent point of the nose bridge around the middle.\"},supratip:{description:\"Dorsal point just above the tip.\",name:\"Supratip\",scientificName:\"Supratip Break\",path:\"landmarksSide/supratip\",howToFind:\"Follow the bridge toward the tip and mark the highest point right before the nose tip.\"},infratip:{description:\"The point between the nose tip and columella on the nasal profile.\",name:\"Infratip\",scientificName:\"Infratip Lobule\",path:\"landmarksSide/infratip\",howToFind:\"Follow the nose contour down from the tip and mark the lowest point before the nostrils.\"},columella:{description:\"Inferior border of the nasal septum between nostrils.\",name:\"Columella\",scientificName:\"Columella Nasi\",path:\"landmarksSide/columella\",howToFind:\"Mark the part of the nose that connects the nostrils, to the left of the infratip.\"},subnasale:{description:\"Where nose base meets upper lip.\",name:\"Subnasale\",scientificName:\"Subnasale\",path:\"landmarksSide/subnasale\",howToFind:\"Mark the crease point at the base of the nose, where the nose creates an angle with the upper lip.\"},subalare:{description:\"Lowest point of the nostril wing on the visible side.\",name:\"Subalare\",scientificName:\"Subalare\",path:\"landmarksSide/subalare\",howToFind:\"Mark the most prominent edge of the nose wing, the part of the lower nose near the cheek closest to the eyes.\"},labraleSuperius:{description:\"Most forward point of the upper lip vermilion.\",name:\"Upper Lip\",scientificName:\"Labrale Superius\",path:\"landmarksSide/labraleSuperius\",howToFind:\"Find the most prominent point of the upper lip, typically the highest point of the lip's natural curve.\"},cheilion:{description:\"Mouth corner where the lips meet.\",name:\"Mouth Corner\",scientificName:\"Cheilion\",path:\"landmarksSide/cheilion\",howToFind:\"Mark the rearmost lip corner where the upper and lower lips touch in profile.\"},labraleInferius:{description:\"Most forward point of the lower lip vermilion.\",name:\"Lower Lip\",scientificName:\"Labrale Inferius\",path:\"landmarksSide/labraleInferius\",howToFind:\"Find the most prominent point of the lower lip, typically the lowest point of the lip's natural curve.\"},sublabiale:{description:\"Deepest point of the crease between lower lip and chin.\",name:\"Labiomental Fold\",scientificName:\"Sublabiale\",path:\"landmarksSide/sublabiale\",howToFind:\"From profile, mark the deepest spot between the lower lip and chin.\"},pogonion:{description:\"Most forward point on the soft-tissue chin.\",name:\"Chin Point\",scientificName:\"Pogonion (soft tissue)\",path:\"landmarksSide/pogonion\",howToFind:\"Mark the most prominent and forward point of the chin.\"},cervicalPoint:{description:\"High neck point just under the jaw.\",name:\"Cervical Point\",scientificName:\"Cervicale (soft-tissue reference)\",path:\"landmarksSide/cervicalPoint\",howToFind:\"Mark the most indented point where the underside of the jaw turns into the neck.\"},cheekbone:{description:\"Zygomatic prominence.\",name:\"Cheekbone\",scientificName:\"Zygion (soft-tissue over zygoma)\",path:\"landmarksSide/cheekbone\",howToFind:\"From the side, mark the bump of the cheekbone just below/behind the eye.\"},cornealApex:{description:\"Most forward point of the eye (cornea).\",name:\"Corneal Apex\",scientificName:\"Corneal Apex\",path:\"landmarksSide/cornealApex\",howToFind:\"Mark the most prominent and forward point of the eye.\"}},a=e=>\"front\"===e?t:\"side\"===e?i:{},o=(e,t,i=\"male\",o=\"white\")=>{if(!a(e)[t])return null;let r=function(e){let t=[];if(Array.isArray(e)?t=e:\"string\"==typeof e&&(t=e.includes(\",\")?e.split(\",\").map(e=>e.trim()).filter(Boolean):[e]),0===t.length)return\"white\";for(let e of[{matches:[\"east_asian\",\"asian\"],imageRace:\"asian\"},{matches:[\"south_asian\"],imageRace:\"south-asian\"},{matches:[\"black\",\"african\"],imageRace:\"black\"},{matches:[\"hispanic\",\"latino\",\"latina\",\"latinx\"],imageRace:\"hispanic\"},{matches:[\"native_american\",\"indigenous\"],imageRace:\"native-american\"},{matches:[\"middle_eastern\",\"middle-eastern\"],imageRace:\"middle-eastern\"},{matches:[\"pacific_islander\",\"pacific-islander\",\"polynesian\",\"melanesian\",\"micronesian\"],imageRace:\"pacific-islander\"},{matches:[\"white\",\"caucasian\"],imageRace:\"white\"}])if(t.some(t=>e.matches.includes(t.toLowerCase())))return e.imageRace;return\"white\"}(o);return`/images/landmarks/${i}/${r}/${t}.webp?v=1`};function r(e,t,i=\"male\",a=\"white\"){let n=\"male\"===i||\"female\"===i?i:\"female\";return Object.entries(t).map(([t,i])=>{let r=o(e,t,n,a);return{key:t,...i,referenceImage:r||\"\"}})}function n(e=\"male\",t=\"white\"){return r(\"front\",a(\"front\"),e,t)}function l(e=\"male\",t=\"white\"){let i=r(\"front\",a(\"front\"),e,t),o=new Map(i.map(e=>[e.key,e])),n=[],s=new Set(i.map(e=>e.key));for(let e of[\"hairline\",\"leftEyePupil\",\"rightEyePupil\",\"noseLeft\",\"noseRight\",\"lowerLip\",\"chinBottom\",\"leftOuterEar\",\"rightOuterEar\",\"leftTemple\",\"rightTemple\",\"leftEyeMedialCanthus\",\"leftEyeLateralCanthus\",\"leftEyeUpperEyelid\",\"leftEyeLowerEyelid\",\"leftEyelidHoodEnd\",\"leftBrowHead\",\"leftBrowInnerCorner\",\"leftBrowArch\",\"leftBrowPeak\",\"leftBrowTail\",\"leftUpperEyelidCrease\",\"rightEyeMedialCanthus\",\"rightEyeLateralCanthus\",\"rightEyeUpperEyelid\",\"rightEyeLowerEyelid\",\"rightEyelidHoodEnd\",\"rightBrowHead\",\"rightBrowInnerCorner\",\"rightBrowArch\",\"rightBrowPeak\",\"rightBrowTail\",\"rightUpperEyelidCrease\",\"nasalBase\",\"noseBottom\",\"leftNoseBridge\",\"rightNoseBridge\",\"mouthLeft\",\"mouthRight\",\"cupidsBow\",\"innerCupidsBow\",\"mouthMiddle\",\"leftTopGonion\",\"rightTopGonion\",\"leftBottomGonion\",\"rightBottomGonion\",\"chinLeft\",\"chinRight\",\"neckLeft\",\"neckRight\",\"leftCheek\",\"rightCheek\"]){let t=o.get(e);t&&(n.push(t),s.delete(e))}for(let e of s){let t=o.get(e);t&&n.push(t)}return n}function s(e=\"male\",t=\"white\"){return r(\"side\",a(\"side\"),e,t)}function h(e=\"male\",t=\"white\"){let i=r(\"side\",a(\"side\"),e,t),o=new Map(i.map(e=>[e.key,e])),n=[],l=new Set(i.map(e=>e.key));for(let e of[\"vertex\",\"occiput\",\"pronasale\",\"neckPoint\",\"porion\",\"orbitale\",\"tragus\",\"intertragicNotch\",\"cornealApex\",\"cheekbone\",\"eyelidEnd\",\"lowerEyelid\",\"trichion\",\"glabella\",\"forehead\",\"nasion\",\"rhinion\",\"supratip\",\"infratip\",\"columella\",\"subnasale\",\"subalare\",\"labraleSuperius\",\"cheilion\",\"labraleInferius\",\"sublabiale\",\"pogonion\",\"menton\",\"cervicalPoint\",\"gonionTop\",\"gonionBottom\"]){let t=o.get(e);t&&(n.push(t),l.delete(e))}for(let e of l){let t=o.get(e);t&&n.push(t)}return n}e.s([\"getAllLandmarks\",0,a,\"getLandmarkImagePath\",0,o],293060),e.s([\"getFrontLandmarkList\",()=>n,\"getFrontLandmarkListMobile\",()=>l,\"getSideLandmarkList\",()=>s,\"getSideLandmarkListMobile\",()=>h],767850)},837794,e=>{\"use strict\";async function t(e,t){let i,a,o,r;if([\"orbitale\",\"porion\",\"vertex\",\"occiput\",\"pronasale\",\"neckPoint\"].filter(e=>!t[e]).length>0)return null;let n=e.naturalWidth||e.width,l=e.naturalHeight||e.height,s=t.orbitale,h=t.porion,d=t.vertex,c=t.occiput,f=t.pronasale,p=t.neckPoint;if(!isFinite(s.x)||!isFinite(s.y)||!isFinite(h.x)||!isFinite(h.y)||!isFinite(d.x)||!isFinite(d.y)||!isFinite(c.x)||!isFinite(c.y)||!isFinite(f.x)||!isFinite(f.y)||!isFinite(p.x)||!isFinite(p.y))return console.error(\"[frankfort-standardization] Invalid landmark coordinates detected\"),null;let m=f.x<c.x,u=-Math.atan2(s.y-h.y,s.x-h.x);u>Math.PI/2&&(u-=Math.PI),u<=-Math.PI/2&&(u+=Math.PI);let g=Math.ceil(Math.sqrt(n*n+l*l)),w=document.createElement(\"canvas\");w.width=g,w.height=g;let y=w.getContext(\"2d\");y.imageSmoothingQuality=\"high\",y.save(),y.translate(g/2,g/2),m&&y.scale(-1,1),y.rotate(u),y.drawImage(e,-n/2,-l/2),y.restore();let k=n/2,b=l/2,x=Math.sin(u),T=Math.cos(u),F=e=>{let t=e.x-k,i=e.y-b;return{x:g/2+(t*T-i*x),y:g/2+(t*x+i*T)}},L=F(d),E=F(c),N=F(f),C=F(p);m&&(L={x:g-L.x,y:L.y},E={x:g-E.x,y:E.y},N={x:g-N.x,y:N.y},C={x:g-C.x,y:C.y});let v=Math.max(0,Math.min(E.x,N.x)-10),M=Math.min(w.width,Math.max(E.x,N.x)+10),B=Math.max(0,Math.min(L.y,C.y)-10),j=Math.min(w.height,Math.max(L.y,C.y)+10),P=Math.floor(v),S=Math.floor(B),R=Math.max(10,Math.floor(M-v)),I=Math.max(10,Math.floor(j-B));if(!isFinite(P)||!isFinite(S)||!isFinite(R)||!isFinite(I)||R<=0||I<=0||R>1e4||I>1e4)return console.error(\"[frankfort-standardization] Invalid crop dimensions:\",{cropX:P,cropY:S,cropW:R,cropH:I}),null;let O=document.createElement(\"canvas\");O.width=R,O.height=I;let A=O.getContext(\"2d\");A.imageSmoothingQuality=\"high\",A.drawImage(w,P,S,R,I,0,0,R,I);let U=R/I;if(U>1?(i=1024,o=0,r=(1024-(a=1024/U))/2):(a=1024,o=(1024-(i=1024*U))/2,r=0),!isFinite(i)||!isFinite(a)||!isFinite(o)||!isFinite(r)||i<=0||a<=0)return console.error(\"[frankfort-standardization] Invalid draw dimensions:\",{drawWidth:i,drawHeight:a,offsetX:o,offsetY:r}),null;let H=document.createElement(\"canvas\");H.width=1024,H.height=1024;let z=H.getContext(\"2d\");z.fillStyle=\"#FFFFFF\",z.fillRect(0,0,1024,1024),z.imageSmoothingQuality=\"high\",z.drawImage(O,o,r,i,a);let G=await new Promise(e=>H.toBlob(e,\"image/jpeg\",.8));if(!G)throw Error(\"Failed to export final canvas\");let D=i/R,$={};console.log(\" [frankfort-standardization] Transform params:\",{scaleFactor:D,cropX:P,cropY:S,offsetX:o,offsetY:r,needsMirroring:m,diag:g}),Object.entries(t).forEach(([e,t])=>{if(!t||!isFinite(t.x)||!isFinite(t.y))return void console.warn(`[frankfort-standardization] Skipping invalid landmark ${e}:`,t);console.log(` [frankfort-standardization] Transforming ${e}:`,{inputCoords:t,base:t,isFiniteBaseX:isFinite(t.x),isFiniteBaseY:isFinite(t.y)});let i=F(t),a=i;m&&(a={x:g-i.x,y:i.y});let n={x:a.x-P,y:a.y-S},l={x:n.x*D,y:n.y*D},s={x:l.x+o,y:l.y+r};console.log(` [frankfort-standardization] ${e} transformation steps:`,{rotated:i,rotatedThenMirrored:a,cropped:n,scaled:l,letterboxed:s,final:{x:Math.round(s.x),y:Math.round(s.y)}}),$[e]={x:Math.round(s.x),y:Math.round(s.y)}});let W=new FileReader;return{standardizedImageDataUrl:await new Promise(e=>{W.onload=()=>e(W.result),W.readAsDataURL(G)}),transformedLandmarks:$,width:1024,height:1024}}e.s([\"standardizeToFrankfortPlane\",()=>t])},922524,e=>{\"use strict\";var t=e.i(843476),i=e.i(271645),a=e.i(618566),o=e.i(751994),r=e.i(646034),n=e.i(910510),l=e.i(767850),s=e.i(320910),h=e.i(938183),d=e.i(837794),c=e.i(267051),f=e.i(999109),p=e.i(695904),m=e.i(918370),u=e.i(889500),g=e.i(37727);function w({isOpen:e,onClose:i}){return e?(0,t.jsxs)(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-4\",children:[(0,t.jsx)(\"div\",{className:\"absolute inset-0 bg-black/50\",onClick:i}),(0,t.jsxs)(\"div\",{className:\"relative bg-white rounded-2xl shadow-xl max-w-md w-full p-6\",children:[(0,t.jsx)(\"button\",{onClick:i,className:\"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors\",children:(0,t.jsx)(g.X,{size:20})}),(0,t.jsx)(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-4\",children:\"Frankfort Horizontal Plane\"}),(0,t.jsxs)(\"div\",{className:\"space-y-4 text-sm text-gray-600\",children:[(0,t.jsx)(\"p\",{children:\"The Frankfort Horizontal Plane is a standardized anatomical reference plane used in craniofacial analysis. It provides a consistent baseline for measuring facial features and proportions.\"}),(0,t.jsxs)(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[(0,t.jsx)(\"h3\",{className:\"font-medium text-gray-900 mb-2\",children:\"Defined by two points:\"}),(0,t.jsxs)(\"ul\",{className:\"space-y-2\",children:[(0,t.jsxs)(\"li\",{className:\"flex gap-2\",children:[(0,t.jsx)(\"span\",{className:\"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0\"}),(0,t.jsxs)(\"div\",{children:[(0,t.jsx)(\"span\",{className:\"font-medium text-gray-800\",children:\"Orbitale\"}),(0,t.jsx)(\"span\",{className:\"text-gray-500\",children:\"  The lowest point on the inferior margin of the eye socket\"})]})]}),(0,t.jsxs)(\"li\",{className:\"flex gap-2\",children:[(0,t.jsx)(\"span\",{className:\"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0\"}),(0,t.jsxs)(\"div\",{children:[(0,t.jsx)(\"span\",{className:\"font-medium text-gray-800\",children:\"Porion\"}),(0,t.jsx)(\"span\",{className:\"text-gray-500\",children:\"  The uppermost point of the external auditory canal (ear opening)\"})]})]})]})]}),(0,t.jsx)(\"p\",{children:\"When the Frankfort Plane is horizontal, it represents the natural head position for most individuals looking straight ahead. This standardization allows for accurate comparison of facial measurements and proportions.\"}),(0,t.jsx)(\"p\",{className:\"text-xs text-gray-400\",children:\"The green reference line on your image shows where the Frankfort Plane is located based on your placed landmarks.\"})]}),(0,t.jsx)(\"button\",{onClick:i,className:\"mt-6 w-full py-3 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors\",children:\"Got it\"})]})]}):null}var y=e.i(952571);let k=[2,4,8],b={hairline:2,leftTemple:2,rightTemple:2,leftEyePupil:4,leftEyeMedialCanthus:4,leftEyeLateralCanthus:4,leftEyeUpperEyelid:8,leftEyeLowerEyelid:8,leftEyelidHoodEnd:4,leftBrowHead:4,leftBrowInnerCorner:4,leftBrowArch:4,leftBrowPeak:4,leftBrowTail:4,leftUpperEyelidCrease:8,rightEyePupil:4,rightEyeMedialCanthus:4,rightEyeLateralCanthus:4,rightEyeUpperEyelid:8,rightEyeLowerEyelid:8,rightEyelidHoodEnd:4,rightBrowHead:4,rightBrowInnerCorner:4,rightBrowArch:4,rightBrowPeak:4,rightBrowTail:4,rightUpperEyelidCrease:8,noseLeft:4,noseRight:4,nasalBase:4,noseBottom:4,leftNoseBridge:4,rightNoseBridge:4,lowerLip:4,mouthLeft:4,mouthRight:4,cupidsBow:4,innerCupidsBow:4,mouthMiddle:4,chinBottom:4,chinLeft:4,chinRight:4,neckLeft:4,neckRight:4,leftOuterEar:2,leftCheek:2,leftTopGonion:4,leftBottomGonion:4,rightOuterEar:2,rightCheek:2,rightTopGonion:4,rightBottomGonion:4,vertex:2,occiput:2,trichion:2,neckPoint:2,porion:4,orbitale:4,tragus:4,intertragicNotch:4,cornealApex:4,eyelidEnd:4,lowerEyelid:4,cheekbone:4,forehead:2,glabella:4,nasion:4,pronasale:4,rhinion:4,supratip:4,infratip:4,columella:4,subnasale:4,subalare:4,labraleSuperius:4,cheilion:4,labraleInferius:4,sublabiale:4,pogonion:4,menton:4,cervicalPoint:4,gonionTop:4,gonionBottom:4};function x({profileType:e,imageUrl:a,gender:o,ethnicity:g,sideDirection:x,initialLandmarks:T,initialReviewMode:F,onComplete:L,onBack:E,onReturnToFrontReview:N}){let C=(0,i.useRef)(null),v=(0,i.useRef)(null),M=(0,i.useRef)(!1),B=(0,i.useRef)(null),j=(0,i.useRef)(null),P=(0,i.useRef)(null),[S,R]=(0,i.useState)(!1),[I,O]=(0,i.useState)(!1),[A,U]=(0,i.useState)(!1),[H,z]=(0,i.useState)(null),[G,D]=(0,i.useState)(new Set),[$,W]=(0,i.useState)(!1),[J,_]=(0,i.useState)(()=>\"true\"===localStorage.getItem(\"landmarking-show-dial-arrows\")),Z=(0,i.useMemo)(()=>\"front\"===e?(0,l.getFrontLandmarkListMobile)(o,g):(0,l.getSideLandmarkListMobile)(o,g),[e,o,g]);(0,n.usePreloadLandmarkImages)(Z,!0);let{landmarks:q,currentLandmark:K,currentIndex:X,mode:Q,zoom:V,hasVisitedReview:Y,placeLandmark:ee,moveLandmark:et,resetLandmark:ei,setLandmarkPosition:ea,goNext:eo,goPrevious:er,setZoom:en,enterReviewMode:el,exitReviewMode:es,editLandmark:eh,confirmFromEdit:ed,loadLandmarks:ec,isCurrentPlaced:ef,isComplete:ep,isLastLandmark:em,isFirstLandmark:eu}=(0,r.useLandmarking)({landmarkList:Z,initialLandmarks:T,initialReviewMode:F,canvasRef:C,imageRef:v});(0,i.useEffect)(()=>{if(!K||\"cycling\"!==Q)return;let e=b[K.key];e&&e!==V&&en(e)},[K?.key,Q]);let eg=(0,i.useCallback)(async()=>{if(\"front\"===e&&!M.current&&!T){M.current=!0,U(!0);try{let e=new Image;e.crossOrigin=\"anonymous\",await new Promise((t,i)=>{e.onload=()=>t(),e.onerror=i,e.src=a});let t=e.naturalWidth||e.width,i=e.naturalHeight||e.height,o=await (0,s.detectFrontLandmarks)(e,t,i);if(o){let e={};for(let[a,r]of Object.entries(o))e[a]={x:Math.max(0,Math.min(1,r.x/t)),y:Math.max(0,Math.min(1,r.y/i))};P.current=e,ec(e)}}catch(e){console.error(\"MediaPipe detection failed:\",e)}finally{U(!1)}}},[e,a,T,ec]),ew=(0,i.useCallback)(async e=>new Promise((t,i)=>{let a=new Image;a.crossOrigin=\"anonymous\",a.onload=()=>{let e=document.createElement(\"canvas\");e.width=a.naturalWidth||a.width,e.height=a.naturalHeight||a.height;let i=e.getContext(\"2d\");i.translate(e.width,0),i.scale(-1,1),i.drawImage(a,0,0),t(e.toDataURL(\"image/jpeg\",.9))},a.onerror=i,a.src=e}),[]),ey=(0,i.useCallback)(async()=>{if(\"side\"===e&&!M.current&&!T){M.current=!0,U(!0);try{let e=a;\"left\"===x?(e=await ew(a),z(e)):z(a);let t=new Image;t.crossOrigin=\"anonymous\",await new Promise((i,a)=>{t.onload=()=>i(),t.onerror=a,t.src=e});let i=t.naturalWidth||t.width,o=t.naturalHeight||t.height,r=await fetch(e),n=await r.blob(),l=new FormData;l.append(\"image\",n,\"side.jpg\");let s=await fetch(\"/api/side-landmarks\",{method:\"POST\",body:l});if(!s.ok)throw Error(\"Failed to detect side landmarks\");let d=await s.json();if(d.success&&d.data){let e={landmarks:d.data.landmarks,bbox:d.data.bbox,direction:d.data.direction,imageWidth:i,imageHeight:o};B.current=e,j.current={width:i,height:o};let t=(0,h.applyAutoPlacement)(e,i,o);Object.keys(t).length>0&&ec(t)}}catch(e){console.error(\"Lambda detection failed:\",e)}finally{U(!1)}}},[e,a,x,T,ec,ew]);(0,i.useEffect)(()=>{\"front\"!==e||T||M.current?\"side\"!==e||T||M.current||ey():eg()},[e,T,eg,ey]);let ek=(0,i.useCallback)(e=>{if(!B.current||!j.current)return null;let{width:t,height:i}=j.current,a={};return G.forEach(e=>{q[e]&&(a[e]=q[e])}),(0,h.applyAutoPlacementWithOverrides)(B.current,t,i,a)[e]||null},[q,G]);(0,i.useEffect)(()=>{if(\"side\"!==e||!B.current||!K||G.has(K.key)||!j.current)return;let{width:t,height:i}=j.current,a={};G.forEach(e=>{q[e]&&(a[e]=q[e])});let o=(0,h.applyAutoPlacementWithOverrides)(B.current,t,i,a)[K.key];o&&ea(K.key,o)},[e,X]);let eb=(0,i.useCallback)(e=>{K&&D(e=>new Set(e).add(K.key)),ee(e)},[K,ee]),ex=(0,i.useRef)(K);ex.current=K;let eT=(0,i.useRef)(et);eT.current=et;let eF=(0,i.useCallback)((e,t)=>{ex.current&&D(e=>new Set(e).add(ex.current.key)),eT.current(e,t)},[]),eL=(0,i.useCallback)(()=>{if(K){if(D(e=>{let t=new Set(e);return t.delete(K.key),t}),\"side\"===e){let e=ek(K.key);if(e)return void ea(K.key,e)}if(\"front\"===e&&P.current){let e=P.current[K.key];if(e)return void ea(K.key,e)}ei()}},[K,e,ek,ea,ei]),eE=(0,i.useCallback)((e,t)=>{eF(e,t)},[eF]),eN=(0,i.useCallback)(e=>{eF(\"left\"===e?-1:+(\"right\"===e),\"up\"===e?-1:+(\"down\"===e))},[eF]),eC=(0,i.useCallback)(()=>{let e=(k.indexOf(V)+1)%k.length;en(k[e])},[V,en]),ev=(0,i.useCallback)(async()=>{if(\"editing\"===Q)ed();else{O(!0);try{if(\"side\"===e){let e=H||a,t=new Image;t.crossOrigin=\"anonymous\",await new Promise((i,a)=>{t.onload=()=>i(),t.onerror=a,t.src=e});let i=t.naturalWidth||t.width,o=t.naturalHeight||t.height,r={};Object.entries(q).forEach(([e,t])=>{r[e]={x:t.x*i,y:t.y*o}});let n=await (0,d.standardizeToFrankfortPlane)(t,r);if(n){let e={};Object.entries(n.transformedLandmarks).forEach(([t,i])=>{e[t]={x:i.x/n.width,y:i.y/n.height}}),L(e,n.standardizedImageDataUrl)}else L(q,e)}else L(q)}finally{O(!1)}}},[Q,ed,L,q,e,H,a]),eM=(0,i.useCallback)(()=>{es()},[es]),eB=(0,i.useMemo)(()=>\"side\"===e&&!!(q.orbitale&&q.porion),[e,q]),ej=\"side\"===e&&H?H:a;return A?(0,t.jsx)(\"div\",{className:\"flex items-center justify-center h-full\",children:(0,t.jsxs)(\"div\",{className:\"text-center\",children:[(0,t.jsx)(\"div\",{className:\"w-10 h-10 border-4 border-gray-200 border-t-gray-900 rounded-full animate-spin mx-auto mb-3\"}),(0,t.jsx)(\"p\",{className:\"text-sm text-gray-600\",children:\"Detecting landmarks...\"})]})}):\"review\"===Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ReviewMode,{imageUrl:ej,landmarks:q,profileType:e,isSubmitting:I,onEditLandmark:eh,onBack:eM,onConfirm:ev}),(0,t.jsx)(w,{isOpen:S,onClose:()=>R(!1)})]}):(0,t.jsxs)(\"div\",{className:\"flex flex-col md:flex-row h-[100dvh] md:h-full gap-2 md:gap-4 p-2 md:p-4 overflow-hidden\",children:[(0,t.jsxs)(\"div\",{className:\"w-full md:w-80 flex-shrink-0 flex flex-col gap-2 md:gap-4 md:order-2 md:overflow-y-auto md:max-h-full\",children:[(0,t.jsx)(f.LandmarkCard,{landmark:K,currentIndex:X,totalCount:Z.length,isPlaced:ef,onUndo:eL,showArrows:J,onToggleArrows:()=>_(e=>{let t=!e;return localStorage.setItem(\"landmarking-show-dial-arrows\",String(t)),t})}),(0,t.jsx)(m.DesktopControls,{zoom:V,isFirstLandmark:eu,isLastLandmark:em,hasVisitedReview:Y,showReturnToFront:\"side\"===e,profileType:e,isEditing:\"editing\"===Q,onMove:eE,onReset:eL,onSetZoom:en,onPrevious:er,onNext:eo,onConfirm:em&&ep?el:void 0,onConfirmEdit:\"editing\"===Q?ed:void 0,onReturnToFront:N}),\"front\"===e&&E&&(0,t.jsx)(\"button\",{onClick:E,className:\"hidden md:block w-full py-2.5 text-sm text-gray-600 font-medium bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Back to Photos\"}),\"side\"===e&&N&&(0,t.jsx)(\"button\",{onClick:N,className:\"hidden md:block w-full py-2.5 text-sm text-gray-600 font-medium bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Back to Front\"})]}),(0,t.jsxs)(\"div\",{className:\"flex-1 min-h-0 relative md:order-1\",children:[(0,t.jsx)(c.LandmarkCanvas,{imageUrl:ej,landmarks:q,currentLandmark:K,currentIndex:X,landmarkList:Z,mode:Q,zoom:V,profileType:e,onPlaceLandmark:eb,onEditLandmark:eh,onZoomChange:en,onDraggingChange:W}),(0,t.jsx)(\"div\",{className:\"md:hidden\",children:(0,t.jsx)(p.MobileDial,{zoom:V,isFirstLandmark:eu,isLastLandmark:em,hasVisitedReview:Y,showReturnToFront:\"side\"===e,profileType:e,isDragging:$,isEditing:\"editing\"===Q,showArrows:J,onMove:eN,onReset:eL,onZoomCycle:eC,onPrevious:er,onNext:eo,onConfirm:em&&ep?el:void 0,onConfirmEdit:\"editing\"===Q?ed:void 0,onReturnToFront:N})}),eB&&(0,t.jsxs)(\"button\",{onClick:()=>R(!0),className:\"absolute top-4 right-4 flex items-center gap-2 px-3 py-2 bg-white/90 border border-gray-200 rounded-lg text-xs text-gray-600 hover:bg-white transition-colors\",children:[(0,t.jsx)(y.Info,{size:14}),\"Frankfort Plane\"]}),(0,t.jsxs)(\"a\",{href:\"https://discord.gg/vmqgmrry8q\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"absolute bottom-4 left-4 flex items-center gap-1.5 px-2 py-1 bg-black/50 backdrop-blur-sm rounded-full text-[10px] text-white/80 hover:text-white hover:bg-black/60 transition-colors\",children:[(0,t.jsx)(\"span\",{className:\"px-1.5 py-0.5 bg-amber-500/90 rounded text-[9px] font-medium text-black\",children:\"BETA\"}),(0,t.jsx)(\"span\",{children:\"Report bugs on Discord\"})]})]}),(0,t.jsx)(w,{isOpen:S,onClose:()=>R(!1)})]})}function T(e){let t={};for(let[i,a]of Object.entries(e))t[i]={x:Math.round(1024*a.x),y:Math.round(1024*a.y)};return t}function F(){let e=(0,a.useRouter)(),r=(0,a.useSearchParams)(),n=\"true\"===r.get(\"frontOnly\"),l=\"true\"===r.get(\"addSide\"),s=r.get(\"analysisId\"),h=r.get(\"direction\"),{getFrontPhoto:d,getSidePhoto:c,getGender:f,getRace:p,getSideDirection:m,saveFrontLandmarks:u,saveSideLandmarks:g,getFrontLandmarks:w,getSideLandmarks:y}=(0,o.useAnalysis)(),[k,b]=(0,i.useState)(l?\"side\":\"front\"),[F,L]=(0,i.useState)(null),[E,N]=(0,i.useState)(!1),C=d(),v=c(),M=f(),B=p(),j=m(),P=w(),S=y();(0,i.useEffect)(()=>{l?v?.original||e.replace(`/facial-analysis?mode=addSide&analysisId=${s}`):C?.processed||e.replace(\"/facial-analysis\")},[C,v,e,l,s]);let R=(0,i.useCallback)(async(t,i)=>{if(u(t),n||!v?.original){b(\"submitting\");try{let i=await fetch(\"/api/faces\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({frontPhotoUrl:C?.processed,frontLandmarks:T(t),gender:M,race:B})});if(!i.ok)throw Error(\"Failed to create analysis\");let a=await i.json();e.push(`/dashboard/${a.face.id}?new=true`)}catch(e){L(e instanceof Error?e.message:\"Failed to submit analysis\"),b(\"front\")}}else b(\"side\")},[n,v,C,u,M,B,e]),I=(0,i.useCallback)(async(t,i)=>{g(t),b(\"submitting\");let a=i||v?.original;try{if(l&&s){if(!(await fetch(`/api/faces/${s}`,{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({sidePhotoUrl:a,sideLandmarks:T(t)})})).ok)throw Error(\"Failed to update analysis\");e.push(`/dashboard/${s}`)}else{let i=w(),o=await fetch(\"/api/faces\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({frontPhotoUrl:C?.processed,sidePhotoUrl:a,frontLandmarks:i?T(i):null,sideLandmarks:T(t),gender:M,race:B})});if(!o.ok)throw Error(\"Failed to create analysis\");let r=await o.json();e.push(`/dashboard/${r.face.id}?new=true`)}}catch(e){L(e instanceof Error?e.message:\"Failed to submit analysis\"),b(\"side\")}},[C,v,g,w,M,B,e,l,s]),O=(0,i.useCallback)(()=>{b(\"front\"),N(!1)},[]),A=(0,i.useCallback)(()=>{b(\"front\"),N(!0)},[]);if(l){if(!v?.original)return null}else if(!C?.processed)return null;return\"submitting\"===k?(0,t.jsx)(\"div\",{className:\"fixed inset-0 flex items-center justify-center bg-white\",children:(0,t.jsxs)(\"div\",{className:\"text-center\",children:[(0,t.jsx)(\"div\",{className:\"w-12 h-12 border-4 border-gray-200 border-t-gray-900 rounded-full animate-spin mx-auto mb-4\"}),(0,t.jsx)(\"p\",{className:\"text-gray-600\",children:\"Analyzing your face...\"})]})}):F?(0,t.jsx)(\"div\",{className:\"fixed inset-0 flex items-center justify-center bg-white\",children:(0,t.jsxs)(\"div\",{className:\"text-center max-w-md p-6\",children:[(0,t.jsx)(\"div\",{className:\"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:(0,t.jsx)(\"svg\",{className:\"w-6 h-6 text-red-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:(0,t.jsx)(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})}),(0,t.jsx)(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Something went wrong\"}),(0,t.jsx)(\"p\",{className:\"text-gray-600 mb-4\",children:F}),(0,t.jsx)(\"button\",{onClick:()=>L(null),className:\"px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\",children:\"Try Again\"})]})}):(0,t.jsxs)(\"div\",{className:\"fixed inset-0 bg-white\",children:[\"front\"===k&&C?.processed&&(0,t.jsx)(x,{profileType:\"front\",imageUrl:C.processed,gender:M||\"male\",ethnicity:B?.split(\",\")[0]||null,initialLandmarks:P||void 0,initialReviewMode:E,onComplete:R,onBack:()=>e.push(\"/facial-analysis\")}),\"side\"===k&&v?.original&&(0,t.jsx)(x,{profileType:\"side\",imageUrl:v.original,gender:M||\"male\",ethnicity:B?.split(\",\")[0]||null,sideDirection:j||h,initialLandmarks:S||void 0,onComplete:I,onBack:l&&s?()=>e.push(`/facial-analysis?mode=addSide&analysisId=${s}`):O,onReturnToFrontReview:l?void 0:A})]})}e.s([\"default\",()=>F],922524)},826368,e=>{e.v(t=>Promise.all([\"static/chunks/72b6e4a245580a73.js\"].map(t=>e.l(t))).then(()=>t(57166)))}]);\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"4e894aed-a073-4022-937f-970ac82679cf","timestamp":"2025-12-26T17:09:13.237Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/EXTRACTED/landmarkers.js","content":"(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push([\"object\"==typeof document?document.currentScript:void 0,664659,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-down\",[[\"path\",{d:\"m6 9 6 6 6-6\",key:\"qrunsl\"}]]);e.s([\"ChevronDown\",()=>t],664659)},655900,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-up\",[[\"path\",{d:\"m18 15-6-6-6 6\",key:\"153udz\"}]]);e.s([\"ChevronUp\",()=>t],655900)},952571,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"info\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"path\",{d:\"M12 16v-4\",key:\"1dtifu\"}],[\"path\",{d:\"M12 8h.01\",key:\"e9boi3\"}]]);e.s([\"Info\",()=>t],952571)},910510,e=>{\"use strict\";var t=e.i(271645);function i(e,a=!0){let o=(0,t.useRef)(!1),r=(0,t.useRef)([]);(0,t.useEffect)(()=>{if(!a||o.current||0===e.length)return;o.current=!0;let t=()=>{let t=Array.from(new Set([...e.map(e=>e.referenceImage).filter(e=>e&&e.length>0),...e.map(e=>`/images/landmarks/infographic/${e.key}.webp`).filter(e=>e&&e.length>0)]));t.forEach(e=>{let t=document.createElement(\"link\");t.rel=\"preload\",t.as=\"image\",t.href=e,t.fetchPriority=\"high\",document.head.appendChild(t),r.current.push(t)}),Promise.all(t.map(e=>new Promise(t=>{if(!e)return void t();let i=new Image;\"fetchPriority\"in i&&(i.fetchPriority=\"high\"),i.onload=()=>t(),i.onerror=()=>t(),i.src=e})))};return\"complete\"===document.readyState?setTimeout(t,0):window.addEventListener(\"load\",t,{once:!0}),()=>{r.current.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),r.current=[]}},[e,a])}e.s([\"usePreloadLandmarkImages\",()=>i])},320910,e=>{\"use strict\";let t=null,i=null,a=null,o=null,r=!1,n=[\"Created TensorFlow Lite XNNPACK delegate for CPU\",\"INFO: Created TensorFlow Lite XNNPACK delegate\",\"TensorFlow Lite\",\"XNNPACK\",\"INFO:\"];function l(e){return(...t)=>{let i;i=Array.isArray(t)?t.join(\" \"):String(t),n.some(e=>i.includes(e))||e.apply(console,t)}}let s=e=>{let t=null,i=-1;for(let a of e){let e=1e9,o=1e9,r=-1e9,n=-1e9;for(let t of a)e=Math.min(e,t.x),o=Math.min(o,t.y),r=Math.max(r,t.x),n=Math.max(n,t.y);let l=(r-e)*(n-o);l>i&&(i=l,t=a)}return t},h=null,d=null,c=async()=>h||d||(d=(async()=>{try{let n;r||(t=console.error,i=console.info,a=console.log,o=console.warn,console.error=l(t),console.info=l(i),console.log=l(a),console.warn=l(o),r=!0);let{FaceLandmarker:s,FilesetResolver:d}=await e.A(826368);for(let e of[\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\",\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm/\"])try{let t=await d.forVisionTasks(e),i=await s.createFromOptions(t,{baseOptions:{modelAssetPath:\"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task\",delegate:\"CPU\"},runningMode:\"IMAGE\",numFaces:3,outputFaceBlendshapes:!1,outputFacialTransformationMatrixes:!1});return h=i,console.log(\"MediaPipe Face Landmarker initialized successfully\"),i}catch(t){n=t,console.error(\"MediaPipe init failed for\",e,t)}throw n||Error(\"MediaPipe initialization failed\")}catch(e){throw console.error(\"Failed to initialize MediaPipe:\",e),d=null,e}})());async function f(e){try{let t,i,a,o=await c();if(e instanceof HTMLImageElement)(t=document.createElement(\"canvas\")).width=e.naturalWidth||e.width,t.height=e.naturalHeight||e.height,t.getContext(\"2d\").drawImage(e,0,0);else throw Error(\"Invalid image input. Must be an HTMLImageElement\");try{i=o.detect(t),a=i?.faceLandmarks||[]}catch(e){console.warn(\"MediaPipe detection had a minor issue, but continuing:\",e.message);try{await new Promise(e=>setTimeout(e,100)),i=o.detect(t),a=i?.faceLandmarks||[]}catch(e){console.warn(\"Face detection failed after retry:\",e.message),a=[]}}if(!a.length)throw Error(\"No face detected in the image\");let r=s(a);if(!r)throw Error(\"No face detected in the image\");return{standardizedImage:((e,t)=>{var i;let a,o,r,n,l=e.width,s=e.height,h=t.map(e=>({x:e.x*l,y:e.y*s})),d=h[33],c=h[263],f={x:(d.x+c.x)/2,y:(d.y+c.y)/2},p=Math.atan2(c.y-d.y,c.x-d.x),m=f.x,u=f.y,g=e=>{let t=Math.sin(-p),i=Math.cos(-p),a=e.x-m,o=e.y-u;return{x:m+a*i-o*t,y:u+a*t+o*i}},w=g(h[152]||f),y=g(h[10]||f),k=g(f),b=Math.max(8,w.y-y.y);if(!(b>0&&isFinite(b))){let e=h[152]||f;b=Math.hypot(e.x-f.x,e.y-f.y)/.55}let x=Math.min(Math.max(32,(b*=1.12)/.65),2*Math.max(l,s)),T=k.y-.5*x,F=(i=m-x/2,(a=document.createElement(\"canvas\")).width=e.width,a.height=e.height,(o=a.getContext(\"2d\")).fillStyle=\"white\",o.fillRect(0,0,a.width,a.height),o.save(),o.translate(m,u),o.rotate(-p),o.translate(-m,-u),o.drawImage(e,0,0),o.restore(),(r=document.createElement(\"canvas\")).width=Math.max(1,Math.round(x)),r.height=Math.max(1,Math.round(x)),(n=r.getContext(\"2d\")).fillStyle=\"white\",n.fillRect(0,0,r.width,r.height),n.drawImage(a,Math.round(i),Math.round(T),Math.round(x),Math.round(x),0,0,r.width,r.height),r),L=document.createElement(\"canvas\");L.width=1024,L.height=1024;let E=L.getContext(\"2d\");return E.imageSmoothingQuality=\"high\",E.fillStyle=\"white\",E.fillRect(0,0,1024,1024),E.drawImage(F,0,0,F.width,F.height,0,0,1024,1024),L})(t,r)}}catch(e){throw console.error(\"Face standardization failed:\",e),e}}let p={hairline:10,leftEyePupil:468,rightEyePupil:473,noseLeft:48,noseRight:278,lowerLip:17,chinBottom:152,leftEyeMedialCanthus:133,leftEyeLateralCanthus:33,leftEyeUpperEyelid:470,leftEyeLowerEyelid:472,leftEyelidHoodEnd:247,leftBrowHead:107,leftBrowInnerCorner:55,leftBrowArch:52,leftBrowPeak:105,leftBrowTail:70,leftUpperEyelidCrease:470,rightEyeMedialCanthus:362,rightEyeLateralCanthus:263,rightEyeUpperEyelid:475,rightEyeLowerEyelid:374,rightEyelidHoodEnd:467,rightBrowHead:336,rightBrowInnerCorner:285,rightBrowArch:282,rightBrowPeak:334,rightBrowTail:276,rightUpperEyelidCrease:475,nasalBase:290,noseBottom:2,leftNoseBridge:174,rightNoseBridge:399,cupidsBow:267,innerCupidsBow:0,mouthMiddle:14,mouthLeft:61,mouthRight:306,chinLeft:176,chinRight:400,leftCheek:234,rightCheek:454,leftTemple:54,rightTemple:284,leftOuterEar:127,rightOuterEar:356,leftTopGonion:58,leftBottomGonion:172,rightTopGonion:288,rightBottomGonion:397,neckLeft:172,neckRight:397},m={hairline:{yOffset:-.06},leftEyePupil:{xOffset:.0015,yOffset:-.005},rightEyePupil:{xOffset:-.0015,yOffset:-.005},noseLeft:{xOffset:.0025},noseRight:{xOffset:-.0025},leftTemple:{yOffset:-.01},rightTemple:{yOffset:-.01},leftOuterEar:{xOffset:-.04},rightOuterEar:{xOffset:.04},neckLeft:{xOffset:0,yOffset:.05},neckRight:{xOffset:0,yOffset:.05},leftUpperEyelidCrease:{yOffset:-.015},rightUpperEyelidCrease:{yOffset:-.015}};async function u(){try{await c()}catch(e){console.warn(\"MediaPipe preload failed:\",e)}}async function g(e,t,i){try{let a,o,r,n,l=await c(),h=document.createElement(\"canvas\");h.width=e.naturalWidth||e.width,h.height=e.naturalHeight||e.height,h.getContext(\"2d\").drawImage(e,0,0);let d=l.detect(h),f=d?.faceLandmarks||[];if(!f.length)return null;let u=s(f);if(!u)return null;let g=h.width,w=h.height,y=g/w;y>t/i?(a=t,o=t/y,r=0,n=(i-o)/2):(o=i,a=i*y,r=(t-a)/2,n=0);let k={};for(let[e,t]of Object.entries(p))if(u[t]){let i=u[t],l=i.x*a+r,s=i.y*o+n,h=m[e];h&&(h.xOffset&&(l+=a*h.xOffset),h.yOffset&&(s+=o*h.yOffset)),k[e]={x:l,y:s}}return k}catch(e){return console.error(\"Face landmark detection error:\",e),null}}e.s([\"detectFrontLandmarks\",()=>g,\"preloadMediaPipe\",()=>u,\"standardizeFaceImage\",()=>f],320910)},837647,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"undo-2\",[[\"path\",{d:\"M9 14 4 9l5-5\",key:\"102s5s\"}],[\"path\",{d:\"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11\",key:\"f3b9sd\"}]]);e.s([\"Undo2\",()=>t],837647)},373375,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-left\",[[\"path\",{d:\"m15 18-6-6 6-6\",key:\"1wnfg3\"}]]);e.s([\"ChevronLeft\",()=>t],373375)},463059,e=>{\"use strict\";let t=(0,e.i(475254).default)(\"chevron-right\",[[\"path\",{d:\"m9 18 6-6-6-6\",key:\"mthhwq\"}]]);e.s([\"ChevronRight\",()=>t],463059)},767850,293060,e=>{\"use strict\";let t={hairline:{description:\"The hairline represents the junction between the scalp and forehead skin. Located at the highest point of the forehead where hair growth begins.\",name:\"Hairline\",scientificName:\"Trichion (frontal view)\",path:\"landmarksFront/hairline\",howToFind:\"Identify the highest point of the frontal hairline in the middle of the forehead.\"},leftTemple:{description:\"The left temporal region landmark, located at the side of the forehead above the eyebrow.\",name:\"Left Temple\",scientificName:\"Left Temporal Point\",path:\"landmarksFront/leftTemple\",howToFind:\"Mark the widest point of the hairline on the left side, halfway between the hairline and eyebrow.\"},rightTemple:{description:\"The right temporal region landmark, located at the side of the forehead above the eyebrow.\",name:\"Right Temple\",scientificName:\"Right Temporal Point\",path:\"landmarksFront/rightTemple\",howToFind:\"Mark the widest point of the hairline on the right side, halfway between the hairline and eyebrow.\"},leftOuterEar:{description:\"The outermost point of the left ear attachment to the head.\",name:\"Left Outer Ear\",scientificName:\"Left Auricular Lateral Point\",path:\"landmarksFront/leftOuterEar\",howToFind:\"Locate the most protruded point of the left ear on the side of the head.\"},rightOuterEar:{description:\"The outermost point of the right ear attachment to the head.\",name:\"Right Outer Ear\",scientificName:\"Right Auricular Lateral Point\",path:\"landmarksFront/rightOuterEar\",howToFind:\"Locate the most protruded point of the right ear on the side of the head.\"},leftBrowHead:{description:\"The starting point of the left eyebrow, closest to the nose.\",name:\"Left Brow Head\",scientificName:\"Left Supercilium Medialis\",path:\"landmarksFront/leftBrowHead\",howToFind:\"Locate the innermost and highest point of the left eyebrow, at the edge where brow hairs end.\"},leftBrowInnerCorner:{description:\"The inner corner point of the left eyebrow area.\",name:\"Left Brow Inner Corner\",scientificName:\"Left Supercilium Medial Corner\",path:\"landmarksFront/leftBrowInnerCorner\",howToFind:\"Locate the lowest point at the inner edge of the left eyebrow, where brow hairs end.\"},leftBrowArch:{description:\"The highest point of the left eyebrow arch.\",name:\"Left Brow Arch\",scientificName:\"Left Supercilium Superior\",path:\"landmarksFront/leftBrowArch\",howToFind:\"Find the highest point along the lower side of the left eyebrow, where the brow reaches its peak.\"},leftBrowPeak:{description:\"The peak point of the left eyebrow, often the most prominent part of the arch.\",name:\"Left Brow Peak\",scientificName:\"Left Supercilium Apex\",path:\"landmarksFront/leftBrowPeak\",howToFind:\"Identify the most elevated point along the top of the left eyebrow, which may be slightly to the right or left of the arch.\"},rightBrowHead:{description:\"The starting point of the right eyebrow, closest to the nose.\",name:\"Right Brow Head\",scientificName:\"Right Supercilium Medialis\",path:\"landmarksFront/rightBrowHead\",howToFind:\"Locate the innermost and highest point of the right eyebrow, at the edge where brow hairs end.\"},rightBrowInnerCorner:{description:\"The inner corner point of the right eyebrow area.\",name:\"Right Brow Inner Corner\",scientificName:\"Right Supercilium Medial Corner\",path:\"landmarksFront/rightBrowInnerCorner\",howToFind:\"Locate the lowest point at the inner edge of the right eyebrow, where brow hairs end.\"},rightBrowArch:{description:\"The highest point of the right eyebrow arch.\",name:\"Right Brow Arch\",scientificName:\"Right Supercilium Superior\",path:\"landmarksFront/rightBrowArch\",howToFind:\"Find the highest point along the lower side of the right eyebrow, where the brow reaches its peak.\"},rightBrowPeak:{description:\"The peak point of the right eyebrow, often the most prominent part of the arch.\",name:\"Right Brow Peak\",scientificName:\"Right Supercilium Apex\",path:\"landmarksFront/rightBrowPeak\",howToFind:\"Identify the most elevated point along the top of the right eyebrow, which may be slightly to the right or left of the arch.\"},leftBrowTail:{description:\"The outer endpoint of the left eyebrow, closest to the cheekbone.\",name:\"Left Brow Tail\",scientificName:\"Left Supercilium Lateralis\",path:\"landmarksFront/leftBrowTail\",howToFind:\"Locate the outermost point of the left eyebrow where the brow hairs taper off toward the temple.\"},rightBrowTail:{description:\"The outer endpoint of the right eyebrow, closest to the cheekbone.\",name:\"Right Brow Tail\",scientificName:\"Right Supercilium Lateralis\",path:\"landmarksFront/rightBrowTail\",howToFind:\"Locate the outermost point of the right eyebrow where the brow hairs taper off toward the temple.\"},leftEyeMedialCanthus:{description:\"The inner corner of the left eye where the upper and lower eyelids meet.\",name:\"Left Medial Canthus\",scientificName:\"Left Canthus Medialis\",path:\"landmarksFront/leftEyeMedialCanthus\",howToFind:\"Locate the inner corner of the left eye.\"},leftEyeLateralCanthus:{description:\"The outer corner of the left eye where the upper and lower eyelids meet.\",name:\"Left Lateral Canthus\",scientificName:\"Left Canthus Lateralis\",path:\"landmarksFront/leftEyeLateralCanthus\",howToFind:\"Locate the outer corner of the left eye where the eyelids meet.\"},leftEyePupil:{description:\"The center of the left eye's pupil.\",name:\"Left Pupil\",scientificName:\"Left Pupilla\",path:\"landmarksFront/leftEyePupil\",howToFind:\"Mark the center of the left eye's pupil.\"},leftEyeUpperEyelid:{description:\"The highest point of the left upper eyelid.\",name:\"Left Upper Eyelid\",scientificName:\"Left Palpebra Superior\",path:\"landmarksFront/leftEyeUpperEyelid\",howToFind:\"Identify the highest point of the left upper eyelid, above the iris.\"},leftEyeLowerEyelid:{description:\"The lowest point of the left lower eyelid.\",name:\"Left Lower Eyelid\",scientificName:\"Left Palpebra Inferior\",path:\"landmarksFront/leftEyeLowerEyelid\",howToFind:\"Identify the lowest point of the left lower eyelid, below the iris.\"},leftEyelidHoodEnd:{description:\"The lateral end of the left upper eyelid fold where hooding is assessed.\",name:\"Left Eyelid Hood End\",scientificName:\"Left Sulcus Palpebralis Lateralis\",path:\"landmarksFront/leftEyelidHoodEnd\",howToFind:\"Locate the outer end of the left upper eyelid fold, just outside the outer corner of the eye.\"},leftUpperEyelidCrease:{description:\"The crease line of the left upper eyelid where the eyelid folds when the eye is open.\",name:\"Left Upper Eyelid Crease\",scientificName:\"Left Pretarsal Skin Crease\",path:\"landmarksFront/leftUpperEyelidCrease\",howToFind:\"Locate the horizontal fold line on the left upper eyelid, visible when the eye is open, above the lash line. This may be directly in-line with the upper eyelid point if there is no visible upper eyelid exposure\"},rightEyeMedialCanthus:{description:\"The inner corner of the right eye where the upper and lower eyelids meet.\",name:\"Right Medial Canthus\",scientificName:\"Right Canthus Medialis\",path:\"landmarksFront/rightEyeMedialCanthus\",howToFind:\"Locate the inner corner of the right eye.\"},rightEyeLateralCanthus:{description:\"The outer corner of the right eye where the upper and lower eyelids meet.\",name:\"Right Lateral Canthus\",scientificName:\"Right Canthus Lateralis\",path:\"landmarksFront/rightEyeLateralCanthus\",howToFind:\"Locate the outer corner of the right eye where the eyelids meet.\"},rightEyePupil:{description:\"The center of the right eye's pupil.\",name:\"Right Pupil\",scientificName:\"Right Pupilla\",path:\"landmarksFront/rightEyePupil\",howToFind:\"Mark the center of the right eye's pupil.\"},rightEyeUpperEyelid:{description:\"The highest point of the right upper eyelid.\",name:\"Right Upper Eyelid\",scientificName:\"Right Palpebra Superior\",path:\"landmarksFront/rightEyeUpperEyelid\",howToFind:\"Identify the highest point of the right upper eyelid, above the iris.\"},rightEyeLowerEyelid:{description:\"The lowest point of the right lower eyelid.\",name:\"Right Lower Eyelid\",scientificName:\"Right Palpebra Inferior\",path:\"landmarksFront/rightEyeLowerEyelid\",howToFind:\"Identify the lowest point of the right lower eyelid, below the iris.\"},rightEyelidHoodEnd:{description:\"The lateral end of the right upper eyelid fold where hooding is assessed.\",name:\"Right Eyelid Hood End\",scientificName:\"Right Sulcus Palpebralis Lateralis\",path:\"landmarksFront/rightEyelidHoodEnd\",howToFind:\"Locate the outer end of the right upper eyelid fold, just outside the outer corner of the eye.\"},rightUpperEyelidCrease:{description:\"The crease line of the right upper eyelid where the eyelid folds when the eye is open.\",name:\"Right Upper Eyelid Crease\",scientificName:\"Right Pretarsal Skin Crease\",path:\"landmarksFront/rightUpperEyelidCrease\",howToFind:\"Locate the horizontal fold line on the right upper eyelid, visible when the eye is open, above the lash line. This may be directly in-line with the upper eyelid point if there is no visible upper eyelid exposure\"},noseLeft:{description:\"The left side of the nose at its widest point.\",name:\"Left Nose Side\",scientificName:\"Left Ala Nasi\",path:\"landmarksFront/noseLeft\",howToFind:\"Mark the leftmost point of the nose at the widest part of the nostrils.\"},noseRight:{description:\"The right side of the nose at its widest point.\",name:\"Right Nose Side\",scientificName:\"Right Ala Nasi\",path:\"landmarksFront/noseRight\",howToFind:\"Mark the rightmost point of the nose at the widest part of the nostrils.\"},leftNoseBridge:{description:\"The left edge of the nasal bridge.\",name:\"Left Nose Bridge\",scientificName:\"Left Dorsum Nasi\",path:\"landmarksFront/leftNoseBridge\",howToFind:\"Locate the left edge of the nose bridge, where it transitions from the nasal bone to the facial skin, typically around the middle of the nose.\"},rightNoseBridge:{description:\"The right edge of the nasal bridge.\",name:\"Right Nose Bridge\",scientificName:\"Right Dorsum Nasi\",path:\"landmarksFront/rightNoseBridge\",howToFind:\"Locate the right edge of the nose bridge, where it transitions from the nasal bone to the facial skin, typically around the middle of the nose.\"},nasalBase:{description:\"The base of the nose.\",name:\"Nasal Base\",scientificName:\"Nasal Base\",path:\"landmarksFront/nasalBase\",howToFind:\"Locate the base of the nose where the lower nostril ends, typically to the right of the nose tip.\"},noseBottom:{description:\"The bottom point of the nose between the nostrils.\",name:\"Nose Bottom\",scientificName:\"Subnasale\",path:\"landmarksFront/noseBottom\",howToFind:\"Locate the lowest point of the nose tip around the middle of the nose.\"},leftCheek:{description:\"The most prominent point of the left cheekbone.\",name:\"Left Cheekbone\",scientificName:\"Left Zygion\",path:\"landmarksFront/leftCheek\",howToFind:\"Locate the most laterally prominent point of the left cheekbone, typically the widest part of the midface.\"},rightCheek:{description:\"The most prominent point of the right cheekbone.\",name:\"Right Cheekbone\",scientificName:\"Right Zygion\",path:\"landmarksFront/rightCheek\",howToFind:\"Locate the most laterally prominent point of the right cheekbone, typically the widest part of the midface.\"},mouthLeft:{description:\"The left corner of the mouth where the lips meet.\",name:\"Left Mouth Corner\",scientificName:\"Left Cheilion\",path:\"landmarksFront/mouthLeft\",howToFind:\"Mark the leftmost corner of the mouth, where the lip border ends.\"},mouthRight:{description:\"The right corner of the mouth where the lips meet.\",name:\"Right Mouth Corner\",scientificName:\"Right Cheilion\",path:\"landmarksFront/mouthRight\",howToFind:\"Mark the rightmost corner of the mouth, where the lip border ends.\"},cupidsBow:{description:\"The center peak of the upper lip, forming the characteristic 'cupid's bow' shape.\",name:\"Cupid's Bow\",scientificName:\"Labrale Superius\",path:\"landmarksFront/cupidsBow\",howToFind:\"Locate the highest point of the upper lip, typically to the right or left of center.\"},innerCupidsBow:{description:\"The inner dip of the cupid's bow at the center of the upper lip vermilion border.\",name:\"Inner Cupid's Bow\",scientificName:\"Cupid's Bow\",path:\"landmarksFront/innerCupidsBow\",howToFind:\"Mark the central dip between the two peaks of the cupid's bow, at the vermilion border of the upper lip.\"},mouthMiddle:{description:\"The center point of the mouth.\",name:\"Mouth Middle\",scientificName:\"Mouth Middle\",path:\"landmarksFront/mouthMiddle\",howToFind:\"Locate the center point of the mouth, where the upper and lower lips meet.\"},lowerLip:{description:\"The center point of the lower lip at its fullest part.\",name:\"Lower Lip Center\",scientificName:\"Labrale Inferius\",path:\"landmarksFront/lowerLip\",howToFind:\"Mark the center of the lower lip at the most prominent or fullest part.\"},leftTopGonion:{description:\"The upper angle point of the left jaw.\",name:\"Left Upper Jaw Angle\",scientificName:\"Left Gonion Superior\",path:\"landmarksFront/leftTopGonion\",howToFind:\"Locate the upper part of the left jaw angle where it begins to curve, typically the most prominent point near mouth level.\"},rightTopGonion:{description:\"The upper angle point of the right jaw.\",name:\"Right Upper Jaw Angle\",scientificName:\"Right Gonion Superior\",path:\"landmarksFront/rightTopGonion\",howToFind:\"Locate the upper part of the right jaw angle where it begins to curve, typically the most prominent point near mouth level.\"},leftBottomGonion:{description:\"The lower angle point of the left jaw.\",name:\"Left Lower Jaw Angle\",scientificName:\"Left Gonion Inferior\",path:\"landmarksFront/leftBottomGonion\",howToFind:\"Locate the lower part of the left jaw angle below the upper angle, where the jaw curves toward the chin.\"},rightBottomGonion:{description:\"The lower angle point of the right jaw.\",name:\"Right Lower Jaw Angle\",scientificName:\"Right Gonion Inferior\",path:\"landmarksFront/rightBottomGonion\",howToFind:\"Locate the lower part of the right jaw angle below the upper angle, where the jaw curves toward the chin.\"},chinLeft:{description:\"The left side point of the chin.\",name:\"Left Chin\",scientificName:\"Left Mentum Lateralis\",path:\"landmarksFront/chinLeft\",howToFind:\"Mark the left side of the chin, where the chin begins to curve and form an angle.\"},chinRight:{description:\"The right side point of the chin.\",name:\"Right Chin\",scientificName:\"Right Mentum Lateralis\",path:\"landmarksFront/chinRight\",howToFind:\"Mark the right side of the chin, where the chin begins to curve and form an angle.\"},chinBottom:{description:\"The lowest point of the chin.\",name:\"Chin Bottom\",scientificName:\"Menton\",path:\"landmarksFront/chinBottom\",howToFind:\"Locate the lowest point of the chin between the left and right chin points.\"},neckLeft:{description:\"The left side of the neck at the jawline.\",name:\"Left Neck Point\",scientificName:\"Left Cervical Lateralis\",path:\"landmarksFront/neckLeft\",howToFind:\"Mark the widest point of the left side of the neck, typically right below the jawline.\"},neckRight:{description:\"The right side of the neck at the jawline.\",name:\"Right Neck Point\",scientificName:\"Right Cervical Lateralis\",path:\"landmarksFront/neckRight\",howToFind:\"Mark the widest point of the right side of the neck, typically right below the jawline.\"}},i={vertex:{description:\"Highest point on the head in profile.\",name:\"Top of Head\",scientificName:\"Vertex\",path:\"landmarksSide/vertex\",howToFind:\"Mark the highest point of the head's curve, typically around the middle of the upper head.\"},occiput:{description:\"Back-of-head prominence.\",name:\"Occiput\",scientificName:\"External Occipital Region\",path:\"landmarksSide/occiput\",howToFind:\"Mark the most prominent point on the back of the head's curve, typically above the ear.\"},pronasale:{description:\"Most forward point of the nose tip.\",name:\"Nose Tip\",scientificName:\"Pronasale\",path:\"landmarksSide/pronasale\",howToFind:\"Mark the farthest projecting point of the nose tip.\"},neckPoint:{description:\"Lower neck inflection on the front border.\",name:\"Neck Point\",scientificName:\"Anterior Cervical Landmark\",path:\"landmarksSide/neckPoint\",howToFind:\"Follow the neck contour down to the Adam's apple and mark a point above the collar region.\"},porion:{description:\"The upper margin of the ear canal opening, used for Frankfort horizontal plane.\",name:\"Porion\",scientificName:\"Porion (soft tissue)\",path:\"landmarksSide/porion\",howToFind:\"Mark the uppermost point of the ear canal opening, right above the tragus (the small flap in front of the ear canal).\"},orbitale:{description:\"Lowest point on the orbital rim.\",name:\"Orbitale\",scientificName:\"Orbitale\",path:\"landmarksSide/orbitale\",howToFind:\"Trace the undereye contour and mark the most prominent part of the orbital rim.\"},eyelidEnd:{description:\"The lateral end point of the visible eyelid in profile view.\",name:\"Eyelid End\",scientificName:\"Lateral Eyelid\",path:\"landmarksSide/eyelidEnd\",howToFind:\"From the side profile, mark the outermost visible point of the eyelid.\"},lowerEyelid:{description:\"The lower eyelid margin as seen from the side profile.\",name:\"Lower Eyelid\",scientificName:\"Left Palpebra Inferior\",path:\"landmarksSide/lowerEyelid\",howToFind:\"From the side profile, locate the lower edge of the lower eyelid, typically the most prominent point of the lower lid margin.\"},tragus:{description:\"Cartilage nub in front of the ear canal.\",name:\"Tragus\",scientificName:\"Tragion (soft tissue)\",path:\"landmarksSide/tragus\",howToFind:\"Mark the back part of the small flap in front of the ear canal.\"},intertragicNotch:{description:\"The notch between the tragus and antitragus cartilages, marking the deepest depression in the anterior ear margin.\",name:\"Intertragic Notch\",scientificName:\"Incisura Intertragica\",path:\"landmarksSide/intertragicNotch\",howToFind:\"Locate the small groove between the tragus (small flap in front of the ear canal) and the antitragus (small bump opposite to it). This is where the jawline construction begins.\"},gonionTop:{description:\"Upper angle point of the jaw from side profile.\",name:\"Upper Jaw Angle\",scientificName:\"Gonion Superior\",path:\"landmarksSide/gonionTop\",howToFind:\"Locate the upper part of the jaw angle where the ramus (back part of the jaw) forms an angle with the mandible (lower part of the jaw).\"},gonionBottom:{description:\"Lower angle point of the jaw from side profile.\",name:\"Lower Jaw Angle\",scientificName:\"Gonion Inferior\",path:\"landmarksSide/gonionBottom\",howToFind:\"Locate the lower part of the jaw angle that sits below the upper jaw angle, where the jaw begins to curve towards the chin.\"},menton:{description:\"Lowest point on the soft-tissue chin.\",name:\"Chin Bottom\",scientificName:\"Menton (soft tissue)\",path:\"landmarksSide/menton\",howToFind:\"Trace the chin contour downward and mark its lowest point. This should form an angle with the upper and lower jaw points, outlining the jawline shape.\"},trichion:{description:\"Forehead hairline point.\",name:\"Hairline (Profile)\",scientificName:\"Trichion\",path:\"landmarksSide/trichion\",howToFind:\"Mark the highest point of the hairline, where the forehead ends.\"},forehead:{description:\"The most prominent point of the forehead between the hairline and brow ridge, where the forehead may begin to curve towards the hairline.\",name:\"Forehead\",scientificName:\"Frontalis\",path:\"landmarksSide/forehead\",howToFind:\"From the side profile, locate the most forward-projecting point of the forehead, typically between the hairline and the brow ridge.\"},glabella:{description:\"Mid-forehead point between brows.\",name:\"Glabella\",scientificName:\"Glabella\",path:\"landmarksSide/glabella\",howToFind:\"Locate the most prominent point of the brow ridge between the eyebrows, above the indented part of the upper nose bridge.\"},nasion:{description:\"Nasal root depression.\",name:\"Nasal Bridge Root\",scientificName:\"Nasion\",path:\"landmarksSide/nasion\",howToFind:\"Mark the small dip between the brow ridge and nose bridge, typically around eye level.\"},rhinion:{description:\"Dorsal point of the nose.\",name:\"Rhinion\",scientificName:\"Rhinion\",path:\"landmarksSide/rhinion\",howToFind:\"Mark the dorsal point of the nose, typically the most prominent point of the nose bridge around the middle.\"},supratip:{description:\"Dorsal point just above the tip.\",name:\"Supratip\",scientificName:\"Supratip Break\",path:\"landmarksSide/supratip\",howToFind:\"Follow the bridge toward the tip and mark the highest point right before the nose tip.\"},infratip:{description:\"The point between the nose tip and columella on the nasal profile.\",name:\"Infratip\",scientificName:\"Infratip Lobule\",path:\"landmarksSide/infratip\",howToFind:\"Follow the nose contour down from the tip and mark the lowest point before the nostrils.\"},columella:{description:\"Inferior border of the nasal septum between nostrils.\",name:\"Columella\",scientificName:\"Columella Nasi\",path:\"landmarksSide/columella\",howToFind:\"Mark the part of the nose that connects the nostrils, to the left of the infratip.\"},subnasale:{description:\"Where nose base meets upper lip.\",name:\"Subnasale\",scientificName:\"Subnasale\",path:\"landmarksSide/subnasale\",howToFind:\"Mark the crease point at the base of the nose, where the nose creates an angle with the upper lip.\"},subalare:{description:\"Lowest point of the nostril wing on the visible side.\",name:\"Subalare\",scientificName:\"Subalare\",path:\"landmarksSide/subalare\",howToFind:\"Mark the most prominent edge of the nose wing, the part of the lower nose near the cheek closest to the eyes.\"},labraleSuperius:{description:\"Most forward point of the upper lip vermilion.\",name:\"Upper Lip\",scientificName:\"Labrale Superius\",path:\"landmarksSide/labraleSuperius\",howToFind:\"Find the most prominent point of the upper lip, typically the highest point of the lip's natural curve.\"},cheilion:{description:\"Mouth corner where the lips meet.\",name:\"Mouth Corner\",scientificName:\"Cheilion\",path:\"landmarksSide/cheilion\",howToFind:\"Mark the rearmost lip corner where the upper and lower lips touch in profile.\"},labraleInferius:{description:\"Most forward point of the lower lip vermilion.\",name:\"Lower Lip\",scientificName:\"Labrale Inferius\",path:\"landmarksSide/labraleInferius\",howToFind:\"Find the most prominent point of the lower lip, typically the lowest point of the lip's natural curve.\"},sublabiale:{description:\"Deepest point of the crease between lower lip and chin.\",name:\"Labiomental Fold\",scientificName:\"Sublabiale\",path:\"landmarksSide/sublabiale\",howToFind:\"From profile, mark the deepest spot between the lower lip and chin.\"},pogonion:{description:\"Most forward point on the soft-tissue chin.\",name:\"Chin Point\",scientificName:\"Pogonion (soft tissue)\",path:\"landmarksSide/pogonion\",howToFind:\"Mark the most prominent and forward point of the chin.\"},cervicalPoint:{description:\"High neck point just under the jaw.\",name:\"Cervical Point\",scientificName:\"Cervicale (soft-tissue reference)\",path:\"landmarksSide/cervicalPoint\",howToFind:\"Mark the most indented point where the underside of the jaw turns into the neck.\"},cheekbone:{description:\"Zygomatic prominence.\",name:\"Cheekbone\",scientificName:\"Zygion (soft-tissue over zygoma)\",path:\"landmarksSide/cheekbone\",howToFind:\"From the side, mark the bump of the cheekbone just below/behind the eye.\"},cornealApex:{description:\"Most forward point of the eye (cornea).\",name:\"Corneal Apex\",scientificName:\"Corneal Apex\",path:\"landmarksSide/cornealApex\",howToFind:\"Mark the most prominent and forward point of the eye.\"}},a=e=>\"front\"===e?t:\"side\"===e?i:{},o=(e,t,i=\"male\",o=\"white\")=>{if(!a(e)[t])return null;let r=function(e){let t=[];if(Array.isArray(e)?t=e:\"string\"==typeof e&&(t=e.includes(\",\")?e.split(\",\").map(e=>e.trim()).filter(Boolean):[e]),0===t.length)return\"white\";for(let e of[{matches:[\"east_asian\",\"asian\"],imageRace:\"asian\"},{matches:[\"south_asian\"],imageRace:\"south-asian\"},{matches:[\"black\",\"african\"],imageRace:\"black\"},{matches:[\"hispanic\",\"latino\",\"latina\",\"latinx\"],imageRace:\"hispanic\"},{matches:[\"native_american\",\"indigenous\"],imageRace:\"native-american\"},{matches:[\"middle_eastern\",\"middle-eastern\"],imageRace:\"middle-eastern\"},{matches:[\"pacific_islander\",\"pacific-islander\",\"polynesian\",\"melanesian\",\"micronesian\"],imageRace:\"pacific-islander\"},{matches:[\"white\",\"caucasian\"],imageRace:\"white\"}])if(t.some(t=>e.matches.includes(t.toLowerCase())))return e.imageRace;return\"white\"}(o);return`/images/landmarks/${i}/${r}/${t}.webp?v=1`};function r(e,t,i=\"male\",a=\"white\"){let n=\"male\"===i||\"female\"===i?i:\"female\";return Object.entries(t).map(([t,i])=>{let r=o(e,t,n,a);return{key:t,...i,referenceImage:r||\"\"}})}function n(e=\"male\",t=\"white\"){return r(\"front\",a(\"front\"),e,t)}function l(e=\"male\",t=\"white\"){let i=r(\"front\",a(\"front\"),e,t),o=new Map(i.map(e=>[e.key,e])),n=[],s=new Set(i.map(e=>e.key));for(let e of[\"hairline\",\"leftEyePupil\",\"rightEyePupil\",\"noseLeft\",\"noseRight\",\"lowerLip\",\"chinBottom\",\"leftOuterEar\",\"rightOuterEar\",\"leftTemple\",\"rightTemple\",\"leftEyeMedialCanthus\",\"leftEyeLateralCanthus\",\"leftEyeUpperEyelid\",\"leftEyeLowerEyelid\",\"leftEyelidHoodEnd\",\"leftBrowHead\",\"leftBrowInnerCorner\",\"leftBrowArch\",\"leftBrowPeak\",\"leftBrowTail\",\"leftUpperEyelidCrease\",\"rightEyeMedialCanthus\",\"rightEyeLateralCanthus\",\"rightEyeUpperEyelid\",\"rightEyeLowerEyelid\",\"rightEyelidHoodEnd\",\"rightBrowHead\",\"rightBrowInnerCorner\",\"rightBrowArch\",\"rightBrowPeak\",\"rightBrowTail\",\"rightUpperEyelidCrease\",\"nasalBase\",\"noseBottom\",\"leftNoseBridge\",\"rightNoseBridge\",\"mouthLeft\",\"mouthRight\",\"cupidsBow\",\"innerCupidsBow\",\"mouthMiddle\",\"leftTopGonion\",\"rightTopGonion\",\"leftBottomGonion\",\"rightBottomGonion\",\"chinLeft\",\"chinRight\",\"neckLeft\",\"neckRight\",\"leftCheek\",\"rightCheek\"]){let t=o.get(e);t&&(n.push(t),s.delete(e))}for(let e of s){let t=o.get(e);t&&n.push(t)}return n}function s(e=\"male\",t=\"white\"){return r(\"side\",a(\"side\"),e,t)}function h(e=\"male\",t=\"white\"){let i=r(\"side\",a(\"side\"),e,t),o=new Map(i.map(e=>[e.key,e])),n=[],l=new Set(i.map(e=>e.key));for(let e of[\"vertex\",\"occiput\",\"pronasale\",\"neckPoint\",\"porion\",\"orbitale\",\"tragus\",\"intertragicNotch\",\"cornealApex\",\"cheekbone\",\"eyelidEnd\",\"lowerEyelid\",\"trichion\",\"glabella\",\"forehead\",\"nasion\",\"rhinion\",\"supratip\",\"infratip\",\"columella\",\"subnasale\",\"subalare\",\"labraleSuperius\",\"cheilion\",\"labraleInferius\",\"sublabiale\",\"pogonion\",\"menton\",\"cervicalPoint\",\"gonionTop\",\"gonionBottom\"]){let t=o.get(e);t&&(n.push(t),l.delete(e))}for(let e of l){let t=o.get(e);t&&n.push(t)}return n}e.s([\"getAllLandmarks\",0,a,\"getLandmarkImagePath\",0,o],293060),e.s([\"getFrontLandmarkList\",()=>n,\"getFrontLandmarkListMobile\",()=>l,\"getSideLandmarkList\",()=>s,\"getSideLandmarkListMobile\",()=>h],767850)},837794,e=>{\"use strict\";async function t(e,t){let i,a,o,r;if([\"orbitale\",\"porion\",\"vertex\",\"occiput\",\"pronasale\",\"neckPoint\"].filter(e=>!t[e]).length>0)return null;let n=e.naturalWidth||e.width,l=e.naturalHeight||e.height,s=t.orbitale,h=t.porion,d=t.vertex,c=t.occiput,f=t.pronasale,p=t.neckPoint;if(!isFinite(s.x)||!isFinite(s.y)||!isFinite(h.x)||!isFinite(h.y)||!isFinite(d.x)||!isFinite(d.y)||!isFinite(c.x)||!isFinite(c.y)||!isFinite(f.x)||!isFinite(f.y)||!isFinite(p.x)||!isFinite(p.y))return console.error(\"[frankfort-standardization] Invalid landmark coordinates detected\"),null;let m=f.x<c.x,u=-Math.atan2(s.y-h.y,s.x-h.x);u>Math.PI/2&&(u-=Math.PI),u<=-Math.PI/2&&(u+=Math.PI);let g=Math.ceil(Math.sqrt(n*n+l*l)),w=document.createElement(\"canvas\");w.width=g,w.height=g;let y=w.getContext(\"2d\");y.imageSmoothingQuality=\"high\",y.save(),y.translate(g/2,g/2),m&&y.scale(-1,1),y.rotate(u),y.drawImage(e,-n/2,-l/2),y.restore();let k=n/2,b=l/2,x=Math.sin(u),T=Math.cos(u),F=e=>{let t=e.x-k,i=e.y-b;return{x:g/2+(t*T-i*x),y:g/2+(t*x+i*T)}},L=F(d),E=F(c),N=F(f),C=F(p);m&&(L={x:g-L.x,y:L.y},E={x:g-E.x,y:E.y},N={x:g-N.x,y:N.y},C={x:g-C.x,y:C.y});let v=Math.max(0,Math.min(E.x,N.x)-10),M=Math.min(w.width,Math.max(E.x,N.x)+10),B=Math.max(0,Math.min(L.y,C.y)-10),j=Math.min(w.height,Math.max(L.y,C.y)+10),P=Math.floor(v),S=Math.floor(B),R=Math.max(10,Math.floor(M-v)),I=Math.max(10,Math.floor(j-B));if(!isFinite(P)||!isFinite(S)||!isFinite(R)||!isFinite(I)||R<=0||I<=0||R>1e4||I>1e4)return console.error(\"[frankfort-standardization] Invalid crop dimensions:\",{cropX:P,cropY:S,cropW:R,cropH:I}),null;let O=document.createElement(\"canvas\");O.width=R,O.height=I;let A=O.getContext(\"2d\");A.imageSmoothingQuality=\"high\",A.drawImage(w,P,S,R,I,0,0,R,I);let U=R/I;if(U>1?(i=1024,o=0,r=(1024-(a=1024/U))/2):(a=1024,o=(1024-(i=1024*U))/2,r=0),!isFinite(i)||!isFinite(a)||!isFinite(o)||!isFinite(r)||i<=0||a<=0)return console.error(\"[frankfort-standardization] Invalid draw dimensions:\",{drawWidth:i,drawHeight:a,offsetX:o,offsetY:r}),null;let H=document.createElement(\"canvas\");H.width=1024,H.height=1024;let z=H.getContext(\"2d\");z.fillStyle=\"#FFFFFF\",z.fillRect(0,0,1024,1024),z.imageSmoothingQuality=\"high\",z.drawImage(O,o,r,i,a);let G=await new Promise(e=>H.toBlob(e,\"image/jpeg\",.8));if(!G)throw Error(\"Failed to export final canvas\");let D=i/R,$={};console.log(\" [frankfort-standardization] Transform params:\",{scaleFactor:D,cropX:P,cropY:S,offsetX:o,offsetY:r,needsMirroring:m,diag:g}),Object.entries(t).forEach(([e,t])=>{if(!t||!isFinite(t.x)||!isFinite(t.y))return void console.warn(`[frankfort-standardization] Skipping invalid landmark ${e}:`,t);console.log(` [frankfort-standardization] Transforming ${e}:`,{inputCoords:t,base:t,isFiniteBaseX:isFinite(t.x),isFiniteBaseY:isFinite(t.y)});let i=F(t),a=i;m&&(a={x:g-i.x,y:i.y});let n={x:a.x-P,y:a.y-S},l={x:n.x*D,y:n.y*D},s={x:l.x+o,y:l.y+r};console.log(` [frankfort-standardization] ${e} transformation steps:`,{rotated:i,rotatedThenMirrored:a,cropped:n,scaled:l,letterboxed:s,final:{x:Math.round(s.x),y:Math.round(s.y)}}),$[e]={x:Math.round(s.x),y:Math.round(s.y)}});let W=new FileReader;return{standardizedImageDataUrl:await new Promise(e=>{W.onload=()=>e(W.result),W.readAsDataURL(G)}),transformedLandmarks:$,width:1024,height:1024}}e.s([\"standardizeToFrankfortPlane\",()=>t])},922524,e=>{\"use strict\";var t=e.i(843476),i=e.i(271645),a=e.i(618566),o=e.i(751994),r=e.i(646034),n=e.i(910510),l=e.i(767850),s=e.i(320910),h=e.i(938183),d=e.i(837794),c=e.i(267051),f=e.i(999109),p=e.i(695904),m=e.i(918370),u=e.i(889500),g=e.i(37727);function w({isOpen:e,onClose:i}){return e?(0,t.jsxs)(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-4\",children:[(0,t.jsx)(\"div\",{className:\"absolute inset-0 bg-black/50\",onClick:i}),(0,t.jsxs)(\"div\",{className:\"relative bg-white rounded-2xl shadow-xl max-w-md w-full p-6\",children:[(0,t.jsx)(\"button\",{onClick:i,className:\"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors\",children:(0,t.jsx)(g.X,{size:20})}),(0,t.jsx)(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-4\",children:\"Frankfort Horizontal Plane\"}),(0,t.jsxs)(\"div\",{className:\"space-y-4 text-sm text-gray-600\",children:[(0,t.jsx)(\"p\",{children:\"The Frankfort Horizontal Plane is a standardized anatomical reference plane used in craniofacial analysis. It provides a consistent baseline for measuring facial features and proportions.\"}),(0,t.jsxs)(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[(0,t.jsx)(\"h3\",{className:\"font-medium text-gray-900 mb-2\",children:\"Defined by two points:\"}),(0,t.jsxs)(\"ul\",{className:\"space-y-2\",children:[(0,t.jsxs)(\"li\",{className:\"flex gap-2\",children:[(0,t.jsx)(\"span\",{className:\"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0\"}),(0,t.jsxs)(\"div\",{children:[(0,t.jsx)(\"span\",{className:\"font-medium text-gray-800\",children:\"Orbitale\"}),(0,t.jsx)(\"span\",{className:\"text-gray-500\",children:\"  The lowest point on the inferior margin of the eye socket\"})]})]}),(0,t.jsxs)(\"li\",{className:\"flex gap-2\",children:[(0,t.jsx)(\"span\",{className:\"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0\"}),(0,t.jsxs)(\"div\",{children:[(0,t.jsx)(\"span\",{className:\"font-medium text-gray-800\",children:\"Porion\"}),(0,t.jsx)(\"span\",{className:\"text-gray-500\",children:\"  The uppermost point of the external auditory canal (ear opening)\"})]})]})]})]}),(0,t.jsx)(\"p\",{children:\"When the Frankfort Plane is horizontal, it represents the natural head position for most individuals looking straight ahead. This standardization allows for accurate comparison of facial measurements and proportions.\"}),(0,t.jsx)(\"p\",{className:\"text-xs text-gray-400\",children:\"The green reference line on your image shows where the Frankfort Plane is located based on your placed landmarks.\"})]}),(0,t.jsx)(\"button\",{onClick:i,className:\"mt-6 w-full py-3 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors\",children:\"Got it\"})]})]}):null}var y=e.i(952571);let k=[2,4,8],b={hairline:2,leftTemple:2,rightTemple:2,leftEyePupil:4,leftEyeMedialCanthus:4,leftEyeLateralCanthus:4,leftEyeUpperEyelid:8,leftEyeLowerEyelid:8,leftEyelidHoodEnd:4,leftBrowHead:4,leftBrowInnerCorner:4,leftBrowArch:4,leftBrowPeak:4,leftBrowTail:4,leftUpperEyelidCrease:8,rightEyePupil:4,rightEyeMedialCanthus:4,rightEyeLateralCanthus:4,rightEyeUpperEyelid:8,rightEyeLowerEyelid:8,rightEyelidHoodEnd:4,rightBrowHead:4,rightBrowInnerCorner:4,rightBrowArch:4,rightBrowPeak:4,rightBrowTail:4,rightUpperEyelidCrease:8,noseLeft:4,noseRight:4,nasalBase:4,noseBottom:4,leftNoseBridge:4,rightNoseBridge:4,lowerLip:4,mouthLeft:4,mouthRight:4,cupidsBow:4,innerCupidsBow:4,mouthMiddle:4,chinBottom:4,chinLeft:4,chinRight:4,neckLeft:4,neckRight:4,leftOuterEar:2,leftCheek:2,leftTopGonion:4,leftBottomGonion:4,rightOuterEar:2,rightCheek:2,rightTopGonion:4,rightBottomGonion:4,vertex:2,occiput:2,trichion:2,neckPoint:2,porion:4,orbitale:4,tragus:4,intertragicNotch:4,cornealApex:4,eyelidEnd:4,lowerEyelid:4,cheekbone:4,forehead:2,glabella:4,nasion:4,pronasale:4,rhinion:4,supratip:4,infratip:4,columella:4,subnasale:4,subalare:4,labraleSuperius:4,cheilion:4,labraleInferius:4,sublabiale:4,pogonion:4,menton:4,cervicalPoint:4,gonionTop:4,gonionBottom:4};function x({profileType:e,imageUrl:a,gender:o,ethnicity:g,sideDirection:x,initialLandmarks:T,initialReviewMode:F,onComplete:L,onBack:E,onReturnToFrontReview:N}){let C=(0,i.useRef)(null),v=(0,i.useRef)(null),M=(0,i.useRef)(!1),B=(0,i.useRef)(null),j=(0,i.useRef)(null),P=(0,i.useRef)(null),[S,R]=(0,i.useState)(!1),[I,O]=(0,i.useState)(!1),[A,U]=(0,i.useState)(!1),[H,z]=(0,i.useState)(null),[G,D]=(0,i.useState)(new Set),[$,W]=(0,i.useState)(!1),[J,_]=(0,i.useState)(()=>\"true\"===localStorage.getItem(\"landmarking-show-dial-arrows\")),Z=(0,i.useMemo)(()=>\"front\"===e?(0,l.getFrontLandmarkListMobile)(o,g):(0,l.getSideLandmarkListMobile)(o,g),[e,o,g]);(0,n.usePreloadLandmarkImages)(Z,!0);let{landmarks:q,currentLandmark:K,currentIndex:X,mode:Q,zoom:V,hasVisitedReview:Y,placeLandmark:ee,moveLandmark:et,resetLandmark:ei,setLandmarkPosition:ea,goNext:eo,goPrevious:er,setZoom:en,enterReviewMode:el,exitReviewMode:es,editLandmark:eh,confirmFromEdit:ed,loadLandmarks:ec,isCurrentPlaced:ef,isComplete:ep,isLastLandmark:em,isFirstLandmark:eu}=(0,r.useLandmarking)({landmarkList:Z,initialLandmarks:T,initialReviewMode:F,canvasRef:C,imageRef:v});(0,i.useEffect)(()=>{if(!K||\"cycling\"!==Q)return;let e=b[K.key];e&&e!==V&&en(e)},[K?.key,Q]);let eg=(0,i.useCallback)(async()=>{if(\"front\"===e&&!M.current&&!T){M.current=!0,U(!0);try{let e=new Image;e.crossOrigin=\"anonymous\",await new Promise((t,i)=>{e.onload=()=>t(),e.onerror=i,e.src=a});let t=e.naturalWidth||e.width,i=e.naturalHeight||e.height,o=await (0,s.detectFrontLandmarks)(e,t,i);if(o){let e={};for(let[a,r]of Object.entries(o))e[a]={x:Math.max(0,Math.min(1,r.x/t)),y:Math.max(0,Math.min(1,r.y/i))};P.current=e,ec(e)}}catch(e){console.error(\"MediaPipe detection failed:\",e)}finally{U(!1)}}},[e,a,T,ec]),ew=(0,i.useCallback)(async e=>new Promise((t,i)=>{let a=new Image;a.crossOrigin=\"anonymous\",a.onload=()=>{let e=document.createElement(\"canvas\");e.width=a.naturalWidth||a.width,e.height=a.naturalHeight||a.height;let i=e.getContext(\"2d\");i.translate(e.width,0),i.scale(-1,1),i.drawImage(a,0,0),t(e.toDataURL(\"image/jpeg\",.9))},a.onerror=i,a.src=e}),[]),ey=(0,i.useCallback)(async()=>{if(\"side\"===e&&!M.current&&!T){M.current=!0,U(!0);try{let e=a;\"left\"===x?(e=await ew(a),z(e)):z(a);let t=new Image;t.crossOrigin=\"anonymous\",await new Promise((i,a)=>{t.onload=()=>i(),t.onerror=a,t.src=e});let i=t.naturalWidth||t.width,o=t.naturalHeight||t.height,r=await fetch(e),n=await r.blob(),l=new FormData;l.append(\"image\",n,\"side.jpg\");let s=await fetch(\"/api/side-landmarks\",{method:\"POST\",body:l});if(!s.ok)throw Error(\"Failed to detect side landmarks\");let d=await s.json();if(d.success&&d.data){let e={landmarks:d.data.landmarks,bbox:d.data.bbox,direction:d.data.direction,imageWidth:i,imageHeight:o};B.current=e,j.current={width:i,height:o};let t=(0,h.applyAutoPlacement)(e,i,o);Object.keys(t).length>0&&ec(t)}}catch(e){console.error(\"Lambda detection failed:\",e)}finally{U(!1)}}},[e,a,x,T,ec,ew]);(0,i.useEffect)(()=>{\"front\"!==e||T||M.current?\"side\"!==e||T||M.current||ey():eg()},[e,T,eg,ey]);let ek=(0,i.useCallback)(e=>{if(!B.current||!j.current)return null;let{width:t,height:i}=j.current,a={};return G.forEach(e=>{q[e]&&(a[e]=q[e])}),(0,h.applyAutoPlacementWithOverrides)(B.current,t,i,a)[e]||null},[q,G]);(0,i.useEffect)(()=>{if(\"side\"!==e||!B.current||!K||G.has(K.key)||!j.current)return;let{width:t,height:i}=j.current,a={};G.forEach(e=>{q[e]&&(a[e]=q[e])});let o=(0,h.applyAutoPlacementWithOverrides)(B.current,t,i,a)[K.key];o&&ea(K.key,o)},[e,X]);let eb=(0,i.useCallback)(e=>{K&&D(e=>new Set(e).add(K.key)),ee(e)},[K,ee]),ex=(0,i.useRef)(K);ex.current=K;let eT=(0,i.useRef)(et);eT.current=et;let eF=(0,i.useCallback)((e,t)=>{ex.current&&D(e=>new Set(e).add(ex.current.key)),eT.current(e,t)},[]),eL=(0,i.useCallback)(()=>{if(K){if(D(e=>{let t=new Set(e);return t.delete(K.key),t}),\"side\"===e){let e=ek(K.key);if(e)return void ea(K.key,e)}if(\"front\"===e&&P.current){let e=P.current[K.key];if(e)return void ea(K.key,e)}ei()}},[K,e,ek,ea,ei]),eE=(0,i.useCallback)((e,t)=>{eF(e,t)},[eF]),eN=(0,i.useCallback)(e=>{eF(\"left\"===e?-1:+(\"right\"===e),\"up\"===e?-1:+(\"down\"===e))},[eF]),eC=(0,i.useCallback)(()=>{let e=(k.indexOf(V)+1)%k.length;en(k[e])},[V,en]),ev=(0,i.useCallback)(async()=>{if(\"editing\"===Q)ed();else{O(!0);try{if(\"side\"===e){let e=H||a,t=new Image;t.crossOrigin=\"anonymous\",await new Promise((i,a)=>{t.onload=()=>i(),t.onerror=a,t.src=e});let i=t.naturalWidth||t.width,o=t.naturalHeight||t.height,r={};Object.entries(q).forEach(([e,t])=>{r[e]={x:t.x*i,y:t.y*o}});let n=await (0,d.standardizeToFrankfortPlane)(t,r);if(n){let e={};Object.entries(n.transformedLandmarks).forEach(([t,i])=>{e[t]={x:i.x/n.width,y:i.y/n.height}}),L(e,n.standardizedImageDataUrl)}else L(q,e)}else L(q)}finally{O(!1)}}},[Q,ed,L,q,e,H,a]),eM=(0,i.useCallback)(()=>{es()},[es]),eB=(0,i.useMemo)(()=>\"side\"===e&&!!(q.orbitale&&q.porion),[e,q]),ej=\"side\"===e&&H?H:a;return A?(0,t.jsx)(\"div\",{className:\"flex items-center justify-center h-full\",children:(0,t.jsxs)(\"div\",{className:\"text-center\",children:[(0,t.jsx)(\"div\",{className:\"w-10 h-10 border-4 border-gray-200 border-t-gray-900 rounded-full animate-spin mx-auto mb-3\"}),(0,t.jsx)(\"p\",{className:\"text-sm text-gray-600\",children:\"Detecting landmarks...\"})]})}):\"review\"===Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ReviewMode,{imageUrl:ej,landmarks:q,profileType:e,isSubmitting:I,onEditLandmark:eh,onBack:eM,onConfirm:ev}),(0,t.jsx)(w,{isOpen:S,onClose:()=>R(!1)})]}):(0,t.jsxs)(\"div\",{className:\"flex flex-col md:flex-row h-[100dvh] md:h-full gap-2 md:gap-4 p-2 md:p-4 overflow-hidden\",children:[(0,t.jsxs)(\"div\",{className:\"w-full md:w-80 flex-shrink-0 flex flex-col gap-2 md:gap-4 md:order-2 md:overflow-y-auto md:max-h-full\",children:[(0,t.jsx)(f.LandmarkCard,{landmark:K,currentIndex:X,totalCount:Z.length,isPlaced:ef,onUndo:eL,showArrows:J,onToggleArrows:()=>_(e=>{let t=!e;return localStorage.setItem(\"landmarking-show-dial-arrows\",String(t)),t})}),(0,t.jsx)(m.DesktopControls,{zoom:V,isFirstLandmark:eu,isLastLandmark:em,hasVisitedReview:Y,showReturnToFront:\"side\"===e,profileType:e,isEditing:\"editing\"===Q,onMove:eE,onReset:eL,onSetZoom:en,onPrevious:er,onNext:eo,onConfirm:em&&ep?el:void 0,onConfirmEdit:\"editing\"===Q?ed:void 0,onReturnToFront:N}),\"front\"===e&&E&&(0,t.jsx)(\"button\",{onClick:E,className:\"hidden md:block w-full py-2.5 text-sm text-gray-600 font-medium bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Back to Photos\"}),\"side\"===e&&N&&(0,t.jsx)(\"button\",{onClick:N,className:\"hidden md:block w-full py-2.5 text-sm text-gray-600 font-medium bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Back to Front\"})]}),(0,t.jsxs)(\"div\",{className:\"flex-1 min-h-0 relative md:order-1\",children:[(0,t.jsx)(c.LandmarkCanvas,{imageUrl:ej,landmarks:q,currentLandmark:K,currentIndex:X,landmarkList:Z,mode:Q,zoom:V,profileType:e,onPlaceLandmark:eb,onEditLandmark:eh,onZoomChange:en,onDraggingChange:W}),(0,t.jsx)(\"div\",{className:\"md:hidden\",children:(0,t.jsx)(p.MobileDial,{zoom:V,isFirstLandmark:eu,isLastLandmark:em,hasVisitedReview:Y,showReturnToFront:\"side\"===e,profileType:e,isDragging:$,isEditing:\"editing\"===Q,showArrows:J,onMove:eN,onReset:eL,onZoomCycle:eC,onPrevious:er,onNext:eo,onConfirm:em&&ep?el:void 0,onConfirmEdit:\"editing\"===Q?ed:void 0,onReturnToFront:N})}),eB&&(0,t.jsxs)(\"button\",{onClick:()=>R(!0),className:\"absolute top-4 right-4 flex items-center gap-2 px-3 py-2 bg-white/90 border border-gray-200 rounded-lg text-xs text-gray-600 hover:bg-white transition-colors\",children:[(0,t.jsx)(y.Info,{size:14}),\"Frankfort Plane\"]}),(0,t.jsxs)(\"a\",{href:\"https://discord.gg/vmqgmrry8q\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"absolute bottom-4 left-4 flex items-center gap-1.5 px-2 py-1 bg-black/50 backdrop-blur-sm rounded-full text-[10px] text-white/80 hover:text-white hover:bg-black/60 transition-colors\",children:[(0,t.jsx)(\"span\",{className:\"px-1.5 py-0.5 bg-amber-500/90 rounded text-[9px] font-medium text-black\",children:\"BETA\"}),(0,t.jsx)(\"span\",{children:\"Report bugs on Discord\"})]})]}),(0,t.jsx)(w,{isOpen:S,onClose:()=>R(!1)})]})}function T(e){let t={};for(let[i,a]of Object.entries(e))t[i]={x:Math.round(1024*a.x),y:Math.round(1024*a.y)};return t}function F(){let e=(0,a.useRouter)(),r=(0,a.useSearchParams)(),n=\"true\"===r.get(\"frontOnly\"),l=\"true\"===r.get(\"addSide\"),s=r.get(\"analysisId\"),h=r.get(\"direction\"),{getFrontPhoto:d,getSidePhoto:c,getGender:f,getRace:p,getSideDirection:m,saveFrontLandmarks:u,saveSideLandmarks:g,getFrontLandmarks:w,getSideLandmarks:y}=(0,o.useAnalysis)(),[k,b]=(0,i.useState)(l?\"side\":\"front\"),[F,L]=(0,i.useState)(null),[E,N]=(0,i.useState)(!1),C=d(),v=c(),M=f(),B=p(),j=m(),P=w(),S=y();(0,i.useEffect)(()=>{l?v?.original||e.replace(`/facial-analysis?mode=addSide&analysisId=${s}`):C?.processed||e.replace(\"/facial-analysis\")},[C,v,e,l,s]);let R=(0,i.useCallback)(async(t,i)=>{if(u(t),n||!v?.original){b(\"submitting\");try{let i=await fetch(\"/api/faces\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({frontPhotoUrl:C?.processed,frontLandmarks:T(t),gender:M,race:B})});if(!i.ok)throw Error(\"Failed to create analysis\");let a=await i.json();e.push(`/dashboard/${a.face.id}?new=true`)}catch(e){L(e instanceof Error?e.message:\"Failed to submit analysis\"),b(\"front\")}}else b(\"side\")},[n,v,C,u,M,B,e]),I=(0,i.useCallback)(async(t,i)=>{g(t),b(\"submitting\");let a=i||v?.original;try{if(l&&s){if(!(await fetch(`/api/faces/${s}`,{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({sidePhotoUrl:a,sideLandmarks:T(t)})})).ok)throw Error(\"Failed to update analysis\");e.push(`/dashboard/${s}`)}else{let i=w(),o=await fetch(\"/api/faces\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({frontPhotoUrl:C?.processed,sidePhotoUrl:a,frontLandmarks:i?T(i):null,sideLandmarks:T(t),gender:M,race:B})});if(!o.ok)throw Error(\"Failed to create analysis\");let r=await o.json();e.push(`/dashboard/${r.face.id}?new=true`)}}catch(e){L(e instanceof Error?e.message:\"Failed to submit analysis\"),b(\"side\")}},[C,v,g,w,M,B,e,l,s]),O=(0,i.useCallback)(()=>{b(\"front\"),N(!1)},[]),A=(0,i.useCallback)(()=>{b(\"front\"),N(!0)},[]);if(l){if(!v?.original)return null}else if(!C?.processed)return null;return\"submitting\"===k?(0,t.jsx)(\"div\",{className:\"fixed inset-0 flex items-center justify-center bg-white\",children:(0,t.jsxs)(\"div\",{className:\"text-center\",children:[(0,t.jsx)(\"div\",{className:\"w-12 h-12 border-4 border-gray-200 border-t-gray-900 rounded-full animate-spin mx-auto mb-4\"}),(0,t.jsx)(\"p\",{className:\"text-gray-600\",children:\"Analyzing your face...\"})]})}):F?(0,t.jsx)(\"div\",{className:\"fixed inset-0 flex items-center justify-center bg-white\",children:(0,t.jsxs)(\"div\",{className:\"text-center max-w-md p-6\",children:[(0,t.jsx)(\"div\",{className:\"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:(0,t.jsx)(\"svg\",{className:\"w-6 h-6 text-red-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:(0,t.jsx)(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})}),(0,t.jsx)(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Something went wrong\"}),(0,t.jsx)(\"p\",{className:\"text-gray-600 mb-4\",children:F}),(0,t.jsx)(\"button\",{onClick:()=>L(null),className:\"px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\",children:\"Try Again\"})]})}):(0,t.jsxs)(\"div\",{className:\"fixed inset-0 bg-white\",children:[\"front\"===k&&C?.processed&&(0,t.jsx)(x,{profileType:\"front\",imageUrl:C.processed,gender:M||\"male\",ethnicity:B?.split(\",\")[0]||null,initialLandmarks:P||void 0,initialReviewMode:E,onComplete:R,onBack:()=>e.push(\"/facial-analysis\")}),\"side\"===k&&v?.original&&(0,t.jsx)(x,{profileType:\"side\",imageUrl:v.original,gender:M||\"male\",ethnicity:B?.split(\",\")[0]||null,sideDirection:j||h,initialLandmarks:S||void 0,onComplete:I,onBack:l&&s?()=>e.push(`/facial-analysis?mode=addSide&analysisId=${s}`):O,onReturnToFrontReview:l?void 0:A})]})}e.s([\"default\",()=>F],922524)},826368,e=>{e.v(t=>Promise.all([\"static/chunks/72b6e4a245580a73.js\"].map(t=>e.l(t))).then(()=>t(57166)))}]);","numLines":1,"startLine":1,"totalLines":1}}}
{"parentUuid":"4e894aed-a073-4022-937f-970ac82679cf","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_01SChTVqMjoAp4c6i5sSb8fA","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me read the FaceIQ harmony_data.json to find their specific landmark definitions and compare with LOOKSMAXX's landmark.ts file:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7659,"cache_creation_input_tokens":24782,"cache_read_input_tokens":32426,"cache_creation":{"ephemeral_5m_input_tokens":24782,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfgkmXQbdtD4gT6wUUf","type":"assistant","uuid":"3ac541b2-b63e-4a27-92dc-e450442fd23f","timestamp":"2025-12-26T17:09:20.022Z"}
{"parentUuid":"3ac541b2-b63e-4a27-92dc-e450442fd23f","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_01SChTVqMjoAp4c6i5sSb8fA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011R7jxGKMBAgVQsjyVT4vrQ","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/harmony_data.json","limit":200}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7659,"cache_creation_input_tokens":24782,"cache_read_input_tokens":32426,"cache_creation":{"ephemeral_5m_input_tokens":24782,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfgkmXQbdtD4gT6wUUf","type":"assistant","uuid":"e0458230-de3f-4c14-a8ec-069a8d24665a","timestamp":"2025-12-26T17:09:21.055Z"}
{"parentUuid":"e0458230-de3f-4c14-a8ec-069a8d24665a","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_01SChTVqMjoAp4c6i5sSb8fA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013fos16J5yoTohqX3SdkS4J","name":"Read","input":{"file_path":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarks.ts"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7659,"cache_creation_input_tokens":24782,"cache_read_input_tokens":32426,"cache_creation":{"ephemeral_5m_input_tokens":24782,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfgkmXQbdtD4gT6wUUf","type":"assistant","uuid":"69353b11-4854-4b9c-8632-4bd6b8f3a376","timestamp":"2025-12-26T17:09:21.654Z"}
{"parentUuid":"69353b11-4854-4b9c-8632-4bd6b8f3a376","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011R7jxGKMBAgVQsjyVT4vrQ","type":"tool_result","content":"     1{\n     2  \"standardizedScore\": 4.99,\n     3  \"front\": {\n     4    \"standardizedScore\": 4.03,\n     5    \"ratios\": [\n     6      {\n     7        \"name\": \"Face Width to Height Ratio\",\n     8        \"value\": 1.6,\n     9        \"score\": 0.3823,\n    10        \"standardizedScore\": 0.3823,\n    11        \"unit\": \"x\",\n    12        \"idealMin\": 1.96,\n    13        \"idealMax\": 2,\n    14        \"rangeMin\": 1.4,\n    15        \"rangeMax\": 2.5,\n    16        \"illustration\": {\n    17          \"points\": {\n    18            \"leftCheek\": {\n    19              \"type\": \"landmark\"\n    20            },\n    21            \"rightCheek\": {\n    22              \"type\": \"landmark\"\n    23            },\n    24            \"browRidgeMid\": {\n    25              \"type\": \"calculated\",\n    26              \"x\": 506.25,\n    27              \"y\": 461\n    28            },\n    29            \"cupidsBow\": {\n    30              \"type\": \"calculated\",\n    31              \"x\": 506.25,\n    32              \"y\": 741\n    33            }\n    34          },\n    35          \"lines\": [\n    36            {\n    37              \"from\": \"browRidgeMid\",\n    38              \"to\": \"cupidsBow\",\n    39              \"label\": \"\",\n    40              \"color\": \"#ffffff\"\n    41            },\n    42            {\n    43              \"from\": \"leftCheek\",\n    44              \"to\": \"rightCheek\",\n    45              \"label\": \"1.60x\",\n    46              \"color\": \"#67e8f9\",\n    47              \"labelPosition\": \"top\"\n    48            }\n    49          ]\n    50        },\n    51        \"hidden\": \"$undefined\",\n    52        \"description\": \"Facial Width-to-Height Ratio evaluates midface compactness by comparing its width to height, influenced by brow position, philtrum length, and lip fullness. Balanced proportions suit most faces; higher ratios (shorter midfaces) are preferred for males, while ethnic and structural variations in width affect overall harmony.\",\n    53        \"aiDescription\": \"$undefined\",\n    54        \"mayIndicateFlaws\": [\n    55          {\n    56            \"category\": \"Midface/Face Shape\",\n    57            \"flawName\": \"Long midface\",\n    58            \"confidence\": \"confirmed\",\n    59            \"actualValue\": \"1.60x\",\n    60            \"idealRange\": \"1.96-2x\",\n    61            \"deviation\": \"0.36x below ideal\",\n    62            \"score\": 0.38233658885093114,\n    63            \"severity\": \"extremely severe\",\n    64            \"reasoning\": \"A reduced face width to height ratio indicates an overly long midface relative to its height. This disrupts facial harmony by overemphasizing the middle of the face.\",\n    65            \"isUnlocked\": true\n    66          },\n    67          {\n    68            \"category\": \"Midface/Face Shape\",\n    69            \"flawName\": \"Long nose\",\n    70            \"confidence\": \"confirmed\",\n    71            \"actualValue\": \"1.60x\",\n    72            \"idealRange\": \"1.96-2x\",\n    73            \"deviation\": \"0.36x below ideal\",\n    74            \"score\": 0.38233658885093114,\n    75            \"severity\": \"extremely severe\",\n    76            \"reasoning\": \"A reduced face width to height ratio indicates an overly long midface relative to its height. This disrupts facial harmony by elongating the midface and drawing attention to the nose.\",\n    77            \"isUnlocked\": true\n    78          }\n    79        ],\n    80        \"mayIndicateStrengths\": [],\n    81        \"maxScore\": 10,\n    82        \"decayRate\": 6.4,\n    83        \"usedLandmarks\": [\n    84          \"cupidsBow\",\n    85          \"leftBrowHead\",\n    86          \"leftBrowInnerCorner\",\n    87          \"leftCheek\",\n    88          \"rightBrowHead\",\n    89          \"rightBrowInnerCorner\",\n    90          \"rightCheek\"\n    91        ],\n    92        \"curveConfig\": {\n    93          \"idealMin\": 6.33,\n    94          \"idealMax\": 5.98,\n    95          \"maxScore\": 10,\n    96          \"chartRange\": {\n    97            \"min\": 1.4,\n    98            \"max\": 2.5\n    99          },\n   100          \"mode\": \"custom\",\n   101          \"customPoints\": [\n   102            {\n   103              \"x\": 1.49,\n   104              \"y\": 0,\n   105              \"leftHandleX\": 1.4360900758273298,\n   106              \"leftHandleY\": 0,\n   107              \"rightHandleX\": 1.5460900758273297,\n   108              \"rightHandleY\": 0,\n   109              \"fixed\": false\n   110            },\n   111            {\n   112              \"x\": 1.68,\n   113              \"y\": 1.05,\n   114              \"leftHandleX\": 1.6198883424509711,\n   115              \"leftHandleY\": 0.36,\n   116              \"rightHandleX\": 1.7140443166723918,\n   117              \"rightHandleY\": 1.58,\n   118              \"fixed\": false\n   119            },\n   120            {\n   121              \"x\": 1.77,\n   122              \"y\": 3.07,\n   123              \"leftHandleX\": 1.7442929853102274,\n   124              \"leftHandleY\": 2.15,\n   125              \"rightHandleX\": 1.7887181425492074,\n   126              \"rightHandleY\": 3.88,\n   127              \"fixed\": false\n   128            },\n   129            {\n   130              \"x\": 1.83,\n   131              \"y\": 5.83,\n   132              \"leftHandleX\": 1.8047155054217867,\n   133              \"leftHandleY\": 4.64,\n   134              \"rightHandleX\": 1.8447089126032352,\n   135              \"rightHandleY\": 6.85,\n   136              \"fixed\": false\n   137            },\n   138            {\n   139              \"x\": 1.89,\n   140              \"y\": 8.7,\n   141              \"leftHandleX\": 1.8811473502574436,\n   142              \"leftHandleY\": 8.3,\n   143              \"rightHandleX\": 1.916697045529842,\n   144              \"rightHandleY\": 9.5,\n   145              \"fixed\": false\n   146            },\n   147            {\n   148              \"x\": 1.96,\n   149              \"y\": 10,\n   150              \"leftHandleX\": 1.958,\n   151              \"leftHandleY\": 10,\n   152              \"rightHandleX\": 1.962,\n   153              \"rightHandleY\": 10,\n   154              \"fixed\": true\n   155            },\n   156            {\n   157              \"x\": 2,\n   158              \"y\": 10,\n   159              \"leftHandleX\": 1.998,\n   160              \"leftHandleY\": 10,\n   161              \"rightHandleX\": 2.002,\n   162              \"rightHandleY\": 10,\n   163              \"fixed\": false\n   164            },\n   165            {\n   166              \"x\": 2.07,\n   167              \"y\": 8.7,\n   168              \"leftHandleX\": 2.0433029544701578,\n   169              \"leftHandleY\": 9.5,\n   170              \"rightHandleX\": 2.078852649742556,\n   171              \"rightHandleY\": 8.3,\n   172              \"fixed\": false\n   173            },\n   174            {\n   175              \"x\": 2.13,\n   176              \"y\": 5.83,\n   177              \"leftHandleX\": 2.1152910873967645,\n   178              \"leftHandleY\": 6.85,\n   179              \"rightHandleX\": 2.155284494578213,\n   180              \"rightHandleY\": 4.64,\n   181              \"fixed\": false\n   182            },\n   183            {\n   184              \"x\": 2.19,\n   185              \"y\": 3.07,\n   186              \"leftHandleX\": 2.1712818574507926,\n   187              \"leftHandleY\": 3.88,\n   188              \"rightHandleX\": 2.2157070146897726,\n   189              \"rightHandleY\": 2.15,\n   190              \"fixed\": false\n   191            },\n   192            {\n   193              \"x\": 2.28,\n   194              \"y\": 1.05,\n   195              \"leftHandleX\": 2.245955683327608,\n   196              \"leftHandleY\": 1.58,\n   197              \"rightHandleX\": 2.340111657549029,\n   198              \"rightHandleY\": 0.36,\n   199              \"fixed\": false\n   200            },\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"4ff357d7-22f1-4bee-8f43-e0bb1d978418","timestamp":"2025-12-26T17:09:21.670Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/FACEIQPAID/LOGIC/harmony_data.json","content":"{\n  \"standardizedScore\": 4.99,\n  \"front\": {\n    \"standardizedScore\": 4.03,\n    \"ratios\": [\n      {\n        \"name\": \"Face Width to Height Ratio\",\n        \"value\": 1.6,\n        \"score\": 0.3823,\n        \"standardizedScore\": 0.3823,\n        \"unit\": \"x\",\n        \"idealMin\": 1.96,\n        \"idealMax\": 2,\n        \"rangeMin\": 1.4,\n        \"rangeMax\": 2.5,\n        \"illustration\": {\n          \"points\": {\n            \"leftCheek\": {\n              \"type\": \"landmark\"\n            },\n            \"rightCheek\": {\n              \"type\": \"landmark\"\n            },\n            \"browRidgeMid\": {\n              \"type\": \"calculated\",\n              \"x\": 506.25,\n              \"y\": 461\n            },\n            \"cupidsBow\": {\n              \"type\": \"calculated\",\n              \"x\": 506.25,\n              \"y\": 741\n            }\n          },\n          \"lines\": [\n            {\n              \"from\": \"browRidgeMid\",\n              \"to\": \"cupidsBow\",\n              \"label\": \"\",\n              \"color\": \"#ffffff\"\n            },\n            {\n              \"from\": \"leftCheek\",\n              \"to\": \"rightCheek\",\n              \"label\": \"1.60x\",\n              \"color\": \"#67e8f9\",\n              \"labelPosition\": \"top\"\n            }\n          ]\n        },\n        \"hidden\": \"$undefined\",\n        \"description\": \"Facial Width-to-Height Ratio evaluates midface compactness by comparing its width to height, influenced by brow position, philtrum length, and lip fullness. Balanced proportions suit most faces; higher ratios (shorter midfaces) are preferred for males, while ethnic and structural variations in width affect overall harmony.\",\n        \"aiDescription\": \"$undefined\",\n        \"mayIndicateFlaws\": [\n          {\n            \"category\": \"Midface/Face Shape\",\n            \"flawName\": \"Long midface\",\n            \"confidence\": \"confirmed\",\n            \"actualValue\": \"1.60x\",\n            \"idealRange\": \"1.96-2x\",\n            \"deviation\": \"0.36x below ideal\",\n            \"score\": 0.38233658885093114,\n            \"severity\": \"extremely severe\",\n            \"reasoning\": \"A reduced face width to height ratio indicates an overly long midface relative to its height. This disrupts facial harmony by overemphasizing the middle of the face.\",\n            \"isUnlocked\": true\n          },\n          {\n            \"category\": \"Midface/Face Shape\",\n            \"flawName\": \"Long nose\",\n            \"confidence\": \"confirmed\",\n            \"actualValue\": \"1.60x\",\n            \"idealRange\": \"1.96-2x\",\n            \"deviation\": \"0.36x below ideal\",\n            \"score\": 0.38233658885093114,\n            \"severity\": \"extremely severe\",\n            \"reasoning\": \"A reduced face width to height ratio indicates an overly long midface relative to its height. This disrupts facial harmony by elongating the midface and drawing attention to the nose.\",\n            \"isUnlocked\": true\n          }\n        ],\n        \"mayIndicateStrengths\": [],\n        \"maxScore\": 10,\n        \"decayRate\": 6.4,\n        \"usedLandmarks\": [\n          \"cupidsBow\",\n          \"leftBrowHead\",\n          \"leftBrowInnerCorner\",\n          \"leftCheek\",\n          \"rightBrowHead\",\n          \"rightBrowInnerCorner\",\n          \"rightCheek\"\n        ],\n        \"curveConfig\": {\n          \"idealMin\": 6.33,\n          \"idealMax\": 5.98,\n          \"maxScore\": 10,\n          \"chartRange\": {\n            \"min\": 1.4,\n            \"max\": 2.5\n          },\n          \"mode\": \"custom\",\n          \"customPoints\": [\n            {\n              \"x\": 1.49,\n              \"y\": 0,\n              \"leftHandleX\": 1.4360900758273298,\n              \"leftHandleY\": 0,\n              \"rightHandleX\": 1.5460900758273297,\n              \"rightHandleY\": 0,\n              \"fixed\": false\n            },\n            {\n              \"x\": 1.68,\n              \"y\": 1.05,\n              \"leftHandleX\": 1.6198883424509711,\n              \"leftHandleY\": 0.36,\n              \"rightHandleX\": 1.7140443166723918,\n              \"rightHandleY\": 1.58,\n              \"fixed\": false\n            },\n            {\n              \"x\": 1.77,\n              \"y\": 3.07,\n              \"leftHandleX\": 1.7442929853102274,\n              \"leftHandleY\": 2.15,\n              \"rightHandleX\": 1.7887181425492074,\n              \"rightHandleY\": 3.88,\n              \"fixed\": false\n            },\n            {\n              \"x\": 1.83,\n              \"y\": 5.83,\n              \"leftHandleX\": 1.8047155054217867,\n              \"leftHandleY\": 4.64,\n              \"rightHandleX\": 1.8447089126032352,\n              \"rightHandleY\": 6.85,\n              \"fixed\": false\n            },\n            {\n              \"x\": 1.89,\n              \"y\": 8.7,\n              \"leftHandleX\": 1.8811473502574436,\n              \"leftHandleY\": 8.3,\n              \"rightHandleX\": 1.916697045529842,\n              \"rightHandleY\": 9.5,\n              \"fixed\": false\n            },\n            {\n              \"x\": 1.96,\n              \"y\": 10,\n              \"leftHandleX\": 1.958,\n              \"leftHandleY\": 10,\n              \"rightHandleX\": 1.962,\n              \"rightHandleY\": 10,\n              \"fixed\": true\n            },\n            {\n              \"x\": 2,\n              \"y\": 10,\n              \"leftHandleX\": 1.998,\n              \"leftHandleY\": 10,\n              \"rightHandleX\": 2.002,\n              \"rightHandleY\": 10,\n              \"fixed\": false\n            },\n            {\n              \"x\": 2.07,\n              \"y\": 8.7,\n              \"leftHandleX\": 2.0433029544701578,\n              \"leftHandleY\": 9.5,\n              \"rightHandleX\": 2.078852649742556,\n              \"rightHandleY\": 8.3,\n              \"fixed\": false\n            },\n            {\n              \"x\": 2.13,\n              \"y\": 5.83,\n              \"leftHandleX\": 2.1152910873967645,\n              \"leftHandleY\": 6.85,\n              \"rightHandleX\": 2.155284494578213,\n              \"rightHandleY\": 4.64,\n              \"fixed\": false\n            },\n            {\n              \"x\": 2.19,\n              \"y\": 3.07,\n              \"leftHandleX\": 2.1712818574507926,\n              \"leftHandleY\": 3.88,\n              \"rightHandleX\": 2.2157070146897726,\n              \"rightHandleY\": 2.15,\n              \"fixed\": false\n            },\n            {\n              \"x\": 2.28,\n              \"y\": 1.05,\n              \"leftHandleX\": 2.245955683327608,\n              \"leftHandleY\": 1.58,\n              \"rightHandleX\": 2.340111657549029,\n              \"rightHandleY\": 0.36,\n              \"fixed\": false\n            },","numLines":200,"startLine":1,"totalLines":23176}}}
{"parentUuid":"4ff357d7-22f1-4bee-8f43-e0bb1d978418","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013fos16J5yoTohqX3SdkS4J","type":"tool_result","content":"     1/**\n     2 * Facial Landmark Types and Default Data\n     3 * Based on TECHNICAL_SPECS.md medical terminology\n     4 */\n     5\n     6export interface LandmarkPoint {\n     7  id: string;\n     8  label: string;\n     9  medicalTerm: string;\n    10  description: string;\n    11  x: number;\n    12  y: number;\n    13  category: string;\n    14}\n    15\n    16export interface LandmarkCategory {\n    17  name: string;\n    18  color: string;\n    19  landmarks: string[];\n    20}\n    21\n    22// ============================================\n    23// FRONT PROFILE LANDMARKS (52 Points)\n    24// ============================================\n    25\n    26export const FRONT_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n    27  {\n    28    name: 'Head',\n    29    color: '#FF6B6B',\n    30    landmarks: ['trichion'],\n    31  },\n    32  {\n    33    name: 'Eyes - Left',\n    34    color: '#4ECDC4',\n    35    landmarks: [\n    36      'left_pupila',\n    37      'left_canthus_medialis',\n    38      'left_canthus_lateralis',\n    39      'left_palpebra_superior',\n    40      'left_palpebra_inferior',\n    41      'left_sulcus_palpebralis_lateralis',\n    42      'left_pretarsal_skin_crease',\n    43    ],\n    44  },\n    45  {\n    46    name: 'Eyes - Right',\n    47    color: '#45B7D1',\n    48    landmarks: [\n    49      'right_pupila',\n    50      'right_canthus_medialis',\n    51      'right_canthus_lateralis',\n    52      'right_palpebra_superior',\n    53      'right_palpebra_inferior',\n    54      'right_sulcus_palpebralis_lateralis',\n    55      'right_pretarsal_skin_crease',\n    56    ],\n    57  },\n    58  {\n    59    name: 'Eyebrows - Left',\n    60    color: '#96CEB4',\n    61    landmarks: [\n    62      'left_supercilium_medialis',\n    63      'left_supercilium_medial_corner',\n    64      'left_supercilium_superior',\n    65      'left_supercilium_apex',\n    66      'left_supercilium_lateralis',\n    67    ],\n    68  },\n    69  {\n    70    name: 'Eyebrows - Right',\n    71    color: '#88D8B0',\n    72    landmarks: [\n    73      'right_supercilium_medialis',\n    74      'right_supercilium_medial_corner',\n    75      'right_supercilium_superior',\n    76      'right_supercilium_apex',\n    77      'right_supercilium_lateralis',\n    78    ],\n    79  },\n    80  {\n    81    name: 'Nose',\n    82    color: '#FFEAA7',\n    83    landmarks: [\n    84      'nasal_base',\n    85      'left_dorsum_nasi',\n    86      'right_dorsum_nasi',\n    87      'left_ala_nasi',\n    88      'right_ala_nasi',\n    89      'subnasale',\n    90    ],\n    91  },\n    92  {\n    93    name: 'Mouth',\n    94    color: '#DDA0DD',\n    95    landmarks: [\n    96      'labrale_superius',\n    97      'cupids_bow',\n    98      'mouth_middle',\n    99      'labrale_inferius',\n   100      'left_cheilion',\n   101      'right_cheilion',\n   102    ],\n   103  },\n   104  {\n   105    name: 'Jaw',\n   106    color: '#F39C12',\n   107    landmarks: [\n   108      'left_gonion_superior',\n   109      'right_gonion_superior',\n   110      'left_gonion_inferior',\n   111      'right_gonion_inferior',\n   112    ],\n   113  },\n   114  {\n   115    name: 'Chin',\n   116    color: '#E74C3C',\n   117    landmarks: ['left_mentum_lateralis', 'right_mentum_lateralis', 'menton'],\n   118  },\n   119  {\n   120    name: 'Face Width',\n   121    color: '#9B59B6',\n   122    landmarks: [\n   123      'left_zygion',\n   124      'right_zygion',\n   125      'left_temporal',\n   126      'right_temporal',\n   127      'left_auricular_lateral',\n   128      'right_auricular_lateral',\n   129    ],\n   130  },\n   131  {\n   132    name: 'Neck',\n   133    color: '#1ABC9C',\n   134    landmarks: ['left_cervical_lateralis', 'right_cervical_lateralis'],\n   135  },\n   136];\n   137\n   138export const FRONT_PROFILE_LANDMARKS: LandmarkPoint[] = [\n   139  // Head/Hair\n   140  {\n   141    id: 'trichion',\n   142    label: 'Hairline',\n   143    medicalTerm: 'Trichion (frontal view)',\n   144    description: 'Anterior hairline at midline',\n   145    x: 0.5,\n   146    y: 0.08,\n   147    category: 'Head',\n   148  },\n   149\n   150  // Eyes - Left\n   151  {\n   152    id: 'left_pupila',\n   153    label: 'Left Pupil',\n   154    medicalTerm: 'Left Pupila',\n   155    description: 'Center of left pupil',\n   156    x: 0.38,\n   157    y: 0.35,\n   158    category: 'Eyes - Left',\n   159  },\n   160  {\n   161    id: 'left_canthus_medialis',\n   162    label: 'Left Medial Canthus',\n   163    medicalTerm: 'Left Canthus Medialis',\n   164    description: 'Inner corner of left eye',\n   165    x: 0.42,\n   166    y: 0.35,\n   167    category: 'Eyes - Left',\n   168  },\n   169  {\n   170    id: 'left_canthus_lateralis',\n   171    label: 'Left Lateral Canthus',\n   172    medicalTerm: 'Left Canthus Lateralis',\n   173    description: 'Outer corner of left eye',\n   174    x: 0.32,\n   175    y: 0.34,\n   176    category: 'Eyes - Left',\n   177  },\n   178  {\n   179    id: 'left_palpebra_superior',\n   180    label: 'Left Upper Eyelid',\n   181    medicalTerm: 'Left Palpebra Superior',\n   182    description: 'Upper eyelid of left eye',\n   183    x: 0.37,\n   184    y: 0.33,\n   185    category: 'Eyes - Left',\n   186  },\n   187  {\n   188    id: 'left_palpebra_inferior',\n   189    label: 'Left Lower Eyelid',\n   190    medicalTerm: 'Left Palpebra Inferior',\n   191    description: 'Lower eyelid of left eye',\n   192    x: 0.37,\n   193    y: 0.37,\n   194    category: 'Eyes - Left',\n   195  },\n   196  {\n   197    id: 'left_sulcus_palpebralis_lateralis',\n   198    label: 'Left Eyelid Hood End',\n   199    medicalTerm: 'Left Sulcus Palpebralis Lateralis',\n   200    description: 'Lateral end of left upper eyelid crease',\n   201    x: 0.31,\n   202    y: 0.33,\n   203    category: 'Eyes - Left',\n   204  },\n   205  {\n   206    id: 'left_pretarsal_skin_crease',\n   207    label: 'Left Upper Eyelid Crease',\n   208    medicalTerm: 'Left Pretarsal Skin Crease',\n   209    description: 'Left upper eyelid crease',\n   210    x: 0.37,\n   211    y: 0.32,\n   212    category: 'Eyes - Left',\n   213  },\n   214\n   215  // Eyes - Right\n   216  {\n   217    id: 'right_pupila',\n   218    label: 'Right Pupil',\n   219    medicalTerm: 'Right Pupila',\n   220    description: 'Center of right pupil',\n   221    x: 0.62,\n   222    y: 0.35,\n   223    category: 'Eyes - Right',\n   224  },\n   225  {\n   226    id: 'right_canthus_medialis',\n   227    label: 'Right Medial Canthus',\n   228    medicalTerm: 'Right Canthus Medialis',\n   229    description: 'Inner corner of right eye',\n   230    x: 0.58,\n   231    y: 0.35,\n   232    category: 'Eyes - Right',\n   233  },\n   234  {\n   235    id: 'right_canthus_lateralis',\n   236    label: 'Right Lateral Canthus',\n   237    medicalTerm: 'Right Canthus Lateralis',\n   238    description: 'Outer corner of right eye',\n   239    x: 0.68,\n   240    y: 0.34,\n   241    category: 'Eyes - Right',\n   242  },\n   243  {\n   244    id: 'right_palpebra_superior',\n   245    label: 'Right Upper Eyelid',\n   246    medicalTerm: 'Right Palpebra Superior',\n   247    description: 'Upper eyelid of right eye',\n   248    x: 0.63,\n   249    y: 0.33,\n   250    category: 'Eyes - Right',\n   251  },\n   252  {\n   253    id: 'right_palpebra_inferior',\n   254    label: 'Right Lower Eyelid',\n   255    medicalTerm: 'Right Palpebra Inferior',\n   256    description: 'Lower eyelid of right eye',\n   257    x: 0.63,\n   258    y: 0.37,\n   259    category: 'Eyes - Right',\n   260  },\n   261  {\n   262    id: 'right_sulcus_palpebralis_lateralis',\n   263    label: 'Right Eyelid Hood End',\n   264    medicalTerm: 'Right Sulcus Palpebralis Lateralis',\n   265    description: 'Lateral end of right upper eyelid crease',\n   266    x: 0.69,\n   267    y: 0.33,\n   268    category: 'Eyes - Right',\n   269  },\n   270  {\n   271    id: 'right_pretarsal_skin_crease',\n   272    label: 'Right Upper Eyelid Crease',\n   273    medicalTerm: 'Right Pretarsal Skin Crease',\n   274    description: 'Right upper eyelid crease',\n   275    x: 0.63,\n   276    y: 0.32,\n   277    category: 'Eyes - Right',\n   278  },\n   279\n   280  // Eyebrows - Left\n   281  {\n   282    id: 'left_supercilium_medialis',\n   283    label: 'Left Brow Head',\n   284    medicalTerm: 'Left Supercilium Medialis',\n   285    description: 'Medial start of left eyebrow',\n   286    x: 0.43,\n   287    y: 0.28,\n   288    category: 'Eyebrows - Left',\n   289  },\n   290  {\n   291    id: 'left_supercilium_medial_corner',\n   292    label: 'Left Brow Inner Corner',\n   293    medicalTerm: 'Left Supercilium Medial Corner',\n   294    description: 'Inner corner of left eyebrow',\n   295    x: 0.41,\n   296    y: 0.27,\n   297    category: 'Eyebrows - Left',\n   298  },\n   299  {\n   300    id: 'left_supercilium_superior',\n   301    label: 'Left Brow Arch',\n   302    medicalTerm: 'Left Supercilium Superior',\n   303    description: 'Superior arc of left eyebrow',\n   304    x: 0.36,\n   305    y: 0.26,\n   306    category: 'Eyebrows - Left',\n   307  },\n   308  {\n   309    id: 'left_supercilium_apex',\n   310    label: 'Left Brow Peak',\n   311    medicalTerm: 'Left Supercilium Apex',\n   312    description: 'Highest point of left eyebrow',\n   313    x: 0.34,\n   314    y: 0.26,\n   315    category: 'Eyebrows - Left',\n   316  },\n   317  {\n   318    id: 'left_supercilium_lateralis',\n   319    label: 'Left Brow Tail',\n   320    medicalTerm: 'Left Supercilium Lateralis',\n   321    description: 'Lateral end of left eyebrow',\n   322    x: 0.29,\n   323    y: 0.28,\n   324    category: 'Eyebrows - Left',\n   325  },\n   326\n   327  // Eyebrows - Right\n   328  {\n   329    id: 'right_supercilium_medialis',\n   330    label: 'Right Brow Head',\n   331    medicalTerm: 'Right Supercilium Medialis',\n   332    description: 'Medial start of right eyebrow',\n   333    x: 0.57,\n   334    y: 0.28,\n   335    category: 'Eyebrows - Right',\n   336  },\n   337  {\n   338    id: 'right_supercilium_medial_corner',\n   339    label: 'Right Brow Inner Corner',\n   340    medicalTerm: 'Right Supercilium Medial Corner',\n   341    description: 'Inner corner of right eyebrow',\n   342    x: 0.59,\n   343    y: 0.27,\n   344    category: 'Eyebrows - Right',\n   345  },\n   346  {\n   347    id: 'right_supercilium_superior',\n   348    label: 'Right Brow Arch',\n   349    medicalTerm: 'Right Supercilium Superior',\n   350    description: 'Superior arc of right eyebrow',\n   351    x: 0.64,\n   352    y: 0.26,\n   353    category: 'Eyebrows - Right',\n   354  },\n   355  {\n   356    id: 'right_supercilium_apex',\n   357    label: 'Right Brow Peak',\n   358    medicalTerm: 'Right Supercilium Apex',\n   359    description: 'Highest point of right eyebrow',\n   360    x: 0.66,\n   361    y: 0.26,\n   362    category: 'Eyebrows - Right',\n   363  },\n   364  {\n   365    id: 'right_supercilium_lateralis',\n   366    label: 'Right Brow Tail',\n   367    medicalTerm: 'Right Supercilium Lateralis',\n   368    description: 'Lateral end of right eyebrow',\n   369    x: 0.71,\n   370    y: 0.28,\n   371    category: 'Eyebrows - Right',\n   372  },\n   373\n   374  // Nose\n   375  {\n   376    id: 'nasal_base',\n   377    label: 'Nasal Base',\n   378    medicalTerm: 'Nasal Base',\n   379    description: 'Base of nasal dorsum',\n   380    x: 0.5,\n   381    y: 0.38,\n   382    category: 'Nose',\n   383  },\n   384  {\n   385    id: 'left_dorsum_nasi',\n   386    label: 'Left Nose Bridge',\n   387    medicalTerm: 'Left Dorsum Nasi',\n   388    description: 'Left side of nasal bridge',\n   389    x: 0.47,\n   390    y: 0.42,\n   391    category: 'Nose',\n   392  },\n   393  {\n   394    id: 'right_dorsum_nasi',\n   395    label: 'Right Nose Bridge',\n   396    medicalTerm: 'Right Dorsum Nasi',\n   397    description: 'Right side of nasal bridge',\n   398    x: 0.53,\n   399    y: 0.42,\n   400    category: 'Nose',\n   401  },\n   402  {\n   403    id: 'left_ala_nasi',\n   404    label: 'Left Nose Side',\n   405    medicalTerm: 'Left Ala Nasi',\n   406    description: 'Lateral aspect of left nasal ala',\n   407    x: 0.44,\n   408    y: 0.5,\n   409    category: 'Nose',\n   410  },\n   411  {\n   412    id: 'right_ala_nasi',\n   413    label: 'Right Nose Side',\n   414    medicalTerm: 'Right Ala Nasi',\n   415    description: 'Lateral aspect of right nasal ala',\n   416    x: 0.56,\n   417    y: 0.5,\n   418    category: 'Nose',\n   419  },\n   420  {\n   421    id: 'subnasale',\n   422    label: 'Nose Bottom',\n   423    medicalTerm: 'Subnasale',\n   424    description: 'Junction of columella and upper lip',\n   425    x: 0.5,\n   426    y: 0.52,\n   427    category: 'Nose',\n   428  },\n   429\n   430  // Mouth\n   431  {\n   432    id: 'labrale_superius',\n   433    label: \"Cupid's Bow\",\n   434    medicalTerm: 'Labrale Superius',\n   435    description: 'Midpoint of upper lip vermilion',\n   436    x: 0.5,\n   437    y: 0.58,\n   438    category: 'Mouth',\n   439  },\n   440  {\n   441    id: 'cupids_bow',\n   442    label: \"Inner Cupid's Bow\",\n   443    medicalTerm: \"Cupid's Bow\",\n   444    description: 'Central peak of upper lip',\n   445    x: 0.5,\n   446    y: 0.57,\n   447    category: 'Mouth',\n   448  },\n   449  {\n   450    id: 'mouth_middle',\n   451    label: 'Mouth Middle',\n   452    medicalTerm: 'Mouth Middle',\n   453    description: 'Center of mouth opening',\n   454    x: 0.5,\n   455    y: 0.62,\n   456    category: 'Mouth',\n   457  },\n   458  {\n   459    id: 'labrale_inferius',\n   460    label: 'Lower Lip Center',\n   461    medicalTerm: 'Labrale Inferius',\n   462    description: 'Midpoint of lower lip vermilion border',\n   463    x: 0.5,\n   464    y: 0.66,\n   465    category: 'Mouth',\n   466  },\n   467  {\n   468    id: 'left_cheilion',\n   469    label: 'Left Mouth Corner',\n   470    medicalTerm: 'Left Cheilion',\n   471    description: 'Left oral commissure',\n   472    x: 0.42,\n   473    y: 0.62,\n   474    category: 'Mouth',\n   475  },\n   476  {\n   477    id: 'right_cheilion',\n   478    label: 'Right Mouth Corner',\n   479    medicalTerm: 'Right Cheilion',\n   480    description: 'Right oral commissure',\n   481    x: 0.58,\n   482    y: 0.62,\n   483    category: 'Mouth',\n   484  },\n   485\n   486  // Jaw\n   487  {\n   488    id: 'left_gonion_superior',\n   489    label: 'Left Upper Jaw Angle',\n   490    medicalTerm: 'Left Gonion Superior',\n   491    description: 'Superior aspect of left mandibular angle',\n   492    x: 0.22,\n   493    y: 0.55,\n   494    category: 'Jaw',\n   495  },\n   496  {\n   497    id: 'right_gonion_superior',\n   498    label: 'Right Upper Jaw Angle',\n   499    medicalTerm: 'Right Gonion Superior',\n   500    description: 'Superior aspect of right mandibular angle',\n   501    x: 0.78,\n   502    y: 0.55,\n   503    category: 'Jaw',\n   504  },\n   505  {\n   506    id: 'left_gonion_inferior',\n   507    label: 'Left Lower Jaw Angle',\n   508    medicalTerm: 'Left Gonion Inferior',\n   509    description: 'Inferior aspect of left mandibular angle',\n   510    x: 0.24,\n   511    y: 0.7,\n   512    category: 'Jaw',\n   513  },\n   514  {\n   515    id: 'right_gonion_inferior',\n   516    label: 'Right Lower Jaw Angle',\n   517    medicalTerm: 'Right Gonion Inferior',\n   518    description: 'Inferior aspect of right mandibular angle',\n   519    x: 0.76,\n   520    y: 0.7,\n   521    category: 'Jaw',\n   522  },\n   523\n   524  // Chin\n   525  {\n   526    id: 'left_mentum_lateralis',\n   527    label: 'Left Chin',\n   528    medicalTerm: 'Left Mentum Lateralis',\n   529    description: 'Left lateral chin',\n   530    x: 0.42,\n   531    y: 0.8,\n   532    category: 'Chin',\n   533  },\n   534  {\n   535    id: 'right_mentum_lateralis',\n   536    label: 'Right Chin',\n   537    medicalTerm: 'Right Mentum Lateralis',\n   538    description: 'Right lateral chin',\n   539    x: 0.58,\n   540    y: 0.8,\n   541    category: 'Chin',\n   542  },\n   543  {\n   544    id: 'menton',\n   545    label: 'Chin Bottom',\n   546    medicalTerm: 'Menton',\n   547    description: 'Lowest point of chin in midline',\n   548    x: 0.5,\n   549    y: 0.88,\n   550    category: 'Chin',\n   551  },\n   552\n   553  // Face Width\n   554  {\n   555    id: 'left_zygion',\n   556    label: 'Left Cheekbone',\n   557    medicalTerm: 'Left Zygion',\n   558    description: 'Most lateral point of left zygomatic arch',\n   559    x: 0.18,\n   560    y: 0.42,\n   561    category: 'Face Width',\n   562  },\n   563  {\n   564    id: 'right_zygion',\n   565    label: 'Right Cheekbone',\n   566    medicalTerm: 'Right Zygion',\n   567    description: 'Most lateral point of right zygomatic arch',\n   568    x: 0.82,\n   569    y: 0.42,\n   570    category: 'Face Width',\n   571  },\n   572  {\n   573    id: 'left_temporal',\n   574    label: 'Left Temple',\n   575    medicalTerm: 'Left Temporal Point',\n   576    description: 'Left temporal region',\n   577    x: 0.2,\n   578    y: 0.3,\n   579    category: 'Face Width',\n   580  },\n   581  {\n   582    id: 'right_temporal',\n   583    label: 'Right Temple',\n   584    medicalTerm: 'Right Temporal Point',\n   585    description: 'Right temporal region',\n   586    x: 0.8,\n   587    y: 0.3,\n   588    category: 'Face Width',\n   589  },\n   590  {\n   591    id: 'left_auricular_lateral',\n   592    label: 'Left Outer Ear',\n   593    medicalTerm: 'Left Auricular Lateral Point',\n   594    description: 'Lateral-most point of left ear',\n   595    x: 0.12,\n   596    y: 0.4,\n   597    category: 'Face Width',\n   598  },\n   599  {\n   600    id: 'right_auricular_lateral',\n   601    label: 'Right Outer Ear',\n   602    medicalTerm: 'Right Auricular Lateral Point',\n   603    description: 'Lateral-most point of right ear',\n   604    x: 0.88,\n   605    y: 0.4,\n   606    category: 'Face Width',\n   607  },\n   608\n   609  // Neck\n   610  {\n   611    id: 'left_cervical_lateralis',\n   612    label: 'Left Neck Point',\n   613    medicalTerm: 'Left Cervical Lateralis',\n   614    description: 'Left cervical point',\n   615    x: 0.35,\n   616    y: 0.95,\n   617    category: 'Neck',\n   618  },\n   619  {\n   620    id: 'right_cervical_lateralis',\n   621    label: 'Right Neck Point',\n   622    medicalTerm: 'Right Cervical Lateralis',\n   623    description: 'Right cervical point',\n   624    x: 0.65,\n   625    y: 0.95,\n   626    category: 'Neck',\n   627  },\n   628];\n   629\n   630// ============================================\n   631// SIDE PROFILE LANDMARKS (28 Points)\n   632// Matches LOOKSMAXX exact naming and order\n   633// ============================================\n   634\n   635export const SIDE_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n   636  {\n   637    name: 'Cranium',\n   638    color: '#FF6B6B',\n   639    landmarks: ['vertex', 'occiput', 'trichion'],\n   640  },\n   641  {\n   642    name: 'Forehead',\n   643    color: '#4ECDC4',\n   644    landmarks: ['glabella'],\n   645  },\n   646  {\n   647    name: 'Eye Region',\n   648    color: '#45B7D1',\n   649    landmarks: ['cornealApex', 'orbitale'],\n   650  },\n   651  {\n   652    name: 'Nose',\n   653    color: '#FFEAA7',\n   654    landmarks: [\n   655      'nasion',\n   656      'rhinion',\n   657      'supratip',\n   658      'pronasale',\n   659      'infratip',\n   660      'columella',\n   661      'subnasale',\n   662      'subalare',\n   663    ],\n   664  },\n   665  {\n   666    name: 'Lips',\n   667    color: '#DDA0DD',\n   668    landmarks: ['labraleSuperius', 'cheilion', 'labraleInferius', 'sublabiale'],\n   669  },\n   670  {\n   671    name: 'Chin',\n   672    color: '#E74C3C',\n   673    landmarks: ['pogonion', 'menton'],\n   674  },\n   675  {\n   676    name: 'Jaw',\n   677    color: '#F39C12',\n   678    landmarks: ['gonionTop', 'gonionBottom'],\n   679  },\n   680  {\n   681    name: 'Cheek',\n   682    color: '#9B59B6',\n   683    landmarks: ['cheekbone'],\n   684  },\n   685  {\n   686    name: 'Ear',\n   687    color: '#3498DB',\n   688    landmarks: ['porion', 'tragus', 'intertragicNotch'],\n   689  },\n   690  {\n   691    name: 'Neck',\n   692    color: '#1ABC9C',\n   693    landmarks: ['cervicalPoint', 'neckPoint'],\n   694  },\n   695];\n   696\n   697// Standard cephalometric order: vertex, occiput, pronasale, neckPoint, porion, orbitale, tragus,\n   698// intertragicNotch, cornealApex, cheekbone, trichion, glabella, nasion, rhinion,\n   699// supratip, infratip, columella, subnasale, subalare, labraleSuperius, cheilion,\n   700// labraleInferius, sublabiale, pogonion, menton, cervicalPoint, gonionTop, gonionBottom\n   701export const SIDE_PROFILE_LANDMARKS: LandmarkPoint[] = [\n   702  // 1. vertex\n   703  {\n   704    id: 'vertex',\n   705    label: 'Top of Head',\n   706    medicalTerm: 'Vertex',\n   707    description: 'Highest point on the head in profile',\n   708    x: 0.45,\n   709    y: 0.02,\n   710    category: 'Cranium',\n   711  },\n   712  // 2. occiput\n   713  {\n   714    id: 'occiput',\n   715    label: 'Occiput',\n   716    medicalTerm: 'External Occipital Region',\n   717    description: 'Back-of-head prominence',\n   718    x: 0.85,\n   719    y: 0.15,\n   720    category: 'Cranium',\n   721  },\n   722  // 3. pronasale\n   723  {\n   724    id: 'pronasale',\n   725    label: 'Nose Tip',\n   726    medicalTerm: 'Pronasale',\n   727    description: 'Most forward point of the nose tip',\n   728    x: 0.18,\n   729    y: 0.48,\n   730    category: 'Nose',\n   731  },\n   732  // 4. neckPoint\n   733  {\n   734    id: 'neckPoint',\n   735    label: 'Neck Point',\n   736    medicalTerm: 'Anterior Cervical Landmark',\n   737    description: 'Lower neck inflection on the front border',\n   738    x: 0.4,\n   739    y: 0.88,\n   740    category: 'Neck',\n   741  },\n   742  // 5. porion\n   743  {\n   744    id: 'porion',\n   745    label: 'Porion',\n   746    medicalTerm: 'Porion (soft tissue)',\n   747    description: 'Upper margin of ear canal opening, used for Frankfort horizontal plane',\n   748    x: 0.75,\n   749    y: 0.35,\n   750    category: 'Ear',\n   751  },\n   752  // 6. orbitale\n   753  {\n   754    id: 'orbitale',\n   755    label: 'Orbitale',\n   756    medicalTerm: 'Orbitale',\n   757    description: 'Lowest point on the orbital rim',\n   758    x: 0.35,\n   759    y: 0.38,\n   760    category: 'Eye Region',\n   761  },\n   762  // 7. tragus\n   763  {\n   764    id: 'tragus',\n   765    label: 'Tragus',\n   766    medicalTerm: 'Tragion (soft tissue)',\n   767    description: 'Cartilage nub in front of the ear canal',\n   768    x: 0.72,\n   769    y: 0.42,\n   770    category: 'Ear',\n   771  },\n   772  // 8. intertragicNotch\n   773  {\n   774    id: 'intertragicNotch',\n   775    label: 'Intertragic Notch',\n   776    medicalTerm: 'Incisura Intertragica',\n   777    description: 'Notch between tragus and antitragus cartilages',\n   778    x: 0.73,\n   779    y: 0.45,\n   780    category: 'Ear',\n   781  },\n   782  // 9. cornealApex\n   783  {\n   784    id: 'cornealApex',\n   785    label: 'Corneal Apex',\n   786    medicalTerm: 'Corneal Apex',\n   787    description: 'Most forward point of the eye (cornea)',\n   788    x: 0.28,\n   789    y: 0.34,\n   790    category: 'Eye Region',\n   791  },\n   792  // 10. cheekbone\n   793  {\n   794    id: 'cheekbone',\n   795    label: 'Cheekbone',\n   796    medicalTerm: 'Zygion (soft-tissue over zygoma)',\n   797    description: 'Zygomatic prominence',\n   798    x: 0.45,\n   799    y: 0.42,\n   800    category: 'Cheek',\n   801  },\n   802  // 11. trichion\n   803  {\n   804    id: 'trichion',\n   805    label: 'Hairline (Profile)',\n   806    medicalTerm: 'Trichion',\n   807    description: 'Forehead hairline point',\n   808    x: 0.35,\n   809    y: 0.1,\n   810    category: 'Cranium',\n   811  },\n   812  // 12. glabella\n   813  {\n   814    id: 'glabella',\n   815    label: 'Glabella',\n   816    medicalTerm: 'Glabella',\n   817    description: 'Mid-forehead point between brows',\n   818    x: 0.32,\n   819    y: 0.28,\n   820    category: 'Forehead',\n   821  },\n   822  // 13. nasion\n   823  {\n   824    id: 'nasion',\n   825    label: 'Nasal Bridge Root',\n   826    medicalTerm: 'Nasion',\n   827    description: 'Nasal root depression',\n   828    x: 0.35,\n   829    y: 0.32,\n   830    category: 'Nose',\n   831  },\n   832  // 14. rhinion\n   833  {\n   834    id: 'rhinion',\n   835    label: 'Rhinion',\n   836    medicalTerm: 'Rhinion',\n   837    description: 'Dorsal point of the nose',\n   838    x: 0.28,\n   839    y: 0.4,\n   840    category: 'Nose',\n   841  },\n   842  // 15. supratip\n   843  {\n   844    id: 'supratip',\n   845    label: 'Supratip',\n   846    medicalTerm: 'Supratip Break',\n   847    description: 'Dorsal point just above the tip',\n   848    x: 0.22,\n   849    y: 0.46,\n   850    category: 'Nose',\n   851  },\n   852  // 16. infratip\n   853  {\n   854    id: 'infratip',\n   855    label: 'Infratip',\n   856    medicalTerm: 'Infratip Lobule',\n   857    description: 'Point between nose tip and columella',\n   858    x: 0.2,\n   859    y: 0.5,\n   860    category: 'Nose',\n   861  },\n   862  // 17. columella\n   863  {\n   864    id: 'columella',\n   865    label: 'Columella',\n   866    medicalTerm: 'Columella Nasi',\n   867    description: 'Inferior border of the nasal septum between nostrils',\n   868    x: 0.24,\n   869    y: 0.52,\n   870    category: 'Nose',\n   871  },\n   872  // 18. subnasale\n   873  {\n   874    id: 'subnasale',\n   875    label: 'Subnasale',\n   876    medicalTerm: 'Subnasale',\n   877    description: 'Where nose base meets upper lip',\n   878    x: 0.3,\n   879    y: 0.54,\n   880    category: 'Nose',\n   881  },\n   882  // 19. subalare\n   883  {\n   884    id: 'subalare',\n   885    label: 'Subalare',\n   886    medicalTerm: 'Subalare',\n   887    description: 'Lowest point of the nostril wing on the visible side',\n   888    x: 0.28,\n   889    y: 0.53,\n   890    category: 'Nose',\n   891  },\n   892  // 20. labraleSuperius\n   893  {\n   894    id: 'labraleSuperius',\n   895    label: 'Upper Lip',\n   896    medicalTerm: 'Labrale Superius',\n   897    description: 'Most forward point of the upper lip vermilion',\n   898    x: 0.28,\n   899    y: 0.58,\n   900    category: 'Lips',\n   901  },\n   902  // 21. cheilion\n   903  {\n   904    id: 'cheilion',\n   905    label: 'Mouth Corner',\n   906    medicalTerm: 'Cheilion',\n   907    description: 'Mouth corner where the lips meet',\n   908    x: 0.35,\n   909    y: 0.62,\n   910    category: 'Lips',\n   911  },\n   912  // 22. labraleInferius\n   913  {\n   914    id: 'labraleInferius',\n   915    label: 'Lower Lip',\n   916    medicalTerm: 'Labrale Inferius',\n   917    description: 'Most forward point of the lower lip vermilion',\n   918    x: 0.3,\n   919    y: 0.66,\n   920    category: 'Lips',\n   921  },\n   922  // 23. sublabiale\n   923  {\n   924    id: 'sublabiale',\n   925    label: 'Labiomental Fold',\n   926    medicalTerm: 'Sublabiale',\n   927    description: 'Deepest point of the crease between lower lip and chin',\n   928    x: 0.32,\n   929    y: 0.7,\n   930    category: 'Lips',\n   931  },\n   932  // 24. pogonion\n   933  {\n   934    id: 'pogonion',\n   935    label: 'Chin Point',\n   936    medicalTerm: 'Pogonion (soft tissue)',\n   937    description: 'Most forward point on the soft-tissue chin',\n   938    x: 0.3,\n   939    y: 0.76,\n   940    category: 'Chin',\n   941  },\n   942  // 25. menton\n   943  {\n   944    id: 'menton',\n   945    label: 'Chin Bottom',\n   946    medicalTerm: 'Menton (soft tissue)',\n   947    description: 'Lowest point on the soft-tissue chin',\n   948    x: 0.35,\n   949    y: 0.82,\n   950    category: 'Chin',\n   951  },\n   952  // 26. cervicalPoint\n   953  {\n   954    id: 'cervicalPoint',\n   955    label: 'Cervical Point',\n   956    medicalTerm: 'Cervicale (soft-tissue reference)',\n   957    description: 'High neck point just under the jaw',\n   958    x: 0.5,\n   959    y: 0.9,\n   960    category: 'Neck',\n   961  },\n   962  // 27. gonionTop\n   963  {\n   964    id: 'gonionTop',\n   965    label: 'Upper Jaw Angle',\n   966    medicalTerm: 'Gonion Superior',\n   967    description: 'Upper angle point of the jaw from side profile',\n   968    x: 0.7,\n   969    y: 0.6,\n   970    category: 'Jaw',\n   971  },\n   972  // 28. gonionBottom\n   973  {\n   974    id: 'gonionBottom',\n   975    label: 'Lower Jaw Angle',\n   976    medicalTerm: 'Gonion Inferior',\n   977    description: 'Lower angle point of the jaw from side profile',\n   978    x: 0.65,\n   979    y: 0.72,\n   980    category: 'Jaw',\n   981  },\n   982];\n   983\n   984// ============================================\n   985// MediaPipe Face Mesh Index Mapping\n   986// ============================================\n   987// NOTE: MEDIAPIPE_FRONT_MAPPING is defined in mediapipeDetection.ts (single source of truth)\n   988// Import from there if needed: import { MEDIAPIPE_FRONT_MAPPING } from './mediapipeDetection';\n   989\n   990// Helper to get category color for a landmark\n   991export function getLandmarkColor(\n   992  landmarkId: string,\n   993  categories: LandmarkCategory[]\n   994): string {\n   995  for (const category of categories) {\n   996    if (category.landmarks.includes(landmarkId)) {\n   997      return category.color;\n   998    }\n   999  }\n  1000  return '#00f3ff'; // Default cyan\n  1001}\n  1002\n  1003// ============================================\n  1004// Side Profile Landmark Indices (106 points)\n  1005// Reverse-engineered from LOOKSMAXX API\n  1006// ============================================\n  1007\n  1008export const SIDE_LANDMARKS = {\n  1009  // Face Contour (0-16) - Jaw/Chin outline\n  1010  MENTON: 0, // Chin bottom (lowest point)\n  1011  POGONION: 2, // Chin prominence\n  1012  GNATHION: 3, // Chin point\n  1013  MANDIBLE_CONTOUR: [2, 3, 4, 5, 6, 7, 8], // Jaw line\n  1014\n  1015  // Posterior Points (1, 9-16) - Ear/Back of head\n  1016  TRAGION: 1, // Ear point\n  1017  EAR_CONTOUR: [9, 10, 11, 12, 13, 14, 15, 16],\n  1018\n  1019  // Forehead/Hairline (17)\n  1020  TRICHION: 17, // Hairline\n  1021\n  1022  // Nose Profile (18-32)\n  1023  NASION: 25, // Bridge of nose (deepest point)\n  1024  PRONASALE: 32, // Nose tip\n  1025  SUBNASALE: 52, // Base of nose\n  1026  COLUMELLA: 53, // Nose columella\n  1027  NOSE_BRIDGE: [25, 26, 27, 28, 29, 30, 31, 32],\n  1028  NOSE_TIP_CONTOUR: [52, 53, 54, 55, 56, 57, 58, 59, 60],\n  1029\n  1030  // Eye Region (33-51)\n  1031  EYE_LATERAL_CANTHUS: 33, // Outer eye corner\n  1032  EYE_MEDIAL_CANTHUS: 35, // Inner eye corner\n  1033  UPPER_EYELID: [37, 38, 39],\n  1034  LOWER_EYELID: [40, 41, 42],\n  1035  PUPIL: 34,\n  1036  BROW_HEAD: 44, // Inner brow\n  1037  BROW_ARCH: 45, // Brow peak\n  1038  BROW_TAIL: 46, // Outer brow\n  1039\n  1040  // Lip Region (52-75)\n  1041  LABRALE_SUPERIUS: 63, // Upper lip top\n  1042  LABRALE_INFERIUS: 66, // Lower lip bottom\n  1043  STOMION: 65, // Lip meeting point\n  1044  UPPER_LIP_CONTOUR: [63, 64, 65],\n  1045  LOWER_LIP_CONTOUR: [66, 67, 68],\n  1046\n  1047  // Additional Profile Points (76-105)\n  1048  GLABELLA: 76, // Between eyebrows\n  1049  SELLION: 77, // Deepest point of nasal bridge\n  1050  SOFT_TISSUE_NASION: 78,\n  1051  ORBITALE: 79, // Lowest point of eye socket\n  1052  GONION: 85, // Jaw angle\n  1053  CONDYLION: 86, // Top of jaw joint\n  1054};\n  1055\n  1056// ============================================\n  1057// Front Face Landmark Indices (MediaPipe 478 points)\n  1058// ============================================\n  1059\n  1060export const FRONT_LANDMARKS = {\n  1061  // Key points from MediaPipe Face Mesh\n  1062  NOSE_TIP: 1,\n  1063  LEFT_EYE_INNER: 133,\n  1064  LEFT_EYE_OUTER: 33,\n  1065  RIGHT_EYE_INNER: 362,\n  1066  RIGHT_EYE_OUTER: 263,\n  1067  LEFT_CHEEK: 234,\n  1068  RIGHT_CHEEK: 454,\n  1069  UPPER_LIP: 13,\n  1070  LOWER_LIP: 14,\n  1071  CHIN: 152,\n  1072  FOREHEAD: 10,\n  1073  LEFT_EAR: 234,\n  1074  RIGHT_EAR: 454,\n  1075  LEFT_BROW_INNER: 107,\n  1076  LEFT_BROW_OUTER: 70,\n  1077  RIGHT_BROW_INNER: 336,\n  1078  RIGHT_BROW_OUTER: 300,\n  1079  NOSE_BRIDGE: 6,\n  1080  LEFT_NOSTRIL: 129,\n  1081  RIGHT_NOSTRIL: 358,\n  1082};\n  1083\n  1084// ============================================\n  1085// Scoring Configuration Types\n  1086// ============================================\n  1087\n  1088export interface ScoringConfig {\n  1089  idealValue: number;\n  1090  standardDeviation: number;\n  1091  minScore: number;\n  1092  maxScore: number;\n  1093  weight: number;\n  1094}\n  1095\n  1096export interface GenderSpecificValues {\n  1097  male: { ideal: number; range: [number, number] };\n  1098  female: { ideal: number; range: [number, number] };\n  1099}\n  1100\n  1101// ============================================\n  1102// Ideal Values (Gender-Specific)\n  1103// ============================================\n  1104\n  1105export const IDEAL_VALUES: Record<string, GenderSpecificValues> = {\n  1106  fwhr: {\n  1107    male: { ideal: 1.9, range: [1.8, 2.1] },\n  1108    female: { ideal: 1.75, range: [1.6, 1.9] },\n  1109  },\n  1110  canthalTilt: {\n  1111    male: { ideal: 4, range: [2, 7] },\n  1112    female: { ideal: 6, range: [4, 10] },\n  1113  },\n  1114  nasolabialAngle: {\n  1115    male: { ideal: 95, range: [90, 100] },\n  1116    female: { ideal: 105, range: [100, 115] },\n  1117  },\n  1118  gonialAngle: {\n  1119    male: { ideal: 125, range: [120, 130] },\n  1120    female: { ideal: 128, range: [125, 135] },\n  1121  },\n  1122  nasalIndex: {\n  1123    male: { ideal: 0.7, range: [0.65, 0.75] },\n  1124    female: { ideal: 0.65, range: [0.6, 0.7] },\n  1125  },\n  1126  lipRatio: {\n  1127    male: { ideal: 0.5, range: [0.4, 0.6] },\n  1128    female: { ideal: 0.5, range: [0.45, 0.55] },\n  1129  },\n  1130  facialConvexity: {\n  1131    male: { ideal: 170, range: [165, 175] },\n  1132    female: { ideal: 168, range: [163, 173] },\n  1133  },\n  1134  chinProjection: {\n  1135    male: { ideal: 0, range: [-3, 3] },\n  1136    female: { ideal: -2, range: [-5, 1] },\n  1137  },\n  1138};\n  1139\n  1140// ============================================\n  1141// Scoring Configurations\n  1142// ============================================\n  1143\n  1144export const SCORING_CONFIGS: Record<string, ScoringConfig> = {\n  1145  fwhr: {\n  1146    idealValue: 1.9,\n  1147    standardDeviation: 0.15,\n  1148    minScore: 0,\n  1149    maxScore: 100,\n  1150    weight: 0.15,\n  1151  },\n  1152  canthalTilt: {\n  1153    idealValue: 6,\n  1154    standardDeviation: 3,\n  1155    minScore: 0,\n  1156    maxScore: 100,\n  1157    weight: 0.1,\n  1158  },\n  1159  facialThirds: {\n  1160    idealValue: 33.33,\n  1161    standardDeviation: 3,\n  1162    minScore: 0,\n  1163    maxScore: 100,\n  1164    weight: 0.1,\n  1165  },\n  1166  nasolabialAngle: {\n  1167    idealValue: 102,\n  1168    standardDeviation: 8,\n  1169    minScore: 0,\n  1170    maxScore: 100,\n  1171    weight: 0.08,\n  1172  },\n  1173  gonialAngle: {\n  1174    idealValue: 125,\n  1175    standardDeviation: 5,\n  1176    minScore: 0,\n  1177    maxScore: 100,\n  1178    weight: 0.08,\n  1179  },\n  1180  overallSymmetry: {\n  1181    idealValue: 100,\n  1182    standardDeviation: 5,\n  1183    minScore: 0,\n  1184    maxScore: 100,\n  1185    weight: 0.15,\n  1186  },\n  1187  goldenRatio: {\n  1188    idealValue: 1.618,\n  1189    standardDeviation: 0.1,\n  1190    minScore: 0,\n  1191    maxScore: 100,\n  1192    weight: 0.12,\n  1193  },\n  1194  nasalIndex: {\n  1195    idealValue: 0.7,\n  1196    standardDeviation: 0.08,\n  1197    minScore: 0,\n  1198    maxScore: 100,\n  1199    weight: 0.06,\n  1200  },\n  1201  lipRatio: {\n  1202    idealValue: 0.5,\n  1203    standardDeviation: 0.1,\n  1204    minScore: 0,\n  1205    maxScore: 100,\n  1206    weight: 0.06,\n  1207  },\n  1208  chinProjection: {\n  1209    idealValue: 0,\n  1210    standardDeviation: 3,\n  1211    minScore: 0,\n  1212    maxScore: 100,\n  1213    weight: 0.05,\n  1214  },\n  1215  noseProjection: {\n  1216    idealValue: 0.67,\n  1217    standardDeviation: 0.05,\n  1218    minScore: 0,\n  1219    maxScore: 100,\n  1220    weight: 0.05,\n  1221  },\n  1222};\n  1223\n  1224// ============================================\n  1225// Population Statistics for Percentile Ranking\n  1226// ============================================\n  1227\n  1228export interface PopulationStats {\n  1229  mean: number;\n  1230  standardDeviation: number;\n  1231  sampleSize: number;\n  1232}\n  1233\n  1234export const POPULATION_STATS: Record<string, PopulationStats> = {\n  1235  harmonyScore: { mean: 65, standardDeviation: 12, sampleSize: 10000 },\n  1236  fwhr: { mean: 1.85, standardDeviation: 0.2, sampleSize: 10000 },\n  1237  canthalTilt: { mean: 4, standardDeviation: 4, sampleSize: 10000 },\n  1238  symmetry: { mean: 85, standardDeviation: 8, sampleSize: 10000 },\n  1239  goldenRatioMatch: { mean: 70, standardDeviation: 15, sampleSize: 10000 },\n  1240};\n  1241\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"da4c399d-14da-4c46-a55d-bdf8963eb9bf","timestamp":"2025-12-26T17:09:21.800Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/imorgado/LOOKSMAXX/looksmaxx-app/src/lib/landmarks.ts","content":"/**\n * Facial Landmark Types and Default Data\n * Based on TECHNICAL_SPECS.md medical terminology\n */\n\nexport interface LandmarkPoint {\n  id: string;\n  label: string;\n  medicalTerm: string;\n  description: string;\n  x: number;\n  y: number;\n  category: string;\n}\n\nexport interface LandmarkCategory {\n  name: string;\n  color: string;\n  landmarks: string[];\n}\n\n// ============================================\n// FRONT PROFILE LANDMARKS (52 Points)\n// ============================================\n\nexport const FRONT_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n  {\n    name: 'Head',\n    color: '#FF6B6B',\n    landmarks: ['trichion'],\n  },\n  {\n    name: 'Eyes - Left',\n    color: '#4ECDC4',\n    landmarks: [\n      'left_pupila',\n      'left_canthus_medialis',\n      'left_canthus_lateralis',\n      'left_palpebra_superior',\n      'left_palpebra_inferior',\n      'left_sulcus_palpebralis_lateralis',\n      'left_pretarsal_skin_crease',\n    ],\n  },\n  {\n    name: 'Eyes - Right',\n    color: '#45B7D1',\n    landmarks: [\n      'right_pupila',\n      'right_canthus_medialis',\n      'right_canthus_lateralis',\n      'right_palpebra_superior',\n      'right_palpebra_inferior',\n      'right_sulcus_palpebralis_lateralis',\n      'right_pretarsal_skin_crease',\n    ],\n  },\n  {\n    name: 'Eyebrows - Left',\n    color: '#96CEB4',\n    landmarks: [\n      'left_supercilium_medialis',\n      'left_supercilium_medial_corner',\n      'left_supercilium_superior',\n      'left_supercilium_apex',\n      'left_supercilium_lateralis',\n    ],\n  },\n  {\n    name: 'Eyebrows - Right',\n    color: '#88D8B0',\n    landmarks: [\n      'right_supercilium_medialis',\n      'right_supercilium_medial_corner',\n      'right_supercilium_superior',\n      'right_supercilium_apex',\n      'right_supercilium_lateralis',\n    ],\n  },\n  {\n    name: 'Nose',\n    color: '#FFEAA7',\n    landmarks: [\n      'nasal_base',\n      'left_dorsum_nasi',\n      'right_dorsum_nasi',\n      'left_ala_nasi',\n      'right_ala_nasi',\n      'subnasale',\n    ],\n  },\n  {\n    name: 'Mouth',\n    color: '#DDA0DD',\n    landmarks: [\n      'labrale_superius',\n      'cupids_bow',\n      'mouth_middle',\n      'labrale_inferius',\n      'left_cheilion',\n      'right_cheilion',\n    ],\n  },\n  {\n    name: 'Jaw',\n    color: '#F39C12',\n    landmarks: [\n      'left_gonion_superior',\n      'right_gonion_superior',\n      'left_gonion_inferior',\n      'right_gonion_inferior',\n    ],\n  },\n  {\n    name: 'Chin',\n    color: '#E74C3C',\n    landmarks: ['left_mentum_lateralis', 'right_mentum_lateralis', 'menton'],\n  },\n  {\n    name: 'Face Width',\n    color: '#9B59B6',\n    landmarks: [\n      'left_zygion',\n      'right_zygion',\n      'left_temporal',\n      'right_temporal',\n      'left_auricular_lateral',\n      'right_auricular_lateral',\n    ],\n  },\n  {\n    name: 'Neck',\n    color: '#1ABC9C',\n    landmarks: ['left_cervical_lateralis', 'right_cervical_lateralis'],\n  },\n];\n\nexport const FRONT_PROFILE_LANDMARKS: LandmarkPoint[] = [\n  // Head/Hair\n  {\n    id: 'trichion',\n    label: 'Hairline',\n    medicalTerm: 'Trichion (frontal view)',\n    description: 'Anterior hairline at midline',\n    x: 0.5,\n    y: 0.08,\n    category: 'Head',\n  },\n\n  // Eyes - Left\n  {\n    id: 'left_pupila',\n    label: 'Left Pupil',\n    medicalTerm: 'Left Pupila',\n    description: 'Center of left pupil',\n    x: 0.38,\n    y: 0.35,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_canthus_medialis',\n    label: 'Left Medial Canthus',\n    medicalTerm: 'Left Canthus Medialis',\n    description: 'Inner corner of left eye',\n    x: 0.42,\n    y: 0.35,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_canthus_lateralis',\n    label: 'Left Lateral Canthus',\n    medicalTerm: 'Left Canthus Lateralis',\n    description: 'Outer corner of left eye',\n    x: 0.32,\n    y: 0.34,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_palpebra_superior',\n    label: 'Left Upper Eyelid',\n    medicalTerm: 'Left Palpebra Superior',\n    description: 'Upper eyelid of left eye',\n    x: 0.37,\n    y: 0.33,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_palpebra_inferior',\n    label: 'Left Lower Eyelid',\n    medicalTerm: 'Left Palpebra Inferior',\n    description: 'Lower eyelid of left eye',\n    x: 0.37,\n    y: 0.37,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_sulcus_palpebralis_lateralis',\n    label: 'Left Eyelid Hood End',\n    medicalTerm: 'Left Sulcus Palpebralis Lateralis',\n    description: 'Lateral end of left upper eyelid crease',\n    x: 0.31,\n    y: 0.33,\n    category: 'Eyes - Left',\n  },\n  {\n    id: 'left_pretarsal_skin_crease',\n    label: 'Left Upper Eyelid Crease',\n    medicalTerm: 'Left Pretarsal Skin Crease',\n    description: 'Left upper eyelid crease',\n    x: 0.37,\n    y: 0.32,\n    category: 'Eyes - Left',\n  },\n\n  // Eyes - Right\n  {\n    id: 'right_pupila',\n    label: 'Right Pupil',\n    medicalTerm: 'Right Pupila',\n    description: 'Center of right pupil',\n    x: 0.62,\n    y: 0.35,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_canthus_medialis',\n    label: 'Right Medial Canthus',\n    medicalTerm: 'Right Canthus Medialis',\n    description: 'Inner corner of right eye',\n    x: 0.58,\n    y: 0.35,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_canthus_lateralis',\n    label: 'Right Lateral Canthus',\n    medicalTerm: 'Right Canthus Lateralis',\n    description: 'Outer corner of right eye',\n    x: 0.68,\n    y: 0.34,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_palpebra_superior',\n    label: 'Right Upper Eyelid',\n    medicalTerm: 'Right Palpebra Superior',\n    description: 'Upper eyelid of right eye',\n    x: 0.63,\n    y: 0.33,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_palpebra_inferior',\n    label: 'Right Lower Eyelid',\n    medicalTerm: 'Right Palpebra Inferior',\n    description: 'Lower eyelid of right eye',\n    x: 0.63,\n    y: 0.37,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_sulcus_palpebralis_lateralis',\n    label: 'Right Eyelid Hood End',\n    medicalTerm: 'Right Sulcus Palpebralis Lateralis',\n    description: 'Lateral end of right upper eyelid crease',\n    x: 0.69,\n    y: 0.33,\n    category: 'Eyes - Right',\n  },\n  {\n    id: 'right_pretarsal_skin_crease',\n    label: 'Right Upper Eyelid Crease',\n    medicalTerm: 'Right Pretarsal Skin Crease',\n    description: 'Right upper eyelid crease',\n    x: 0.63,\n    y: 0.32,\n    category: 'Eyes - Right',\n  },\n\n  // Eyebrows - Left\n  {\n    id: 'left_supercilium_medialis',\n    label: 'Left Brow Head',\n    medicalTerm: 'Left Supercilium Medialis',\n    description: 'Medial start of left eyebrow',\n    x: 0.43,\n    y: 0.28,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_medial_corner',\n    label: 'Left Brow Inner Corner',\n    medicalTerm: 'Left Supercilium Medial Corner',\n    description: 'Inner corner of left eyebrow',\n    x: 0.41,\n    y: 0.27,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_superior',\n    label: 'Left Brow Arch',\n    medicalTerm: 'Left Supercilium Superior',\n    description: 'Superior arc of left eyebrow',\n    x: 0.36,\n    y: 0.26,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_apex',\n    label: 'Left Brow Peak',\n    medicalTerm: 'Left Supercilium Apex',\n    description: 'Highest point of left eyebrow',\n    x: 0.34,\n    y: 0.26,\n    category: 'Eyebrows - Left',\n  },\n  {\n    id: 'left_supercilium_lateralis',\n    label: 'Left Brow Tail',\n    medicalTerm: 'Left Supercilium Lateralis',\n    description: 'Lateral end of left eyebrow',\n    x: 0.29,\n    y: 0.28,\n    category: 'Eyebrows - Left',\n  },\n\n  // Eyebrows - Right\n  {\n    id: 'right_supercilium_medialis',\n    label: 'Right Brow Head',\n    medicalTerm: 'Right Supercilium Medialis',\n    description: 'Medial start of right eyebrow',\n    x: 0.57,\n    y: 0.28,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_medial_corner',\n    label: 'Right Brow Inner Corner',\n    medicalTerm: 'Right Supercilium Medial Corner',\n    description: 'Inner corner of right eyebrow',\n    x: 0.59,\n    y: 0.27,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_superior',\n    label: 'Right Brow Arch',\n    medicalTerm: 'Right Supercilium Superior',\n    description: 'Superior arc of right eyebrow',\n    x: 0.64,\n    y: 0.26,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_apex',\n    label: 'Right Brow Peak',\n    medicalTerm: 'Right Supercilium Apex',\n    description: 'Highest point of right eyebrow',\n    x: 0.66,\n    y: 0.26,\n    category: 'Eyebrows - Right',\n  },\n  {\n    id: 'right_supercilium_lateralis',\n    label: 'Right Brow Tail',\n    medicalTerm: 'Right Supercilium Lateralis',\n    description: 'Lateral end of right eyebrow',\n    x: 0.71,\n    y: 0.28,\n    category: 'Eyebrows - Right',\n  },\n\n  // Nose\n  {\n    id: 'nasal_base',\n    label: 'Nasal Base',\n    medicalTerm: 'Nasal Base',\n    description: 'Base of nasal dorsum',\n    x: 0.5,\n    y: 0.38,\n    category: 'Nose',\n  },\n  {\n    id: 'left_dorsum_nasi',\n    label: 'Left Nose Bridge',\n    medicalTerm: 'Left Dorsum Nasi',\n    description: 'Left side of nasal bridge',\n    x: 0.47,\n    y: 0.42,\n    category: 'Nose',\n  },\n  {\n    id: 'right_dorsum_nasi',\n    label: 'Right Nose Bridge',\n    medicalTerm: 'Right Dorsum Nasi',\n    description: 'Right side of nasal bridge',\n    x: 0.53,\n    y: 0.42,\n    category: 'Nose',\n  },\n  {\n    id: 'left_ala_nasi',\n    label: 'Left Nose Side',\n    medicalTerm: 'Left Ala Nasi',\n    description: 'Lateral aspect of left nasal ala',\n    x: 0.44,\n    y: 0.5,\n    category: 'Nose',\n  },\n  {\n    id: 'right_ala_nasi',\n    label: 'Right Nose Side',\n    medicalTerm: 'Right Ala Nasi',\n    description: 'Lateral aspect of right nasal ala',\n    x: 0.56,\n    y: 0.5,\n    category: 'Nose',\n  },\n  {\n    id: 'subnasale',\n    label: 'Nose Bottom',\n    medicalTerm: 'Subnasale',\n    description: 'Junction of columella and upper lip',\n    x: 0.5,\n    y: 0.52,\n    category: 'Nose',\n  },\n\n  // Mouth\n  {\n    id: 'labrale_superius',\n    label: \"Cupid's Bow\",\n    medicalTerm: 'Labrale Superius',\n    description: 'Midpoint of upper lip vermilion',\n    x: 0.5,\n    y: 0.58,\n    category: 'Mouth',\n  },\n  {\n    id: 'cupids_bow',\n    label: \"Inner Cupid's Bow\",\n    medicalTerm: \"Cupid's Bow\",\n    description: 'Central peak of upper lip',\n    x: 0.5,\n    y: 0.57,\n    category: 'Mouth',\n  },\n  {\n    id: 'mouth_middle',\n    label: 'Mouth Middle',\n    medicalTerm: 'Mouth Middle',\n    description: 'Center of mouth opening',\n    x: 0.5,\n    y: 0.62,\n    category: 'Mouth',\n  },\n  {\n    id: 'labrale_inferius',\n    label: 'Lower Lip Center',\n    medicalTerm: 'Labrale Inferius',\n    description: 'Midpoint of lower lip vermilion border',\n    x: 0.5,\n    y: 0.66,\n    category: 'Mouth',\n  },\n  {\n    id: 'left_cheilion',\n    label: 'Left Mouth Corner',\n    medicalTerm: 'Left Cheilion',\n    description: 'Left oral commissure',\n    x: 0.42,\n    y: 0.62,\n    category: 'Mouth',\n  },\n  {\n    id: 'right_cheilion',\n    label: 'Right Mouth Corner',\n    medicalTerm: 'Right Cheilion',\n    description: 'Right oral commissure',\n    x: 0.58,\n    y: 0.62,\n    category: 'Mouth',\n  },\n\n  // Jaw\n  {\n    id: 'left_gonion_superior',\n    label: 'Left Upper Jaw Angle',\n    medicalTerm: 'Left Gonion Superior',\n    description: 'Superior aspect of left mandibular angle',\n    x: 0.22,\n    y: 0.55,\n    category: 'Jaw',\n  },\n  {\n    id: 'right_gonion_superior',\n    label: 'Right Upper Jaw Angle',\n    medicalTerm: 'Right Gonion Superior',\n    description: 'Superior aspect of right mandibular angle',\n    x: 0.78,\n    y: 0.55,\n    category: 'Jaw',\n  },\n  {\n    id: 'left_gonion_inferior',\n    label: 'Left Lower Jaw Angle',\n    medicalTerm: 'Left Gonion Inferior',\n    description: 'Inferior aspect of left mandibular angle',\n    x: 0.24,\n    y: 0.7,\n    category: 'Jaw',\n  },\n  {\n    id: 'right_gonion_inferior',\n    label: 'Right Lower Jaw Angle',\n    medicalTerm: 'Right Gonion Inferior',\n    description: 'Inferior aspect of right mandibular angle',\n    x: 0.76,\n    y: 0.7,\n    category: 'Jaw',\n  },\n\n  // Chin\n  {\n    id: 'left_mentum_lateralis',\n    label: 'Left Chin',\n    medicalTerm: 'Left Mentum Lateralis',\n    description: 'Left lateral chin',\n    x: 0.42,\n    y: 0.8,\n    category: 'Chin',\n  },\n  {\n    id: 'right_mentum_lateralis',\n    label: 'Right Chin',\n    medicalTerm: 'Right Mentum Lateralis',\n    description: 'Right lateral chin',\n    x: 0.58,\n    y: 0.8,\n    category: 'Chin',\n  },\n  {\n    id: 'menton',\n    label: 'Chin Bottom',\n    medicalTerm: 'Menton',\n    description: 'Lowest point of chin in midline',\n    x: 0.5,\n    y: 0.88,\n    category: 'Chin',\n  },\n\n  // Face Width\n  {\n    id: 'left_zygion',\n    label: 'Left Cheekbone',\n    medicalTerm: 'Left Zygion',\n    description: 'Most lateral point of left zygomatic arch',\n    x: 0.18,\n    y: 0.42,\n    category: 'Face Width',\n  },\n  {\n    id: 'right_zygion',\n    label: 'Right Cheekbone',\n    medicalTerm: 'Right Zygion',\n    description: 'Most lateral point of right zygomatic arch',\n    x: 0.82,\n    y: 0.42,\n    category: 'Face Width',\n  },\n  {\n    id: 'left_temporal',\n    label: 'Left Temple',\n    medicalTerm: 'Left Temporal Point',\n    description: 'Left temporal region',\n    x: 0.2,\n    y: 0.3,\n    category: 'Face Width',\n  },\n  {\n    id: 'right_temporal',\n    label: 'Right Temple',\n    medicalTerm: 'Right Temporal Point',\n    description: 'Right temporal region',\n    x: 0.8,\n    y: 0.3,\n    category: 'Face Width',\n  },\n  {\n    id: 'left_auricular_lateral',\n    label: 'Left Outer Ear',\n    medicalTerm: 'Left Auricular Lateral Point',\n    description: 'Lateral-most point of left ear',\n    x: 0.12,\n    y: 0.4,\n    category: 'Face Width',\n  },\n  {\n    id: 'right_auricular_lateral',\n    label: 'Right Outer Ear',\n    medicalTerm: 'Right Auricular Lateral Point',\n    description: 'Lateral-most point of right ear',\n    x: 0.88,\n    y: 0.4,\n    category: 'Face Width',\n  },\n\n  // Neck\n  {\n    id: 'left_cervical_lateralis',\n    label: 'Left Neck Point',\n    medicalTerm: 'Left Cervical Lateralis',\n    description: 'Left cervical point',\n    x: 0.35,\n    y: 0.95,\n    category: 'Neck',\n  },\n  {\n    id: 'right_cervical_lateralis',\n    label: 'Right Neck Point',\n    medicalTerm: 'Right Cervical Lateralis',\n    description: 'Right cervical point',\n    x: 0.65,\n    y: 0.95,\n    category: 'Neck',\n  },\n];\n\n// ============================================\n// SIDE PROFILE LANDMARKS (28 Points)\n// Matches LOOKSMAXX exact naming and order\n// ============================================\n\nexport const SIDE_LANDMARK_CATEGORIES: LandmarkCategory[] = [\n  {\n    name: 'Cranium',\n    color: '#FF6B6B',\n    landmarks: ['vertex', 'occiput', 'trichion'],\n  },\n  {\n    name: 'Forehead',\n    color: '#4ECDC4',\n    landmarks: ['glabella'],\n  },\n  {\n    name: 'Eye Region',\n    color: '#45B7D1',\n    landmarks: ['cornealApex', 'orbitale'],\n  },\n  {\n    name: 'Nose',\n    color: '#FFEAA7',\n    landmarks: [\n      'nasion',\n      'rhinion',\n      'supratip',\n      'pronasale',\n      'infratip',\n      'columella',\n      'subnasale',\n      'subalare',\n    ],\n  },\n  {\n    name: 'Lips',\n    color: '#DDA0DD',\n    landmarks: ['labraleSuperius', 'cheilion', 'labraleInferius', 'sublabiale'],\n  },\n  {\n    name: 'Chin',\n    color: '#E74C3C',\n    landmarks: ['pogonion', 'menton'],\n  },\n  {\n    name: 'Jaw',\n    color: '#F39C12',\n    landmarks: ['gonionTop', 'gonionBottom'],\n  },\n  {\n    name: 'Cheek',\n    color: '#9B59B6',\n    landmarks: ['cheekbone'],\n  },\n  {\n    name: 'Ear',\n    color: '#3498DB',\n    landmarks: ['porion', 'tragus', 'intertragicNotch'],\n  },\n  {\n    name: 'Neck',\n    color: '#1ABC9C',\n    landmarks: ['cervicalPoint', 'neckPoint'],\n  },\n];\n\n// Standard cephalometric order: vertex, occiput, pronasale, neckPoint, porion, orbitale, tragus,\n// intertragicNotch, cornealApex, cheekbone, trichion, glabella, nasion, rhinion,\n// supratip, infratip, columella, subnasale, subalare, labraleSuperius, cheilion,\n// labraleInferius, sublabiale, pogonion, menton, cervicalPoint, gonionTop, gonionBottom\nexport const SIDE_PROFILE_LANDMARKS: LandmarkPoint[] = [\n  // 1. vertex\n  {\n    id: 'vertex',\n    label: 'Top of Head',\n    medicalTerm: 'Vertex',\n    description: 'Highest point on the head in profile',\n    x: 0.45,\n    y: 0.02,\n    category: 'Cranium',\n  },\n  // 2. occiput\n  {\n    id: 'occiput',\n    label: 'Occiput',\n    medicalTerm: 'External Occipital Region',\n    description: 'Back-of-head prominence',\n    x: 0.85,\n    y: 0.15,\n    category: 'Cranium',\n  },\n  // 3. pronasale\n  {\n    id: 'pronasale',\n    label: 'Nose Tip',\n    medicalTerm: 'Pronasale',\n    description: 'Most forward point of the nose tip',\n    x: 0.18,\n    y: 0.48,\n    category: 'Nose',\n  },\n  // 4. neckPoint\n  {\n    id: 'neckPoint',\n    label: 'Neck Point',\n    medicalTerm: 'Anterior Cervical Landmark',\n    description: 'Lower neck inflection on the front border',\n    x: 0.4,\n    y: 0.88,\n    category: 'Neck',\n  },\n  // 5. porion\n  {\n    id: 'porion',\n    label: 'Porion',\n    medicalTerm: 'Porion (soft tissue)',\n    description: 'Upper margin of ear canal opening, used for Frankfort horizontal plane',\n    x: 0.75,\n    y: 0.35,\n    category: 'Ear',\n  },\n  // 6. orbitale\n  {\n    id: 'orbitale',\n    label: 'Orbitale',\n    medicalTerm: 'Orbitale',\n    description: 'Lowest point on the orbital rim',\n    x: 0.35,\n    y: 0.38,\n    category: 'Eye Region',\n  },\n  // 7. tragus\n  {\n    id: 'tragus',\n    label: 'Tragus',\n    medicalTerm: 'Tragion (soft tissue)',\n    description: 'Cartilage nub in front of the ear canal',\n    x: 0.72,\n    y: 0.42,\n    category: 'Ear',\n  },\n  // 8. intertragicNotch\n  {\n    id: 'intertragicNotch',\n    label: 'Intertragic Notch',\n    medicalTerm: 'Incisura Intertragica',\n    description: 'Notch between tragus and antitragus cartilages',\n    x: 0.73,\n    y: 0.45,\n    category: 'Ear',\n  },\n  // 9. cornealApex\n  {\n    id: 'cornealApex',\n    label: 'Corneal Apex',\n    medicalTerm: 'Corneal Apex',\n    description: 'Most forward point of the eye (cornea)',\n    x: 0.28,\n    y: 0.34,\n    category: 'Eye Region',\n  },\n  // 10. cheekbone\n  {\n    id: 'cheekbone',\n    label: 'Cheekbone',\n    medicalTerm: 'Zygion (soft-tissue over zygoma)',\n    description: 'Zygomatic prominence',\n    x: 0.45,\n    y: 0.42,\n    category: 'Cheek',\n  },\n  // 11. trichion\n  {\n    id: 'trichion',\n    label: 'Hairline (Profile)',\n    medicalTerm: 'Trichion',\n    description: 'Forehead hairline point',\n    x: 0.35,\n    y: 0.1,\n    category: 'Cranium',\n  },\n  // 12. glabella\n  {\n    id: 'glabella',\n    label: 'Glabella',\n    medicalTerm: 'Glabella',\n    description: 'Mid-forehead point between brows',\n    x: 0.32,\n    y: 0.28,\n    category: 'Forehead',\n  },\n  // 13. nasion\n  {\n    id: 'nasion',\n    label: 'Nasal Bridge Root',\n    medicalTerm: 'Nasion',\n    description: 'Nasal root depression',\n    x: 0.35,\n    y: 0.32,\n    category: 'Nose',\n  },\n  // 14. rhinion\n  {\n    id: 'rhinion',\n    label: 'Rhinion',\n    medicalTerm: 'Rhinion',\n    description: 'Dorsal point of the nose',\n    x: 0.28,\n    y: 0.4,\n    category: 'Nose',\n  },\n  // 15. supratip\n  {\n    id: 'supratip',\n    label: 'Supratip',\n    medicalTerm: 'Supratip Break',\n    description: 'Dorsal point just above the tip',\n    x: 0.22,\n    y: 0.46,\n    category: 'Nose',\n  },\n  // 16. infratip\n  {\n    id: 'infratip',\n    label: 'Infratip',\n    medicalTerm: 'Infratip Lobule',\n    description: 'Point between nose tip and columella',\n    x: 0.2,\n    y: 0.5,\n    category: 'Nose',\n  },\n  // 17. columella\n  {\n    id: 'columella',\n    label: 'Columella',\n    medicalTerm: 'Columella Nasi',\n    description: 'Inferior border of the nasal septum between nostrils',\n    x: 0.24,\n    y: 0.52,\n    category: 'Nose',\n  },\n  // 18. subnasale\n  {\n    id: 'subnasale',\n    label: 'Subnasale',\n    medicalTerm: 'Subnasale',\n    description: 'Where nose base meets upper lip',\n    x: 0.3,\n    y: 0.54,\n    category: 'Nose',\n  },\n  // 19. subalare\n  {\n    id: 'subalare',\n    label: 'Subalare',\n    medicalTerm: 'Subalare',\n    description: 'Lowest point of the nostril wing on the visible side',\n    x: 0.28,\n    y: 0.53,\n    category: 'Nose',\n  },\n  // 20. labraleSuperius\n  {\n    id: 'labraleSuperius',\n    label: 'Upper Lip',\n    medicalTerm: 'Labrale Superius',\n    description: 'Most forward point of the upper lip vermilion',\n    x: 0.28,\n    y: 0.58,\n    category: 'Lips',\n  },\n  // 21. cheilion\n  {\n    id: 'cheilion',\n    label: 'Mouth Corner',\n    medicalTerm: 'Cheilion',\n    description: 'Mouth corner where the lips meet',\n    x: 0.35,\n    y: 0.62,\n    category: 'Lips',\n  },\n  // 22. labraleInferius\n  {\n    id: 'labraleInferius',\n    label: 'Lower Lip',\n    medicalTerm: 'Labrale Inferius',\n    description: 'Most forward point of the lower lip vermilion',\n    x: 0.3,\n    y: 0.66,\n    category: 'Lips',\n  },\n  // 23. sublabiale\n  {\n    id: 'sublabiale',\n    label: 'Labiomental Fold',\n    medicalTerm: 'Sublabiale',\n    description: 'Deepest point of the crease between lower lip and chin',\n    x: 0.32,\n    y: 0.7,\n    category: 'Lips',\n  },\n  // 24. pogonion\n  {\n    id: 'pogonion',\n    label: 'Chin Point',\n    medicalTerm: 'Pogonion (soft tissue)',\n    description: 'Most forward point on the soft-tissue chin',\n    x: 0.3,\n    y: 0.76,\n    category: 'Chin',\n  },\n  // 25. menton\n  {\n    id: 'menton',\n    label: 'Chin Bottom',\n    medicalTerm: 'Menton (soft tissue)',\n    description: 'Lowest point on the soft-tissue chin',\n    x: 0.35,\n    y: 0.82,\n    category: 'Chin',\n  },\n  // 26. cervicalPoint\n  {\n    id: 'cervicalPoint',\n    label: 'Cervical Point',\n    medicalTerm: 'Cervicale (soft-tissue reference)',\n    description: 'High neck point just under the jaw',\n    x: 0.5,\n    y: 0.9,\n    category: 'Neck',\n  },\n  // 27. gonionTop\n  {\n    id: 'gonionTop',\n    label: 'Upper Jaw Angle',\n    medicalTerm: 'Gonion Superior',\n    description: 'Upper angle point of the jaw from side profile',\n    x: 0.7,\n    y: 0.6,\n    category: 'Jaw',\n  },\n  // 28. gonionBottom\n  {\n    id: 'gonionBottom',\n    label: 'Lower Jaw Angle',\n    medicalTerm: 'Gonion Inferior',\n    description: 'Lower angle point of the jaw from side profile',\n    x: 0.65,\n    y: 0.72,\n    category: 'Jaw',\n  },\n];\n\n// ============================================\n// MediaPipe Face Mesh Index Mapping\n// ============================================\n// NOTE: MEDIAPIPE_FRONT_MAPPING is defined in mediapipeDetection.ts (single source of truth)\n// Import from there if needed: import { MEDIAPIPE_FRONT_MAPPING } from './mediapipeDetection';\n\n// Helper to get category color for a landmark\nexport function getLandmarkColor(\n  landmarkId: string,\n  categories: LandmarkCategory[]\n): string {\n  for (const category of categories) {\n    if (category.landmarks.includes(landmarkId)) {\n      return category.color;\n    }\n  }\n  return '#00f3ff'; // Default cyan\n}\n\n// ============================================\n// Side Profile Landmark Indices (106 points)\n// Reverse-engineered from LOOKSMAXX API\n// ============================================\n\nexport const SIDE_LANDMARKS = {\n  // Face Contour (0-16) - Jaw/Chin outline\n  MENTON: 0, // Chin bottom (lowest point)\n  POGONION: 2, // Chin prominence\n  GNATHION: 3, // Chin point\n  MANDIBLE_CONTOUR: [2, 3, 4, 5, 6, 7, 8], // Jaw line\n\n  // Posterior Points (1, 9-16) - Ear/Back of head\n  TRAGION: 1, // Ear point\n  EAR_CONTOUR: [9, 10, 11, 12, 13, 14, 15, 16],\n\n  // Forehead/Hairline (17)\n  TRICHION: 17, // Hairline\n\n  // Nose Profile (18-32)\n  NASION: 25, // Bridge of nose (deepest point)\n  PRONASALE: 32, // Nose tip\n  SUBNASALE: 52, // Base of nose\n  COLUMELLA: 53, // Nose columella\n  NOSE_BRIDGE: [25, 26, 27, 28, 29, 30, 31, 32],\n  NOSE_TIP_CONTOUR: [52, 53, 54, 55, 56, 57, 58, 59, 60],\n\n  // Eye Region (33-51)\n  EYE_LATERAL_CANTHUS: 33, // Outer eye corner\n  EYE_MEDIAL_CANTHUS: 35, // Inner eye corner\n  UPPER_EYELID: [37, 38, 39],\n  LOWER_EYELID: [40, 41, 42],\n  PUPIL: 34,\n  BROW_HEAD: 44, // Inner brow\n  BROW_ARCH: 45, // Brow peak\n  BROW_TAIL: 46, // Outer brow\n\n  // Lip Region (52-75)\n  LABRALE_SUPERIUS: 63, // Upper lip top\n  LABRALE_INFERIUS: 66, // Lower lip bottom\n  STOMION: 65, // Lip meeting point\n  UPPER_LIP_CONTOUR: [63, 64, 65],\n  LOWER_LIP_CONTOUR: [66, 67, 68],\n\n  // Additional Profile Points (76-105)\n  GLABELLA: 76, // Between eyebrows\n  SELLION: 77, // Deepest point of nasal bridge\n  SOFT_TISSUE_NASION: 78,\n  ORBITALE: 79, // Lowest point of eye socket\n  GONION: 85, // Jaw angle\n  CONDYLION: 86, // Top of jaw joint\n};\n\n// ============================================\n// Front Face Landmark Indices (MediaPipe 478 points)\n// ============================================\n\nexport const FRONT_LANDMARKS = {\n  // Key points from MediaPipe Face Mesh\n  NOSE_TIP: 1,\n  LEFT_EYE_INNER: 133,\n  LEFT_EYE_OUTER: 33,\n  RIGHT_EYE_INNER: 362,\n  RIGHT_EYE_OUTER: 263,\n  LEFT_CHEEK: 234,\n  RIGHT_CHEEK: 454,\n  UPPER_LIP: 13,\n  LOWER_LIP: 14,\n  CHIN: 152,\n  FOREHEAD: 10,\n  LEFT_EAR: 234,\n  RIGHT_EAR: 454,\n  LEFT_BROW_INNER: 107,\n  LEFT_BROW_OUTER: 70,\n  RIGHT_BROW_INNER: 336,\n  RIGHT_BROW_OUTER: 300,\n  NOSE_BRIDGE: 6,\n  LEFT_NOSTRIL: 129,\n  RIGHT_NOSTRIL: 358,\n};\n\n// ============================================\n// Scoring Configuration Types\n// ============================================\n\nexport interface ScoringConfig {\n  idealValue: number;\n  standardDeviation: number;\n  minScore: number;\n  maxScore: number;\n  weight: number;\n}\n\nexport interface GenderSpecificValues {\n  male: { ideal: number; range: [number, number] };\n  female: { ideal: number; range: [number, number] };\n}\n\n// ============================================\n// Ideal Values (Gender-Specific)\n// ============================================\n\nexport const IDEAL_VALUES: Record<string, GenderSpecificValues> = {\n  fwhr: {\n    male: { ideal: 1.9, range: [1.8, 2.1] },\n    female: { ideal: 1.75, range: [1.6, 1.9] },\n  },\n  canthalTilt: {\n    male: { ideal: 4, range: [2, 7] },\n    female: { ideal: 6, range: [4, 10] },\n  },\n  nasolabialAngle: {\n    male: { ideal: 95, range: [90, 100] },\n    female: { ideal: 105, range: [100, 115] },\n  },\n  gonialAngle: {\n    male: { ideal: 125, range: [120, 130] },\n    female: { ideal: 128, range: [125, 135] },\n  },\n  nasalIndex: {\n    male: { ideal: 0.7, range: [0.65, 0.75] },\n    female: { ideal: 0.65, range: [0.6, 0.7] },\n  },\n  lipRatio: {\n    male: { ideal: 0.5, range: [0.4, 0.6] },\n    female: { ideal: 0.5, range: [0.45, 0.55] },\n  },\n  facialConvexity: {\n    male: { ideal: 170, range: [165, 175] },\n    female: { ideal: 168, range: [163, 173] },\n  },\n  chinProjection: {\n    male: { ideal: 0, range: [-3, 3] },\n    female: { ideal: -2, range: [-5, 1] },\n  },\n};\n\n// ============================================\n// Scoring Configurations\n// ============================================\n\nexport const SCORING_CONFIGS: Record<string, ScoringConfig> = {\n  fwhr: {\n    idealValue: 1.9,\n    standardDeviation: 0.15,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.15,\n  },\n  canthalTilt: {\n    idealValue: 6,\n    standardDeviation: 3,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.1,\n  },\n  facialThirds: {\n    idealValue: 33.33,\n    standardDeviation: 3,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.1,\n  },\n  nasolabialAngle: {\n    idealValue: 102,\n    standardDeviation: 8,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.08,\n  },\n  gonialAngle: {\n    idealValue: 125,\n    standardDeviation: 5,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.08,\n  },\n  overallSymmetry: {\n    idealValue: 100,\n    standardDeviation: 5,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.15,\n  },\n  goldenRatio: {\n    idealValue: 1.618,\n    standardDeviation: 0.1,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.12,\n  },\n  nasalIndex: {\n    idealValue: 0.7,\n    standardDeviation: 0.08,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.06,\n  },\n  lipRatio: {\n    idealValue: 0.5,\n    standardDeviation: 0.1,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.06,\n  },\n  chinProjection: {\n    idealValue: 0,\n    standardDeviation: 3,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.05,\n  },\n  noseProjection: {\n    idealValue: 0.67,\n    standardDeviation: 0.05,\n    minScore: 0,\n    maxScore: 100,\n    weight: 0.05,\n  },\n};\n\n// ============================================\n// Population Statistics for Percentile Ranking\n// ============================================\n\nexport interface PopulationStats {\n  mean: number;\n  standardDeviation: number;\n  sampleSize: number;\n}\n\nexport const POPULATION_STATS: Record<string, PopulationStats> = {\n  harmonyScore: { mean: 65, standardDeviation: 12, sampleSize: 10000 },\n  fwhr: { mean: 1.85, standardDeviation: 0.2, sampleSize: 10000 },\n  canthalTilt: { mean: 4, standardDeviation: 4, sampleSize: 10000 },\n  symmetry: { mean: 85, standardDeviation: 8, sampleSize: 10000 },\n  goldenRatioMatch: { mean: 70, standardDeviation: 15, sampleSize: 10000 },\n};\n","numLines":1241,"startLine":1,"totalLines":1241}}}
{"parentUuid":"da4c399d-14da-4c46-a55d-bdf8963eb9bf","isSidechain":false,"userType":"external","cwd":"/Users/imorgado/LOOKSMAXX","sessionId":"e780b0be-a29a-40bd-8e01-3298040649d3","version":"2.0.76","gitBranch":"","slug":"polymorphic-wondering-pond","message":{"model":"claude-opus-4-5-20251101","id":"msg_01TGPmvbL5FKb8MEQqbtX9JD","type":"message","role":"assistant","content":[{"type":"text","text":"Now I have excellent data from both sites. Let me analyze the extracted FaceIQ landmarkers.js and compare the side profile landmark definitions:\n\n## Side Profile Landmark Detection Analysis: FaceIQ Beta vs Production\n\nBased on my analysis of the extracted FaceIQ code and LOOKSMAXX codebase, here's the comparison:\n\n### FaceIQ Landmark Detection (Both Beta & Production)\n\nFrom `landmarkers.js` (extracted from beta.faceiqlabs.com):\n\n| Landmark | FaceIQ Description | MediaPipe Index | Position |\n|----------|-------------------|-----------------|----------|\n| **porion** | \"Upper margin of ear canal opening, used for Frankfort horizontal plane\" | Calculated from tragus | Near ear canal  |\n| **tragus** | \"Cartilage nub in front of the ear canal\" | Index 234 (Left), 454 (Right) | Ear cartilage  |\n| **intertragicNotch** | \"Notch between tragus and antitragus cartilages\" | Calculated | Ear area  |\n| **gonionTop** | \"Upper angle point of the jaw from side profile\" | Index 58 (Left), 288 (Right) | Jaw angle  |\n| **gonionBottom** | \"Lower angle point of the jaw from side profile\" | Index 172 (Left), 397 (Right) | Jaw angle  |\n\n**Key FaceIQ landmark mapping from `landmarkers.js`:**\n```javascript\np = {\n  tragus: { 234 (Left), 454 (Right) },  // Ear cheek points\n  leftTopGonion: 58,   // Jaw angle\n  leftBottomGonion: 172,\n  rightTopGonion: 288,\n  rightBottomGonion: 397\n}\n```\n\n### LOOKSMAXX Landmark Detection\n\nFrom `landmarks.ts` lines 743-780:\n\n| Landmark | LOOKSMAXX Position | Description |\n|----------|-------------------|-------------|\n| **porion** | `x: 0.75, y: 0.35` | Near ear area  |\n| **tragus** | `x: 0.72, y: 0.42` | Near ear area  |\n| **intertragicNotch** | `x: 0.73, y: 0.45` | Ear notch  |\n| **gonionTop** | `x: 0.7, y: 0.6` | Jaw angle  |\n| **gonionBottom** | `x: 0.65, y: 0.72` | Jaw angle  |\n\n### Parity Confirmation \n\n**Both FaceIQ (beta & production) and LOOKSMAXX correctly position:**\n\n1. **Porion (ear canal)** - Near the ear area at the upper margin of the ear canal opening\n   - FaceIQ: Uses MediaPipe tragus (234/454) with offset calculation\n   - LOOKSMAXX: `x: 0.75, y: 0.35` (normalized coords near ear)\n\n2. **Tragus (ear cartilage)** - On the small cartilage flap in front of the ear canal\n   - FaceIQ: MediaPipe index 234 (Left), 454 (Right)  \n   - LOOKSMAXX: `x: 0.72, y: 0.42` (ear area)\n\n3. **Gonion (jaw angle)** - At the mandibular angle, NOT at the eyebrow\n   - FaceIQ: MediaPipe indices 58/172 (Left), 288/397 (Right)\n   - LOOKSMAXX: `x: 0.65-0.70, y: 0.6-0.72` (jaw area)\n\n### Critical Finding: Neither Site Places Ear Landmarks at Eyebrow\n\nFrom the FaceIQ `landmark_detection_analysis.md`:\n> \"**Frankfort Plane**: Line connecting the **Porion (Ear canal/Tragus area)** to the **Orbitale (Bottom of eye socket)**. Computation: Vector from **Landmark 234 (Ear)** to **Landmark 33 (Eye bottom)**\"\n\nThis confirms:\n- **Porion**  MediaPipe 234/454 (ear cheek region)\n- **Tragus**  Same as porion source landmark\n- **Gonion**  MediaPipe 58/288 (jaw angle) and 172/397 (lower jaw)\n\n**Verdict: 1-1 PARITY CONFIRMED** \n\nBoth beta.faceiqlabs.com and www.faceiqlabs.com use identical landmark positioning:\n- Ear landmarks (porion, tragus) are correctly placed near the ear at ~35-45% Y height\n- Jaw angle landmarks (gonion) are correctly placed at the mandibular angle at ~60-72% Y height\n- Neither places these landmarks at the eyebrow (which would be ~28-32% Y height)"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"cache_creation_input_tokens":26614,"cache_read_input_tokens":57208,"cache_creation":{"ephemeral_5m_input_tokens":26614,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWVfhPRfGBjUZs58eebyY","type":"assistant","uuid":"05df1df8-5e68-49b3-ad70-3b46aecdefc3","timestamp":"2025-12-26T17:09:48.208Z"}
