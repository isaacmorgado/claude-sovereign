The file /Users/imorgado/SPLICE/splice-backend/server.js has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   854→    res.status(500).json({ error: err.message });
   855→  }
   856→});
   857→
   858→// =============================================================================
   859→// Caption Export Routes
   860→// =============================================================================
   861→
   862→/**
   863→ * POST /export/captions - Export transcript to caption format (SRT, VTT, etc.)
   864→ *
   865→ * Converts a transcript to the specified caption format.
   866→ * Can optionally save to file.
   867→ *
   868→ * Options:
   869→ * - wavPath: Path to audio file (to transcribe first)
   870→ * - transcript: Pre-existing transcript with word-level timing
   871→ * - format: Export format (srt, vtt, txt, json) - default: srt
   872→ * - outputPath: Optional file path to save to
   873→ * - maxWordsPerCaption: Max words per caption (default: 8)
   874→ * - maxDuration: Max duration per caption in seconds (default: 5)
   875→ */
   876→app.post('/export/captions', async (req, res) => {
   877→  const {
   878→    wavPath,
   879→    transcript: providedTranscript,
   880→    format = 'srt',
   881→    outputPath = null,
   882→    maxWordsPerCaption = 8,
   883→    maxDuration = 5
   884→  } = req.body;
   885→
   886→  if (!wavPath && !providedTranscript) {
   887→    return res.status(400).json({ error: 'wavPath or transcript is required' });
   888→  }
   889→
   890→  if (wavPath && !fs.existsSync(wavPath)) {
   891→    return res.status(404).json({ error: `File not found: ${wavPath}` });
   892→  }
   893→
   894→  console.log(`[SPLICE] Caption export: ${wavPath || 'provided transcript'} -> ${format}`);
   895→
   896→  try {
   897→    // Get or create transcript with word-level timestamps
   898→    let transcript = providedTranscript;
   899→    if (!transcript && wavPath) {
   900→      transcript = await transcribeWithWords(wavPath);
   901→    }
   902→
   903→    const exportOptions = { maxWordsPerCaption, maxDuration };
   904→
   905→    // Generate caption content based on format
   906→    let content;
   907→    let mimeType;
   908→
   909→    switch (format.toLowerCase()) {
   910→      case 'srt':
   911→        content = toSRT(transcript, exportOptions);
   912→        mimeType = 'application/x-subrip';
   913→        break;
   914→      case 'vtt':
   915→      case 'webvtt':
   916→        content = toVTT(transcript, exportOptions);
   917→        mimeType = 'text/vtt';
   918→        break;
   919→      case 'txt':
   920→      case 'text':
   921→        content = toPlainText(transcript, { ...exportOptions, includeTimestamps: true });
   922→        mimeType = 'text/plain';
   923→        break;
   924→      case 'json':
   925→        content = toJSON(transcript);
   926→        mimeType = 'application/json';
   927→        break;
   928→      default:
   929→        return res.status(400).json({
   930→          error: `Unsupported format: ${format}`,
   931→          supportedFormats: getSupportedFormats()
   932→        });
   933→    }
   934→
   935→    // Save to file if outputPath provided
   936→    let savedPath = null;
   937→    if (outputPath) {
   938→      const result = await exportToFile(transcript, outputPath, format, exportOptions);
   939→      savedPath = result.path;
   940→      console.log(`[SPLICE] Saved captions to: ${savedPath}`);
   941→    }
   942→
   943→    res.json({
   944→      success: true,
   945→      format,
   946→      content,
   947→      mimeType,
   948→      savedPath,
   949→      wordCount: transcript.words?.length || 0,
   950→      duration: transcript.duration || 0
   951→    });
   952→  } catch (err) {
   953→    console.error('[SPLICE] Caption export error:', err);
   954→    res.status(500).json({ error: err.message });
   955→  }
   956→});
   957→
   958→/**
   959→ * GET /export/formats - Get supported export formats
   960→ */
   961→app.get('/export/formats', (req, res) => {
   962→  res.json({
   963→    success: true,
   964→    formats: getSupportedFormats()
   965→  });
   966→});
   967→
   968→// =============================================================================
   969→// Multitrack/Multicam Analysis Routes
   970→// =============================================================================
   971→
   972→/**
   973→ * POST /multitrack - Analyze multiple audio tracks for multicam editing
   974→ *