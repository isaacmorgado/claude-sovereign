     1→import { NextRequest, NextResponse } from "next/server";
     2→import { cookies } from "next/headers";
     3→
     4→// Backend API URL for authentication
     5→const BACKEND_API_URL =
     6→  process.env.BACKEND_API_URL || "https://splice-api-production.up.railway.app";
     7→
     8→export async function GET(_request: NextRequest) {
     9→  try {
    10→    const cookieStore = await cookies();
    11→    const token = cookieStore.get("splice_token")?.value;
    12→
    13→    // No token means not authenticated
    14→    if (!token) {
    15→      return NextResponse.json(
    16→        { error: "Not authenticated" },
    17→        { status: 401 }
    18→      );
    19→    }
    20→
    21→    // Fetch credits data from backend
    22→    const response = await fetch(`${BACKEND_API_URL}/credits`, {
    23→      method: "GET",
    24→      headers: {
    25→        Authorization: `Bearer ${token}`,
    26→      },
    27→    });
    28→
    29→    if (!response.ok) {
    30→      // Return fallback data if backend fails
    31→      return NextResponse.json({
    32→        hoursRemaining: 0,
    33→        hoursUsed: 0,
    34→        totalHours: 0,
    35→        musicCredits: 0,
    36→        musicCreditsUsed: 0,
    37→        variationsCredits: 0,
    38→        sceneAwareCredits: 0,
    39→        projectsThisMonth: 0,
    40→      });
    41→    }
    42→
    43→    const data = await response.json();
    44→
    45→    // Return usage stats from backend data
    46→    return NextResponse.json({
    47→      hoursRemaining: data.hoursRemaining || 0,
    48→      hoursUsed: data.hoursUsed || 0,
    49→      totalHours: data.totalHours || data.hoursRemaining || 0,
    50→      musicCredits: data.musicCredits || 0,
    51→      musicCreditsUsed: data.musicCreditsUsed || 0,
    52→      variationsCredits: data.variationsCredits || 0,
    53→      sceneAwareCredits: data.sceneAwareCredits || 0,
    54→      projectsThisMonth: data.projectsThisMonth || 0,
    55→    });
    56→  } catch (error) {
    57→    console.error("[API Usage] Error:", error);
    58→    return NextResponse.json(
    59→      { error: "Failed to fetch usage data" },
    60→      { status: 500 }
    61→    );
    62→  }
    63→}
    64→

</system-reminder>
