The file /Users/imorgado/SPLICE/splice-plugin/js/main.js has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
  1427→    const err = await response.json();
  1428→    return { success: false, error: err.error || 'Transcription failed' };
  1429→  }
  1430→
  1431→  const data = await response.json();
  1432→  return {
  1433→    success: data.success,
  1434→    transcript: data.transcript,
  1435→    takes: data.takes,
  1436→    error: data.error
  1437→  };
  1438→}
  1439→
  1440→// ============================================================================
  1441→// BATCH PROCESSING
  1442→// ============================================================================
  1443→let batchQueue = [];
  1444→let currentBatchJobId = null;
  1445→
  1446→/**
  1447→ * Initialize batch processing handlers
  1448→ */
  1449→function initBatchHandlers() {
  1450→  const addToBatchBtn = document.getElementById('addToBatchBtn');
  1451→  const startBatchBtn = document.getElementById('startBatchBtn');
  1452→  const clearBatchBtn = document.getElementById('clearBatchBtn');
  1453→  const batchSection = document.getElementById('batchSection');
  1454→
  1455→  // Show batch section in settings or after first detection
  1456→  if (batchSection) {
  1457→    batchSection.classList.remove('hidden');
  1458→  }
  1459→
  1460→  // Add files to batch queue
  1461→  if (addToBatchBtn) {
  1462→    addToBatchBtn.addEventListener('click', async () => {
  1463→      try {
  1464→        const uxpFs = require('uxp').storage.localFileSystem;
  1465→        const files = await uxpFs.getFileForOpening({
  1466→          allowMultiple: true,
  1467→          types: ['wav', 'mp3', 'mp4', 'mov', 'aac', 'm4a']
  1468→        });
  1469→
  1470→        if (files && files.length > 0) {
  1471→          for (const file of files) {
  1472→            const path = file.nativePath || file.name;
  1473→            if (!batchQueue.includes(path)) {
  1474→              batchQueue.push(path);
  1475→            }
  1476→          }
  1477→          updateBatchQueueDisplay();
  1478→          setStatus(`Added ${files.length} file(s) to batch queue`);
  1479→        }
  1480→      } catch (err) {
  1481→        setStatus('Error adding files: ' + err.message);
  1482→      }
  1483→    });
  1484→  }
  1485→
  1486→  // Start batch processing
  1487→  if (startBatchBtn) {
  1488→    startBatchBtn.addEventListener('click', async () => {
  1489→      if (batchQueue.length === 0) {
  1490→        setStatus('No files in batch queue');
  1491→        return;
  1492→      }
  1493→
  1494→      startBatchBtn.disabled = true;
  1495→      addToBatchBtn.disabled = true;
  1496→
  1497→      try {
  1498→        await runBatchProcessing();
  1499→      } finally {
  1500→        startBatchBtn.disabled = false;
  1501→        addToBatchBtn.disabled = false;
  1502→      }
  1503→    });
  1504→  }
  1505→
  1506→  // Clear batch queue
  1507→  if (clearBatchBtn) {
  1508→    clearBatchBtn.addEventListener('click', () => {
  1509→      batchQueue = [];
  1510→      currentBatchJobId = null;
  1511→      updateBatchQueueDisplay();
  1512→      setStatus('Batch queue cleared');
  1513→    });
  1514→  }
  1515→}
  1516→
  1517→/**
  1518→ * Update batch queue display
  1519→ */
  1520→function updateBatchQueueDisplay() {
  1521→  const batchEmpty = document.getElementById('batchEmpty');
  1522→  const batchList = document.getElementById('batchList');
  1523→  const startBatchBtn = document.getElementById('startBatchBtn');
  1524→
  1525→  if (batchQueue.length === 0) {
  1526→    if (batchEmpty) batchEmpty.style.display = 'block';
  1527→    if (batchList) batchList.innerHTML = '';
  1528→    if (startBatchBtn) startBatchBtn.disabled = true;
  1529→    return;
  1530→  }
  1531→
  1532→  if (batchEmpty) batchEmpty.style.display = 'none';
  1533→  if (startBatchBtn) startBatchBtn.disabled = false;
  1534→
  1535→  if (batchList) {
  1536→    batchList.innerHTML = batchQueue.map((path, i) => {
  1537→      const fileName = path.split('/').pop();
  1538→      return `<div style="display: flex; justify-content: space-between; align-items: center; padding: 4px 6px; background: #2a2a2a; border-radius: 3px; margin-bottom: 2px; font-size: 9px;">
  1539→        <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 180px;" title="${path}">${fileName}</span>
  1540→        <button onclick="removeBatchItem(${i})" style="background: transparent; border: none; color: #888; cursor: pointer; font-size: 10px;">x</button>
  1541→      </div>`;
  1542→    }).join('');
  1543→  }
  1544→}
  1545→
  1546→/**
  1547→ * Remove item from batch queue
  1548→ */
  1549→function removeBatchItem(index) {
  1550→  batchQueue.splice(index, 1);
  1551→  updateBatchQueueDisplay();
  1552→}
  1553→
  1554→/**
  1555→ * Run batch processing
  1556→ */
  1557→async function runBatchProcessing() {
  1558→  const batchProgress = document.getElementById('batchProgress');
  1559→  const batchProgressBar = document.getElementById('batchProgressBar');
  1560→  const batchProgressText = document.getElementById('batchProgressText');
  1561→
  1562→  if (batchProgress) batchProgress.style.display = 'block';
  1563→
  1564→  try {
  1565→    // Get settings
  1566→    const sensitivity = parseInt(document.getElementById('sensitivitySlider')?.value || 50);
  1567→    const params = mapSensitivity(sensitivity);
  1568→
  1569→    // Call batch endpoint
  1570→    const response = await fetch(`${BACKEND_URL}/batch/silences`, {
  1571→      method: 'POST',
  1572→      headers: getAuthHeaders(),
  1573→      body: JSON.stringify({
  1574→        files: batchQueue,
  1575→        options: {
  1576→          sensitivity,
  1577→          threshold: params.dbThreshold,
  1578→          minSilenceLength: params.minDuration,
  1579→          paddingStart: params.padding,
  1580→          paddingEnd: params.padding / 2
  1581→        }
  1582→      })
  1583→    });
  1584→
  1585→    if (!response.ok) {
  1586→      const err = await response.json();
  1587→      throw new Error(err.error || 'Batch request failed');
  1588→    }
  1589→
  1590→    const data = await response.json();
  1591→    currentBatchJobId = data.jobId;
  1592→    setStatus(`Batch job started: ${data.jobId}`);
  1593→
  1594→    // Poll for status
  1595→    await pollBatchStatus(currentBatchJobId, batchProgressBar, batchProgressText);
  1596→
  1597→  } catch (err) {
  1598→    setStatus('Batch error: ' + err.message);
  1599→  } finally {
  1600→    if (batchProgress) batchProgress.style.display = 'none';
  1601→  }
  1602→}
  1603→
  1604→/**
  1605→ * Poll batch job status
  1606→ */
  1607→async function pollBatchStatus(jobId, progressBar, progressText) {
  1608→  const pollInterval = 2000; // 2 seconds
  1609→  const maxPolls = 300; // 10 minutes max
  1610→  let polls = 0;
  1611→
  1612→  while (polls < maxPolls) {
  1613→    try {
  1614→      const response = await fetch(`${BACKEND_URL}/batch/status/${jobId}`, {
  1615→        headers: getAuthHeaders()
  1616→      });
  1617→
  1618→      if (!response.ok) {
  1619→        throw new Error('Failed to get batch status');
  1620→      }
  1621→
  1622→      const data = await response.json();
  1623→      const job = data.job;
  1624→
  1625→      // Update progress
  1626→      if (progressBar) progressBar.value = job.progress.percentage;
  1627→      if (progressText) progressText.textContent = `${job.progress.completed + job.progress.failed} / ${job.progress.total} files`;
  1628→
  1629→      // Check if complete
  1630→      if (job.status !== 'processing') {
  1631→        if (job.status === 'completed') {
  1632→          setStatus(`Batch complete: ${job.progress.completed} files processed`);
  1633→        } else if (job.status === 'completed_with_errors') {
  1634→          setStatus(`Batch complete with ${job.progress.failed} error(s)`);
  1635→        } else {
  1636→          setStatus('Batch failed');
  1637→        }
  1638→
  1639→        // Clear queue on completion
  1640→        batchQueue = [];
  1641→        updateBatchQueueDisplay();
  1642→        return;
  1643→      }
  1644→
  1645→      await new Promise(resolve => setTimeout(resolve, pollInterval));
  1646→      polls++;
  1647→    } catch (err) {
  1648→      setStatus('Polling error: ' + err.message);
  1649→      return;
  1650→    }
  1651→  }
  1652→
  1653→  setStatus('Batch timed out');
  1654→}
  1655→
  1656→// Expose for inline onclick
  1657→if (typeof window !== 'undefined') {
  1658→  window.removeBatchItem = removeBatchItem;
  1659→}
  1660→