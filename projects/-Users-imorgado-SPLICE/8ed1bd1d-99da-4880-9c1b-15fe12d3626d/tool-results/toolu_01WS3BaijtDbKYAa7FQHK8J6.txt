splice-cep/panel/js/credits.js:2: * SPLICE CEP Credits Display Module
splice-cep/panel/js/credits.js:5: * Port of UXP credits.js for CEP compatibility.
splice-cep/panel/js/credits.js:9:let lastCreditsError = null;
splice-cep/panel/js/credits.js:10:let creditsRetryCount = 0;
splice-cep/panel/js/credits.js:11:const MAX_CREDITS_RETRIES = 3;
splice-cep/panel/js/credits.js:13:// Store current credits globally for access checks
splice-cep/panel/js/credits.js:14:let currentCredits = null;
splice-cep/panel/js/credits.js:17:let creditsRefreshInterval = null;
splice-cep/panel/js/credits.js:23: * Fetch user's credit balance from backend
splice-cep/panel/js/credits.js:24: * @returns {Promise<Object | null>} Credit data including isolation hours, or error object
splice-cep/panel/js/credits.js:26:async function fetchCredits() {
splice-cep/panel/js/credits.js:31:        console.log('[SPLICE] No customerId configured - credits display disabled');
splice-cep/panel/js/credits.js:32:        lastCreditsError = null;
splice-cep/panel/js/credits.js:42:                debugLog('[Credits] No JWT token, using legacy auth');
splice-cep/panel/js/credits.js:46:        const response = await fetchWithTimeout(`${getBackendUrl()}/credits`, {
splice-cep/panel/js/credits.js:49:        }, 10000); // 10s timeout for credit checks (faster UX)
splice-cep/panel/js/credits.js:56:                debugLog('[Credits] Got 401, attempting token refresh...');
splice-cep/panel/js/credits.js:69:                    const retryResponse = await fetchWithTimeout(`${getBackendUrl()}/credits`, {
splice-cep/panel/js/credits.js:76:                        lastCreditsError = null;
splice-cep/panel/js/credits.js:77:                        creditsRetryCount = 0;
splice-cep/panel/js/credits.js:102:            console.error('[SPLICE] Credits fetch failed:', errorMsg);
splice-cep/panel/js/credits.js:103:            lastCreditsError = errorMsg;
splice-cep/panel/js/credits.js:108:        lastCreditsError = null;
splice-cep/panel/js/credits.js:109:        creditsRetryCount = 0;
splice-cep/panel/js/credits.js:127:        console.error('[SPLICE] Credits fetch error:', err);
splice-cep/panel/js/credits.js:128:        lastCreditsError = err.message || 'Connection failed';
splice-cep/panel/js/credits.js:129:        return { _error: true, message: lastCreditsError };
splice-cep/panel/js/credits.js:134: * Clear the credits cache (call on logout)
splice-cep/panel/js/credits.js:136:function clearCreditsCache() {
splice-cep/panel/js/credits.js:137:    currentCredits = null;
splice-cep/panel/js/credits.js:138:    lastCreditsError = null;
splice-cep/panel/js/credits.js:139:    creditsRetryCount = 0;
splice-cep/panel/js/credits.js:140:    console.log('[SPLICE] Credits cache cleared');
splice-cep/panel/js/credits.js:144: * Update the credit display in the UI
splice-cep/panel/js/credits.js:145: * @param {Object|null} credits - Credit data, error object, or null if unavailable
splice-cep/panel/js/credits.js:147:function updateCreditDisplay(credits) {
splice-cep/panel/js/credits.js:148:    const creditBadge = document.getElementById('creditBadge');
splice-cep/panel/js/credits.js:149:    if (!creditBadge) return;
splice-cep/panel/js/credits.js:152:    if (!credits) {
splice-cep/panel/js/credits.js:153:        currentCredits = null;
splice-cep/panel/js/credits.js:154:        creditBadge.style.display = 'flex';
splice-cep/panel/js/credits.js:155:        creditBadge.textContent = 'Login';
splice-cep/panel/js/credits.js:156:        creditBadge.title = 'Click to enter license key';
splice-cep/panel/js/credits.js:157:        creditBadge.classList.remove('ok', 'low');
splice-cep/panel/js/credits.js:158:        creditBadge.classList.add('login');
splice-cep/panel/js/credits.js:163:    if (credits._error) {
splice-cep/panel/js/credits.js:164:        currentCredits = null;
splice-cep/panel/js/credits.js:165:        creditBadge.style.display = 'flex';
splice-cep/panel/js/credits.js:166:        creditBadge.textContent = 'Retry';
splice-cep/panel/js/credits.js:167:        creditBadge.title = `Error: ${credits.message}\nClick to retry`;
splice-cep/panel/js/credits.js:168:        creditBadge.classList.remove('ok', 'low', 'login');
splice-cep/panel/js/credits.js:169:        creditBadge.classList.add('error');
splice-cep/panel/js/credits.js:173:    // Normal credit display
splice-cep/panel/js/credits.js:174:    currentCredits = credits;
splice-cep/panel/js/credits.js:175:    creditBadge.style.display = 'flex';
splice-cep/panel/js/credits.js:184:    if (credits.isOnTrial && credits.trialDaysRemaining) {
splice-cep/panel/js/credits.js:185:        creditBadge.textContent = `Trial: ${credits.trialDaysRemaining}d`;
splice-cep/panel/js/credits.js:186:        creditBadge.classList.remove('error', 'login', 'ok', 'low');
splice-cep/panel/js/credits.js:187:        creditBadge.classList.add('trial');
splice-cep/panel/js/credits.js:189:        creditBadge.textContent = `${credits.hoursRemaining.toFixed(1)} hrs`;
splice-cep/panel/js/credits.js:190:        creditBadge.classList.remove('error', 'login', 'trial');
splice-cep/panel/js/credits.js:194:    let tooltip = `${credits.tierName}: ${credits.hoursRemaining.toFixed(1)} / ${credits.hoursTotal} hours`;
splice-cep/panel/js/credits.js:195:    if (credits.isOnTrial && credits.trialDaysRemaining) {
splice-cep/panel/js/credits.js:196:        tooltip = `Trial: ${credits.trialDaysRemaining} days remaining\n` + tooltip;
splice-cep/panel/js/credits.js:198:    if (credits.hasIsolationAccess) {
splice-cep/panel/js/credits.js:199:        tooltip += `\nIsolation: ${(credits.isolationHoursRemaining * 60).toFixed(0)} / ${(credits.isolationHoursTotal * 60).toFixed(0)} min`;
splice-cep/panel/js/credits.js:201:    creditBadge.title = tooltip;
splice-cep/panel/js/credits.js:204:    if (credits.hoursRemaining <= 1) {
splice-cep/panel/js/credits.js:205:        creditBadge.classList.add('low');
splice-cep/panel/js/credits.js:206:        creditBadge.classList.remove('ok');
splice-cep/panel/js/credits.js:208:        creditBadge.classList.add('ok');
splice-cep/panel/js/credits.js:209:        creditBadge.classList.remove('low');
splice-cep/panel/js/credits.js:213:    updateIsolationCheckboxState(credits);
splice-cep/panel/js/credits.js:219:function updateIsolationCheckboxState(credits) {
splice-cep/panel/js/credits.js:225:    if (!credits || !credits.hasIsolationAccess) {
splice-cep/panel/js/credits.js:238:            const minsRemaining = (credits.isolationHoursRemaining * 60).toFixed(0);
splice-cep/panel/js/credits.js:240:            tierBadge.style.opacity = credits.isolationHoursRemaining > 0 ? '1' : '0.6';
splice-cep/panel/js/credits.js:251:    if (!currentCredits) {
splice-cep/panel/js/credits.js:252:        return { allowed: false, message: 'Credits not loaded', overageCost: 0 };
splice-cep/panel/js/credits.js:255:    if (!currentCredits.hasIsolationAccess) {
splice-cep/panel/js/credits.js:259:            upgradeRequired: true,
splice-cep/panel/js/credits.js:265:    const remaining = currentCredits.isolationHoursRemaining;
splice-cep/panel/js/credits.js:277:    const overageCost = overageMinutes * currentCredits.isolationOverageRate;
splice-cep/panel/js/credits.js:288: * Get current credits (for access checks)
splice-cep/panel/js/credits.js:290:function getCurrentCredits() {
splice-cep/panel/js/credits.js:291:    return currentCredits;
splice-cep/panel/js/credits.js:300:    if (!currentCredits || !currentCredits.featureAccess) {
splice-cep/panel/js/credits.js:303:    return currentCredits.featureAccess.includes(featureName);
splice-cep/panel/js/credits.js:324: * Initialize credits display
splice-cep/panel/js/credits.js:325: * Fetches credits on load and sets up periodic refresh
splice-cep/panel/js/credits.js:327:async function initCredits() {
splice-cep/panel/js/credits.js:329:    if (creditsRefreshInterval) {
splice-cep/panel/js/credits.js:330:        clearInterval(creditsRefreshInterval);
splice-cep/panel/js/credits.js:334:    const credits = await fetchCredits();
splice-cep/panel/js/credits.js:335:    updateCreditDisplay(credits);
splice-cep/panel/js/credits.js:337:    // Refresh credits every 5 minutes
splice-cep/panel/js/credits.js:338:    creditsRefreshInterval = setInterval(async () => {
splice-cep/panel/js/credits.js:339:        const refreshedCredits = await fetchCredits();
splice-cep/panel/js/credits.js:340:        updateCreditDisplay(refreshedCredits);
splice-cep/panel/js/credits.js:345: * Cleanup credits module - call on plugin unload
splice-cep/panel/js/credits.js:347:function cleanupCredits() {
splice-cep/panel/js/credits.js:348:    if (creditsRefreshInterval) {
splice-cep/panel/js/credits.js:349:        clearInterval(creditsRefreshInterval);
splice-cep/panel/js/credits.js:350:        creditsRefreshInterval = null;
splice-cep/panel/js/credits.js:355: * Manually refresh credits (e.g., after a processing operation)
splice-cep/panel/js/credits.js:357:async function refreshCredits() {
splice-cep/panel/js/credits.js:358:    const credits = await fetchCredits();
splice-cep/panel/js/credits.js:359:    updateCreditDisplay(credits);
splice-cep/panel/js/credits.js:360:    return credits;
splice-cep/panel/js/credits.js:364: * Retry fetching credits with exponential backoff
splice-cep/panel/js/credits.js:367:async function retryFetchCredits() {
splice-cep/panel/js/credits.js:368:    if (creditsRetryCount >= MAX_CREDITS_RETRIES) {
splice-cep/panel/js/credits.js:369:        console.warn('[SPLICE] Max retry attempts reached for credits fetch');
splice-cep/panel/js/credits.js:370:        updateCreditDisplay({
splice-cep/panel/js/credits.js:374:        creditsRetryCount = 0; // Reset for next attempt
splice-cep/panel/js/credits.js:378:    creditsRetryCount++;
splice-cep/panel/js/credits.js:379:    console.log(`[SPLICE] Retrying credits fetch (attempt ${creditsRetryCount}/${MAX_CREDITS_RETRIES})`);
splice-cep/panel/js/credits.js:382:    const delay = Math.pow(2, creditsRetryCount - 1) * 1000;
splice-cep/panel/js/credits.js:385:    const creditBadge = document.getElementById('creditBadge');
splice-cep/panel/js/credits.js:386:    if (creditBadge) {
splice-cep/panel/js/credits.js:387:        creditBadge.textContent = `Retry ${creditsRetryCount}...`;
splice-cep/panel/js/credits.js:388:        creditBadge.classList.add('retrying');
splice-cep/panel/js/credits.js:393:    const credits = await fetchCredits();
splice-cep/panel/js/credits.js:395:    if (creditBadge) {
splice-cep/panel/js/credits.js:396:        creditBadge.classList.remove('retrying');
splice-cep/panel/js/credits.js:399:    updateCreditDisplay(credits);
splice-cep/panel/js/credits.js:400:    return credits;
splice-cep/panel/js/credits.js:404: * Handle click on credit badge
splice-cep/panel/js/credits.js:407: * - Otherwise: refresh credits
splice-cep/panel/js/credits.js:409:function handleCreditBadgeClick() {
splice-cep/panel/js/credits.js:410:    const creditBadge = document.getElementById('creditBadge');
splice-cep/panel/js/credits.js:411:    if (!creditBadge) return;
splice-cep/panel/js/credits.js:413:    if (creditBadge.classList.contains('error')) {
splice-cep/panel/js/credits.js:414:        retryFetchCredits();
splice-cep/panel/js/credits.js:415:    } else if (creditBadge.classList.contains('login')) {
splice-cep/panel/js/credits.js:423:        refreshCredits();
splice-cep/panel/js/credits.js:428:window.fetchCredits = fetchCredits;
splice-cep/panel/js/credits.js:429:window.clearCreditsCache = clearCreditsCache;
splice-cep/panel/js/credits.js:430:window.updateCreditDisplay = updateCreditDisplay;
splice-cep/panel/js/credits.js:432:window.getCurrentCredits = getCurrentCredits;
splice-cep/panel/js/credits.js:435:window.initCredits = initCredits;
splice-cep/panel/js/credits.js:436:window.cleanupCredits = cleanupCredits;
splice-cep/panel/js/credits.js:437:window.refreshCredits = refreshCredits;
splice-cep/panel/js/credits.js:438:window.retryFetchCredits = retryFetchCredits;
splice-cep/panel/js/credits.js:439:window.handleCreditBadgeClick = handleCreditBadgeClick;
splice-cep/panel/js/textEditor.js:217:    if (typeof showUpgradeModal === 'function') {
splice-cep/panel/js/textEditor.js:218:      showUpgradeModal('Text-Based Editing', requiredTier);
splice-cep/panel/js/multitrack.js:352:        if (typeof showUpgradeModal === 'function') {
splice-cep/panel/js/multitrack.js:353:            showUpgradeModal('Multitrack Auto-Balance', requiredTier);
splice-cep/panel/js/multitrack.js:455:        if (typeof showUpgradeModal === 'function') {
splice-cep/panel/js/multitrack.js:456:            showUpgradeModal('Multitrack Auto-Balance', requiredTier);
splice-cep/panel/js/browser-simulation.js:587:        if (url.includes('/music/credits')) {
splice-cep/panel/js/browser-simulation.js:719:                creditsRemaining: 15
splice-cep/panel/js/browser-simulation.js:723:        if (url.includes('/credits')) {
splice-cep/panel/js/browser-simulation.js:725:                creditsRemaining: 15,
splice-cep/panel/js/browser-simulation.js:727:                musicCredits: 10
splice-cep/panel/js/test-simulator.js:113:            'creditBadge': '#creditBadge',
splice-cep/panel/js/test-simulator.js:713:            { path: '/credits', method: 'GET' },
splice-cep/panel/js/test-simulator.js:714:            { path: '/music/credits', method: 'GET' },
splice-cep/panel/js/test-simulator.js:730:                const expectedCodes = [200, 401, 402, 403];
splice-cep/panel/js/test-simulator.js:888:        const creditBadge = document.getElementById('creditBadge');
splice-cep/panel/js/test-simulator.js:892:        if (!creditBadge || !loginModal) {
splice-cep/panel/js/test-simulator.js:1181:     * Test credits module initialization
splice-cep/panel/js/test-simulator.js:1183:    testCreditsModuleInit() {
splice-cep/panel/js/test-simulator.js:1184:        SPLICETestSimulator.log(this.name, 'initCredits exists',
splice-cep/panel/js/test-simulator.js:1185:            typeof initCredits === 'function');
splice-cep/panel/js/test-simulator.js:1187:        SPLICETestSimulator.log(this.name, 'fetchCredits exists',
splice-cep/panel/js/test-simulator.js:1188:            typeof fetchCredits === 'function');
splice-cep/panel/js/test-simulator.js:1190:        SPLICETestSimulator.log(this.name, 'updateCreditDisplay exists',
splice-cep/panel/js/test-simulator.js:1191:            typeof updateCreditDisplay === 'function');
splice-cep/panel/js/test-simulator.js:1205:        this.testCreditsModuleInit();
splice-cep/panel/js/test-simulator.js:1491:        const criticalElements = ['#goBtn', '#status', '#creditBadge', '#optionsPanel'];
splice-cep/panel/js/socialReframe.js:323:    if (typeof showUpgradeModal === 'function') {
splice-cep/panel/js/socialReframe.js:324:      showUpgradeModal('Social Reframe', requiredTier);
splice-cep/panel/js/config.js:471:        console.warn('[SPLICE] Using deprecated x-stripe-customer-id header. Please re-login to upgrade to JWT auth.');
splice-cep/panel/js/config.js:1433:    const creditBadge = document.getElementById('creditBadge');
splice-cep/panel/js/config.js:1435:    // Handle credit badge click - retry on error, or show login modal
splice-cep/panel/js/config.js:1436:    if (creditBadge) {
splice-cep/panel/js/config.js:1437:        creditBadge.addEventListener('click', async () => {
splice-cep/panel/js/config.js:1438:            if (creditBadge.classList.contains('error')) {
splice-cep/panel/js/config.js:1439:                creditBadge.textContent = '...';
splice-cep/panel/js/config.js:1440:                if (typeof refreshCredits === 'function') {
splice-cep/panel/js/config.js:1441:                    await refreshCredits();
splice-cep/panel/js/config.js:1510:                if (typeof refreshCredits === 'function') {
splice-cep/panel/js/config.js:1511:                    await refreshCredits();
splice-cep/panel/js/config.js:1666:    // View Plans button (in upgrade modal)
splice-cep/panel/js/config.js:1731:    if (typeof clearCreditsCache === 'function') {
splice-cep/panel/js/config.js:1732:        clearCreditsCache();
splice-cep/panel/js/config.js:1734:    if (typeof updateCreditDisplay === 'function') {
splice-cep/panel/js/config.js:1735:        updateCreditDisplay(null);
splice-cep/panel/js/simulation-tests.js:774:        await TestRunner.test('Credit badge exists', async () => {
splice-cep/panel/js/simulation-tests.js:775:            const badge = document.getElementById('creditBadge');
splice-cep/panel/js/simulation-tests.js:776:            TestRunner.assertDefined(badge, 'Credit badge not found');
splice-cep/panel/js/simulation-tests.js:789:        await TestRunner.test('Credit badge click shows login', async () => {
splice-cep/panel/js/simulation-tests.js:793:                const badge = document.getElementById('creditBadge');
splice-cep/panel/js/simulation-tests.js:1270:        await TestRunner.test('Credits endpoint is called', async () => {
splice-cep/panel/js/simulation-tests.js:1273:            // Trigger credits check
splice-cep/panel/js/simulation-tests.js:1274:            if (typeof refreshCredits === 'function') {
splice-cep/panel/js/simulation-tests.js:1275:                await refreshCredits();
splice-cep/panel/js/simulation-tests.js:1277:                const badge = document.getElementById('creditBadge');
splice-cep/panel/js/simulation-tests.js:1283:            const calls = window._apiCallTracker.getCallsTo('/credits');
splice-cep/panel/js/simulation-tests.js:1284:            TestRunner.assert(calls.length >= 0, 'Credits endpoint should be callable');
splice-cep/panel/js/main.js:112:    // Credit badge
splice-cep/panel/js/main.js:113:    ui.creditBadge = document.getElementById('creditBadge');
splice-cep/panel/js/main.js:175:    initCredits();
splice-cep/panel/js/main.js:242:        'creditBadge': { el: ui.creditBadge, desc: 'Credit badge' },
splice-cep/panel/js/main.js:874:                    if (analyzeResponse.status === 402) {
splice-cep/panel/js/main.js:875:                        console.warn('[SPLICE] Takes detection skipped: insufficient credits');
splice-cep/panel/js/main.js:876:                        setStatus('Takes detection skipped: insufficient credits', true);
splice-cep/panel/js/main.js:1448:    // Credit badge click handler (handles login, retry, and refresh)
splice-cep/panel/js/main.js:1449:    if (ui.creditBadge) {
splice-cep/panel/js/main.js:1450:        ui.creditBadge.addEventListener('click', () => {
splice-cep/panel/js/main.js:1451:            // Use the centralized handler from credits.js
splice-cep/panel/js/main.js:1452:            if (typeof handleCreditBadgeClick === 'function') {
splice-cep/panel/js/main.js:1453:                handleCreditBadgeClick();
splice-cep/panel/js/main.js:1455:                // Fallback if credits.js not loaded yet
splice-cep/panel/js/main.js:1462:        console.log('[SPLICE] initModals: Credit badge initialized');
splice-cep/panel/js/main.js:1464:        console.error('[SPLICE] initModals: Credit badge FAILED - #creditBadge missing');
splice-cep/panel/js/main.js:1543: * Show upgrade modal when user tries to access a gated feature
splice-cep/panel/js/main.js:1547:function showUpgradeModal(featureName, requiredTier = 'Pro') {
splice-cep/panel/js/main.js:1548:    const modal = document.getElementById('upgradeModal');
splice-cep/panel/js/main.js:1549:    const featureText = document.getElementById('upgradeFeatureName');
splice-cep/panel/js/main.js:1550:    const tierText = document.getElementById('upgradeRequiredTier');
splice-cep/panel/js/main.js:1564: * Close the upgrade modal
splice-cep/panel/js/main.js:1566:function closeUpgradeModal() {
splice-cep/panel/js/main.js:1567:    const modal = document.getElementById('upgradeModal');
splice-cep/panel/js/main.js:1573:// Expose showUpgradeModal and closeUpgradeModal globally for feature modules
splice-cep/panel/js/main.js:1574:window.showUpgradeModal = showUpgradeModal;
splice-cep/panel/js/main.js:1575:window.closeUpgradeModal = closeUpgradeModal;
splice-cep/panel/js/main.js:1608:        updateCredits();
splice-cep/panel/js/main.js:1673:// CREDITS
splice-cep/panel/js/main.js:1675:function initCredits() {
splice-cep/panel/js/main.js:1676:    updateCredits();
splice-cep/panel/js/main.js:1679:async function updateCredits() {
splice-cep/panel/js/main.js:1680:    if (!ui.creditBadge) return;
splice-cep/panel/js/main.js:1684:        ui.creditBadge.className = 'credit-badge login';
splice-cep/panel/js/main.js:1685:        ui.creditBadge.textContent = 'Login';
splice-cep/panel/js/main.js:1686:        ui.creditBadge.style.display = 'flex';
splice-cep/panel/js/main.js:1692:            `${getBackendUrl()}/credits`,
splice-cep/panel/js/main.js:1703:            ui.creditBadge.textContent = `${hours}h`;
splice-cep/panel/js/main.js:1705:            ui.creditBadge.className = data.hoursRemaining < 1 ? 'credit-badge low' : 'credit-badge ok';
splice-cep/panel/js/main.js:1706:            ui.creditBadge.style.display = 'flex';
splice-cep/panel/js/main.js:1708:            ui.creditBadge.className = 'credit-badge error';
splice-cep/panel/js/main.js:1709:            ui.creditBadge.textContent = 'Error';
splice-cep/panel/js/main.js:1710:            ui.creditBadge.style.display = 'flex';
splice-cep/panel/js/main.js:1713:        ui.creditBadge.className = 'credit-badge error';
splice-cep/panel/js/main.js:1714:        ui.creditBadge.textContent = 'Offline';
splice-cep/panel/js/main.js:1715:        ui.creditBadge.style.display = 'flex';
splice-cep/panel/js/music.js:79:  creditsBadge: null,
splice-cep/panel/js/music.js:142:  musicElements.creditsBadge = document.getElementById('music-credits-badge');
splice-cep/panel/js/music.js:305:async function getMusicCredits() {
splice-cep/panel/js/music.js:310:  const response = await fetchFn(`${backendUrl}/music/credits`, { headers });
splice-cep/panel/js/music.js:569:  updateMusicCreditsDisplay();
splice-cep/panel/js/music.js:1204:    updateMusicCreditsDisplay();
splice-cep/panel/js/music.js:1680:        <p><strong>Cost:</strong> 3 music credits</p>
splice-cep/panel/js/music.js:1709:        <button type="button" id="timelineConfirmBtn" class="btn btn-primary">Generate Timeline Music (3 credits)</button>
splice-cep/panel/js/music.js:1765:    updateMusicCreditsDisplay();
splice-cep/panel/js/music.js:1774:      confirmBtn.textContent = 'Generate Timeline Music (3 credits)';
splice-cep/panel/js/music.js:1808:        <p>Credits Used: ${escapeHtml(result.creditCost || 3)}</p>
splice-cep/panel/js/music.js:1838:async function updateMusicCreditsDisplay() {
splice-cep/panel/js/music.js:1839:  const badge = musicElements.creditsBadge || document.getElementById('music-credits-badge');
splice-cep/panel/js/music.js:1843:    const credits = await getMusicCredits();
splice-cep/panel/js/music.js:1844:    badge.textContent = `${credits.remaining}/${credits.total} songs`;
splice-cep/panel/js/music.js:1845:    badge.className = 'music-credits-badge';
splice-cep/panel/js/music.js:1846:    if (credits.remaining === 0) badge.classList.add('empty');
splice-cep/panel/js/music.js:1847:    else if (credits.remaining <= 2) badge.classList.add('low');
splice-cep/panel/js/music.js:1849:    badge.textContent = 'Credits: --';
splice-cep/panel/js/music.js:1882:  getMusicCredits,