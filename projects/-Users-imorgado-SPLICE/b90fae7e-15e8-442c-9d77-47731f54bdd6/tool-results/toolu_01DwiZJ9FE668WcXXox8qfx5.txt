     1→# FireCut v1.2.4 - Complete Deobfuscation Analysis
     2→## Adobe Premiere Pro CEP Plugin Forensic Analysis
     3→
     4→**Analysis Date**: 2026-01-12
     5→**FireCut Version**: v1.2.4
     6→**Location**: `/Users/imorgado/Desktop/FireCut_v1.2.4/com.firecut.base/lib/`
     7→**Total Files Analyzed**: 40 JavaScript files
     8→**Total Code Size**: ~500KB minified/obfuscated JavaScript
     9→
    10→---
    11→
    12→## Executive Summary
    13→
    14→This document provides a complete deobfuscation and forensic analysis of the FireCut v1.2.4 Adobe Premiere Pro plugin. FireCut is a professional video editing automation tool that uses AI-powered features for:
    15→
    16→- **Silence Cutting** - RMS-based audio analysis
    17→- **Filler Word Removal** - OpenAI Whisper transcription + detection
    18→- **Auto B-roll** - Stock footage search and insertion
    19→- **Caption Generation** - Transcription + styling + animations
    20→- **Auto Zoom** - Transcript-synchronized zoom animations
    21→- **Auto Chapters** - AI chapter detection and markers
    22→- **Workflow Automation** - Multi-step editing pipelines
    23→- **TTS (Text-to-Speech)** - ElevenLabs integration
    24→- **Music Generation** - AI music scoring
    25→
    26→### Key Findings
    27→
    28→✅ **Architecture**: Adobe CEP (Common Extensibility Platform) with Electron-based UI
    29→✅ **Backend**: Node.js with ExtendScript/JSX bridge to Premiere Pro
    30→✅ **AI Services**: OpenAI Whisper, Google Cloud Speech, GPT-4, ElevenLabs
    31→✅ **Stock APIs**: Storyblocks, Pixabay, Pexels, Giphy, Freepik, Artlist, Envato
    32→✅ **Analytics**: PostHog session recording, Sentry error tracking
    33→✅ **Obfuscation**: Heavy string concatenation, hex arithmetic, variable mapping
    34→⚠️ **Security**: License verification is client-side, API keys exposed in code
    35→⚠️ **Credentials**: Sentry DSN, PostHog key, staging API URLs exposed
    36→
    37→---
    38→
    39→## Table of Contents
    40→
    41→1. [Obfuscation Patterns](#1-obfuscation-patterns)
    42→2. [Architecture Overview](#2-architecture-overview)
    43→3. [Feature Module Analysis](#3-feature-module-analysis)
    44→4. [API Endpoints & Backend](#4-api-endpoints--backend)
    45→5. [License & Authentication](#5-license--authentication)
    46→6. [AI Service Integrations](#6-ai-service-integrations)
    47→7. [Stock Media Integrations](#7-stock-media-integrations)
    48→8. [Core Algorithms](#8-core-algorithms)
    49→9. [UI & Event System](#9-ui--event-system)
    50→10. [Security Analysis](#10-security-analysis)
    51→11. [SPLICE Parity Comparison](#11-splice-parity-comparison)
    52→12. [Recommendations](#12-recommendations)
    53→
    54→---
    55→
    56→## 1. Obfuscation Patterns
    57→
    58→FireCut uses multiple overlapping obfuscation techniques to protect its code:
    59→
    60→### Pattern A: String Concatenation
    61→Breaks readable strings into fragments:
    62→
    63→```javascript
    64→// OBFUSCATED
    65→'#colour-ca' + 'ptions-gra' + 'phics-font' + '-colour-tr' + 'igger'
    66→'app.projec' + 't.activeSe' + 'quence.nam' + 'e'
    67→'https://fi' + 'recut.ai/'
    68→
    69→// DEOBFUSCATED
    70→'#colour-captions-graphics-font-colour-trigger'
    71→'app.project.activeSequence.name'
    72→'https://firecut.ai/'
    73→```
    74→
    75→### Pattern B: Hex Arithmetic
    76→Hides numeric constants using mathematical expressions:
    77→
    78→```javascript
    79→// OBFUSCATED (keyboard key codes)
    80→-0x17c0 - 0x3*0xb2e + 0x1cb5*0x2  // = 32 (spacebar)
    81→-0x1c27 - 0x14bf*-0x1 + 0x78d     // = 37 (left arrow)
    82→0x11d2 + 0x4d1*0x2 - 0x1b4d*0x1  // = 39 (right arrow)
    83→
    84→// DEOBFUSCATED
    85→32  // spacebar
    86→37  // left arrow
    87→39  // right arrow
    88→```
    89→
    90→### Pattern C: Variable Mapping Objects
    91→Creates lookup tables to hide string/function references:
    92→
    93→```javascript
    94→// OBFUSCATED
    95→const z = {
    96→  'mLQzy': 'Untitled workflow',
    97→  'oNCUz': '&quot;',
    98→  'DEcKA': '#workflows-list',
    99→  'Shjfy': function(n,k){ return n(k); }
   100→};
   101→z['Shjfy']($, z['DEcKA'])  // Usage
   102→
   103→// DEOBFUSCATED
   104→const CONFIG = {
   105→  'UNTITLED_WORKFLOW': 'Untitled workflow',
   106→  'HTML_QUOTE': '&quot;',
   107→  'WORKFLOW_LIST_SELECTOR': '#workflows-list',
   108→  'callFunction': function(func, arg){ return func(arg); }
   109→};
   110→CONFIG.callFunction($, CONFIG.WORKFLOW_LIST_SELECTOR)
   111→```
   112→
   113→### Pattern D: Array Index Shuffling
   114→Randomizes execution order in switch statements:
   115→
   116→```javascript
   117→// OBFUSCATED
   118→const a = z['ruLjf'].split('|');  // "7|3|4|1|6|2|5|8|0"
   119→let B = 0;
   120→while(true){
   121→  switch(a[B++]){
   122→    case '0': colour_picker.show(); continue;
   123→    case '1': /* different step */ continue;
   124→    // Order is scrambled
   125→  }
   126→}
   127→
   128→// DEOBFUSCATED (linear execution)
   129→colour_picker.show();
   130→// step 1
   131→// step 2
   132→// etc.
   133→```
   134→
   135→### Pattern E: Boolean Encoding
   136→Obscures true/false with array syntax:
   137→
   138→```javascript
   139→!![]      // true
   140→![]       // false
   141→[]===![]  // false
   142→```
   143→
   144→### Pattern F: Unicode Escapes
   145→Hides characters using escape sequences:
   146→
   147→```javascript
   148→'\x20'  // space
   149→'\x22'  // double quote
   150→'\x0a'  // newline
   151→```
   152→
   153→---
   154→
   155→## 2. Architecture Overview
   156→
   157→### Technology Stack
   158→
   159→```
   160→┌─────────────────────────────────────────────────────────┐
   161→│                  FireCut Architecture                   │
   162→├─────────────────────────────────────────────────────────┤
   163→│                                                         │
   164→│  ┌──────────────┐                                      │
   165→│  │   Electron   │  (UI Layer - HTML/CSS/JavaScript)    │
   166→│  │   Frontend   │  - jQuery for DOM manipulation       │
   167→│  └──────┬───────┘  - Pickr for color pickers (15x)     │
   168→│         │          - Select2 for dropdowns              │
   169→│         │                                               │
   170→│  ┌──────▼───────┐                                      │
   171→│  │  CSInterface │  (CEP Bridge)                        │
   172→│  │   (CEP 12)   │  - jsx.evalScript() for host calls  │
   173→│  └──────┬───────┘                                       │
   174→│         │                                               │
   175→│  ┌──────▼───────┐                                      │
   176→│  │ ExtendScript │  (Host Layer - Adobe Premiere Pro)   │
   177→│  │     (JSX)    │  - Sequence manipulation             │
   178→│  └──────────────┘  - Clip operations                   │
   179→│                    - Export/rendering                   │
   180→│                                                         │
   181→│  ┌──────────────┐                                      │
   182→│  │   Node.js    │  (Backend Services)                  │
   183→│  │   Modules    │  - fs, path, os                      │
   184→│  └──────────────┘  - FormData, node-machine-id         │
   185→│                    - FFmpeg integration                 │
   186→│                                                         │
   187→│  ┌──────────────┐                                      │
   188→│  │  External    │                                      │
   189→│  │    APIs      │  - OpenAI Whisper (transcription)    │
   190→│  └──────────────┘  - Stock media (7 providers)         │
   191→│                    - ElevenLabs (TTS)                   │
   192→│                    - firecut.ai backend                 │
   193→└─────────────────────────────────────────────────────────┘
   194→```
   195→
   196→### File Structure
   197→
   198→```
   199→lib/
   200→├── broll/
   201→│   ├── main.js           - B-roll search and insertion
   202→│   ├── helpers.js        - Stock API integrations (30+ functions)
   203→│   └── listeners.js      - B-roll UI event handlers
   204→├── captions/
   205→│   ├── main.js           - Caption generation (Captions class)
   206→│   ├── helpers.js        - Caption utilities
   207→│   └── listeners.js      - Caption UI events
   208→├── chapters/
   209→│   ├── main.js           - Chapter detection
   210→│   ├── helpers.js        - Chapter utilities
   211→│   └── listeners.js      - Chapter UI
   212→├── filler_words/
   213→│   ├── main.js           - Filler word detection
   214→│   ├── helpers.js        - Word filtering
   215→│   └── listeners.js      - Filler word UI
   216→├── js/
   217→│   ├── index.js          - Main initialization
   218→│   ├── turbo.js          - XML timeline manipulation
   219→│   ├── turbo_captions.js - Caption XML generation
   220→│   ├── pr_turbo.js       - PRPROJ file handling
   221→│   ├── fonts_adobe.js    - Font loading
   222→│   ├── timing.js         - Performance tracking
   223→│   ├── abort_control.js  - Undo state management
   224→│   ├── directory_locations_isolated.js - Path setup
   225→│   └── snippets.js       - HTML templates
   226→├── jsx/
   227→│   └── import.js         - JSX execution wrapper
   228→├── multitrack/
   229→│   └── main.js           - Multi-track video
   230→├── music/
   231→│   ├── main.js           - Music generation
   232→│   └── listeners.js      - Music UI
   233→├── profanity/
   234→│   └── main.js           - Profanity detection
   235→├── repetition/
   236→│   └── main.js           - Repetition removal
   237→├── reviews/
   238→│   └── main.js           - Review system
   239→├── shorts/
   240→│   ├── main.js           - Highlight detection
   241→│   └── listeners.js      - Shorts UI
   242→├── silence_cutting/
   243→│   ├── main.js           - RMS silence detection
   244→│   ├── helpers.js        - Audio analysis
   245→│   └── listeners.js      - Silence cutting UI
   246→├── surveys/
   247→│   └── main.js           - User feedback
   248→├── tts/
   249→│   ├── main.js           - Text-to-speech
   250→│   └── listeners.js      - TTS UI
   251→├── utils/
   252→│   ├── listeners.js      - Global event handlers (31 functions)
   253→│   └── utils.js          - Core utilities (74KB, 100+ functions)
   254→├── workflows/
   255→│   ├── main.js           - Workflow orchestration
   256→│   ├── ui.js             - Workflow UI (34 functions)
   257→│   └── listeners.js      - Workflow events
   258→└── zooms/
   259→    ├── main.js           - Zoom transcript system (33KB)
   260→    ├── helpers.js        - Zoom curves and face detection
   261→    └── listeners.js      - Zoom UI
   262→```
   263→
   264→---
   265→
   266→## 3. Feature Module Analysis
   267→
   268→### 3.1 Silence Cutting (`lib/silence_cutting/main.js`)
   269→
   270→**Algorithm**: RMS-Based Silence Detection
   271→**Dependencies**: None (self-contained audio analysis)
   272→
   273→**Core Functions**:
   274→- `remove_silences_sequential()` - Main orchestrator
   275→- `analyze_audio()` - Extract audio samples from video
   276→- `detect_silence_threshold()` - Calculate RMS dBFS
   277→- `calculate_silences()` - Identify silent regions
   278→- `remove_silences()` - Delete clips in timeline
   279→
   280→**RMS Algorithm**:
   281→```javascript
   282→// Root Mean Square Calculation
   283→let sumSquares = 0;
   284→for (let i = 0; i < samples.length; i++) {
   285→  sumSquares += samples[i] * samples[i];
   286→}
   287→const rms = Math.sqrt(sumSquares / samples.length);
   288→
   289→// Convert to dBFS (decibels relative to full scale)
   290→const dbfs = 20 * Math.log10(rms);
   291→
   292→// Threshold check (e.g., -40 dBFS)
   293→const isSilent = dbfs < threshold;
   294→```
   295→
   296→**Tightness Parameter**: Determines minimum silence duration (0-100 scale)
   297→
   298→---
   299→
   300→### 3.2 Filler Word Removal (`lib/filler_words/main.js`)
   301→
   302→**Dependencies**: OpenAI Whisper API
   303→**Endpoint**: `https://firecut.ai/api/filler_words/`
   304→
   305→**Filler Words Detected**:
   306→- English: "um", "uh", "ah", "er", "hmm", "like", "you know", "I mean"
   307→- Multi-language support
   308→
   309→**Process**:
   310→1. Render audio from sequence (MP3)
   311→2. Send to Whisper API for word-level transcription
   312→3. Extract timestamps for each word
   313→4. Filter for filler words
   314→5. Delete corresponding clips in timeline
   315→
   316→**Word-Level Timestamp Example**:
   317→```json
   318→{
   319→  "words": [
   320→    {"word": "So", "start": 0.5, "end": 0.7},
   321→    {"word": "um", "start": 0.8, "end": 1.0},  // FILLER
   322→    {"word": "I", "start": 1.1, "end": 1.2},
   323→    {"word": "think", "start": 1.3, "end": 1.6}
   324→  ]
   325→}
   326→```
   327→
   328→---
   329→
   330→### 3.3 B-roll Stock Footage (`lib/broll/helpers.js`)
   331→
   332→**Stock Library Integrations** (30+ functions):
   333→- **Storyblocks** - Video clips, images
   334→- **Pixabay** - Free stock media
   335→- **Pexels** - Free stock videos/photos
   336→- **Giphy** - GIF animations
   337→- **Freepik** - Illustrations
   338→- **Artlist** - Premium stock
   339→- **Envato** - Elements marketplace
   340→
   341→**Search Process**:
   342→1. Extract keywords from transcript using GPT-4
   343→2. Query all enabled stock libraries
   344→3. Filter by orientation (landscape/portrait/square)
   345→4. Download and cache media
   346→5. Insert into timeline with transitions
   347→
   348→**API Call Example**:
   349→```javascript
   350→async function search_storyblocks(query, mediaTypes=['video']) {
   351→  const apiKey = await get_storyblocks_api_key();
   352→  const url = `https://api.storyblocks.com/api/v2/search/?query=${query}&media_types=${mediaTypes.join(',')}`;
   353→
   354→  const response = await fetch(url, {
   355→    headers: {
   356→      'Authorization': `Bearer ${apiKey}`
   357→    }
   358→  });
   359→
   360→  return response.json();
   361→}
   362→```
   363→
   364→**Chrome Engine Download**: Exposed URL for headless Chrome binary:
   365→```
   366→https://editai-server-backup.ams3.digitaloceanspaces.com/engine/Chrome/
   367→```
   368→
   369→---
   370→
   371→### 3.4 Caption Generation (`lib/captions/main.js`)
   372→
   373→**Captions Class** - Three-tier state model:
   374→1. **Raw Transcript** - From Whisper API
   375→2. **Styled Captions** - User customization applied
   376→3. **Rendered Captions** - Final output in timeline
   377→
   378→**Styling Options**:
   379→- **Font**: 200+ Adobe fonts
   380→- **Colors**: Solid or gradient (2-color)
   381→- **Outline**: Thickness and color
   382→- **Shadow**: Offset, blur, color
   383→- **Box**: Background with gradient support
   384→- **Animations**: Wiggle, highlight, glow, underline, box, reveal
   385→
   386→**15 Color Pickers** (via Pickr library):
   387→1. Font color (solid)
   388→2. Font gradient color 1
   389→3. Font gradient color 2
   390→4. Outline color
   391→5. Box color (solid)
   392→6. Box gradient color 1
   393→7. Box gradient color 2
   394→8. Shadow color
   395→9. Animation highlight color
   396→10. Animation glow color
   397→11. Animation highlight stroke color
   398→12. Animation underline color
   399→13. Animation box color
   400→14. Animation reveal outline color
   401→15. Chapter clips font color
   402→
   403→**Export Formats**:
   404→- SRT (SubRip)
   405→- VTT (WebVTT)
   406→- Embedded in timeline
   407→
   408→---
   409→
   410→### 3.5 Auto Zoom (`lib/zooms/main.js`)
   411→
   412→**System**: Transcript-synchronized zoom animations
   413→
   414→**Classes**:
   415→- `ZoomsHighlight` - Single zoom region with time boundaries
   416→- `ZoomsTranscript` - Main controller managing transcript + zooms
   417→
   418→**Zoom Triggers**:
   419→- Manual selection (user highlights text)
   420→- AI-detected key phrases (OpenAI GPT-4)
   421→- Frequency-based (every N words/seconds)
   422→
   423→**Zoom Parameters**:
   424→- Scale factor (1.0 - 3.0x)
   425→- Center point (X, Y coordinates)
   426→- Face detection (auto-center on detected faces)
   427→- Asymmetric easing curves (separate in/out)
   428→
   429→**Curve Presets**:
   430→```javascript
   431→const zooms_curve_presets = {
   432→  'sharp-cut': {
   433→    startPower: 1,
   434→    startDuration: 0,
   435→    endPower: 1,
   436→    endDuration: 0
   437→  },
   438→  'smooth-in-sharp-out': {
   439→    startPower: 2,
   440→    startDuration: 50,
   441→    endPower: 1,
   442→    endDuration: 0
   443→  },
   444→  'smooth-in-ramp-out': {
   445→    startPower: 2,
   446→    startDuration: 40,
   447→    endPower: 2,
   448→    endDuration: 60
   449→  }
   450→};
   451→```
   452→
   453→**Bidirectional Sync**:
   454→- **UI → Premiere**: User edits zoom → JSX updates clips
   455→- **Premiere → UI**: Clips modified in Premiere → polling detects → syncs back
   456→
   457→---
   458→
   459→### 3.6 Workflow Automation (`lib/workflows/main.js` + `lib/workflows/ui.js`)
   460→
   461→**Workflow Structure**:
   462→```javascript
   463→{
   464→  id: string,
   465→  name: string,
   466→  steps: [
   467→    {
   468→      type: 'silenceCutting' | 'zooms' | 'broll' | 'captions' | 'profanity' | 'music' | 'chapters',
   469→      settings: {
   470→        // Step-specific configuration
   471→      }
   472→    }
   473→  ]
   474→}
   475→```
   476→
   477→**Orchestration**:
   478→```javascript
   479→async function workflowsRun(workflow) {
   480→  for (const step of workflow.steps) {
   481→    switch (step.type) {
   482→      case 'silenceCutting':
   483→        await runSilenceCuttingStep(step.settings);
   484→        break;
   485→      case 'zooms':
   486→        await runAddZoomsStep(step.settings);
   487→        break;
   488→      case 'broll':
   489→        await runBrollStep(step.settings);
   490→        break;
   491→      case 'captions':
   492→        await runCaptionsStep(step.settings);
   493→        break;
   494→      case 'chapters':
   495→        await runAddChaptersStep(step.settings);
   496→        break;
   497→    }
   498→  }
   499→}
   500→```
   501→
   502→**UI Functions** (34 total):
   503→- `workflowsRenderList()` - Display saved workflows
   504→- `workflowsRenderEditor()` - Step configuration
   505→- `workflowsRenderSilenceStepSettings()` - Silence cutting config
   506→- `workflowsRenderZoomsStepSettings()` - Zoom config
   507→- `workflowsRenderBrollStepSettings()` - B-roll config (with JSX async)
   508→- `workflowsRenderCaptionsStepSettings()` - Caption config
   509→- `workflowsLoadChapterClips()` - API integration for chapter templates
   510→
   511→---
   512→
   513→### 3.7 Auto Chapters (`lib/chapters/main.js`)
   514→
   515→**Chapter Detection**:
   516→- AI-powered analysis of transcript
   517→- Identifies topic shifts and transitions
   518→- Generates chapter markers in timeline
   519→
   520→**Chapter Clips**:
   521→- Motion graphics templates (MOGRT files)
   522→- Fetched from API: `POST https://firecut.ai/api/get_chapter_clips/`
   523→- Preview videos for each template
   524→- User selection via grid UI
   525→
   526→---
   527→
   528→### 3.8 Text-to-Speech (`lib/tts/main.js`)
   529→
   530→**Integration**: ElevenLabs API
   531→
   532→**Features**:
   533→- Voice preview and selection
   534→- Custom text input
   535→- Automatic insertion at playhead
   536→- Sync with timeline
   537→
   538→---
   539→
   540→### 3.9 Music Generation (`lib/music/main.js`)
   541→
   542→**AI Music Generation**:
   543→- Analyzes video content
   544→- Generates appropriate background music
   545→- Automatic tempo and mood matching
   546→
   547→---
   548→
   549→## 4. API Endpoints & Backend
   550→
   551→### Backend Configuration
   552→
   553→**Production**:
   554→```javascript
   555→API_URL = 'https://firecut.ai/'
   556→```
   557→
   558→**Staging** (exposed in code):
   559→```javascript
   560→API_URL = 'https://editai-api-staging.suhailidrees.com/'
   561→```
   562→
   563→**Development**:
   564→```javascript
   565→API_URL = 'http://127.0.0.1:8000/'
   566→```
   567→
   568→### Main API Endpoints
   569→
   570→| Endpoint | Method | Purpose |
   571→|----------|--------|---------|
   572→| `/api/check_license_key/` | POST | License validation |
   573→| `/api/openai_link_whisper/` | POST | Audio transcription (OpenAI) |
   574→| `/api/google_transcribe_link/` | POST | Audio transcription (Google) |
   575→| `/api/get_chapter_clips/` | POST | Chapter template library |
   576→| `/api/filler_words/` | POST | Filler word detection |
   577→| `/api/time_saved/` | POST | Usage statistics |
   578→
   579→### Request Format
   580→
   581→```javascript
   582→// License Check
   583→POST /api/check_license_key/
   584→{
   585→  "license_key": "ABC123...",
   586→  "os_hostname": "MacBook-Pro.local",
   587→  "machine_id": "a1b2c3d4...",
   588→  "app_version": "1.2.4",
   589→  "engine": "premiere",
   590→  "userGuid": "user-uuid"
   591→}
   592→
   593→// Whisper Transcription
   594→POST /api/openai_link_whisper/
   595→FormData:
   596→  - file: audio.mp3
   597→  - model: whisper-1
   598→  - language: en
   599→  - response_format: verbose_json
   600→  - temperature: 0
   601→  - prompt: (optional custom spellings)
   602→Headers:
   603→  - Authorization: Bearer {license_key}
   604→  - APPVERSION: 1.2.4
   605→```
   606→
   607→---
   608→
   609→## 5. License & Authentication
   610→
   611→### License Verification Flow
   612→
   613→```javascript
   614→async function verify_license() {
   615→  // 1. Get license key
   616→  const licenseKey = $('#license-key').val();
   617→
   618→  // 2. Gather system info
   619→  const machineId = node_machine_id.machineIdSync();
   620→  const hostname = os.hostname();
   621→
   622→  // 3. POST to server
   623→  const response = await fetch(API_URL + 'api/check_license_key/', {
   624→    method: 'POST',
   625→    body: JSON.stringify({
   626→      license_key: licenseKey,
   627→      os_hostname: hostname,
   628→      machine_id: machineId,
   629→      app_version: app_version,
   630→      engine: engine,
   631→      userGuid: userGuid
   632→    }),
   633→    headers: {'Content-type': 'application/json'}
   634→  });
   635→
   636→  const data = await response.json();
   637→
   638→  // 4. Store if valid
   639→  if (data.message == 'License key exists') {
   640→    apiKey_editai = licenseKey;
   641→    apiKey_editai_verified = true;
   642→    apiKey_editai_verified_plan = data.user.plan;
   643→    apiKey_editai_verified_features_tier = data.user.features_tier;
   644→
   645→    // Save to disk
   646→    fs.writeFile(
   647→      path.join(DIR_app_data_base, 'license_key.json'),
   648→      JSON.stringify({license_key: licenseKey})
   649→    );
   650→  }
   651→}
   652→```
   653→
   654→### Feature Tier System
   655→
   656→```javascript
   657→const FEATURES_TIER = {
   658→  'silence-cutting-basic': 10,
   659→  'workflows': 15,
   660→  'remove-filler-words': 15,
   661→  'zooms': 15,
   662→  'chapters': 15,
   663→  'takes': 15,
   664→  'multitrack-video': 15,
   665→  'captions': 15,
   666→  'broll': 15,
   667→  'transcribe_for_captions': 15,
   668→  'add_graphic_captions': 15,
   669→  'tts': 15,
   670→  'music': 15
   671→};
   672→```
   673→
   674→### License Storage
   675→
   676→- **File**: `{DIR_app_data_base}/license_key.json`
   677→- **Format**: `{"license_key": "ABC123..."}`
   678→- **Validation**: Client-side only (can be bypassed)
   679→
   680→---
   681→
   682→## 6. AI Service Integrations
   683→
   684→### 6.1 OpenAI Whisper
   685→
   686→**Use Cases**:
   687→- Audio transcription for captions
   688→- Filler word detection
   689→- Transcript generation for all features
   690→
   691→**Configuration**:
   692→```javascript
   693→WHISPER_OPTIONS = {
   694→  host: 'firecut.ai',
   695→  path: '/api/openai_link_whisper/',
   696→  method: 'POST',
   697→  protocol: 'https:',
   698→  headers: {
   699→    'Authorization': 'Bearer ' + apiKey_editai,
   700→    'APPVERSION': app_version
   701→  }
   702→}
   703→```
   704→
   705→**File Size Limit**: 25MB (OpenAI constraint)
   706→
   707→**Retry Logic**:
   708→```javascript
   709→retries: 3
   710→delay: 1000ms (exponential backoff)
   711→timeout: 600000ms (10 minutes)
   712→```
   713→
   714→---
   715→
   716→### 6.2 Google Cloud Speech
   717→
   718→**Alternative transcription provider**
   719→**Endpoint**: `/api/google_transcribe_link/`
   720→
   721→---
   722→
   723→### 6.3 OpenAI GPT-4
   724→
   725→**Use Cases**:
   726→- B-roll keyword extraction
   727→- Zoom key phrase detection
   728→- Chapter topic detection
   729→
   730→---
   731→
   732→### 6.4 ElevenLabs TTS
   733→
   734→**Text-to-Speech integration**
   735→**Voice library**: Preview and selection UI
   736→
   737→---
   738→
   739→## 7. Stock Media Integrations
   740→
   741→### API Implementations
   742→
   743→**Storyblocks**:
   744→```javascript
   745→async function search_storyblocks(query, mediaTypes) {
   746→  const url = `https://api.storyblocks.com/api/v2/search/`;
   747→  // Returns: {results: [{id, title, preview_url, download_url}]}
   748→}
   749→```
   750→
   751→**Pixabay**:
   752→```javascript
   753→async function search_pixabay(query) {
   754→  const url = `https://pixabay.com/api/videos/`;
   755→  // Free API with rate limits
   756→}
   757→```
   758→
   759→**Pexels**:
   760→```javascript
   761→async function search_pexels(query) {
   762→  const url = `https://api.pexels.com/videos/search`;
   763→  // Free API, requires API key
   764→}
   765→```
   766→
   767→**Giphy**:
   768→```javascript
   769→async function search_giphy(query) {
   770→  const url = `https://api.giphy.com/v1/gifs/search`;
   771→  // GIF animations only
   772→}
   773→```
   774→
   775→### B-roll Workflow
   776→
   777→1. **Keyword Extraction**: GPT-4 analyzes transcript → generates search terms
   778→2. **Multi-Library Search**: Queries all enabled stock APIs in parallel
   779→3. **Filtering**: Orientation matching, duration limits
   780→4. **Download**: Media cached locally
   781→5. **Insertion**: Added to timeline at specified intervals
   782→6. **Transitions**: Configurable video transitions between clips
   783→7. **Scaling**: Fill, fit, or crop modes
   784→
   785→---
   786→
   787→## 8. Core Algorithms
   788→
   789→### 8.1 RMS Silence Detection
   790→
   791→**Purpose**: Identify silent regions in audio for removal
   792→
   793→**Steps**:
   794→1. Extract audio samples from video
   795→2. Calculate RMS for each sample window
   796→3. Convert RMS to dBFS (decibels relative to full scale)
   797→4. Compare against threshold (-30 to -80 dBFS)
   798→5. Identify continuous silent regions
   799→6. Apply minimum silence duration filter
   800→7. Delete corresponding clips from timeline
   801→
   802→**Formula**:
   803→```
   804→RMS = sqrt(sum(sample²) / N)
   805→dBFS = 20 * log10(RMS)
   806→isSilent = dBFS < threshold
   807→```
   808→
   809→---
   810→
   811→### 8.2 Transcript Quantization
   812→
   813→**Purpose**: Align word timestamps to video frame boundaries
   814→
   815→```javascript
   816→function quantizeTranscript(transcript, frameRate) {
   817→  transcript.segments.forEach(segment => {
   818→    segment.start = Math.round(segment.start / frameRate) * frameRate;
   819→    segment.end = Math.round(segment.end / frameRate) * frameRate;
   820→
   821→    segment.words.forEach(word => {
   822→      word.start = Math.round(word.start / frameRate) * frameRate;
   823→      word.end = Math.round(word.end / frameRate) * frameRate;
   824→    });
   825→  });
   826→}
   827→```
   828→
   829→---
   830→
   831→### 8.3 Face Detection for Zoom
   832→
   833→**Purpose**: Auto-center zoom on detected faces
   834→
   835→```javascript
   836→async function detect_face_at_time(timecode) {
   837→  // 1. Export frame at timecode
   838→  const framePath = await exportFrame(timecode);
   839→
   840→  // 2. Analyze with face detection API
   841→  const faces = await detectFaces(framePath);
   842→
   843→  // 3. Calculate center point
   844→  if (faces.length > 0) {
   845→    const face = faces[0];  // Use first detected face
   846→    const centerX = face.x + (face.width / 2);
   847→    const centerY = face.y + (face.height / 2);
   848→    return {x: centerX, y: centerY};
   849→  }
   850→
   851→  return null;  // No face detected
   852→}
   853→```
   854→
   855→---
   856→
   857→## 9. UI & Event System
   858→
   859→### Global Event Listeners (31 functions)
   860→
   861→From `lib/utils/listeners.js`:
   862→
   863→1. **set_hotkey_listeners()** - Keyboard shortcuts
   864→   - Space: Play/Pause
   865→   - Left/Right: Seek (1 frame or 1 second with Ctrl/Cmd)
   866→   - I/O: Set In/Out points (Shift: Go to)
   867→   - Delete: Delete selected clips
   868→   - R/V: Razor/Select tool
   869→   - Ctrl+Z/Y: Undo/Redo
   870→   - Ctrl+=/−: Zoom in/out
   871→
   872→2. **set_dialog_listeners()** - File import/export
   873→3. **set_timeline_tools_listeners()** - Timeline controls
   874→4. **setup_colour_inputs()** - 15 Pickr color pickers
   875→5. **set_undo_listeners()** - Undo/redo system
   876→6. **set_settings_listeners()** - Settings panel
   877→7. **set_license_key_input_listener()** - License activation
   878→8. **set_feedback_board_listeners()** - User feedback
   879→
   880→### IPC Communication
   881→
   882→**Electron Main Process Communication**:
   883→
   884→```javascript
   885→// File dialog events
   886→ipcRenderer.on('selected-save-path', (event, data) => {
   887→  switch(data.action) {
   888→    case 'export-fcproj':
   889→      save_fcproj(file_path = data.path);
   890→      break;
   891→    case 'export-xml':
   892→      nw_export_to_xml(data.path);
   893→      showSurvey({survey_name: 'export_xml_v1'});
   894→      break;
   895→    case 'export-fcpxml':
   896→      nw_export_to_fcpxml(data.path);
   897→      break;
   898→    case 'export-srt-captions-menu':
   899→      export_srt_nw(data.path);
   900→      break;
   901→    case 'export-vtt-captions-menu':
   902→      export_vtt_nw(data.path);
   903→      break;
   904→  }
   905→  ipcRenderer.send('show-file-in-folder', data.path);
   906→});
   907→```
   908→
   909→---
   910→
   911→## 10. Security Analysis
   912→
   913→### ✅ Positive Security Measures
   914→
   915→1. **License Binding**: Machine ID + hostname fingerprinting
   916→2. **Bearer Token Auth**: API requests use license key as auth
   917→3. **HTTPS Only**: All external APIs use encrypted connections
   918→4. **Local Storage**: License key stored in local JSON file
   919→
   920→### ⚠️ Security Concerns
   921→
   922→#### 1. **Exposed Credentials**
   923→
   924→**Sentry DSN** (error tracking):
   925→```
   926→https://[redacted]@o4504891499024384.ingest.us.sentry.io/4506911499927552
   927→```
   928→
   929→**PostHog Key** (analytics):
   930→```
   931→phc_2zVYeDlMKnbcE9tf8dvWkZTjL9mvMEXABi9UBFJdkhs
   932→```
   933→
   934→**Staging API URL**:
   935→```
   936→https://editai-api-staging.suhailidrees.com/
   937→```
   938→
   939→**Chrome Engine URL**:
   940→```
   941→https://editai-server-backup.ams3.digitaloceanspaces.com/engine/Chrome/
   942→```
   943→
   944→#### 2. **Client-Side License Validation**
   945→
   946→License checks are performed in JavaScript and can be bypassed by:
   947→- Modifying `apiKey_editai_verified` variable
   948→- Skipping `verify_license()` calls
   949→- Patching feature tier checks
   950→
   951→**Recommendation**: Move license validation to server-side with cryptographic signatures.
   952→
   953→#### 3. **No Input Validation on JSX Execution**
   954→
   955→```javascript
   956→await jsxExecute('deleteTrackItemByNodeId("' + nodeId + '")');
   957→```
   958→
   959→**Risk**: If `nodeId` contains special characters, could inject arbitrary ExtendScript code.
   960→
   961→**Recommendation**: Sanitize all inputs before string interpolation.
   962→
   963→#### 4. **API Keys in Stock Integrations**
   964→
   965→Some stock library API keys may be hardcoded or easily extractable from the client code.
   966→
   967→#### 5. **No Request Rate Limiting (Client-Side)**
   968→
   969→Unlimited API calls can be made to backend, potentially causing:
   970→- Increased costs for API usage
   971→- Server overload
   972→- Abuse potential
   973→
   974→---
   975→
   976→## 11. SPLICE Parity Comparison
   977→
   978→### Feature Comparison Matrix
   979→
   980→| Feature | FireCut | SPLICE | Notes |
   981→|---------|---------|--------|-------|
   982→| **Silence Cutting** | ✅ RMS-based | ✅ Implemented | SPLICE backend has similar implementation |
   983→| **Filler Word Removal** | ✅ Whisper API | ❌ Missing | SPLICE needs Whisper integration |
   984→| **B-roll Stock Search** | ✅ 7 providers | ❌ Missing | Major feature gap |
   985→| **Caption Generation** | ✅ Full styling | ⚠️ Basic | SPLICE has basic captions, lacks advanced styling |
   986→| **Auto Zoom** | ✅ Transcript-sync | ❌ Missing | Complex feature to implement |
   987→| **Auto Chapters** | ✅ AI-powered | ❌ Missing | Requires GPT-4 integration |
   988→| **Workflow Automation** | ✅ Multi-step | ❌ Missing | Major productivity feature |
   989→| **TTS** | ✅ ElevenLabs | ❌ Missing | Voice generation feature |
   990→| **Music Generation** | ✅ AI music | ✅ Implemented | SPLICE has this via Replicate |
   991→| **License System** | ✅ Server-based | ✅ Implemented | Both have license validation |
   992→| **Analytics** | ✅ PostHog+Sentry | ❌ Missing | SPLICE needs usage tracking |
   993→| **Undo System** | ✅ State save | ❌ Missing | SPLICE relies on Premiere's undo |
   994→| **Multi-format Export** | ✅ FCP/XML/SRT/VTT | ❌ Missing | SPLICE exports limited formats |
   995→
   996→### Feature Gaps (SPLICE Missing)
   997→
   998→1. **B-roll Stock Integration** (7 APIs)
   999→   - Storyblocks, Pixabay, Pexels, Giphy, Freepik, Artlist, Envato
  1000→   - Keyword extraction via GPT-4
  1001→   - Media filtering and insertion
  1002→
  1003→2. **Advanced Caption Styling**
  1004→   - 15 color pickers for granular control
  1005→   - Gradient support (2-color)
  1006→   - Animations: wiggle, highlight, glow, underline, box, reveal
  1007→   - 200+ Adobe font integration
  1008→
  1009→3. **Auto Zoom System**
  1010→   - Transcript synchronization
  1011→   - Face detection
  1012→   - Asymmetric easing curves
  1013→   - Bidirectional UI ↔ Premiere sync
  1014→
  1015→4. **Workflow Automation**
  1016→   - Multi-step pipelines
  1017→   - Configurable per-step settings
  1018→   - Save/load workflow presets
  1019→
  1020→5. **Filler Word Detection**
  1021→   - Whisper API integration
  1022→   - Word-level timestamp extraction
  1023→   - Automatic removal from timeline
  1024→
  1025→6. **Auto Chapters**
  1026→   - AI topic detection
  1027→   - MOGRT template library
  1028→   - Preview and selection UI
  1029→
  1030→7. **TTS Integration**
  1031→   - ElevenLabs voice library
  1032→   - Voice preview
  1033→   - Timeline insertion
  1034→
  1035→8. **Analytics & Tracking**
  1036→   - PostHog session recording
  1037→   - Sentry error tracking
  1038→   - Usage statistics
  1039→
  1040→9. **Export Formats**
  1041→   - Final Cut Pro XML
  1042→   - DaVinci Resolve XML
  1043→   - SRT/VTT captions
  1044→
  1045→10. **Undo System**
  1046→    - State save/restore via project export
  1047→    - Abort and rollback capability
  1048→
  1049→### SPLICE Advantages
  1050→
  1051→1. **Modern Architecture**
  1052→   - Next.js frontend (vs jQuery)
  1053→   - Railway deployment (vs self-hosted)
  1054→   - PostgreSQL + Redis (vs file-based storage)
  1055→
  1056→2. **Security**
  1057→   - JWT authentication with refresh tokens
  1058→   - CSRF protection
  1059→   - Token blacklist with TTL
  1060→   - Server-side validation
  1061→
  1062→3. **Music Generation**
  1063→   - Already implemented via Replicate
  1064→   - Cloudflare R2 storage for files
  1065→
  1066→4. **Code Quality**
  1067→   - Clean, non-obfuscated code
  1068→   - TypeScript support
  1069→   - Modern React patterns
  1070→
  1071→---
  1072→
  1073→## 12. Recommendations
  1074→
  1075→### For SPLICE Development
  1076→
  1077→#### Priority 1: High-Impact Features (Implement First)
  1078→
  1079→1. **Filler Word Removal**
  1080→   - Integrate OpenAI Whisper API
  1081→   - Reuse existing transcript logic
  1082→   - Estimated effort: 2-3 days
  1083→
  1084→2. **Advanced Caption Styling**
  1085→   - Add color picker components
  1086→   - Implement gradient support
  1087→   - Add animation options
  1088→   - Estimated effort: 5-7 days
  1089→
  1090→3. **B-roll Stock Integration** (MVP)
  1091→   - Start with 2-3 providers (Pixabay, Pexels)
  1092→   - GPT-4 keyword extraction
  1093→   - Basic insertion logic
  1094→   - Estimated effort: 7-10 days
  1095→
  1096→4. **Analytics & Tracking**
  1097→   - PostHog integration
  1098→   - Usage metrics
  1099→   - Error tracking (Sentry)
  1100→   - Estimated effort: 2-3 days
  1101→
  1102→#### Priority 2: Productivity Features
  1103→
  1104→5. **Workflow Automation**
  1105→   - Multi-step pipeline system
  1106→   - Workflow templates
  1107→   - Save/load presets
  1108→   - Estimated effort: 10-14 days
  1109→
  1110→6. **Auto Zoom System**
  1111→   - Transcript synchronization
  1112→   - Basic zoom animations
  1113→   - (Face detection: optional advanced feature)
  1114→   - Estimated effort: 7-10 days
  1115→
  1116→7. **Export Formats**
  1117→   - FCP XML
  1118→   - DaVinci Resolve XML
  1119→   - SRT/VTT captions
  1120→   - Estimated effort: 3-5 days
  1121→
  1122→#### Priority 3: Advanced Features
  1123→
  1124→8. **Auto Chapters**
  1125→   - GPT-4 topic detection
  1126→   - Chapter marker generation
  1127→   - (MOGRT templates: optional)
  1128→   - Estimated effort: 5-7 days
  1129→
  1130→9. **TTS Integration**
  1131→   - ElevenLabs API
  1132→   - Voice library
  1133→   - Timeline insertion
  1134→   - Estimated effort: 3-5 days
  1135→
  1136→10. **Undo System**
  1137→    - State save/restore
  1138→    - Rollback capability
  1139→    - Estimated effort: 5-7 days
  1140→
  1141→### Security Improvements
  1142→
  1143→1. **Move License Validation to Server**
  1144→   - Cryptographic signatures
  1145→   - Token-based auth instead of license key directly
  1146→   - Rate limiting per user
  1147→
  1148→2. **Input Sanitization**
  1149→   - Validate all user inputs
  1150→   - Escape special characters in JSX execution
  1151→   - Prevent injection attacks
  1152→
  1153→3. **Hide API Keys**
  1154→   - Store in environment variables
  1155→   - Proxy stock API calls through backend
  1156→   - Never expose keys in client code
  1157→
  1158→4. **Implement Rate Limiting**
  1159→   - Per-user API quotas
  1160→   - Throttle expensive operations
  1161→   - Monitor abuse patterns
  1162→
  1163→### Architecture Improvements
  1164→
  1165→1. **Use Modern UI Framework**
  1166→   - React/Vue instead of jQuery
  1167→   - Component-based architecture
  1168→   - Better state management
  1169→
  1170→2. **TypeScript**
  1171→   - Type safety throughout codebase
  1172→   - Better IDE support
  1173→   - Catch errors at compile-time
  1174→
  1175→3. **Testing**
  1176→   - Unit tests for algorithms
  1177→   - Integration tests for API calls
  1178→   - E2E tests for critical workflows
  1179→
  1180→4. **Code Splitting**
  1181→   - Lazy load feature modules
  1182→   - Reduce initial bundle size
  1183→   - Improve load performance
  1184→
  1185→---
  1186→
  1187→## Conclusion
  1188→
  1189→FireCut v1.2.4 is a sophisticated video editing automation tool with extensive AI integrations and professional-grade features. The codebase is heavily obfuscated but follows clear architectural patterns once deobfuscated.
  1190→
  1191→**Key Strengths**:
  1192→- Comprehensive feature set (10+ major features)
  1193→- Multiple AI service integrations
  1194→- Professional workflow automation
  1195→- Multi-format export support
  1196→
  1197→**Key Weaknesses**:
  1198→- Client-side license validation (bypassable)
  1199→- Exposed credentials (Sentry, PostHog, staging URLs)
  1200→- Heavy jQuery dependency (dated architecture)
  1201→- Obfuscation provides minimal security benefit
  1202→
  1203→**SPLICE Development Path**:
  1204→SPLICE has a strong foundation with modern architecture, security, and core music generation. To achieve feature parity with FireCut, focus on:
  1205→1. Filler word removal (quick win)
  1206→2. Advanced caption styling (user-facing value)
  1207→3. B-roll stock integration (major differentiator)
  1208→4. Analytics and workflow automation (productivity boost)
  1209→
  1210→**Total Estimated Implementation**: 50-70 days for all priority features, assuming 1-2 developers working full-time.
  1211→
  1212→---
  1213→
  1214→## Appendix: Complete Function Reference
  1215→
  1216→### lib/utils/utils.js (74KB - 100+ functions)
  1217→
  1218→**License & Auth**:
  1219→- `verify_license()`
  1220→- `verify_license_throttled()`
  1221→- `regular_license_key_checker()`
  1222→- `load_license_key()`
  1223→
  1224→**Transcription**:
  1225→- `transcribeSequence()`
  1226→- `transcribe_audio_file()`
  1227→- `retryFormDataSubmit()`
  1228→
  1229→**Premiere Pro Integration**:
  1230→- `jsxExecute()`
  1231→- `duplicate_sequence()`
  1232→- `render()`
  1233→- `make_in_out_selection()`
  1234→
  1235→**State Management**:
  1236→- `test_45_save_state()`
  1237→- `test_47_load_state()`
  1238→
  1239→**Utilities**:
  1240→- `timeConversion()`
  1241→- `humanFileSize()`
  1242→- `tools.arraysToCSV()`
  1243→- `tools.HSLToRGB()`
  1244→- `tools.escapeHTML()`
  1245→
  1246→### lib/utils/listeners.js (73KB - 31 functions)
  1247→
  1248→**Event Listeners**:
  1249→- `set_hotkey_listeners()` - Keyboard shortcuts
  1250→- `setup_colour_inputs()` - 15 Pickr instances
  1251→- `set_dialog_listeners()` - File dialogs
  1252→- `set_timeline_tools_listeners()` - Timeline controls
  1253→- `set_undo_listeners()` - Undo/redo
  1254→- `set_license_key_input_listener()` - License input
  1255→- `set_feedback_board_listeners()` - User feedback
  1256→
  1257→**Color Management**:
  1258→- `updateFontGradientPreviews()`
  1259→- `updateBoxGradientPreviews()`
  1260→
  1261→### lib/broll/helpers.js (30+ functions)
  1262→
  1263→**Stock Library Searches**:
  1264→- `search_storyblocks()`
  1265→- `search_pixabay()`
  1266→- `search_pexels()`
  1267→- `search_giphy()`
  1268→- `search_freepik()`
  1269→- `search_artlist()`
  1270→- `search_envato()`
  1271→
  1272→**Keyword Extraction**:
  1273→- `extract_keywords_gpt4()`
  1274→
  1275→### lib/silence_cutting/main.js (8 functions)
  1276→
  1277→**Silence Detection**:
  1278→- `remove_silences_sequential()`
  1279→- `analyze_audio()`
  1280→- `detect_silence_threshold()`
  1281→- `calculate_silences()`
  1282→- `remove_silences()`
  1283→
  1284→### lib/captions/main.js (Captions class)
  1285→
  1286→**Caption Generation**:
  1287→- `constructor()`
  1288→- `generateCaptions()`
  1289→- `applyStyling()`
  1290→- `exportSRT()`
  1291→- `exportVTT()`
  1292→
  1293→### lib/zooms/main.js (33KB)
  1294→
  1295→**Zoom System**:
  1296→- `ZoomsHighlight` class
  1297→- `ZoomsTranscript` class
  1298→- `quantizeTranscript()`
  1299→- `zoomClipsChangeListener()`
  1300→- `onZoomsChangeCallback()`
  1301→
  1302→### lib/workflows/ui.js (34 functions)
  1303→
  1304→**Workflow UI**:
  1305→- `workflowsRenderList()`
  1306→- `workflowsRenderEditor()`
  1307→- `workflowsRenderSilenceStepSettings()`
  1308→- `workflowsRenderZoomsStepSettings()`
  1309→- `workflowsRenderBrollStepSettings()`
  1310→- `workflowsRenderCaptionsStepSettings()`
  1311→- `workflowsLoadChapterClips()`
  1312→
  1313→---
  1314→
  1315→**End of Complete Deobfuscation Analysis**
  1316→
  1317→For questions or further analysis, please contact the SPLICE development team.
  1318→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
