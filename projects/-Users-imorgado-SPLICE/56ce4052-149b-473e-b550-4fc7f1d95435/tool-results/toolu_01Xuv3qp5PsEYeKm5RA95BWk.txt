     1→/**
     2→ * YouTube Routes
     3→ *
     4→ * YouTube content generation endpoints
     5→ */
     6→
     7→const express = require('express');
     8→
     9→/**
    10→ * Create YouTube routes
    11→ * @param {Object} options - Route configuration options
    12→ * @param {Object} options.middleware - Shared middleware (requireCredits)
    13→ * @returns {express.Router}
    14→ */
    15→function createYouTubeRoutes(options = {}) {
    16→  const router = express.Router();
    17→  const { requireCredits } = options.middleware || {};
    18→
    19→  /**
    20→   * POST /description - Generate YouTube video description
    21→   *
    22→   * Creates SEO-optimized description with summary, key points,
    23→   * timestamps, and hashtags from transcript.
    24→   */
    25→  router.post('/description', requireCredits({ endpoint: 'youtube' }), async (req, res) => {
    26→    const { transcript, options: genOptions = {} } = req.body;
    27→
    28→    if (!transcript) {
    29→      return res.status(400).json({ error: 'transcript is required' });
    30→    }
    31→
    32→    try {
    33→      const { generateDescription } = require('../services/youtubeGenerator');
    34→      const result = await generateDescription(transcript, genOptions);
    35→
    36→      if (!result.success) {
    37→        return res.status(400).json({ error: result.error });
    38→      }
    39→
    40→      // Deduct usage based on description length
    41→      if (req.deductUsage) {
    42→        await req.deductUsage(0.5); // 0.5 credits per description
    43→      }
    44→
    45→      res.json(result);
    46→    } catch (err) {
    47→      console.error('[SPLICE] YouTube description error:', err);
    48→      res.status(500).json({ error: err.message });
    49→    }
    50→  });
    51→
    52→  /**
    53→   * POST /title - Generate YouTube video titles
    54→   *
    55→   * Creates multiple title options with different styles.
    56→   */
    57→  router.post('/title', requireCredits({ endpoint: 'youtube' }), async (req, res) => {
    58→    const { transcript, options: genOptions = {} } = req.body;
    59→
    60→    if (!transcript) {
    61→      return res.status(400).json({ error: 'transcript is required' });
    62→    }
    63→
    64→    try {
    65→      const { generateTitle } = require('../services/youtubeGenerator');
    66→      const result = await generateTitle(transcript, genOptions);
    67→
    68→      if (!result.success) {
    69→        return res.status(400).json({ error: result.error });
    70→      }
    71→
    72→      // Deduct usage
    73→      if (req.deductUsage) {
    74→        await req.deductUsage(0.25); // 0.25 credits per title generation
    75→      }
    76→
    77→      res.json(result);
    78→    } catch (err) {
    79→      console.error('[SPLICE] YouTube title error:', err);
    80→      res.status(500).json({ error: err.message });
    81→    }
    82→  });
    83→
    84→  /**
    85→   * POST /shorts - Generate Shorts/TikTok metadata
    86→   *
    87→   * Creates title, caption, and hashtags for short-form content.
    88→   */
    89→  router.post('/shorts', requireCredits({ endpoint: 'youtube' }), async (req, res) => {
    90→    const { transcript, options: genOptions = {} } = req.body;
    91→
    92→    if (!transcript) {
    93→      return res.status(400).json({ error: 'transcript is required' });
    94→    }
    95→
    96→    try {
    97→      const { generateShortsMetadata } = require('../services/youtubeGenerator');
    98→      const result = await generateShortsMetadata(transcript, genOptions);
    99→
   100→      if (!result.success) {
   101→        return res.status(400).json({ error: result.error });
   102→      }
   103→
   104→      // Deduct usage
   105→      if (req.deductUsage) {
   106→        await req.deductUsage(0.25); // 0.25 credits per shorts metadata
   107→      }
   108→
   109→      res.json(result);
   110→    } catch (err) {
   111→      console.error('[SPLICE] YouTube shorts error:', err);
   112→      res.status(500).json({ error: err.message });
   113→    }
   114→  });
   115→
   116→  /**
   117→   * GET /options - Get available generation options
   118→   */
   119→  router.get('/options', (req, res) => {
   120→    const { getGeneratorOptions } = require('../services/youtubeGenerator');
   121→    res.json(getGeneratorOptions());
   122→  });
   123→
   124→  return router;
   125→}
   126→
   127→module.exports = createYouTubeRoutes;
   128→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
