     1→"use client";
     2→
     3→import { useState, Suspense } from "react";
     4→import { useSearchParams } from "next/navigation";
     5→import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
     6→import { Button } from "@/components/ui/button";
     7→import { Input } from "@/components/ui/input";
     8→import { Badge } from "@/components/ui/badge";
     9→import { motion } from "framer-motion";
    10→import { Check, Loader2, CreditCard, Shield, ArrowLeft } from "lucide-react";
    11→import Link from "next/link";
    12→import { Header } from "@/components/landing/Header";
    13→import { Footer } from "@/components/landing/Footer";
    14→
    15→const plans: Record<
    16→  string,
    17→  {
    18→    name: string;
    19→    price: string;
    20→    period: string;
    21→    features: string[];
    22→    popular?: boolean;
    23→  }
    24→> = {
    25→  starter: {
    26→    name: "Starter",
    27→    price: "$15",
    28→    period: "/month",
    29→    features: [
    30→      "4 hours of processing/month",
    31→      "One-click silence removal",
    32→      "2 AI music generations/month",
    33→      "Basic caption templates",
    34→      "Email support",
    35→    ],
    36→  },
    37→  pro: {
    38→    name: "Pro",
    39→    price: "$39",
    40→    period: "/month",
    41→    popular: true,
    42→    features: [
    43→      "15 hours of processing/month",
    44→      "45 min vocal isolation included",
    45→      "10 AI music generations/month",
    46→      "All 5 caption templates",
    47→      "Social reframe & text editing",
    48→      "Priority support",
    49→    ],
    50→  },
    51→  team: {
    52→    name: "Team",
    53→    price: "$129",
    54→    period: "/month",
    55→    features: [
    56→      "50 hours of processing/month",
    57→      "3 hours vocal isolation included",
    58→      "50 AI music generations/month",
    59→      "All features included",
    60→      "Dedicated account manager",
    61→    ],
    62→  },
    63→};
    64→
    65→function CheckoutContent() {
    66→  const searchParams = useSearchParams();
    67→  const planId = searchParams.get("plan") || "pro";
    68→  const plan = plans[planId] || plans.pro;
    69→
    70→  const [email, setEmail] = useState("");
    71→  const [isLoading, setIsLoading] = useState(false);
    72→  const [error, setError] = useState<string | null>(null);
    73→
    74→  const handleCheckout = async () => {
    75→    if (!email) {
    76→      setError("Please enter your email address");
    77→      return;
    78→    }
    79→
    80→    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    81→      setError("Please enter a valid email address");
    82→      return;
    83→    }
    84→
    85→    setIsLoading(true);
    86→    setError(null);
    87→
    88→    try {
    89→      const response = await fetch("/api/checkout", {
    90→        method: "POST",
    91→        headers: {
    92→          "Content-Type": "application/json",
    93→        },
    94→        body: JSON.stringify({
    95→          plan: planId,
    96→          email,
    97→        }),
    98→      });
    99→
   100→      const data = await response.json();
   101→
   102→      if (!response.ok) {
   103→        throw new Error(data.error || "Failed to create checkout session");
   104→      }
   105→
   106→      // Redirect to Stripe checkout
   107→      if (data.url) {
   108→        window.location.href = data.url;
   109→      }
   110→    } catch (err) {
   111→      setError(err instanceof Error ? err.message : "Something went wrong");
   112→      setIsLoading(false);
   113→    }
   114→  };
   115→
   116→  return (
   117→    <div className="min-h-screen dark bg-black text-white">
   118→      <Header />
   119→      <main className="pt-24 pb-16">
   120→        <div className="container mx-auto px-4">
   121→          <div className="max-w-4xl mx-auto">
   122→            {/* Back link */}
   123→            <Link
   124→              href="/pricing"
   125→              className="inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-8"
   126→            >
   127→              <ArrowLeft className="w-4 h-4 mr-2" />
   128→              Back to pricing
   129→            </Link>
   130→
   131→            <div className="grid md:grid-cols-2 gap-8">
   132→              {/* Order summary */}
   133→              <motion.div
   134→                initial={{ opacity: 0, x: -20 }}
   135→                animate={{ opacity: 1, x: 0 }}
   136→                transition={{ duration: 0.5 }}
   137→              >
   138→                <Card>
   139→                  <CardHeader>
   140→                    <CardTitle>Order Summary</CardTitle>
   141→                  </CardHeader>
   142→                  <CardContent>
   143→                    <div className="flex items-start justify-between mb-6">
   144→                      <div>
   145→                        <div className="flex items-center gap-2">
   146→                          <h3 className="text-xl font-bold">{plan.name}</h3>
   147→                          {plan.popular && (
   148→                            <Badge className="bg-gradient-to-r from-violet-600 to-cyan-600">
   149→                              Popular
   150→                            </Badge>
   151→                          )}
   152→                        </div>
   153→                        <p className="text-muted-foreground text-sm mt-1">
   154→                          14-day free trial included
   155→                        </p>
   156→                      </div>
   157→                      <div className="text-right">
   158→                        <span className="text-2xl font-bold">{plan.price}</span>
   159→                        <span className="text-muted-foreground">
   160→                          {plan.period}
   161→                        </span>
   162→                      </div>
   163→                    </div>
   164→
   165→                    <ul className="space-y-2 mb-6">
   166→                      {plan.features.map((feature) => (
   167→                        <li
   168→                          key={feature}
   169→                          className="flex items-start gap-2 text-sm"
   170→                        >
   171→                          <Check className="w-4 h-4 text-green-500 shrink-0 mt-0.5" />
   172→                          {feature}
   173→                        </li>
   174→                      ))}
   175→                    </ul>
   176→
   177→                    <div className="border-t border-border pt-4">
   178→                      <div className="flex justify-between mb-2">
   179→                        <span>Trial period</span>
   180→                        <span className="font-medium">14 days free</span>
   181→                      </div>
   182→                      <div className="flex justify-between text-lg font-bold">
   183→                        <span>Due today</span>
   184→                        <span className="text-green-600">$0.00</span>
   185→                      </div>
   186→                      <p className="text-xs text-muted-foreground mt-2">
   187→                        You won&apos;t be charged until your trial ends.
   188→                        Cancel anytime.
   189→                      </p>
   190→                    </div>
   191→                  </CardContent>
   192→                </Card>
   193→
   194→                {/* Trust badges */}
   195→                <div className="mt-4 flex items-center gap-4 text-sm text-muted-foreground">
   196→                  <div className="flex items-center gap-1">
   197→                    <Shield className="w-4 h-4" />
   198→                    <span>SSL Secured</span>
   199→                  </div>
   200→                  <div className="flex items-center gap-1">
   201→                    <CreditCard className="w-4 h-4" />
   202→                    <span>Powered by Stripe</span>
   203→                  </div>
   204→                </div>
   205→              </motion.div>
   206→
   207→              {/* Checkout form */}
   208→              <motion.div
   209→                initial={{ opacity: 0, x: 20 }}
   210→                animate={{ opacity: 1, x: 0 }}
   211→                transition={{ duration: 0.5, delay: 0.1 }}
   212→              >
   213→                <Card>
   214→                  <CardHeader>
   215→                    <CardTitle>Start Your Free Trial</CardTitle>
   216→                  </CardHeader>
   217→                  <CardContent>
   218→                    <div className="space-y-4">
   219→                      <div>
   220→                        <label
   221→                          htmlFor="email"
   222→                          className="block text-sm font-medium mb-2"
   223→                        >
   224→                          Email address
   225→                        </label>
   226→                        <Input
   227→                          id="email"
   228→                          type="email"
   229→                          placeholder="you@example.com"
   230→                          value={email}
   231→                          onChange={(e) => setEmail(e.target.value)}
   232→                          className="w-full"
   233→                        />
   234→                        <p className="text-xs text-muted-foreground mt-1">
   235→                          We&apos;ll send your license key to this email
   236→                        </p>
   237→                      </div>
   238→
   239→                      {error && (
   240→                        <div className="bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-sm text-red-600">
   241→                          {error}
   242→                        </div>
   243→                      )}
   244→
   245→                      <Button
   246→                        className="w-full bg-gradient-to-r from-violet-600 to-cyan-600 hover:from-violet-700 hover:to-cyan-700"
   247→                        size="lg"
   248→                        onClick={handleCheckout}
   249→                        disabled={isLoading}
   250→                      >
   251→                        {isLoading ? (
   252→                          <>
   253→                            <Loader2 className="w-4 h-4 mr-2 animate-spin" />
   254→                            Processing...
   255→                          </>
   256→                        ) : (
   257→                          <>
   258→                            <CreditCard className="w-4 h-4 mr-2" />
   259→                            Start Free Trial
   260→                          </>
   261→                        )}
   262→                      </Button>
   263→
   264→                      <p className="text-xs text-center text-muted-foreground">
   265→                        By continuing, you agree to our{" "}
   266→                        <Link
   267→                          href="/terms"
   268→                          className="text-primary hover:underline"
   269→                        >
   270→                          Terms of Service
   271→                        </Link>{" "}
   272→                        and{" "}
   273→                        <Link
   274→                          href="/privacy"
   275→                          className="text-primary hover:underline"
   276→                        >
   277→                          Privacy Policy
   278→                        </Link>
   279→                        .
   280→                      </p>
   281→                    </div>
   282→                  </CardContent>
   283→                </Card>
   284→
   285→                {/* FAQ */}
   286→                <div className="mt-6 space-y-4">
   287→                  <h4 className="font-semibold">Common Questions</h4>
   288→                  <div className="space-y-3 text-sm">
   289→                    <div>
   290→                      <p className="font-medium">
   291→                        When will I be charged?
   292→                      </p>
   293→                      <p className="text-muted-foreground">
   294→                        Your 14-day free trial starts immediately. You&apos;ll
   295→                        only be charged after the trial ends.
   296→                      </p>
   297→                    </div>
   298→                    <div>
   299→                      <p className="font-medium">Can I cancel anytime?</p>
   300→                      <p className="text-muted-foreground">
   301→                        Yes, you can cancel your subscription at any time from
   302→                        your account settings.
   303→                      </p>
   304→                    </div>
   305→                    <div>
   306→                      <p className="font-medium">
   307→                        How do I get my license key?
   308→                      </p>
   309→                      <p className="text-muted-foreground">
   310→                        Your license key will be sent to your email immediately
   311→                        after signup.
   312→                      </p>
   313→                    </div>
   314→                  </div>
   315→                </div>
   316→              </motion.div>
   317→            </div>
   318→          </div>
   319→        </div>
   320→      </main>
   321→      <Footer />
   322→    </div>
   323→  );
   324→}
   325→
   326→export default function CheckoutPage() {
   327→  return (
   328→    <Suspense
   329→      fallback={
   330→        <div className="min-h-screen flex items-center justify-center">
   331→          <Loader2 className="w-8 h-8 animate-spin text-primary" />
   332→        </div>
   333→      }
   334→    >
   335→      <CheckoutContent />
   336→    </Suspense>
   337→  );
   338→}
   339→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
